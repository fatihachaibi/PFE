/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[4],{143:function(e,t,s){"use strict";s.r(t),s.d(t,"EmbeddableWrapper",(function(){return w})),s.d(t,"IndexDataVisualizerViewWrapper",(function(){return z})),s.d(t,"DataVisualizerGridEmbeddable",(function(){return grid_embeddable_DataVisualizerGridEmbeddable}));var a=s(2),i=s.n(a),n=s(23),d=s(46),r=s.n(d),u=s(0),o=s(75),l=s.n(o),c=s(20),b=s(21),j=s(35),p=s(26),x=s(11),h=s(5);const m=()=>Object(h.jsx)(c.EuiText,{textAlign:"center"},Object(h.jsx)(c.EuiSpacer,{size:"l"}),Object(h.jsx)(c.EuiLoadingSpinner,{size:"l"}),Object(h.jsx)(c.EuiSpacer,{size:"l"}));var g=s(70),O=s(60),f=s(87),v=s(85);const E=Object(O.b)(),w=({input:e,onOutputChange:t})=>{const[s,a]=Object(u.useState)(E),i=Object(u.useCallback)((e=>{a({...s,...e}),t&&t(e)}),[s,t]),{configs:n,searchQueryLanguage:d,searchString:r,extendedColumns:o,progress:l,setLastRefresh:j}=Object(v.a)(e,s);Object(u.useEffect)((()=>{j(Date.now())}),[null==e?void 0:e.lastReloadRequestTime,j]);const p=Object(u.useCallback)((function(t,s){return t.reduce(((t,a)=>{const i=s.find((e=>e.fieldName===a));return void 0!==i&&(t[a]=Object(h.jsx)(f.a,{item:i,dataView:e.dataView,combinedQuery:{searchQueryLanguage:d,searchString:r},onAddFilter:e.onAddFilter})),t}),{})}),[e,d,r]);return 100===l&&0===n.length?Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flex:"1 0 100%",textAlign:"center"}},Object(h.jsx)(c.EuiText,{size:"xs",color:"subdued"},Object(h.jsx)(c.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued"}),Object(h.jsx)(c.EuiSpacer,{size:"m"}),Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableNoResultsMessage",defaultMessage:"No results found"}))):Object(h.jsx)(g.a,{items:n,pageState:s,updatePageState:i,getItemIdToExpandedRowMap:p,extendedColumns:o,showPreviewByDefault:null==e?void 0:e.showPreviewByDefault,onChange:t,loading:l<100})},z=e=>{const{embeddableInput:t,onOutputChange:s}=e,a=l()(t);return a&&a.dataView?Object(h.jsx)(w,{input:a,onOutputChange:s}):Object(h.jsx)(c.EuiEmptyPrompt,{iconType:"alert",iconColor:"danger",title:Object(h.jsx)("h2",null,Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorTitle",defaultMessage:"Error loading embeddable"})),body:Object(h.jsx)("p",null,Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorDescription",defaultMessage:"There was an error loading the embeddable. Please check if all the required input is valid."}))})};class grid_embeddable_DataVisualizerGridEmbeddable extends j.Embeddable{constructor(e,t,s){super(e,{},s),i()(this,"node",void 0),i()(this,"reload$",new n.Subject),i()(this,"type",x.a),this.services=t}render(e){super.render(e),this.node=e;const t=this.services[0].i18n.Context;r.a.render(Object(h.jsx)(t,null,Object(h.jsx)(p.KibanaThemeProvider,{theme$:this.services[0].theme.theme$},Object(h.jsx)(p.KibanaContextProvider,{services:{...this.services[0],...this.services[1]}},Object(h.jsx)(u.Suspense,{fallback:Object(h.jsx)(m,null)},Object(h.jsx)(z,{id:this.input.id,embeddableContext:this,embeddableInput:this.getInput$(),onOutputChange:e=>this.updateOutput(e)}))))),e)}destroy(){super.destroy(),this.node&&r.a.unmountComponentAtNode(this.node)}reload(){this.reload$.next()}supportedTriggers(){return[]}}}}]);