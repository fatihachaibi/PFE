/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[32],{1367:function(e,t,n){"use strict";n.r(t),n.d(t,"PinnedTabContentComponent",(function(){return T})),n.d(t,"default",(function(){return z}));var i=n(16),l=n(3),o=n(5),a=n.n(o),d=n(23),s=n.n(d),r=n(42),u=n(85),m=n.n(u),c=n(84),p=n(602),g=n(626),h=n(75),b=n(605),y=n(628),P=n(300),f=n(422),E=n(13),w=n(87),C=n(194),v=n(89),F=n(207),I=n(14),O=n(355),j=n(474),S=n(356);const x=s()(i.EuiFlyoutBody).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"sc-1kqzlqh-0"})(["overflow-y:hidden;flex:1;.euiFlyoutBody__overflow{overflow:hidden;mask-image:none;}.euiFlyoutBody__overflowContent{padding:0;height:100%;display:flex;}"]),q=s()(i.EuiFlyoutFooter).withConfig({displayName:"StyledEuiFlyoutFooter",componentId:"sc-1kqzlqh-1"})(["background:none;padding:0;&.euiFlyoutFooter{","}"],(({theme:e})=>`padding: ${e.eui.euiSizeS} 0 0 0;`)),N=s.a.div.withConfig({displayName:"ExitFullScreenContainer",componentId:"sc-1kqzlqh-2"})(["width:180px;"]),_=s()(i.EuiFlexGroup).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-1kqzlqh-3"})(["margin:0;width:100%;overflow:hidden;"]),k=s()(i.EuiFlexItem).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-1kqzlqh-4"})(["overflow:hidden;"]),V=s.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-1kqzlqh-5"})(["width:2px;height:100%;background:",";"],(({theme:e})=>e.eui.euiColorLightShade));V.displayName="VerticalRule";const D=[],T=({columns:e,timelineId:t,itemsPerPage:n,itemsPerPageOptions:i,pinnedEventIds:d,onEventClosed:s,renderCellValue:r,rowRenderers:u,showExpandedDetails:m,sort:c})=>{const{browserFields:w,docValueFields:T,dataViewId:z,loading:M,runtimeMappings:B,selectedPatterns:R}=Object(C.d)(E.SourcererScopeName.timeline),{setTimelineFullScreen:$,timelineFullScreen:L}=Object(v.b)(),A=Object(o.useMemo)((()=>{if(Object(l.isEmpty)(d))return"";const e=Object.entries(d).reduce(((e,[t,n])=>n?{...e,bool:{...e.bool,should:[...e.bool.should,{match_phrase:{_id:t}}]}}:e),{bool:{should:[],minimum_should_match:1}});try{return JSON.stringify(e)}catch{return""}}),[d]),G=Object(o.useMemo)((()=>[...(Object(l.isEmpty)(e)?h.b:e).map((e=>e.id)),...P.h]),[e]),J=Object(o.useMemo)((()=>c.map((({columnId:e,columnType:t,esTypes:n,sortDirection:i})=>({field:e,type:t,direction:i,esTypes:null!=n?n:[]})))),[c]),[K,{events:Q,totalCount:W,pageInfo:H,loadPage:U,updatedAt:X,refetch:Y}]=Object(g.a)({docValueFields:T,endDate:"",id:`pinned-${t}`,indexNames:R,dataViewId:z,fields:G,limit:n,filterQuery:A,runtimeMappings:B,skip:""===A,startDate:"",sort:J,timerangeKind:void 0}),Z=Object(o.useCallback)((()=>{s({tabType:I.l.pinned,timelineId:t})}),[t,s]),ee=Object(o.useMemo)((()=>Object(S.a)(6).map((e=>({...e,headerCellRender:p.a})))),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(_,{"data-test-subj":`${I.l.pinned}-tab`},a.a.createElement(k,{grow:2},L&&null!=$&&a.a.createElement(N,null,a.a.createElement(j.b,{fullScreen:L,setFullScreen:$})),a.a.createElement(f.a,null,a.a.createElement(x,{"data-test-subj":`${I.l.pinned}-tab-flyout-body`,className:"timeline-flyout-body"},a.a.createElement(b.a,{activePage:H.activePage,browserFields:w,data:Q,id:t,refetch:Y,renderCellValue:r,rowRenderers:u,sort:c,tabType:I.l.pinned,totalPages:Object(F.h)({itemsCount:W,itemsPerPage:n}),leadingControlColumns:ee,trailingControlColumns:D})),a.a.createElement(q,{"data-test-subj":`${I.l.pinned}-tab-flyout-footer`,className:"timeline-flyout-footer"},a.a.createElement(y.a,{activePage:H.activePage,"data-test-subj":"timeline-footer",updatedAt:X,height:y.b,id:t,isLive:!1,isLoading:K||M,itemsCount:Q.length,itemsPerPage:n,itemsPerPageOptions:i,onChangePage:U,totalCount:W})))),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null),a.a.createElement(k,{grow:1},a.a.createElement(O.a,{browserFields:w,docValueFields:T,handleOnPanelClosed:Z,runtimeMappings:B,tabType:I.l.pinned,timelineId:t})))))},z=Object(r.connect)((()=>{const e=c.b.getTimelineByIdSelector();return(t,{timelineId:n})=>{var i,l;const o=null!==(i=e(t,n))&&void 0!==i?i:w.a,{columns:a,expandedDetail:d,itemsPerPage:s,itemsPerPageOptions:r,pinnedEventIds:u,sort:m}=o;return{columns:a,timelineId:n,itemsPerPage:s,itemsPerPageOptions:r,pinnedEventIds:u,showExpandedDetails:!!d[I.l.pinned]&&!(null===(l=d[I.l.pinned])||void 0===l||!l.panelView),sort:m}}}),((e,{timelineId:t})=>({onEventClosed:t=>{e(c.a.toggleDetailPanel(t))}})))(a.a.memo(T,((e,t)=>e.itemsPerPage===t.itemsPerPage&&e.onEventClosed===t.onEventClosed&&e.showExpandedDetails===t.showExpandedDetails&&e.timelineId===t.timelineId&&m()(e.columns,t.columns)&&m()(e.itemsPerPageOptions,t.itemsPerPageOptions)&&m()(e.pinnedEventIds,t.pinnedEventIds)&&m()(e.sort,t.sort))))}}]);