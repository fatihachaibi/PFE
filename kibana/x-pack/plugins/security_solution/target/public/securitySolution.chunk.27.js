/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[27],{1379:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return M}));var n=a(3),l=a(16),o=a(5),s=a.n(o),i=a(42),c=a(23),u=a.n(c),r=a(194),d=a(13),m=a(84),p=a(71),E=a(14),b=a(35),N=a(627),w=a(330),g=a(338),y=a(625),j=a(12),h=a(355),I=a(770),O=a(224);const x=u()(l.EuiFlexGroup).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-1wox91s-0"})(["width:100%;margin:0;overflow:hidden;"]),v=u()(l.EuiFlexItem).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-1wox91s-1"})(["overflow-x:hidden;overflow-y:auto;"]),C=u.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-1wox91s-2"})(["width:2px;height:100%;background:",";"],(({theme:e})=>e.eui.euiColorLightShade)),f=u()(l.EuiPanel).withConfig({displayName:"StyledPanel",componentId:"sc-1wox91s-3"})(["border:0;box-shadow:none;"]),F=u()(l.EuiFlexGroup).withConfig({displayName:"StyledEuiFlexGroup",componentId:"sc-1wox91s-4"})(["flex:0;"]),S=u()(l.EuiText).withConfig({displayName:"Username",componentId:"sc-1wox91s-5"})(["font-weight:bold;"]),T=({username:e})=>s.a.createElement(F,{gutterSize:"s",responsive:!1,alignItems:"center"},s.a.createElement(l.EuiFlexItem,{grow:!1},s.a.createElement(l.EuiAvatar,{"data-test-subj":"avatar",name:e,size:"l"})),s.a.createElement(l.EuiFlexItem,null,s.a.createElement(S,null,e))),B=s.a.memo(T),D=({users:e})=>{const t=Object(o.useMemo)((()=>e.map((e=>s.a.createElement(o.Fragment,{key:null===e.updatedBy?void 0:e.updatedBy},s.a.createElement(B,{key:null===e.updatedBy?void 0:e.updatedBy,username:String(e.updatedBy)}),s.a.createElement(l.EuiSpacer,{size:"s"}))))),[e]);return e.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(l.EuiTitle,{size:"xs"},s.a.createElement("h4",null,g.d)),s.a.createElement(l.EuiHorizontalRule,{margin:"s"}),t):null};D.displayName="ParticipantsComponent";const k=s.a.memo(D),z=({timelineId:e})=>{const t=Object(i.useDispatch)(),{kibanaSecuritySolutionsPrivileges:a}=Object(O.a)(),c=Object(o.useMemo)((()=>Object(I.f)()),[]),u=Object(p.b)((t=>c(t,e)));((e,t=!0)=>{Object(o.useEffect)((()=>{const a=e?document.querySelector(e):window;t&&a&&(a.scroll?a.scroll(0,0):a.scrollTo(0,0))}))})("#scrollableNotes",!!u);const g=Object(o.useMemo)((()=>Object(j.createSelector)(m.b.selectTimeline,(e=>{var t,a;return{createdBy:e.createdBy,expandedDetail:null!==(t=e.expandedDetail)&&void 0!==t?t:{},eventIdToNoteIds:null!==(a=null==e?void 0:e.eventIdToNoteIds)&&void 0!==a?a:{},noteIds:e.noteIds,status:e.status}}))),[]),{createdBy:F,expandedDetail:S,eventIdToNoteIds:T,noteIds:D,status:z}=Object(p.a)((t=>g(t,e))),{browserFields:M,docValueFields:A,runtimeMappings:P}=Object(r.d)(d.SourcererScopeName.timeline),G=Object(o.useMemo)((()=>b.c.selectNotesAsCommentsListSelector()),[]),[R,H]=Object(o.useState)(""),V=z===E.k.immutable,_=Object(p.a)(G),L=Object(o.useMemo)((()=>{const e=Object.values(T).reduce(((e,t)=>[...e,...t]),[]);return[...D,...e]}),[D,T]),q=Object(o.useMemo)((()=>_.filter((e=>{var t;return L.includes(null!==(t=null==e?void 0:e.noteId)&&void 0!==t?t:"-1")}))),[_,L]),K=Object(o.useMemo)((()=>Object(n.uniqBy)("updatedBy",Object(n.filter)("savedObjectId",q))),[q]),U=Object(o.useCallback)((a=>t(m.a.addNote({id:e,noteId:a}))),[t,e]),W=Object(o.useCallback)((()=>{t(m.a.toggleDetailPanel({tabType:E.l.notes,timelineId:e}))}),[t,e]),J=Object(o.useMemo)((()=>{var t;return null!==(t=S[E.l.notes])&&void 0!==t&&t.panelView?s.a.createElement(h.a,{browserFields:M,docValueFields:A,handleOnPanelClosed:W,runtimeMappings:P,tabType:E.l.notes,timelineId:e}):null}),[M,A,S,W,P,e]),Q=Object(o.useMemo)((()=>s.a.createElement(s.a.Fragment,null,F&&s.a.createElement(s.a.Fragment,null,s.a.createElement(l.EuiSpacer,{size:"m"}),s.a.createElement(l.EuiTitle,{size:"xs"},s.a.createElement("h4",null,w.c)),s.a.createElement(l.EuiHorizontalRule,{margin:"s"}),s.a.createElement(B,{username:F}),s.a.createElement(l.EuiSpacer,{size:"xxl"})),s.a.createElement(k,{users:K}))),[F,K]);return s.a.createElement(x,null,s.a.createElement(v,{grow:2,id:"scrollableNotes"},s.a.createElement(f,{paddingSize:"s"},s.a.createElement(l.EuiTitle,null,s.a.createElement("h3",null,w.e)),s.a.createElement(l.EuiSpacer,null),s.a.createElement(y.a,{eventIdToNoteIds:T,notes:q,timelineId:e,showTimelineDescription:!0}),s.a.createElement(l.EuiSpacer,{size:"s"}),!V&&!0===a.crud&&s.a.createElement(N.a,{associateNote:U,newNote:R,updateNewNote:H,autoFocusDisabled:!!u}))),s.a.createElement(C,null),s.a.createElement(v,{grow:1},null!=J?J:Q))};z.displayName="NotesTabContentComponent";const M=s.a.memo(z)},627:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(16),l=a(5),o=a.n(l),s=a(23),i=a.n(s),c=a(42),u=a(35),r=a(517),d=a(330),m=a(429);const p=i()(n.EuiFlexItem).withConfig({displayName:"NewNoteTabs",componentId:"sc-co6fvn-0"})(["width:100%;"]);p.displayName="NewNoteTabs";const E=o.a.memo((({note:e,noteInputHeight:t,updateNewNote:a,autoFocusDisabled:n=!1})=>o.a.createElement(p,{"data-test-subj":"new-note-tabs"},o.a.createElement(m.a,{ariaLabel:d.d,onChange:a,value:e,dataTestSubj:"add-a-note",height:t,autoFocusDisabled:n}))));E.displayName="NewNote";const b=i.a.div.withConfig({displayName:"AddNotesContainer",componentId:"sc-1csl9ju-0"})(["margin-bottom:5px;user-select:none;"]);b.displayName="AddNotesContainer";const N=i()(n.EuiFlexGroup).withConfig({displayName:"ButtonsContainer",componentId:"sc-1csl9ju-1"})(["margin-top:5px;"]);N.displayName="ButtonsContainer";const w=o.a.memo((({onCancelAddNote:e})=>o.a.createElement(n.EuiButtonEmpty,{"data-test-subj":"cancel",onClick:e},d.b)));w.displayName="CancelButton";const g=o.a.memo((({associateNote:e,newNote:t,onCancelAddNote:a,updateNewNote:s,autoFocusDisabled:i=!1})=>{const m=Object(c.useDispatch)(),p=Object(l.useCallback)((e=>m(u.a.updateNote({note:e}))),[m]),g=Object(l.useCallback)((()=>Object(r.b)({associateNote:e,newNote:t,updateNewNote:s,updateNote:p})),[e,t,s,p]),y=Object(l.useCallback)((e=>{e.stopPropagation(),"Escape"===e.key&&null!=a&&a()}),[a]);return o.a.createElement(b,{onKeyDown:y,role:"dialog"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(n.EuiScreenReaderOnly,{"data-test-subj":"screenReaderOnly"},o.a.createElement("p",null,d.g)),o.a.createElement(E,{note:t,noteInputHeight:200,updateNewNote:s,autoFocusDisabled:i}),o.a.createElement(N,{gutterSize:"none"},null!=a?o.a.createElement(n.EuiFlexItem,{grow:!1},o.a.createElement(w,{onCancelAddNote:a})):null,o.a.createElement(n.EuiFlexItem,{grow:!1},o.a.createElement(n.EuiButton,{"data-test-subj":"add-note",isDisabled:0===t.trim().length,fill:!0,onClick:g},d.a)))))}));g.displayName="AddNote"}}]);