/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[12,2],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(15),s=n(0),r=n(1),a=n.n(r),c=n(76),o=n(3);const l=(e,t,n,r)=>n?Object(o.jsx)(a.a.Fragment,null,Object(o.jsx)(i.EuiSpacer,{size:"m"}),Object(o.jsx)(i.EuiCallOut,{size:"s",color:"warning",iconType:"alert","data-test-subj":"missingSecretsMessage",title:s.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.missingSecretsValuesLabel",{defaultMessage:"Sensitive information is not imported. Please enter value{encryptedFieldsLength, plural, one {} other {s}} for the following field{encryptedFieldsLength, plural, one {} other {s}}.",values:{encryptedFieldsLength:t}})}),Object(o.jsx)(i.EuiSpacer,{size:"m"})):e?Object(o.jsx)(a.a.Fragment,null,Object(o.jsx)(i.EuiSpacer,{size:"s"}),Object(o.jsx)(i.EuiText,{size:"s","data-test-subj":"rememberValuesMessage"},Object(o.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.rememberValueLabel",defaultMessage:"Remember {encryptedFieldsLength, plural, one {this} other {these}} value. You must reenter {encryptedFieldsLength, plural, one {it} other {them}} each time you edit the connector.",values:{encryptedFieldsLength:t}})),Object(o.jsx)(i.EuiSpacer,{size:"s"})):Object(o.jsx)(a.a.Fragment,null,Object(o.jsx)(i.EuiSpacer,{size:"s"}),Object(o.jsx)(i.EuiCallOut,{size:"s",iconType:"iInCircle","data-test-subj":"reenterValuesMessage",title:r}),Object(o.jsx)(i.EuiSpacer,{size:"m"}))},118:function(e,t,n){"use strict";n.r(t),n.d(t,"API_URL_LABEL",(function(){return s})),n.d(t,"API_URL_HELPTEXT",(function(){return r})),n.d(t,"API_URL_REQUIRED",(function(){return a})),n.d(t,"API_URL_INVALID",(function(){return c})),n.d(t,"API_URL_REQUIRE_HTTPS",(function(){return o})),n.d(t,"AUTHENTICATION_LABEL",(function(){return l})),n.d(t,"REENTER_VALUES_LABEL",(function(){return u})),n.d(t,"USERNAME_LABEL",(function(){return d})),n.d(t,"USERNAME_REQUIRED",(function(){return p})),n.d(t,"PASSWORD_LABEL",(function(){return g})),n.d(t,"PASSWORD_REQUIRED",(function(){return b})),n.d(t,"TITLE_REQUIRED",(function(){return A})),n.d(t,"INCIDENT",(function(){return j})),n.d(t,"SECURITY_INCIDENT",(function(){return E})),n.d(t,"SHORT_DESCRIPTION_LABEL",(function(){return I})),n.d(t,"DESCRIPTION_LABEL",(function(){return v})),n.d(t,"COMMENTS_LABEL",(function(){return f})),n.d(t,"CHOICES_API_ERROR",(function(){return T})),n.d(t,"CATEGORY_LABEL",(function(){return O})),n.d(t,"SUBCATEGORY_LABEL",(function(){return x})),n.d(t,"URGENCY_LABEL",(function(){return m})),n.d(t,"SEVERITY_LABEL",(function(){return y})),n.d(t,"IMPACT_LABEL",(function(){return w})),n.d(t,"PRIORITY_LABEL",(function(){return L})),n.d(t,"API_INFO_ERROR",(function(){return S})),n.d(t,"INSTALL",(function(){return U})),n.d(t,"INSTALLATION_CALLOUT_TITLE",(function(){return _})),n.d(t,"UPDATE_SUCCESS_TOAST_TITLE",(function(){return C})),n.d(t,"UPDATE_SUCCESS_TOAST_TEXT",(function(){return h})),n.d(t,"VISIT_SN_STORE",(function(){return k})),n.d(t,"SETUP_DEV_INSTANCE",(function(){return R})),n.d(t,"SN_INSTANCE_LABEL",(function(){return M})),n.d(t,"UNKNOWN",(function(){return F})),n.d(t,"CORRELATION_ID",(function(){return N})),n.d(t,"CORRELATION_DISPLAY",(function(){return P})),n.d(t,"EVENT",(function(){return B})),n.d(t,"SOURCE",(function(){return D})),n.d(t,"EVENT_CLASS",(function(){return K})),n.d(t,"RESOURCE",(function(){return V})),n.d(t,"NODE",(function(){return W})),n.d(t,"METRIC_NAME",(function(){return q})),n.d(t,"TYPE",(function(){return z})),n.d(t,"MESSAGE_KEY",(function(){return Y})),n.d(t,"SEVERITY_REQUIRED",(function(){return H})),n.d(t,"SEVERITY_REQUIRED_LABEL",(function(){return Q})),n.d(t,"CLIENTID_LABEL",(function(){return G})),n.d(t,"CLIENTSECRET_LABEL",(function(){return $})),n.d(t,"KEY_ID_LABEL",(function(){return X})),n.d(t,"USER_EMAIL_LABEL",(function(){return J})),n.d(t,"PRIVATE_KEY_LABEL",(function(){return Z})),n.d(t,"PRIVATE_KEY_PASSWORD_LABEL",(function(){return ee})),n.d(t,"PRIVATE_KEY_PASSWORD_HELPER_TEXT",(function(){return te})),n.d(t,"CLIENTID_REQUIRED",(function(){return ne})),n.d(t,"PRIVATE_KEY_REQUIRED",(function(){return ie})),n.d(t,"CLIENTSECRET_REQUIRED",(function(){return se})),n.d(t,"USER_EMAIL_REQUIRED",(function(){return re})),n.d(t,"KEYID_REQUIRED",(function(){return ae})),n.d(t,"IS_OAUTH",(function(){return ce}));var i=n(0);const s=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.apiUrlTextFieldLabel",{defaultMessage:"ServiceNow instance URL"}),r=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.apiUrlHelpText",{defaultMessage:"Include the full URL."}),a=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredApiUrlTextField",{defaultMessage:"URL is required."}),c=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.invalidApiUrlTextField",{defaultMessage:"URL is invalid."}),o=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requireHttpsApiUrlTextField",{defaultMessage:"URL must start with https://."}),l=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.authenticationLabel",{defaultMessage:"Authentication"}),u=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.reenterValuesLabel",{defaultMessage:"You must authenticate each time you edit the connector."}),d=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.usernameTextFieldLabel",{defaultMessage:"Username"}),p=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredUsernameTextField",{defaultMessage:"Username is required."}),g=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.passwordTextFieldLabel",{defaultMessage:"Password"}),b=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredPasswordTextField",{defaultMessage:"Password is required."}),A=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.common.requiredShortDescTextField",{defaultMessage:"Short description is required."}),j=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.title",{defaultMessage:"Incident"}),E=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenowSIR.title",{defaultMessage:"Security Incident"}),I=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.titleFieldLabel",{defaultMessage:"Short description (required)"}),v=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.descriptionTextAreaFieldLabel",{defaultMessage:"Description"}),f=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.commentsTextAreaFieldLabel",{defaultMessage:"Additional comments"}),T=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.unableToGetChoicesMessage",{defaultMessage:"Unable to get choices"}),O=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.categoryTitle",{defaultMessage:"Category"}),x=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.subcategoryTitle",{defaultMessage:"Subcategory"}),m=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.urgencySelectFieldLabel",{defaultMessage:"Urgency"}),y=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.severitySelectFieldLabel",{defaultMessage:"Severity"}),w=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.impactSelectFieldLabel",{defaultMessage:"Impact"}),L=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.prioritySelectFieldLabel",{defaultMessage:"Priority"}),S=e=>i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.apiInfoError",{values:{status:e},defaultMessage:"Received status: {status} when attempting to get application information"}),U=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.install",{defaultMessage:"install"}),_=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.installationCalloutTitle",{defaultMessage:"To use this connector, first install the Elastic app from the ServiceNow app store."}),C=e=>i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.updateSuccessToastTitle",{defaultMessage:"{connectorName} connector updated",values:{connectorName:e}}),h=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.updateCalloutText",{defaultMessage:"Connector has been updated."}),k=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.visitSNStore",{defaultMessage:"Visit ServiceNow app store"}),R=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.setupDevInstance",{defaultMessage:"setup a developer instance"}),M=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.snInstanceLabel",{defaultMessage:"ServiceNow instance"}),F=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.unknown",{defaultMessage:"UNKNOWN"}),N=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.correlationID",{defaultMessage:"Correlation ID (optional)"}),P=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.correlationDisplay",{defaultMessage:"Correlation display (optional)"}),B=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenowITOM.event",{defaultMessage:"Event"}),D=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.sourceTextAreaFieldLabel",{defaultMessage:"Source"}),K=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.eventClassTextAreaFieldLabel",{defaultMessage:"Source instance"}),V=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.resourceTextAreaFieldLabel",{defaultMessage:"Resource"}),W=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.nodeTextAreaFieldLabel",{defaultMessage:"Node"}),q=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.metricNameTextAreaFieldLabel",{defaultMessage:"Metric name"}),z=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.typeTextAreaFieldLabel",{defaultMessage:"Type"}),Y=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.messageKeyTextAreaFieldLabel",{defaultMessage:"Message key"}),H=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredSeverityTextField",{defaultMessage:"Severity is required."}),Q=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.severityRequiredSelectFieldLabel",{defaultMessage:"Severity (required)"}),G=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.clientIdTextFieldLabel",{defaultMessage:"Client ID"}),$=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.clientSecretTextFieldLabel",{defaultMessage:"Client Secret"}),X=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.keyIdTextFieldLabel",{defaultMessage:"JWT Verifier Key ID"}),J=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.userEmailTextFieldLabel",{defaultMessage:"User Identifier"}),Z=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.privateKeyTextFieldLabel",{defaultMessage:"Private Key"}),ee=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.privateKeyPassTextFieldLabel",{defaultMessage:"Private Key Password"}),te=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.privateKeyPassLabelHelpText",{defaultMessage:"This is only required if you have set a password on your private key"}),ne=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredClientIdTextField",{defaultMessage:"Client ID is required."}),ie=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredPrivateKeyTextField",{defaultMessage:"Private Key is required."}),se=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredClientSecretTextField",{defaultMessage:"Client Secret is required."}),re=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredUserEmailTextField",{defaultMessage:"User Identifier is required."}),ae=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.requiredKeyIdTextField",{defaultMessage:"JWT Verifier Key ID is required."}),ce=i.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.servicenow.useOAuth",{defaultMessage:"Use OAuth authentication"})},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,...t&&{serviceMessage:t}})},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(1),s=n.n(i),r=n(76),a=n(15),c=n(43),o=n(118),l=n(21),u=n(3);const d=({action:e,errors:t,isLoading:n,readOnly:d,editActionConfig:p})=>{const{docLinks:g}=Object(c.b)().services,{apiUrl:b}=e.config,A=Object(l.e)(b,t.apiUrl),j=Object(i.useCallback)((e=>{var t;return p("apiUrl",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[p]);return Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(a.EuiFormRow,{fullWidth:!0},Object(u.jsx)("p",null,Object(u.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.serviceNowAction.apiUrlHelpLabel",defaultMessage:"Provide the full URL to the desired ServiceNow instance. If you don't have one, {instance}.",values:{instance:Object(u.jsx)(a.EuiLink,{href:g.links.alerting.serviceNowAction,target:"_blank"},o.SETUP_DEV_INSTANCE)}}))),Object(u.jsx)(a.EuiSpacer,{size:"l"}),Object(u.jsx)(a.EuiFormRow,{id:"apiUrl",fullWidth:!0,error:t.apiUrl,isInvalid:A,label:o.API_URL_LABEL,helpText:o.API_URL_HELPTEXT},Object(u.jsx)(a.EuiFieldText,{fullWidth:!0,isInvalid:A,name:"apiUrl",readOnly:d,value:b||"","data-test-subj":"credentialsApiUrlFromInput",onChange:j,onBlur:()=>{b||j()},disabled:n})))},p=Object(i.memo)(d)},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return g}));var i=n(1),s=n.n(i),r=n(15),a=n(118),c=n(21),o=n(117),l=n(3);const u=({action:e,errors:t,isLoading:n,readOnly:u,editActionSecrets:d})=>{var p;const{username:g,password:b}=e.secrets,A=Object(c.e)(g,t.username),j=Object(c.e)(b,t.password),E=Object(i.useCallback)((e=>{var t;return d("username",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[d]),I=Object(i.useCallback)((e=>{var t;return d("password",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[d]);return Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(r.EuiFormRow,{fullWidth:!0},Object(o.a)(!e.id,2,null!==(p=e.isMissingSecrets)&&void 0!==p&&p,a.REENTER_VALUES_LABEL)),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-username",fullWidth:!0,error:t.username,isInvalid:A,label:a.USERNAME_LABEL},Object(l.jsx)(r.EuiFieldText,{fullWidth:!0,isInvalid:A,readOnly:u,name:"connector-servicenow-username",value:g||"","data-test-subj":"connector-servicenow-username-form-input",onChange:E,onBlur:()=>{g||E()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-password",fullWidth:!0,error:t.password,isInvalid:j,label:a.PASSWORD_LABEL},Object(l.jsx)(r.EuiFieldPassword,{fullWidth:!0,readOnly:u,isInvalid:j,name:"connector-servicenow-password",value:b||"","data-test-subj":"connector-servicenow-password-form-input",onChange:I,onBlur:()=>{b||I()},disabled:n})))},d=Object(i.memo)(u),p=({action:e,errors:t,isLoading:n,readOnly:u,editActionSecrets:d,editActionConfig:p})=>{var g;const{clientId:b,userIdentifierValue:A,jwtKeyId:j}=e.config,{clientSecret:E,privateKey:I,privateKeyPassword:v}=e.secrets,f=Object(c.e)(b,t.clientId),T=Object(c.e)(A,t.userIdentifierValue),O=Object(c.e)(j,t.jwtKeyId),x=Object(c.e)(E,t.clientSecret),m=Object(c.e)(I,t.privateKey),y=Object(i.useCallback)((e=>{var t;return p("clientId",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[p]),w=Object(i.useCallback)((e=>{var t;return p("userIdentifierValue",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[p]),L=Object(i.useCallback)((e=>{var t;return p("jwtKeyId",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[p]),S=Object(i.useCallback)((e=>{var t;return d("clientSecret",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[d]),U=Object(i.useCallback)((e=>{var t;return d("privateKey",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[d]),_=Object(i.useCallback)((e=>{var t;return d("privateKeyPassword",null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:"")}),[d]);return Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(r.EuiFormRow,{fullWidth:!0},Object(o.a)(!e.id,3,null!==(g=e.isMissingSecrets)&&void 0!==g&&g,a.REENTER_VALUES_LABEL)),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-client-id",fullWidth:!0,error:t.clientId,isInvalid:f,label:a.CLIENTID_LABEL},Object(l.jsx)(r.EuiFieldText,{fullWidth:!0,isInvalid:f,readOnly:u,name:"connector-servicenow-client-id",value:b||"","data-test-subj":"connector-servicenow-client-id-form-input",onChange:y,onBlur:()=>{b||y()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-useremail",fullWidth:!0,error:t.userEmail,isInvalid:T,label:a.USER_EMAIL_LABEL},Object(l.jsx)(r.EuiFieldText,{fullWidth:!0,isInvalid:T,readOnly:u,name:"connector-servicenow-user-identifier",value:A||"","data-test-subj":"connector-servicenow-user-identifier-form-input",onChange:w,onBlur:()=>{A||w()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-keyid",fullWidth:!0,error:t.keyId,isInvalid:O,label:a.KEY_ID_LABEL},Object(l.jsx)(r.EuiFieldText,{fullWidth:!0,readOnly:u,isInvalid:O,name:"connector-servicenow-jwt-key-id",value:j||"","data-test-subj":"connector-servicenow-jwt-key-id-form-input",onChange:L,onBlur:()=>{j||L()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-client-secret",fullWidth:!0,error:t.clientSecret,isInvalid:x,label:a.CLIENTSECRET_LABEL},Object(l.jsx)(r.EuiFieldPassword,{fullWidth:!0,isInvalid:x,readOnly:u,name:"connector-servicenow-client-secret",value:E||"","data-test-subj":"connector-servicenow-client-secret-form-input",onChange:S,onBlur:()=>{E||S()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-private-key",fullWidth:!0,error:t.privateKey,isInvalid:m,label:a.PRIVATE_KEY_LABEL},Object(l.jsx)(r.EuiTextArea,{fullWidth:!0,readOnly:u,isInvalid:m,name:"connector-servicenow-private-key",value:I||"","data-test-subj":"connector-servicenow-private-key-form-input",onChange:U,onBlur:()=>{I||U()},disabled:n})),Object(l.jsx)(r.EuiFormRow,{id:"connector-servicenow-private-key-password",fullWidth:!0,error:t.privateKeyPassword,label:a.PRIVATE_KEY_PASSWORD_LABEL,helpText:a.PRIVATE_KEY_PASSWORD_HELPER_TEXT},Object(l.jsx)(r.EuiFieldPassword,{fullWidth:!0,readOnly:u,name:"connector-servicenow-private-key-password",value:v||"","data-test-subj":"connector-servicenow-private-key-password-form-input",onChange:_,onBlur:()=>{v||_()},disabled:n})))},g=Object(i.memo)(p)},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(1),s=n.n(i),r=n(15),a=n(0),c=n(76),o=n(3);const l=({onMigrate:e})=>{const t=null!=e?Object(o.jsx)(r.EuiLink,{onClick:e,"data-test-subj":"update-connector-btn"},d):Object(o.jsx)("span",null,d);return Object(o.jsx)(s.a.Fragment,null,Object(o.jsx)(r.EuiCallOut,{size:"m",iconType:"alert","data-test-subj":"snDeprecatedCallout",color:"warning",title:a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutTitle",{defaultMessage:"This connector type is deprecated"})},Object(o.jsx)(c.FormattedMessage,{defaultMessage:"{update} {create} ",id:"xpack.triggersActionsUI.components.builtinActionTypes.servicenow.appInstallationInfo",values:{update:t,create:Object(o.jsx)("span",null,a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutCreate",{defaultMessage:"or create a new one."}))}})),Object(o.jsx)(r.EuiSpacer,{size:"m"}))},u=Object(i.memo)(l),d=a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutMigrate",{defaultMessage:"Update this connector,"})},154:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var i=n(9),s=n(2),r=n(118),a=n(128);async function c({http:e,signal:t,connectorId:n,fields:i}){const r=await e.post(`${s.a}/connector/${encodeURIComponent(n)}/_execute`,{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:i}}}),signal:t});return Object(a.a)(r)}async function o({http:e,signal:t,connector:n,actionTypeId:s}){var a;const{secrets:{username:c,password:o,clientSecret:l,privateKey:u,privateKeyPassword:d},config:{isOAuth:p,apiUrl:g,clientId:b,userIdentifierValue:A,jwtKeyId:j}}=n,E=g.endsWith("/")?g.slice(0,-1):g;let I="Basic "+btoa(c+":"+o);if(p){const t=await e.post(`${i.INTERNAL_BASE_ACTION_API_PATH}/connector/_oauth_access_token`,{body:JSON.stringify({type:"jwt",options:{tokenUrl:`${E}/oauth_token.do`,config:{clientId:b,userIdentifierValue:A,jwtKeyId:j},secrets:{clientSecret:l,privateKey:u,...d&&{privateKeyPassword:d}}}})}),{accessToken:n}=t;I=n}const v=i.snExternalServiceConfig[s],f=await fetch((T=E,O=null!==(a=v.appScope)&&void 0!==a?a:"",`${T}/api/${O}/elastic_api/health`),{method:"GET",signal:t,headers:{Authorization:I}});var T,O;if(!f.ok)throw new Error(Object(r.API_INFO_ERROR)(f.status));return{...(await f.json()).result}}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(1),s=n.n(i),r=n(15),a=n(118),c=n(144),o=n(151),l=n(3);const u=({action:e,errors:t,readOnly:n,isLoading:u,editActionSecrets:d,editActionConfig:p})=>{const[g,b]=Object(i.useState)(e.config.isOAuth);return Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(r.EuiFlexGroup,{direction:"column"},Object(l.jsx)(r.EuiFlexItem,null,Object(l.jsx)(r.EuiTitle,{size:"xxs"},Object(l.jsx)("h4",null,a.SN_INSTANCE_LABEL)),Object(l.jsx)(c.a,{action:e,errors:t,readOnly:n,isLoading:u,editActionConfig:p}))),Object(l.jsx)(r.EuiSpacer,{size:"m"}),Object(l.jsx)(r.EuiFlexGroup,null,Object(l.jsx)(r.EuiFlexItem,null,Object(l.jsx)(r.EuiTitle,{size:"xxs"},Object(l.jsx)("h4",null,a.AUTHENTICATION_LABEL)))),Object(l.jsx)(r.EuiSpacer,{size:"s"}),Object(l.jsx)(r.EuiSwitch,{label:a.IS_OAUTH,disabled:n,checked:g||!1,onChange:e=>{b(e.target.checked),p("isOAuth",e.target.checked),e.target.checked?(d("username",null),d("password",null)):(p("clientId",null),p("userIdentifierValue",null),p("jwtKeyId",null),d("clientSecret",null),d("privateKey",null),d("privateKeyPassword",null))}}),Object(l.jsx)(r.EuiSpacer,{size:"l"}),Object(l.jsx)(r.EuiFlexItem,null,g?Object(l.jsx)(o.b,{action:e,errors:t,readOnly:n,isLoading:u,editActionSecrets:d,editActionConfig:p}):Object(l.jsx)(o.a,{action:e,errors:t,readOnly:n,isLoading:u,editActionSecrets:d})))},d=Object(i.memo)(u)},308:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return B}));var i=n(1),s=n.n(i),r=n(15),a=n(9),c=n(118),o=n(43),l=n(153),u=n(154),d=n(0),p=n(3);const g=e=>`https://store.servicenow.com/sn_appstore_store.do#!/store/application/${e}`,b=({color:e,appId:t})=>Object(p.jsx)(r.EuiButton,{href:g(t),color:e,iconSide:"right",iconType:"popout",target:"_blank"},c.VISIT_SN_STORE),A=Object(i.memo)(b),j=({appId:e})=>Object(p.jsx)(r.EuiLink,{href:g(e),target:"_blank"},c.VISIT_SN_STORE),E=Object(i.memo)(j),I=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.applicationRequiredCallout.content",{defaultMessage:"Please go to the ServiceNow app store and install the application"}),v=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.applicationRequiredCallout.errorMessage",{defaultMessage:"Error message"}),f=({appId:e,message:t})=>Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(r.EuiSpacer,{size:"s"}),Object(p.jsx)(r.EuiCallOut,{size:"m",iconType:"alert","data-test-subj":"snApplicationCallout",color:"danger",title:d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.applicationRequiredCallout",{defaultMessage:"Elastic ServiceNow App not installed"})},Object(p.jsx)("p",null,I),t&&Object(p.jsx)("p",null,v,": ",t),Object(p.jsx)(A,{color:"danger",appId:e})),Object(p.jsx)(r.EuiSpacer,{size:"m"})),T=Object(i.memo)(f);var O=n(21);const x=({appId:e})=>Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(r.EuiSpacer,{size:"s"}),Object(p.jsx)(r.EuiCallOut,{size:"m",iconType:"alert",color:"warning","data-test-subj":"snInstallationCallout",title:c.INSTALLATION_CALLOUT_TITLE},Object(p.jsx)(A,{color:"warning",appId:e})),Object(p.jsx)(r.EuiSpacer,{size:"m"})),m=Object(i.memo)(x);var y=n(76),w=n(144),L=n(151);const S=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.updateFormTitle",{defaultMessage:"Update ServiceNow connector"}),U=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.updateFormInstallTitle",{defaultMessage:"Install the Elastic ServiceNow app"}),_=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.updateFormUrlTitle",{defaultMessage:"Enter your ServiceNow instance URL"}),C=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.updateFormCredentialsTitle",{defaultMessage:"Provide authentication credentials"}),h=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.cancelButtonText",{defaultMessage:"Cancel"}),k=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.confirmButtonText",{defaultMessage:"Update"}),R=d.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.warningMessage",{defaultMessage:"This updates all instances of this connector and cannot be reversed."}),M=({action:e,applicationInfoErrorMsg:t,errors:n,isLoading:i,readOnly:s,editActionSecrets:c,editActionConfig:o,onCancel:l,onConfirm:u})=>{var d,g;const{apiUrl:b,isOAuth:A,jwtKeyId:j,userIdentifierValue:I,clientId:v}=e.config,{username:f,password:x,privateKeyPassword:m,privateKey:M,clientSecret:F}=e.secrets;let N;return N=void 0===b||Object(O.e)(b,n.apiUrl),N=A?N||void 0===j||void 0===I||void 0===v||void 0===m||void 0===M||void 0===F||Object(O.e)(j,n.apiUrl)||Object(O.e)(I,n.userIdentifierValue)||Object(O.e)(v,n.clientId)||Object(O.e)(m,n.privateKeyPassword)||Object(O.e)(M,n.privateKey)||Object(O.e)(F,n.clientSecret):N||void 0===f||void 0===x||Object(O.e)(f,n.username)||Object(O.e)(x,n.password),Object(p.jsx)(r.EuiFlyout,{ownFocus:!0,onClose:l,"data-test-subj":"updateConnectorForm"},Object(p.jsx)(r.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(r.EuiTitle,{size:"m"},Object(p.jsx)("h1",null,S))),Object(p.jsx)(r.EuiFlyoutBody,{banner:Object(p.jsx)(r.EuiCallOut,{size:"m",color:"danger",iconType:"alert","data-test-subj":"snUpdateInstallationCallout",title:R})},Object(p.jsx)(r.EuiFlexGroup,null,Object(p.jsx)(r.EuiSteps,{steps:[{title:U,children:Object(p.jsx)(y.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.serviceNowAction.serviceNowAppRunning",defaultMessage:"The Elastic App from the ServiceNow app store must be installed prior to running the update. {visitLink} to install the app",values:{visitLink:Object(p.jsx)(E,{appId:null!==(d=a.snExternalServiceConfig[e.actionTypeId].appId)&&void 0!==d?d:""})}})},{title:_,children:Object(p.jsx)(w.a,{action:e,errors:n,readOnly:s,isLoading:i,editActionConfig:o})},{title:C,children:A?Object(p.jsx)(L.b,{action:e,errors:n,readOnly:s,isLoading:i,editActionSecrets:c,editActionConfig:o}):Object(p.jsx)(L.a,{action:e,errors:n,readOnly:s,isLoading:i,editActionSecrets:c})}]})),Object(p.jsx)(r.EuiFlexGroup,null,Object(p.jsx)(r.EuiFlexItem,null,t&&Object(p.jsx)(T,{message:t,appId:null!==(g=a.snExternalServiceConfig[e.actionTypeId].appId)&&void 0!==g?g:""})))),Object(p.jsx)(r.EuiFlyoutFooter,null,Object(p.jsx)(r.EuiFlexGroup,{justifyContent:"flexEnd"},Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(r.EuiButtonEmpty,{"data-test-subj":"snUpdateInstallationCancel",onClick:l},h)),Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(r.EuiButton,{"data-test-subj":"snUpdateInstallationSubmit",onClick:u,color:"danger",fill:!0,disabled:N,isLoading:i},k)))))},F=Object(i.memo)(M);var N=n(45),P=n(155);const B=({action:e,editActionSecrets:t,editActionConfig:n,errors:r,readOnly:l,setCallbacks:d})=>{var g,b;const{http:A,notifications:{toasts:j}}=Object(o.b)().services,{config:E,secrets:I}=e,v=!e.isDeprecated,[f,x]=Object(i.useState)(!1),{fetchAppInfo:y,isLoading:w}=(({actionTypeId:e,http:t})=>{const[n,s]=Object(i.useState)(!1),r=Object(i.useRef)(!1),a=Object(i.useRef)(new AbortController),c=Object(i.useCallback)((async n=>{try{r.current=!1,a.current.abort(),a.current=new AbortController,s(!0);const i=await Object(u.a)({signal:a.current.signal,connector:n,actionTypeId:e,http:t});return r.current||s(!1),i}catch(e){throw r.current||s(!1),e}}),[e,t]);return Object(i.useEffect)((()=>()=>{r.current=!0,a.current.abort(),s(!1)}),[]),{fetchAppInfo:c,isLoading:n}})({actionTypeId:e.actionTypeId,http:A}),[L,S]=Object(i.useState)(!1),[U,_]=Object(i.useState)(null),C=Object(i.useCallback)((async()=>{S(!1),_(null);try{const i=await y(e);var t,n;if(Object(O.f)(i))throw new Error(null!==(t=null===(n=i.error)||void 0===n?void 0:n.message)&&void 0!==t?t:c.UNKNOWN);return i}catch(e){throw S(!0),_(e.message),e}}),[e,y]),h=Object(i.useCallback)((async()=>{v&&await C()}),[C,v]);Object(i.useEffect)((()=>d({beforeActionConnectorSave:h})),[h,d]);const k=Object(i.useCallback)((()=>x(!0)),[]),R=Object(i.useCallback)((()=>x(!1)),[]),M=Object(i.useCallback)((async()=>{try{await C(),await Object(N.f)({http:A,connector:{name:e.name,config:{...E,usesTableApi:!1},secrets:{...I}},id:e.id}),n("usesTableApi",!1),x(!1),j.addSuccess({title:c.UPDATE_SUCCESS_TOAST_TITLE(e.name),text:c.UPDATE_SUCCESS_TOAST_TEXT})}catch(e){}}),[C,A,e.name,e.id,I,E,n,j]);return Object(i.useEffect)((()=>{null==E.usesTableApi&&n("usesTableApi",!1)})),Object(p.jsx)(s.a.Fragment,null,f&&Object(p.jsx)(F,{action:e,applicationInfoErrorMsg:U,errors:r,readOnly:l,isLoading:w,editActionSecrets:t,editActionConfig:n,onConfirm:M,onCancel:R}),v&&Object(p.jsx)(m,{appId:null!==(g=a.snExternalServiceConfig[e.actionTypeId].appId)&&void 0!==g?g:""}),!v&&Object(p.jsx)(D,{onMigrate:k}),Object(p.jsx)(P.a,{action:e,errors:r,readOnly:l,isLoading:w,editActionSecrets:t,editActionConfig:n}),L&&v&&Object(p.jsx)(T,{message:U,appId:null!==(b=a.snExternalServiceConfig[e.actionTypeId].appId)&&void 0!==b?b:""}))},D=({onMigrate:e})=>Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(r.EuiSpacer,{size:"s"}),Object(p.jsx)(l.a,{onMigrate:e}))}}]);