/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[72],{268:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return x}));var n=i(1),s=i.n(n),c=i(15),o=i(76),a=i(0),l=i(5),d=i(41),r=i(28),u=i(43),b=i(3);const x=({action:e,editActionConfig:t,errors:i,readOnly:x})=>{const{http:j,docLinks:g}=Object(u.b)().services,{index:p,refresh:m,executionTimeField:h}=e.config,[f,O]=Object(n.useState)(null!=h),[A,T]=Object(n.useState)(null!=h),[F,S]=Object(n.useState)([]),[y,k]=Object(n.useState)([]),[I,E]=Object(n.useState)(!1),M=e=>{e.length>0?(O(!0),k([r.a,...e])):(T(!1),O(!1),k([]))},v=Object(l.debounce)((async e=>{E(!0),S(await Object(r.c)(j,e)),E(!1)}),250);Object(n.useEffect)((()=>{(async()=>{if(p){const e=await Object(r.b)(j,[p]);M(Object(d.a)(e))}})()}),[]);const C=void 0!==i.index&&i.index.length>0&&void 0!==p;return Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(c.EuiTitle,{size:"s"},Object(b.jsx)("h5",null,Object(b.jsx)(o.FormattedMessage,{defaultMessage:"Write to index",id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.connectorSectionTitle"}))),Object(b.jsx)(c.EuiSpacer,{size:"m"}),Object(b.jsx)(c.EuiFormRow,{id:"indexConnectorSelectSearchBox",fullWidth:!0,label:Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.indicesToQueryLabel",defaultMessage:"Index"}),isInvalid:C,error:i.index,helpText:Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.howToBroadenSearchQueryDescription",defaultMessage:"Use * to broaden your query."}),Object(b.jsx)(c.EuiSpacer,{size:"s"}),Object(b.jsx)(c.EuiLink,{href:g.links.alerting.indexAction,target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.configureIndexHelpLabel",defaultMessage:"Configuring index connector."})))},Object(b.jsx)(c.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},async:!0,isLoading:I,isInvalid:C,noSuggestions:!F.length,options:F,"data-test-subj":"connectorIndexesComboBox","data-testid":"connectorIndexesComboBox",selectedOptions:p?[{value:p,label:p}]:[],isDisabled:x,onChange:async e=>{t("index",e.length>0?e[0].value:"");const i=e.map((e=>e.value));if(0===i.length)return void M([]);const n=await Object(r.b)(j,i);M(Object(d.a)(n))},onSearchChange:v,onBlur:()=>{p||t("index","")}})),Object(b.jsx)(c.EuiSpacer,{size:"m"}),Object(b.jsx)(c.EuiSwitch,{"data-test-subj":"indexRefreshCheckbox",checked:m||!1,disabled:x,onChange:e=>{t("refresh",e.target.checked)},label:Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.refreshLabel",defaultMessage:"Refresh index"})," ",Object(b.jsx)(c.EuiIconTip,{position:"right",type:"questionInCircle",content:a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.refreshTooltip",{defaultMessage:"Refresh the affected shards to make this operation visible to search."})}))}),Object(b.jsx)(c.EuiSpacer,{size:"m"}),f&&Object(b.jsx)(c.EuiSwitch,{"data-test-subj":"hasTimeFieldCheckbox",checked:A||!1,disabled:x,onChange:()=>{T(!A),A&&t("executionTimeField",null)},label:Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.defineTimeFieldLabel",defaultMessage:"Define time field for each document"}),Object(b.jsx)(c.EuiIconTip,{position:"right",type:"questionInCircle",content:a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.definedateFieldTooltip",{defaultMessage:"Set this time field to the time the document was indexed."})}))}),A&&Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(c.EuiSpacer,{size:"m"}),Object(b.jsx)(c.EuiFormRow,{id:"executionTimeField",fullWidth:!0,label:Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.executionTimeFieldLabel",defaultMessage:"Time field"})},Object(b.jsx)(c.EuiSelect,{options:y,fullWidth:!0,name:"executionTimeField","data-test-subj":"executionTimeFieldSelect",value:null!=h?h:"",onChange:e=>{var i;t("executionTimeField",null==(i=e.target.value)||""===i.trim()?null:i)},onBlur:()=>{void 0===h&&t("executionTimeField",null)}}))))}}}]);