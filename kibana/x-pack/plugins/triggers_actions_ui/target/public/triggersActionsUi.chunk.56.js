/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[56],{153:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(1),s=i.n(n),a=i(15),o=i(0),c=i(76),r=i(3);const l=({onMigrate:e})=>{const t=null!=e?Object(r.jsx)(a.EuiLink,{onClick:e,"data-test-subj":"update-connector-btn"},d):Object(r.jsx)("span",null,d);return Object(r.jsx)(s.a.Fragment,null,Object(r.jsx)(a.EuiCallOut,{size:"m",iconType:"alert","data-test-subj":"snDeprecatedCallout",color:"warning",title:o.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutTitle",{defaultMessage:"This connector type is deprecated"})},Object(r.jsx)(c.FormattedMessage,{defaultMessage:"{update} {create} ",id:"xpack.triggersActionsUI.components.builtinActionTypes.servicenow.appInstallationInfo",values:{update:t,create:Object(r.jsx)("span",null,o.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutCreate",{defaultMessage:"or create a new one."}))}})),Object(r.jsx)(a.EuiSpacer,{size:"m"}))},u=Object(n.memo)(l),d=o.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.serviceNow.deprecatedCalloutMigrate",{defaultMessage:"Update this connector,"})},285:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return O}));var n=i(1),s=i.n(n),a=i(15),o=i(76),c=i(43),r=i(120),l=i(121),u=i(118),d=i(156),b=i(21),j=i(153),p=i(3);const m=["category","subcategory","priority"],g={category:[],subcategory:[],priority:[]},O=({actionConnector:e,actionParams:t,editAction:i,index:O,errors:x,messageVariables:A})=>{var v,E,y,f,h,I,_;const{docLinks:S,http:T,notifications:{toasts:C}}=Object(c.b)().services,L=null==e?void 0:e.isDeprecated,P=Object(n.useRef)(null!==(v=null==e?void 0:e.id)&&void 0!==v?v:""),{incident:R,comments:w}=Object(n.useMemo)((()=>{var e;return null!==(e=t.subActionParams)&&void 0!==e?e:{incident:{},comments:[]}}),[t.subActionParams]),[F,N]=Object(n.useState)(g),M=Object(n.useCallback)(((e,t)=>{const n="comments"!==e?{incident:{...R,[e]:t},comments:w}:{incident:R,[e]:t};i("subActionParams",n,O)}),[w,i,R,O]),k=Object(n.useCallback)(((e,t)=>{M(e,[{commentId:"1",comment:t}])}),[M]),V=Object(n.useCallback)((e=>{N(e.reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),g))}),[]),{isLoading:U}=Object(d.a)({http:T,toastNotifications:C,actionConnector:e,fields:m,onSuccess:V}),z=Object(n.useMemo)((()=>Object(b.b)(F.category)),[F.category]),W=Object(n.useMemo)((()=>Object(b.b)(F.priority)),[F.priority]),D=Object(n.useMemo)((()=>Object(b.b)(F.subcategory.filter((e=>e.dependent_value===R.category)))),[F.subcategory,R.category]);return Object(n.useEffect)((()=>{null!=e&&P.current!==e.id&&(P.current=e.id,i("subActionParams",{incident:{correlation_id:b.a},comments:[]},O))}),[e]),Object(n.useEffect)((()=>{t.subAction||i("subAction","pushToService",O),t.subActionParams||i("subActionParams",{incident:{correlation_id:b.a},comments:[]},O)}),[t]),Object(p.jsx)(s.a.Fragment,null,L&&Object(p.jsx)(j.a,null),Object(p.jsx)(a.EuiTitle,{size:"s"},Object(p.jsx)("h3",null,u.SECURITY_INCIDENT)),Object(p.jsx)(a.EuiSpacer,{size:"m"}),Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,error:x["subActionParams.incident.short_description"],isInvalid:void 0!==x["subActionParams.incident.short_description"]&&x["subActionParams.incident.short_description"].length>0&&void 0!==R.short_description,label:u.SHORT_DESCRIPTION_LABEL},Object(p.jsx)(l.a,{index:O,editAction:M,messageVariables:A,paramsProperty:"short_description",inputTargetValue:null==R?void 0:R.short_description,errors:x["subActionParams.incident.short_description"]})),Object(p.jsx)(a.EuiSpacer,{size:"m"}),Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,label:u.PRIORITY_LABEL},Object(p.jsx)(a.EuiSelect,{fullWidth:!0,"data-test-subj":"prioritySelect",hasNoInitialSelection:!0,isLoading:U,disabled:U,options:W,value:null!==(E=R.priority)&&void 0!==E?E:void 0,onChange:e=>M("priority",e.target.value)})),Object(p.jsx)(a.EuiSpacer,{size:"m"}),Object(p.jsx)(a.EuiFlexGroup,null,Object(p.jsx)(a.EuiFlexItem,null,Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,label:u.CATEGORY_LABEL},Object(p.jsx)(a.EuiSelect,{fullWidth:!0,"data-test-subj":"categorySelect",hasNoInitialSelection:!0,isLoading:U,disabled:U,options:z,value:null!==(y=R.category)&&void 0!==y?y:void 0,onChange:e=>{i("subActionParams",{incident:{...R,category:e.target.value,subcategory:null},comments:w},O)}}))),Object(p.jsx)(a.EuiFlexItem,null,(null==D?void 0:D.length)>0?Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,label:u.SUBCATEGORY_LABEL},Object(p.jsx)(a.EuiSelect,{fullWidth:!0,"data-test-subj":"subcategorySelect",hasNoInitialSelection:!0,isLoading:U,disabled:U,options:D,value:null!==(f=R.subcategory)&&void 0!==f?f:"",onChange:e=>M("subcategory",e.target.value)})):null)),Object(p.jsx)(a.EuiSpacer,{size:"m"}),!L&&Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(a.EuiFlexGroup,null,Object(p.jsx)(a.EuiFlexItem,null,Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,label:u.CORRELATION_ID,helpText:Object(p.jsx)(a.EuiLink,{href:S.links.alerting.serviceNowSIRAction,target:"_blank"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.serviceNowSIRAction.correlationIDHelpLabel",defaultMessage:"Identifier for updating incidents"}))},Object(p.jsx)(l.a,{index:O,editAction:M,messageVariables:A,paramsProperty:"correlation_id",inputTargetValue:null!==(h=null==R?void 0:R.correlation_id)&&void 0!==h?h:void 0}))),Object(p.jsx)(a.EuiFlexItem,null,Object(p.jsx)(a.EuiFormRow,{fullWidth:!0,label:u.CORRELATION_DISPLAY},Object(p.jsx)(l.a,{index:O,editAction:M,messageVariables:A,paramsProperty:"correlation_display",inputTargetValue:null!==(I=null==R?void 0:R.correlation_display)&&void 0!==I?I:void 0})))),Object(p.jsx)(a.EuiSpacer,{size:"m"})),Object(p.jsx)(r.a,{index:O,editAction:M,messageVariables:A,paramsProperty:"description",inputTargetValue:null!==(_=R.description)&&void 0!==_?_:void 0,label:u.DESCRIPTION_LABEL}),Object(p.jsx)(r.a,{index:O,editAction:k,messageVariables:A,paramsProperty:"comments",inputTargetValue:w&&w.length>0?w[0].comment:void 0,label:u.COMMENTS_LABEL}),Object(p.jsx)(a.EuiSpacer,{size:"m"}))}}}]);