/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[11,13],{107:function(e,t,n){"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function c(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],u=n[a]||0,l="".concat(a," ").concat(u);n[a]=u+1;var d=c(l),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(i[d].references++,i[d].updater(f)):i.push({identifier:l,updater:m(f,t),references:1}),o.push(l)}return o}function a(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var c=r(e.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=l(t,r);else{var i=document.createTextNode(r),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(i,c[t]):e.appendChild(i)}}function f(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var p=null,g=0;function m(e,t){var n,o,r;if(t.singleton){var i=g++;n=p||(p=a(t)),o=d.bind(null,n,i,!1),r=d.bind(null,n,i,!0)}else n=a(t),o=f.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=c(n[o]);i[r].references--}for(var a=s(e,t),u=0;u<n.length;u++){var l=c(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=a}}}},108:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,i=e[1]||"",c=e[3];if(!c)return i;if(t&&"function"==typeof btoa){var s=(n=c,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),a=c.sources.map((function(e){return"/*# sourceURL=".concat(c.sourceRoot||"").concat(e," */")}));return[i].concat(a).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(r[c]=!0)}for(var s=0;s<e.length;s++){var a=[].concat(e[s]);o&&r[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),t.push(a))}},t}},112:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return a}));const o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},r=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function s(e,t){var n,o;return null!==(n=null==t||null===(o=t.authorizedConsumers[e.consumer])||void 0===o?void 0:o.all)&&void 0!==n&&n}const a=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.bind=t.bindTo=t.getRefinement=t.exists=t.elem=t.option=t.MonadThrow=t.Witherable=t.Traversable=t.Filterable=t.Compactable=t.Extend=t.Alternative=t.Alt=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getMonoid=t.getLastMonoid=t.getFirstMonoid=t.getApplyMonoid=t.getApplySemigroup=t.getOrd=t.getEq=t.getShow=t.URI=t.wilt=t.wither=t.sequence=t.traverse=t.partitionMap=t.partition=t.filterMap=t.filter=t.separate=t.compact=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.throwError=t.zero=t.alt=t.flatten=t.chainFirst=t.chain=t.of=t.apSecond=t.apFirst=t.ap=t.map=t.mapNullable=t.getOrElse=t.getOrElseW=t.toUndefined=t.toNullable=t.fold=t.fromEither=t.getRight=t.getLeft=t.tryCatch=t.fromPredicate=t.fromNullable=t.some=t.none=t.isNone=t.isSome=void 0;var o=n(48);function r(e){return null==e?t.none:t.some(e)}function i(e){return"Right"===e._tag?t.none:t.some(e.left)}function c(e){return"Left"===e._tag?t.none:t.some(e.right)}t.isSome=function(e){return"Some"===e._tag},t.isNone=function(e){return"None"===e._tag},t.none={_tag:"None"},t.some=function(e){return{_tag:"Some",value:e}},t.fromNullable=r,t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.getLeft=i,t.getRight=c,t.fromEither=function(e){return"Left"===e._tag?t.none:t.some(e.right)},t.fold=function(e,n){return function(o){return t.isNone(o)?e():n(o.value)}},t.toNullable=function(e){return t.isNone(e)?null:e.value},t.toUndefined=function(e){return t.isNone(e)?void 0:e.value},t.getOrElseW=function(e){return function(n){return t.isNone(n)?e():n.value}},t.getOrElse=t.getOrElseW,t.mapNullable=function(e){return function(n){return t.isNone(n)?t.none:r(e(n.value))}};var s=function(e,n){return o.pipe(e,t.map(n))},a=function(e,n){return o.pipe(e,t.ap(n))},u=function(e,n){return o.pipe(e,t.chain(n))},l=function(e,n,r){return o.pipe(e,t.reduce(n,r))},d=function(e){var n=t.foldMap(e);return function(e,t){return o.pipe(e,n(t))}},f=function(e,n,r){return o.pipe(e,t.reduceRight(n,r))},p=function(e){var n=t.traverse(e);return function(e,t){return o.pipe(e,n(t))}},g=function(e,n){return o.pipe(e,t.alt(n))},m=function(e,n){return o.pipe(e,t.filter(n))},j=function(e,n){return o.pipe(e,t.filterMap(n))},b=function(e,n){return o.pipe(e,t.extend(n))},x=function(e,n){return o.pipe(e,t.partition(n))},v=function(e,n){return o.pipe(e,t.partitionMap(n))},O=function(e){var n=t.wither(e);return function(e,t){return o.pipe(e,n(t))}},h=function(e){var n=t.wilt(e);return function(e,t){return o.pipe(e,n(t))}};t.map=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n.value))}},t.ap=function(e){return function(n){return t.isNone(n)||t.isNone(e)?t.none:t.some(n.value(e.value))}},t.apFirst=function(e){return o.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return o.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.some,t.chain=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.chainFirst=function(e){return t.chain((function(n){return o.pipe(e(n),t.map((function(){return n})))}))},t.flatten=t.chain(o.identity),t.alt=function(e){return function(n){return t.isNone(n)?e():n}},t.zero=function(){return t.none},t.throwError=function(){return t.none},t.extend=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n))}},t.duplicate=t.extend(o.identity),t.reduce=function(e,n){return function(o){return t.isNone(o)?e:n(e,o.value)}},t.foldMap=function(e){return function(n){return function(o){return t.isNone(o)?e.empty:n(o.value)}}},t.reduceRight=function(e,n){return function(o){return t.isNone(o)?e:n(o.value,e)}},t.compact=t.flatten;var y={left:t.none,right:t.none};function E(e){return{equals:function(n,o){return n===o||(t.isNone(n)?t.isNone(o):!t.isNone(o)&&e.equals(n.value,o.value))}}}function C(e){return{concat:function(n,o){return t.isSome(n)&&t.isSome(o)?t.some(e.concat(n.value,o.value)):t.none}}}t.separate=function(e){var n=o.pipe(e,t.map((function(e){return{left:i(e),right:c(e)}})));return t.isNone(n)?y:n.value},t.filter=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)?n:t.none}},t.filterMap=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.partition=function(e){return function(n){return{left:o.pipe(n,t.filter((function(t){return!e(t)}))),right:o.pipe(n,t.filter(e))}}},t.partitionMap=function(e){return function(n){return t.separate(o.pipe(n,t.map(e)))}},t.traverse=function(e){return function(n){return function(o){return t.isNone(o)?e.of(t.none):e.map(n(o.value),t.some)}}},t.sequence=function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},t.wither=function(e){return function(n){return function(o){return t.isNone(o)?e.of(t.none):n(o.value)}}},t.wilt=function(e){return function(n){return function(r){var s=o.pipe(r,t.map((function(t){return e.map(n(t),(function(e){return{left:i(e),right:c(e)}}))})));return t.isNone(s)?e.of({left:t.none,right:t.none}):s.value}}},t.URI="Option",t.getShow=function(e){return{show:function(n){return t.isNone(n)?"none":"some("+e.show(n.value)+")"}}},t.getEq=E,t.getOrd=function(e){return{equals:E(e).equals,compare:function(n,o){return n===o?0:t.isSome(n)?t.isSome(o)?e.compare(n.value,o.value):1:-1}}},t.getApplySemigroup=C,t.getApplyMonoid=function(e){return{concat:C(e).concat,empty:t.some(e.empty)}},t.getFirstMonoid=function(){return{concat:function(e,n){return t.isNone(e)?n:e},empty:t.none}},t.getLastMonoid=function(){return{concat:function(e,n){return t.isNone(n)?e:n},empty:t.none}},t.getMonoid=function(e){return{concat:function(n,o){return t.isNone(n)?o:t.isNone(o)?n:t.some(e.concat(n.value,o.value))},empty:t.none}},t.Functor={URI:t.URI,map:s},t.Applicative={URI:t.URI,map:s,ap:a,of:t.of},t.Monad={URI:t.URI,map:s,ap:a,of:t.of,chain:u},t.Foldable={URI:t.URI,reduce:l,foldMap:d,reduceRight:f},t.Alt={URI:t.URI,map:s,alt:g},t.Alternative={URI:t.URI,map:s,ap:a,of:t.of,alt:g,zero:t.zero},t.Extend={URI:t.URI,map:s,extend:b},t.Compactable={URI:t.URI,compact:t.compact,separate:t.separate},t.Filterable={URI:t.URI,map:s,compact:t.compact,separate:t.separate,filter:m,filterMap:j,partition:x,partitionMap:v},t.Traversable={URI:t.URI,map:s,reduce:l,foldMap:d,reduceRight:f,traverse:p,sequence:t.sequence},t.Witherable={URI:t.URI,map:s,reduce:l,foldMap:d,reduceRight:f,traverse:p,sequence:t.sequence,compact:t.compact,separate:t.separate,filter:m,filterMap:j,partition:x,partitionMap:v,wither:O,wilt:h},t.MonadThrow={URI:t.URI,map:s,ap:a,of:t.of,chain:u,throwError:t.throwError},t.option={URI:t.URI,map:s,of:t.of,ap:a,chain:u,reduce:l,foldMap:d,reduceRight:f,traverse:p,sequence:t.sequence,zero:t.zero,alt:g,extend:b,compact:t.compact,separate:t.separate,filter:m,filterMap:j,partition:x,partitionMap:v,wither:O,wilt:h,throwError:t.throwError},t.elem=function(e){return function(n,o){return!t.isNone(o)&&e.equals(n,o.value)}},t.exists=function(e){return function(n){return!t.isNone(n)&&e(n.value)}},t.getRefinement=function(e){return function(n){return t.isSome(e(n))}},t.bindTo=function(e){return t.map(o.bindTo_(e))},t.bind=function(e,n){return t.chain((function(r){return o.pipe(n(r),t.map((function(t){return o.bind_(r,e,t)})))}))},t.apS=function(e,n){return o.flow(t.map((function(t){return function(n){return o.bind_(t,e,n)}})),t.ap(n))}},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(1);var o=n(15),r=n(3);const i=({children:e})=>Object(r.jsx)(o.EuiEmptyPrompt,{title:Object(r.jsx)(o.EuiLoadingSpinner,{size:"xl"}),body:Object(r.jsx)(o.EuiText,{color:"subdued"},e),"data-test-subj":"sectionLoading"})},130:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var o=n(1),r=n.n(o),i=n(15),c=n(0),s=n(76),a=n(112),u=n(43),l=n(124),d=n(3);async function f(e,t){const n=await(null==t?void 0:t.validateConnector(e)),o=n.config?n.config.errors:{},r=n.secrets?n.secrets.errors:{},i=function(e){const t={errors:{}},n={name:new Array};return t.errors=n,e.name||n.name.push(c.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requiredNameText",{defaultMessage:"Name is required."})),t}(e).errors;return{configErrors:o,secretsErrors:r,connectorBaseErrors:i,connectorErrors:{...o,...r,...i}}}const p=({connector:e,dispatch:t,actionTypeName:n,serverError:f,errors:p,actionTypeRegistry:g,consumer:m,setCallbacks:j,isEdit:b})=>{const{docLinks:x,application:{capabilities:v}}=Object(u.b)().services,O=Object(a.e)(v),h=(e,n)=>{t({command:{type:"setProperty"},payload:{key:e,value:n}})},y=g.get(e.actionTypeId);if(!y)return Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(i.EuiCallOut,{title:c.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningTitleText",{defaultMessage:"Connector type not registered"}),color:"warning",iconType:"help"},Object(d.jsx)(i.EuiText,null,Object(d.jsx)("p",null,Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.connectorTypeConfigurationWarningDescriptionText",defaultMessage:"To create this connector, you must configure at least one {connectorType} account. {docLink}",values:{connectorType:null!=n?n:e.actionTypeId,docLink:Object(d.jsx)(i.EuiLink,{href:x.links.alerting.actionTypes,target:"_blank"},Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),Object(d.jsx)(i.EuiSpacer,null));const E=y.actionConnectorFields,C=void 0!==e.name&&void 0!==p.name&&p.name.length>0;return Object(d.jsx)(i.EuiForm,{isInvalid:!!f,error:null==f?void 0:f.body.message},Object(d.jsx)(i.EuiFormRow,{id:"actionName",fullWidth:!0,label:Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actionNameLabel",defaultMessage:"Connector name"}),isInvalid:C,error:p.name},Object(d.jsx)(i.EuiFieldText,{fullWidth:!0,readOnly:!O,isInvalid:C,name:"name",placeholder:"Untitled","data-test-subj":"nameInput",value:e.name||"",onChange:e=>{h("name",e.target.value)},onBlur:()=>{e.name||h("name","")}})),Object(d.jsx)(i.EuiSpacer,{size:"m"}),null!==E?Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(i.EuiTitle,{size:"xxs"},Object(d.jsx)("h4",null,Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.connectorSettingsLabel",defaultMessage:"Connector settings"}))),Object(d.jsx)(i.EuiSpacer,{size:"s"}),Object(d.jsx)(i.EuiErrorBoundary,null,Object(d.jsx)(o.Suspense,{fallback:Object(d.jsx)(l.a,null,Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorForm.loadingConnectorSettingsDescription",defaultMessage:"Loading connector settings…"}))},Object(d.jsx)(E,{action:e,errors:p,readOnly:!O,editActionConfig:(e,n)=>{t({command:{type:"setConfigProperty"},payload:{key:e,value:n}})},editActionSecrets:(e,n)=>{t({command:{type:"setSecretsProperty"},payload:{key:e,value:n}})},consumer:m,setCallbacks:j,isEdit:b})))):null)}},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(5);const r=()=>(e,t)=>{const{connector:n}=e;switch(t.command.type){case"setConnector":{const{key:n,value:o}=t.payload;return"connector"===n?{...e,connector:o}:e}case"setProperty":{const{key:r,value:i}=t.payload;return Object(o.isEqual)(n[r],i)?e:{...e,connector:{...n,[r]:i}}}case"setConfigProperty":{const{key:r,value:i}=t.payload;return Object(o.isEqual)(n.config[r],i)?e:{...e,connector:{...n,config:{...n.config,[r]:i}}}}case"setSecretsProperty":{const{key:r,value:i}=t.payload;return Object(o.isEqual)(n.secrets[r],i)?e:{...e,connector:{...n,secrets:{...n.secrets,[r]:i}}}}}}},163:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(164);case"v8light":return n(166)}},164:function(e,t,n){var o=n(107),r=n(165);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},165:function(e,t,n){(t=n(108)(!1)).push([e.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),e.exports=t},166:function(e,t,n){var o=n(107),r=n(167);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},167:function(e,t,n){(t=n(108)(!1)).push([e.i,".connectorEditFlyoutTabs{margin-bottom:-24px}\n",""]),e.exports=t},66:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var o=n(1),r=n.n(o),i=n(76),c=n(15),s=n(0),a=n(122),u=n(9),l=n(130),d=n(47),f=n(3);const p=({connector:e,executeEnabled:t,executionResult:n,actionParams:u,setActionParams:l,onExecutAction:p,isExecutingAction:b,actionTypeRegistry:x})=>{const[v,O]=Object(o.useState)({}),[h,y]=Object(o.useState)(!1),E=x.get(e.actionTypeId),C=E.actionParamsFields;Object(o.useEffect)((()=>{(async()=>{const e=(await(null==E?void 0:E.validateParams(u))).errors;O({...e}),y(!!Object.values(e).find((e=>e.length>0)))})()}),[E,u]);const F=[{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.createActionHeader",{defaultMessage:"Create an action"}),children:C?Object(f.jsx)(c.EuiErrorBoundary,null,Object(f.jsx)(o.Suspense,{fallback:Object(f.jsx)(c.EuiFlexGroup,{justifyContent:"center"},Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiLoadingSpinner,{size:"m"})))},Object(f.jsx)(C,{actionParams:u,index:0,errors:v,editAction:(e,t)=>l({...u,[e]:t}),messageVariables:[],actionConnector:e}))):Object(f.jsx)(c.EuiText,null,Object(f.jsx)("p",null,Object(f.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.testConnectorForm.noActionParametersRequiredText",defaultMessage:"This Connector does not require any Action Parameter."})))},{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.runTestHeader",{defaultMessage:"Run the test"}),children:Object(f.jsx)(r.a.Fragment,null,t?null:Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(c.EuiCallOut,{iconType:"alert",color:"warning"},Object(f.jsx)("p",null,Object(f.jsx)(i.FormattedMessage,{defaultMessage:"Save your changes before testing the connector.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestDisabled"}))),Object(f.jsx)(c.EuiSpacer,{size:"s"})),Object(f.jsx)(c.EuiText,null,Object(f.jsx)(c.EuiButton,{iconType:"play",isLoading:b,isDisabled:!t||h||b,"data-test-subj":"executeActionButton",onClick:p},Object(f.jsx)(i.FormattedMessage,{defaultMessage:"Run",id:"xpack.triggersActionsUI.sections.testConnectorForm.executeTestButton"}))))},{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.testResultsHeader",{defaultMessage:"Results"}),children:Object(d.pipe)(n,Object(a.map)((e=>"ok"===e.status?Object(f.jsx)(m,null):Object(f.jsx)(j,{executionResult:e}))),Object(a.getOrElse)((()=>Object(f.jsx)(g,null))))}];return Object(f.jsx)(c.EuiSteps,{steps:F})},g=()=>Object(f.jsx)(c.EuiCallOut,{"data-test-subj":"executionAwaiting"},Object(f.jsx)("p",null,Object(f.jsx)(i.FormattedMessage,{defaultMessage:"When you run the test, the results will show up here.",id:"xpack.triggersActionsUI.sections.testConnectorForm.awaitingExecutionDescription"}))),m=()=>Object(f.jsx)(c.EuiCallOut,{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulTitle",{defaultMessage:"Test was successful",values:{}}),color:"success","data-test-subj":"executionSuccessfulResult",iconType:"check"},Object(f.jsx)("p",null,Object(f.jsx)(i.FormattedMessage,{defaultMessage:"Ensure the results are what you expect.",id:"xpack.triggersActionsUI.sections.testConnectorForm.executionSuccessfulDescription"}))),j=({executionResult:{message:e,serviceMessage:t}})=>{const n=[{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureDescription",{defaultMessage:"The following error was found:"}),description:null!=e?e:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureUnknownReason",{defaultMessage:"Unknown reason"})}];return t&&n.push({title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureAdditionalDetails",{defaultMessage:"Details:"}),description:t}),Object(f.jsx)(c.EuiCallOut,{title:s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.executionFailureTitle",{defaultMessage:"Test failed to run"}),"data-test-subj":"executionFailureResult",color:"danger",iconType:"alert"},Object(f.jsx)(c.EuiDescriptionList,{textStyle:"reverse",listItems:n}))};var b=n(16),x=n(131),v=n(45),O=n(112),h=(n(163),n(43)),y=n(6),E=n(46);const C=({initialConnector:e,onClose:t,tab:n=b.h.Configuration,reloadConnectors:d,consumer:g,actionTypeRegistry:m})=>{const[j,C]=Object(o.useState)(!0),{http:F,notifications:{toasts:M},docLinks:T,application:{capabilities:I}}=Object(h.b)().services,k=()=>({...e,secrets:{}}),w=Object(O.e)(I),U=Object(x.a)(),[{connector:A},S]=Object(o.useReducer)(U,{connector:k()}),[R,N]=Object(o.useState)(!1),[L,B]=Object(o.useState)({configErrors:{},connectorBaseErrors:{},connectorErrors:{},secretsErrors:{}}),_=m.get(A.actionTypeId);Object(o.useEffect)((()=>{(async()=>{N(!0);const e=await Object(l.b)(A,_);C(!!Object.keys(e.connectorErrors).find((t=>e.connectorErrors[t].length>=1))),N(!1),B({...e})})()}),[A,_]);const[P,q]=Object(o.useState)(!1),[z,D]=Object(o.useState)(n),[W,H]=Object(o.useState)(!1),G=e=>{S({command:{type:"setConnector"},payload:{key:"connector",value:e}})},[J,V]=Object(o.useState)({}),[K,Q]=Object(o.useState)(a.none),[X,Y]=Object(o.useState)(!1),Z=Object(o.useCallback)((()=>D((e=>e===b.h.Configuration?b.h.Test:(K!==a.none&&Q(a.none),b.h.Configuration)))),[K]),[$,ee]=Object(o.useState)(null),te=Object(o.useCallback)((()=>{G(k()),H(!1),Q(a.none),t()}),[t]),ne=A.isPreconfigured?Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(c.EuiTitle,{size:"s"},Object(f.jsx)("h3",{id:"flyoutTitle"},Object(f.jsx)(i.FormattedMessage,{defaultMessage:"{connectorName}",id:"xpack.triggersActionsUI.sections.preconfiguredConnectorForm.flyoutTitle",values:{connectorName:e.name}})," ",Object(f.jsx)(c.EuiBetaBadge,{label:"Preconfigured","data-test-subj":"preconfiguredBadge",tooltipContent:s.i18n.translate("xpack.triggersActionsUI.sections.preconfiguredConnectorForm.tooltipContent",{defaultMessage:"This connector is preconfigured and cannot be edited"})}))),Object(f.jsx)(c.EuiText,{size:"s"},Object(f.jsx)(i.FormattedMessage,{defaultMessage:"{actionDescription}",id:"xpack.triggersActionsUI.sections.editConnectorForm.actionTypeDescription",values:{actionDescription:_.selectMessage}}))):Object(f.jsx)(c.EuiTitle,{size:"s"},Object(f.jsx)("h3",{id:"flyoutTitle"},Object(f.jsx)(i.FormattedMessage,{defaultMessage:"Edit connector",id:"xpack.triggersActionsUI.sections.editConnectorForm.flyoutPreconfiguredTitle"}))),oe=async(e=!0)=>{if(j)return void G(Object(y.a)(A,L.configErrors,L.secretsErrors,L.connectorBaseErrors));q(!0);try{var t;await(null==$||null===(t=$.beforeActionConnectorSave)||void 0===t?void 0:t.call($))}catch(e){return void q(!1)}const n=await(async()=>await Object(v.f)({http:F,connector:A,id:A.id}).then((e=>(M.addSuccess(s.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateSuccessNotificationText",{defaultMessage:"Updated '{connectorName}'",values:{connectorName:e.name}})),e))).catch((e=>{var t,n;M.addDanger(null!==(t=null===(n=e.body)||void 0===n?void 0:n.message)&&void 0!==t?t:s.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.updateErrorNotificationText",{defaultMessage:"Cannot update a connector."}))})))();var o;q(!1),n&&(H(!1),await(null==$||null===(o=$.afterActionConnectorSave)||void 0===o?void 0:o.call($,n)),e&&te(),A.isMissingSecrets&&(A.isMissingSecrets=!1),d&&d())};return Object(f.jsx)(c.EuiFlyout,{onClose:te,"aria-labelledby":"flyoutActionEditTitle",size:"m"},Object(f.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(f.jsx)(c.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_?Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiIcon,{type:_.iconClass,size:"m"})):null,Object(f.jsx)(c.EuiFlexItem,null,ne)),Object(f.jsx)(c.EuiTabs,{className:"connectorEditFlyoutTabs"},Object(f.jsx)(c.EuiTab,{onClick:Z,"data-test-subj":"configureConnectorTab",isSelected:b.h.Configuration===z},s.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.tabText",{defaultMessage:"Configuration"})),Object(f.jsx)(c.EuiTab,{onClick:Z,"data-test-subj":"testConnectorTab",isSelected:b.h.Test===z},s.i18n.translate("xpack.triggersActionsUI.sections.testConnectorForm.tabText",{defaultMessage:"Test"})))),Object(f.jsx)(c.EuiFlyoutBody,null,z===b.h.Configuration?A.isPreconfigured?Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(c.EuiText,null,s.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.descriptionText",{defaultMessage:"This connector is readonly."})),Object(f.jsx)(c.EuiLink,{href:T.links.alerting.preconfiguredConnectors,target:"_blank"},Object(f.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.preconfiguredHelpLabel",defaultMessage:"Learn more about preconfigured connectors."}))):Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(l.a,{connector:A,errors:L.connectorErrors,dispatch:e=>{H(!0),Q(a.none),S(e)},actionTypeRegistry:m,consumer:g,setCallbacks:ee,isEdit:!0}),R?Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(c.EuiSpacer,{size:"m"}),Object(f.jsx)(E.a,{size:"l"})," "):Object(f.jsx)(r.a.Fragment,null)):Object(f.jsx)(p,{connector:A,executeEnabled:!W,actionParams:J,setActionParams:V,onExecutAction:()=>(Y(!0),Object(v.c)({id:A.id,params:J,http:F}).then((e=>(Y(!1),Q(Object(a.some)(e)),e))).catch((e=>{const t=Object(u.isActionTypeExecutorResult)(e)?e:{actionId:A.id,status:"error",message:e.message};return Y(!1),Q(Object(a.some)(t)),t}))),isExecutingAction:X,executionResult:K,actionTypeRegistry:m})),Object(f.jsx)(c.EuiFlyoutFooter,null,Object(f.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiButtonEmpty,{onClick:te,"data-test-subj":"cancelSaveEditedConnectorButton"},s.i18n.translate("xpack.triggersActionsUI.sections.editConnectorForm.cancelButtonLabel",{defaultMessage:"Cancel"}))),Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},w&&_&&!A.isPreconfigured?Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiButton,{color:"success","data-test-subj":"saveEditedActionButton",isLoading:P||X,onClick:async()=>{await oe(!1)}},Object(f.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveButtonLabel",defaultMessage:"Save"}))),Object(f.jsx)(c.EuiFlexItem,{grow:!1},Object(f.jsx)(c.EuiButton,{fill:!0,color:"success","data-test-subj":"saveAndCloseEditedActionButton",type:"submit",isLoading:P||X,onClick:async()=>{await oe()}},Object(f.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.editConnectorForm.saveAndCloseButtonLabel",defaultMessage:"Save & close"})))):null)))))}}}]);