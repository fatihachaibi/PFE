/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[27],{132:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return E}));var s=r(40),i=r.n(s),n=r(84),o=r.n(n);function a(e){return`${o()(100*e).format("0,0")}%`}function c(e){if(!e)return"00:00";const t=i.a.duration(e);let r=Math.floor(t.asMinutes()),s=t.seconds();return t.milliseconds()>=500&&(s+=1,60===s&&(s=0,r+=1)),`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}function E(e){return`${o()(e).format("0,0")} ms`}},139:function(e,t,r){(function(t){const r="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r}).call(this,r(174))},140:function(e,t){const r=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:r,MAX_SAFE_COMPONENT_LENGTH:16}},141:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r(1),i=r(15),n=r(132),o=r(3);const a=Object(s.memo)((e=>{const{duration:t,allowZero:r=!0}=e,a=Object(s.useMemo)((()=>r||"number"==typeof t?Object(n.a)(t):"N/A"),[t,r]),c=Object(s.useMemo)((()=>r||"number"==typeof t?Object(n.b)(t):"N/A"),[t,r]);return Object(o.jsx)(i.EuiToolTip,{"data-test-subj":"rule-duration-format-tooltip",content:c},Object(o.jsx)("span",{"data-test-subj":"rule-duration-format-value"},a))}))},148:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r(1);var s=r(15),i=r(3);const n={display:"flex",alignItems:"center",textTransform:"capitalize"},o={marginRight:"8px"},a={success:"success",failure:"danger",unknown:"gray"},c=e=>{const{status:t}=e,r=a[t]||"gray";return Object(i.jsx)("div",{style:n},Object(i.jsx)(s.EuiIcon,{type:"dot",color:r,style:o}),t)}},171:function(e,t,r){const s=r(172);e.exports=(e,t,r)=>s(e,t,r)<0},172:function(e,t,r){const s=r(173);e.exports=(e,t,r)=>new s(e,r).compare(new s(t,r))},173:function(e,t,r){const s=r(139),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=r(140),{re:o,t:a}=r(175),c=r(176),{compareIdentifiers:E}=r(177);class SemVer{constructor(e,t){if(t=c(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);s("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(s("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),E(this.major,e.major)||E(this.minor,e.minor)||E(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(s("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return E(r,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(s("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return E(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},174:function(e,t,r){e.exports=r(65)(656)},175:function(e,t,r){const{MAX_SAFE_COMPONENT_LENGTH:s}=r(140),i=r(139),n=(t=e.exports={}).re=[],o=t.src=[],a=t.t={};let c=0;const E=(e,t,r)=>{const s=c++;i(s,t),a[e]=s,o[s]=t,n[s]=new RegExp(t,r?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","[0-9]+"),E("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),E("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER","[0-9A-Za-z-]+"),E("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),E("FULL",`^${o[a.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),E("LOOSE",`^${o[a.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),E("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),E("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),E("COERCERTL",o[a.COERCE],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0.0.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},176:function(e,t){const r=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:r.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},177:function(e,t){const r=/^[0-9]+$/,s=(e,t)=>{const s=r.test(e),i=r.test(t);return s&&i&&(e=+e,t=+t),e===t?0:s&&!i?-1:i&&!s?1:e<t?-1:1};e.exports={compareIdentifiers:s,rcompareIdentifiers:(e,t)=>s(t,e)}},178:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var s=r(1),i=r(15),n=r(76),o=r(3);const a=1e3,c=e=>{const{documentSize:t=0,visibleDocumentSize:r=a,backToTopAnchor:c}=e,{euiTheme:E}=Object(i.useEuiTheme)(),l=Object(s.useMemo)((()=>({backgroundColor:E.colors.lightestShade,padding:`${E.size.m} ${E.size.base}`,marginTop:`${E.size.xs}`})),[E]);return t<r?null:Object(o.jsx)(i.EuiText,{style:l,textAlign:"center",size:"s"},Object(o.jsx)(n.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.refineSearchPrompt.prompt",defaultMessage:"These are the first {visibleDocumentSize} documents matching your search, refine your search to see others.",values:{visibleDocumentSize:r}}),"Â ",Object(o.jsx)(i.EuiLink,{href:`#${c}`},Object(o.jsx)(n.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.refineSearchPrompt.backToTop",defaultMessage:"Back to top."})))}},185:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var s=r(1),i=r.n(s),n=r(40),o=r.n(n),a=r(171),c=r.n(a),E=r(148),l=r(141),u=r(2),I=r(3);const p="MMM D, YYYY @ HH:mm:ss.SSS",h=e=>{const{columnId:t,value:r,version:s,dateFormat:n=p}=e;return void 0===r?null:"status"===t?Object(I.jsx)(E.a,{status:r}):"timestamp"===t?Object(I.jsx)(i.a.Fragment,null,o()(r).format(n)):u.h.includes(t)?Object(I.jsx)(i.a.Fragment,null,((e,t)=>{if(t)try{if(0===parseInt(e,10)&&c()(t,"8.3.0"))return"--"}catch(t){return e}return e})(r,s)):u.i.includes(t)?Object(I.jsx)(l.a,{duration:parseInt(r,10)}):Object(I.jsx)(i.a.Fragment,null,r)}},304:function(e,t,r){"use strict";r.r(t),r.d(t,"RuleErrorLog",(function(){return O})),r.d(t,"RuleErrorLogWithApi",(function(){return R})),r.d(t,"default",(function(){return R}));var s=r(1),i=r(0),n=r(78),o=r.n(n),a=r(15),c=r(43),E=r(178),l=r(126),u=r(185),I=r(3);const p=e=>{var t;return e.includes("now")&&(null===(t=o.a.parse(e))||void 0===t?void 0:t.format())||e},h=i.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.errorLogColumn.apiError",{defaultMessage:"Failed to fetch error log"}),m={iconOnly:!0,fill:!1},d=1e3,O=e=>{const{rule:t,loadExecutionLogAggregations:r,refreshToken:n}=e,{uiSettings:o,notifications:l}=Object(c.b)().services,[O,R]=Object(s.useState)([]),[N,L]=Object(s.useState)({pageIndex:0,pageSize:10,totalItemCount:0}),[g,S]=Object(s.useState)({field:"timestamp",direction:"desc"}),[f,T]=Object(s.useState)(!1),[A,$]=Object(s.useState)("now-24h"),[b,j]=Object(s.useState)("now"),[D]=Object(s.useState)((()=>null==o?void 0:o.get("dateFormat"))),[v]=Object(s.useState)((()=>{var e;return(null==o||null===(e=o.get("timepicker:quickRanges"))||void 0===e?void 0:e.map((({from:e,to:t,display:r})=>({start:e,end:t,label:r}))))||[]})),[x,M]=Object(s.useState)(0),P=Object(s.useRef)(!1),F=Object(s.useMemo)((()=>{const{pageIndex:e,pageSize:t}=N;return(e+1)*t>=d}),[N]),w=async()=>{T(!0);try{const e=await r({id:t.id,sort:{[(null==g?void 0:g.field)||"timestamp"]:{order:(null==g?void 0:g.direction)||"desc"}},dateStart:p(A),dateEnd:p(b),page:0,perPage:1});R(e.errors),L({...N,totalItemCount:Math.min(e.totalErrors,d)}),M(e.totalErrors)}catch(e){l.toasts.addDanger({title:h,text:e.body.message})}T(!1)},C=Object(s.useCallback)((({start:e,end:t,isInvalid:r})=>{r||($(e),j(t))}),[$,j]),G=Object(s.useMemo)((()=>[{field:"timestamp",name:i.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.errorLogColumn.timestamp",{defaultMessage:"Timestamp"}),render:e=>Object(I.jsx)(u.a,{columnId:"timestamp",value:e,dateFormat:D}),sortable:!0,width:"250px"},{field:"type",name:i.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.errorLogColumn.type",{defaultMessage:"Type"}),sortable:!1,width:"100px"},{field:"message",name:i.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.errorLogColumn.message",{defaultMessage:"Message"}),sortable:!1}]),[D]),U=Object(s.useMemo)((()=>{const e=N.pageIndex*N.pageSize;return O.sort(((e,t)=>((e,t,r="desc")=>"desc"===r?new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime():new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())(e,t,null==g?void 0:g.direction))).slice(e,e+N.pageSize)}),[O,N.pageIndex,N.pageSize,null==g?void 0:g.direction]);return Object(s.useEffect)((()=>{w()}),[A,b]),Object(s.useEffect)((()=>{P.current&&w(),P.current=!0}),[n]),Object(I.jsx)("div",null,Object(I.jsx)(a.EuiSpacer,null),Object(I.jsx)(a.EuiFlexGroup,null,Object(I.jsx)(a.EuiFlexItem,{grow:!1},Object(I.jsx)(a.EuiSuperDatePicker,{"data-test-subj":"ruleEventLogListDatePicker",width:"auto",isLoading:f,start:A,end:b,onTimeChange:C,onRefresh:()=>{w()},dateFormat:D,commonlyUsedRanges:v,updateButtonProps:m}))),Object(I.jsx)(a.EuiSpacer,null),f&&Object(I.jsx)(a.EuiProgress,{size:"xs",color:"accent","data-test-subj":"ruleEventLogListProgressBar"}),Object(I.jsx)(a.EuiBasicTable,{"data-test-subj":"RuleErrorLog",loading:f,items:null!=U?U:[],columns:G,sorting:{sort:g},pagination:N,onChange:({page:e,sort:t})=>{e&&L((t=>t.pageIndex!==e.index||t.pageSize!==e.size?{...t,pageIndex:e.index,pageSize:e.size}:t)),t&&S((e=>(null==e?void 0:e.direction)!==t.direction?t:e))}}),F&&Object(I.jsx)(E.a,{documentSize:x,visibleDocumentSize:d,backToTopAnchor:"rule_error_log_list"}))},R=Object(l.a)(O)}}]);