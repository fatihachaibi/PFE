/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[50],{125:function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return l}));var n=s(78),a=s.n(n),i=s(0);const o=new RegExp(`^([\\d\\.]+)\\s*(${a.a.units.join("|")})$`),l=e=>{if(e){const t=e.match(o);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(i.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};s(44);const u="/api/triggers_actions_ui"},77:function(e,t,s){"use strict";s.r(t),s.d(t,"usePreviousSnoozeInterval",(function(){return g})),s.d(t,"isRuleSnoozed",(function(){return x})),s.d(t,"RuleStatusDropdown",(function(){return p})),s.d(t,"SnoozePanel",(function(){return m})),s.d(t,"futureTimeToInterval",(function(){return z})),s.d(t,"default",(function(){return p}));var n=s(1),a=s.n(n),i=s(40),o=s.n(i),l=s(0),u=s(15),r=s(125),c=s(3);const b="LL @ LT",d=[[1,"h"],[3,"h"],[8,"h"],[1,"d"]],j="triggersActionsUi_previousSnoozeInterval",g=e=>{let t=localStorage.getItem(j);if(t)try{Object(r.b)(t)}catch(e){t=null,localStorage.removeItem(j)}const s=void 0!==e,a=s?e:t,[i,o]=Object(n.useState)(a);return[i,e=>{if(e.startsWith("-"))throw new Error("Cannot store a negative interval");s||localStorage.setItem(j,e),o(e)}]},x=e=>Boolean(e.isSnoozedUntil&&new Date(e.isSnoozedUntil).getTime()>Date.now()||e.muteAll),p=({rule:e,onRuleChanged:t,disableRule:s,enableRule:a,snoozeRule:i,unsnoozeRule:l,isEditable:r,previousSnoozeInterval:d,hideSnoozeOption:j=!1,direction:p="column"})=>{const[m,z]=Object(n.useState)(e.enabled),[S,k]=Object(n.useState)(x(e)),[h,w]=g(d);Object(n.useEffect)((()=>{z(e.enabled)}),[e.enabled]),Object(n.useEffect)((()=>{k(x(e))}),[e]);const[C,L]=Object(n.useState)(!1),[y,A]=Object(n.useState)(!1),M=Object(n.useCallback)((()=>A((e=>!e))),[A]),F=Object(n.useCallback)((()=>A(!1)),[A]),T=Object(n.useCallback)(((e,t)=>(t&&w(t),i(e,t))),[w,i]),R=Object(n.useCallback)((async n=>{if(e.enabled!==n){L(!0);try{n?await a():await s(),z(!m),t()}finally{L(!1)}}}),[e.enabled,m,t,a,s]),D=Object(n.useCallback)((async(e,s)=>{L(!0);try{if(-1===e)await T(-1,null);else if(0!==e){const t=o()().add(e,s).toISOString();await T(t,`${e}${s}`)}else await l();k(0!==e),t()}finally{L(!1)}}),[L,k,t,T,l]),P=m?S?"warning":"primary":"default",$=m?S?v:f:I,B=m&&S?Object(c.jsx)(u.EuiToolTip,{content:e.muteAll?U:o()(new Date(e.isSnoozedUntil)).format(b)},Object(c.jsx)(u.EuiText,{color:"subdued",size:"xs"},e.muteAll?U:o()(new Date(e.isSnoozedUntil)).fromNow(!0))):null,G=Object(c.jsx)(u.EuiBadge,{color:P,"data-test-subj":"statusDropdownReadonly"},$),_=Object(c.jsx)(u.EuiBadge,{color:P,iconSide:"right",iconType:!C&&r?"arrowDown":void 0,onClick:M,iconOnClick:M,onClickAriaLabel:E,iconOnClickAriaLabel:E,isDisabled:C},$,C&&Object(c.jsx)(u.EuiLoadingSpinner,{style:{marginLeft:"4px",marginRight:"4px"},size:"s"}));return Object(c.jsx)(u.EuiFlexGroup,{direction:p,alignItems:"row"===p?"center":"flexStart",justifyContent:"flexStart",gutterSize:"row"===p?"s":"xs",responsive:!1},Object(c.jsx)(u.EuiFlexItem,{grow:!1},r?Object(c.jsx)(u.EuiPopover,{button:_,isOpen:y&&r,closePopover:F,panelPaddingSize:"s","data-test-subj":"statusDropdown",title:$},Object(c.jsx)(O,{onClosePopover:F,onChangeEnabledStatus:R,onChangeSnooze:D,isEnabled:m,isSnoozed:S,snoozeEndTime:e.isSnoozedUntil,previousSnoozeInterval:h,hideSnoozeOption:j})):G),Object(c.jsx)(u.EuiFlexItem,{"data-test-subj":"remainingSnoozeTime",grow:!1},B))},O=({onChangeEnabledStatus:e,onChangeSnooze:t,onClosePopover:s,isEnabled:i,isSnoozed:l,snoozeEndTime:r,previousSnoozeInterval:d,hideSnoozeOption:j=!1})=>{const g=Object(n.useCallback)((()=>{l?t(0,"m"):e(!0),s()}),[e,s,t,l]),x=Object(n.useCallback)((()=>{e(!1),s()}),[e,s]),p=Object(n.useCallback)(((e,n)=>{t(e,n),s()}),[s,t]);let O=Object(c.jsx)(u.EuiText,{size:"s"},k);l&&r&&(O=Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(u.EuiText,{size:"s"},k)," ",Object(c.jsx)(u.EuiText,{size:"xs",color:"subdued"},o()(r).format(b))));const S=[{id:0,width:360,items:[{name:f,icon:i&&!l?"check":"empty",onClick:g,"data-test-subj":"statusDropdownEnabledItem"},{name:I,icon:i?"empty":"check",onClick:x,"data-test-subj":"statusDropdownDisabledItem"},...j?[]:[{name:O,icon:i&&l?"check":"empty",panel:1,disabled:!i,"data-test-subj":"statusDropdownSnoozeItem"}]]},...j?[]:[{id:1,width:360,title:k,content:Object(c.jsx)(u.EuiPanel,{paddingSize:"none"},Object(c.jsx)(m,{applySnooze:p,interval:z(r),showCancel:l,previousSnoozeInterval:d}))}]];return Object(c.jsx)(u.EuiContextMenu,{"data-test-subj":"ruleStatusMenu",initialPanelId:0,panels:S})},m=({interval:e="3d",isLoading:t=!1,applySnooze:s,showCancel:i,previousSnoozeInterval:o})=>{const[b,j]=Object(n.useState)(Object(r.b)(e).value),[g,x]=Object(n.useState)(Object(r.b)(e).unit),p=Object(n.useCallback)((({target:e})=>j(e.value)),[j]),O=Object(n.useCallback)((({target:e})=>x(e.value)),[x]),m=Object(n.useCallback)((()=>s(-1)),[s]),z=Object(n.useCallback)((()=>s(b,g)),[s,b,g]),f=Object(n.useCallback)((()=>s(0,"m")),[s]),I=o?Object(r.b)(o):null,v=(null==I?void 0:I.value)===b&&(null==I?void 0:I.unit)===g,k=I&&!v&&Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(c.jsx)(u.EuiFlexItem,{grow:!1},Object(c.jsx)(u.EuiButtonEmpty,{style:{height:"1em"},iconType:"refresh","data-test-subj":"ruleSnoozePreviousButton",onClick:()=>s(I.value,I.unit)},l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.previousSnooze",{defaultMessage:"Previous"}))),Object(c.jsx)(u.EuiFlexItem,{grow:!1},Object(c.jsx)(u.EuiText,{color:"subdued",size:"s","data-test-subj":"ruleSnoozePreviousText"},S(I.value,I.unit)))),Object(c.jsx)(u.EuiHorizontalRule,{margin:"s"}));return Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(u.EuiSpacer,{size:"s"}),Object(c.jsx)(u.EuiFlexGroup,{"data-test-subj":"snoozePanel",gutterSize:"xs"},Object(c.jsx)(u.EuiFlexItem,null,Object(c.jsx)(u.EuiFieldNumber,{min:1,value:b,onChange:p,"aria-label":l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalValueLabel",{defaultMessage:"Snooze interval value"}),"data-test-subj":"ruleSnoozeIntervalValue"})),Object(c.jsx)(u.EuiFlexItem,{grow:2},Object(c.jsx)(u.EuiSelect,{id:Object(u.useGeneratedHtmlId)({prefix:"snoozeUnit"}),value:g,onChange:O,"aria-label":l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalUnitLabel",{defaultMessage:"Snooze interval unit"}),options:[{value:"m",text:h},{value:"h",text:w},{value:"d",text:C},{value:"w",text:L},{value:"M",text:y}],"data-test-subj":"ruleSnoozeIntervalUnit"})),Object(c.jsx)(u.EuiFlexItem,{grow:!1},Object(c.jsx)(u.EuiButton,{disabled:!b||b<1,isLoading:t,onClick:z,"data-test-subj":"ruleSnoozeApply"},l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.applySnooze",{defaultMessage:"Apply"})))),Object(c.jsx)(u.EuiHorizontalRule,{margin:"s"}),k,Object(c.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(c.jsx)(u.EuiFlexItem,null,Object(c.jsx)(u.EuiTitle,{size:"xxs"},Object(c.jsx)("h5",null,l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeCommonlyUsed",{defaultMessage:"Commonly used"})))),Object(c.jsx)(u.EuiFlexItem,null),d.map((([e,t])=>Object(c.jsx)(u.EuiFlexItem,{key:`snooze-${e}${t}`},Object(c.jsx)(u.EuiLink,{onClick:()=>s(e,t)},S(e,t)))))),Object(c.jsx)(u.EuiHorizontalRule,{margin:"s"}),Object(c.jsx)(u.EuiFlexGroup,null,Object(c.jsx)(u.EuiFlexItem,null,Object(c.jsx)(u.EuiLink,{onClick:m,"data-test-subj":"ruleSnoozeIndefiniteApply"},l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeIndefinitely",{defaultMessage:"Snooze indefinitely"})))),i&&Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(u.EuiHorizontalRule,{margin:"s"}),Object(c.jsx)(u.EuiFlexGroup,null,Object(c.jsx)(u.EuiFlexItem,{grow:!0},Object(c.jsx)(u.EuiButton,{isLoading:t,color:"danger",onClick:f,"data-test-subj":"ruleSnoozeCancel"},"Cancel snooze")))),Object(c.jsx)(u.EuiSpacer,{size:"s"}))},z=e=>{if(!e)return;const t=o()(e).locale("en").fromNow(!0),[s,n]=t.split(" ");let a,i="a"===s||"an"===s?1:parseInt(s,10);switch(n){case"year":case"years":a="M",i*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${i}${a}`:void 0},S=(e,t)=>1===e?A[t]:o.a.duration(e,t).humanize(),f=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.enabledRuleStatus",{defaultMessage:"Enabled"}),I=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.disabledRuleStatus",{defaultMessage:"Disabled"}),v=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozedRuleStatus",{defaultMessage:"Snoozed"}),k=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeMenuTitle",{defaultMessage:"Snooze"}),E=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusDropdownMenuLabel",{defaultMessage:"Change rule status or snooze"}),h=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.minutesLabel",{defaultMessage:"minutes"}),w=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.hoursLabel",{defaultMessage:"hours"}),C=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.daysLabel",{defaultMessage:"days"}),L=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.weeksLabel",{defaultMessage:"weeks"}),y=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.monthsLabel",{defaultMessage:"months"}),U=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.remainingSnoozeIndefinite",{defaultMessage:"Indefinitely"}),A={m:l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMinute",{defaultMessage:"1 minute"}),h:l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneHour",{defaultMessage:"1 hour"}),d:l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneDay",{defaultMessage:"1 day"}),w:l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneWeek",{defaultMessage:"1 week"}),M:l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMonth",{defaultMessage:"1 month"})}}}]);