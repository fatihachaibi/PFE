/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[83],{102:function(e,t,l){"use strict";l.r(t),l.d(t,"AlertsTableState",(function(){return p})),l.d(t,"default",(function(){return p}));var n=l(1),s=l.n(n),o=l(5),i=l(15),u=l(54),r=l(184),a=l(259),c=l(191),d=l(3);const b={pageSize:10,pageIndex:0},g={id:"",columns:[],sort:[],externalFlyout:{header:()=>null,body:()=>null,footer:()=>null},internalFlyout:{header:()=>null,body:()=>null,footer:()=>null},getRenderCellValue:()=>()=>null},p=({alertsTableConfigurationRegistry:e,configurationId:t,id:l,featureIds:p,flyoutState:j,query:m,pageSize:v,showExpandToDetails:C})=>{var f,O,S,y,h,x;const w=null!==(f=null==e?void 0:e.has(t))&&void 0!==f&&f,z=w?e.get(t):g,A=Object(n.useRef)(new u.Storage(window.localStorage)),I=A.current.get(l),E=I&&I.columns&&!Object(o.isEmpty)(null==I?void 0:I.columns)?null!==(O=null==I?void 0:I.columns)&&void 0!==O?O:[]:null!==(S=null==z?void 0:z.columns)&&void 0!==S?S:[],T=Object(n.useRef)({columns:E,sort:I&&I.sort&&!Object(o.isEmpty)(null==I?void 0:I.sort)?null!==(y=null==I?void 0:I.sort)&&void 0!==y?y:[]:null!==(h=null==z?void 0:z.sort)&&void 0!==h?h:[],visibleColumns:I&&I.visibleColumns&&!Object(o.isEmpty)(null==I?void 0:I.visibleColumns)?null!==(x=null==I?void 0:I.visibleColumns)&&void 0!==x?x:[]:E.map((e=>e.id))}),[k]=Object(n.useState)(!1),[P,_]=Object(n.useState)(T.current.sort),[F,R]=Object(n.useState)({...b,pageSize:null!=v?v:b.pageSize}),[D,q]=Object(n.useState)(T.current.columns),[L,{alerts:Q,isInitializing:U,getInspectQuery:M,refetch:N,totalAlerts:V}]=Object(r.a)({fields:D.map((e=>({field:e.id,include_unmapped:!0}))),featureIds:p,query:m,pagination:F,sort:P,skip:!1}),B=Object(n.useCallback)((e=>{R(e)}),[]),G=Object(n.useCallback)((e=>{const t=e.map((e=>({[e.id]:{order:e.direction}})));T.current={...T.current,sort:t},A.current.set(l,T.current),_(t)}),[l]),H=Object(n.useCallback)(((e,t)=>{q(e),T.current={...T.current,columns:e,visibleColumns:t},A.current.set(l,T.current)}),[l,A]),J=Object(n.useCallback)((()=>({activePage:F.pageIndex,alerts:Q,alertsCount:V,isInitializing:U,isLoading:L,getInspectQuery:M,onColumnsChange:H,onPageChange:B,onSortChange:G,refresh:N,sort:P})),[Q,V,M,U,L,H,B,G,F.pageIndex,N,P]),K=Object(n.useMemo)((()=>{var e;return{alertsTableConfiguration:z,columns:D,bulkActions:[],deletedEventIds:[],disabledCellActions:[],flyoutState:j,pageSize:F.pageSize,pageSizeOptions:[10,20,50,100],leadingControlColumns:[],showCheckboxes:k,showExpandToDetails:C,trailingControlColumns:[],useFetchAlertsData:J,visibleColumns:null!==(e=T.current.visibleColumns)&&void 0!==e?e:[],"data-test-subj":"internalAlertsState"}}),[z,D,j,F.pageSize,k,C,J]);return w?Object(d.jsx)(s.a.Fragment,null,L&&Object(d.jsx)(i.EuiProgress,{size:"xs",color:"accent","data-test-subj":"internalAlertsPageLoading"}),Object(d.jsx)(a.AlertsTable,K)):Object(d.jsx)(i.EuiEmptyPrompt,{"data-test-subj":"alertsTableNoConfiguration",iconType:"watchesApp",title:Object(d.jsx)("h2",null,c.b),body:Object(d.jsx)("p",null,c.a)})}}}]);