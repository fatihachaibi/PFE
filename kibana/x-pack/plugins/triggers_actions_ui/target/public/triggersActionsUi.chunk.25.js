/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[25,13,42],{107:function(e,t,n){"use strict";var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},r=[],a=0;a<e.length;a++){var o=e[a],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=s(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:l,updater:j(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var i=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,b=0;function j(e,t){var n,r,a;if(t.singleton){var i=b++;n=f||(f=u(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=s(n[r]);i[a].references--}for(var u=o(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=u}}}},108:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,a,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var o=(n=s,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(a," */")),u=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(u).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(a[s]=!0)}for(var o=0;o<e.length;o++){var u=[].concat(e[o]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},112:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u}));const r=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},s=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function o(e,t){var n,r;return null!==(n=null==t||null===(r=t.authorizedConsumers[e.consumer])||void 0===r?void 0:r.all)&&void 0!==n&&n}const u=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.bind=t.bindTo=t.getRefinement=t.exists=t.elem=t.option=t.MonadThrow=t.Witherable=t.Traversable=t.Filterable=t.Compactable=t.Extend=t.Alternative=t.Alt=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getMonoid=t.getLastMonoid=t.getFirstMonoid=t.getApplyMonoid=t.getApplySemigroup=t.getOrd=t.getEq=t.getShow=t.URI=t.wilt=t.wither=t.sequence=t.traverse=t.partitionMap=t.partition=t.filterMap=t.filter=t.separate=t.compact=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.throwError=t.zero=t.alt=t.flatten=t.chainFirst=t.chain=t.of=t.apSecond=t.apFirst=t.ap=t.map=t.mapNullable=t.getOrElse=t.getOrElseW=t.toUndefined=t.toNullable=t.fold=t.fromEither=t.getRight=t.getLeft=t.tryCatch=t.fromPredicate=t.fromNullable=t.some=t.none=t.isNone=t.isSome=void 0;var r=n(48);function a(e){return null==e?t.none:t.some(e)}function i(e){return"Right"===e._tag?t.none:t.some(e.left)}function s(e){return"Left"===e._tag?t.none:t.some(e.right)}t.isSome=function(e){return"Some"===e._tag},t.isNone=function(e){return"None"===e._tag},t.none={_tag:"None"},t.some=function(e){return{_tag:"Some",value:e}},t.fromNullable=a,t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.getLeft=i,t.getRight=s,t.fromEither=function(e){return"Left"===e._tag?t.none:t.some(e.right)},t.fold=function(e,n){return function(r){return t.isNone(r)?e():n(r.value)}},t.toNullable=function(e){return t.isNone(e)?null:e.value},t.toUndefined=function(e){return t.isNone(e)?void 0:e.value},t.getOrElseW=function(e){return function(n){return t.isNone(n)?e():n.value}},t.getOrElse=t.getOrElseW,t.mapNullable=function(e){return function(n){return t.isNone(n)?t.none:a(e(n.value))}};var o=function(e,n){return r.pipe(e,t.map(n))},u=function(e,n){return r.pipe(e,t.ap(n))},c=function(e,n){return r.pipe(e,t.chain(n))},l=function(e,n,a){return r.pipe(e,t.reduce(n,a))},d=function(e){var n=t.foldMap(e);return function(e,t){return r.pipe(e,n(t))}},p=function(e,n,a){return r.pipe(e,t.reduceRight(n,a))},f=function(e){var n=t.traverse(e);return function(e,t){return r.pipe(e,n(t))}},b=function(e,n){return r.pipe(e,t.alt(n))},j=function(e,n){return r.pipe(e,t.filter(n))},g=function(e,n){return r.pipe(e,t.filterMap(n))},x=function(e,n){return r.pipe(e,t.extend(n))},m=function(e,n){return r.pipe(e,t.partition(n))},h=function(e,n){return r.pipe(e,t.partitionMap(n))},v=function(e){var n=t.wither(e);return function(e,t){return r.pipe(e,n(t))}},O=function(e){var n=t.wilt(e);return function(e,t){return r.pipe(e,n(t))}};t.map=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n.value))}},t.ap=function(e){return function(n){return t.isNone(n)||t.isNone(e)?t.none:t.some(n.value(e.value))}},t.apFirst=function(e){return r.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return r.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.some,t.chain=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.chainFirst=function(e){return t.chain((function(n){return r.pipe(e(n),t.map((function(){return n})))}))},t.flatten=t.chain(r.identity),t.alt=function(e){return function(n){return t.isNone(n)?e():n}},t.zero=function(){return t.none},t.throwError=function(){return t.none},t.extend=function(e){return function(n){return t.isNone(n)?t.none:t.some(e(n))}},t.duplicate=t.extend(r.identity),t.reduce=function(e,n){return function(r){return t.isNone(r)?e:n(e,r.value)}},t.foldMap=function(e){return function(n){return function(r){return t.isNone(r)?e.empty:n(r.value)}}},t.reduceRight=function(e,n){return function(r){return t.isNone(r)?e:n(r.value,e)}},t.compact=t.flatten;var y={left:t.none,right:t.none};function E(e){return{equals:function(n,r){return n===r||(t.isNone(n)?t.isNone(r):!t.isNone(r)&&e.equals(n.value,r.value))}}}function I(e){return{concat:function(n,r){return t.isSome(n)&&t.isSome(r)?t.some(e.concat(n.value,r.value)):t.none}}}t.separate=function(e){var n=r.pipe(e,t.map((function(e){return{left:i(e),right:s(e)}})));return t.isNone(n)?y:n.value},t.filter=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)?n:t.none}},t.filterMap=function(e){return function(n){return t.isNone(n)?t.none:e(n.value)}},t.partition=function(e){return function(n){return{left:r.pipe(n,t.filter((function(t){return!e(t)}))),right:r.pipe(n,t.filter(e))}}},t.partitionMap=function(e){return function(n){return t.separate(r.pipe(n,t.map(e)))}},t.traverse=function(e){return function(n){return function(r){return t.isNone(r)?e.of(t.none):e.map(n(r.value),t.some)}}},t.sequence=function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},t.wither=function(e){return function(n){return function(r){return t.isNone(r)?e.of(t.none):n(r.value)}}},t.wilt=function(e){return function(n){return function(a){var o=r.pipe(a,t.map((function(t){return e.map(n(t),(function(e){return{left:i(e),right:s(e)}}))})));return t.isNone(o)?e.of({left:t.none,right:t.none}):o.value}}},t.URI="Option",t.getShow=function(e){return{show:function(n){return t.isNone(n)?"none":"some("+e.show(n.value)+")"}}},t.getEq=E,t.getOrd=function(e){return{equals:E(e).equals,compare:function(n,r){return n===r?0:t.isSome(n)?t.isSome(r)?e.compare(n.value,r.value):1:-1}}},t.getApplySemigroup=I,t.getApplyMonoid=function(e){return{concat:I(e).concat,empty:t.some(e.empty)}},t.getFirstMonoid=function(){return{concat:function(e,n){return t.isNone(e)?n:e},empty:t.none}},t.getLastMonoid=function(){return{concat:function(e,n){return t.isNone(n)?e:n},empty:t.none}},t.getMonoid=function(e){return{concat:function(n,r){return t.isNone(n)?r:t.isNone(r)?n:t.some(e.concat(n.value,r.value))},empty:t.none}},t.Functor={URI:t.URI,map:o},t.Applicative={URI:t.URI,map:o,ap:u,of:t.of},t.Monad={URI:t.URI,map:o,ap:u,of:t.of,chain:c},t.Foldable={URI:t.URI,reduce:l,foldMap:d,reduceRight:p},t.Alt={URI:t.URI,map:o,alt:b},t.Alternative={URI:t.URI,map:o,ap:u,of:t.of,alt:b,zero:t.zero},t.Extend={URI:t.URI,map:o,extend:x},t.Compactable={URI:t.URI,compact:t.compact,separate:t.separate},t.Filterable={URI:t.URI,map:o,compact:t.compact,separate:t.separate,filter:j,filterMap:g,partition:m,partitionMap:h},t.Traversable={URI:t.URI,map:o,reduce:l,foldMap:d,reduceRight:p,traverse:f,sequence:t.sequence},t.Witherable={URI:t.URI,map:o,reduce:l,foldMap:d,reduceRight:p,traverse:f,sequence:t.sequence,compact:t.compact,separate:t.separate,filter:j,filterMap:g,partition:m,partitionMap:h,wither:v,wilt:O},t.MonadThrow={URI:t.URI,map:o,ap:u,of:t.of,chain:c,throwError:t.throwError},t.option={URI:t.URI,map:o,of:t.of,ap:u,chain:c,reduce:l,foldMap:d,reduceRight:p,traverse:f,sequence:t.sequence,zero:t.zero,alt:b,extend:x,compact:t.compact,separate:t.separate,filter:j,filterMap:g,partition:m,partitionMap:h,wither:v,wilt:O,throwError:t.throwError},t.elem=function(e){return function(n,r){return!t.isNone(r)&&e.equals(n,r.value)}},t.exists=function(e){return function(n){return!t.isNone(n)&&e(n.value)}},t.getRefinement=function(e){return function(n){return t.isSome(e(n))}},t.bindTo=function(e){return t.map(r.bindTo_(e))},t.bind=function(e,n){return t.chain((function(a){return r.pipe(n(a),t.map((function(t){return r.bind_(a,e,t)})))}))},t.apS=function(e,n){return r.flow(t.map((function(t){return function(n){return r.bind_(t,e,n)}})),t.ap(n))}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o}));var r=n(78),a=n.n(r),i=n(0);const s=new RegExp(`^([\\d\\.]+)\\s*(${a.a.units.join("|")})$`),o=e=>{if(e){const t=e.match(s);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(i.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};n(44);const u="/api/triggers_actions_ui"},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(44),a=n(49);const i=Object(r.a)(),s=e=>{if(!Object(r.b)(e))throw new Error(`Invalid enable value ${e}. Allowed values are: ${i.join(", ")}`);return a.a.get()[e]}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5);const a=(e,t)=>{const{rule:n}=e;switch(t.command.type){case"setRule":{const{key:n,value:r}=t.payload;return"rule"===n?{...e,rule:r}:e}case"setProperty":{const{key:a,value:i}=t.payload;return Object(r.isEqual)(n[a],i)?e:{...e,rule:{...n,[a]:i}}}case"setScheduleProperty":{const{key:a,value:i}=t.payload;return n.schedule&&Object(r.isEqual)(n.schedule[a],i)?e:{...e,rule:{...n,schedule:{...n.schedule,[a]:i}}}}case"setRuleParams":{const{key:a,value:i}=t.payload;return Object(r.isEqual)(n.params[a],i)?e:{...e,rule:{...n,params:{...n.params,[a]:i}}}}case"setRuleActionParams":{const{key:a,value:i,index:s}=t.payload;if(void 0===s||null==n.actions[s]||n.actions[s][a]&&Object(r.isEqual)(n.actions[s][a],i))return e;{const t=n.actions.splice(s,1)[0],r={...t,params:{...t.params,[a]:i}};return n.actions.splice(s,0,r),{...e,rule:{...n,actions:[...n.actions]}}}}case"setRuleActionProperty":{const{key:a,value:i,index:s}=t.payload;if(void 0===s||Object(r.isEqual)(n.actions[s][a],i))return e;{const t={...n.actions.splice(s,1)[0],[a]:i};return n.actions.splice(s,0,t),{...e,rule:{...n,actions:[...n.actions]}}}}}}},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n(0),a=n(2);const i=e=>{switch(e){case"connectors":return{text:r.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),href:`${a.m}`};case"rules":return{text:r.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),href:`${a.r}`};default:return{text:r.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules and Connectors"}),href:`${a.n}`}}},s=(e,t)=>({text:t,href:`${a.q.replace(":ruleId",e)}`})},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);const a=e=>{let t;switch(e){case"connectors":t=r.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":t=r.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;default:t=r.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules and Connectors"})}return t}},237:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(238);case"v8light":return n(240)}},238:function(e,t,n){var r=n(107),a=n(239);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},239:function(e,t,n){(t=n(108)(!1)).push([e.i,".ruleActionsPopover__deleteButton{color:#F86B63}\n",""]),e.exports=t},240:function(e,t,n){var r=n(107),a=n(241);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},241:function(e,t,n){(t=n(108)(!1)).push([e.i,".ruleActionsPopover__deleteButton{color:#BD271E}\n",""]),e.exports=t},242:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(243);case"v8light":return n(245)}},243:function(e,t,n){var r=n(107),a=n(244);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},244:function(e,t,n){(t=n(108)(!1)).push([e.i,".rulesList__health{width:100%}.rulesList__health .euiFlexItem:last-of-type{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;min-width:0;width:85%}.ruleDurationWarningIcon{bottom:4px;position:relative}\n",""]),e.exports=t},245:function(e,t,n){var r=n(107),a=n(246);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},246:function(e,t,n){(t=n(108)(!1)).push([e.i,".rulesList__health{width:100%}.rulesList__health .euiFlexItem:last-of-type{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;min-width:0;width:85%}.ruleDurationWarningIcon{bottom:4px;position:relative}\n",""]),e.exports=t},257:function(e,t,n){"use strict";n.r(t),n.d(t,"RuleDetailsRoute",(function(){return ae})),n.d(t,"getRuleData",(function(){return ie})),n.d(t,"default",(function(){return se}));var r=n(0),a=n(1),i=n.n(a),s=n(15),o=n(5),u=n(79),c=n(76),l=n(17),d=n(20),p=n(192),f=n(27),b=n(150),j=(n(237),n(3));const g=({rule:e,canSaveRule:t,onDelete:n,onApiKeyUpdate:i,onEnableDisable:o})=>{const[u,c]=Object(a.useState)(!1);return Object(j.jsx)(s.EuiPopover,{button:Object(j.jsx)(s.EuiButtonEmpty,{disabled:!1,"data-test-subj":"ruleActionsButton","data-testid":"ruleActionsButton",iconType:"boxesHorizontal",onClick:()=>c(!u),"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.popoverButtonTitle",{defaultMessage:"Actions"})}),isOpen:u,closePopover:()=>c(!1),ownFocus:!0,panelPaddingSize:"none"},Object(j.jsx)(s.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:[{disabled:!t,"data-test-subj":"disableButton",onClick:async()=>{c(!1),o(!e.enabled)},name:e.enabled?r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.disableRuleButtonLabel",{defaultMessage:"Disable"}):r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.enableRuleButtonLabel",{defaultMessage:"Enable"})},{disabled:!t,"data-test-subj":"updateAPIKeyButton",onClick:()=>{c(!1),i(e.id)},name:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.updateAPIKeyButtonLabel",{defaultMessage:"Update API key"})},{disabled:!t,className:"ruleActionsPopover__deleteButton","data-test-subj":"deleteRuleButton",onClick:()=>{c(!1),n(e.id)},name:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.deleteRuleButtonLabel",{defaultMessage:"Delete rule"})}]}],className:"ruleActionsPopover","data-test-subj":"ruleActionsPopover","data-testid":"ruleActionsPopover"}))};var x=n(112),m=n(181),h=n(182),v=n(126),O=n(40),y=n.n(O),E=(n(242),n(179)),I=n(142),w=n(180),T=n(103),M=n(104);const A=[120,60,30,15].map((e=>({value:e,text:r.i18n.translate("xpack.triggersActionsUI.sections.executionDurationChart.numberOfExecutionsOption",{defaultMessage:"{value} runs",values:{value:e}})}))),R=({executionDuration:e,numberOfExecutions:t,onChangeDuration:n,isLoading:u})=>{const l=function(e,t){const n=Object.entries(e);return n.length===t?n:n.length<t?Object(o.assign)(Object(o.fill)(new Array(t),[null,null]),n):n.slice(-t)}(e.valuesWithTimestamp,t),d=Object(a.useCallback)((({target:e})=>n(Number(e.value))),[n]);return Object(j.jsx)(s.EuiPanel,{"data-test-subj":"executionDurationChartPanel",hasBorder:!0},Object(j.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiTitle,{size:"xxs"},Object(j.jsx)("h4",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.executionDurationChart.recentDurationsTitle",defaultMessage:"Recent run durations"})))),Object(j.jsx)(s.EuiFlexGroup,{justifyContent:"flexEnd"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiSelect,{id:"select-number-execution-durations",options:A,value:t,"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.executionDurationChart.selectNumberOfExecutionDurationsLabel",{defaultMessage:"Select number of runs"}),onChange:d})))),u&&Object(j.jsx)(s.EuiFlexGroup,{justifyContent:"center"},Object(j.jsx)(s.EuiFlexItem,{grow:!1,style:{height:"80px",justifyContent:"center"}},Object(j.jsx)(s.EuiLoadingChart,{size:"xl"}))),!u&&(e.valuesWithTimestamp&&Object.entries(e.valuesWithTimestamp).length>0?Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(M.Chart,{"data-test-subj":"executionDurationChart",size:{height:80}},Object(j.jsx)(M.Settings,{theme:{lineSeriesStyle:{point:{visible:!1},line:{stroke:T.euiLightVars.euiColorAccent}}}}),Object(j.jsx)(M.BarSeries,{id:"executionDuration",name:r.i18n.translate("xpack.triggersActionsUI.sections.executionDurationChart.durationLabel",{defaultMessage:"Duration"}),xScaleType:"linear",yScaleType:"linear",xAccessor:0,yAccessors:[1],data:l.map((([e,t],n)=>[e?y()(e).format("D MMM YYYY @ HH:mm:ss"):n,t])),minBarHeight:2}),Object(j.jsx)(M.LineSeries,{id:"rule_duration_avg",name:r.i18n.translate("xpack.triggersActionsUI.sections.executionDurationChart.avgDurationLabel",{defaultMessage:"Avg Duration"}),xScaleType:"linear",yScaleType:"linear",xAccessor:0,yAccessors:[1],data:l.map((([t,n],r)=>[t?y()(t).format("D MMM YYYY @ HH:mm:ss"):r,n?e.average:null])),curve:M.CurveType.CURVE_NATURAL}),Object(j.jsx)(M.Axis,{id:"left-axis",position:"left",tickFormat:e=>Object(w.a)(e)}))):Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(s.EuiEmptyPrompt,{"data-test-subj":"executionDurationChartEmpty",body:Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)("p",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.executionDurationChart.executionDurationNoData",defaultMessage:"There is no available run duration information for this rule."})))}))))};var S=n(143),k=n(4);const U=Object(a.lazy)((()=>n.e(9).then(n.bind(null,106)))),D=Object(a.lazy)((()=>n.e(27).then(n.bind(null,304)))),F=Object(a.lazy)((()=>n.e(84).then(n.bind(null,312)))),C=Object(v.a)((function({rule:e,ruleType:t,readOnly:n,ruleSummary:a,muteAlertInstance:o,unmuteAlertInstance:u,requestRefresh:l,refreshToken:p,numberOfExecutions:f,onChangeDuration:b,durationEpoch:g=Date.now(),isLoadingChart:x}){var m;const h=Object.entries(a.alerts).map((([e,n])=>function(e,t,n,r){const a=!(null==r||!r.muted),i="Active"===(null==r?void 0:r.status)?{label:L,actionGroup:_(t,null==r?void 0:r.actionGroupId),healthColor:"primary"}:{label:N,healthColor:"subdued"},s=null!=r&&r.activeStartDate?new Date(r.activeStartDate):void 0,o=s?e-s.valueOf():0,u=function(e){switch(e){case"Active":return 0;case"OK":return 1}return 2}(null==r?void 0:r.status);return{alert:n,status:i,start:s,duration:o,isMuted:a,sortPriority:u}}(g,t,e,n))).sort(((e,t)=>e.sortPriority-t.sortPriority)),v=async t=>{await(t.isMuted?u(e,t.alert):o(e,t.alert)),l()},O=Object(w.b)(t,a.executionDuration.average),T=Object(E.b)(e.executionStatus.status),M=(null===(m=e.executionStatus.error)||void 0===m?void 0:m.reason)===d.RuleExecutionStatusErrorReasons.License?I.a:I.c[e.executionStatus.status],A=()=>Object(k.a)(F,"xl")({items:h,readOnly:n,onMuteAction:v}),C=[{id:"rule_event_log_list",name:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rule.eventLogTabText",{defaultMessage:"Run history"}),"data-test-subj":"eventLogListTab",content:Object(k.a)(U,"xl")({requestRefresh:l,rule:e,refreshToken:p})},{id:"rule_alert_list",name:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rule.alertsTabText",{defaultMessage:"Alerts"}),"data-test-subj":"ruleAlertListTab",content:A()},{id:"rule_error_log_list",name:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rule.errorLogTabText",{defaultMessage:"Error log"}),"data-test-subj":"errorLogTab",content:Object(k.a)(D,"xl")({requestRefresh:l,rule:e,refreshToken:p})}];return Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(s.EuiFlexGroup,null,Object(j.jsx)(s.EuiFlexItem,{grow:1},Object(j.jsx)(s.EuiPanel,{color:"subdued",hasBorder:!1},Object(j.jsx)(s.EuiFlexGroup,{gutterSize:"none",direction:"column",justifyContent:"spaceBetween",responsive:!1,style:{height:"100%"}},Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiStat,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,titleSize:"xs",title:Object(j.jsx)(s.EuiHealth,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,textSize:"inherit",color:T},M),description:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.ruleLastExecutionDescription",{defaultMessage:"Last response"})})),Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)("p",null,Object(j.jsx)(s.EuiText,{size:"xs"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleLastExecutionUpdatedAt",defaultMessage:"Updated"})),Object(j.jsx)(s.EuiText,{color:"subdued",size:"xs"},y()(e.executionStatus.lastExecutionDate).fromNow())))))),Object(j.jsx)(s.EuiFlexItem,{grow:1},Object(j.jsx)(s.EuiPanel,{"data-test-subj":"avgExecutionDurationPanel",color:O?"warning":"subdued",hasBorder:!1},Object(j.jsx)(s.EuiStat,{"data-test-subj":"avgExecutionDurationStat",titleSize:"xs",title:Object(j.jsx)(s.EuiFlexGroup,{gutterSize:"xs"},O&&Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiIconTip,{"data-test-subj":"ruleDurationWarning",anchorClassName:"ruleDurationWarningIcon",type:"alert",color:"warning",content:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.alertsList.ruleTypeExcessDurationMessage",{defaultMessage:"Duration exceeds the rule's expected run time."}),position:"top"})),Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(w.a)(a.executionDuration.average))),description:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.alertsList.avgDurationDescription",{defaultMessage:"Average duration"})}))),Object(j.jsx)(s.EuiFlexItem,{grow:4},Object(j.jsx)(R,{executionDuration:a.executionDuration,numberOfExecutions:f,onChangeDuration:b,isLoading:x}))),Object(j.jsx)(s.EuiSpacer,{size:"xl"}),Object(j.jsx)("input",{type:"hidden","data-test-subj":"alertsDurationEpoch",name:"alertsDurationEpoch",value:g}),Object(S.a)("rulesDetailLogs")?Object(j.jsx)(s.EuiTabbedContent,{"data-test-subj":"ruleDetailsTabbedContent",tabs:C}):A())})),L=r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.status.active",{defaultMessage:"Active"}),N=r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.status.inactive",{defaultMessage:"Recovered"});function _(e,t){var n;t=t||e.defaultActionGroupId;const r=null==e||null===(n=e.actionGroups)||void 0===n?void 0:n.find((e=>e.id===t));return null==r?void 0:r.name}var B=n(43),z=n(46);const P=Object(v.a)((({rule:e,ruleType:t,readOnly:n,requestRefresh:i,loadRuleSummary:s,refreshToken:o})=>{const{notifications:{toasts:u}}=Object(B.b)().services,[c,l]=Object(a.useState)(null),[d,p]=Object(a.useState)(60),[f,b]=Object(a.useState)(!0),g=Object(a.useRef)(null),x=Object(a.useRef)(o),m=Object(a.useCallback)((async(e=d)=>{b(!0),await async function(e,t,n,a,i){try{n(await t(e,i))}catch(e){a.addDanger({title:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules: {message}",values:{message:e.message}})})}}(g.current,s,l,u,e),b(!1)}),[b,g,s,l,u,d]);Object(a.useEffect)((()=>{g.current!==e.id&&(g.current=e.id,m())}),[e,g,m]),Object(a.useEffect)((()=>{x.current!==o&&(x.current=o,m())}),[o,x,m]);const h=Object(a.useCallback)((e=>{p(e),m(e)}),[m]);return c?Object(j.jsx)(C,{requestRefresh:i,refreshToken:o,rule:e,ruleType:t,readOnly:n,ruleSummary:c,numberOfExecutions:d,isLoadingChart:f,onChangeDuration:h}):Object(j.jsx)(z.a,null)}));var q=n(119),W=n.n(q),G=n(122),$=n(47);const H=!1,K=({rule:e})=>{const{application:{navigateToApp:t},alerting:n}=Object(B.b)().services,[r,i]=Object(a.useState)(null);return Object(a.useEffect)((()=>{Object($.pipe)(Object(G.fromNullable)(n),Object(G.fold)((()=>i(H)),(t=>t.getNavigation(e.id).then((e=>i(e||H))).catch((()=>{i(H)})))))}),[e.id,n]),Object(j.jsx)(s.EuiButtonEmpty,W()({"data-test-subj":"ruleDetails-viewInApp",isLoading:null===r,disabled:!Y(r),iconType:"popout"},function(e,t,n){return Y(e)?{onClick:()=>{n(t.consumer,e)}}:{}}(r,e,t)),Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.viewRuleInAppButtonLabel",defaultMessage:"View in app"}))};function Y(e){return e?e.hasOwnProperty("state")||e.hasOwnProperty("path"):H}var V=n(29),J=n(2),Q=n(146),X=n(45),Z=n(137),ee=n(77);const te={minWidth:0},ne=Object(v.a)((({rule:e,ruleType:t,actionTypes:n,disableRule:v,enableRule:O,snoozeRule:y,unsnoozeRule:E,requestRefresh:w,refreshToken:T})=>{var M,A,R;const S=Object(u.useHistory)(),{application:{capabilities:k},ruleTypeRegistry:U,actionTypeRegistry:D,setBreadcrumbs:F,chrome:C,http:L,notifications:{toasts:N}}=Object(B.b)().services,[{},_]=Object(a.useReducer)(Q.a,{rule:e}),[z,q]=Object(a.useState)([]),[W,G]=Object(a.useState)([]),[$,H]=Object(a.useState)(!1),[Y,ne]=Object(a.useState)({isUsingSecurity:!1});Object(a.useEffect)((()=>{(async()=>{ne(await Object(Z.a)({http:L}))})()}),[L]),Object(a.useEffect)((()=>{F([Object(m.a)("rules"),Object(m.b)(e.id,e.name)]),C.docTitle.change(Object(h.a)("rules"))}),[]),Object(a.useEffect)((()=>{(async()=>{let t=[];try{t=await Object(X.e)({http:L})}catch(e){t=[]}if(t.length>0){const n=e.actions.some((e=>!t.find((t=>t.id===e.id))));H&&H(n)}})()}),[]);const re=Object(x.c)(k),ae=Object(x.a)(e,t)&&(re||!re&&0===e.actions.length),ie=Object(o.keyBy)(n,"id"),se=ae&&!!U.has(e.ruleTypeId)&&!U.get(e.ruleTypeId).requiresAppContext,oe=e.actions,ue=Array.from(new Set(oe.map((e=>e.actionTypeId)))),[ce,le]=Object(a.useState)(!1);Object(a.useEffect)((()=>{if(e.schedule.interval&&Y.minimumScheduleInterval&&Object(d.parseDuration)(e.schedule.interval)<Object(d.parseDuration)(Y.minimumScheduleInterval.value)){const e=N.addInfo({"data-test-subj":"intervalConfigToast",title:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastTitle",{defaultMessage:"Configuration settings"}),text:Object(l.toMountPoint)(Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)("p",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastMessage",defaultMessage:"This rule has an interval set below the minimum configured interval. This may impact performance."})),se&&Object(j.jsx)(s.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiButton,{"data-test-subj":"ruleIntervalToastEditButton",onClick:()=>{N.remove(e),le(!0)}},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.scheduleIntervalToastMessageButton",defaultMessage:"Edit rule"}))))))})}}),[e.schedule.interval,Y.minimumScheduleInterval,N,se]);const de=se?Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(s.EuiButtonEmpty,{"data-test-subj":"openEditRuleFlyoutButton",iconType:"pencil",onClick:()=>le(!0),name:"edit",disabled:!t.enabledInLicense},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.editRuleButtonLabel",defaultMessage:"Edit"})),ce&&Object(j.jsx)(V.b,{initialRule:e,onClose:()=>{_({command:{type:"setRule"},payload:{key:"rule",value:e}}),le(!1)},actionTypeRegistry:D,ruleTypeRegistry:U,ruleType:t,onSave:async()=>{S.push(J.q.replace(":ruleId",e.id))}})):null;return Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(b.a,{onDeleted:async()=>{q([]),S.push(J.r)},onErrors:async()=>{await w(),q([])},onCancel:()=>{q([])},apiDeleteCall:f.c,idsToDelete:z,singleTitle:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),multipleTitle:"",setIsLoadingState:()=>{}}),Object(j.jsx)(p.a,{onCancel:()=>{G([])},idsToUpdate:W,apiUpdateApiKeyCall:f.y,setIsLoadingState:()=>{},onUpdated:async()=>{G([]),w()}}),Object(j.jsx)(s.EuiPageHeader,{"data-test-subj":"ruleDetailsTitle",bottomBorder:!0,pageTitle:Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleDetailsTitle",defaultMessage:"{ruleName}",values:{ruleName:e.name}}),description:Object(j.jsx)(s.EuiFlexGroup,{gutterSize:"m"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiText,{size:"s"},Object(j.jsx)("p",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.stateTitle",defaultMessage:"State"})))),Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(ee.RuleStatusDropdown,{disableRule:async()=>await v(e),enableRule:async()=>await O(e),snoozeRule:async t=>await y(e,t),unsnoozeRule:async()=>await E(e),rule:e,onRuleChanged:w,direction:"row",isEditable:se})))),Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiText,{size:"s"},Object(j.jsx)("p",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleTypeTitle",defaultMessage:"Type"})))),Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiBadge,{"data-test-subj":"ruleTypeLabel"},t.name)))),Object(x.d)(k)&&e.apiKeyOwner&&Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiText,{size:"s"},Object(j.jsx)("p",null,Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.apiKeyOwnerTitle",defaultMessage:"API key owner"})))),Object(j.jsx)(s.EuiFlexItem,{grow:!1},Object(j.jsx)(s.EuiText,{size:"s","data-test-subj":"apiKeyOwnerLabel"},Object(j.jsx)("b",null,e.apiKeyOwner))))),Object(j.jsx)(s.EuiFlexItem,{grow:!1},ue&&ue.length?Object(j.jsx)(s.EuiFlexGroup,{responsive:!1,gutterSize:"xs"},Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiText,{size:"s"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.actionsTex",defaultMessage:"Actions"})," ",$&&Object(j.jsx)(s.EuiIconTip,{"data-test-subj":"actionWithBrokenConnector",type:"alert",color:"danger",content:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.actionsWarningTooltip",{defaultMessage:"Unable to load one of the connectors associated with this rule. Edit the rule to select a new connector."}),position:"right"}))),Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiFlexGroup,{gutterSize:"xs"},ue.map(((e,t)=>{var n;return Object(j.jsx)(s.EuiFlexItem,{key:t,grow:!1},Object(j.jsx)(s.EuiBadge,{color:"hollow","data-test-subj":"actionTypeLabel"},null!==(n=ie[e].name)&&void 0!==n?n:e))}))))):null)),rightSideItems:[Object(j.jsx)(g,{canSaveRule:ae,rule:e,onDelete:e=>{q([e])},onApiKeyUpdate:e=>{G([e])},onEnableDisable:async t=>{t?await O(e):await v(e),w()}}),de,Object(j.jsx)(s.EuiButtonEmpty,{"data-test-subj":"refreshRulesButton",iconType:"refresh",onClick:w,name:"refresh",color:"primary"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.refreshRulesButtonLabel",defaultMessage:"Refresh"})),Object(j.jsx)(K,{rule:e})]}),Object(j.jsx)(s.EuiSpacer,{size:"l"}),Object(j.jsx)(s.EuiPageContentBody,null,e.enabled&&(null===(M=e.executionStatus.error)||void 0===M?void 0:M.reason)===d.RuleExecutionStatusErrorReasons.License?Object(j.jsx)(s.EuiFlexGroup,null,Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiCallOut,{color:"danger","data-test-subj":"ruleErrorBanner",size:"s",iconType:"rule"},Object(j.jsx)("p",null,Object(j.jsx)(s.EuiIcon,{color:"danger",type:"alert"})," ",Object(j.jsx)("b",null,e.executionStatus.error&&e.executionStatus.error.reason?I.b[e.executionStatus.error.reason]:I.b.unknown),", ",null===(A=e.executionStatus.error)||void 0===A?void 0:A.message," ",Object(j.jsx)(s.EuiLink,{href:`${L.basePath.get()}/app/management/stack/license_management`,color:"primary",target:"_blank"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.manageLicensePlanBannerLinkTitle",defaultMessage:"Manage license"})))))):null,e.enabled&&"warning"===e.executionStatus.status?Object(j.jsx)(s.EuiFlexGroup,null,Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiCallOut,{color:"warning","data-test-subj":"ruleWarningBanner",size:"s",iconType:"alert"},Object(j.jsx)("p",null,Object(j.jsx)(s.EuiIcon,{color:"warning",type:"alert"})," ",e.executionStatus.warning&&e.executionStatus.warning.reason?I.d[e.executionStatus.warning.reason]:I.d.unknown," ",null===(R=e.executionStatus.warning)||void 0===R?void 0:R.message)))):null,$&&Object(j.jsx)(s.EuiFlexGroup,null,Object(j.jsx)(s.EuiFlexItem,null,Object(j.jsx)(s.EuiSpacer,{size:"s"}),Object(j.jsx)(s.EuiCallOut,{color:"warning","data-test-subj":"actionWithBrokenConnectorWarningBanner",size:"s"},Object(j.jsx)("p",null,Object(j.jsx)(s.EuiIcon,{color:"warning",type:"alert"})," ",Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.actionWithBrokenConnectorWarningBannerTitle",defaultMessage:"There is an issue with one of the connectors associated with this rule."})," ",se&&Object(j.jsx)(s.EuiLink,{"data-test-subj":"actionWithBrokenConnectorWarningBannerEdit",color:"primary",onClick:()=>le(!0)},Object(j.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.actionWithBrokenConnectorWarningBannerEditText",defaultMessage:"Edit rule"})))))),Object(j.jsx)(s.EuiFlexGroup,null,Object(j.jsx)(s.EuiFlexItem,{style:te},Object(j.jsx)(P,{requestRefresh:w,refreshToken:T,rule:e,ruleType:t,readOnly:!ae})))))}));var re=n(6);const ae=({match:{params:{ruleId:e}},loadRuleTypes:t,loadActionTypes:n,resolveRule:o})=>{const{http:u,notifications:{toasts:c},spaces:l}=Object(B.b)().services,{basePath:d}=u,[p,f]=Object(a.useState)(null),[b,g]=Object(a.useState)(null),[x,m]=Object(a.useState)(null),[h,v]=i.a.useState();return Object(a.useEffect)((()=>{ie(e,t,o,n,f,g,m,c)}),[e,u,n,t,o,c,h]),Object(a.useEffect)((()=>{if(p){const e=p.outcome;if(l&&"aliasMatch"===e){const e=d.prepend(`insightsAndAlerting/triggersActions/rule/${p.id}`);l.ui.redirectLegacyUrl({path:e,aliasPurpose:p.alias_purpose,objectNoun:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.redirectObjectNoun",{defaultMessage:"rule"})})}}}),[p,l,d]),p&&b&&x?Object(j.jsx)(i.a.Fragment,null,(()=>{const e=p.outcome;if(l&&"conflict"===e){const e=p.alias_target_id,t=d.prepend(`insightsAndAlerting/triggersActions/rule/${e}`);return Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(s.EuiSpacer,null),l.ui.components.getLegacyUrlConflict({objectNoun:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.redirectObjectNoun",{defaultMessage:"rule"}),currentObjectId:null==p?void 0:p.id,otherObjectId:e,otherObjectPath:t}))}return null})(),Object(j.jsx)(ne,{rule:p,ruleType:b,actionTypes:x,requestRefresh:async()=>v(Date.now()),refreshToken:h})):Object(j.jsx)(z.a,null)};async function ie(e,t,n,a,i,s,o,u){try{const r=await n(e);i(r);const[u,c]=await Promise.all([t().then((e=>e.find((e=>e.id===r.ruleTypeId)))).then(Object(re.d)(`Invalid Rule Type: ${r.ruleTypeId}`)),a().then(Object(re.e)(new Set(r.actions.map((e=>e.actionTypeId))),(e=>`Invalid Connector Type: ${e}`),(e=>e.id)))]);s(u),o(c)}catch(e){u.addDanger({title:r.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.unableToLoadRuleMessage",{defaultMessage:"Unable to load rule: {message}",values:{message:e.message}})})}}const se=(oe=Object(v.a)(ae),e=>{const{http:t}=Object(B.b)().services;return Object(j.jsx)(oe,W()({},e,{loadActionTypes:async()=>Object(X.d)({http:t})}))});var oe}}]);