/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[7,87,88,89],{129:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return r}));var a="kibana",i="".concat(a,".alert"),n="".concat(i,".rule"),o=("".concat(a,".space_ids"),"".concat(a,".version"),"".concat(i,".action_group"),"".concat(i,".building_block_type"),"".concat(i,".duration.us"),"".concat(i,".end"),"".concat(i,".evaluation.threshold"),"".concat(i,".evaluation.value"),"".concat(i,".instance.id"),"".concat(i,".reason"),"".concat(i,".risk_score"),"".concat(i,".severity"),"".concat(i,".start"),"".concat(i,".status"),"".concat(i,".system_status"),"".concat(i,".uuid")),l=("".concat(i,".workflow_reason"),"".concat(i,".workflow_status"),"".concat(i,".workflow_user"),"".concat(n,".author"),"".concat(n,".created_at"),"".concat(n,".created_by"),"".concat(n,".description"),"".concat(n,".enabled"),"".concat(n,".exceptions_list"),"".concat(n,".execution.uuid"),"".concat(n,".from"),"".concat(n,".interval"),"".concat(n,".license"),"".concat(n,".category"),"".concat(n,".name")),r=("".concat(n,".namespace"),"".concat(n,".note"),"".concat(n,".parameters"),"".concat(n,".references"),"".concat(n,".rule_id"),"".concat(n,".rule_name_override"),"".concat(n,".tags"),"".concat(n,".to"),"".concat(n,".type"),"".concat(n,".rule_type_id"),"".concat(n,".updated_at"),"".concat(n,".updated_by"),"".concat(n,".version"),"".concat(n,".consumer"),"".concat(n,".producer"),"".concat(n,".uuid"),s(11),s(138),{APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SIEM:"siem",UPTIME:"uptime"});Object.values(r).map((function(e){return e}))},132:function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return c}));var a=s(40),i=s.n(a),n=s(84),o=s.n(n);function l(e){return`${o()(100*e).format("0,0")}%`}function r(e){if(!e)return"00:00";const t=i.a.duration(e);let s=Math.floor(t.asMinutes()),a=t.seconds();return t.milliseconds()>=500&&(a+=1,60===a&&(a=0,s+=1)),`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function c(e){return`${o()(e).format("0,0")} ms`}},138:function(e,t,s){e.exports=s(65)(2567)},141:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(1),i=s(15),n=s(132),o=s(3);const l=Object(a.memo)((e=>{const{duration:t,allowZero:s=!0}=e,l=Object(a.useMemo)((()=>s||"number"==typeof t?Object(n.a)(t):"N/A"),[t,s]),r=Object(a.useMemo)((()=>s||"number"==typeof t?Object(n.b)(t):"N/A"),[t,s]);return Object(o.jsx)(i.EuiToolTip,{"data-test-subj":"rule-duration-format-tooltip",content:r},Object(o.jsx)("span",{"data-test-subj":"rule-duration-format-value"},l))}))},149:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var a=s(1),i=s(40),n=s.n(i),o=s(0),l=s(43),r=s(77),c=s(3);const u=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rule successfully snoozed"}),d=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rule successfully unsnoozed"}),b=o.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unabled to change rule snooze settings"}),j=()=>{},g=e=>{const{rule:t,previousSnoozeInterval:s,onRuleChanged:i,onClose:o,snoozeRule:g,unsnoozeRule:p,onLoading:x=j}=e,{notifications:{toasts:m}}=Object(l.b)().services,{isSnoozedUntil:O}=t,[T,f]=Object(r.usePreviousSnoozeInterval)(s),E=Object(a.useMemo)((()=>Object(r.isRuleSnoozed)(t)),[t]),I=Object(a.useCallback)(((e,t)=>(t&&f(t),g(e,t))),[f,g]),y=Object(a.useCallback)((async(e,t)=>{x(!0),o();try{if(-1===e)await I(-1,null),m.addSuccess(u);else if(0!==e){const s=n()().add(e,t).toISOString();await I(s,`${e}${t}`),m.addSuccess(u)}else await p(),m.addSuccess(d)}catch(e){m.addDanger(b)}finally{await i(),x(!1)}}),[m,i,I,p,x,o]);return Object(c.jsx)(r.SnoozePanel,{applySnooze:y,interval:Object(r.futureTimeToInterval)(O),showCancel:E,previousSnoozeInterval:T})}},169:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(5),i=s(0);function n(e){return!1===(null==e?void 0:e.enabledInLicense)?(e=>({isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkRuleTypeEnabled.ruleTypeDisabledByLicenseMessage",{defaultMessage:"This rule type requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(a.upperFirst)(e.minimumLicenseRequired)}})}))(e):{isEnabled:!0}}},216:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(217);case"v8light":return s(219)}},217:function(e,t,s){var a=s(107),i=s(218);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},218:function(e,t,s){(t=s(108)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},219:function(e,t,s){var a=s(107),i=s(220);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},220:function(e,t,s){(t=s(108)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},221:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(222);case"v8light":return s(224)}},222:function(e,t,s){var a=s(107),i=s(223);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},223:function(e,t,s){(t=s(108)(!1)).push([e.i,".collapsedItemActions__deleteButton{color:#F86B63}\n",""]),e.exports=t},224:function(e,t,s){var a=s(107),i=s(225);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},225:function(e,t,s){(t=s(108)(!1)).push([e.i,".collapsedItemActions__deleteButton{color:#BD271E}\n",""]),e.exports=t},226:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(227);case"v8light":return s(229)}},227:function(e,t,s){var a=s(107),i=s(228);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},228:function(e,t,s){(t=s(108)(!1)).push([e.i,".actRulesList__tableRowDisabled{background-color:#25262E}.actRulesList__tableRowDisabled .actRulesList__tableCellDisabled{color:#98A2B3}.euiTableRow:hover .ruleSidebarItem__action,.euiTableRow:focus-within .ruleSidebarItem__action,.euiTableRow[class*='-isActive'] .ruleSidebarItem__action{opacity:1}.ruleSidebarItem__action{opacity:0}.ruleSidebarItem__action.ruleSidebarItem__mobile{opacity:1}.ruleSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},229:function(e,t,s){var a=s(107),i=s(230);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},230:function(e,t,s){(t=s(108)(!1)).push([e.i,".actRulesList__tableRowDisabled{background-color:#F5F7FA}.actRulesList__tableRowDisabled .actRulesList__tableCellDisabled{color:#69707D}.euiTableRow:hover .ruleSidebarItem__action,.euiTableRow:focus-within .ruleSidebarItem__action,.euiTableRow[class*='-isActive'] .ruleSidebarItem__action{opacity:1}.ruleSidebarItem__action{opacity:0}.ruleSidebarItem__action.ruleSidebarItem__mobile{opacity:1}.ruleSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},81:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleTagFilter",(function(){return c})),s.d(t,"default",(function(){return c}));var a=s(1),i=s.n(a),n=s(76),o=s(15),l=s(3);const r=e=>`ruleTagFilterOption-${e}`,c=e=>{const{tags:t=[],selectedTags:s=[],isGrouped:c=!1,isLoading:u=!1,loadingMessage:d,noMatchesMessage:b,emptyMessage:j,errorMessage:g,dataTestSubj:p="ruleTagFilter",selectableDataTestSubj:x="ruleTagFilterSelectable",optionDataTestSubj:m=r,buttonDataTestSubj:O="ruleTagFilterButton",onChange:T=(()=>{})}=e,[f,E]=Object(a.useState)(!1),I=Object(a.useMemo)((()=>[...new Set([...t,...s])].sort()),[t,s]),y=Object(a.useMemo)((()=>I.map((e=>({label:e,checked:s.includes(e)?"on":void 0,"data-test-subj":m(e)})))),[I,s,m]),S=Object(a.useCallback)((e=>{const t=e.reduce(((e,t)=>("on"===t.checked&&(e=[...e,t.label]),e)),[]);T(t)}),[T]),h=()=>{E(!f)},L=Object(a.useMemo)((()=>c?i.a.Fragment:o.EuiFilterGroup),[c]);return Object(l.jsx)(L,null,Object(l.jsx)(o.EuiPopover,{"data-test-subj":p,isOpen:f,closePopover:h,button:Object(l.jsx)(o.EuiFilterButton,{"data-test-subj":O,iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:h},Object(l.jsx)(n.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.ruleTagFilterButton",defaultMessage:"Tags"}))},Object(l.jsx)(o.EuiSelectable,{searchable:!0,"data-test-subj":x,isLoading:u,options:y,loadingMessage:d,noMatchesMessage:b,emptyMessage:j,errorMessage:g,onChange:S},((e,t)=>Object(l.jsx)(i.a.Fragment,null,t,Object(l.jsx)(o.EuiSpacer,{size:"xs"}),e)))))}},82:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleStatusFilter",(function(){return u})),s.d(t,"default",(function(){return u}));var a=s(1),i=s(76),n=s(15),o=s(3);const l=["enabled","disabled","snoozed"],r={textTransform:"capitalize"},c=e=>`ruleStatusFilterOption-${e}`,u=e=>{const{selectedStatuses:t=[],dataTestSubj:s="ruleStatusFilter",selectDataTestSubj:u="ruleStatusFilterSelect",buttonDataTestSubj:d="ruleStatusFilterButton",optionDataTestSubj:b=c,onChange:j=(()=>{})}=e,[g,p]=Object(a.useState)(!1),x=Object(a.useCallback)((e=>()=>{t.includes(e)?j(t.filter((t=>t!==e))):j([...t,e])}),[t,j]),m=Object(a.useCallback)((()=>{p((e=>!e))}),[p]);return Object(o.jsx)(n.EuiFilterGroup,{"data-test-subj":s},Object(o.jsx)(n.EuiPopover,{isOpen:g,closePopover:()=>p(!1),button:Object(o.jsx)(n.EuiFilterButton,{"data-test-subj":d,iconType:"arrowDown",hasActiveFilters:t.length>0,numActiveFilters:t.length,numFilters:t.length,onClick:m},Object(o.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.ruleStatusFilterButton",defaultMessage:"View"}))},Object(o.jsx)("div",{"data-test-subj":u},l.map((e=>Object(o.jsx)(n.EuiSelectableListItem,{key:e,style:r,"data-test-subj":b(e),onClick:x(e),checked:t.includes(e)?"on":void 0},e))),Object(o.jsx)("div",null,Object(o.jsx)(n.EuiButtonEmpty,{style:{width:"100%"},size:"xs",iconType:"crossInACircleFilled",color:"danger",onClick:()=>j([])},"Clear all")))))}},83:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleTagBadge",(function(){return u})),s.d(t,"default",(function(){return u}));var a=s(1),i=s(0),n=s(15),o=s(3);const l=i.i18n.translate("xpack.triggersActionsUI.sections.rules_list.rules_tag_badge.tagTitle",{defaultMessage:"Tag"}),r={width:"300px"},c=e=>`ruleTagBadgeItem-${e}`,u=e=>{const{isOpen:t=!1,tags:s=[],onClick:i,onClose:u,badgeDataTestSubj:d="ruleTagBadge",titleDataTestSubj:b="ruleTagPopoverTitle",tagItemDataTestSubj:j=c}=e,g=Object(a.useMemo)((()=>Object(o.jsx)(n.EuiBadge,{"data-test-subj":d,color:"hollow",iconType:"tag",iconSide:"left",tabIndex:-1,onClick:i,onClickAriaLabel:"Tags",iconOnClick:i,iconOnClickAriaLabel:"Tags"},s.length)),[s,d,i]),p=Object(a.useMemo)((()=>s.map(((e,t)=>Object(o.jsx)(n.EuiBadge,{"data-test-subj":j(e),key:t,color:"hollow",iconType:"tag",iconSide:"left"},e)))),[s,j]);return Object(o.jsx)(n.EuiPopover,{button:g,anchorPosition:"upCenter",isOpen:t,closePopover:u},Object(o.jsx)(n.EuiPopoverTitle,{"data-test-subj":b},l),Object(o.jsx)("div",{style:r},p))}},85:function(e,t,s){"use strict";s.r(t),s.d(t,"RulesListNotifyBadge",(function(){return b})),s.d(t,"default",(function(){return b}));var a=s(1),i=s(40),n=s.n(i),o=s(15),l=s(0),r=s(77),c=s(149),u=s(3);const d=l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),b=e=>{const{isLoading:t=!1,rule:s,isOpen:i,previousSnoozeInterval:b,onClick:j,onClose:g,onLoading:p,onRuleChanged:x,snoozeRule:m,unsnoozeRule:O}=e,{isSnoozedUntil:T,muteAll:f,isEditable:E}=s,I=f,y=Object(a.useMemo)((()=>Object(r.isRuleSnoozed)(s)),[s]),S=Object(a.useMemo)((()=>!1),[]),h=Object(a.useMemo)((()=>T?n()(T).format("MMM D"):""),[T]),L=Object(a.useMemo)((()=>I?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):S?"":y?l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozed for {snoozeTime}",values:{snoozeTime:n()(T).fromNow(!0)}}):""),[I,S,y,T]),A=Object(a.useMemo)((()=>Object(u.jsx)(o.EuiButton,{size:"s",isLoading:t,disabled:t||!E,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":d,minWidth:85,iconType:"bellSlash",color:"accent",onClick:j},Object(u.jsx)(o.EuiText,{size:"xs"},h))),[h,t,E,j]),v=Object(a.useMemo)((()=>Object(u.jsx)(o.EuiButton,{size:"s",isLoading:t,disabled:t||!E,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":d,onClick:j},Object(u.jsx)(o.EuiText,{size:"xs"},h))),[h,t,E,j]),k=Object(a.useMemo)((()=>Object(u.jsx)(o.EuiButtonIcon,{size:"s",isLoading:t,disabled:t||!E,display:t?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":d,className:i||t?"":"ruleSidebarItem__action",iconType:"bell",onClick:j})),[i,t,E,j]),M=Object(a.useMemo)((()=>Object(u.jsx)(o.EuiButtonIcon,{size:"s",isLoading:t,disabled:t||!E,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":d,iconType:"bellSlash",color:"accent",onClick:j})),[t,E,j]),C=Object(a.useMemo)((()=>S?v:I?M:y?A:k),[y,S,I,v,A,M,k]),F=Object(a.useMemo)((()=>i?C:Object(u.jsx)(o.EuiToolTip,{content:L},C)),[i,C,L]);return Object(u.jsx)(o.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:i,closePopover:g,button:F},Object(u.jsx)(o.EuiPopoverTitle,null,Object(u.jsx)(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiIcon,{type:"bellSlash"})),Object(u.jsx)(o.EuiFlexItem,{grow:!1},l.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeActions",{defaultMessage:"Snooze actions"})))),Object(u.jsx)(c.a,{rule:s,onClose:g,onLoading:p,previousSnoozeInterval:b,onRuleChanged:x,snoozeRule:m,unsnoozeRule:O}))}},91:function(e,t,s){"use strict";s.r(t),s.d(t,"percentileFields",(function(){return pe})),s.d(t,"RulesList",(function(){return me})),s.d(t,"default",(function(){return me}));var a=s(0),i=s(40),n=s.n(i),o=s(5),l=s(76),r=s(1),c=s.n(r),u=s(15),d=s(79),b=s(20),j=s(16),g=s(29),p=s(3);const x=({children:e})=>{const[t,s]=Object(r.useState)(!1);return Object(p.jsx)(u.EuiPopover,{isOpen:t,closePopover:()=>s(!1),"data-test-subj":"bulkAction",panelPaddingSize:"s",button:Object(p.jsx)(u.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>s(!t)},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.buttonTitle",defaultMessage:"Manage rules"}))},e&&c.a.Children.map(e,(e=>c.a.isValidElement(e)?Object(p.jsx)(c.a.Fragment,null,c.a.cloneElement(e,{})):e)))};var m=s(126),O=(s(216),s(43));const T=Object(m.a)((({selectedItems:e,onPerformingAction:t=I,onActionPerformed:s=I,muteRules:i,unmuteRules:n,enableRules:o,disableRules:c,setRulesToDelete:d})=>{const{notifications:{toasts:b}}=Object(O.b)().services,[j,g]=Object(r.useState)(!1),[x,m]=Object(r.useState)(!1),[T,y]=Object(r.useState)(!1),[S,h]=Object(r.useState)(!1),[L,A]=Object(r.useState)(!1),v=e.every(E),k=e.every(f),M=j||x||T||S||L,C=!!e.find((e=>!e.enabledInLicense));return Object(p.jsx)(u.EuiFlexGroup,{alignItems:"baseline",direction:"column",gutterSize:"none"},!v&&Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),g(!0);try{await i(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToMuteRulesMessage",{defaultMessage:"Failed to mute rule(s)"})})}finally{g(!1),s()}},isLoading:j,isDisabled:M||C,"data-test-subj":"muteAll"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.muteAllTitle",defaultMessage:"Mute"}))),v&&Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),m(!0);try{await n(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToUnmuteRulesMessage",{defaultMessage:"Failed to unmute rule(s)"})})}finally{m(!1),s()}},isLoading:x,isDisabled:M||C,"data-test-subj":"unmuteAll"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.unmuteAllTitle",defaultMessage:"Unmute"}))),k&&Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),y(!0);try{await o(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToEnableRulesMessage",{defaultMessage:"Failed to enable rule(s)"})})}finally{y(!1),s()}},isLoading:T,isDisabled:M||C,"data-test-subj":"enableAll"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.enableAllTitle",defaultMessage:"Enable"}))),!k&&Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),h(!0);try{await c(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToDisableRulesMessage",{defaultMessage:"Failed to disable rule(s)"})})}finally{h(!1),s()}},isLoading:S,isDisabled:M||C,"data-test-subj":"disableAll"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.disableAllTitle",defaultMessage:"Disable"}))),Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),A(!0);try{d(e.map((e=>e.id)))}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.failedToDeleteRulesMessage",{defaultMessage:"Failed to delete rule(s)"})})}finally{A(!1),s()}},isLoading:L,iconType:"trash",color:"danger",isDisabled:M,"data-test-subj":"deleteAll",className:"actBulkActionPopover__deleteAll"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.bulkActionPopover.deleteAllTitle",defaultMessage:"Delete"}))))}));function f(e){return!1===e.enabled}function E(e){return!0===e.muteAll}function I(){}var y=s(129),S=s(90),h=s(149),L=s(77);s(221);const A=Object(m.a)((({item:e,onLoading:t,onRuleChanged:s,disableRule:i,enableRule:o,setRulesToDelete:l,onEditRule:c,onUpdateAPIKey:d,snoozeRule:b,unsnoozeRule:j})=>{const{ruleTypeRegistry:g}=Object(O.b)().services,[x,m]=Object(r.useState)(!1),[T,f]=Object(r.useState)(!e.enabled);Object(r.useEffect)((()=>{f(!e.enabled)}),[e.enabled]);const E=Object(r.useCallback)((async(t,s)=>{await b(e,t)}),[b,e]),I=Object(r.useCallback)((async()=>{await j(e)}),[j,e]),A=Object(r.useCallback)((()=>{m(!1)}),[m]),v=!!g.has(e.ruleTypeId)&&!g.get(e.ruleTypeId).requiresAppContext,k=Object(p.jsx)(u.EuiButtonIcon,{disabled:!e.isEditable,"data-test-subj":"selectActionButton","data-testid":"selectActionButton",iconType:"boxesHorizontal",onClick:()=>m(!x),"aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.popoverButtonTitle",{defaultMessage:"Actions"})}),M=Object(r.useMemo)((()=>Object(L.isRuleSnoozed)(e)),[e]),C=Object(r.useMemo)((()=>e.muteAll?a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snoozedIndefinitely",{defaultMessage:"Snoozed indefinitely"}):M?a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snoozedUntil",{defaultMessage:"Snoozed until {snoozeTime}",values:{snoozeTime:n()(e.isSnoozedUntil).format("MMM D")}}):a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.snooze",{defaultMessage:"Snooze"})),[M,e]),F=[{id:0,hasFocus:!1,items:[...Object(r.useMemo)((()=>T||e.consumer===y.c.SIEM?[]:[{disabled:!e.isEditable||!e.enabledInLicense,"data-test-subj":"snoozeButton",icon:"bellSlash",name:C,panel:1}]),[T,e,C]),{isSeparator:!0},{disabled:!e.isEditable||!e.enabledInLicense,"data-test-subj":"disableButton",onClick:async()=>{const t=!T;S.asyncScheduler.schedule((async()=>{t?await i({...e,enabled:t}):await o({...e,enabled:t}),s()}),10),f(!T),m(!x)},name:T?a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.enableTitle",{defaultMessage:"Enable"}):a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.disableTitle",{defaultMessage:"Disable"})},{disabled:!e.isEditable||!v,"data-test-subj":"editRule",onClick:()=>{m(!x),c(e)},name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.editTitle",{defaultMessage:"Edit rule"})},{disabled:!e.isEditable,"data-test-subj":"updateApiKey",onClick:()=>{m(!x),d([e.id])},name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActions.updateApiKey",{defaultMessage:"Update API key"})},{disabled:!e.isEditable,className:"collapsedItemActions__deleteButton","data-test-subj":"deleteRule",onClick:()=>{m(!x),l([e.id])},name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.deleteRuleTitle",{defaultMessage:"Delete rule"})}]},{id:1,title:Object(p.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiIcon,{type:"bellSlash"})),Object(p.jsx)(u.EuiFlexItem,{grow:!1},a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.collapsedItemActons.snoozeActions",{defaultMessage:"Snooze actions"}))),width:500,content:Object(p.jsx)(u.EuiPanel,null,Object(p.jsx)(h.a,{rule:e,onClose:A,onLoading:t,onRuleChanged:s,snoozeRule:E,unsnoozeRule:I}))}];return Object(p.jsx)(u.EuiPopover,{button:k,isOpen:x,closePopover:()=>m(!1),ownFocus:!0,panelPaddingSize:"none","data-test-subj":"collapsedItemActions"},Object(p.jsx)(u.EuiContextMenu,{initialPanelId:0,panels:F,className:"actCollapsedItemActions","data-test-subj":"collapsedActionPanel","data-testid":"collapsedActionPanel"}))})),v=({options:e,onChange:t})=>{const[s,a]=Object(r.useState)([]),[i,n]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{t&&t(s)}),[s]),Object(p.jsx)(u.EuiPopover,{isOpen:i,closePopover:()=>n(!1),button:Object(p.jsx)(u.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>n(!i),"data-test-subj":"ruleTypeFilterButton"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.typeFilterLabel",defaultMessage:"Type"}))},Object(p.jsx)("div",{className:"euiFilterSelect__items"},e.map(((e,t)=>Object(p.jsx)(r.Fragment,{key:`group${t}`},Object(p.jsx)(u.EuiTitle,{"data-test-subj":`ruleType${t}Group`,size:"xxs"},Object(p.jsx)("h3",null,e.groupName)),e.subOptions.map(((e,t)=>Object(p.jsx)(u.EuiFilterSelectItem,{key:t,onClick:()=>{const t=s.includes(e.value);a(t?s.filter((t=>t!==e.value)):s.concat(e.value))},checked:s.includes(e.value)?"on":void 0,"data-test-subj":`ruleType${e.value}FilterOption`},e.name))))))))},k=({actionTypes:e,onChange:t})=>{const[s,a]=Object(r.useState)([]),[i,n]=Object(r.useState)(!1);Object(r.useEffect)((()=>{t&&t(s)}),[s]);const o=Object(r.useCallback)((e=>()=>{const t=s.includes(e.id);a(t?s.filter((t=>t!==e.id)):s.concat(e.id))}),[s,a]);return Object(p.jsx)(u.EuiPopover,{isOpen:i,closePopover:()=>n(!1),button:Object(p.jsx)(u.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>n(!i),"data-test-subj":"actionTypeFilterButton"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.actionTypeFilterLabel",defaultMessage:"Action type"}))},Object(p.jsx)("div",{className:"euiFilterSelect__items"},e.map((e=>Object(p.jsx)(u.EuiFilterSelectItem,{key:e.id,onClick:o(e),checked:s.includes(e.id)?"on":void 0,"data-test-subj":`actionType${e.id}FilterOption`},e.name)))))};var M=s(179),C=s(27),F=s(45),R=s(112),w=s(2),_=s(150);const U=({onCTAClicked:e})=>Object(p.jsx)(u.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"createFirstRuleEmptyPrompt",title:Object(p.jsx)("h2",null,Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyTitle",defaultMessage:"Create your first rule"})),body:Object(p.jsx)("p",null,Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyDesc",defaultMessage:"Receive an alert through email, Slack, or another connector when a condition is met."})),actions:Object(p.jsx)(u.EuiButton,{"data-test-subj":"createFirstRuleButton",key:"create-action",fill:!0,onClick:e},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyButton",defaultMessage:"Create rule"}))});var z=s(142),D=s(10),P=(s(226),s(46));const B=({licenseType:e,ruleTypeId:t,onConfirm:s,onCancel:i})=>{const n=Object(o.capitalize)(e);return Object(p.jsx)(u.EuiConfirmModal,{title:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseTitle",{defaultMessage:"{licenseRequired} license required",values:{licenseRequired:n}}),onCancel:i,onConfirm:s,confirmButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseConfirmButtonText",{defaultMessage:"Manage license"}),cancelButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"manageLicenseModal"},Object(p.jsx)("p",null,Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.manageLicense.manageLicenseMessage",defaultMessage:"Rule type {ruleTypeId} is disabled because it requires a {licenseRequired} license. Continue to License Management to view upgrade options.",values:{ruleTypeId:t,licenseRequired:n}})))};var N,G=s(137),q=s(81),H=s(82),$=s(143);!function(e){e.SET_RULE_STATE="SET_RULE_STATE",e.SET_LOADING="SET_LOADING",e.SET_INITIAL_LOAD="SET_INITIAL_LOAD",e.SET_NO_DATA="SET_NO_DATA"}(N||(N={}));const W={rulesState:{isLoading:!1,data:[],totalItemCount:0},noData:!0,initialLoad:!0},Y=(e,t)=>{const{type:s,payload:a}=t;switch(s){case N.SET_RULE_STATE:return{...e,rulesState:a};case N.SET_LOADING:return{...e,rulesState:{...e.rulesState,isLoading:a}};case N.SET_INITIAL_LOAD:return{...e,initialLoad:a};case N.SET_NO_DATA:return{...e,noData:a};default:return e}};var K=s(180);const V=a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleExecutionPercentileSelectButton",{defaultMessage:"select percentile"}),Q={width:200},Z=Object(r.memo)((e=>{const{options:t,onOptionsChange:s}=e,[a,i]=Object(r.useState)(!1),n=Object(r.useCallback)((e=>{e.stopPropagation(),i((e=>!e))}),[]),o=Object(r.useCallback)((()=>{i(!1)}),[]),l=Object(r.useCallback)((e=>{o(),s(e)}),[s,o]),c=Object(r.useCallback)((e=>{e.stopPropagation()}),[]);return Object(p.jsx)(u.EuiPopover,{button:Object(p.jsx)(u.EuiButtonIcon,{iconType:"gear",size:"s","data-test-subj":"percentileSelectablePopover-iconButton",title:V,"aria-label":V,onClick:n}),panelPaddingSize:"s",isOpen:a,closePopover:o,anchorPosition:"downRight"},Object(p.jsx)("div",{style:Q,onClick:c},Object(p.jsx)(u.EuiSelectable,{"data-test-subj":"percentileSelectablePopover-selectable",singleSelection:"always",options:t,onChange:l},(e=>e))))}));var J=s(141),X=s(169),ee=s(132),te=s(83),se=s(85);const ae={[j.i.P50]:"50th",[j.i.P95]:"95th",[j.i.P99]:"99th"},ie={[j.i.P50]:"monitoring.execution.calculated_metrics.p50",[j.i.P95]:"monitoring.execution.calculated_metrics.p95",[j.i.P99]:"monitoring.execution.calculated_metrics.p99"},ne={},oe=()=>{},le=()=>null;function re(e){const{rules:t,ruleTypeIndex:s,canExecuteActions:a,config:i}=e,n=i.minimumScheduleInterval?Object(b.parseDuration)(i.minimumScheduleInterval.value):0;return t.map(((e,t)=>{var i,o,l;return{...e,index:t,actionsCount:e.actions.length,ruleType:null!==(i=null===(o=s.get(e.ruleTypeId))||void 0===o?void 0:o.name)&&void 0!==i?i:e.ruleTypeId,isEditable:Object(R.a)(e,s.get(e.ruleTypeId))&&(a||!a&&!e.actions.length),enabledInLicense:!(null===(l=s.get(e.ruleTypeId))||void 0===l||!l.enabledInLicense),showIntervalWarning:Object(b.parseDuration)(e.schedule.interval)<n}}))}const ce=e=>{const{rulesState:t,ruleTypesState:s,ruleTypeRegistry:i,isLoading:o=!1,canExecuteActions:d=!1,sort:g,page:x,percentileOptions:m,itemIdToExpandedRowMap:O=ne,config:T=ne,onSort:f=oe,onPage:E=oe,onRuleClick:I=oe,onRuleEditClick:S=oe,onRuleDeleteClick:h=oe,onManageLicenseClick:A=oe,onSelectionChange:v=oe,onPercentileOptionsChange:k=oe,onRuleChanged:C,onEnableRule:F=oe,onDisableRule:R=oe,onSnoozeRule:w=oe,onUnsnoozeRule:_=oe,renderCollapsedItemActions:U=le,renderRuleError:D=le}=e,[P,B]=Object(r.useState)(-1),[N,G]=Object(r.useState)(),[q,H]=Object(r.useState)({}),$=Object(r.useMemo)((()=>{const e=m.find((e=>"on"===e.checked));if(e)return j.i[e.key]}),[m]),W=(e,t)=>{H((s=>({...s,[e]:t})))},Y=e=>!!i.has(e)&&!i.get(e).requiresAppContext;return Object(p.jsx)(u.EuiBasicTable,{loading:o,items:!1===s.isInitialized?[]:re({rules:t.data,ruleTypeIndex:s.data,canExecuteActions:d,config:T}),itemId:"id",columns:[{field:"name",name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,width:"30%","data-test-subj":"rulesTableCell-name",render:(e,t)=>{const a=s.data.get(t.ruleTypeId),i=Object(X.a)(a),n=Object(p.jsx)(c.a.Fragment,null,Object(p.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiLink,{title:e,onClick:()=>I(t)},e)),Object(p.jsx)(u.EuiFlexItem,{grow:!1},!i.isEnabled&&Object(p.jsx)(u.EuiIconTip,{anchorClassName:"ruleDisabledQuestionIcon","data-test-subj":"ruleDisabledByLicenseTooltip",type:"questionInCircle",content:i.message,position:"right"})))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiText,{color:"subdued",size:"xs"},t.ruleType))));return Object(p.jsx)(c.a.Fragment,null,n)}},{field:"tags",name:"",sortable:!1,width:"50px","data-test-subj":"rulesTableCell-tagsPopover",render:(e,t)=>e.length>0?Object(p.jsx)(te.RuleTagBadge,{isOpen:P===t.index,tags:e,onClick:()=>B(t.index),onClose:()=>B(-1)}):null},{field:"executionStatus.lastExecutionDate",name:Object(p.jsx)(u.EuiToolTip,{"data-test-subj":"rulesTableCell-lastExecutionDateTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.lastExecutionDateTitle",{defaultMessage:"Start time of the last run."})},Object(p.jsx)("span",null,"Last run"," ",Object(p.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,width:"15%","data-test-subj":"rulesTableCell-lastExecutionDate",render:e=>{if(e)return Object(p.jsx)(c.a.Fragment,null,Object(p.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},n()(e).format("MMM D, YYYY HH:mm:ssa")),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiText,{color:"subdued",size:"xs"},n()(e).fromNow()))))}},{name:Object(p.jsx)(u.EuiToolTip,{"data-test-subj":"rulesTableCell-notifyTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.notifyTooltip",{defaultMessage:"Snooze notifications for a rule."})},Object(p.jsx)("span",null,a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.notifyTitle",{defaultMessage:"Notify"})," ",Object(p.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),width:"14%","data-test-subj":"rulesTableCell-rulesListNotify",render:e=>e.consumer!==y.c.SIEM&&e.enabled?Object(p.jsx)(se.RulesListNotifyBadge,{rule:e,isLoading:!!q[e.id],onLoading:t=>W(e.id,t),isOpen:N===e.id,onClick:()=>G(e.id),onClose:()=>G(""),onRuleChanged:C,snoozeRule:async(t,s)=>{await w(e,t)},unsnoozeRule:async()=>await _(e)}):null},{field:"schedule.interval",width:"6%",name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.scheduleTitle",{defaultMessage:"Interval"}),sortable:!1,truncateText:!1,"data-test-subj":"rulesTableCell-interval",render:(e,t)=>{const s=Object(b.formatDuration)(e);return Object(p.jsx)(c.a.Fragment,null,Object(p.jsx)(u.EuiFlexGroup,{direction:"row",gutterSize:"xs"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},s),Object(p.jsx)(u.EuiFlexItem,{grow:!1},t.showIntervalWarning&&Object(p.jsx)(u.EuiToolTip,{"data-test-subj":`ruleInterval-config-tooltip-${t.index}`,title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalTooltipTitle",{defaultMessage:"Below configured minimum interval"}),content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalTooltipText",{defaultMessage:"Rule interval of {interval} is below the minimum configured interval of {minimumInterval}. This may impact alerting performance.",values:{minimumInterval:Object(b.formatDuration)(T.minimumScheduleInterval.value,!0),interval:Object(b.formatDuration)(e,!0)}}),position:"top"},Object(p.jsx)(u.EuiButtonIcon,{color:"text","data-test-subj":`ruleInterval-config-icon-${t.index}`,onClick:()=>S(t),iconType:"flag","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.intervalIconAriaLabel",{defaultMessage:"Below configured minimum interval"})})))))}},{field:"executionStatus.lastDuration",width:"12%",name:Object(p.jsx)(u.EuiToolTip,{"data-test-subj":"rulesTableCell-durationTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.durationTitle",{defaultMessage:"The length of time it took for the rule to run (mm:ss)."})},Object(p.jsx)("span",null,"Duration"," ",Object(p.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,truncateText:!1,"data-test-subj":"rulesTableCell-duration",render:(e,t)=>{const i=Object(K.b)(s.data.get(t.ruleTypeId),e);return Object(p.jsx)(c.a.Fragment,null,Object(p.jsx)(J.a,{duration:e}),i&&Object(p.jsx)(u.EuiIconTip,{"data-test-subj":"ruleDurationWarning",anchorClassName:"ruleDurationWarningIcon",type:"rule",color:"warning",content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleTypeExcessDurationMessage",{defaultMessage:"Duration exceeds the rule's expected run time."}),position:"right"}))}},{mobileOptions:{header:!1},field:ie[$],width:"16%",name:Object(p.jsx)("span",{"data-test-subj":`rulesTable-${$}ColumnName`},Object(p.jsx)(u.EuiToolTip,{content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.ruleExecutionPercentileTooltip",{defaultMessage:"{percentileOrdinal} percentile of this rule's past {sampleLimit} run durations (mm:ss).",values:{percentileOrdinal:ae[$],sampleLimit:b.MONITORING_HISTORY_LIMIT}})},Object(p.jsx)("span",null,$," ",Object(p.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),Object(p.jsx)(Z,{options:m,onOptionsChange:k})),"data-test-subj":"rulesTableCell-ruleExecutionPercentile",sortable:!0,truncateText:!1,render:e=>Object(p.jsx)("span",{"data-test-subj":`${$}Percentile`},Object(p.jsx)(J.a,{allowZero:!1,duration:e}))},{field:"monitoring.execution.calculated_metrics.success_ratio",width:"12%",name:Object(p.jsx)(u.EuiToolTip,{"data-test-subj":"rulesTableCell-successRatioTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.successRatioTitle",{defaultMessage:"How often this rule runs successfully."})},Object(p.jsx)("span",null,"Success ratio"," ",Object(p.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,truncateText:!1,"data-test-subj":"rulesTableCell-successRatio",render:e=>Object(p.jsx)("span",{"data-test-subj":"successRatio"},void 0!==e?Object(ee.c)(e):"N/A")},{field:"executionStatus.status",name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.lastResponseTitle",{defaultMessage:"Last response"}),sortable:!0,truncateText:!1,width:"120px","data-test-subj":"rulesTableCell-lastResponse",render:(e,t)=>((e,t)=>{var s,a;const i=Object(M.b)(e.status),n="error"===e.status?`Error: ${null==e||null===(s=e.error)||void 0===s?void 0:s.message}`:null,o=(null===(a=e.error)||void 0===a?void 0:a.reason)===b.RuleExecutionStatusErrorReasons.License,r=o?z.a:z.c[e.status],c=Object(p.jsx)(u.EuiHealth,{"data-test-subj":`ruleStatus-${e.status}`,color:i},r),d=n?Object(p.jsx)(u.EuiToolTip,{"data-test-subj":"ruleStatus-error-tooltip",position:"top",content:n},c):c;return Object(p.jsx)(u.EuiFlexGroup,{gutterSize:"none"},Object(p.jsx)(u.EuiFlexItem,null,d),o&&Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiButtonEmpty,{size:"xs","data-test-subj":"ruleStatus-error-license-fix",onClick:()=>A(t)},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.fixLicenseLink",defaultMessage:"Fix"}))))})(t.executionStatus,t)},{field:"enabled",name:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.stateTitle",{defaultMessage:"State"}),sortable:!0,truncateText:!1,width:"10%","data-test-subj":"rulesTableCell-status",render:(e,t)=>((e,t)=>Object(p.jsx)(L.RuleStatusDropdown,{hideSnoozeOption:!0,disableRule:async()=>await R(t),enableRule:async()=>await F(t),snoozeRule:async(e,s)=>{await w(t,e)},unsnoozeRule:async()=>await _(t),rule:t,onRuleChanged:C,isEditable:t.isEditable&&Y(t.ruleTypeId)}))(t.enabled,t)},{name:"",width:"90px",render:e=>Object(p.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"none"},Object(p.jsx)(u.EuiFlexItem,{grow:!1,className:"ruleSidebarItem"},Object(p.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e.isEditable&&Y(e.ruleTypeId)?Object(p.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarEditAction"},Object(p.jsx)(u.EuiButtonIcon,{color:"primary",title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.editButtonTooltip",{defaultMessage:"Edit"}),className:"ruleSidebarItem__action","data-test-subj":"editActionHoverButton",onClick:()=>S(e),iconType:"pencil","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.editAriaLabel",{defaultMessage:"Edit"})})):null,e.isEditable?Object(p.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarDeleteAction"},Object(p.jsx)(u.EuiButtonIcon,{color:"danger",title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.deleteButtonTooltip",{defaultMessage:"Delete"}),className:"ruleSidebarItem__action","data-test-subj":"deleteActionHoverButton",onClick:()=>h(e),iconType:"trash","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.deleteAriaLabel",{defaultMessage:"Delete"})})):null)),Object(p.jsx)(u.EuiFlexItem,{grow:!1},U(e,(t=>W(e.id,t)))))},{align:u.RIGHT_ALIGNMENT,width:"40px",isExpander:!0,name:Object(p.jsx)(u.EuiScreenReaderOnly,null,Object(p.jsx)("span",null,"Expand rows")),render:D}],sorting:{sort:g},rowProps:e=>{var t;return{"data-test-subj":"rule-row",className:null!==(t=s.data.get(e.ruleTypeId))&&void 0!==t&&t.enabledInLicense?"":"actRulesList__tableRowDisabled"}},cellProps:e=>{var t;return{"data-test-subj":"cell",className:null!==(t=s.data.get(e.ruleTypeId))&&void 0!==t&&t.enabledInLicense?"":"actRulesList__tableCellDisabled"}},"data-test-subj":"rulesList",pagination:{pageIndex:x.index,pageSize:x.size,totalItemCount:!1===s.isInitialized?0:t.totalItemCount},selection:{selectable:e=>e.isEditable,onSelectionChange:v},onChange:({page:e,sort:t})=>{e&&E(e),t&&f(t)},itemIdToExpandedRowMap:O,isExpandable:!0})},ue={marginLeft:"auto"},de=e=>n()(e).isValid()?a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListAutoRefresh.lastUpdateText",{defaultMessage:"Updated {lastUpdateText}",values:{lastUpdateText:n()(e).fromNow()}}):"",be=3e5,je=e=>{const{lastUpdate:t,initialUpdateInterval:s=be,onRefresh:a}=e,[i,n]=Object(r.useState)(!1),[o,l]=Object(r.useState)(Math.max(s,1e3)),[c,d]=Object(r.useState)(""),b=Object(r.useRef)((()=>{})),j=Object(r.useRef)(),g=Object(r.useRef)();Object(r.useEffect)((()=>{b.current=a}),[a]),Object(r.useEffect)((()=>{d(de(t));const e=()=>{j.current=window.setTimeout((()=>{d(de(t)),e()}),6e4)};return e(),()=>{j.current&&clearTimeout(j.current)}}),[t,d]),Object(r.useEffect)((()=>{if(i)return;const e=()=>{g.current=window.setTimeout((()=>{b.current(),e()}),o)};return e(),()=>{g.current&&clearTimeout(g.current)}}),[i,o]);const x=Object(r.useCallback)((({isPaused:e,refreshInterval:t})=>{n(e),l(t)}),[n,l]);return Object(p.jsx)(u.EuiFlexGroup,{"data-test-subj":"rulesListAutoRefresh",alignItems:"center"},Object(p.jsx)(u.EuiFlexItem,{grow:!1,style:ue},Object(p.jsx)(u.EuiText,{"data-test-subj":"rulesListAutoRefresh-lastUpdateText",size:"s",color:"subdued"},c)),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiAutoRefreshButton,{isPaused:i,shortHand:!0,refreshInterval:o,onRefreshChange:x})))};var ge=s(192);const pe={[j.i.P50]:"monitoring.execution.calculated_metrics.p50",[j.i.P95]:"monitoring.execution.calculated_metrics.p95",[j.i.P99]:"monitoring.execution.calculated_metrics.p99"},xe=Object.values(j.i).map((e=>({checked:e===j.i.P50?"on":void 0,label:e,key:e}))),me=()=>{const e=Object(d.useHistory)(),{http:t,notifications:{toasts:s},application:{capabilities:i},ruleTypeRegistry:j,actionTypeRegistry:m,kibanaFeatures:f}=Object(O.b)().services,E=Object(R.c)(i),[I,y]=Object(r.useState)({isUsingSecurity:!1}),[S,h]=Object(r.useState)([]),[L,K]=Object(r.useState)([]),[V,Q]=Object(r.useState)(!1),[Z,J]=Object(r.useState)({index:0,size:w.d}),[X,ee]=Object(r.useState)(),[te,se]=Object(r.useState)(),[ae,ie]=Object(r.useState)([]),[ne,oe]=Object(r.useState)([]),[le,ue]=Object(r.useState)([]),[de,be]=Object(r.useState)([]),[pe,me]=Object(r.useState)([]),[fe,Ee]=Object(r.useState)(!1),[Ie,ye]=Object(r.useState)(!1),[Se,he]=Object(r.useState)(null),[Le,Ae]=Object(r.useState)({}),[ve,ke]=Object(r.useState)(!1),[Me,Ce]=Object(r.useState)(""),Fe=Object($.a)("ruleTagFilter"),Re=Object($.a)("ruleStatusFilter");Object(r.useEffect)((()=>{(async()=>{y(await Object(G.a)({http:t}))})()}),[t]);const[we,_e]=Object(r.useState)(xe),[Ue,ze]=Object(r.useState)({field:"name",direction:"asc"}),[De,Pe]=Object(r.useState)(null),[Be,Ne]=Object(r.useState)({isLoading:!1,isInitialized:!1,data:new Map}),[Ge,qe]=Object(r.useState)([]),He=Object(r.useMemo)((()=>Be.isInitialized&&Be.data.size>0),[Be]),$e=Object(r.useCallback)((e=>{s.addDanger(e)}),[s]),{rulesState:We,setRulesState:Ye,loadRules:Ke,noData:Ve,initialLoad:Qe}=function({page:e,searchText:t,typesFilter:s,actionTypesFilter:i,ruleExecutionStatusesFilter:n,ruleStatusesFilter:l,tagsFilter:c,sort:u,onPage:d,onError:b}){const{http:j}=Object(O.b)().services,[g,p]=Object(r.useReducer)(Y,W),x=Object(r.useCallback)((e=>{p({type:N.SET_RULE_STATE,payload:e})}),[p]),m=Object(r.useCallback)((async()=>{p({type:N.SET_LOADING,payload:!0});try{var r;const a=await Object(C.o)({http:j,page:e,searchText:t,typesFilter:s,actionTypesFilter:i,ruleExecutionStatusesFilter:n,ruleStatusesFilter:l,tagsFilter:c,sort:u});p({type:N.SET_RULE_STATE,payload:{isLoading:!1,data:a.data,totalItemCount:a.total}}),(null===(r=a.data)||void 0===r||!r.length)&&e.index>0&&d({...e,index:0});const b=!(Object(o.isEmpty)(t)&&Object(o.isEmpty)(s)&&Object(o.isEmpty)(i)&&Object(o.isEmpty)(n)&&Object(o.isEmpty)(l)&&Object(o.isEmpty)(c));p({type:N.SET_NO_DATA,payload:0===a.data.length&&!b})}catch(e){b(a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules"})),p({type:N.SET_LOADING,payload:!1})}p({type:N.SET_INITIAL_LOAD,payload:!1})}),[j,e,t,s,i,n,l,c,u,p,d,b]);return Object(r.useMemo)((()=>({rulesState:g.rulesState,noData:g.noData,initialLoad:g.initialLoad,loadRules:m,setRulesState:x})),[g,x,m])}({page:Z,searchText:X,typesFilter:ae,actionTypesFilter:ne,ruleExecutionStatusesFilter:le,ruleStatusesFilter:de,tagsFilter:pe,sort:Ue,onPage:J,onError:$e}),{tags:Ze,loadTags:Je}=function(e){const{onError:t}=e,{http:s}=Object(O.b)().services,[i,n]=Object(r.useState)([]),o=Object(r.useCallback)((async()=>{try{const e=await Object(C.m)({http:s});null!=e&&e.ruleTags&&n(e.ruleTags)}catch(e){t(a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleTags",{defaultMessage:"Unable to load rule tags"}))}}),[s,n,t]);return Object(r.useMemo)((()=>({tags:i,loadTags:o,setTags:n})),[i,o,n])}({onError:$e}),{loadRuleAggregations:Xe,rulesStatusesTotal:et}=function({searchText:e,typesFilter:t,actionTypesFilter:s,ruleExecutionStatusesFilter:i,ruleStatusesFilter:n,tagsFilter:o,onError:l}){const{http:c}=Object(O.b)().services,[u,d]=Object(r.useState)(b.RuleExecutionStatusValues.reduce(((e,t)=>({...e,[t]:0})),{})),j=Object(r.useCallback)((async()=>{try{const a=await Object(C.j)({http:c,searchText:e,typesFilter:t,actionTypesFilter:s,ruleExecutionStatusesFilter:i,ruleStatusesFilter:n,tagsFilter:o});null!=a&&a.ruleExecutionStatus&&d(a.ruleExecutionStatus)}catch(e){l(a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleStatusInfoMessage",{defaultMessage:"Unable to load rule status info"}))}}),[c,e,t,s,i,n,o,l,d]);return Object(r.useMemo)((()=>({loadRuleAggregations:j,rulesStatusesTotal:u,setRulesStatusesTotal:d})),[j,u,d])}({searchText:X,typesFilter:ae,actionTypesFilter:ne,ruleExecutionStatusesFilter:le,ruleStatusesFilter:de,tagsFilter:pe,onError:$e}),[tt,st]=Object(r.useState)([]),at=e=>{ye(!0),he(e)},it=Object(r.useCallback)((async()=>{Be&&He&&(await Ke(),await Xe(),Re&&await Je(),Ce(n()().format()))}),[Ke,Je,Xe,Ce,Re,He,Be]);Object(r.useEffect)((()=>{it()}),[it,we]),Object(r.useEffect)((()=>{(async()=>{try{Ne({...Be,isLoading:!0});const e=await Object(C.n)({http:t}),s=new Map;for(const t of e)s.set(t.id,t);Ne({isLoading:!1,data:s,isInitialized:!0})}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})}),Ne({...Be,isLoading:!1})}})()}),[]),Object(r.useEffect)((()=>{(async()=>{try{const e=(await Object(F.d)({http:t})).filter((({id:e})=>m.has(e)&&!D.DEFAULT_HIDDEN_ACTION_TYPES.includes(e))).sort(((e,t)=>e.name.localeCompare(t.name)));h(e)}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}})()}),[]);const nt=e=>{var t,s;const a="error"===e.status,i=null==e||null===(t=e.error)||void 0===t?void 0:t.message,n=(null===(s=e.error)||void 0===s?void 0:s.reason)===b.RuleExecutionStatusErrorReasons.License?z.a:null;return[{title:Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.expandRow.title",defaultMessage:"Error from last run"}),description:Object(p.jsx)(c.a.Fragment,null,i,a&&n&&Object(p.jsx)(u.EuiSpacer,{size:"xs"}),n)}]},ot=Object(r.useCallback)((()=>{ke((e=>{if(e)Ae({});else{const e=We.data.reduce(((e,t)=>"error"===t.executionStatus.status?{...e,[t.id]:Object(p.jsx)(u.EuiDescriptionList,{listItems:nt(t.executionStatus)})}:e),{});Ae(e)}return!e}))}),[ve,We]),lt=[...Be.data.values()],rt=lt.some((e=>{var t;return null===(t=e.authorizedConsumers[b.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all})),ct=[Object(p.jsx)(v,{key:"type-filter",onChange:e=>ie(e),options:Object(o.sortBy)(Object.entries(lt.reduce(((e,t)=>{const s=t.producer;return(e[s]=e[s]||[]).push({value:t.id,name:t.name}),e}),{}))).map((([e,t])=>{var s,a,i;return{groupName:null!==(a=e,s=null==f||null===(i=f.find((e=>e.id===a)))||void 0===i?void 0:i.name)&&void 0!==s?s:Object(o.capitalize)(e),subOptions:t.sort(((e,t)=>e.name.localeCompare(t.name)))}}))}),Object(p.jsx)(k,{key:"action-type-filter",actionTypes:S,onChange:e=>oe(e)}),Object(p.jsx)(M.a,{key:"rule-status-filter",selectedStatuses:le,onChange:e=>ue(e)}),...Fe?[Object(p.jsx)(q.RuleTagFilter,{isGrouped:!0,tags:Ze,selectedTags:pe,onChange:me})]:[]],ut=!!L.length&&Te(We.data,L).every((e=>Object(R.a)(e,Be.data.get(e.ruleTypeId)))),dt=Object(p.jsx)(c.a.Fragment,null,et.error>0?Object(p.jsx)(c.a.Fragment,null,Object(p.jsx)(u.EuiCallOut,{color:"danger",size:"s","data-test-subj":"rulesErrorBanner"},Object(p.jsx)("p",null,Object(p.jsx)(u.EuiIcon,{color:"danger",type:"alert"})," ",Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.attentionBannerTitle",defaultMessage:"Error found in {totalStatusesError, plural, one {# rule} other {# rules}}.",values:{totalStatusesError:et.error}})," ",Object(p.jsx)(u.EuiLink,{color:"primary",onClick:()=>ue(["error"])},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.viewBannerButtonLabel",defaultMessage:"Show {totalStatusesError, plural, one {rule} other {rules}} with error",values:{totalStatusesError:et.error}})))),Object(p.jsx)(u.EuiSpacer,{size:"s"})):null,Object(p.jsx)(u.EuiFlexGroup,{gutterSize:"s"},L.length>0&&ut&&Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(x,null,Object(p.jsx)(T,{selectedItems:re({rules:Te(We.data,L),ruleTypeIndex:Be.data,canExecuteActions:E,config:I}),onPerformingAction:()=>Q(!0),onActionPerformed:()=>{it(),Q(!1)},setRulesToDelete:qe}))),rt?Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiButton,{key:"create-rule","data-test-subj":"createRuleButton",fill:!0,onClick:()=>Ee(!0)},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.addRuleButtonLabel",defaultMessage:"Create rule"}))):null,Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiFieldSearch,{fullWidth:!0,isClearable:!0,"data-test-subj":"ruleSearchField",onChange:e=>{se(e.target.value),""===e.target.value&&ee(e.target.value)},onKeyUp:e=>{13===e.keyCode&&ee(te)},placeholder:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.searchPlaceholderTitle",{defaultMessage:"Search"})})),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Re?Object(p.jsx)(H.RuleStatusFilter,{selectedStatuses:de,onChange:be}):null),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiFilterGroup,null,ct.map(((e,t)=>Object(p.jsx)(c.a.Fragment,{key:t},e)))))),Object(p.jsx)(u.EuiSpacer,{size:"m"}),Object(p.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(p.jsx)(u.EuiFlexItem,null,Object(p.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiText,{size:"s",color:"subdued","data-test-subj":"totalRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalItemsCountDescription",defaultMessage:"Showing: {pageSize} of {totalItemCount} rules.",values:{totalItemCount:We.totalItemCount,pageSize:We.data.length}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"success","data-test-subj":"totalActiveRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:et.active}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"danger","data-test-subj":"totalErrorRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:et.error}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"warning","data-test-subj":"totalWarningRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:et.warning}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"primary","data-test-subj":"totalOkRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:et.ok}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"accent","data-test-subj":"totalPendingRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:et.pending}}))),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"totalUnknownRulesCount"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:et.unknown}}))),Object(p.jsx)(je,{lastUpdate:Me,onRefresh:it}))),et.error>0&&Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiLink,{"data-test-subj":"expandRulesError",color:"primary",onClick:ot},!ve&&Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.showAllErrors",defaultMessage:"Show {totalStatusesError, plural, one {error} other {errors}}",values:{totalStatusesError:et.error}}),ve&&Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.hideAllErrors",defaultMessage:"Hide {totalStatusesError, plural, one {error} other {errors}}",values:{totalStatusesError:et.error}})))),Object(p.jsx)(u.EuiHorizontalRule,{margin:"xs"}),Object(p.jsx)(ce,{canExecuteActions:E,isLoading:We.isLoading||Be.isLoading||V,rulesState:We,ruleTypesState:Be,ruleTypeRegistry:j,sort:Ue,page:Z,percentileOptions:we,itemIdToExpandedRowMap:Le,onSort:ze,onPage:J,onRuleChanged:()=>it(),onRuleClick:t=>{e.push(w.q.replace(":ruleId",t.id))},onRuleEditClick:e=>{var t;e.isEditable&&(t=e.ruleTypeId,j.has(t)&&!j.get(t).requiresAppContext)&&at(e)},onRuleDeleteClick:e=>qe([e.id]),onManageLicenseClick:e=>{var t;return Pe({licenseType:null===(t=Be.data.get(e.ruleTypeId))||void 0===t?void 0:t.minimumLicenseRequired,ruleTypeId:e.ruleTypeId})},onSelectionChange:e=>K(e.map((e=>e.id))),onPercentileOptionsChange:_e,onDisableRule:e=>Object(C.d)({http:t,id:e.id}),onEnableRule:e=>Object(C.f)({http:t,id:e.id}),onSnoozeRule:(e,s)=>Object(C.t)({http:t,id:e.id,snoozeEndTime:s}),onUnsnoozeRule:e=>Object(C.x)({http:t,id:e.id}),renderCollapsedItemActions:(e,t)=>Object(p.jsx)(A,{key:e.id,item:e,onLoading:t,onRuleChanged:()=>it(),setRulesToDelete:qe,onEditRule:()=>at(e),onUpdateAPIKey:st}),renderRuleError:e=>{var t;const s=e.executionStatus,a="error"===s.status;return(null===(t=s.error)||void 0===t?void 0:t.reason)===b.RuleExecutionStatusErrorReasons.License||a?Object(p.jsx)(u.EuiButtonIcon,{onClick:()=>((e,t)=>{Ae((s=>{const a={...s};return a[t.id]?delete a[t.id]:a[t.id]=Object(p.jsx)(u.EuiDescriptionList,{listItems:nt(e)}),a}))})(s,e),"aria-label":Le[e.id]?"Collapse":"Expand",iconType:Le[e.id]?"arrowUp":"arrowDown"}):null},config:I}),De&&Object(p.jsx)(B,{licenseType:De.licenseType,ruleTypeId:De.ruleTypeId,onConfirm:()=>{window.open(`${t.basePath.get()}/app/management/stack/license_management`,"_blank"),Pe(null)},onCancel:()=>Pe(null)}));return Object(p.jsx)("section",{"data-test-subj":"rulesList"},Object(p.jsx)(_.a,{onDeleted:async()=>{qe([]),K([]),await it()},onErrors:async()=>{await it(),qe([])},onCancel:()=>{qe([])},apiDeleteCall:C.c,idsToDelete:Ge,singleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),multipleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),setIsLoadingState:e=>{Ye({...We,isLoading:e})}}),Object(p.jsx)(ge.a,{onCancel:()=>{st([])},idsToUpdate:tt,apiUpdateApiKeyCall:C.y,setIsLoadingState:e=>{Ye({...We,isLoading:e})},onUpdated:async()=>{st([]),await it()}}),Object(p.jsx)(u.EuiSpacer,{size:"xs"}),!Ve||We.isLoading||Be.isLoading?Qe?Object(p.jsx)(P.a,null):dt:rt?Object(p.jsx)(U,{onCTAClicked:()=>Ee(!0)}):Oe,fe&&Object(p.jsx)(g.a,{consumer:b.ALERTS_FEATURE_ID,onClose:()=>{Ee(!1)},actionTypeRegistry:m,ruleTypeRegistry:j,ruleTypeIndex:Be.data,onSave:it}),Ie&&Se&&Object(p.jsx)(g.b,{initialRule:Se,onClose:()=>{ye(!1)},actionTypeRegistry:m,ruleTypeRegistry:j,ruleType:Be.data.get(Se.ruleTypeId),onSave:it}))},Oe=Object(p.jsx)(u.EuiEmptyPrompt,{iconType:"securityApp",title:Object(p.jsx)("h1",null,Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.noPermissionToCreateTitle",defaultMessage:"No permissions to create rules"})),body:Object(p.jsx)("p",{"data-test-subj":"permissionDeniedMessage"},Object(p.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))});function Te(e,t){return e.filter((e=>t.includes(e.id)))}}}]);