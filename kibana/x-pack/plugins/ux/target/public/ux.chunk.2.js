/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ux_bundle_jsonpfunction=window.ux_bundle_jsonpfunction||[]).push([[2],Array(29).concat([function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),l=o.either.map,u=o.either.chain,s=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,r){var a=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new e(r,n.is,(function(e,t){return u(a.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return a.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=s,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,r){for(var a=e.length,i=Array(a+1),o=0;o<a;o++)i[o]=e[o];return i[a]={key:t,type:n,actual:r},i},t.failures=o.left,t.failure=function(e,n,r){return t.failures([{value:e,context:n,message:r}])},t.success=o.right;var c=function(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])},d=function(e){return function(t){return t._tag===e}},f=d("AnyType"),p=d("InterfaceType"),m=d("PartialType"),g=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NullType",n}return a(n,e),n}(s);t.NullType=g,t.nullType=new g,t.null=t.nullType;var h=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="UndefinedType",n}return a(n,e),n}(s);t.UndefinedType=h;var v=new h;t.undefined=v;var y=function(e){function n(){var n=e.call(this,"void",v.is,v.validate,t.identity)||this;return n._tag="VoidType",n}return a(n,e),n}(s);t.VoidType=y,t.voidType=new y,t.void=t.voidType;var E=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return a(n,e),n}(s);t.UnknownType=E,t.unknown=new E;var b=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="StringType",n}return a(n,e),n}(s);t.StringType=b,t.string=new b;var x=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NumberType",n}return a(n,e),n}(s);t.NumberType=x,t.number=new x;var T=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="BooleanType",n}return a(n,e),n}(s);t.BooleanType=T,t.boolean=new T;var w=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyArrayType",n}return a(n,e),n}(s);t.AnyArrayType=w,t.UnknownArray=new w,t.Array=t.UnknownArray;var k=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return a(n,e),n}(s);t.AnyDictionaryType=k,t.UnknownRecord=new k;var S=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="FunctionType",n}return a(n,e),n}(s);t.FunctionType=S,t.Function=new S;var O=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a)||this;return l.type=i,l.predicate=o,l._tag="RefinementType",l}return a(t,e),t}(s);t.RefinementType=O,t.brand=function(e,t,n){return X(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var j=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.value=i,o._tag="LiteralType",o}return a(t,e),t}(s);t.LiteralType=j,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var r=function(t){return t===e};return new j(n,r,(function(n,a){return r(n)?t.success(e):t.failure(n,a)}),t.identity,e)};var F=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.keys=i,o._tag="KeyofType",o}return a(t,e),t}(s);t.KeyofType=F;var _=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(n){return t.string.is(n)&&_.call(e,n)};return new F(n,r,(function(e,n){return r(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var I=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.runDefinition=i,o._tag="RecursiveType",o}return a(t,e),t}(s);t.RecursiveType=I,Object.defineProperty(I.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,r=function(){return n||((n=t(a)).name=e),n},a=new I(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return a};var L=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ArrayType",o}return a(t,e),t}(s);t.ArrayType=L,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new L(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,r){return u(t.UnknownArray.validate(n,r),(function(n){for(var a=n.length,i=n,l=[],u=0;u<a;u++){var s=n[u],d=e.validate(s,t.appendContext(r,String(u),e,s));if(o.isLeft(d))c(l,d.left);else{var f=d.right;f!==s&&(i===n&&(i=n.slice()),i[u]=f)}}return l.length>0?t.failures(l):t.success(i)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var M=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="InterfaceType",o}return a(t,e),t}(s);t.InterfaceType=M;var P=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},R=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},C=function(e){return"{ "+P(e)+" }"};t.type=function(e,n){void 0===n&&(n=C(e));var r=Object.keys(e),a=r.map((function(t){return e[t]})),l=r.length;return new M(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<l;n++){var i=r[n];if(!_.call(e,i)||!a[n].is(e[i]))return!1}return!0}return!1}),(function(e,n){return u(t.UnknownRecord.validate(e,n),(function(e){for(var u=e,s=[],d=0;d<l;d++){var f=r[d];_.call(u,f)||(u===e&&(u=i({},e)),u[f]=u[f]);var p=u[f],m=a[d],g=m.validate(p,t.appendContext(n,f,m,p));if(o.isLeft(g))c(s,g.left);else{var h=g.right;h!==p&&(u===e&&(u=i({},e)),u[f]=h)}}return s.length>0?t.failures(s):t.success(u)}))}),R(a)?t.identity:function(e){for(var n=i({},e),o=0;o<l;o++){var u=r[o],s=a[o].encode;s!==t.identity&&(n[u]=s(e[u]))}return n},e)},t.interface=t.type;var A=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="PartialType",o}return a(t,e),t}(s);t.PartialType=A;var N=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=N(C(e)));var r=Object.keys(e),a=r.map((function(t){return e[t]})),l=r.length;return new A(n,(function(n){if(t.UnknownRecord.is(n)){for(var a=0;a<l;a++){var i=r[a],o=n[i];if(void 0!==o&&!e[i].is(o))return!1}return!0}return!1}),(function(n,a){return u(t.UnknownRecord.validate(n,a),(function(n){for(var u=n,s=[],d=0;d<l;d++){var f=r[d],p=u[f],m=e[f],g=m.validate(p,t.appendContext(a,f,m,p));if(o.isLeft(g))void 0!==p&&c(s,g.left);else{var h=g.right;h!==p&&(u===n&&(u=i({},n)),u[f]=h)}}return s.length>0?t.failures(s):t.success(u)}))}),R(a)?t.identity:function(e){for(var t=i({},e),n=0;n<l;n++){var o=r[n],u=e[o];void 0!==u&&(t[o]=a[n].encode(u))}return t},e)};var U=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a)||this;return l.domain=i,l.codomain=o,l._tag="DictionaryType",l}return a(t,e),t}(s);t.DictionaryType=U,t.record=function(e,n,r){return void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }"),new U(r,(function(r){return t.UnknownRecord.is(r)?Object.keys(r).every((function(t){return e.is(t)&&n.is(r[t])})):f(n)&&Array.isArray(r)}),(function(r,a){if(t.UnknownRecord.is(r)){for(var i={},l=[],u=Object.keys(r),s=u.length,d=!1,p=0;p<s;p++){var m=u[p],g=r[m],h=e.validate(m,t.appendContext(a,m,e,m));if(o.isLeft(h))c(l,h.left);else{var v=h.right;d=d||v!==m,m=v;var y=n.validate(g,t.appendContext(a,m,n,g));if(o.isLeft(y))c(l,y.left);else{var E=y.right;d=d||E!==g,i[m]=E}}}return l.length>0?t.failures(l):t.success(d?i:r)}return f(n)&&Array.isArray(r)?t.success(r):t.failure(r,a)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var r={},a=Object.keys(t),i=a.length,o=0;o<i;o++){var l=a[o];r[String(e.encode(l))]=n.encode(t[l])}return r},e,n)};var D=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="UnionType",o}return a(t,e),t}(s);t.UnionType=D;var V=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=V(e));var r=ie(e);if(void 0!==r&&e.length>0){var a=r[0],i=r[1],l=i.length,s=function(e){for(var t=0;t<l;t++)if(-1!==i[t].indexOf(e))return t};return new H(n,(function(n){if(t.UnknownRecord.is(n)){var r=s(n[a]);return void 0!==r&&e[r].is(n)}return!1}),(function(n,r){return u(t.UnknownRecord.validate(n,r),(function(i){var o=s(i[a]);if(void 0===o)return t.failure(n,r);var l=e[o];return l.validate(i,t.appendContext(r,String(o),l,i))}))}),R(e)?t.identity:function(t){var r=s(t[a]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return e[r].encode(t)},e,a)}return new D(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,r){for(var a=[],i=0;i<e.length;i++){var l=e[i],u=l.validate(n,t.appendContext(r,String(i),l,n));if(!o.isLeft(u))return t.success(u.right);c(a,u.left)}return t.failures(a)}),R(e)?t.identity:function(t){for(var r=0,a=e;r<a.length;r++){var i=a[r];if(i.is(t))return i.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var B=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="IntersectionType",o}return a(t,e),t}(s);t.IntersectionType=B;var z=function(e,n){for(var r=!0,a=!0,i=0,o=n;i<o.length;i++)(c=o[i])!==e&&(r=!1),t.UnknownRecord.is(c)&&(a=!1);if(r)return e;if(a)return n[n.length-1];for(var l={},u=0,s=n;u<s.length;u++){var c=s[u];for(var d in c)c[d]===e[d]&&l.hasOwnProperty(d)||(l[d]=c[d])}return l};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var r=e.length;return new B(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,a){for(var i=[],l=[],u=0;u<r;u++){var s=e[u],d=s.validate(n,t.appendContext(a,String(u),s,n));o.isLeft(d)?c(l,d.left):i.push(d.right)}return l.length>0?t.failures(l):t.success(z(n,i))},0===e.length?t.identity:function(t){return z(t,e.map((function(e){return e.encode(t)})))},e)};var q=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="TupleType",o}return a(t,e),t}(s);t.TupleType=q,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var r=e.length;return new q(n,(function(n){return t.UnknownArray.is(n)&&n.length===r&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,a){return u(t.UnknownArray.validate(n,a),(function(n){for(var i=n.length>r?n.slice(0,r):n,l=[],u=0;u<r;u++){var s=n[u],d=e[u],f=d.validate(s,t.appendContext(a,String(u),d,s));if(o.isLeft(f))c(l,f.left);else{var p=f.right;p!==s&&(i===n&&(i=n.slice()),i[u]=p)}}return l.length>0?t.failures(l):t.success(i)}))}),R(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var W=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ReadonlyType",o}return a(t,e),t}(s);t.ReadonlyType=W,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new W(n,e.is,(function(t,n){return l(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var G=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ReadonlyArrayType",o}return a(t,e),t}(s);t.ReadonlyArrayType=G,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var r=t.array(e);return new G(n,r.is,(function(e,t){return l(r.validate(e,t),(function(e){return e}))}),r.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var H=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a,i)||this;return l.tag=o,l}return a(t,e),t}(D);t.TaggedUnionType=H,t.taggedUnion=function(e,n,r){void 0===r&&(r=V(n));var a=t.union(n,r);return a instanceof H?a:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new H(r,a.is,a.validate,a.encode,n,e))};var $=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ExactType",o}return a(t,e),t}(s);t.ExactType=$;var Y=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return Y(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,Y(t))}),{})}},Q=function(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,a={},i=0;i<n.length;i++){var o=n[i];_.call(t,o)?a[o]=e[o]:r=!0}return r?a:e};t.exact=function(e,n){void 0===n&&(n=function(e){return p(e)?"{| "+P(e.props)+" |}":m(e)?N("{| "+P(e.props)+" |}"):"Exact<"+e.name+">"}(e));var r=Y(e);return new $(n,e.is,(function(n,a){return u(t.UnknownRecord.validate(n,a),(function(){return l(e.validate(n,a),(function(e){return Q(e,r)}))}))}),(function(t){return e.encode(Q(t,r))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var J=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return a(n,e),n}(s);t.NeverType=J,t.never=new J;var K=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return a(n,e),n}(s);t.AnyType=K,t.any=new K,t.Dictionary=t.UnknownRecord;var Z=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="ObjectType",n}return a(n,e),n}(s);function X(e,n,r){return void 0===r&&(r="("+e.name+" | "+t.getFunctionName(n)+")"),new O(r,(function(t){return e.is(t)&&n(t)}),(function(r,a){return u(e.validate(r,a),(function(e){return n(e)?t.success(e):t.failure(e,a)}))}),e.encode,e,n)}t.ObjectType=Z,t.object=new Z,t.refinement=X,t.Integer=X(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="StrictType",o}return a(t,e),t}(s);function te(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var i=a[r];-1!==t.indexOf(i)&&n.push(i)}return n}function ne(e){return"LiteralType"===e._tag}t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}},t.emptyTags={};var re=[];function ae(e){if(-1!==re.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var r in e.props){var a=e.props[r];ne(a)&&(n===t.emptyTags&&(n={}),n[r]=[a.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return ae(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var r=Object.assign({},e);for(var a in n)if(e.hasOwnProperty(a)){var i=te(e[a],n[a]);if(!(i.length>0)){r=t.emptyTags;break}r[a]=i}else r[a]=n[a];return r}(e,ae(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var r=t.emptyTags;for(var a in e)n.hasOwnProperty(a)&&0===te(e[a],n[a]).length&&(r===t.emptyTags&&(r={}),r[a]=e[a].concat(n[a]));return r}(e,ae(n))}),ae(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){re.push(e);var i=ae(e.type);return re.pop(),i}return t.emptyTags}function ie(e){for(var t=ae(e[0]),n=Object.keys(t),r=e.length,a=function(n){for(var a=t[n].slice(),i=[t[n]],o=1;o<r;o++){var l=ae(e[o])[n];if(void 0===l)return"continue-keys";if(l.some((function(e){return-1!==a.indexOf(e)})))return"continue-keys";a.push.apply(a,l),i.push(l)}return{value:[n,i]}},i=0,o=n;i<o.length;i++){var l=a(o[i]);if("object"==typeof l)return l.value}}t.getTags=ae,t.getIndex=ie},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var r=n(50),a=n(51);function i(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=i,t.parseJSON=function(e,t){return i((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return i((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fold=function(e,n){return function(r){return t.isLeft(r)?e(r.left):n(r.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(r){return e(r)?t.right(r):t.left(n(r))}))};var o=function(e,n){return a.pipe(e,t.map(n))},l=function(e,n){return a.pipe(e,t.ap(n))},u=function(e,n){return a.pipe(e,t.chain(n))},s=function(e,n,r){return a.pipe(e,t.reduce(n,r))},c=function(e){return function(n,r){var i=t.foldMap(e);return a.pipe(n,i(r))}},d=function(e,n,r){return a.pipe(e,t.reduceRight(n,r))},f=function(e){var n=t.traverse(e);return function(e,t){return a.pipe(e,n(t))}},p=function(e,n,r){return a.pipe(e,t.bimap(n,r))},m=function(e,n){return a.pipe(e,t.mapLeft(n))},g=function(e,n){return a.pipe(e,t.alt(n))},h=function(e,n){return a.pipe(e,t.extend(n))},v=function(e,n){return r.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function y(e){return{concat:function(n,r){return t.isLeft(n)?n:t.isLeft(r)?r:t.right(e.concat(n.right,r.right))}}}function E(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:o,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,r){return t.isLeft(e)||r(e.right)?e:n},filterMap:function(e,r){if(t.isLeft(e))return e;var a=r(e.right);return"None"===a._tag?n:t.right(a.value)},partition:function(e,r){return t.isLeft(e)?{left:e,right:e}:r(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,r){if(t.isLeft(e))return{left:e,right:e};var a=r(e.right);return t.isLeft(a)?{left:t.right(a.left),right:n}:{left:n,right:t.right(a.right)}}}}function b(e){return{URI:t.URI,_E:void 0,map:o,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.left,r.left)):n:t.isLeft(r)?r:t.right(n.right(r.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:o,alt:function(n,r){if(t.isRight(n))return n;var a=r();return t.isLeft(a)?t.left(e.concat(n.left,a.left)):a}}}function T(e,n){return{concat:function(r,a){return t.isLeft(r)?t.isLeft(a)?t.left(e.concat(r.left,a.left)):r:t.isLeft(a)?a:t.right(n.concat(r.right,a.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(r){return t.isLeft(r)?t.left(e(r.left)):t.right(n(r.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return a.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return a.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return a.pipe(n,t.chainW((function(n){return a.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(a.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(a.identity),t.reduce=function(e,n){return function(r){return t.isLeft(r)?e:n(e,r.right)}},t.foldMap=function(e){return function(n){return function(r){return t.isLeft(r)?e.empty:n(r.right)}}},t.reduceRight=function(e,n){return function(r){return t.isLeft(r)?e:n(r.right,e)}},t.traverse=function(e){return function(n){return function(r){return t.isLeft(r)?e.of(t.left(r.left)):e.map(n(r.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(r){return t.isLeft(r)?"left("+e.show(r.left)+")":"right("+n.show(r.right)+")"}}},t.getEq=function(e,n){return{equals:function(r,a){return r===a||(t.isLeft(r)?t.isLeft(a)&&e.equals(r.left,a.left):t.isRight(a)&&n.equals(r.right,a.right))}}},t.getSemigroup=function(e){return{concat:function(n,r){return t.isLeft(r)?n:t.isLeft(n)?r:t.right(e.concat(n.right,r.right))}}},t.getApplySemigroup=y,t.getApplyMonoid=function(e){return{concat:y(e).concat,empty:t.right(e.empty)}},t.getFilterable=E,t.getWitherable=function(e){var n=E(e);return{URI:t.URI,_E:void 0,map:o,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:f,sequence:t.sequence,reduce:s,foldMap:c,reduceRight:d,wither:function(e){var t=f(e);return function(r,a){return e.map(t(r,a),n.compact)}},wilt:function(e){var t=f(e);return function(r,a){return e.map(t(r,a),n.separate)}}}},t.getApplicativeValidation=b,t.getAltValidation=x,t.getValidation=function(e){var n=b(e),r=x(e);return{URI:t.URI,_E:void 0,map:o,of:t.of,chain:u,bimap:p,mapLeft:m,reduce:s,foldMap:c,reduceRight:d,extend:h,traverse:f,sequence:t.sequence,chainRec:v,throwError:t.throwError,ap:n.ap,alt:r.alt}},t.getValidationSemigroup=T,t.Functor={URI:t.URI,map:o},t.Applicative={URI:t.URI,map:o,ap:l,of:t.of},t.Monad={URI:t.URI,map:o,ap:l,of:t.of,chain:u},t.Foldable={URI:t.URI,reduce:s,foldMap:c,reduceRight:d},t.Traversable={URI:t.URI,map:o,reduce:s,foldMap:c,reduceRight:d,traverse:f,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:p,mapLeft:m},t.Alt={URI:t.URI,map:o,alt:g},t.Extend={URI:t.URI,map:o,extend:h},t.ChainRec={URI:t.URI,map:o,ap:l,chain:u,chainRec:v},t.MonadThrow={URI:t.URI,map:o,ap:l,of:t.of,chain:u,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:T(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:o,of:t.of,ap:l,chain:u,reduce:s,foldMap:c,reduceRight:d,traverse:f,sequence:t.sequence,bimap:p,mapLeft:m,alt:g,extend:h,chainRec:v,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,r){return!t.isLeft(r)&&e.equals(n,r.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(a.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(r){return a.pipe(n(r),t.map((function(t){return a.bind_(r,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return a.flow(t.map((function(t){return function(n){return a.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},,function(e,t,n){e.exports=n(15)(23)},,function(e,t,n){e.exports=n(15)(2567)},function(e,t,n){"use strict";const r=n(47),a=n(48),i=n(49);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?a(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const a="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const a of e.split("&")){let[e,o]=i(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:u(o,t),n(u(e,t),o,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else r[e]=f(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=s(n):e[t]=n,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[",a,"]"].join("")]:[...n,[l(t,e),"[",l(a,e),"]=",l(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[l(t,e),"=",l(r,e)].join("")]:[[n,l(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,l(t,e)]:[...n,[l(t,e),"=",l(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const i=Object.keys(a);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const a=e[n];return void 0===a?"":null===a?l(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):l(n,t)+"="+l(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(e.url).split("?")[0]||"",a=t.extract(e.url),i=t.parse(a,{sort:!1}),o=Object.assign(i,e.query);let u=t.stringify(o,n);u&&(u=`?${u}`);let s=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(s=`#${l(e.fragmentIdentifier,n)}`),`${r}${u}${s}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(7),i=r.__importDefault(n(61));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=i.default(e,t),o=r[0],l=r[1],u=r[2];return a.useEffect(u,n),[o,l]}},function(e,t,n){e.exports=n(15)(3)},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},,,,,,,function(e,t,n){e.exports=n(15)(9)},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var r="%[a-f0-9]{2}",a=new RegExp(r,"gi"),i=new RegExp("("+r+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function l(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(a),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(a);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=l(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var u=a[o];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";function r(e){return e}function a(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=r,t.unsafeCoerce=r,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,r,a,i,o,l,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return l(o(i(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(l(o(i(a(r(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=a,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,r,a,i,o,l,u,s,c,d,f,p,m,g,h,v,y,E){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return i(a(r(n(t(e)))));case 7:return o(i(a(r(n(t(e))))));case 8:return l(o(i(a(r(n(t(e)))))));case 9:return u(l(o(i(a(r(n(t(e))))))));case 10:return s(u(l(o(i(a(r(n(t(e)))))))));case 11:return c(s(u(l(o(i(a(r(n(t(e))))))))));case 12:return d(c(s(u(l(o(i(a(r(n(t(e)))))))))));case 13:return f(d(c(s(u(l(o(i(a(r(n(t(e))))))))))));case 14:return p(f(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))));case 15:return m(p(f(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))));case 16:return g(m(p(f(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))));case 17:return h(g(m(p(f(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))))));case 18:return v(h(g(m(p(f(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))))));case 19:return y(v(h(g(m(p(f(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))))))));case 20:return E(y(v(h(g(m(p(f(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))))))))}},t.hole=a,t.bind_=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){"use strict";e.exports=n(53)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(26),i=(r=n(7))&&"object"==typeof r&&"default"in r?r.default:r;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.matchRoutes=function e(t,n,r){return void 0===r&&(r=[]),t.some((function(t){var i=t.path?a.matchPath(n,t):r.length?r[r.length-1].match:a.Router.computeRootMatch(n);return i&&(r.push({route:t,match:i}),t.routes&&e(t.routes,n,r)),i})),r},t.renderRoutes=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?i.createElement(a.Switch,n,e.map((function(e,n){return i.createElement(a.Route,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(o({},n,{},t,{route:e})):i.createElement(e.component,o({},n,t,{route:e}))}})}))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),a=n(30);function i(e){return void 0!==e.message?e.message:"Invalid value "+("function"==typeof(t=e.value)?r.getFunctionName(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")+" supplied to "+e.context.map((function(e){return e.key+": "+e.type.name})).join("/");var t}function o(e){return e.map(i)}function l(){return["No errors!"]}t.failure=o,t.success=l,t.PathReporter={report:a.fold(o,l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(7),i=r.__importDefault(n(56)),o=n(59);t.default=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var n=i.default({width:o.isClient?window.innerWidth:e,height:o.isClient?window.innerHeight:t}),r=n[0],l=n[1];return a.useEffect((function(){if(o.isClient){var e=function(){l({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(7),i=r.__importDefault(n(57));t.default=function(e){var t=a.useRef(0),n=a.useState(e),r=n[0],o=n[1],l=a.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){o(e)}))}),[]);return i.default((function(){cancelAnimationFrame(t.current)})),[r,l]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(7),i=r.__importDefault(n(58));t.default=function(e){var t=a.useRef(e);t.current=e,i.default((function(){return function(){return t.current()}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default=function(e){r.useEffect(e,[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=n(17).__importDefault(n(60));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var o=i[a];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default=function(e,t){void 0===t&&(t=0);var n=r.useRef(!1),a=r.useRef(),i=r.useRef(e),o=r.useCallback((function(){return n.current}),[]),l=r.useCallback((function(){n.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){n.current=!0,i.current()}),t)}),[t]),u=r.useCallback((function(){n.current=null,a.current&&clearTimeout(a.current)}),[]);return r.useEffect((function(){i.current=e}),[e]),r.useEffect((function(){return l(),u}),[t]),[o,u,l]}},function(e,t,n){var r=n(63),a=n(64),i=a;i.v1=r,i.v4=a,e.exports=i},function(e,t,n){var r,a,i=n(38),o=n(39),l=0,u=0;e.exports=function(e,t,n){var s=t&&n||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){var p=i();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=a=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,h=m-l+(g-u)/1e4;if(h<0&&void 0===e.clockseq&&(f=f+1&16383),(h<0||m>l)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=m,u=g,a=f;var v=(1e4*(268435455&(m+=122192928e5))+g)%4294967296;c[s++]=v>>>24&255,c[s++]=v>>>16&255,c[s++]=v>>>8&255,c[s++]=255&v;var y=m/4294967296*1e4&268435455;c[s++]=y>>>8&255,c[s++]=255&y,c[s++]=y>>>24&15|16,c[s++]=y>>>16&255,c[s++]=f>>>8|128,c[s++]=255&f;for(var E=0;E<6;++E)c[s+E]=d[E];return t||o(c)}},function(e,t,n){var r=n(38),a=n(39);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var l=0;l<16;++l)t[i+l]=o[l];return t||a(o)}},,function(e,t,n){"use strict";n.r(t),n.d(t,"uxRoutes",(function(){return Rn})),n.d(t,"uxRouter",(function(){return An})),n.d(t,"UXAppRoot",(function(){return Nn})),n.d(t,"renderApp",(function(){return Un}));var r=n(20),a=n(8),i=n(7),o=n.n(i),l=n(25),u=n.n(l),s=n(11),c=n(12),d=n.n(c),f=n(32),p=n.n(f),m=n(34),g=n.n(m),h=n(46),v=n.n(h),y=n(30),E=n(54),b=n(52),x=n(35),T=n.n(x),w=n(10),k=n(29);function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new k.Type("merge",(function(e){return t.every((function(t){return t.is(e)}))}),(function(e,n){var r=[],a=[];t.map((function(t,r){return t.validate(e,n.concat({key:String(r),type:t,actual:e}))})).forEach((function(e){Object(y.isLeft)(e)?r.push.apply(r,p()(e.left)):a.push(e.right)}));var i=w.merge.apply(void 0,[{}].concat(a));return r.length>0?k.failures(r):k.success(i)}),(function(e){return t.reduce((function(e,t){return t.encode(e)}),e)}));return g()(g()({},r),{},{_tag:"MergeType",types:t})}var O=["StringType","NumberType","BooleanType","ArrayType","DictionaryType","InterfaceType","PartialType","UnionType","IntersectionType","MergeType"];function j(e){if(!function(e){return"_tag"in e&&O.includes(e._tag)}(e))return e;switch(e._tag){case"ArrayType":return k.array(j(e.type));case"DictionaryType":return k.dictionary(e.domain,j(e.codomain));case"InterfaceType":return k.exact(k.interface(Object(w.mapValues)(e.props,j)));case"PartialType":return k.exact(k.partial(Object(w.mapValues)(e.props,j)));case"IntersectionType":return k.intersection(e.types.map(j));case"UnionType":return k.union(e.types.map(j));case"MergeType":return S(j(e.types[0]),j(e.types[1]));default:return e}}function F(e){return e.replace(/(?:{([^\/]+)})/g,":$1")}new k.Type("JSON",k.any.is,(function(e,t){return y.either.chain(k.string.validate(e,t),(function(n){try{return k.success(JSON.parse(n))}catch(n){return k.failure(e,t)}}))}),(function(e){return JSON.stringify(e)})),new k.Type("isoToEpochRt",k.number.is,(function(e,t){return y.either.chain(k.string.validate(e,t),(function(n){var r=new Date(n).getTime();return isNaN(r)?k.failure(e,t):k.success(r)}))}),(function(e){return new Date(e).toISOString()})),new k.Type("ToNumber",k.number.is,(function(e,t){var n=Number(e);return isNaN(n)?k.failure(e,t):k.success(n)}),k.identity),new k.Type("ToBoolean",k.boolean.is,(function(e){var t;return t="string"==typeof e?"true"===e:!!e,k.success(t)}),k.identity),k.brand(k.string,(function(e){return e.length>0}),"NonEmptyString");var _=n(16),I=Object(i.createContext)(void 0),L=function(e){var t=e.router,n=e.children;return Object(_.jsx)(I.Provider,{value:t},n)};function M(e){var t=e.children,n=e.router,r=e.history;return Object(_.jsx)(s.Router,{history:r},Object(_.jsx)(L,{router:n},t))}var P=n(0),R=n(1),C=n(13),A=n(9);const N={sharedData:{totalPageViews:0},setSharedData:e=>{throw new Error("setSharedData was not initialized, set it when you invoke the context")}},U=Object(i.createContext)(N);function D({children:e}){const[t,n]=Object(i.useState)({totalPageViews:0}),r=o.a.useCallback((e=>{n(e)}),[]),a=Object(i.useMemo)((()=>({sharedData:t,setSharedData:r})),[t,r]);return o.a.createElement(U.Provider,{value:a,children:e})}var V=n(22),B=n.n(V);const z="service.name",q="service.environment",W="user_agent.name",G="transaction.type",H="client.geo.country_iso_code",$="url.full",Y="user_agent.device.name",Q="user_agent.os.name";let J;!function(e){e.transaction="transaction",e.error="error",e.metric="metric",e.span="span",e.profile="profile"}(J||(J={}));const K="page-load",Z="ENVIRONMENT_ALL",X="ENVIRONMENT_NOT_DEFINED";function ee(e){return e&&e!==X?e===Z?P.i18n.translate("xpack.ux.filter.environment.allLabel",{defaultMessage:"All"}):e:P.i18n.translate("xpack.ux.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})}const te={value:Z,text:ee(Z)},ne={value:X,text:ee(X)},re={transactionUrl:{title:P.i18n.translate("xpack.ux.localFilters.titles.transactionUrl",{defaultMessage:"URL"}),fieldName:$},transactionUrlExcluded:{title:P.i18n.translate("xpack.ux.localFilters.titles.transactionUrl",{defaultMessage:"URL"}),fieldName:$,excluded:!0},browser:{title:P.i18n.translate("xpack.ux.localFilters.titles.browser",{defaultMessage:"Browser"}),fieldName:W},browserExcluded:{title:P.i18n.translate("xpack.ux.localFilters.titles.browser",{defaultMessage:"Browser"}),fieldName:W,excluded:!0},device:{title:P.i18n.translate("xpack.ux.localFilters.titles.device",{defaultMessage:"Device"}),fieldName:Y},deviceExcluded:{title:P.i18n.translate("xpack.ux.localFilters.titles.device",{defaultMessage:"Device"}),fieldName:Y,excluded:!0},location:{title:P.i18n.translate("xpack.ux.localFilters.titles.location",{defaultMessage:"Location"}),fieldName:H},locationExcluded:{title:P.i18n.translate("xpack.ux.localFilters.titles.location",{defaultMessage:"Location"}),fieldName:H,excluded:!0},os:{title:P.i18n.translate("xpack.ux.localFilters.titles.os",{defaultMessage:"OS"}),fieldName:Q},osExcluded:{title:P.i18n.translate("xpack.ux.localFilters.titles.os",{defaultMessage:"OS"}),fieldName:Q,excluded:!0},serviceName:{title:P.i18n.translate("xpack.ux.localFilters.titles.serviceName",{defaultMessage:"Service name"}),fieldName:z}},ae=Object.keys(re),ie=ae.reduce(((e,t)=>({...e,[t]:{...re[t],name:t}})),{});function oe(e){return e&&e!==te.value?e===ne.value?[{bool:{must_not:{exists:{field:q}}}}]:[{term:{[q]:e}}]:[]}function le(e,t){const n=e;return[...ae.filter((e=>{const r=e in n;return"string"==typeof e&&(t?e.includes("Excluded")&&r:!e.includes("Excluded")&&r)})).map((e=>{const t=ie[e],r=n[e];return{terms:{[t.fieldName]:r}}})),...t?[]:oe(e.environment||te.value)]}function ue(e,t,n="@timestamp"){return[{range:{[n]:{gte:e,lte:t,format:"epoch_millis"}}}]}function se(e,t,n){const r=function({setup:e,urlQuery:t,checkFetchStartFieldExists:n=!0,start:r,end:a}){const{uiFilters:i}=e,o={filter:[...ue(r,a),{term:{[G]:K}},...n?[{exists:{field:"transaction.marks.navigationTiming.fetchStart"}}]:[],...t?[{wildcard:{"url.full":`*${t}*`}}]:[],...le(i)],must_not:[...le(i,!0)]};return{apm:{events:[J.transaction]},body:{query:{bool:o}}}}({setup:{uiFilters:n||{}},start:e,end:t}),a=(i=r,o={body:{size:0,query:{bool:r.body.query.bool},aggs:{services:{terms:{field:z,size:1e3}}}}},Object(w.mergeWith)({},Object(w.cloneDeep)(i),o,((e,t)=>{if(!Object(w.isPlainObject)(e)||!Object(w.isPlainObject)(t))return t})));var i,o;const{apm:l,...u}=a;return u}function ce(e,...t){return Object(w.pick)(e,t)}var de=n(23),fe=n.n(de);function pe(e,t={}){if(e){const n=B.a.parse(e,t);if(n&&n.isValid())return n.toDate()}}function me(e){return e.startsWith("now")?pe(e.replace(/\/([smhdw])$/,"")):pe(e)}function ge({state:e={},rangeFrom:t,rangeTo:n}){if(e.rangeFrom===t&&e.rangeTo===n)return{start:e.start,end:e.end,exactStart:e.exactStart,exactEnd:e.exactEnd};const r=pe(t),a=pe(n,{roundUp:!0}),i=t?me(t):void 0,o=n?me(n):void 0;return r&&a?{start:fe()(r).startOf("minute").toISOString(),end:a.toISOString(),exactStart:null==i?void 0:i.toISOString(),exactEnd:null==o?void 0:o.toISOString()}:{start:e.start,end:e.end,exactStart:e.exactStart,exactEnd:e.exactEnd}}function he(e){if(void 0!==e)return parseInt(e,10)}function ve(e){if(""!==e&&"null"!==e&&"undefined"!==e)return e}function ye(e){return Object(w.pickBy)(e,(e=>void 0!==e))}function Ee(e,t){const n=Object(A.toQuery)(e.search),{page:r,pageSize:a,sortDirection:i,sortField:o,refreshPaused:l,refreshInterval:u,rangeFrom:s,rangeTo:c,environment:d,searchTerm:f,percentile:p}=n,m=ce(n,...ae);return ye({...ge({state:t,rangeFrom:s,rangeTo:c}),rangeFrom:s,rangeTo:c,refreshPaused:l?(g=l,"true"===g):void 0,refreshInterval:u?he(u):void 0,environment:ve(d)||te.value,sortDirection:i,sortField:o,page:he(r)||0,pageSize:a?he(a):void 0,searchTerm:ve(f),percentile:he(p),...m});var g}const be=Object(i.createContext)({rangeId:0,refreshTimeRange:e=>{},uxUiFilters:{},urlParams:{}}),xe=Object(s.withRouter)((({location:e,children:t})=>{const n=Object(i.useRef)(Ee(e,{})),{start:r,end:a,rangeFrom:l,rangeTo:u,exactStart:s,exactEnd:c}=n.current,[d,f]=Object(i.useState)(0),p=Object(i.useMemo)((()=>Ee(e,{start:r,end:a,rangeFrom:l,rangeTo:u,exactStart:s,exactEnd:c})),[e,r,a,l,u,s,c]);n.current=p;const m=Object(i.useCallback)((e=>{n.current={...n.current,...ge({state:{},...e})},f((e=>e+1))}),[]),g=function(e){const t=Object(w.mapValues)(ce(e,...ae),(e=>e?e.split(","):[]));return function(e){const t=Object(i.useRef)(e);return Object(w.isEqual)(t.current,e)||(t.current=e),t.current}({environment:e.environment,...t})}(p),h=Object(i.useMemo)((()=>({rangeId:d,refreshTimeRange:m,urlParams:p,uxUiFilters:g})),[d,m,g,p]);return o.a.createElement(be.Provider,{children:t,value:h})}));function Te(){const e=Object(i.useContext)(be);return Object(i.useMemo)((()=>({...e,urlParams:Object(w.omit)(e.urlParams,["environment","kuery"])})),[e])}function we({loading:e,serviceNames:t}){const n=Object(s.useHistory)(),{urlParams:{serviceName:r}}=Te(),l=(null!=t?t:[]).map((e=>({text:e,value:e}))),u=Object(i.useCallback)(((e,t)=>{const r={...n.location,search:Object(A.fromQuery)({...Object(A.toQuery)(n.location.search),serviceName:e})};t?n.replace(r):n.push(r)}),[n]);return Object(i.useEffect)((()=>{t&&(null==t?void 0:t.length)>0&&(r||u(t[0],!0),r&&!t.includes(r)&&u(t[0],!0)),r&&0===(null==t?void 0:t.length)&&!e&&u("")}),[t,r,u,e]),o.a.createElement(a.EuiSelect,{fullWidth:!0,prepend:P.i18n.translate("xpack.ux.localFilters.titles.webApplication",{defaultMessage:"Web application"}),isLoading:e,"data-cy":"serviceNameFilter",options:l,value:r,onChange:e=>{u(e.target.value)}})}var ke=n(31);function Se(e,t,n={}){const{notifications:r}=Object(C.useKibana)(),{preservePreviousData:a=!0,showToastOnError:l=!0}=n,[u,s]=Object(i.useState)({data:void 0,status:A.FETCH_STATUS.NOT_INITIATED}),[c,d]=Object(i.useState)(0),{addInspectorRequest:f}=Object(A.useInspectorContext)();return Object(i.useEffect)((()=>{let t=new AbortController;return async function(){t.abort(),t=new AbortController;const n=t.signal,i=e((e=>(t,n)=>Object(ke.a)(t,{...n,signal:e}))(n));if(i){s((e=>({data:a?e.data:void 0,status:A.FETCH_STATUS.LOADING,error:void 0})));try{const e=await i;n.aborted||s({data:e,status:A.FETCH_STATUS.SUCCESS,error:void 0})}catch(e){const t=e;if(!n.aborted){const n="response"in t?function(e){var t,n,r,a,i;const l=null!==(t=null===(n=e.body)||void 0===n?void 0:n.message)&&void 0!==t?t:null===(r=e.response)||void 0===r?void 0:r.statusText;return o.a.createElement(o.a.Fragment,null,l," (",null===(a=e.response)||void 0===a?void 0:a.status,")",o.a.createElement("h5",null,P.i18n.translate("xpack.ux.fetcher.error.url",{defaultMessage:"URL"})),null===(i=e.response)||void 0===i?void 0:i.url)}(t):t.message;l&&r.toasts.danger({title:P.i18n.translate("xpack.ux.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),body:o.a.createElement("div",null,o.a.createElement("h5",null,P.i18n.translate("xpack.ux.fetcher.error.status",{defaultMessage:"Error"})),n)}),s({data:void 0,status:A.FETCH_STATUS.FAILURE,error:e})}}}}(),()=>{t.abort()}}),[c,a,l,...t]),Object(i.useEffect)((()=>{var e;u.error?f({...u,data:null===(e=u.error.body)||void 0===e?void 0:e.attributes}):f(u)}),[f,u]),Object(i.useMemo)((()=>({...u,refetch:()=>{d((e=>e+1))}})),[u])}function Oe(){const{dataView:e}=function(){const{data:e,status:t}=Se((e=>e("GET /internal/apm/data_view/dynamic",{isCachable:!0})),[]);return{dataView:null==e?void 0:e.dynamicDataView,status:t}}(),{services:{dataViews:t}}=Object(C.useKibana)(),{data:n}=Se((async()=>{if(null!=e&&e.title)return t.create({title:null==e?void 0:e.title})}),[null==e?void 0:e.title,t]);return{dataViewTitle:null==e?void 0:e.title,dataView:n}}function je(e){var t,n;return"string"==typeof e&&null!==(t=null===(n=B.a.parse(e))||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0}function Fe(){var e,t,n;const{rangeId:r,urlParams:{start:a,end:i}}=Te(),{dataViewTitle:l}=Oe(),{data:u,loading:s}=Object(A.useEsSearch)({index:l,...se(je(a),je(i))},[a,i,r,l],{name:"UxApplicationServices"}),c=null!==(e=null==u||null===(t=u.aggregations)||void 0===t||null===(n=t.services)||void 0===n?void 0:n.buckets.map((({key:e})=>e)))&&void 0!==e?e:[];return o.a.createElement(we,{loading:!!s,serviceNames:c})}const _e={dataMissing:P.i18n.translate("xpack.ux.dashboard.dataMissing",{defaultMessage:"N/A"}),totalPageLoad:P.i18n.translate("xpack.ux.dashboard.totalPageLoad",{defaultMessage:"Total"}),backEnd:P.i18n.translate("xpack.ux.dashboard.backend",{defaultMessage:"Backend"}),frontEnd:P.i18n.translate("xpack.ux.dashboard.frontend",{defaultMessage:"Frontend"}),pageViews:P.i18n.translate("xpack.ux.dashboard.pageViews",{defaultMessage:"Total page views"}),percPageLoaded:P.i18n.translate("xpack.ux.dashboard.pagesLoaded.label",{defaultMessage:"Pages loaded"}),pageLoadTime:P.i18n.translate("xpack.ux.dashboard.pageLoadTime.label",{defaultMessage:"Page load time (seconds)"}),pageLoadTimes:P.i18n.translate("xpack.ux.dashboard.pageLoadTimes.label",{defaultMessage:"Page load times"}),pageLoadDuration:P.i18n.translate("xpack.ux.dashboard.pageLoadDuration.label",{defaultMessage:"Page load duration"}),pageLoad:P.i18n.translate("xpack.ux.dashboard.pageLoad.label",{defaultMessage:"Page load"}),pageLoadDistribution:P.i18n.translate("xpack.ux.dashboard.pageLoadDistribution.label",{defaultMessage:"Page load distribution"}),jsErrors:P.i18n.translate("xpack.ux.dashboard.impactfulMetrics.jsErrors",{defaultMessage:"JavaScript errors"}),highTrafficPages:P.i18n.translate("xpack.ux.dashboard.impactfulMetrics.highTrafficPages",{defaultMessage:"High traffic pages"}),resetZoom:P.i18n.translate("xpack.ux.dashboard.resetZoom.label",{defaultMessage:"Reset zoom"}),overall:P.i18n.translate("xpack.ux.dashboard.overall.label",{defaultMessage:"Overall"}),selectBreakdown:P.i18n.translate("xpack.ux.filterGroup.selectBreakdown",{defaultMessage:"Select breakdown"}),breakdown:P.i18n.translate("xpack.ux.filterGroup.breakdown",{defaultMessage:"Breakdown"}),seconds:P.i18n.translate("xpack.ux.filterGroup.seconds",{defaultMessage:"seconds"}),coreWebVitals:P.i18n.translate("xpack.ux.filterGroup.coreWebVitals",{defaultMessage:"Core web vitals"}),browser:P.i18n.translate("xpack.ux.visitorBreakdown.browser",{defaultMessage:"Browser"}),operatingSystem:P.i18n.translate("xpack.ux.visitorBreakdown.operatingSystem",{defaultMessage:"Operating system"}),metrics:P.i18n.translate("xpack.ux.metrics",{defaultMessage:"Metrics"}),median:P.i18n.translate("xpack.ux.median",{defaultMessage:"median"}),avgPageLoadDuration:P.i18n.translate("xpack.ux.visitorBreakdownMap.avgPageLoadDuration",{defaultMessage:"Average page load duration"}),pageLoadDurationByRegion:P.i18n.translate("xpack.ux.visitorBreakdownMap.pageLoadDurationByRegion",{defaultMessage:"Page load duration by region (avg.)"}),filterByUrl:P.i18n.translate("xpack.ux.filters.filterByUrl",{defaultMessage:"Filter by URL"}),getSearchResultsLabel:e=>P.i18n.translate("xpack.ux.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:e}}),topPages:P.i18n.translate("xpack.ux.filters.topPages",{defaultMessage:"Top pages"}),select:P.i18n.translate("xpack.ux.filters.select",{defaultMessage:"Select"}),url:P.i18n.translate("xpack.ux.filters.url",{defaultMessage:"Url"}),loadingResults:P.i18n.translate("xpack.ux.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:P.i18n.translate("xpack.ux.filters.url.noResults",{defaultMessage:"No results available"}),totalErrors:P.i18n.translate("xpack.ux.jsErrors.totalErrors",{defaultMessage:"Total errors"}),errorRate:P.i18n.translate("xpack.ux.jsErrors.errorRate",{defaultMessage:"Error rate"}),errorMessage:P.i18n.translate("xpack.ux.jsErrors.errorMessage",{defaultMessage:"Error message"}),impactedPageLoads:P.i18n.translate("xpack.ux.jsErrors.impactedPageLoads",{defaultMessage:"Impacted page loads"}),percentile:P.i18n.translate("xpack.ux.percentile.label",{defaultMessage:"Percentile"}),percentile50thMedian:P.i18n.translate("xpack.ux.percentile.50thMedian",{defaultMessage:"50th (Median)"}),percentile75th:P.i18n.translate("xpack.ux.percentile.75th",{defaultMessage:"75th"}),percentile90th:P.i18n.translate("xpack.ux.percentile.90th",{defaultMessage:"90th"}),percentile95th:P.i18n.translate("xpack.ux.percentile.95th",{defaultMessage:"95th"}),percentile99th:P.i18n.translate("xpack.ux.percentile.99th",{defaultMessage:"99th"}),noData:P.i18n.translate("xpack.ux.visitorBreakdown.noData",{defaultMessage:"No data."}),totalPageLoadTooltip:P.i18n.translate("xpack.ux.dashboard.tooltips.totalPageLoad",{defaultMessage:"Total represents the full page load duration"}),frontEndTooltip:P.i18n.translate("xpack.ux.dashboard.tooltips.frontEnd",{defaultMessage:"Frontend time represents the total page load duration minus the backend time"}),backEndTooltip:P.i18n.translate("xpack.ux.dashboard.tooltips.backEnd",{defaultMessage:"Backend time represents time to first byte (TTFB), which is when the first response packet is received after the request has been made"})},Ie=P.i18n.translate("xpack.ux.visitorBreakdown",{defaultMessage:"Visitor breakdown"});function Le(){const e=Object(s.useHistory)(),{urlParams:{percentile:t}}=Te(),n=Object(i.useCallback)(((t,n)=>{const r={...e.location,search:Object(A.fromQuery)({...Object(A.toQuery)(e.location.search),percentile:t})};n?e.replace(r):e.push(r)}),[e]);Object(i.useEffect)((()=>{t||n(50,!0)}));const r=[{value:"50",text:_e.percentile50thMedian,"data-test-subj":"p50Percentile"},{value:"75",text:_e.percentile75th,"data-test-subj":"p75Percentile"},{value:"90",text:_e.percentile90th,"data-test-subj":"p90Percentile"},{value:"95",text:_e.percentile95th,"data-test-subj":"p95Percentile"},{value:"99",text:_e.percentile99th,"data-test-subj":"p99Percentile"}];return o.a.createElement(a.EuiSelect,{fullWidth:!0,prepend:_e.percentile,"data-test-subj":"uxPercentileSelect",options:r,onChange:e=>{return t=e.target.value,void n(Number(t));var t}})}var Me=n(55),Pe=n.n(Me),Re=n(36),Ce=n.n(Re);function Ae(e){return{isXSmall:Object(a.isWithinMaxBreakpoint)(e,"xs"),isSmall:Object(a.isWithinMaxBreakpoint)(e,"s"),isMedium:Object(a.isWithinMaxBreakpoint)(e,"m"),isLarge:Object(a.isWithinMaxBreakpoint)(e,"l"),isXl:Object(a.isWithinMaxBreakpoint)(e,1599),isXXL:Object(a.isWithinMaxBreakpoint)(e,1999),isXXXL:Object(a.isWithinMinBreakpoint)(e,2e3)}}function Ne(){const{width:e}=Pe()(),[t,n]=Object(i.useState)(Object(a.getBreakpoint)(e)),[r,o]=Object(i.useState)(Ae(e));return Ce()((()=>{n(Object(a.getBreakpoint)(e)),o(Ae(e))}),50,[e]),{...r,breakpoint:t,width:e}}function Ue(){return Object(i.useContext)(be)}var De=n(27);function Ve(){return Object(C.useKibana)().services}var Be=n(33);function ze(){const{urlParams:{rangeFrom:e,rangeTo:t,refreshPaused:n,refreshInterval:r},refreshTimeRange:a}=Ue(),{redirect:i,isDateRangeSet:l}=function(){const e=Object(s.useHistory)(),t=Object(s.useLocation)(),n=T.a.parse(t.search),{data:r,uiSettings:a}=Ve(),i=a.get(De.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),o=r.query.timefilter.timefilter.getTime();return{isDateRangeSet:"rangeFrom"in n&&"rangeTo"in n,redirect:()=>{var r,a;const l={rangeFrom:null!==(r=o.from)&&void 0!==r?r:i.from,rangeTo:null!==(a=o.to)&&void 0!==a?a:i.to,...n};e.replace({...t,search:T.a.stringify(l)})}}}();return l||i(),o.a.createElement(A.DatePicker,{rangeFrom:e,rangeTo:t,refreshPaused:n,refreshInterval:r,onTimeRangeRefresh:({start:e,end:t})=>{Object(Be.b)(),a({rangeFrom:e,rangeTo:t})}})}function qe(){return o.a.createElement(a.EuiEmptyPrompt,{body:o.a.createElement(i.Fragment,null,o.a.createElement(a.EuiLoadingSpinner,{size:"xl"}),o.a.createElement(a.EuiSpacer,null),o.a.createElement(a.EuiTitle,{size:"l"},o.a.createElement("h2",null,P.i18n.translate("xpack.ux.emptyState.loadingMessage",{defaultMessage:"Loading…"}))))})}const We={environments:[]};const Ge={text:`- ${P.i18n.translate("xpack.ux.filter.environment.selectEnvironmentLabel",{defaultMessage:"Select environment"})} -`,disabled:!0};function He({start:e,end:t,environment:n,serviceName:r}){const l=Object(s.useHistory)(),u=Object(s.useLocation)(),{environments:c,status:d="loading"}=function({serviceName:e,start:t,end:n}){const{data:r=We,status:a="loading"}=Se((r=>{if(t&&n)return r("GET /internal/apm/environments",{params:{query:{start:t,end:n,serviceName:e}}})}),[t,n,e]),o=Object(i.useMemo)((()=>function(e){const t=e.filter((e=>e!==ne.value)).map((e=>({value:e,text:e})));return[te,...t]}(r.environments)),[null==r?void 0:r.environments]);return{environments:r.environments,status:a,environmentOptions:o}}({serviceName:r,start:e,end:t}),f=function(e){const t=e.filter((e=>e!==ne.value)).map((e=>({value:e,text:e})));return[te,...e.includes(ne.value)?[ne]:[],...t.length>0?[Ge]:[],...t]}(c);return o.a.createElement(a.EuiSelect,{fullWidth:!0,prepend:P.i18n.translate("xpack.ux.filter.environment.label",{defaultMessage:"Environment"}),options:f,value:n,onChange:e=>{!function(e,t,n){e.push({...t,search:Object(A.fromQuery)({...Object(A.toQuery)(t.search),environment:n})})}(l,u,e.target.value)},isLoading:"loading"===d,style:{minWidth:200}})}function $e(){const{urlParams:{start:e,end:t,environment:n,serviceName:r}}=Ue();return o.a.createElement(He,{start:e,end:t,environment:n,serviceName:r})}var Ye=n(14),Qe=n.n(Ye);const Je=P.i18n.translate("xpack.ux.coreVitals.dataUndefined",{defaultMessage:"N/A"}),Ke=P.i18n.translate("xpack.ux.coreVitals.fcp",{defaultMessage:"First contentful paint"}),Ze=P.i18n.translate("xpack.ux.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focusses on the initial rendering and measures the time from when the page starts loading to when any part of the page’s content is displayed on the screen."}),Xe=P.i18n.translate("xpack.ux.coreVitals.tbt",{defaultMessage:"Total blocking time"}),et=P.i18n.translate("xpack.ux.coreVitals.tbtTooltip",{defaultMessage:"Total blocking time (TBT) is the sum of the blocking time (duration above 50 ms) for each long task that occurs between the First contentful paint and the time when the transaction is completed."}),tt=P.i18n.translate("xpack.ux.uxMetrics.noOfLongTasks",{defaultMessage:"No. of long tasks"}),nt=P.i18n.translate("xpack.ux.uxMetrics.noOfLongTasksTooltip",{defaultMessage:"The number of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),rt=P.i18n.translate("xpack.ux.uxMetrics.longestLongTasks",{defaultMessage:"Longest long task duration"}),at=P.i18n.translate("xpack.ux.uxMetrics.longestLongTasksTooltip",{defaultMessage:"The duration of the longest long task, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),it=P.i18n.translate("xpack.ux.uxMetrics.sumLongTasks",{defaultMessage:"Total long tasks duration"}),ot=P.i18n.translate("xpack.ux.uxMetrics.sumLongTasksTooltip",{defaultMessage:"The total duration of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),lt=e=>50===e?_e.median:P.i18n.translate("xpack.ux.percentiles.label",{defaultMessage:"{value}th Perc.",values:{value:e}});function ut(){const{rangeId:e,urlParams:t,uxUiFilters:n}=Te(),{start:r,end:a,searchTerm:o,percentile:l}=t;return Object(i.useMemo)((()=>{const{serviceName:e}=n;return r&&a&&e&&l?{start:r,end:a,percentile:String(l),urlQuery:o||void 0,uiFilters:JSON.stringify(n)}:null}),[r,a,o,l,n,e])}function st(e,t="MicroSec"){const n=Number(null!=e?e:0)/("MicroSec"===t?1e3:1);return n<1e3?n.toFixed(0)+" ms":(n/1e3).toFixed(2)+" s"}const ct={width:"200px"};function dt(e,t){return null==t?Je:st(t,e)}function ft({data:e,loading:t}){const n=ut(),{data:r,status:i}=Se((e=>n?e("GET /internal/apm/ux/long-task-metrics",{params:{query:{...n}}}):Promise.resolve(null)),[n]);return o.a.createElement(a.EuiFlexGroup,{wrap:!0,responsive:!1},o.a.createElement(a.EuiFlexItem,{grow:!1,style:ct},o.a.createElement(a.EuiStat,{titleSize:"s",title:dt("ms",null==e?void 0:e.fcp),description:o.a.createElement(o.a.Fragment,null,Ke,o.a.createElement(a.EuiIconTip,{content:Ze,type:"questionInCircle"})),isLoading:t})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:ct},o.a.createElement(a.EuiStat,{titleSize:"s",title:dt("ms",null==e?void 0:e.tbt),description:o.a.createElement(o.a.Fragment,null,Xe,o.a.createElement(a.EuiIconTip,{content:et,type:"questionInCircle"})),isLoading:t})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:ct},o.a.createElement(a.EuiStat,{titleSize:"s",title:void 0!==(null==r?void 0:r.noOfLongTasks)?Qe()(null==r?void 0:r.noOfLongTasks).format("0,0"):Je,description:o.a.createElement(o.a.Fragment,null,tt,o.a.createElement(a.EuiIconTip,{content:nt,type:"questionInCircle"})),isLoading:"success"!==i})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:ct},o.a.createElement(a.EuiStat,{titleSize:"s",title:dt("ms",null==r?void 0:r.longestLongTask),description:o.a.createElement(o.a.Fragment,null,rt,o.a.createElement(a.EuiIconTip,{content:at,type:"questionInCircle"})),isLoading:"success"!==i})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:ct},o.a.createElement(a.EuiStat,{titleSize:"s",title:dt("ms",null==r?void 0:r.sumOfLongTasks),description:o.a.createElement(o.a.Fragment,null,it,o.a.createElement(a.EuiIconTip,{content:ot,type:"questionInCircle"})),isLoading:"success"!==i})))}const pt=d.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-102tzdt-0"})(["color:",";font-weight:500;:not(:last-of-type)::after{content:'•';margin:0 4px;}"],r.euiLightVars.euiColorSuccessText),mt=d.a.span.withConfig({displayName:"StyledListSpan",componentId:"sc-102tzdt-1"})(["display:block;margin-top:4px;font-size:12px;"]);function gt(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiHighlight,{className:"euiSelectableTemplateSitewide__listItemTitle",search:t},e.label),function(e){if(e&&!(e.length<1))return o.a.createElement(mt,null,e.map((e=>o.a.createElement(pt,{key:e},e))))}(e.meta))}const ht=e=>({includedItems:Object(w.map)(e.filter((({checked:e,isWildcard:t})=>"on"===e&&!t)),"label"),excludedItems:Object(w.map)(e.filter((({checked:e,isWildcard:t})=>"off"===e&&!t)),"label"),includedWildcards:Object(w.map)(e.filter((({checked:e,isWildcard:t})=>"on"===e&&t)),"title"),excludedWildcards:Object(w.map)(e.filter((({checked:e,isWildcard:t})=>"off"===e&&t)),"title")});function vt({onChange:e,updateSearchTerm:t}){var n;const{uxUiFilters:{transactionUrl:r,transactionUrlExcluded:a},urlParams:l}=Te(),{searchTerm:u,percentile:s}=l,[c,d]=Object(i.useState)(!1),[f,p]=Object(i.useState)(""),[m,g]=Object(i.useState)([]),{data:h,status:v}=(({popoverIsOpen:e,query:t})=>{const n=ut(),{uxUiFilters:r}=Te(),{transactionUrl:a,transactionUrlExcluded:o,...l}=r,[u,s]=Object(i.useState)(null!=t?t:"");return Ce()((()=>{s(t)}),250,[t]),Se((t=>n&&e?t("GET /internal/apm/ux/url-search",{params:{query:{...n,uiFilters:JSON.stringify(l),urlQuery:u}}}):Promise.resolve(null)),[n,u,e])})({query:f,popoverIsOpen:c});Object(i.useEffect)((()=>{var e;const t=((e,t,n,r)=>{const a=lt(r);return e.map((e=>({label:e.url,title:e.url,key:e.url,meta:[_e.pageViews+": "+e.count,_e.pageLoadDuration+": "+st(e.pld)+` (${a})`],url:e.url,checked:null!=t&&t.includes(e.url)?"on":null!=n&&n.includes(e.url)?"off":void 0})))})(null!==(e=null==h?void 0:h.items)&&void 0!==e?e:[],r,a,s),n=f||u;var i;n&&t.unshift({label:(i=n,P.i18n.translate("xpack.ux.urlFilter.wildcard",{defaultMessage:"Use wildcard *{wildcard}*",values:{wildcard:i}})),title:n,isWildcard:!0,checked:u?"on":void 0}),g(t)}),[h,s,u,f,r,a]);const y="success"!==v;return o.a.createElement(A.SelectableUrlList,{loading:y,onInputChange:e=>{p(e)},data:{items:m,total:null!==(n=null==h?void 0:h.total)&&void 0!==n?n:0},onSelectionChange:e=>{g(e.map((e=>{const{isWildcard:t,checked:n}=e;return t&&"off"===n?{...e,checked:void 0}:e})))},searchValue:f,popoverIsOpen:Boolean(c),setPopoverIsOpen:d,onSelectionApply:()=>{const{includedItems:n,excludedItems:r}=ht(m);e(n,r),t(f),p("")},renderOption:gt,rowHeight:64,hasChanged:()=>Boolean((()=>{const{includedItems:e,excludedItems:t,includedWildcards:n}=ht(m);let i=n.length>0&&!u||0===n.length&&u;return n.length>0&&(i=n[0]!==u),i||!Object(w.isEqual)(e.sort(),(null!=r?r:[]).sort())||!Object(w.isEqual)(t.sort(),(null!=a?a:[]).sort())})())})}function yt(){const e=Object(s.useHistory)(),t=Object(i.useCallback)(((t,n)=>{const r="transactionUrl",a=Object(w.omit)(Object(A.toQuery)(e.location.search),r);e.push({...e.location,search:Object(A.fromQuery)(ye({...a,[r]:null!=t&&t.length?t.join(","):void 0,transactionUrlExcluded:null!=n&&n.length?n.join(","):void 0}))})}),[e]),n=Object(i.useCallback)((t=>{const n={...Object(A.toQuery)(e.location.search),searchTerm:t||void 0};t||delete n.searchTerm;const r={...e.location,search:Object(A.fromQuery)(n)};e.push(r)}),[e]);return o.a.createElement("span",{"data-cy":"csmUrlFilter"},o.a.createElement(vt,{onChange:t,updateSearchTerm:n}))}function Et({indexPattern:e}){const t=Object(s.useHistory)(),{urlParams:{searchTerm:n}}=Te(),r=Object(i.useCallback)((e=>{const n={...Object(A.toQuery)(t.location.search),searchTerm:e||void 0};e||delete n.searchTerm;const r={...t.location,search:Object(A.fromQuery)(n)};t.push(r)}),[t]);return n?i.createElement(A.FilterValueLabel,{dataView:e,removeFilter:()=>{r("")},invertFilter:({negate:e})=>{},field:$,value:n,negate:!1,label:"URL wildcard"}):null}const bt=d()(a.EuiFlexItem).withConfig({displayName:"FilterItem",componentId:"sc-5dxp2a-0"})(["max-width:300px;"]);function xt({indexPattern:e,onChange:t,filters:n,invertFilter:r,clearValues:l}){const{uxUiFilters:u,urlParams:{searchTerm:s}}=Te(),{transactionUrl:c}=u,d=null!=c?c:[],f=n.some((e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0}));return e&&(f||d.length>0||s)?o.a.createElement(a.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},o.a.createElement(Et,{indexPattern:e}),(null!=n?n:[]).map((({name:n,title:a,fieldName:l,excluded:s})=>{var c;return o.a.createElement(i.Fragment,{key:n},(null!==(c=null==u?void 0:u[n])&&void 0!==c?c:[]).map((i=>o.a.createElement(bt,{key:n+i,grow:!1},o.a.createElement(A.FilterValueLabel,{dataView:e,removeFilter:()=>{t(n,(null==u?void 0:u[n]).filter((e=>e!==i)))},invertFilter:({negate:e})=>{r(n,i,e)},field:l,value:"transactionUrl"===n?Tt(i):i,negate:!!s,label:a})))))})),o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiButtonEmpty,{size:"xs",iconType:"cross",onClick:l,"data-cy":"clearFilters"},P.i18n.translate("xpack.ux.clearFilters",{defaultMessage:"Clear filters"})))):null}function Tt(e){const t=e.length;if(t<30)return e;const n=new URL(e);if("/"===n.pathname)return e;const r=n.hostname,a=t-30,i=r.substring(0,a);return n.pathname.length+7>30?e.replace(r,".."):e.replace(i,"..")}const wt=["location","device","os","browser"],kt=e=>`${e}Excluded`,St=[{term:{[G]:K}}];function Ot(){const{dataViewTitle:e,dataView:t}=Oe(),{filters:n=[],setFilterValue:r,invertFilter:l,clearValues:u}=function({filterNames:e}){const t=Object(s.useHistory)(),{uxUiFilters:n}=Te(),r=(e,n)=>{const r=Object(w.omit)(Object(A.toQuery)(t.location.search),e);t.push({...t.location,search:Object(A.fromQuery)(ye({...r,[e]:n.length?n.join(","):void 0}))})};return{filters:e.map((e=>{var t;return{value:null!==(t=n[e])&&void 0!==t?t:[],...re[e],name:e}})),setFilterValue:r,clearValues:()=>{const n=Object(w.omit)(Object(A.toQuery)(t.location.search),[...e,"searchTerm","transactionUrl"]);t.push({...t.location,search:Object(A.fromQuery)(n)})},invertFilter:(e,t,a)=>{if(a){var i;const a=e.split("Excluded")[0],o=e;r(o,(null==n?void 0:n[o]).filter((e=>e!==t))),r(a,[...null!==(i=null==n?void 0:n[a])&&void 0!==i?i:[],t])}else{var o;r(e,(null==n?void 0:n[e]).filter((e=>e!==t)));const a=kt(e);r(a,[...null!==(o=null==n?void 0:n[a])&&void 0!==o?o:[],t])}}}}({filterNames:ae.filter((e=>!["serviceName"].includes(e)))}),{urlParams:{start:c,end:d,serviceName:f,environment:p}}=Ue(),m=Object(i.useMemo)((()=>{const e=[...St,...oe(p||te.value)];return f&&e.push({term:{[z]:f}}),e}),[p,f]),{isSmall:g}=Ne(),h=o.a.createElement(a.EuiTitle,{size:"s"},o.a.createElement("h3",null,P.i18n.translate("xpack.ux.localFiltersTitle",{defaultMessage:"Filters"}))),v=o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(yt,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiFilterGroup,{fullWidth:!0},wt.map((t=>{var a,i;return o.a.createElement(A.FieldValueSuggestions,{key:t,sourceField:re[t].fieldName,dataViewTitle:e,label:re[t].title,asCombobox:!1,selectedValue:null===(a=n.find((e=>e.name===t&&!e.excluded)))||void 0===a?void 0:a.value,excludedValue:null===(i=n.find((e=>e.name===kt(t)&&e.excluded)))||void 0===i?void 0:i.value,asFilterButton:!0,onChange:(e,n)=>{r(t,e||[]),r(kt(t),n||[])},filters:m,time:{from:c,to:d}})}))))),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(xt,{filters:n,onChange:(e,t)=>{r(e,t)},clearValues:u,invertFilter:l,indexPattern:t}));return g?o.a.createElement(a.EuiAccordion,{id:"uxFilterAccordion",buttonContent:h},v):o.a.createElement(o.a.Fragment,null,v)}function jt(){const{urlParams:{percentile:e}}=Te(),t=ut(),{data:n,status:r}=Se((e=>t?e("GET /internal/apm/ux/web-core-vitals",{params:{query:t}}):Promise.resolve(null)),[t]),{sharedData:{totalPageViews:l}}=Object(i.useContext)(U),u=Object(i.useMemo)((()=>Object(A.getCoreVitalsComponent)({data:n,totalPageViews:l,loading:"success"!==r,displayTrafficMetric:!0})),[r]);return o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween",wrap:!0,responsive:!1},o.a.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics"},o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,_e.metrics," (",lt(e),")")),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(ft,{data:n,loading:"success"!==r}))),o.a.createElement(a.EuiSpacer,{size:"xs"}),o.a.createElement(a.EuiHorizontalRule,{margin:"xs"}),o.a.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween",wrap:!0},o.a.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics",style:{minHeight:150}},o.a.createElement(a.EuiSpacer,{size:"s"}),u)))}var Ft=n(21);function _t(){var e,t,n;const{http:r}=Ve(),l=r.basePath.get(),{rangeId:u,urlParams:s,uxUiFilters:c}=Te(),{start:d,end:f,serviceName:p,searchTerm:m}=s,[g,h]=Object(i.useState)({pageIndex:0,pageSize:5}),{data:v,status:y}=Se((e=>d&&f&&p?e("GET /internal/apm/ux/js-errors",{params:{query:{start:d,end:f,urlQuery:m||void 0,uiFilters:JSON.stringify(c),pageSize:String(g.pageSize),pageIndex:String(g.pageIndex)}}}):Promise.resolve(null)),[d,f,p,c,g,m,u]),{sharedData:{totalPageViews:E}}=Object(i.useContext)(U),b=[{field:"errorMessage",name:_e.errorMessage,render:(e,t)=>o.a.createElement(a.EuiLink,{href:`${l}/app/apm/services/${p}/errors/${t.errorGroupId}`},e)},{name:_e.impactedPageLoads,field:"count",align:"right",render:e=>o.a.createElement(Ft.FormattedMessage,{id:"xpack.ux.jsErrors.percent",defaultMessage:"{pageLoadPercent} %",values:{pageLoadPercent:(e/E*100).toFixed(1)}})}],x=null!==(e=null==v?void 0:v.totalErrors)&&void 0!==e?e:0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,_e.jsErrors)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiFlexGroup,null,o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiStat,{"data-test-subj":"uxJsErrorsTotal",titleSize:"s",title:x<1e3?x:o.a.createElement(a.EuiToolTip,{content:x},o.a.createElement(o.a.Fragment,null,Qe()(x).format("0 a"))),description:_e.totalErrors,isLoading:y===A.FETCH_STATUS.LOADING}))),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiBasicTable,{"data-test-subj":"uxJsErrorTable",loading:y===A.FETCH_STATUS.LOADING,error:y===A.FETCH_STATUS.FAILURE?P.i18n.translate("xpack.ux.jsErrorsTable.errorMessage",{defaultMessage:"Failed to fetch"}):"",responsive:!1,compressed:!0,columns:b,items:null!==(t=null==v?void 0:v.items)&&void 0!==t?t:[],onChange:({page:e})=>{h({pageIndex:e.index,pageSize:e.size})},pagination:{...g,totalItemCount:null!==(n=null==v?void 0:v.totalErrorGroups)&&void 0!==n?n:0}}))}function It(){return o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(a.EuiSpacer,{size:"xs"}),o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(_t,null))))}function Lt({selectedBreakdown:e,onBreakdownChange:t,dataTestSubj:n}){var r;const i="noBreakdown",l=[{name:P.i18n.translate("xpack.ux.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),fieldName:i,type:"category"},{name:P.i18n.translate("xpack.ux.breakdownFilter.browser",{defaultMessage:"Browser"}),fieldName:W,type:"category"},{name:P.i18n.translate("xpack.ux.breakdownFilter.os",{defaultMessage:"OS"}),fieldName:Q,type:"category"},{name:P.i18n.translate("xpack.ux.breakdownFilter.device",{defaultMessage:"Device"}),fieldName:Y,type:"category"},{name:P.i18n.translate("xpack.ux.breakdownFilter.location",{defaultMessage:"Location"}),fieldName:H,type:"category"}],u=l.map((({name:e,fieldName:t})=>({inputDisplay:t===i?e:o.a.createElement("strong",null,e),value:t,dropdownDisplay:e})));return o.a.createElement(a.EuiSuperSelect,{fullWidth:!0,compressed:!0,options:u,valueOfSelected:null!==(r=null==e?void 0:e.fieldName)&&void 0!==r?r:i,onChange:e=>(e=>{t(e===i?null:l.find((({fieldName:t})=>t===e)))})(e),"data-test-subj":n})}var Mt=n(18),Pt=n(19);function Rt({percentiles:e}){var t;const n=null!==(o=e,t=Object.entries(null!=o?o:{}).map((e=>({dataValue:e[1],details:`${(+e[0]).toFixed(0)}`}))))&&void 0!==t?t:[];var o;const l={line:{strokeWidth:1,stroke:r.euiLightVars.euiColorSuccess,opacity:1}};function u({annotation:e}){return i.createElement("span",{"data-cy":"percentileTooltipTitle"},e.details,"th Percentile")}return i.createElement(i.Fragment,null,n.map(((e,t)=>i.createElement(Mt.LineAnnotation,{id:t+"annotation_"+e.dataValue,key:t+"percentile_"+e.dataValue,domainType:Mt.AnnotationDomainType.XDomain,dataValues:[e],style:l,hideTooltips:!0,markerPosition:Mt.Position.Top,marker:i.createElement("span",{"data-cy":"percentile-markers"},i.createElement(a.EuiToolTip,{title:i.createElement(u,{annotation:e}),content:i.createElement("span",null,"Pages loaded: ",Math.round(e.dataValue))},i.createElement(i.Fragment,null,e.details,"th")))}))))}var Ct=n(37),At=n.n(Ct);function Nt({loading:e=!1,height:t="100%",maxWidth:n,children:r,...i}){const l=!0===e?.3:1;return o.a.createElement(a.EuiErrorBoundary,null,o.a.createElement("div",At()({style:{height:t,opacity:l,transition:"opacity 0.2s",...n?{maxWidth:n}:{}}},i),r),!0===e&&o.a.createElement(a.EuiFlexGroup,{justifyContent:"spaceAround",alignItems:"center",style:{height:t,marginTop:`-${t}`,marginBottom:0,...n?{maxWidth:n}:{}}},o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiLoadingChart,{size:"xl"}))))}function Ut({field:e,value:t,percentileRange:n,onLoadingChange:r}){const[a]=Object(C.useUiSetting$)("theme:darkMode"),l=a?Pt.EUI_CHARTS_THEME_DARK:Pt.EUI_CHARTS_THEME_LIGHT,{breakdowns:u,status:s}=(({percentileRange:e,field:t,value:n})=>{var r;const{urlParams:a,uxUiFilters:i}=Te(),{start:o,end:l,searchTerm:u}=a,{min:s,max:c}=null!=e?e:{},{data:d,status:f}=Se((e=>{if(o&&l&&t&&n)return e("GET /internal/apm/ux/page-load-distribution/breakdown",{params:{query:{start:o,end:l,breakdown:n,uiFilters:JSON.stringify(i),urlQuery:u,...s&&c?{minPercentile:String(s),maxPercentile:String(c)}:{}}}})}),[l,o,i,t,n,s,c,u]);return{breakdowns:null!==(r=null==d?void 0:d.pageLoadDistBreakdown)&&void 0!==r?r:[],status:f}})({field:e,value:t,percentileRange:n});return Object(i.useEffect)((()=>{r("success"!==s)}),[s,r]),o.a.createElement(o.a.Fragment,null,u.map((({data:n,name:r},a)=>{var i,u;return o.a.createElement(Mt.LineSeries,{id:`${e}-${t}-${r}`,key:`${e}-${t}-${r}`,name:r,xAccessor:"x",yAccessors:["y"],xScaleType:Mt.ScaleType.Linear,yScaleType:Mt.ScaleType.Linear,curve:Mt.CurveType.CURVE_CATMULL_ROM,data:null!=n?n:[],lineSeriesStyle:{point:{visible:!1}},fit:Mt.Fit.Linear,color:null===(i=l.theme.colors)||void 0===i||null===(u=i.vizColors)||void 0===u?void 0:u[0===a?0:a+1],tickFormat:e=>Qe()(e).format("0.0")+" %"})})))}const Dt=d()(Mt.Chart).withConfig({displayName:"PageLoadChart",componentId:"sc-7u9avm-0"})([".echAnnotation{pointer-events:initial;}"]);function Vt({onPercentileChange:e,data:t,breakdown:n,loading:r,percentileRange:a}){var l,u,s;const[c,d]=Object(i.useState)(!1),f={headerFormatter:e=>o.a.createElement("div",null,o.a.createElement("p",null,e.value," ",_e.seconds))},[p]=Object(C.useUiSetting$)("theme:darkMode"),m=p?Pt.EUI_CHARTS_THEME_DARK:Pt.EUI_CHARTS_THEME_LIGHT;return o.a.createElement(Nt,{loading:r||c,height:"250px"},(!r||t)&&o.a.createElement(Dt,null,o.a.createElement(Mt.Settings,{baseTheme:p?Mt.DARK_THEME:Mt.LIGHT_THEME,theme:m.theme,onBrushEnd:({x:t})=>{if(!t)return;const[n,r]=t;e(n,r)},tooltip:f,showLegend:!0}),o.a.createElement(Rt,{percentiles:null==t?void 0:t.percentiles}),o.a.createElement(Mt.Axis,{id:"bottom",title:_e.pageLoadTime,position:Mt.Position.Bottom}),o.a.createElement(Mt.Axis,{id:"left",title:_e.percPageLoaded,position:Mt.Position.Left,labelFormat:e=>e+" %"}),o.a.createElement(Mt.LineSeries,{sortIndex:0,fit:Mt.Fit.Linear,id:"PagesPercentage",name:_e.overall,xAccessor:"x",yAccessors:["y"],xScaleType:Mt.ScaleType.Linear,yScaleType:Mt.ScaleType.Linear,data:null!==(l=null==t?void 0:t.pageLoadDistribution)&&void 0!==l?l:[],curve:Mt.CurveType.CURVE_CATMULL_ROM,lineSeriesStyle:{point:{visible:!1},line:{strokeWidth:3}},color:null===(u=m.theme.colors)||void 0===u||null===(s=u.vizColors)||void 0===s?void 0:s[1],tickFormat:e=>Qe()(e).format("0.0")+" %"}),n&&o.a.createElement(Ut,{key:`${n.type}-${n.name}`,field:n.type,value:n.name,percentileRange:a,onLoadingChange:e=>{d(e)}})))}function Bt({percentileRange:e,setPercentileRange:t}){const n=()=>{t({min:null,max:null})};return null===e.min&&null===e.max?null:o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiShowFor,{sizes:["xs"]},o.a.createElement(a.EuiButtonIcon,{iconType:"inspect",size:"s","aria-label":_e.resetZoom,onClick:n})),o.a.createElement(a.EuiHideFor,{sizes:["xs"]},o.a.createElement(a.EuiButtonEmpty,{iconType:"inspect",size:"s",onClick:n},_e.resetZoom)))}function zt(){var e,t;const{http:n}=Ve(),{rangeId:r,urlParams:l,uxUiFilters:u}=Te(),{start:s,end:c,rangeFrom:d,rangeTo:f,searchTerm:p}=l,{serviceName:m}=u,[g,h]=Object(i.useState)({min:null,max:null}),[v,y]=Object(i.useState)(null),{data:E,status:b}=Se((e=>s&&c&&m?e("GET /internal/apm/ux/page-load-distribution",{params:{query:{start:s,end:c,uiFilters:JSON.stringify(u),urlQuery:p,...g.min&&g.max?{minPercentile:String(g.min),maxPercentile:String(g.max)}:{}}}}):Promise.resolve(null)),[c,s,u,g.min,g.max,p,m,r]);return Object(A.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{name:`${m}-page-views`,dataType:"ux",time:{from:d,to:f},reportDefinitions:{"service.name":m},...v?{breakdown:v.fieldName}:{}}]},n.basePath.get()),o.a.createElement("div",{"data-cy":"pageLoadDist"},o.a.createElement(a.EuiFlexGroup,{responsive:!1},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,_e.pageLoadDistribution))),o.a.createElement(Bt,{percentileRange:g,setPercentileRange:h}),o.a.createElement(a.EuiFlexItem,{grow:!1,style:{width:170}},o.a.createElement(Lt,{selectedBreakdown:v,onBreakdownChange:y,dataTestSubj:"pldBreakdownFilter"})),!1),o.a.createElement(a.EuiSpacer,{size:"m"}),o.a.createElement(Vt,{data:null==E?void 0:E.pageLoadDistribution,onPercentileChange:(e,t)=>{h({min:e,max:t})},loading:"success"!==b,breakdown:v,percentileRange:{max:g.max||(null==E||null===(e=E.pageLoadDistribution)||void 0===e?void 0:e.maxDuration),min:g.min||(null==E||null===(t=E.pageLoadDistribution)||void 0===t?void 0:t.minDuration)}}))}function qt({data:e,loading:t}){var n,r,a,i,l;const u=Object(s.useHistory)(),{urlParams:c}=Te(),{start:d,end:f}=c,p=fe()(new Date(f)).diff(fe()(new Date(d)),"day"),m=Object(Mt.timeFormatter)(Object(Mt.niceTimeFormatByDay)(p>1?2:1)),g=!(null==e||null===(n=e.topItems)||void 0===n||!n.length),h=null!=e&&null!==(r=e.topItems)&&void 0!==r&&r.length?null==e?void 0:e.topItems:["y"],[v]=Object(C.useUiSetting$)("theme:darkMode"),y=v?Pt.EUI_CHARTS_THEME_DARK:Pt.EUI_CHARTS_THEME_LIGHT;return o.a.createElement(Nt,{loading:t,height:"250px"},(!t||e)&&o.a.createElement(Mt.Chart,null,o.a.createElement(Mt.Settings,{baseTheme:v?Mt.DARK_THEME:Mt.LIGHT_THEME,theme:y.theme,showLegend:!0,onBrushEnd:({x:e})=>{if(!e)return;const[t,n]=e,r=fe()(t).toISOString(),a=fe()(n).toISOString();u.push({...u.location,search:Object(A.fromQuery)({...Object(A.toQuery)(u.location.search),rangeFrom:r,rangeTo:a})})},xDomain:{min:new Date(d).valueOf(),max:new Date(f).valueOf()}}),o.a.createElement(Mt.Axis,{id:"date_time",position:Mt.Position.Bottom,tickFormat:m}),o.a.createElement(Mt.Axis,{id:"page_views",title:_e.pageViews,position:Mt.Position.Left,tickFormat:e=>Qe()(e).format("0"),labelFormat:e=>Qe()(e).format("0a")}),o.a.createElement(Mt.BarSeries,{id:_e.pageViews,xScaleType:Mt.ScaleType.Time,yScaleType:Mt.ScaleType.Linear,xAccessor:"x",yAccessors:Array.from(h),stackAccessors:["x"],data:null!==(a=null==e?void 0:e.items)&&void 0!==a?a:[],name:({yAccessor:e})=>"y"===e?_e.overall:e,color:g||null===(i=y.theme.colors)||void 0===i||null===(l=i.vizColors)||void 0===l?void 0:l[1]})))}function Wt(){const{http:e}=Ve(),{rangeId:t,urlParams:n,uxUiFilters:r}=Te(),{serviceName:l}=r,{start:u,end:s,searchTerm:c,rangeTo:d,rangeFrom:f}=n,[p,m]=Object(i.useState)(null),{data:g,status:h}=Se((e=>u&&s&&l?e("GET /internal/apm/ux/page-view-trends",{params:{query:{start:u,end:s,uiFilters:JSON.stringify(r),urlQuery:c,...p?{breakdowns:JSON.stringify(p)}:{}}}}):Promise.resolve(void 0)),[u,s,l,r,c,p,t]);return Object(A.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{name:`${l}-page-views`,dataType:"ux",time:{from:f,to:d},reportDefinitions:{"service.name":l},...p?{breakdown:p.fieldName}:{}}]},e.basePath.get()),o.a.createElement("div",null,o.a.createElement(a.EuiFlexGroup,{responsive:!1},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,_e.pageViews))),o.a.createElement(a.EuiFlexItem,{grow:!1,style:{width:170}},o.a.createElement(Lt,{selectedBreakdown:p,onBreakdownChange:m,dataTestSubj:"pvBreakdownFilter"})),!1),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(qt,{data:g,loading:"success"!==h}))}function Gt(){return o.a.createElement(a.EuiFlexGroup,{gutterSize:"s",wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(zt,null))),o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(Wt,null))))}const Ht=d.a.div.withConfig({displayName:"StyleChart",componentId:"sc-eop0r1-0"})(["height:100%;"]),$t={chartMargins:{top:0,bottom:0,left:0,right:0},legend:{verticalWidth:100},partition:{linkLabel:{maximumSection:1/0,maxCount:0},outerSizeRatio:1,circlePadding:4}};function Yt({loading:e,options:t}){const[n]=Object(C.useUiSetting$)("theme:darkMode"),r=n?Pt.EUI_CHARTS_THEME_DARK:Pt.EUI_CHARTS_THEME_LIGHT;return o.a.createElement(Nt,{loading:e,height:"245px",maxWidth:"430px"},o.a.createElement(Ht,null,o.a.createElement(Mt.Chart,null,o.a.createElement(Mt.Settings,{showLegend:!0,baseTheme:n?Mt.DARK_THEME:Mt.LIGHT_THEME,theme:$t}),o.a.createElement(Mt.Partition,{id:"spec_1",data:null!=t&&t.length?t:[{count:1,name:_e.noData}],layout:Mt.PartitionLayout.sunburst,clockwiseSectors:!1,valueAccessor:e=>e.count,valueGetter:"percent",percentFormatter:e=>Math.round(100*(e+Number.EPSILON))/100+"%",layers:[{groupByRollup:e=>e.name,shape:{fillColor:e=>{var t,n;return null===(t=r.theme.colors)||void 0===t||null===(n=t.vizColors)||void 0===n?void 0:n[e.sortIndex]}}}]}))))}function Qt(){const{rangeId:e,urlParams:t,uxUiFilters:n}=Te(),{start:r,end:i,searchTerm:l}=t,{data:u,status:s}=Se((e=>{const{serviceName:t}=n;return r&&i&&t?e("GET /internal/apm/ux/visitor-breakdown",{params:{query:{start:r,end:i,uiFilters:JSON.stringify(n),urlQuery:l}}}):Promise.resolve(null)}),[i,r,n,l,e]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"s"},o.a.createElement("h3",null,Ie)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiFlexGroup,{style:{height:"calc(100% - 32px)"}},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h4",null,_e.browser)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(Yt,{options:null==u?void 0:u.browsers,loading:"success"!==s})),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h4",null,_e.operatingSystem)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(Yt,{options:null==u?void 0:u.os,loading:"success"!==s}))))}var Jt=n(62),Kt=n.n(Jt),Zt=n(24),Xt=n(28);const en="apm_static_index_pattern_id",tn={type:Zt.SOURCE_TYPES.ES_TERM_SOURCE,id:"3657625d-17b0-41ef-99ba-3a2b2938655c",indexPatternTitle:"apm-*",term:"client.geo.country_iso_code",metrics:[{type:Zt.AGG_TYPE.AVG,field:"transaction.duration.us",label:"Page load duration"}],indexPatternId:en,applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0},nn={type:Zt.SOURCE_TYPES.ES_TERM_SOURCE,id:"e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41",indexPatternTitle:"apm-*",term:"client.geo.region_iso_code",metrics:[{type:Zt.AGG_TYPE.AVG,field:"transaction.duration.us"}],whereQuery:{query:'transaction.type : "page-load"',language:"kuery"},indexPatternId:en,applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0},rn=e=>({query:`transaction.type : "page-load" and service.name : "${e}"`,language:"kuery"}),an="region_name",on="name",ln="__kbnjoin__avg_of_transaction.duration.us__e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41",un="__kbnjoin__avg_of_transaction.duration.us__3657625d-17b0-41ef-99ba-3a2b2938655c",sn=d()(a.EuiDescriptionListDescription).withConfig({displayName:"DescriptionItem",componentId:"sc-xxbqdx-0"})(["&&&{width:25%;}"]),cn=d()(a.EuiDescriptionListTitle).withConfig({displayName:"TitleItem",componentId:"sc-xxbqdx-1"})(["&&&{width:75%;}"]);function dn({closeTooltip:e,features:t=[],loadFeatureProperties:n}){var r;const{id:l,layerId:u,mbProperties:s}=null!==(r=t[0])&&void 0!==r?r:{},[c,d]=Object(i.useState)(l),[f,p]=Object(i.useState)("");return Object(i.useEffect)((()=>{(async()=>{n&&(await n({layerId:u,properties:s})).forEach((e=>{e.getPropertyKey()!==on&&e.getPropertyKey()!==an||d(e.getRawValue()),e.getPropertyKey()!==ln&&e.getPropertyKey()!==un||p((e=>{const t=e/1e3;return t>1e3?(t/1e3).toFixed(2)+" sec":(t/1e3).toFixed(0)+" ms"})(+e.getRawValue()))}))})()})),o.a.createElement(a.EuiOutsideClickDetector,{onOutsideClick:()=>{null!=e&&e()}},o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiPopoverTitle,null,c),o.a.createElement(a.EuiDescriptionList,{type:"column",textStyle:"reverse",compressed:!0,style:{width:300}},o.a.createElement(cn,{className:"eui-textNoWrap"},_e.avgPageLoadDuration),o.a.createElement(sn,null,f))))}const fn=o.a.memo(dn),pn=(e,t,n=!1)=>({meta:{index:en,type:"phrases",key:e,value:t.join(", "),params:t,alias:null,negate:n,disabled:!1},query:{bool:{should:t.map((t=>({match_phrase:{[e]:t}}))),minimum_should_match:1}}}),mn={meta:{index:en,alias:null,negate:!1,disabled:!1,type:"exists",key:"transaction.marks.navigationTiming.fetchStart",value:"exists"},query:{exists:{field:"transaction.marks.navigationTiming.fetchStart"}}},gn=d.a.div.withConfig({displayName:"EmbeddedPanel",componentId:"sc-xloqc8-0"})(["z-index:auto;flex:1;display:flex;flex-direction:column;height:100%;position:relative;.embPanel__content{display:flex;flex:1 1 100%;z-index:1;min-height:0;}&&& .mapboxgl-canvas{animation:none !important;}"]);function hn(){const{rangeId:e,urlParams:t}=Te(),{start:n,end:r,serviceName:a}=t,l=(()=>{const{urlParams:e,uxUiFilters:t}=Te(),{serviceName:n,searchTerm:r}=e,{browser:a,device:o,os:l,location:u,transactionUrl:s,browserExcluded:c,deviceExcluded:d,osExcluded:f,locationExcluded:p,transactionUrlExcluded:m}=t;return Object(i.useMemo)((()=>{const e=[mn];var t;return n&&e.push({meta:{index:en,alias:null,negate:!1,disabled:!1,type:"phrase",key:z,params:{query:t=n}},query:{term:{"service.name":t}}}),a&&e.push(pn(W,a)),o&&e.push(pn(Y,o)),l&&e.push(pn(Q,l)),u&&e.push(pn(H,u)),s&&e.push(pn($,s)),c&&e.push(pn(W,c,!0)),d&&e.push(pn(Y,d,!0)),f&&e.push(pn(Q,f,!0)),p&&e.push(pn(H,p,!0)),m&&e.push(pn($,m,!0)),r&&e.push(((e,t)=>({meta:{index:en,alias:null,negate:!1,disabled:!1,type:"term",key:e,params:{query:t}},query:{wildcard:{[e]:{value:`*${t}*`}}}}))($,r)),e}),[n,a,o,l,u,s,c,d,f,p,m,r])})(),u=function(){const{urlParams:e}=Te(),{serviceName:t}=e;tn.whereQuery=rn(t);const n=e=>({type:"VECTOR",properties:{icon:{type:Zt.STYLE_TYPE.STATIC,options:{value:"marker"}},fillColor:{type:Zt.STYLE_TYPE.DYNAMIC,options:{color:"Blue to Red",colorCategory:"palette_0",fieldMetaOptions:{isEnabled:!0,sigma:3},type:Zt.COLOR_MAP_TYPE.ORDINAL,field:{name:e,origin:Zt.FIELD_ORIGIN.JOIN},useCustomColorRamp:!1}},lineColor:{type:Zt.STYLE_TYPE.DYNAMIC,options:{color:"#3d3d3d",fieldMetaOptions:{isEnabled:!0}}},lineWidth:{type:Zt.STYLE_TYPE.STATIC,options:{size:1}},iconSize:{type:Zt.STYLE_TYPE.STATIC,options:{size:6}},iconOrientation:{type:Zt.STYLE_TYPE.STATIC,options:{orientation:0}},labelText:{type:Zt.STYLE_TYPE.STATIC,options:{value:""}},labelColor:{type:Zt.STYLE_TYPE.STATIC,options:{color:"#000000"}},labelSize:{type:Zt.STYLE_TYPE.STATIC,options:{size:14}},labelBorderColor:{type:Zt.STYLE_TYPE.STATIC,options:{color:"#FFFFFF"}},symbolizeAs:{options:{value:Zt.SYMBOLIZE_AS_TYPES.CIRCLE}},labelBorderSize:{options:{size:Zt.LABEL_BORDER_SIZES.SMALL}}},isTimeAware:!0}),r={joins:[{leftField:"iso2",right:tn}],sourceDescriptor:{type:"EMS_FILE",id:"world_countries",tooltipProperties:[on]},style:n(un),id:"e8d1d974-eed8-462f-be2c-f0004b7619b2",label:null,minZoom:0,maxZoom:24,alpha:.75,visible:!0,type:Zt.LAYER_TYPE.GEOJSON_VECTOR};return nn.whereQuery=rn(t),[r,{joins:[{leftField:"region_iso_code",right:nn}],sourceDescriptor:{type:"EMS_FILE",id:"administrative_regions_lvl2",tooltipProperties:["region_iso_code",an]},style:n(ln),id:"0e936d41-8765-41c9-97f0-05e166391366",label:null,minZoom:3,maxZoom:24,alpha:.75,visible:!0,type:Zt.LAYER_TYPE.GEOJSON_VECTOR}]}(),[s,c]=Object(i.useState)(),d=Object(i.useRef)(null),{embeddable:f,maps:p}=Ve();if(!f)throw new Error("Embeddable start plugin not found");const m=f.getEmbeddableFactory(Zt.MAP_SAVED_OBJECT_TYPE),g={attributes:{title:""},id:Kt.a.v4(),filters:l,viewMode:Xt.ViewMode.VIEW,isLayerTOCOpen:!1,query:{query:'transaction.type : "page-load"',language:"kuery"},...n&&{timeRange:{from:new Date(n).toISOString(),to:new Date(r).toISOString()}},hideFilterActions:!0};function h({addFilters:e,closeTooltip:t,features:n,isLocked:r,getLayerName:a,loadFeatureProperties:i}){const l={addFilters:e,closeTooltip:t,isLocked:r,getLayerName:a,loadFeatureProperties:i};return o.a.createElement(fn,At()({},l,{features:n}))}return Object(i.useEffect)((()=>{null!=s&&a&&(s.updateInput({filters:l}),s.reload())}),[l]),Object(i.useEffect)((()=>{if(null!=s&&null!=n&&null!=r){const e={from:new Date(n).toISOString(),to:new Date(r).toISOString()};s.updateInput({timeRange:e}),s.reload()}}),[n,r,e]),Object(i.useEffect)((()=>{!async function(){if(!m)throw new Error("Map embeddable not found.");const e=await m.create({...g,title:"Visitors by region"});if(e&&!Object(Xt.isErrorEmbeddable)(e)){e.setRenderTooltipContent(h);const t=p?await p.createLayerDescriptors.createBasemapLayerDescriptor():null;t&&u.unshift(t),await e.setLayerList(u)}c(e)}()}),[]),Object(i.useEffect)((()=>{d.current&&s&&a&&s.render(d.current)}),[s,d,a]),o.a.createElement(gn,null,o.a.createElement("div",{"data-test-subj":"xpack.ux.regionMap.embeddedPanel",className:"embPanel__content",ref:d}))}hn.displayName="EmbeddedMap";const vn=o.a.memo(hn);function yn(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,_e.pageLoadDurationByRegion)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement("div",{style:{height:400}},o.a.createElement(vn,null)))}function En(){return o.a.createElement(a.EuiFlexGroup,{gutterSize:"s",wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(yn,null))),o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(Qt,null))))}const bn=d()(a.EuiFlexGroup).withConfig({displayName:"ClFlexGroup",componentId:"sc-mq621j-0"})(["flex-direction:row;@media only screen and (max-width:768px){flex-direction:row;justify-content:space-between;}"]);function xn(e,t){return void 0===t?_e.dataMissing:st(t,e)}function Tn({pageViews:e}){return void 0===e?i.createElement(i.Fragment,null,_e.dataMissing):e<1e4?i.createElement(i.Fragment,null,Qe()(e).format("0,0")):i.createElement(a.EuiToolTip,{content:Qe()(e).format("0,0")},i.createElement(i.Fragment,null,Qe()(e).format("0 a")))}function wn(){var e,t,n,r;const o=ut(),{data:l,status:u}=Se((e=>o?e("GET /internal/apm/ux/client-metrics",{params:{query:{...o}}}):Promise.resolve(null)),[o]),{setSharedData:s}=Object(i.useContext)(U);Object(i.useEffect)((()=>{var e,t;s({totalPageViews:null!==(e=null==l||null===(t=l.pageViews)||void 0===t?void 0:t.value)&&void 0!==e?e:0})}),[l,s]);const c={minWidth:"150px",maxWidth:"250px"};return i.createElement(bn,{wrap:!0,responsive:!1},i.createElement(a.EuiFlexItem,{style:c},i.createElement(a.EuiStat,{titleSize:"l",title:xn("ms",null==l||null===(e=l.totalPageLoadDuration)||void 0===e?void 0:e.value),description:i.createElement(i.Fragment,null,_e.totalPageLoad,i.createElement(a.EuiIconTip,{content:_e.totalPageLoadTooltip,type:"questionInCircle"})),isLoading:"success"!==u})),i.createElement(a.EuiFlexItem,{style:c},i.createElement(a.EuiStat,{titleSize:"l",title:xn("ms",null==l||null===(t=l.backEnd)||void 0===t?void 0:t.value),description:i.createElement(i.Fragment,null,_e.backEnd,i.createElement(a.EuiIconTip,{content:_e.backEndTooltip,type:"questionInCircle"})),isLoading:"success"!==u})),i.createElement(a.EuiFlexItem,{style:c},i.createElement(a.EuiStat,{titleSize:"l",title:xn("ms",null==l||null===(n=l.frontEnd)||void 0===n?void 0:n.value),description:i.createElement(i.Fragment,null,_e.frontEnd,i.createElement(a.EuiIconTip,{content:_e.frontEndTooltip,type:"questionInCircle"})),isLoading:"success"!==u})),i.createElement(a.EuiFlexItem,{style:c},i.createElement(a.EuiStat,{titleSize:"l",title:i.createElement(Tn,{pageViews:null==l||null===(r=l.pageViews)||void 0===r?void 0:r.value}),description:_e.pageViews,isLoading:"success"!==u})))}function kn(){const{urlParams:{percentile:e}}=Te();return i.createElement(a.EuiPanel,{hasBorder:!0},i.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween"},i.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics"},i.createElement(a.EuiTitle,{size:"xs"},i.createElement("h3",null,_e.pageLoad," (",lt(e),")")),i.createElement(a.EuiSpacer,{size:"s"}),i.createElement(wn,null))))}function Sn(){const{isSmall:e}=Ne();return o.a.createElement(a.EuiFlexGroup,{direction:e?"row":"column",gutterSize:"s"},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(kn,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(jt,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(Gt,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(En,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(It,null)))}function On(){return Object(A.useTrackPageview)({app:"ux",path:"home"}),Object(A.useTrackPageview)({app:"ux",path:"home",delay:15e3}),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ot,null),o.a.createElement(a.EuiSpacer,{size:"m"}),o.a.createElement(Sn,null))}const jn=P.i18n.translate("xpack.ux.title",{defaultMessage:"Dashboard"});function Fn(){const{docLinks:e,http:t,observability:n}=Ve(),r=n.navigation.PageTemplate,{data:a,status:l}=Se((e=>e("GET /api/apm/observability_overview/has_rum_data",{})),[]),u=null!=a&&a.hasData?void 0:{solution:P.i18n.translate("xpack.ux.overview.solutionName",{defaultMessage:"Observability"}),actions:{elasticAgent:{title:P.i18n.translate("xpack.ux.overview.beatsCard.title",{defaultMessage:"Add RUM data"}),description:P.i18n.translate("xpack.ux.overview.beatsCard.description",{defaultMessage:"Enable RUM with the APM agent to collect user experience data."}),href:t.basePath.prepend("/app/home#/tutorial/apm")}},docsLink:e.links.observability.guide},s="loading"===l;return o.a.createElement(i.Fragment,null,o.a.createElement(D,null,o.a.createElement(r,{noDataConfig:s?void 0:u,pageHeader:{children:o.a.createElement(_n,null)}},s&&o.a.createElement(qe,null),o.a.createElement("div",{style:{visibility:s?"hidden":"initial"}},o.a.createElement(On,null)))))}function _n(){const e=Ne().isMedium?{}:{maxWidth:"70%"};return o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,null,o.a.createElement("h1",{className:"eui-textNoWrap"},jn))),o.a.createElement(a.EuiFlexItem,{style:{alignItems:"flex-end",...e}},o.a.createElement(ze,null))),o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(Fe,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(Le,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement($e,null))))}function In(){const{inspectorAdapters:e}=Object(A.useInspectorContext)(),{uiSettings:t,inspector:n}=Ve();return t.get(A.enableInspectEsQueries)?o.a.createElement(a.EuiHeaderLink,{color:"primary",onClick:()=>{n.open(e)}},P.i18n.translate("xpack.ux.inspectButtonText",{defaultMessage:"Inspect"})):null}const Ln=P.i18n.translate("xpack.ux.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),Mn=P.i18n.translate("xpack.ux.analyzeDataButtonLabel.message",{defaultMessage:"Explore Data allows you to select and filter result data in any dimension and look for the cause or impact of performance problems."});function Pn({appMountParameters:e}){const{http:t,application:n}=Ve(),{urlParams:r}=Te(),{rangeTo:i,rangeFrom:l,serviceName:u}=r,s=Object(A.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"ux",name:`${u}-page-views`,time:{from:l,to:i},reportDefinitions:{[z]:u?[u]:[]},selectedMetricField:A.RECORDS_FIELD}]},t.basePath.get());return o.a.createElement(A.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},o.a.createElement(a.EuiHeaderLinks,{gutterSize:"xs"},o.a.createElement(a.EuiToolTip,{position:"top",content:o.a.createElement("p",null,Mn)},o.a.createElement(a.EuiHeaderLink,{"data-test-subj":"uxAnalyzeBtn",color:"text",href:s,iconType:"visBarVerticalStacked"},Ln)),o.a.createElement(a.EuiHeaderLink,{color:"primary",iconType:"indexOpen",iconSide:"left",href:n.getUrlForApp("/home#/tutorial/apm")},P.i18n.translate("xpack.ux.addDataButtonLabel",{defaultMessage:"Add data"})),o.a.createElement(In,null)))}const Rn=[{exact:!0,path:"/",render:()=>o.a.createElement(s.Redirect,{to:"/ux"}),breadcrumb:jn}];function Cn(){const[e]=Object(C.useUiSetting$)("theme:darkMode"),{http:t}=Ve(),n=t.basePath.get();return Object(A.useBreadcrumbs)([{text:P.i18n.translate("xpack.ux.breadcrumbs.root",{defaultMessage:"User Experience"}),href:n+"/app/ux"},{text:P.i18n.translate("xpack.ux.breadcrumbs.dashboard",{defaultMessage:"Dashboard"})}]),o.a.createElement(c.ThemeProvider,{theme:t=>({...t,eui:e?r.euiDarkVars:r.euiLightVars,darkMode:e})},o.a.createElement("div",{className:R.APP_WRAPPER_CLASS,"data-test-subj":"csmMainContainer",role:"main"},o.a.createElement(Fn,null)))}const An=function(e){var t=new Map,n=new Map,r=Object.entries({}).map((function(e){var t=v()(e,2),n=t[0],r=t[1];return a(g()(g()({},r),{},{path:n}))}));function a(e){var r,i,o,l={component:function(){return e.element},routes:null!==(r=null===(i=Object.entries(null!==(o=e.children)&&void 0!==o?o:{}))||void 0===i?void 0:i.map((function(e){var t=v()(e,2),n=t[0],r=t[1];return a(g()(g()({},r),{},{path:n}))})))&&void 0!==r?r:[],exact:!e.children||0===Object.values(e.children).length,path:F(e.path)};return t.set(l,e),n.set(e,l),l}function i(e){var n=Object(b.matchRoutes)(r,F(e));if(!n.length)throw new Error("No matching route found for ".concat(e));return n.map((function(e){return t.get(e.route)}))}var o=function(){for(var e=!1,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];"boolean"==typeof a[a.length-1]&&(e=a[a.length-1],a.pop());var o=a[a.length-1];a.pop();var l=a;0===l.length&&(l=[o.pathname||"/"]);for(var u=[],s=-1,c=function(){var e=f[d],t=e.endsWith("/*")||0===a.length;if(u=Object(b.matchRoutes)(r,F(o.pathname)),-1!==(s=t?u.length-1:Object(w.findLastIndex)(u,(function(t){return t.route.path===F(e)}))))return"break";s=-1},d=0,f=l;d<f.length;d++){var p=c();if("break"===p)break}if(-1===s){if(e)return[];var m;throw m=1===l.length?"".concat(l[0]," does not match current path ").concat(o.pathname):"None of ".concat(l.join(", ")," match current path ").concat(o.pathname),new Error(m)}return u.slice(0,s+1).map((function(e){var n=t.get(e.route);if(null!=n&&n.params){var r,a=j(n.params).decode(Object(w.merge)({},null!==(r=n.defaults)&&void 0!==r?r:{},{path:e.match.params,query:T.a.parse(o.search,{decode:!0})}));if(Object(y.isLeft)(a))throw new Error(E.PathReporter.report(a).join("\n"));return{match:g()(g()({},e.match),{},{params:a.right}),route:n}}return{match:g()(g()({},e.match),{},{params:{path:{},query:{}}}),route:n}}))},l=function(e){var t=arguments.length<=1?void 0:arguments[1],n=Object(w.merge)({path:{},query:{}},t),r=i(e=e.split("/").map((function(e){var t=e.match(/(?:{([a-zA-Z]+)})/);return t?n.path[t[1]]:e})).join("/")),a=S.apply(void 0,p()(Object(w.compact)(r.map((function(e){return e.params}))))),o=w.merge.apply(void 0,[{}].concat(p()(r.map((function(e){var t;return null!==(t=e.defaults)&&void 0!==t?t:{}}))),[n])),l=a.decode(o);if(Object(y.isLeft)(l))throw new Error(E.PathReporter.report(l).join("\n"));return T.a.stringifyUrl({url:e,query:o.query},{encode:!0})};return{link:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return l.apply(void 0,[e].concat(n))},getParams:function(){var e=o.apply(void 0,arguments);return e.length?w.merge.apply(void 0,[{path:{},query:{}}].concat(p()(e.map((function(e){var t,n;return Object(w.merge)({},null!==(t=null===(n=e.route)||void 0===n?void 0:n.defaults)&&void 0!==t?t:{},e.match.params)}))))):void 0},matchRoutes:function(){return o.apply(void 0,arguments)},getRoutePath:function(e){return n.get(e).path},getRoutesToMatch:function(e){return i(e)}}}();function Nn({appMountParameters:e,core:t,deps:n,corePlugins:{embeddable:r,inspector:i,maps:l,observability:u,data:s,dataViews:c}}){const{history:d}=e,f=t.i18n,p={...n,maps:l};return o.a.createElement(C.RedirectAppLinks,{className:R.APP_WRAPPER_CLASS,application:t.application},o.a.createElement(C.KibanaContextProvider,{services:{...t,...p,inspector:i,observability:u,embeddable:r,data:s,dataViews:c}},o.a.createElement(f.Context,null,o.a.createElement(M,{history:d,router:An},o.a.createElement(A.DatePickerContextProvider,null,o.a.createElement(A.InspectorContextProvider,null,o.a.createElement(xe,null,o.a.createElement(a.EuiErrorBoundary,null,o.a.createElement(Cn,null)),o.a.createElement(Pn,{appMountParameters:e}))))))))}const Un=({core:e,deps:t,appMountParameters:n,corePlugins:r})=>{const{element:a}=n;return Object(ke.b)(e),(async()=>await Object(ke.a)("POST /internal/apm/data_view/static",{signal:null}))().catch((e=>{console.log("Error creating static data view",e)})),u.a.render(o.a.createElement(Nn,{appMountParameters:n,core:e,deps:t,corePlugins:r}),a),()=>{u.a.unmountComponentAtNode(a)}}}])]);