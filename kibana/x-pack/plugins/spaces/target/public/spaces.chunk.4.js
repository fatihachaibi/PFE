/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[]).push([[4],{127:function(e,t,s){"use strict";s.r(t),s.d(t,"NavControlPopover",(function(){return nav_control_popover_NavControlPopover}));var a=s(4),n=s.n(a),i=s(2),o=s(1),c=s(5),r=(s(42),s(12)),p=s(11),l=s(0);class manage_spaces_button_ManageSpacesButton extends o.Component{constructor(...e){super(...e),n()(this,"navigateToManageSpaces",(()=>{this.props.onClick&&this.props.onClick(),this.props.navigateToApp("management",{path:"kibana/spaces"})}))}render(){return this.props.capabilities.spaces.manage?Object(l.jsx)(i.EuiButton,{size:this.props.size||"s",className:this.props.className,isDisabled:this.props.isDisabled,onClick:this.navigateToManageSpaces,style:this.props.style,"data-test-subj":"manageSpaces"},Object(l.jsx)(p.FormattedMessage,{id:"xpack.spaces.manageSpacesButton.manageSpacesButtonLabel",defaultMessage:"Manage spaces"})):null}}const u=e=>{const t={id:e.id,className:"spcDescription",title:"Spaces"};return Object(l.jsx)(i.EuiContextMenuPanel,t,Object(l.jsx)(i.EuiText,{className:"spcDescription__text"},Object(l.jsx)("p",null,Object(r.b)())),Object(l.jsx)("div",{key:"manageSpacesButton",className:"spcDescription__manageButtonWrapper"},Object(l.jsx)(manage_spaces_button_ManageSpacesButton,{size:"s",style:{width:"100%"},onClick:e.onManageSpacesClick,capabilities:e.capabilities,navigateToApp:e.navigateToApp})))};var d=s(8),h=s.n(d),g=(s(47),s(15));const b=Object(o.lazy)((()=>Object(c.a)().then((e=>({default:e})))));class spaces_menu_SpacesMenuUI extends o.Component{constructor(...e){super(...e),n()(this,"state",{searchTerm:"",allowSpacesListFocus:!1}),n()(this,"getVisibleSpaces",(e=>{const{spaces:t}=this.props;let s=t;return e&&(s=t.filter((t=>{const{name:s,description:a=""}=t;return s.toLowerCase().indexOf(e)>=0||a.toLowerCase().indexOf(e)>=0}))),s})),n()(this,"renderSpacesListPanel",((e,t)=>0===e.length?Object(l.jsx)(i.EuiText,{color:"subdued",className:"eui-textCenter"},Object(l.jsx)(p.FormattedMessage,{id:"xpack.spaces.navControl.spacesMenu.noSpacesFoundTitle",defaultMessage:" no spaces found "})):Object(l.jsx)(i.EuiContextMenuPanel,{key:"spcMenuList","data-search-term":t,className:"spcMenu__spacesList",initialFocusedItemIndex:this.state.allowSpacesListFocus?0:void 0,items:e}))),n()(this,"renderSearchField",(()=>{const{intl:e}=this.props;return Object(l.jsx)("div",{key:"manageSpacesSearchField",className:"spcMenu__searchFieldWrapper"},Object(l.jsx)(i.EuiFieldSearch,{placeholder:e.formatMessage({id:"xpack.spaces.navControl.spacesMenu.findSpacePlaceholder",defaultMessage:"Find a space"}),incremental:!0,onSearch:this.onSearch,onKeyDown:this.onSearchKeyDown,onFocus:this.onSearchFocus,compressed:!0}))})),n()(this,"onSearchKeyDown",(e=>{const t=e.keyCode;[9,13,40].includes(t)&&this.setState({allowSpacesListFocus:!0})})),n()(this,"onSearchFocus",(()=>{this.setState({allowSpacesListFocus:!1})})),n()(this,"renderManageButton",(()=>Object(l.jsx)(manage_spaces_button_ManageSpacesButton,{key:"manageSpacesButton",className:"spcMenu__manageButton",size:"s",onClick:this.props.onManageSpacesClick,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp}))),n()(this,"onSearch",(e=>{this.setState({searchTerm:e.trim().toLowerCase()})})),n()(this,"renderSpaceMenuItem",(e=>{const t=Object(l.jsx)(o.Suspense,{fallback:Object(l.jsx)(i.EuiLoadingSpinner,null)},Object(l.jsx)(b,{space:e,size:"s"}));return Object(l.jsx)(i.EuiContextMenuItem,{key:e.id,"data-test-subj":`${e.id}-gotoSpace`,icon:t,href:Object(g.addSpaceIdToPath)(this.props.serverBasePath,e.id,g.ENTER_SPACE_PATH),toolTipTitle:e.description&&e.name,toolTipContent:e.description},Object(l.jsx)(i.EuiText,{className:"spcMenu__item"},e.name))})),n()(this,"renderPlaceholderMenuItem",(e=>Object(l.jsx)(i.EuiContextMenuItem,{key:e,disabled:!0},Object(l.jsx)(i.EuiLoadingContent,{lines:1}))))}render(){const{intl:e,isLoading:t}=this.props,{searchTerm:s}=this.state,a=t?[1,2,3].map(this.renderPlaceholderMenuItem):this.getVisibleSpaces(s).map(this.renderSpaceMenuItem),n={id:this.props.id,className:"spcMenu",title:e.formatMessage({id:"xpack.spaces.navControl.spacesMenu.changeCurrentSpaceTitle",defaultMessage:"Change current space"})};return this.props.spaces.length>=g.SPACE_SEARCH_COUNT_THRESHOLD?Object(l.jsx)(i.EuiContextMenuPanel,n,this.renderSearchField(),this.renderSpacesListPanel(a,s),this.renderManageButton()):(a.push(this.renderManageButton()),Object(l.jsx)(i.EuiContextMenuPanel,h()({},n,{items:a})))}}const m=Object(p.injectI18n)(spaces_menu_SpacesMenuUI),f=Object(o.lazy)((()=>Object(c.a)().then((e=>({default:e}))))),S="headerSpacesMenuContent";class nav_control_popover_NavControlPopover extends o.Component{constructor(e){super(e),n()(this,"activeSpace$",void 0),n()(this,"getActiveSpaceButton",(()=>{const{activeSpace:e}=this.state;return e?this.getButton(Object(l.jsx)(o.Suspense,{fallback:Object(l.jsx)(i.EuiLoadingSpinner,{size:"m"})},Object(l.jsx)(f,{space:e,size:"s"})),e.name):this.getButton(Object(l.jsx)(i.EuiLoadingSpinner,{size:"m"}),"loading")})),n()(this,"getButton",((e,t)=>Object(l.jsx)(i.EuiHeaderSectionItemButton,{"aria-controls":S,"aria-expanded":this.state.showSpaceSelector,"aria-haspopup":"true","aria-label":t,"data-test-subj":"spacesNavSelector",title:t,onClick:this.toggleSpaceSelector},e))),n()(this,"toggleSpaceSelector",(()=>{!this.state.showSpaceSelector&&this.loadSpaces(),this.setState({showSpaceSelector:!this.state.showSpaceSelector})})),n()(this,"closeSpaceSelector",(()=>{this.setState({showSpaceSelector:!1})})),this.state={showSpaceSelector:!1,loading:!1,activeSpace:null,spaces:[]}}componentDidMount(){this.activeSpace$=this.props.spacesManager.onActiveSpaceChange$.subscribe({next:e=>{this.setState({activeSpace:e})}})}componentWillUnmount(){this.activeSpace$&&this.activeSpace$.unsubscribe()}render(){const e=this.getActiveSpaceButton();let t;return t=!this.state.loading&&this.state.spaces.length<2?Object(l.jsx)(u,{id:S,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp}):Object(l.jsx)(m,{id:S,spaces:this.state.spaces,isLoading:this.state.loading,serverBasePath:this.props.serverBasePath,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp}),Object(l.jsx)(i.EuiPopover,{id:"spcMenuPopover",button:e,isOpen:this.state.showSpaceSelector,closePopover:this.closeSpaceSelector,anchorPosition:this.props.anchorPosition,panelPaddingSize:"none",repositionOnScroll:!0,ownFocus:!0},t)}async loadSpaces(){const{spacesManager:e}=this.props;if(this.state.loading)return;this.setState({loading:!0});const t=await e.getSpaces();this.setState({spaces:t,loading:!1})}}},34:function(e,t,s){"use strict";var a,n=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),i=[];function o(e){for(var t=-1,s=0;s<i.length;s++)if(i[s].identifier===e){t=s;break}return t}function c(e,t){for(var s={},a=[],n=0;n<e.length;n++){var c=e[n],r=t.base?c[0]+t.base:c[0],p=s[r]||0,l="".concat(r," ").concat(p);s[r]=p+1;var u=o(l),d={css:c[1],media:c[2],sourceMap:c[3]};-1!==u?(i[u].references++,i[u].updater(d)):i.push({identifier:l,updater:b(d,t),references:1}),a.push(l)}return a}function r(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=s.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var o=n(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var p,l=(p=[],function(e,t){return p[e]=t,p.filter(Boolean).join("\n")});function u(e,t,s,a){var n=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=l(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function d(e,t,s){var a=s.css,n=s.media,i=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var h=null,g=0;function b(e,t){var s,a,n;if(t.singleton){var i=g++;s=h||(h=r(t)),a=u.bind(null,s,i,!1),n=u.bind(null,s,i,!0)}else s=r(t),a=d.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var s=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var n=o(s[a]);i[n].references--}for(var r=c(e,t),p=0;p<s.length;p++){var l=o(s[p]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}s=r}}}},35:function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,a,n,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var c=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(n," */")),r=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[i].concat(r).concat([c]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var c=0;c<e.length;c++){var r=[].concat(e[c]);a&&n[r[0]]||(s&&(r[2]?r[2]="".concat(s," and ").concat(r[2]):r[2]=s),t.push(r))}},t}},42:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(43);case"v8light":return s(45)}},43:function(e,t,s){var a=s(34),n=s(44);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},44:function(e,t,s){(t=s(35)(!1)).push([e.i,".spcDescription{max-width:240px}.spcDescription__text,.spcDescription__manageButtonWrapper{padding:12px}\n",""]),e.exports=t},45:function(e,t,s){var a=s(34),n=s(46);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},46:function(e,t,s){(t=s(35)(!1)).push([e.i,".spcDescription{max-width:240px}.spcDescription__text,.spcDescription__manageButtonWrapper{padding:12px}\n",""]),e.exports=t},47:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(48);case"v8light":return s(50)}},48:function(e,t,s){var a=s(34),n=s(49);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},49:function(e,t,s){(t=s(35)(!1)).push([e.i,".spcMenu{max-width:240px}.spcMenu__spacesList{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:320px}.spcMenu__spacesList::-webkit-scrollbar{width:16px;height:16px}.spcMenu__spacesList::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.spcMenu__spacesList::-webkit-scrollbar-corner,.spcMenu__spacesList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.spcMenu__spacesList:focus{outline:none}.spcMenu__spacesList[tabindex='0']:focus:focus-visible{outline-style:auto}.spcMenu__searchFieldWrapper{padding:12px}.spcMenu__manageButton{margin:12px;width:calc(100% - 24px)}.spcMenu__item{margin-left:12px}\n",""]),e.exports=t},50:function(e,t,s){var a=s(34),n=s(51);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},51:function(e,t,s){(t=s(35)(!1)).push([e.i,".spcMenu{max-width:240px}.spcMenu__spacesList{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:320px}.spcMenu__spacesList::-webkit-scrollbar{width:16px;height:16px}.spcMenu__spacesList::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.spcMenu__spacesList::-webkit-scrollbar-corner,.spcMenu__spacesList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.spcMenu__spacesList:focus{outline:none}.spcMenu__spacesList[tabindex='0']:focus:focus-visible{outline-style:auto}.spcMenu__searchFieldWrapper{padding:12px}.spcMenu__manageButton{margin:12px;width:calc(100% - 24px)}.spcMenu__item{margin-left:12px}\n",""]),e.exports=t}}]);