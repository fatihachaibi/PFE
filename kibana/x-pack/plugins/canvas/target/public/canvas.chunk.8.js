/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[8],{176:function(e,n,t){e.exports=t(12)(4)},178:function(e,n,t){e.exports=t(12)(18)},179:function(e,n,t){e.exports=t(12)(2564)},183:function(e,n,t){"use strict";function r(e,n,t,u){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,r.prototype),o.expected=n,o.found=t,o.location=u,o.name="SyntaxError",o}function u(e,n,t){return t=t||" ",e.length>n?e:(n-=e.length,e+(t+=t.repeat(n)).slice(0,n))}!function(e,n){function t(){this.constructor=e}t.prototype=n.prototype,e.prototype=new t}(r,Error),r.prototype.format=function(e){var n="Error: "+this.message;if(this.location){var t,r=null;for(t=0;t<e.length;t++)if(e[t].source===this.location.source){r=e[t].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,i=this.location.source+":"+o.line+":"+o.column;if(r){var a=this.location.end,s=u("",o.line.toString().length),c=r[o.line-1],l=o.line===a.line?a.column:c.length+1;n+="\n --\x3e "+i+"\n"+s+" |\n"+o.line+" | "+c+"\n"+s+" | "+u("",o.column-1)+u("",l-o.column,"^")}else n+="\n at "+i}return n},r.buildMessage=function(e,n){var t={literal:function(e){return'"'+u(e.text)+'"'},class:function(e){var n=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function u(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return t[e.type](e)}return"Expected "+function(e){var n,t,r=e.map(i);if(r.sort(),r.length>0){for(n=1,t=1;n<r.length;n++)r[n-1]!==r[n]&&(r[t]=r[n],t++);r.length=t}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+u(e)+'"':"end of input"}(n)+" found."},e.exports={SyntaxError:r,parse:function(e,n){var t,u={},o=(n=void 0!==n?n:{}).grammarSource,i={start:fe,Literal:Ce},a=fe,s='"',c="\\",l="@kuery-cursor@",f=/^[\\"]/,d=/^[^"]/,p=/^[\\():<>"*{}]/,v=/^[0-9a-f]/i,h=/^[ \t\r\n\xA0]/,g=oe("(",!1),m=oe(")",!1),y=oe(":",!1),b=oe("{",!1),w=oe("}",!1),A=ae("fieldName"),x=ae("value"),E=ae("OR"),C=oe("or",!0),T=ae("AND"),j=oe("and",!0),S=ae("NOT"),_=oe("not",!0),N=ae("literal"),O=oe('"',!1),L=oe("\\",!1),Q=ie(["\\",'"'],!1,!1),q=ie(['"'],!0,!1),P={type:"any"},R=oe("*",!1),F=oe("\\t",!1),I=oe("\\r",!1),$=oe("\\n",!1),k=ie(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),U=oe("u",!1),M=ie([["0","9"],["a","f"]],!1,!0),B=oe("<=",!1),W=oe(">=",!1),G=oe("<",!1),Z=oe(">",!1),z=ae("whitespace"),H=ie([" ","\t","\r","\n","Â "],!1,!1),V=oe("@kuery-cursor@",!1),K=function(e,n){return n},D=function(e,n){return n},X=function(){return Fe},Y=function(n,t,r){const{start:u,end:o}=ce(ee,J);return{type:"cursor",start:u.offset,end:o.offset-t.length,prefix:n.join(""),suffix:r.join(""),text:e.substring(ee,J).replace(t,"")}},J=0,ee=0,ne=[{line:1,column:1}],te=0,re=[],ue=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=i[n.startRule]}function oe(e,n){return{type:"literal",text:e,ignoreCase:n}}function ie(e,n,t){return{type:"class",parts:e,inverted:n,ignoreCase:t}}function ae(e){return{type:"other",description:e}}function se(n){var t,r=ne[n];if(r)return r;for(t=n-1;!ne[t];)t--;for(r={line:(r=ne[t]).line,column:r.column};t<n;)10===e.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return ne[n]=r,r}function ce(e,n){var t=se(e),r=se(n);return{source:o,start:{offset:e,line:t.line,column:t.column},end:{offset:n,line:r.line,column:r.column}}}function le(e){J<te||(J>te&&(te=J,re=[]),re.push(e))}function fe(){var e,n,t,r,o,i;for(e=J,n=[],t=Pe();t!==u;)n.push(t),t=Pe();return(t=de())===u&&(t=null),(r=Ne())!==u?(ee=e,o=t,e="cursor"===(i=r).type?{...i,suggestionTypes:["conjunction"]}:null!==o?o:ke.function.buildNode("is","*","*")):(J=e,e=u),e}function de(){var e,n,t,r,o;if(e=J,(n=pe())!==u){if(t=[],r=J,Ae()!==u&&(o=pe())!==u?(ee=r,r=K(0,o)):(J=r,r=u),r!==u)for(;r!==u;)t.push(r),r=J,Ae()!==u&&(o=pe())!==u?(ee=r,r=K(0,o)):(J=r,r=u);else t=u;t!==u?(ee=e,e=function(e,n){const t=[e,...n];return Fe&&t.find((e=>"cursor"===e.type))||Ue("or",t)}(n,t)):(J=e,e=u)}else J=e,e=u;return e===u&&(e=pe()),e}function pe(){var e,n,t,r,o;if(e=J,(n=ve())!==u){if(t=[],r=J,xe()!==u&&(o=ve())!==u?(ee=r,r=K(0,o)):(J=r,r=u),r!==u)for(;r!==u;)t.push(r),r=J,xe()!==u&&(o=ve())!==u?(ee=r,r=K(0,o)):(J=r,r=u);else t=u;t!==u?(ee=e,e=function(e,n){const t=[e,...n];return Fe&&t.find((e=>"cursor"===e.type))||Ue("and",t)}(n,t)):(J=e,e=u)}else J=e,e=u;return e===u&&(e=ve()),e}function ve(){var e,n,t;return e=J,Ee()!==u&&(n=he())!==u?(ee=e,e="cursor"===(t=n).type?t:Ue("not",[t])):(J=e,e=u),e===u&&(e=he()),e}function he(){var n,t,r,o,i,a,s,c;if(n=J,40===e.charCodeAt(J)?(t="(",J++):(t=u,0===ue&&le(g)),t!==u){for(r=[],o=Pe();o!==u;)r.push(o),o=Pe();(o=de())!==u&&(i=Ne())!==u?(41===e.charCodeAt(J)?(a=")",J++):(a=u,0===ue&&le(m)),a!==u?(ee=n,s=o,n="cursor"===(c=i).type?{...c,suggestionTypes:["conjunction"]}:s):(J=n,n=u)):(J=n,n=u)}else J=n,n=u;return n===u&&(n=function(){var n,t,r,o,i,a,s,c,l,f;if(n=J,(t=ge())!==u){for(r=[],o=Pe();o!==u;)r.push(o),o=Pe();if(58===e.charCodeAt(J)?(o=":",J++):(o=u,0===ue&&le(y)),o!==u){for(i=[],a=Pe();a!==u;)i.push(a),a=Pe();if(123===e.charCodeAt(J)?(a="{",J++):(a=u,0===ue&&le(b)),a!==u){for(s=[],c=Pe();c!==u;)s.push(c),c=Pe();(c=de())!==u&&(l=Ne())!==u?(125===e.charCodeAt(J)?(f="}",J++):(f=u,0===ue&&le(w)),f!==u?(ee=n,n=function(e,n,t){return"cursor"===n.type?{...n,nestedPath:n.nestedPath?`${e.value}.${n.nestedPath}`:e.value}:"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:Ue("nested",[e,n])}(t,c,l)):(J=n,n=u)):(J=n,n=u)}else J=n,n=u}else J=n,n=u}else J=n,n=u;return n===u&&(n=function(){var n;return n=function(){var n,t,r,o,i,a,s,c,l;if(n=J,(t=ge())!==u){for(r=[],o=Pe();o!==u;)r.push(o),o=Pe();if(o=function(){var n,t;return n=J,"<="===e.substr(J,2)?(t="<=",J+=2):(t=u,0===ue&&le(B)),t!==u&&(ee=n,t="lte"),(n=t)===u&&(n=J,">="===e.substr(J,2)?(t=">=",J+=2):(t=u,0===ue&&le(W)),t!==u&&(ee=n,t="gte"),(n=t)===u&&(n=J,60===e.charCodeAt(J)?(t="<",J++):(t=u,0===ue&&le(G)),t!==u&&(ee=n,t="lt"),(n=t)===u&&(n=J,62===e.charCodeAt(J)?(t=">",J++):(t=u,0===ue&&le(Z)),t!==u&&(ee=n,t="gt"),n=t))),n}(),o!==u){for(i=[],a=Pe();a!==u;)i.push(a),a=Pe();(a=Ce())!==u?(ee=n,s=t,c=o,n="cursor"===(l=a).type?{...l,suggestionTypes:["conjunction"]}:Ue("range",[s,c,l])):(J=n,n=u)}else J=n,n=u}else J=n,n=u;return n}(),n===u&&(n=function(){var n,t,r,o,i,a,s,c;if(n=J,(t=ge())!==u){for(r=[],o=Pe();o!==u;)r.push(o),o=Pe();if(58===e.charCodeAt(J)?(o=":",J++):(o=u,0===ue&&le(y)),o!==u){for(i=[],a=Pe();a!==u;)i.push(a),a=Pe();(a=me())!==u?(ee=n,s=t,n="cursor"===(c=a).type?{...c,fieldName:s.value,suggestionTypes:["value","conjunction"]}:c(s)):(J=n,n=u)}else J=n,n=u}else J=n,n=u;return n}(),n===u&&(n=function(){var e,n;return e=J,(n=we())!==u&&(ee=e,n=function(e){if("cursor"===e.type){const n=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:n,suggestionTypes:["field","operator","conjunction"]}}return e(Me(null))}(n)),n}())),n}()),n}()),n}function ge(){var e;return ue++,e=Ce(),ue--,e===u&&0===ue&&le(A),e}function me(){var n,t,r,o,i,a,s,c;if(n=J,40===e.charCodeAt(J)?(t="(",J++):(t=u,0===ue&&le(g)),t!==u){for(r=[],o=Pe();o!==u;)r.push(o),o=Pe();o=function(){var e,n,t,r,o;if(e=J,(n=ye())!==u){if(t=[],r=J,Ae()!==u&&(o=ye())!==u?(ee=r,r=D(0,o)):(J=r,r=u),r!==u)for(;r!==u;)t.push(r),r=J,Ae()!==u&&(o=ye())!==u?(ee=r,r=D(0,o)):(J=r,r=u);else t=u;t!==u?(ee=e,e=function(e,n){const t=[e,...n],r=Fe&&t.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("or",t.map((n=>n(e))))}(n,t)):(J=e,e=u)}else J=e,e=u;return e===u&&(e=ye()),e}(),o!==u&&(i=Ne())!==u?(41===e.charCodeAt(J)?(a=")",J++):(a=u,0===ue&&le(m)),a!==u?(ee=n,s=o,n="cursor"===(c=i).type?{...c,suggestionTypes:["conjunction"]}:s):(J=n,n=u)):(J=n,n=u)}else J=n,n=u;return n===u&&(n=we()),n}function ye(){var e,n,t,r,o;if(e=J,(n=be())!==u){if(t=[],r=J,xe()!==u&&(o=be())!==u?(ee=r,r=D(0,o)):(J=r,r=u),r!==u)for(;r!==u;)t.push(r),r=J,xe()!==u&&(o=be())!==u?(ee=r,r=D(0,o)):(J=r,r=u);else t=u;t!==u?(ee=e,e=function(e,n){const t=[e,...n],r=Fe&&t.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("and",t.map((n=>n(e))))}(n,t)):(J=e,e=u)}else J=e,e=u;return e===u&&(e=be()),e}function be(){var e,n,t;return e=J,Ee()!==u&&(n=me())!==u?(ee=e,e="cursor"===(t=n).type?{...list,suggestionTypes:["value"]}:e=>Ue("not",[t(e)])):(J=e,e=u),e===u&&(e=me()),e}function we(){var e,n;return ue++,e=J,(n=Te())!==u&&(ee=e,n=function(e){if("cursor"===e.type)return e;const n=Me(!0);return t=>Ue("is",[t,e,n])}(n)),(e=n)===u&&(e=J,(n=Se())!==u&&(ee=e,n=function(e){if("cursor"===e.type)return e;!$e&&"wildcard"===e.type&&ke.wildcard.hasLeadingWildcard(e)&&function(e,n){throw function(e,n){return new r("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,n)}(0,n=void 0!==n?n:ce(ee,J))}();const n=Me(!1);return t=>Ue("is",[t,e,n])}(n)),e=n),ue--,e===u&&(n=u,0===ue&&le(x)),e}function Ae(){var n,t,r,o,i;if(ue++,n=J,t=[],(r=Pe())!==u)for(;r!==u;)t.push(r),r=Pe();else t=u;if(t!==u)if("or"===e.substr(J,2).toLowerCase()?(r=e.substr(J,2),J+=2):(r=u,0===ue&&le(C)),r!==u){if(o=[],(i=Pe())!==u)for(;i!==u;)o.push(i),i=Pe();else o=u;o!==u?n=t=[t,r,o]:(J=n,n=u)}else J=n,n=u;else J=n,n=u;return ue--,n===u&&(t=u,0===ue&&le(E)),n}function xe(){var n,t,r,o,i;if(ue++,n=J,t=[],(r=Pe())!==u)for(;r!==u;)t.push(r),r=Pe();else t=u;if(t!==u)if("and"===e.substr(J,3).toLowerCase()?(r=e.substr(J,3),J+=3):(r=u,0===ue&&le(j)),r!==u){if(o=[],(i=Pe())!==u)for(;i!==u;)o.push(i),i=Pe();else o=u;o!==u?n=t=[t,r,o]:(J=n,n=u)}else J=n,n=u;else J=n,n=u;return ue--,n===u&&(t=u,0===ue&&le(T)),n}function Ee(){var n,t,r,o;if(ue++,n=J,"not"===e.substr(J,3).toLowerCase()?(t=e.substr(J,3),J+=3):(t=u,0===ue&&le(_)),t!==u){if(r=[],(o=Pe())!==u)for(;o!==u;)r.push(o),o=Pe();else r=u;r!==u?n=t=[t,r]:(J=n,n=u)}else J=n,n=u;return ue--,n===u&&(t=u,0===ue&&le(S)),n}function Ce(){var e;return ue++,(e=Te())===u&&(e=Se()),ue--,e===u&&0===ue&&le(N),e}function Te(){var n,t,r,o,i,a,c;if(n=J,ee=J,(t=(t=X())?void 0:u)!==u)if(34===e.charCodeAt(J)?(r=s,J++):(r=u,0===ue&&le(O)),r!==u){for(o=[],i=je();i!==u;)o.push(i),i=je();if((i=Re())!==u){for(a=[],c=je();c!==u;)a.push(c),c=je();34===e.charCodeAt(J)?(c=s,J++):(c=u,0===ue&&le(O)),c!==u?(ee=n,n=Y(o,i,a)):(J=n,n=u)}else J=n,n=u}else J=n,n=u;else J=n,n=u;if(n===u)if(n=J,34===e.charCodeAt(J)?(t=s,J++):(t=u,0===ue&&le(O)),t!==u){for(r=[],o=je();o!==u;)r.push(o),o=je();34===e.charCodeAt(J)?(o=s,J++):(o=u,0===ue&&le(O)),o!==u?(ee=n,n=Me(r.join(""))):(J=n,n=u)}else J=n,n=u;return n}function je(){var n,t,r;return(n=Oe())===u&&(n=Qe())===u&&(n=J,92===e.charCodeAt(J)?(t=c,J++):(t=u,0===ue&&le(L)),t!==u?(f.test(e.charAt(J))?(r=e.charAt(J),J++):(r=u,0===ue&&le(Q)),r!==u?(ee=n,n=r):(J=n,n=u)):(J=n,n=u),n===u&&(n=J,t=J,ue++,r=Re(),ue--,r===u?t=void 0:(J=t,t=u),t!==u?(d.test(e.charAt(J))?(r=e.charAt(J),J++):(r=u,0===ue&&le(q)),r!==u?(ee=n,n=r):(J=n,n=u)):(J=n,n=u))),n}function Se(){var e,n,t,r,o,i;if(e=J,ee=J,(n=(n=X())?void 0:u)!==u){for(t=[],r=_e();r!==u;)t.push(r),r=_e();if((r=Re())!==u){for(o=[],i=_e();i!==u;)o.push(i),i=_e();ee=e,e=Y(t,r,o)}else J=e,e=u}else J=e,e=u;if(e===u){if(e=J,n=[],(t=_e())!==u)for(;t!==u;)n.push(t),t=_e();else n=u;n!==u&&(ee=e,n=function(e){const n=e.join("").trim();return"null"===n?Me(null):"true"===n?Me(!0):"false"===n?Me(!1):e.includes(We)?Be(n):Me(n)}(n)),e=n}return e}function _e(){var n,t,r,o,i;return(n=Oe())===u&&(n=function(){var n,t,r;return n=J,92===e.charCodeAt(J)?(t=c,J++):(t=u,0===ue&&le(L)),t!==u&&(r=Le())!==u?(ee=n,n=r):(J=n,n=u),n}(),n===u&&(n=Qe())===u&&(n=function(){var n,t,r;return n=J,92===e.charCodeAt(J)?(t=c,J++):(t=u,0===ue&&le(L)),t!==u?("or"===e.substr(J,2).toLowerCase()?(r=e.substr(J,2),J+=2):(r=u,0===ue&&le(C)),r===u&&("and"===e.substr(J,3).toLowerCase()?(r=e.substr(J,3),J+=3):(r=u,0===ue&&le(j)),r===u&&("not"===e.substr(J,3).toLowerCase()?(r=e.substr(J,3),J+=3):(r=u,0===ue&&le(_)))),r!==u?(ee=n,n=r):(J=n,n=u)):(J=n,n=u),n}(),n===u&&(n=function(){var n,t;return n=J,42===e.charCodeAt(J)?(t="*",J++):(t=u,0===ue&&le(R)),t!==u&&(ee=n,t=We),t}(),n===u&&(n=J,t=J,ue++,r=Le(),ue--,r===u?t=void 0:(J=t,t=u),t!==u?(r=J,ue++,o=function(){var e;return(e=Ae())===u&&(e=xe())===u&&(e=Ee()),e}(),ue--,o===u?r=void 0:(J=r,r=u),r!==u?(o=J,ue++,i=Re(),ue--,i===u?o=void 0:(J=o,o=u),o!==u?(e.length>J?(i=e.charAt(J),J++):(i=u,0===ue&&le(P)),i!==u?(ee=n,n=i):(J=n,n=u)):(J=n,n=u)):(J=n,n=u)):(J=n,n=u))))),n}function Ne(){var e,n,t,r,o,i;if(e=J,ee=J,(n=(n=X())?void 0:u)!==u){for(t=[],r=Pe();r!==u;)t.push(r),r=Pe();if((r=Re())!==u){for(o=[],i=Pe();i!==u;)o.push(i),i=Pe();ee=e,e=Y(t,r,o)}else J=e,e=u}else J=e,e=u;if(e===u)for(e=[],n=Pe();n!==u;)e.push(n),n=Pe();return e}function Oe(){var n,t;return n=J,"\\t"===e.substr(J,2)?(t="\\t",J+=2):(t=u,0===ue&&le(F)),t!==u&&(ee=n,t="\t"),(n=t)===u&&(n=J,"\\r"===e.substr(J,2)?(t="\\r",J+=2):(t=u,0===ue&&le(I)),t!==u&&(ee=n,t="\r"),(n=t)===u&&(n=J,"\\n"===e.substr(J,2)?(t="\\n",J+=2):(t=u,0===ue&&le($)),t!==u&&(ee=n,t="\n"),n=t)),n}function Le(){var n;return p.test(e.charAt(J))?(n=e.charAt(J),J++):(n=u,0===ue&&le(k)),n}function Qe(){var n,t,r;return n=J,92===e.charCodeAt(J)?(t=c,J++):(t=u,0===ue&&le(L)),t!==u?(r=function(){var n,t,r,o,i,a,s,c,l;return n=J,117===e.charCodeAt(J)?(t="u",J++):(t=u,0===ue&&le(U)),t!==u?(r=J,o=J,(i=qe())!==u&&(a=qe())!==u&&(s=qe())!==u&&(c=qe())!==u?o=i=[i,a,s,c]:(J=o,o=u),(r=o!==u?e.substring(r,J):o)!==u?(ee=n,l=r,n=String.fromCharCode(parseInt(l,16))):(J=n,n=u)):(J=n,n=u),n}(),r!==u?(ee=n,n=r):(J=n,n=u)):(J=n,n=u),n}function qe(){var n;return v.test(e.charAt(J))?(n=e.charAt(J),J++):(n=u,0===ue&&le(M)),n}function Pe(){var n;return ue++,h.test(e.charAt(J))?(n=e.charAt(J),J++):(n=u,0===ue&&le(H)),ue--,n===u&&0===ue&&le(z),n}function Re(){var n,t;return n=J,ee=J,(X()?void 0:u)!==u?(e.substr(J,14)===l?(t=l,J+=14):(t=u,0===ue&&le(V)),t!==u?(ee=n,n=Ie):(J=n,n=u)):(J=n,n=u),n}const{parseCursor:Fe,cursorSymbol:Ie,allowLeadingWildcards:$e=!0,helpers:{nodeTypes:ke}}=n,Ue=ke.function.buildNodeWithArgumentNodes,Me=ke.literal.buildNode,Be=ke.wildcard.buildNode,{wildcardSymbol:We}=ke.wildcard;if((t=a())!==u&&J===e.length)return t;throw t!==u&&J<e.length&&le({type:"end"}),Ge=re,Ze=te<e.length?e.charAt(te):null,ze=te<e.length?ce(te,te+1):ce(te,te),new r(r.buildMessage(Ge,Ze),Ge,Ze,ze);var Ge,Ze,ze}}},274:function(e,n,t){e.exports=t(12)(2572)},97:function(e,n,t){"use strict";t.d(n,"b",(function(){return Ee})),t.d(n,"a",(function(){return Ce}));var r={};t.r(r),t.d(r,"buildNode",(function(){return Q})),t.d(r,"toElasticsearchQuery",(function(){return q}));var u={};t.r(u),t.d(u,"wildcardSymbol",(function(){return P})),t.d(u,"buildNode",(function(){return I})),t.d(u,"test",(function(){return $})),t.d(u,"toElasticsearchQuery",(function(){return k})),t.d(u,"toQueryStringQuery",(function(){return U})),t.d(u,"hasLeadingWildcard",(function(){return M}));var o={};t.r(o),t.d(o,"buildNodeParams",(function(){return V})),t.d(o,"toElasticsearchQuery",(function(){return K}));var i={};t.r(i),t.d(i,"buildNodeParams",(function(){return D})),t.d(i,"toElasticsearchQuery",(function(){return X}));var a={};t.r(a),t.d(a,"buildNodeParams",(function(){return Y})),t.d(a,"toElasticsearchQuery",(function(){return J}));var s={};t.r(s),t.d(s,"buildNodeParams",(function(){return ee})),t.d(s,"toElasticsearchQuery",(function(){return ne}));var c={};t.r(c),t.d(c,"buildNodeParams",(function(){return te})),t.d(c,"toElasticsearchQuery",(function(){return re}));var l={};t.r(l),t.d(l,"buildNodeParams",(function(){return ue})),t.d(l,"toElasticsearchQuery",(function(){return oe}));var f={};t.r(f),t.d(f,"buildNodeParams",(function(){return ie})),t.d(f,"toElasticsearchQuery",(function(){return ae}));var d={};t.r(d),t.d(d,"buildNode",(function(){return ce})),t.d(d,"buildNodeWithArgumentNodes",(function(){return le})),t.d(d,"toElasticsearchQuery",(function(){return fe}));var p,v,h=t(1),g=t.n(h),m=t(71),y=t.n(m),b=t(19),w=t.n(b),A=(t(87),function(e,n){if("boolean"!=typeof n&&"boolean"===e.type){if([1,"true"].includes(n))return!0;if([0,"false"].includes(n))return!1;throw new Error("".concat(n," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof n&&"number"===e.type?Number(n):n}),x=function(e,n){var t=A(e,n);return{script:{source:E(e),lang:e.lang,params:{value:t}}}},E=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(v||(v={}));var C={gt:">",gte:">=",lte:"<=",lt:"<"},T={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},j={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},S=function(e,n){var t=Object(b.mapValues)(Object(b.pickBy)(n,(function(e,n){return n in C})),(function(n){return"number"===e.type&&"string"==typeof n?parseFloat(n):n})),r=Object(b.map)(t,(function(n,t){return"("+e.script+")"+Object(b.get)(C,t)+t})).join(" && ");if("painless"===e.lang){var u="date"===e.type?j:T,o=Object(b.reduce)(t,(function(e,n,t){return e.concat(Object(b.get)(u,t))}),[]).join(" "),i=Object(b.map)(t,(function(n,t){return"".concat(t,"(() -> { ").concat(e.script," }, params.").concat(t,")")})).join(" && ");r="".concat(o).concat(i)}return{script:{source:r,params:t,lang:e.lang}}},_=t(100),N=t.n(_),O=t(88),L=t.n(O);function Q(e){return{type:"literal",value:e}}function q(e){return e.value}var P="@kuery-wildcard@";function R(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function I(e){return e.includes(P)?{type:"wildcard",value:e}:ge(e)}function $(e,n){var t=e.value.split(P).map(R).join("[\\s\\S]*");return new RegExp("^".concat(t,"$")).test(n)}function k(e){return e.value.split(P).join("*")}function U(e){return e.value.split(P).map(F).join("*")}function M(e){var n=e.value;return n.startsWith(P)&&n.replace(P,"").length>0}function B(e,n){if(!n)return[];if("literal"===e.type){var t=q(e),r=n.fields.find((function(e){return e.name===t}));return r?[r]:[]}return"wildcard"===e.type?n.fields.filter((function(n){return $(e,n.name)})):void 0}var W=t(34),G=t.n(W);function Z(e){var n=G.a.tz.guess();return"Browser"===e?n:e}function z(e){return function(e){var n,t=null==e?void 0:e.subType;return!(null==t||null===(n=t.nested)||void 0===n||!n.path)}(e)?e.subType:void 0}function H(e,n,t){var r=y()(y()({},e),{},{value:t?"".concat(t,".").concat(e.value):e.value});if(!n||"wildcard"===r.type&&!t)return r;var u=B(r,n).reduce((function(e,n){var r=z(n),u=null==r?void 0:r.nested.path;return t&&!u?[].concat(N()(e),["".concat(n.name,' is not a nested field but is in nested group "').concat(t,'" in the KQL expression.')]):u&&!t?[].concat(N()(e),["".concat(n.name," is a nested field, but is not in a nested group in the KQL expression.")]):u!==t?[].concat(N()(e),["Nested field ".concat(n.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(u.length>0)throw new Error(u.join("\n"));return r}function V(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(b.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(b.isUndefined)(n))throw new Error("value is a required argument");var r="string"==typeof e?ge(e):Q(e),u="string"==typeof n?ge(n):Q(n),o=Q(t);return{arguments:[r,u,o]}}function K(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=L()(e.arguments,3),o=u[0],i=u[1],a=u[2],s="wildcard"===i.type&&i.value===P,c="wildcard"===o.type&&o.value===P,l=s&&c;if(l)return{match_all:{}};var f=H(o,n,null!=r&&r.nested?r.nested.path:void 0),d=Object(b.isUndefined)(i)?i:me(i),p=a.value?"phrase":"best_fields";if(null===f.value)return"wildcard"===i.type?{query_string:{query:U(i)}}:{multi_match:{type:p,query:d,lenient:!0}};var v=n?B(f,n):[];if(v&&0===v.length&&v.push({name:me(f),scripted:!1,type:""}),s&&(null==v||!v.length||(null==v?void 0:v.length)===(null==n?void 0:n.fields.length)))return{match_all:{}};var h=v.reduce((function(e,n){var u=function(e){var t=z(n);return"wildcard"!==f.type||null==t||!t.nested||null!=r&&r.nested?e:{nested:{path:t.nested.path,query:e,score_mode:"none"}}};if(!n.scripted){if(s)return[].concat(N()(e),[u({exists:{field:n.name}})]);if("wildcard"===i.type)return[].concat(N()(e),[u({query_string:{fields:[n.name],query:U(i)}})]);if("date"===n.type){var o=t.dateFormatTZ?{time_zone:Z(t.dateFormatTZ)}:{};return[].concat(N()(e),[u({range:g()({},n.name,y()({gte:d,lte:d},o))})])}var a="phrase"===p?"match_phrase":"match";return[].concat(N()(e),[u(g()({},a,g()({},n.name,d)))])}if(!s)return[].concat(N()(e),[{script:y()({},x(n,d))}])}),[]);return{bool:{should:h||[],minimum_should_match:1}}}function D(e){return{arguments:e}}function X(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=t.filtersInMustClause,o=e.arguments||[],i=u?"must":"filter";return{bool:g()({},i,o.map((function(e){return me(e,n,t,r)})))}}function Y(e){return{arguments:e}}function J(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.arguments||[];return{bool:{should:u.map((function(e){return me(e,n,t,r)})),minimum_should_match:1}}}function ee(e){return{arguments:[e]}}function ne(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=L()(e.arguments,1),o=u[0];return{bool:{must_not:me(o,n,t,r)}}}function te(e,n,t){return{arguments:[ge(e),n,de.literal.buildNode(t)]}}function re(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=L()(e.arguments,3),o=u[0],i=u[1],a=u[2],s=H(o,n,null!=r&&r.nested?r.nested.path:void 0),c=n?B(s,n):[];c&&0===c.length&&c.push({name:me(s),scripted:!1,type:""});var l=c.map((function(e){var n=function(n){var t=z(e);return"wildcard"!==s.type||null==t||!t.nested||r.nested?n:{nested:{path:t.nested.path,query:n,score_mode:"none"}}},u=g()({},i,me(a));if(e.scripted)return{script:S(e,u)};if("date"===e.type){var o=t.dateFormatTZ?{time_zone:Z(t.dateFormatTZ)}:{};return n({range:g()({},e.name,y()(y()({},u),o))})}return n({range:g()({},e.name,u)})}));return{bool:{should:l,minimum_should_match:1}}}function ue(e){return{arguments:[Q(e)]}}function oe(e,n){var t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=L()(e.arguments,1),o=u[0],i=y()(y()({},o),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(o.value):o.value}),a=q(i),s=null==n||null===(t=n.fields)||void 0===t?void 0:t.find((function(e){return e.name===a}));if(null!=s&&s.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:a}}}function ie(e,n){return{arguments:["string"==typeof e?ge(e):Q(e),n]}}function ae(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=L()(e.arguments,2),i=o[0],a=o[1],s=me(i),c=null!=u&&null!==(t=u.nested)&&void 0!==t&&t.path?"".concat(u.nested.path,".").concat(s):s;return{nested:{path:c,query:me(a,n,r,y()(y()({},u),{},{nested:{path:c}})),score_mode:"none"}}}var se={is:o,and:i,or:a,not:s,range:c,exists:l,nested:f};function ce(e){var n=se[e];if(w.a.isUndefined(n))throw new Error('Unknown function "'.concat(e,'"'));for(var t=arguments.length,r=new Array(t>1?t-1:0),u=1;u<t;u++)r[u-1]=arguments[u];return y()({type:"function",function:e},n.buildNodeParams.apply(n,r))}function le(e,n){if(w.a.isUndefined(se[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:n}}function fe(e,n,t,r){return se[e.function].toElasticsearchQuery(e,n,t,r)}var de={function:d,literal:r,wildcard:u},pe=(t(133),t(132),t(176),t(178),t(179),t(274),t(3)),ve=(pe.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),pe.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),pe.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),pe.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),pe.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"}),Error,t(183)),he=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return t(e,y()(y()({},n),{},{helpers:{nodeTypes:de}}))},ge=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return he(e,y()(y()({},n),{},{startRule:"Literal"}),ve.parse)},me=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!n||!n.type||!de[n.type])return e(de.function.buildNode("and",[]),t);var o=de[n.type];return o.toElasticsearchQuery(n,t,r,u)};Object(b.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var ye=t(28),be=t.n(ye),we=t(244);const Ae=(e,n=!1)=>{if(!e)return null;const t=be.a.parse(e,{roundUp:n});return t&&t.isValid()?t.valueOf():null};function xe(e){const n=e.filter((e=>void 0!==e.filterType&&"time"===e.filterType&&void 0!==e.from&&void 0!==e.to)).filter((e=>null!==Ae(e.from)&&null!==Ae(e.to,!0))),t=Object(b.minBy)(n,(e=>Ae(e.from))),r=Object(b.maxBy)(n,(e=>Ae(e.to,!0)));return null!=t&&t.from&&null!=r&&r.to?{from:t.from,to:r.to}:void 0}function Ee(e){const n=e.map((e=>({...e,type:e.filterType})));return Object(we.a)(n).map(((e,n)=>{const{group:t,...r}=e;return function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{query:e,meta:y()({index:n,alias:t},r)}}(r,n.toString(),"",{group:t})}))}function Ce(e){return{timeRange:xe(e),filters:Ee(e)}}}}]);