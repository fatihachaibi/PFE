/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[2],Array(34).concat([function(e,t,s){"use strict";var a,i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),n=[];function r(e){for(var t=-1,s=0;s<n.length;s++)if(n[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},a=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=r(u),g={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(n[d].references++,n[d].updater(g)):n.push({identifier:u,updater:j(g,t),references:1}),a.push(u)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,s,a){var i=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var n=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function g(e,t,s){var a=s.css,i=s.media,n=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var m=null,p=0;function j(e,t){var s,a,i;if(t.singleton){var n=p++;s=m||(m=l(t)),a=d.bind(null,s,n,!1),i=d.bind(null,s,n,!0)}else s=l(t),a=g.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var s=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var i=r(s[a]);n[i].references--}for(var l=o(e,t),c=0;c<s.length;c++){var u=r(s[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}s=l}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,a,i,n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(i," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(l).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},,,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i="_NP_";function n(e){return function(){return a.useContext(e)}}t.default=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var o=a.createContext(i),l=function(t){var i=e(t),n=s[0],r=n&&n(i),l=Array.isArray(r)?a.useMemo((function(){return i}),r):i;return a.createElement(o.Provider,{value:l},t.children)},c=n(o);c.Context=o,c.Provider=l;var u=[];if(s.length){var d=[],g=function(t){for(var i=e(t),n=t.children,r=0;r<d.length;r+=1){var o=d[r],l=s[r];n=a.createElement(o.Provider,{value:l(i)},n)}return n};u.push(g);for(var m=0;m<s.length;m+=1){var p=a.createContext(i);d.push(p),u.push(n(p))}}else u.push(l,n(o));for(var j=0;j<u.length;j+=1)c[j]=u[j];return"function"==typeof Symbol&&Symbol.iterator&&(c[Symbol.iterator]=function(){return u[Symbol.iterator]()}),c}},function(e,t,s){var a,i,n,r,o;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */r=this,o=function(e){var t=!1,s=!1,a=!1,i=!1,n="escape years months weeks days hours minutes seconds milliseconds general".split(" "),r=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function o(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function l(e){for(var t="";e;)t+="0",e-=1;return t}function c(e,t){var s=e+"+"+h(S(t).sort(),(function(e){return e+":"+t[e]})).join(",");return c.cache[s]||(c.cache[s]=Intl.NumberFormat(e,t)),c.cache[s]}function u(e,t,n){var r,o,d,g=t.useToLocaleString,m=t.useGrouping,p=m&&t.grouping.slice(),j=t.maximumSignificantDigits,b=t.minimumIntegerDigits||1,x=t.fractionDigits||0,h=t.groupingSeparator,f=t.decimalSeparator;if(g&&n){var O,v={minimumIntegerDigits:b,useGrouping:m};return x&&(v.maximumFractionDigits=x,v.minimumFractionDigits=x),j&&e>0&&(v.maximumSignificantDigits=j),a?(i||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),c(n,v).format(e)):(s||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),e.toLocaleString(n,v))}var E=(j?e.toPrecision(j+1):e.toFixed(x+1)).split("e");d=E[1]||"",o=(E=E[0].split("."))[1]||"";var y=(r=E[0]||"").length,M=o.length,S=y+M,_=r+o;(j&&S===j+1||!j&&M===x+1)&&((_=function(e){for(var t=e.split("").reverse(),s=0,a=!0;a&&s<t.length;)s?"9"===t[s]?t[s]="0":(t[s]=(parseInt(t[s],10)+1).toString(),a=!1):(parseInt(t[s],10)<5&&(a=!1),t[s]="0"),s+=1;return a&&t.push("1"),t.reverse().join("")}(_)).length===S+1&&(y+=1),M&&(_=_.slice(0,-1)),r=_.slice(0,y),o=_.slice(y)),j&&(o=o.replace(/0*$/,""));var T=parseInt(d,10);T>0?o.length<=T?(r+=o+=l(T-o.length),o=""):(r+=o.slice(0,T),o=o.slice(T)):T<0&&(o=l(Math.abs(T)-r.length)+r+o,r="0"),j||((o=o.slice(0,x)).length<x&&(o+=l(x-o.length)),r.length<b&&(r=l(b-r.length)+r));var w,C="";if(m)for(E=r;E.length;)p.length&&(w=p.shift()),C&&(C=h+C),C=E.slice(-w)+C,E=E.slice(0,-w);else C=r;return o&&(C=C+f+o),C}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function g(e,t){var s=[];return x(S(t),(function(a){if("_durationLabels"===a.slice(0,15)){var i=a.slice(15).toLowerCase();x(S(t[a]),(function(n){n.slice(0,1)===e&&s.push({type:i,key:n,label:t[a][n]})}))}})),s}c.cache={};var m={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,s){return 1===t&&null===s?e:e+e}};function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function j(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e,t){var s,a=0,i=e&&e.length||0;for("function"!=typeof t&&(s=t,t=function(e){return e===s});a<i;){if(t(e[a]))return e[a];a+=1}}function x(e,t){var s=0,a=e.length;if(e&&a)for(;s<a;){if(!1===t(e[s],s))return;s+=1}}function h(e,t){var s=0,a=e.length,i=[];if(!e||!a)return i;for(;s<a;)i[s]=t(e[s],s),s+=1;return i}function f(e,t){return h(e,(function(e){return e[t]}))}function O(e){var t=[];return x(e,(function(e){e&&t.push(e)})),t}function v(e){var t=[];return x(e,(function(e){b(t,e)||t.push(e)})),t}function E(e,t){var s=[];return x(e,(function(e){x(t,(function(t){e===t&&s.push(e)}))})),v(s)}function y(e,t){var s=[];return x(e,(function(a,i){if(!t(a))return s=e.slice(i),!1})),s}function M(e,t){return y(e.slice().reverse(),t).reverse()}function k(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function S(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}function _(e,t){var s=0,a=e.length;if(!e||!a)return!1;for(;s<a;){if(!0===t(e[s],s))return!0;s+=1}return!1}function T(e){var t=[];return x(e,(function(e){t=t.concat(e)})),t}function w(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function C(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function I(){var e,t=[].slice.call(arguments),s={};if(x(t,(function(t,a){if(!a){if(!p(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?j(t)&&k(s,t):s.precision=t:s.template=t})),!e||!e.length)return[];s.returnMomentTypes=!0;var a=h(e,(function(e){return e.format(s)})),i=E(n,v(f(T(a),"type"))),r=s.largest;return r&&(i=i.slice(0,r)),s.returnMomentTypes=!1,s.outputTypes=i,h(e,(function(e){return e.format(s)}))}function L(){var s=[].slice.call(arguments),i=k({},this.format.defaults),l=this.asMilliseconds(),c=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(l=0,c=0);var T=l<0,w=e.duration(Math.abs(l),"milliseconds"),C=e.duration(Math.abs(c),"months");x(s,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?j(e)&&k(i,e):i.precision=e:i.template=e}));var I={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},L={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=n;var F=function(e){return b(n,(function(t){return L[t].test(e)}))},P=new RegExp(h(n,(function(e){return L[e].source})).join("|"),"g");i.duration=this;var N="function"==typeof i.template?i.template.apply(i):i.template,D=i.outputTypes,R=i.returnMomentTypes,A=i.largest,z=[];D||(p(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&x(i.stopTrim.match(P),(function(e){var t=F(e);"escape"!==t&&"general"!==t&&z.push(t)})));var B=e.localeData();B||(B={}),x(S(m),(function(e){"function"!=typeof m[e]?B["_"+e]||(B["_"+e]=m[e]):B[e]||(B[e]=m[e])})),x(S(B._durationTimeTemplates),(function(e){N=N.replace("_"+e+"_",B._durationTimeTemplates[e])}));var V=i.userLocale||e.locale(),U=i.useLeftUnits,$=i.usePlural,G=i.precision,q=i.forceLength,H=i.useGrouping,W=i.trunc,K=i.useSignificantDigits&&G>0,J=K?i.precision:0,Y=J,Q=i.minValue,X=!1,Z=i.maxValue,ee=!1,te=i.useToLocaleString,se=i.groupingSeparator,ae=i.decimalSeparator,ie=i.grouping;te=te&&(t||a);var ne=i.trim;p(ne)&&(ne=ne.join(" ")),null===ne&&(A||Z||K)&&(ne="all"),null!==ne&&!0!==ne&&"left"!==ne&&"right"!==ne||(ne="large"),!1===ne&&(ne="");var re=function(e){return e.test(ne)},oe=/large/,le=/small/,ce=/both/,ue=/mid/,de=/^all|[^sm]all/,ge=/final/,me=A>0||_([oe,ce,de],re),pe=_([le,ce,de],re),je=_([ue,de],re),be=_([ge,de],re),xe=h(N.match(P),(function(e,t){var s=F(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==s&&"general"!==s&&z.push(s)),{index:t,length:e.length,text:"",token:"escape"===s?e.replace(L.escape,"$1"):e,type:"escape"===s||"general"===s?null:s}})),he={index:0,length:0,token:"",text:"",type:null},fe=[];U&&xe.reverse(),x(xe,(function(e){if(e.type)return(he.type||he.text)&&fe.push(he),void(he=e);U?he.text=e.token+he.text:he.text+=e.token})),(he.type||he.text)&&fe.push(he),U&&fe.reverse();var Oe=E(n,v(O(f(fe,"type"))));if(!Oe.length)return f(fe,"text").join("");Oe=h(Oe,(function(e,t){var s,a=t+1===Oe.length,n=!t;s="years"===e||"months"===e?C.as(e):w.as(e);var r=Math.floor(s),o=s-r,l=b(fe,(function(t){return e===t.type}));return n&&Z&&s>Z&&(ee=!0),a&&Q&&Math.abs(i.duration.as(e))<Q&&(X=!0),n&&null===q&&l.length>1&&(q=!0),w.subtract(r,e),C.subtract(r,e),{rawValue:s,wholeValue:r,decimalValue:a?o:0,isSmallest:a,isLargest:n,type:e,tokenLength:l.length}}));var ve=W?Math.floor:Math.round,Ee=function(e,t){var s=Math.pow(10,t);return ve(e*s)/s},ye=!1,Me=!1,ke=function(e,t){var s={useGrouping:H,groupingSeparator:se,decimalSeparator:ae,grouping:ie,useToLocaleString:te};return K&&(J<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(s.maximumSignificantDigits=J,e.significantDigits=J)),ee&&!Me&&(e.isLargest?(e.wholeValue=Z,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),X&&!Me&&(e.isSmallest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?G<0?e.value=Ee(e.wholeValue,G):0===G?e.value=ve(e.wholeValue+e.decimalValue):K?(e.value=W?Ee(e.rawValue,J-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(J-=e.wholeValue.toString().length)):(s.fractionDigits=G,e.value=W?e.wholeValue+Ee(e.decimalValue,G):e.wholeValue+e.decimalValue):K&&e.wholeValue?(e.value=Math.round(Ee(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),J-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(q||ye)&&(s.minimumIntegerDigits=e.tokenLength,Me&&s.maximumSignificantDigits<e.tokenLength&&delete s.maximumSignificantDigits),!ye&&(e.value>0||""===ne||b(z,e.type)||b(D,e.type))&&(ye=!0),e.formattedValue=u(e.value,s,V),s.useGrouping=!1,s.decimalSeparator=".",e.formattedValueEn=u(e.value,s,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((Oe=O(Oe=h(Oe,ke))).length>1){var Se=function(e){return b(Oe,(function(t){return t.type===e}))},_e=function(e){var t=Se(e.type);t&&x(e.targets,(function(e){var s=Se(e.type);s&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,s.rawValue+=1,s.wholeValue+=1,s.decimalValue=0,s.formattedValueEn=s.wholeValue.toString(),Me=!0)}))};x(r,_e)}return Me&&(ye=!1,J=Y,Oe=O(Oe=h(Oe,ke))),!D||ee&&!i.trim?(me&&(Oe=y(Oe,(function(e){return!e.isSmallest&&!e.wholeValue&&!b(z,e.type)}))),A&&Oe.length&&(Oe=Oe.slice(0,A)),pe&&Oe.length>1&&(Oe=M(Oe,(function(e){return!e.wholeValue&&!b(z,e.type)&&!e.isLargest}))),je&&(Oe=O(Oe=h(Oe,(function(e,t){return t>0&&t<Oe.length-1&&!e.wholeValue?null:e})))),!be||1!==Oe.length||Oe[0].wholeValue||!W&&Oe[0].isSmallest&&Oe[0].rawValue<Q||(Oe=[])):Oe=O(Oe=h(Oe,(function(e){return b(D,(function(t){return e.type===t}))?e:null}))),R?Oe:(x(fe,(function(e){var t=I[e.type],s=b(Oe,(function(t){return t.type===e.type}));if(t&&s){var a=s.formattedValueEn.split(".");a[0]=parseInt(a[0],10),a[1]?a[1]=parseFloat("0."+a[1],10):a[1]=null;var i=B.durationPluralKey(t,a[0],a[1]),n=g(t,B),r=!1,l={};x(B._durationLabelTypes,(function(t){var s=b(n,(function(e){return e.type===t.type&&e.key===i}));s&&(l[s.type]=s.label,o(e.text,t.string)&&(e.text=e.text.replace(t.string,s.label),r=!0))})),$&&!r&&(n.sort(d),x(n,(function(t){return l[t.type]===t.label?!o(e.text,t.label)&&void 0:o(e.text,t.label)?(e.text=e.text.replace(t.label,l[t.type]),!1):void 0})))}})),(fe=h(fe,(function(e){if(!e.type)return e.text;var t=b(Oe,(function(t){return t.type===e.type}));if(!t)return"";var s="";return U&&(s+=e.text),(T&&ee||!T&&X)&&(s+="< ",ee=!1,X=!1),(T&&X||!T&&ee)&&(s+="> ",ee=!1,X=!1),T&&(t.value>0||""===ne||b(z,t.type)||b(D,t.type))&&(s+="-",T=!1),"milliseconds"===e.type&&t.formattedValueMS?s+=t.formattedValueMS:s+=t.formattedValue,U||(s+=e.text),s}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function F(){var e=this.duration,t=function(t){return e._data[t]},s=b(this.types,t),a=function(e,t){for(var s=e.length;s-=1;)if(t(e[s]))return e[s]}(this.types,t);switch(s){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(s===a)return"d __";case"weeks":return s===a?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(s===a)return"M __";case"years":return s===a?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function P(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=I,e.duration.fn.format=L,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:F,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",m)}var N=function(e,t,s){return e.toLocaleString(t,s)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&C(N),s=t&&w(N);var D=function(e,t,s){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,s).format(e)};return a=C(D),i=a&&w(D),P(e),P},i=[s(18)],void 0===(n="function"==typeof(a=o)?a.apply(t,i):a)||(e.exports=n),r&&(r.momentDurationFormatSetup=r.moment?o(r.moment):o)},function(e,t,s){(function(t){const s="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=s}).call(this,s(105))},function(e,t){const s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:s,MAX_SAFE_COMPONENT_LENGTH:16}},,,,,,,,,function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(54);case"v8light":return s(56)}},function(e,t,s){var a=s(34),i=s(55);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(57);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(59);case"v8light":return s(61)}},function(e,t,s){var a=s(34),i=s(60);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(62);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(64);case"v8light":return s(66)}},function(e,t,s){var a=s(34),i=s(65);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#DFE5EF;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(67);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#343741;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(69);case"v8light":return s(71)}},function(e,t,s){var a=s(34),i=s(70);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(72);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(74);case"v8light":return s(76)}},function(e,t,s){var a=s(34),i=s(75);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(77);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(79);case"v8light":return s(81)}},function(e,t,s){var a=s(34),i=s(80);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(82);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(84);case"v8light":return s(86)}},function(e,t,s){var a=s(34),i=s(85);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#25262E;margin:8px;border:1px solid #535966;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7DDED8}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #F86B63}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #F3D371}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(87);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#F5F7FA;margin:8px;border:1px solid #98A2B3;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #00BFB3}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #BD271E}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #FEC514}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(89);case"v8light":return s(91)}},function(e,t,s){var a=s(34),i=s(90);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(92);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(94);case"v8light":return s(96)}},function(e,t,s){var a=s(34),i=s(95);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#DFE5EF}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#98A2B3}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:1rem;line-height:1.71429rem;color:#98A2B3}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(97);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#69707D}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:1rem;line-height:1.71429rem;color:#69707D}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(99);case"v8light":return s(101)}},function(e,t,s){var a=s(34),i=s(100);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(102);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){const a=s(104);e.exports=(e,t)=>new a(e,t).major},function(e,t,s){const a=s(43),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=s(44),{re:r,t:o}=s(106),l=s(107),{compareIdentifiers:c}=s(108);class SemVer{constructor(e,t){if(t=l(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?r[o.LOOSE]:r[o.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],i=e.prerelease[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const s=this.build[t],i=e.build[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},function(e,t,s){e.exports=s(9)(656)},function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:a}=s(44),i=s(43),n=(t=e.exports={}).re=[],r=t.src=[],o=t.t={};let l=0;const c=(e,t,s)=>{const a=l++;i(a,t),o[e]=a,r[a]=t,n[a]=new RegExp(t,s?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${r[o.NUMERICIDENTIFIER]})\\.(${r[o.NUMERICIDENTIFIER]})\\.(${r[o.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${r[o.NUMERICIDENTIFIERLOOSE]})\\.(${r[o.NUMERICIDENTIFIERLOOSE]})\\.(${r[o.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${r[o.NUMERICIDENTIFIER]}|${r[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${r[o.NUMERICIDENTIFIERLOOSE]}|${r[o.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${r[o.PRERELEASEIDENTIFIER]}(?:\\.${r[o.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${r[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[o.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${r[o.BUILDIDENTIFIER]}(?:\\.${r[o.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${r[o.MAINVERSION]}${r[o.PRERELEASE]}?${r[o.BUILD]}?`),c("FULL",`^${r[o.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${r[o.MAINVERSIONLOOSE]}${r[o.PRERELEASELOOSE]}?${r[o.BUILD]}?`),c("LOOSE",`^${r[o.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${r[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${r[o.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${r[o.XRANGEIDENTIFIER]})(?:\\.(${r[o.XRANGEIDENTIFIER]})(?:\\.(${r[o.XRANGEIDENTIFIER]})(?:${r[o.PRERELEASE]})?${r[o.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${r[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[o.XRANGEIDENTIFIERLOOSE]})(?:${r[o.PRERELEASELOOSE]})?${r[o.BUILD]}?)?)?`),c("XRANGE",`^${r[o.GTLT]}\\s*${r[o.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${r[o.GTLT]}\\s*${r[o.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),c("COERCERTL",r[o.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${r[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${r[o.LONETILDE]}${r[o.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${r[o.LONETILDE]}${r[o.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${r[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${r[o.LONECARET]}${r[o.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${r[o.LONECARET]}${r[o.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${r[o.GTLT]}\\s*(${r[o.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${r[o.GTLT]}\\s*(${r[o.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${r[o.GTLT]}\\s*(${r[o.LOOSEPLAIN]}|${r[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${r[o.XRANGEPLAIN]})\\s+-\\s+(${r[o.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${r[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[o.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(e,t){const s=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:s.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},function(e,t){const s=/^[0-9]+$/,a=(e,t)=>{const a=s.test(e),i=s.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};e.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(110);case"v8light":return s(112)}},function(e,t,s){var a=s(34),i=s(111);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(212,218,229,0.7);font-size:12px;padding:4px;border-radius:6px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:22px;color:rgba(212,218,229,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(113);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(52,55,65,0.7);font-size:12px;padding:4px;border-radius:6px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:22px;color:rgba(52,55,65,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(115);case"v8light":return s(117)}},function(e,t,s){var a=s(34),i=s(116);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(118);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(120);case"v8light":return s(122)}},function(e,t,s){var a=s(34),i=s(121);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#98A2B3}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(123);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#69707D}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(125);case"v8light":return s(127)}},function(e,t,s){var a=s(34),i=s(126);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(128);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(130);case"v8light":return s(132)}},function(e,t,s){var a=s(34),i=s(131);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(133);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(135);case"v8light":return s(137)}},function(e,t,s){var a=s(34),i=s(136);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(138);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(140);case"v8light":return s(142)}},function(e,t,s){var a=s(34),i=s(141);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#1D1E24;align-self:stretch;display:flex;border-bottom:solid 2px #1D1E24}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #343741 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#24252d}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){var a=s(34),i=s(143);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(35)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#fff;align-self:stretch;display:flex;border-bottom:solid 2px #fff}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #D3DAE6 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},,,,,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return lr}));var a=s(5),i=s.n(a),n=s(27),r=s.n(n),o=s(17),l=s(16),c=s(0),u=s(6),d=s(21),g=s(14),m=s.n(g),p=s(28),j=s(41),b=s.n(j),x=s(7),h=s(8),f=s.n(h),O=s(24),v=s(25),E=s(22);class url_state_GlobalState{constructor(e,t,s){f()(this,"stateSyncRef",void 0),f()(this,"stateContainer",void 0),f()(this,"stateStorage",void 0),f()(this,"stateContainerChangeSub",void 0),f()(this,"syncQueryStateWithUrlManager",void 0),f()(this,"timefilterRef",void 0),f()(this,"lastAssignedState",{}),this.timefilterRef=e.timefilter.timefilter;const a=Object(O.createHashHistory)();this.stateStorage=Object(E.createKbnUrlStateStorage)({useHash:!1,history:a,...Object(E.withNotifyOnErrors)(t)});const i=this.stateStorage.get("_g");this.stateContainer=Object(E.createStateContainer)(i,{set:e=>(t,s)=>({...e,[t]:s})}),this.stateSyncRef=Object(E.syncState)({storageKey:"_g",stateContainer:this.stateContainer,stateStorage:this.stateStorage}),this.stateContainerChangeSub=this.stateContainer.state$.subscribe((()=>{this.lastAssignedState=this.getState(),x.a.isInitializated()&&x.a.shims.breadcrumbs.update(),this.syncExternalState(s)})),this.syncQueryStateWithUrlManager=Object(v.syncQueryStateWithUrl)(e,this.stateStorage),this.stateSyncRef.start(),this.lastAssignedState=this.getState()}syncExternalState(e){const t=this.stateContainer.get();for(const s in t)({save:1,time:1,refreshInterval:1,filters:1})[s]||t[s]!==e[s]&&(e[s]=t[s])}setState(e){const t=this.getState(),s={...t,...e};if(e&&(a=s,i=t,JSON.stringify(a)===JSON.stringify(i)))return;var a,i;const n={...s,refreshInterval:this.timefilterRef.getRefreshInterval(),time:this.timefilterRef.getTime()};this.lastAssignedState=n,this.stateContainer.set(n)}getState(){const e={...this.lastAssignedState,...this.stateContainer.get()};delete e.filters;const{refreshInterval:t,time:s,...a}=e;return a||{}}destroy(){this.syncQueryStateWithUrlManager.stop(),this.stateContainerChangeSub.unsubscribe(),this.stateSyncRef.stop()}}var y=s(2);const M=Object(a.createContext)({}),k={pause:!1,value:1e4},S=({uiSettings:e,query:t,toasts:s,children:a})=>{const i={},n=new url_state_GlobalState(t,s,i),r=n.getState();for(const e in r)r.hasOwnProperty(e)&&(i[e]=r[e]);return i.save=()=>{const e={...i};delete e.save,n.setState(e)},((e,t)=>{if(t.isRefreshIntervalTouched()||!e.isDefault(v.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS))return!1;const s=t.getRefreshInterval();return s.pause||0===s.value})(e,x.a.shims.timefilter)&&(i.refreshInterval=k,x.a.shims.timefilter.setRefreshInterval(i.refreshInterval),i.save()),Object(y.jsx)(M.Provider,{value:i},a)},_={from:"now-1h",to:"now",interval:">=10s"},T=b()((()=>{var e,t;const{services:s}=Object(l.useKibana)(),i=Object(a.useContext)(M),n={..._,...null===(e=s.data)||void 0===e?void 0:e.query.timefilter.timefilter.getTime()},{value:r,pause:o}=null===(t=s.data)||void 0===t?void 0:t.query.timefilter.timefilter.getRefreshInterval(),[c,u]=Object(a.useState)(r),[d,g]=Object(a.useState)(o),[m,p]=Object(a.useState)(n),[j,b]=Object(a.useState)(!1),h=Object(a.useCallback)(((e,t)=>{var s;p({...m,from:e,to:t}),i.time={from:e,to:t},x.a.shims.timefilter.setTime(i.time),null===(s=i.save)||void 0===s||s.call(i)}),[m,p,i]);return Object(a.useEffect)((()=>{const e=x.a.shims.timefilter.getTimeUpdate$().subscribe((function(){var e;const t=x.a.shims.timefilter.getTime();p({...m,...t}),i.time={...t},null===(e=i.save)||void 0===e||e.call(i)}));return()=>e.unsubscribe()}),[]),{currentTimerange:m,setTimeRange:p,handleTimeChange:h,setRefreshInterval:u,refreshInterval:c,setIsPaused:g,isPaused:d,setIsDisabled:b,isDisabled:j}})),w=({pageTitle:e,onRefresh:t})=>{const{services:s}=Object(l.useKibana)(),i=s.uiSettings.get(p.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),n=Object(a.useMemo)((()=>i.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s})))),[i]),{currentTimerange:r,handleTimeChange:o,setRefreshInterval:c,refreshInterval:d,setIsPaused:g,isPaused:m,isDisabled:j}=Object(a.useContext)(T.Context),b=Object(a.useContext)(M),h=Object(a.useCallback)((e=>{e.isInvalid||o(e.start,e.end)}),[o]),f=Object(a.useCallback)((({refreshInterval:e,isPaused:t})=>{var s;c(e),g(t),b.refreshInterval={pause:t,value:e},x.a.shims.timefilter.setRefreshInterval(b.refreshInterval),null===(s=b.save)||void 0===s||s.call(b)}),[c,g,b]);return Object(y.jsx)(u.EuiPageHeader,{pageTitle:e,rightSideItems:[Object(y.jsx)(u.EuiSuperDatePicker,{isDisabled:j,start:r.from,end:r.to,onTimeChange:h,onRefresh:t,isPaused:m,refreshInterval:d,onRefreshChange:f,commonlyUsedRanges:n})]})};var C=s(15),I=s(4);let L,F,P;const N={supported:!1,enabled:!1,data:null,callback:null,hideBottomBar:!1},D=()=>N,R=()=>N.callback&&N.callback(),A=async(e,t=!1)=>{const s=await(async(e,t=!1)=>{const s=L.cluster_uuid,a=L.ccs;let i="../api/monitoring/v1/setup/collection";i+=e?`/node/${e}`:!t&&s?`/cluster/${s}`:"/cluster";try{return await F.post(i,{body:JSON.stringify({ccs:a})})}catch(e){throw P(e),e}})(e,t);N.data=s;const a=Object(g.get)(s,"_meta.hasPermissions",!1);if(!a){let e="";return a||(e=c.i18n.translate("xpack.monitoring.setupMode.notAvailablePermissions",{defaultMessage:"You do not have the necessary permissions to do this."})),x.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.setupMode.notAvailableTitle",{defaultMessage:"Setup mode is not available"}),text:e}),z(!1)}if(R(),!L.cluster_uuid){const e=Object(g.get)(s,"_meta.liveClusterUuid"),t=Object.values(Object(g.get)(s,"elasticsearch.byUuid",{})).filter((e=>e.isPartiallyMigrated||e.isFullyMigrated));e&&t.length>0&&(i=e,L.cluster_uuid=i,null===(n=(r=L).save)||void 0===n||n.call(r))}var i,n,r},z=e=>{var t,s;N.enabled=e,L.inSetupMode=e,null===(t=(s=L).save)||void 0===t||t.call(s),R(),e&&A()},B=async(e,t,s,a)=>{L=e,F=t,P=s,a&&(N.callback=a),L.inSetupMode&&z(!0)},V=(e,t=L)=>!1!==(null==e?void 0:e.setupModeSupported)&&(!!N.enabled||t.inSetupMode),U=e=>!(!N.enabled||e===I.d.MetricbeatMigration&&x.a.shims.isCloud),$=()=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataTitle",defaultMessage:"We're looking for your monitoring data"}))),Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),G=()=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffTitle",defaultMessage:"Monitoring is currently off"}))),Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),q=()=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededTitle",defaultMessage:"You need to make some adjustments"}))),Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededDescription",defaultMessage:"To run monitoring please perform the following steps"}))))),H=()=>{const{ELASTIC_WEBSITE_URL:e}=x.a.shims.docLinks;return Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription",defaultMessage:"Configure monitoring through "}),Object(y.jsx)(u.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Elasticsearch Service Console")," ",Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription2",defaultMessage:"Go to "}),Object(y.jsx)(u.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Logs and metrics")," ",Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription3",defaultMessage:"section for a deployment to configure monitoring. For more information visit "}),Object(y.jsx)(u.EuiLink,{href:`${e}guide/en/cloud/current/ec-enable-logging-and-monitoring.html`,target:"_blank"},"the documentation page."))))};function W({checkMessage:e}){const t=e||Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.defaultLoadingMessage",defaultMessage:"Loading, please wait..."});return Object(y.jsx)(a.Fragment,null,Object(y.jsx)($,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiLoadingSpinner,{size:"m"})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},t)))}class collection_enabled_ExplainCollectionEnabled extends i.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.waitedTooLongTimer=null,this.state={waitedTooLong:!1}}componentWillUnmount(){clearInterval(this.waitedTooLongTimer)}handleClick(){const{enabler:e}=this.props;e.enableCollectionEnabled(),this.waitedTooLongTimer=setTimeout((()=>{this.setState({waitedTooLong:!0})}),22e3)}render(){const{reason:e,isCollectionEnabledUpdated:t,isCollectionEnabledUpdating:s}=this.props,{property:i,data:n,context:r}=e,o=this.state.waitedTooLong?Object(y.jsx)("p",null,Object(y.jsx)("a",{href:"#/"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.stillWaitingLinkText",defaultMessage:"Still waiting?"}))):null;return Object(y.jsx)(a.Fragment,null,t?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"l","data-test-subj":"monitoringCollectionEnabledMessage"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnTitle",defaultMessage:"Success! Getting your monitoring data."}))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnDescription",defaultMessage:"When the data is in your cluster, your monitoring dashboard will show up here. This might take a few seconds."}))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiLoadingSpinner,{size:"l"}),Object(y.jsx)(u.EuiSpacer,null),o):(()=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(G,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:r,property:Object(y.jsx)(u.EuiCode,null,i),data:Object(y.jsx)(u.EuiCode,null,n)}})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnItOnDescription",defaultMessage:"Would you like to turn it on?"}))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionEnabled",isLoading:s},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}class collection_interval_ExplainCollectionInterval extends i.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{enabler:e}=this.props;e.enableCollectionInterval()}render(){const{reason:e,isCollectionIntervalUpdated:t,isCollectionIntervalUpdating:s}=this.props,{context:i,property:n,data:r}=e;return Object(y.jsx)(a.Fragment,null,t?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnTitle",defaultMessage:"Success! Wait a moment please."}))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnDescription",defaultMessage:"As soon as monitoring data appears in your cluster the page will automatically refresh with your monitoring dashboard. This only takes only a few seconds."}))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiLoadingSpinner,{size:"l"})):(()=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(G,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionIntervalDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:i,property:Object(y.jsx)(u.EuiCode,null,n),data:Object(y.jsx)(u.EuiCode,null,r)}})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.wrongIntervalValueDescription",defaultMessage:"The collection interval setting needs to be a positive integer (10s is recommended) in order for the collection agents to be active."})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.changeIntervalDescription",defaultMessage:"Would you like us to change it and enable monitoring?"}))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionInterval",isLoading:s},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}function K({reason:e}){const{context:t,property:s,data:i}=e;return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(q,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.pluginEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data} set, which disables monitoring. Removing the {monitoringEnableFalse} setting from your configuration will put the default into effect and enable Monitoring.",values:{context:t,property:Object(y.jsx)(u.EuiCode,null,s),data:Object(y.jsx)(u.EuiCode,null,i),monitoringEnableFalse:Object(y.jsx)(u.EuiCode,null,"xpack.monitoring.enabled: false")}}))))}function J({reason:e}){const{context:t,property:s,data:i}=e;return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(q,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,{className:"eui-textLeft"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersDescription",defaultMessage:"We checked the {context} settings for {property}, and found the reason: {data}.",values:{context:Object(y.jsx)(u.EuiCode,null,t),property:Object(y.jsx)(u.EuiCode,null,s),data:Object(y.jsx)(u.EuiCode,null,i)}})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.problemWithConfigDescription",defaultMessage:"Using monitoring exporters to ship the monitoring data to a remote monitoring cluster is highly recommended as it keeps the integrity of the monitoring data safe no matter what the state of the production cluster. However, as this instance of Kibana could not find any monitoring data, there seems to be a problem with the {property} configuration, or the {monitoringEs} settings in {kibanaConfig}.",values:{property:Object(y.jsx)(u.EuiCode,null,s),monitoringEs:Object(y.jsx)(u.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(y.jsx)(u.EuiCode,null,"kibana.yml")}})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.checkConfigDescription",defaultMessage:"Check that the intended exporters are enabled for sending statistics to the monitoring cluster, and that the monitoring cluster host matches the {monitoringEs} setting in {kibanaConfig} to see monitoring data in this instance of Kibana.",values:{monitoringEs:Object(y.jsx)(u.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(y.jsx)(u.EuiCode,null,"kibana.yml")}}))))}function Y(){return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(H,null),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,{className:"eui-textLeft"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersCloudDescription",defaultMessage:"In Elastic Cloud, your monitoring data is stored in your dedicated monitoring cluster."}))))}const Q=e=>{const{reason:t}=e,{property:s,data:a,context:i}=t;switch(s){case"xpack.monitoring.collection.enabled":return Object(y.jsx)(collection_enabled_ExplainCollectionEnabled,e);case"xpack.monitoring.collection.interval":return Object(y.jsx)(collection_interval_ExplainCollectionInterval,e);case"xpack.monitoring.exporters":return Object(y.jsx)(J,e);case"xpack.monitoring.exporters.cloud_enabled":return Object(y.jsx)(Y,null);case"xpack.monitoring.enabled":return Object(y.jsx)(K,e);case"custom":return Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,t.message));default:return Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.reasons.explainWhyNoDataDescription",defaultMessage:"There is a {context} setting that has {property} set to {data}.",values:{context:Object(y.jsx)(u.EuiCode,null,i),property:Object(y.jsx)(u.EuiCode,null,s),data:Object(y.jsx)(u.EuiCode,null,a)}})))}};function X(e){return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(Q,e))}function Z(){return Object(y.jsx)("div",{"data-test-subj":"weTriedContainer"},Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.reasons.couldNotActivateMonitoringTitle",defaultMessage:"We couldn't activate monitoring"}))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,{className:"eui-textLeft"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.reasons.noMonitoringDataFoundDescription",defaultMessage:'No monitoring data found. Try setting the time filter to "Last 1 hour" or check if data is available for a different time period.'})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.reasons.ifDataInClusterDescription",defaultMessage:"If data is in your cluster, your monitoring dashboards will show up here."}))))}const ee=({errors:e})=>{const t={};return e.filter((e=>{const{statusCode:s,error:a,message:i}=e,n=`${s}${a}${i}`;if(!t[n])return t[n]=!0,!0})).map(((e,t)=>{const{message:s,statusCode:i,error:n}=e;return Object(y.jsx)(a.Fragment,{key:`checker-error-${t}`},Object(y.jsx)(u.EuiDescriptionListTitle,null,i," ",n),Object(y.jsx)(u.EuiDescriptionListDescription,null,s))}))};function te(e){return void 0===e.errors||0===e.errors.length?null:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiCallOut,{title:"Errors found",color:"danger",className:"eui-textLeft"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.checkerErrors.checkEsSettingsErrorMessage",defaultMessage:"There were some errors encountered in trying to check Elasticsearch settings. You need administrator rights to check the settings and, if needed, to enable the monitoring collection setting."})),Object(y.jsx)(u.EuiDescriptionList,null,Object(y.jsx)(ee,e))))}function se(e,t={},s=window.location){let a=s.hash?s.hash.split("?")[1]:"";const i=/_g=\((.+)\)$/.exec(a);if(!i||!i.length)return a?`${e.split("?")[0]}?${a}`:e;let n=i[1];return Object.keys(t).forEach((e=>{let s=t[e];"cluster_uuid"===e&&(s=`'${s}'`);const a=new RegExp(`${e}:([^,]+)`).exec(n);a&&a.length?n=n.replace(a[0],`${e}:${s}`):n+=`,${e}:${s}`})),a=a.replace(i[0],`_g=(${n})`),`${e.split("?")[0]}?${a}`}function ae(e){const{isLoading:t,reason:s,checkMessage:a,isCollectionEnabledUpdated:i}=e;return i&&!s||t?Object(y.jsx)(W,{checkMessage:a}):s?Object(y.jsx)(X,e):Object(y.jsx)(Z,null)}function ie(e){const[t,s]=Object(a.useState)(!1),[i,n]=Object(a.useState)(!1),r=({children:e})=>Object(y.jsx)(u.EuiPage,{"data-test-subj":"noDataContainer"},e);return e.isCloudEnabled?Object(y.jsx)(r,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.cloud.heading",defaultMessage:"No monitoring data found."}))),Object(y.jsx)(u.EuiPageBody,{restrictWidth:600},Object(y.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(y.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.cloud.title",defaultMessage:"Monitoring data not available"}))),Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.cloud.description",defaultMessage:"Monitoring provides insight to your hardware performance and load."})))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(H,null)))):i?Object(y.jsx)(r,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.no_data.internal_collection.heading",defaultMessage:"No monitoring data found."}))),Object(y.jsx)(u.EuiPageBody,{restrictWidth:600},Object(y.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(y.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(ae,e),Object(y.jsx)(te,{errors:e.errors}),e.isCloudEnabled?null:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiButtonEmpty,{isDisabled:e.isCollectionEnabledUpdated,onClick:()=>n(!1)},Object(y.jsx)(u.EuiTextColor,{color:"default"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.setupMetricbeatInstead",defaultMessage:"Or, set up with Metricbeat (recommended)"}))))))):Object(y.jsx)(r,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.no_data.heading",defaultMessage:"No monitoring data found."}))),Object(y.jsx)(u.EuiPageBody,{restrictWidth:600},Object(y.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(y.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiTitle,{size:"l"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDetected",defaultMessage:"No monitoring data found"}))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDataFound",defaultMessage:"Have you set up monitoring yet? If so, make sure that the selected time period in the upper right includes monitoring data."})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.remoteCollectionNotice",defaultMessage:"If you have configured monitoring data to be sent to a dedicated monitoring  cluster you should access that data with the Kibana instance attached to the monitoring cluster."}))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButton,{fill:!0,onClick:async function(){s(!0),await z(!0),window.location.hash=se("#/elasticsearch/nodes")},type:"button","data-test-subj":"enableCollectionInterval",isLoading:t},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Set up monitoring with Metricbeat"})))),Object(y.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(y.jsx)(u.EuiButtonEmpty,{onClick:()=>n(!0),"data-test-subj":"useInternalCollection"},Object(y.jsx)(u.EuiTextColor,{color:"subdued"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.noData.setupInternalInstead",defaultMessage:"Or, set up with self monitoring"}))))))}const ne=({uploadPath:e})=>Object(y.jsx)(u.EuiCard,{title:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(y.jsx)(u.EuiButton,{"data-test-subj":"updateLicenseButton",href:e},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.updateLicenseButtonLabel",defaultMessage:"Update license"}))});class license_LicenseStatus extends i.a.PureComponent{render(){const{isExpired:e,status:t,type:s,expiryDate:i}=this.props,n=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();let r,o,l;return e?(r=Object(y.jsx)(u.EuiIcon,{color:"danger",type:"alert"}),l=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:Object(y.jsx)("strong",null,i)}})),o=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:n}})):(r=Object(y.jsx)(u.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"}),l=i?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:Object(y.jsx)("strong",null,i)}})):Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."})),o=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:n,status:t.toLowerCase()}})),Object(y.jsx)(u.EuiTextAlign,{textAlign:"center"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},r),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"m"},Object(y.jsx)("h1",{"data-test-subj":"licenseText"},o)))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiText,{"data-test-subj":"licenseSubText"},l))}}const re=({isPrimaryCluster:e,uploadLicensePath:t})=>e?Object(y.jsx)(ne,{uploadPath:t}):null,oe=({isPrimaryCluster:e})=>e?null:Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.license.howToUpdateLicenseDescription",defaultMessage:"To update the license for this cluster, provide the license file through the Elasticsearch {apiText}:",values:{apiText:"API"}})),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiCodeBlock,null,"curl -XPUT -u <user> 'https://<host>:<port>/_license' -H 'Content-Type: application/json' -d @license.json")),le=e=>{const{status:t,type:s,isExpired:a,expiryDate:i}=e,n=`${x.a.shims.getBasePath()}/app/management/stack/license_management`;return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.license.heading",defaultMessage:"License"}))),Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(license_LicenseStatus,{isExpired:a,status:t,type:s,expiryDate:i}),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(re,e),Object(y.jsx)(oe,e))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiText,{size:"s",textAlign:"center"},Object(y.jsx)("p",null,"For more license options please visit ",Object(y.jsx)(u.EuiLink,{href:n},"License Management"),"."))))};function ce(){return Object(y.jsx)(u.EuiPage,{style:{height:"calc(100vh - 50px)"}},Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"monNoData__content"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiLoadingSpinner,{size:"xl"})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.pageLoadingTitle",defaultMessage:"Loading…"}))))))))}s(53);const ue=({pageViewTitle:e})=>{const t=e.toLowerCase().replace(/-/g,"").replace(/\s+/g,"_");return Object(d.useTrackPageview)({app:"stack_monitoring",path:t}),Object(d.useTrackPageview)({app:"stack_monitoring",path:t,delay:15e3}),Object(y.jsx)(ce,null)},de=({pageViewTitle:e})=>e?Object(y.jsx)(ue,{pageViewTitle:e}):Object(y.jsx)(ce,null);var ge=s(3),me=s.n(ge);const pe={RED:"RED",YELLOW:"YELLOW",GREEN:"GREEN",GRAY:"GRAY"},je={[pe.RED]:"danger",[pe.YELLOW]:"warning",[pe.GREEN]:"success",[pe.GRAY]:"subdued"},be=({type:e,label:t})=>{const s=je[e];return Object(y.jsx)(u.EuiIcon,{alt:t,size:"l","data-test-subj":"statusIcon",type:"dot",color:s})},xe=i.a.createContext({setupModeSupported:!1});var he=s(18),fe=s.n(he),Oe=(s(42),s(1));function ve(e,t,s){let a,i;if(s=s||fe()(),t===Oe.c)a=fe.a.duration(s-fe()(e));else{if(t!==Oe.d)throw new Error('[formatTimestampToDuration] requires a [calculationFlag] parameter to specify format as "since" or "until" the given time.');a=fe.a.duration(fe()(e)-s)}return i=Math.abs(s.diff(e,"months"))>=1?fe.a.duration(a).format(Oe.t):Math.abs(s.diff(e,"minutes"))>=1?fe.a.duration(a).format(Oe.u):fe.a.duration(a).format(Oe.v),i.replace(/ -?0 mins$/,"").replace(/ -?0 hrs$/,"").replace(/ -?0 days$/,"")}function Ee(e){if(!e)return null;let t=e.text;if(!e.tokens||!e.tokens.length)return t;const s=e.tokens.filter((e=>e.type===I.a.Time)),i=e.tokens.filter((e=>e.type===I.a.Link)),n=e.tokens.filter((e=>e.type===I.a.DocLink));for(const e of s){const s=e;t=t.replace(s.startToken,s.isRelative?ve(s.timestamp,Oe.d):fe.a.tz(s.timestamp,fe.a.tz.guess()).format("LLL z"))}let r=Object(y.jsx)(a.Fragment,null,t);for(const e of i){const s=e,i=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!i||i.length<2)continue;const n=t.indexOf(i[0]),o=t.substring(0,n),l=t.substring(n+i[0].length),c=se(`#/${s.url}`);r=Object(y.jsx)(a.Fragment,null,o,Object(y.jsx)(u.EuiLink,{href:c},i[1]),l)}for(const e of n){const s=e,i=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!i||i.length<2)continue;const n=s.partialUrl.replace("{basePath}",x.a.shims.getBasePath()).replace("{elasticWebsiteUrl}",x.a.shims.docLinks.ELASTIC_WEBSITE_URL).replace("{docLinkVersion}",x.a.shims.docLinks.DOC_LINK_VERSION),o=t.indexOf(i[0]),l=t.substring(0,o),c=t.substring(o+i[0].length);r=Object(y.jsx)(a.Fragment,null,l,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank",external:!0},i[1]),c)}return r}var ye=s(29);const Me=e=>{const{alert:t,compressed:s}=e,[n,r]=i.a.useState(!1),[o,l]=i.a.useState(t.enabled),[d,g]=i.a.useState(t.muteAll),[m,p]=i.a.useState(!1),j=Object(a.useMemo)((()=>n&&x.a.shims.triggersActionsUi.getEditAlertFlyout({initialRule:{...t,ruleTypeId:t.alertTypeId},onClose:()=>{r(!1),N.hideBottomBar=!1,R()}})),[n]);return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiFlexGroup,{justifyContent:s?"flexStart":"spaceBetween",gutterSize:s?"m":"xs",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButton,{size:s?"s":"m",onClick:()=>{r(!0),N.hideBottomBar=!0,R()}},c.i18n.translate("xpack.monitoring.alerts.panel.editAlert",{defaultMessage:"Edit rule"}))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiSwitch,{name:"disable",disabled:m,checked:!o,onChange:async()=>{o?(l(!1),await async function(){p(!0);try{await x.a.shims.http.post(`${ye.BASE_ALERTING_API_PATH}/rule/${t.id}/_disable`)}catch(e){x.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.disableAlert.errorTitle",{defaultMessage:"Unable to disable rule"}),text:e.message})}p(!1)}()):(l(!0),await async function(){p(!0);try{await x.a.shims.http.post(`${ye.BASE_ALERTING_API_PATH}/rule/${t.id}/_enable`)}catch(e){x.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.enableAlert.errorTitle",{defaultMessage:"Unable to enable rule"}),text:e.message})}p(!1)}())},label:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.panel.disableTitle",defaultMessage:"Disable"})})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiSwitch,{name:"mute",disabled:m,checked:d,"data-test-subj":"muteSwitch",onChange:async()=>{d?(g(!1),await async function(){p(!0);try{await x.a.shims.http.post(`${ye.BASE_ALERTING_API_PATH}/rule/${t.id}/_unmute_all`)}catch(e){x.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.ummuteAlert.errorTitle",{defaultMessage:"Unable to unmute rule"}),text:e.message})}p(!1)}()):(g(!0),await async function(){p(!0);try{await x.a.shims.http.post(`${ye.BASE_ALERTING_API_PATH}/rule/${t.id}/_mute_all`)}catch(e){x.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.muteAlert.errorTitle",{defaultMessage:"Unable to mute rule"}),text:e.message})}p(!1)}())},label:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.panel.muteTitle",defaultMessage:"Mute"})}))),j)},ke=e=>{const{alert:t,alertState:s}=e,n=V(i.a.useContext(xe));if(!t)return null;if(n||!s)return Object(y.jsx)("div",{style:{padding:"1rem"}},Object(y.jsx)(Me,{alert:t}));const r=s.state.ui.message.nextSteps&&s.state.ui.message.nextSteps.length?Object(y.jsx)(u.EuiListGroup,null,s.state.ui.message.nextSteps.map(((e,t)=>Object(y.jsx)(u.EuiListGroupItem,{size:"s",key:t,label:Ee(e)})))):null,{code:o}=s.state.ui.message;return Object(y.jsx)(a.Fragment,null,Object(y.jsx)("div",{style:{padding:"1rem"}},Object(y.jsx)(u.EuiTitle,{size:"xs"},Object(y.jsx)("h5",null,Ee(s.state.ui.message))),null!=o&&o.length?Object(y.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:150},o):null,r?Object(y.jsx)(u.EuiSpacer,{size:"s"}):null,r),Object(y.jsx)(u.EuiHorizontalRule,{margin:"s"}),Object(y.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"}},Object(y.jsx)(Me,{alert:t})))};var Se=s(20),_e=s.n(Se);const Te="0,0.[00]",we="0,0.0 b",Ce="0,0.[0]a";function Ie(e,t=!1,s=null){return t?_e.a.utc(e).format("LL LTS"):_e.a.tz(e,s||_e.a.tz.guess()).format("LL LTS")}function Le(e,t){return _e()(e).tz("Browser"===t?_e.a.tz.guess():t).fromNow()}function Fe(e,t){return _e()(e).tz("Browser"===t?_e.a.tz.guess():t).calendar()}function Pe(e,t){return e.state.ui.triggeredMS===t.state.ui.triggeredMS?0:e.state.ui.triggeredMS<t.state.ui.triggeredMS?1:-1}const Ne=e=>`${e} alert${e>1?"s":""}`,De=e=>`${e} rule${e>1?"s":""}`,Re=c.i18n.translate("xpack.monitoring.alerts.badge.panelTitle",{defaultMessage:"Alerts"}),Ae=c.i18n.translate("xpack.monitoring.rules.badge.panelTitle",{defaultMessage:"Rules"}),ze=c.i18n.translate("xpack.monitoring.alerts.badge.groupByNode",{defaultMessage:"Group by node"}),Be=c.i18n.translate("xpack.monitoring.alerts.badge.groupByType",{defaultMessage:"Group by alert type"}),Ve=e=>{const{stateFilter:t=(()=>!0)}=e,s=Object.values(e.alerts).flat().filter((e=>Boolean(null==e?void 0:e.sanitizedRule))),[n,r]=i.a.useState(null),o=V(i.a.useContext(xe)),l=o?s.length:s.reduce(((e,{states:s})=>e+s.filter((({state:e})=>t(e))).length),0),[c,d]=i.a.useState(!o&&l>8),g=o?Ae:Re;if(i.a.useEffect((()=>{o&&c&&d(!1)}),[o,c]),0===l)return null;const m=ze,p=c?function(e,t,s){const i={},n={};for(const{states:e,sanitizedRule:a}of t){const{id:t}=a;for(const r of e.filter((({state:e})=>s(e)))){const{state:e}=r;n[e.nodeId]=n[e.nodeId]||[],n[e.nodeId].push(r),i[e.nodeId]=i[e.nodeId]||{},i[e.nodeId][t]=i[r.state.nodeId][t]||{alert:a,states:[],count:0},i[e.nodeId][t].count++,i[e.nodeId][t].states.push(r)}}for(const e of Object.values(i))for(const{states:t}of Object.values(e))t.sort(Pe);const r=Object.keys(n).length;let o=r,l=r;return[{id:0,title:e,items:[...Object.keys(n).map(((e,t)=>{const a=n[e].filter((({state:e})=>s(e))),{nodeName:i,itemLabel:r}=a[0].state;return{name:Object(y.jsx)(u.EuiText,null,i||r," (",a.length,")"),panel:t+1}}))]},...Object.keys(n).reduce(((e,t,s)=>{const n=Object.values(i[t]),r=[];let l="";for(const{alert:e,states:t}of n)for(const s of t){const{nodeName:t,itemLabel:i}=s.state;l=t||i,r.push({name:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiToolTip,{position:"top",content:Fe(s.state.ui.triggeredMS,x.a.shims.uiSettings.get("dateFormat:tz"))},Object(y.jsx)(u.EuiText,{size:"s"},Le(s.state.ui.triggeredMS,x.a.shims.uiSettings.get("dateFormat:tz")))),Object(y.jsx)(u.EuiText,{size:"s"},e.name)),panel:++o})}return e.push({id:s+1,title:l,items:r}),e}),[]),...Object.keys(n).reduce(((e,t,s)=>{const a=Object.values(i[t]);for(const{alert:t,states:s}of a)for(const a of s)e.push({id:++l,title:t.name,width:400,content:Object(y.jsx)(ke,{alert:t,alertState:a})});return e}),[])]}(g,s,t):function(e,t,s,i){const n=t?Oe.U.reduce(((e,t)=>{const a=t.rules.filter((e=>s.find((({sanitizedRule:t})=>t.alertTypeId===e.ruleName))));return a.length>0&&e.push({...t,alerts:a.map((({ruleName:e})=>s.filter((({sanitizedRule:t})=>t.alertTypeId===e)).map((t=>({alert:t.sanitizedRule,states:[],ruleName:e}))))).flat(),alertCount:0}),e}),[]):Oe.U.reduce(((e,t)=>{const a=[];let n=0;for(const{ruleName:e}of t.rules){const t=s.filter((({sanitizedRule:t,states:s})=>e===t.alertTypeId&&s.length>0));t.length>0&&t.forEach((t=>{const s=t.states.filter((({state:e})=>i(e)));s.length>0&&(a.push({alert:t.sanitizedRule,states:s,ruleName:e}),n+=s.length)}))}return a.length>0&&e.push({...t,alertCount:n,alerts:a}),e}),[]);for(const e of n)for(const t of e.alerts)t.states.sort(Pe);const r=[{id:0,title:e,items:[...n.map(((e,s)=>({name:t?Object(y.jsx)(u.EuiText,null,e.label):Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,e.label," (",e.alertCount,")")),panel:s+1})))]}];if(t){let e=n.length,t=n.length,s=0;for(const t of n)r.push({id:s+1,title:`${t.label}`,items:t.alerts.map((t=>({name:Object(y.jsx)(u.EuiText,null,t.alert.name),panel:++e}))).flat()}),s++;for(const e of n)for(const{alert:s}of e.alerts)r.push({id:++t,title:`${s.name}`,width:400,content:Object(y.jsx)(ke,{alert:s})})}else{let e=n.length,s=0;for(const a of n)r.push({id:s+1,title:`${a.label}`,items:a.alerts.map((({alert:s,ruleName:a,states:n})=>{const r=n.filter((({state:e})=>i(e)));return{name:t?Object(y.jsx)(u.EuiText,null,s.name):Object(y.jsx)(u.EuiText,null,s.name," (",r.length,")"),panel:++e}}))}),s++;let o=n.length,l=n.reduce(((e,t)=>e+t.alerts.length),n.length);for(const e of n)for(const{alert:t,states:s}of e.alerts){const e=[];for(const t of s.filter((({state:e})=>i(e)))){const{nodeName:s,itemLabel:i}=t.state;e.push({name:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiToolTip,{position:"top",content:Fe(t.state.ui.triggeredMS,x.a.shims.uiSettings.get("dateFormat:tz"))},Object(y.jsx)(u.EuiText,{size:"s"},Le(t.state.ui.triggeredMS,x.a.shims.uiSettings.get("dateFormat:tz")))),Object(y.jsx)(u.EuiText,{size:"s"},s||i)),panel:++l}),e.push({isSeparator:!0})}r.push({id:++o,title:`${t.name}`,items:e})}let c=n.reduce(((e,t)=>e+t.alerts.length),n.length);for(const e of n)for(const{alert:t,states:s}of e.alerts)for(const e of s.filter((({state:e})=>i(e))))r.push({id:++c,title:`${t.name}`,width:400,content:Object(y.jsx)(ke,{alert:t,alertState:e})})}return r}(g,!!o,s,t);p.length&&!o&&p[0].items&&p[0].items.push({isSeparator:!0},{name:Object(y.jsx)(u.EuiSwitch,{checked:!1,onChange:()=>d(!c),label:c?Be:m})});const j=Object(y.jsx)(u.EuiBadge,{iconType:"bell",color:o?"default":"danger","data-test-subj":"alertsBadge",onClickAriaLabel:o?De(l):Ne(l),onClick:()=>r(!0)},o?De(l):Ne(l));return Object(y.jsx)(u.EuiPopover,{id:"monitoringAlertMenu",button:j,isOpen:!0===n,closePopover:()=>r(null),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(y.jsx)(u.EuiContextMenu,{key:`${c?"byNode":"byType"}_${p.length}`,initialPanelId:0,panels:p}))},Ue=e=>{const{alerts:t,showBadge:s=!1,showOnlyCount:a=!1,stateFilter:n=(()=>!0)}=e,r=V(i.a.useContext(xe));if(!t)return null;let o=!1;const l=Object.values(t).flat().reduce(((e,t)=>{const s=t.states.filter((e=>e.firing));if(e+=s.filter((e=>n(e.state))).length,s.length&&!o)for(const e of t.states)if(n(e.state)&&e.state.ui.severity===I.c.Danger){o=!0;break}return e}),0);if(0===l&&(!r||a))return Object(y.jsx)(u.EuiToolTip,{content:c.i18n.translate("xpack.monitoring.alerts.status.clearToolip",{defaultMessage:"No alerts firing"}),position:"bottom"},Object(y.jsx)(u.EuiHealth,{color:"success","data-test-subj":"alertIcon"},a?l:Object(y.jsx)("span",{"data-test-subj":"alertStatusText"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.status.clearText",defaultMessage:"Clear"}))));if(s||r)return Object(y.jsx)(Ve,{alerts:t,stateFilter:n});const d=o?I.c.Danger:I.c.Warning,g=(()=>{switch(d){case I.c.Danger:return c.i18n.translate("xpack.monitoring.alerts.status.highSeverityTooltip",{defaultMessage:"There are some critical issues that require your immediate attention!"});case I.c.Warning:return c.i18n.translate("xpack.monitoring.alerts.status.mediumSeverityTooltip",{defaultMessage:"There are some issues that might have impact on the stack."});default:return c.i18n.translate("xpack.monitoring.alerts.status.lowSeverityTooltip",{defaultMessage:"There are some low-severity issues."})}})();return Object(y.jsx)(u.EuiToolTip,{content:g,position:"bottom"},Object(y.jsx)(u.EuiHealth,{color:d,"data-test-subj":"alertIcon"},a?l:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.status.alertsTooltip",defaultMessage:"Alerts"})))};s(58);const $e=({label:e,value:t,...s},a)=>Object(y.jsx)(u.EuiFlexItem,me()({style:{maxWidth:200},key:`summary-status-item-${a}`,grow:!1},s),Object(y.jsx)(u.EuiStat,{title:t,className:"monSummaryStatusNoWrap__stat",titleSize:"xxxs",textAlign:"left",description:e?`${e}`:""})),Ge=({status:e})=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.summaryStatus.statusIconTitle",defaultMessage:"Status: {statusIcon}",values:{statusIcon:Object(y.jsx)(be,{type:e.toUpperCase(),label:c.i18n.translate("xpack.monitoring.summaryStatus.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:e}})})}})),qe=({status:e,isOnline:t,IconComponent:s})=>Object(g.isEmpty)(e)?null:Object(y.jsx)(u.EuiFlexItem,{className:"eui-textTruncate",style:{maxWidth:200},key:"summary-status-item-status",grow:!1},Object(y.jsx)(u.EuiStat,{title:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(s,{status:e,isOnline:t})," ",Object(g.capitalize)(e)),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:c.i18n.translate("xpack.monitoring.summaryStatus.statusDescription",{defaultMessage:"Status"})}));function He({metrics:e,status:t,alerts:s,isOnline:a,IconComponent:i=Ge,...n}){return Object(y.jsx)("div",me()({},n,{className:"monSummaryStatusNoWrap"}),Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center",justifyContent:"spaceBetween"},Object(y.jsx)(qe,{status:t,IconComponent:i,isOnline:a}),s?Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiStat,{title:Object(y.jsx)(Ue,{showOnlyCount:!0,alerts:s}),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:c.i18n.translate("xpack.monitoring.summaryStatus.alertsDescription",{defaultMessage:"Alerts"})})):null,e.map($e)))}function We({status:e}){const t=(()=>{const t=e.toUpperCase();return pe[t]||pe.GRAY})();return Object(y.jsx)(be,{type:t,label:c.i18n.translate("xpack.monitoring.elasticsearch.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}var Ke=s(19),Je=s.n(Ke);function Ye(e,t){return Xe(e,"byte")+" / "+Xe(t,"byte")}function Qe(e,t){return Xe(e/t,"0.00%")}function Xe(e,t){const s=Number.isNaN(e);let a="0,0.0";if("number"!=typeof e||s){if(void 0!==e&&!s)return e;e=0,a="0"}let i="";switch(t){case"time_since":return fe()(fe()()-e).from(fe()(),!0);case"time":return fe()(e).format("H:mm:ss");case"int_commas":a="0,0";break;case"byte":case"bytes":a+=" b";break;case"ms":i="ms";break;default:t&&(a=t)}return Je()(e).format(a)+i}function Ze(e,t,s,a={}){const{prependSpace:i=!0}=a;if(Boolean(e)||0===e){let a="";return void 0!==s&&(a=i?` ${s}`:s),Xe(e,t)+a}return c.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"})}function et({stats:e,alerts:t}){const{dataSize:s,nodesCount:a,indicesCount:i,memUsed:n,memMax:r,totalShards:o,unassignedShards:l,documentCount:u,status:d}=e,g=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:a,"data-test-subj":"nodesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.indicesLabel",{defaultMessage:"Indices"}),value:i,"data-test-subj":"indicesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.memoryLabel",{defaultMessage:"JVM Heap"}),value:Ze(n,"byte")+" / "+Ze(r,"byte"),"data-test-subj":"memory"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.totalShardsLabel",{defaultMessage:"Total shards"}),value:o,"data-test-subj":"totalShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.unassignedShardsLabel",{defaultMessage:"Unassigned shards"}),value:l,"data-test-subj":"unassignedShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.documentsLabel",{defaultMessage:"Documents"}),value:Ze(u,"int_commas"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.dataLabel",{defaultMessage:"Data"}),value:Ze(s,"byte"),"data-test-subj":"dataSize"}];return Object(y.jsx)(He,{metrics:g,status:d,alerts:t,IconComponent:({status:e})=>Object(y.jsx)(We,{status:e}),"data-test-subj":"elasticsearchClusterStatus"})}const tt=c.i18n.translate("xpack.monitoring.setupMode.node",{defaultMessage:"node"}),st=c.i18n.translate("xpack.monitoring.setupMode.nodes",{defaultMessage:"nodes"}),at=c.i18n.translate("xpack.monitoring.setupMode.instance",{defaultMessage:"instance"}),it=c.i18n.translate("xpack.monitoring.setupMode.instances",{defaultMessage:"instances"}),nt=c.i18n.translate("xpack.monitoring.setupMode.server",{defaultMessage:"server"}),rt=c.i18n.translate("xpack.monitoring.setupMode.servers",{defaultMessage:"servers"});function ot(e){return e===Oe.a?e.toUpperCase():Object(g.capitalize)(e)}const lt=[Oe.F,Oe.r],ct=[Oe.B,Oe.b];function ut(e,t=!1){return ct.includes(e)?t?it:at:lt.includes(e)?t?st:tt:e===Oe.a?t?rt:nt:e}const dt=({rows:e,search:t={},columns:s,setupMode:n,productName:r,...o})=>{const[l,d]=i.a.useState(e.length>0);if(t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar"),t.box&&!t.box.schema&&(t.box.schema=!0),t){const s=t.onChange;t.onChange=t=>{const a=u.EuiSearchBar.Query.execute(t.query,e,o.executeQueryOptions);return d(a.length>0),s&&s(t),!0}}const g=s.map((e=>("sortable"in e||(e.sortable=!0),e)));let m=null;return n&&U(I.d.MetricbeatMigration)&&(m=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiButton,{iconType:"flag",onClick:()=>n.openFlyout({},!0)},c.i18n.translate("xpack.monitoring.euiTable.setupNewButtonLabel",{defaultMessage:"Monitor another {identifier} with Metricbeat",values:{identifier:ut(r)}})))),Object(y.jsx)("div",{"data-test-subj":`${o.className}Container`},Object(y.jsx)(u.EuiInMemoryTable,me()({"data-test-subj":e.length&&!0===l?"monitoringTableHasData":"monitoringTableNoData",items:e,search:t,columns:g},o)),m)};function gt({rows:e,search:t={},pagination:s,columns:n,onTableChange:r,setupMode:o,productName:l,...d}){const[g,m]=i.a.useState(""),[p,j]=i.a.useState(!1),[b,x]=i.a.useState({index:s.pageIndex,size:s.pageSize});s.totalItemCount||(s.totalItemCount=e&&e.length||0);const[h,f]=i.a.useState(d.sorting);t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar");const O=n.map((e=>("sortable"in e||(e.sortable=!0),e)));let v=null;return o&&o.enabled&&U(I.d.MetricbeatMigration)&&(v=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiButton,{iconType:"flag",onClick:()=>o.openFlyout({},!0)},c.i18n.translate("xpack.monitoring.euiSSPTable.setupNewButtonLabel",{defaultMessage:"Set up monitoring for new {identifier}",values:{identifier:ut(l)}})))),Object(y.jsx)("div",{"data-test-subj":`${d.className}Container`},Object(y.jsx)(u.EuiSearchBar,me()({},t,{onChange:async({queryText:e})=>{const t={...b,index:0};x(t),m(e),d.fetchMoreData?(j(!0),await d.fetchMoreData({page:t,sort:h,queryText:e}),j(!1)):r({page:b,sort:h.sort,queryText:e})}})),Object(y.jsx)(u.EuiSpacer,{size:"l"}),Object(y.jsx)(u.EuiBasicTable,me()({},d,{"data-test-subj":e.length?"monitoringTableHasData":"monitoringTableNoData",items:e,pagination:s,onChange:async({page:e,sort:t})=>{x(e),f({sort:t}),d.fetchMoreData?(j(!0),await d.fetchMoreData({page:e,sort:{sort:t},queryText:g}),j(!1),r({page:e,sort:t})):r({page:e,sort:t,queryText:g})},columns:O,loading:d.isLoading||p})),v)}var mt=s(30);const pt=({isSnapshot:e,repo:t,snapshot:s})=>e?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.snapshotTitle",defaultMessage:"Repo: {repo} / Snapshot: {snapshot}",values:{repo:t,snapshot:s}})):null,jt=e=>{const{name:t,shard:s,relocationType:a}=e;return Object(y.jsx)("div",null,Object(y.jsx)(u.EuiLink,{href:se(`#/elasticsearch/indices/${t}`)},t),Object(y.jsx)("br",null),Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.shardDescription",defaultMessage:"Shard: {shard}",values:{shard:s}}),Object(y.jsx)("br",null),Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.recoveryTypeDescription",defaultMessage:"Recovery type: {relocationType}",values:{relocationType:a}}),Object(y.jsx)("div",null,Object(y.jsx)(pt,e)))},bt=({startTime:e,totalTime:t})=>Object(y.jsx)(u.EuiToolTip,{content:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.totalTimeTooltip",defaultMessage:"Started: {startTime}",values:{startTime:e}}),position:"bottom"},Object(y.jsx)(u.EuiLink,null,t)),xt=({isCopiedFromPrimary:e,sourceTransportAddress:t,children:s})=>{if(!t)return s;const i=Object(y.jsx)(a.Fragment,null,t,Object(y.jsx)("br",null),Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip",defaultMessage:"Copied from {copiedFrom} shard",values:{copiedFrom:e?Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.primarySourceText",defaultMessage:"primary"}):Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.replicaSourceText",defaultMessage:"replica"})}}));return Object(y.jsx)(u.EuiToolTip,{content:i,position:"bottom"},Object(y.jsx)(u.EuiLink,null,s))},ht=e=>{const{sourceName:t,targetName:s,targetTransportAddress:a}=e,i=a||c.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.unknownTargetAddressContent",{defaultMessage:"Unknown"});return Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(xt,e,t)),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiIcon,{type:"arrowRight",size:"s"})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiToolTip,{content:i,position:"bottom"},Object(y.jsx)(u.EuiLink,null,s))))},ft=({filesPercent:e,filesDone:t,filesTotal:s})=>Object(y.jsx)(a.Fragment,null,e,Object(y.jsx)("br",null),t," / ",s),Ot=({bytesPercent:e,bytesDone:t,bytesTotal:s})=>Object(y.jsx)(a.Fragment,null,e,Object(y.jsx)("br",null),t," / ",s),vt=({hasTranslog:e,translogPercent:t,translogDone:s,translogTotal:i})=>e?Object(y.jsx)(a.Fragment,null,t,Object(y.jsx)("br",null),s," / ",i):Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.progress.noTranslogProgressLabel",defaultMessage:"n/a"}),Et=e=>{if(void 0!==e){const t=e.match(/([\d\.:]+)\]$/);if(t)return t[1]}return e},yt=e=>Object(g.capitalize)(e.toLowerCase()),Mt=[{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.indexTitle",{defaultMessage:"Index"}),field:"name",render:(e,t)=>Object(y.jsx)(jt,t)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.stageTitle",{defaultMessage:"Stage"}),field:"stage"},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.totalTimeTitle",{defaultMessage:"Total Time"}),field:null,render:e=>Object(y.jsx)(bt,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.sourceDestinationTitle",{defaultMessage:"Source / Destination"}),field:null,render:e=>Object(y.jsx)(ht,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.filesTitle",{defaultMessage:"Files"}),field:null,render:e=>Object(y.jsx)(ft,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.bytesTitle",{defaultMessage:"Bytes"}),field:null,render:e=>Object(y.jsx)(Ot,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.translogTitle",{defaultMessage:"Translog"}),field:null,render:e=>Object(y.jsx)(vt,e)}],kt=e=>{var t;const{data:s,sorting:i,pagination:n,onTableChange:r,toggleShardActivityHistory:o,showShardActivityHistory:d}=e,{services:g}=Object(l.useKibana)(),m=null===(t=g.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),p=s.map((e=>(e=>{const{id:t,stage:s,index:a,index_name:i,name:n,primary:r,start_time_in_millis:o,total_time_in_millis:l,source:c,target:u,translog:d,type:g,timezone:m}=e,{files:p,size:j}=a;return{name:i||n,shard:`${t} / ${r?"Primary":"Replica"}`,relocationType:"PRIMARY_RELOCATION"===g?"Primary Relocation":yt(g),stage:yt(s),startTime:Ie(o,m),totalTime:Ze(Math.floor(l/1e3),"00:00:00"),isCopiedFromPrimary:!r||"PRIMARY_RELOCATION"===g,sourceName:void 0===c.name?"n/a":c.name,targetName:u.name,sourceTransportAddress:Et(c.transport_address),targetTransportAddress:Et(u.transport_address),isSnapshot:"SNAPSHOT"===g,repo:c.repository,snapshot:c.snapshot,filesPercent:p.percent,filesDone:p.reused?p.reused:p.recovered,filesTotal:p.total,bytesPercent:j.percent,bytesDone:Ze(j.recovered_in_bytes+j.reused_in_bytes,"byte"),bytesTotal:Ze(j.total_in_bytes,"byte"),hasTranslog:d.total>0,translogPercent:d.percent,translogDone:d.total,translogTotal:d.total_on_start}})({...e,timezone:m})));return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivityTitle",defaultMessage:"Shard Activity"})))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiSwitch,{id:"monitoring_completed_recoveries",label:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.completedRecoveriesLabel",defaultMessage:"Completed recoveries"}),onChange:o,checked:d}),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(dt,{className:"esShardActivityTable",rows:p,columns:Mt,message:d?c.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.noDataMessage",{defaultMessage:"There are no historical shard activity records for the selected time range."}):Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextProblem",defaultMessage:"There are no active shard recoveries for this cluster."}),Object(y.jsx)("br",null),Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextSolution",defaultMessage:"Try viewing {shardActivityHistoryLink}.",values:{shardActivityHistoryLink:Object(y.jsx)(u.EuiLink,{onClick:o},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkText",defaultMessage:"completed recoveries"}))}})),sorting:i,search:!1,pagination:n,onTableChange:r,executeQueryOptions:{defaultFields:["name"]}}))};var St=s(31);function _t(e,t){let s;return s="elasticsearch"===e?["#3ebeb0","#3b73ac","#f08656","#6c478f"]:"apm"===e?Object(St.euiPaletteColorBlind)():["#e8488b","#3b73ac","#3cab63","#6c478f"],s[t]?s[t]:"#000"}var Tt=s(23),wt=s.n(Tt);const Ct=wt()({});class chart_target_ChartTarget extends i.a.Component{shouldComponentUpdate(){return!this.plot}shutdownChart(){if(!this.plot)return;const{target:e}=this.refs;wt()(e).off("plothover"),wt()(e).off("mouseleave"),wt()(e).off("plotselected"),wt()(e).off("plotselecting"),this.plot.shutdown(),Ct.off("thorPlotHover"),Ct.off("thorPlotLeave"),Ct.off("thorPlotSelecting"),Ct.off("thorPlotBrush")}componentWillUnmount(){this.shutdownChart(),window.removeEventListener("resize",this._handleResize),this.componentUnmounted=!0}filterByShow(e){return e?t=>e.some((e=>e.toLowerCase()===t.id.toLowerCase())):()=>!0}UNSAFE_componentWillReceiveProps(e){if(this.plot&&!Object(g.isEqual)(e,this.props)){const{series:t,timeRange:s}=e,a=this.plot.getAxes().xaxis.options;a.min=Object(g.get)(s,"min"),a.max=Object(g.get)(s,"max"),this.plot.setData(this.filterData(t,e.seriesToShow)),this.plot.setupGrid(),this.plot.draw()}}componentDidMount(){this.renderChart()}componentDidUpdate(){this.shutdownChart(),this.renderChart()}filterData(e,t){return Object(g.filter)(e,this.filterByShow(t))}async getOptions(){return{...await async function(e){var t;const s=null===(t=x.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),a={legend:{show:!1},xaxis:{color:Oe.f,timezone:"Browser"===s?"browser":"utc",mode:"time",font:{color:Oe.g}},yaxis:{color:Oe.f,font:{color:Oe.g}},series:{points:{show:!0,radius:1},lines:{show:!0,lineWidth:2},shadowSize:0},grid:{margin:0,borderWidth:1,borderColor:Oe.f,hoverable:!0},crosshair:{mode:"x",color:"#c66",lineWidth:2},selection:{mode:"x",color:Oe.g}};return Object(g.merge)(a,e)}({yaxis:{tickFormatter:this.props.tickFormatter},xaxis:this.props.timeRange}),...this.props.options}}async renderChart(){const{target:e}=this.refs,{series:t}=this.props,s=this.filterData(t,this.props.seriesToShow);this.plot=wt.a.plot(e,s,await this.getOptions()),!this.componentUnmounted&&this.plot&&(this._handleResize=()=>{if(this.plot)try{this.plot.resize(),this.plot.setupGrid(),this.plot.draw()}catch(e){}},window.addEventListener("resize",this._handleResize,!1),this.handleMouseLeave=()=>{Ct.trigger("thorPlotLeave",[])},this.handlePlotHover=(e,t,s)=>{Ct.trigger("thorPlotHover",[t,s,this.plot])},this.handleThorPlotHover=(e,t,s,a)=>{this.plot!==a&&this.plot.setCrosshair({x:Object(g.get)(t,"x")}),this.props.updateLegend(t,s)},this.handleThorPlotLeave=()=>{this.plot.clearCrosshair(),this.props.updateLegend()},this.handleThorPlotSelecting=(e,t,s)=>{if(this.plot!==s){const e=!0;this.plot.setSelection({xaxis:t},e)}},this.handleThorPlotBrush=()=>{this.plot.clearSelection()},this.selectingChart=(e,t)=>{if(t){const e=t.xaxis;Ct.trigger("thorPlotSelecting",[e,this.plot])}},this.brushChart=(e,t)=>{this.props.onBrush(t),Ct.trigger("thorPlotBrush")},wt()(e).on("plothover",this.handlePlotHover),wt()(e).on("mouseleave",this.handleMouseLeave),wt()(e).on("plotselected",this.brushChart),wt()(e).on("plotselecting",this.selectingChart),Ct.on("thorPlotHover",this.handleThorPlotHover),Ct.on("thorPlotLeave",this.handleThorPlotLeave),Ct.on("thorPlotSelecting",this.handleThorPlotSelecting),Ct.on("thorPlotBrush",this.handleThorPlotBrush))}render(){return Object(y.jsx)("div",{ref:"target",style:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"}})}}function It(e){return Object(y.jsx)("div",{style:{display:"flex",rowDirection:"column",flex:"1 0 auto",position:"relative"}},Object(y.jsx)(chart_target_ChartTarget,e))}s(63);class horizontal_legend_HorizontalLegend extends i.a.Component{constructor(){super(),this.formatter=this.formatter.bind(this),this.createSeries=this.createSeries.bind(this)}displayValue(e){return Object(y.jsx)("span",{className:"monRhythmChart__legendValue"},e)}validValue(e){return null!=e&&("string"==typeof e||!isNaN(e))}formatter(e,t){return this.validValue(e)?t&&t.tickFormatter?this.displayValue(t.tickFormatter(e)):Object(g.isFunction)(this.props.tickFormatter)?this.displayValue(this.props.tickFormatter(e)):this.displayValue(e):Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.chart.horizontalLegend.notAvailableLabel",defaultMessage:"N/A"})}createSeries(e,t){const s=["monRhythmChart__legendItem"];return Object(g.includes)(this.props.seriesFilter,e.id)||s.push("monRhythmChart__legendItem-isDisabled"),e.label&&!1!==e.legend?Object(y.jsx)(u.EuiFlexItem,{grow:!1,key:t},Object(y.jsx)("button",{className:s.join(" "),onClick:t=>this.props.onToggle(t,e.id)},Object(y.jsx)("span",{className:"monRhythmChart__legendLabel"},Object(y.jsx)(u.EuiIcon,{className:"monRhythmChart__legendIndicator","aria-label":c.i18n.translate("xpack.monitoring.chart.horizontalLegend.toggleButtonAriaLabel",{defaultMessage:"toggle button"}),size:"l",type:"dot",color:e.color})," "+e.label+" "),this.formatter(this.props.seriesValues[e.id],e))):Object(y.jsx)("div",{key:t,style:{display:"none"}})}render(){const e=this.props.series.map(this.createSeries);return Object(y.jsx)("div",{className:"monRhythmChart__legendHorizontal"},Object(y.jsx)(u.EuiFlexGroup,{wrap:!0,gutterSize:"s",className:"monRhythmChart__legendSeries"},e))}}function Lt(e,t,s){for(let a=0;a<e.length;a++){const i=e[a],n=i.data;let r=null;n.length>t&&n[t]&&(r=n[t][1]),s(i.id,r)}}function Ft(e,t){const s=e.length;if(1===s)return 0;if(0!==s){let a=null;e[0]&&(a=0);for(let i=1;i<s;++i)if(e[i]){if(e[i][0]>t){const s=e[i][0]-t;return null!==a&&s>Math.abs(t-e[a][0])?a:i}a=i}}return s-1}s(68);class timeseries_visualization_TimeseriesVisualization extends i.a.Component{constructor(e){super(e),this.debouncedUpdateLegend=Object(g.debounce)(this.updateLegend,Oe.q),this.debouncedUpdateLegend=this.debouncedUpdateLegend.bind(this),this.toggleFilter=this.toggleFilter.bind(this);const t=this.getLastValues(e);this.state={values:{},seriesToShow:Object(g.keys)(t),ignoreVisibilityUpdates:!1}}filterLegend(e){if(!Object(g.has)(this.state.values,e))return[];const t=Object(g.keys)(this.state.values).length!==this.state.seriesToShow.length,s=Object(g.includes)(this.state.seriesToShow,e),a=[];return t&&s?this.setState({ignoreVisibilityUpdates:!1,seriesToShow:Object.keys(this.state.values)}):(a.push(e),this.setState({ignoreVisibilityUpdates:!0,seriesToShow:[e]})),a}toggleFilter(e,t){const s=this.filterLegend(t);Object(g.isFunction)(this.props.onFilter)&&this.props.onFilter(s)}getLastValues(e){e=e||this.props;const t={};return e.series.forEach((e=>{e.id||(e.id=e.label),t[e.id]=function(e){if(Object(g.isNumber)(e))return e;if(!Array.isArray(e))return null;const t=Object(g.get)(Object(g.last)(e),"[1]");return Object(g.isNumber)(t)?t:null}(e.data)})),t}updateLegend(e,t){const s={};if(e){const a=(e,t)=>{s[e]=t};t?Lt(this.props.series,t.dataIndex,a):function(e,t,s){for(let a=0;a<e.length;a++){const i=Ft(e[a].data,t);if(-1!==i){Lt(e,i,s);break}}}(this.props.series,e.x,a)}else Object(g.assign)(s,this.getLastValues());this.setState({values:s})}UNSAFE_componentWillReceiveProps(e){const t=this.getLastValues(e),s=Object(g.keys)(this.state.values),a=Object(g.keys)(t),i={values:t};Object(g.difference)(a,s).length&&!this.state.ignoreVisibilityUpdates&&(i.seriesToShow=a),this.setState(i)}render(){const e=this.props.hasLegend?Object(y.jsx)(horizontal_legend_HorizontalLegend,me()({seriesFilter:this.state.seriesToShow,seriesValues:this.state.values,onToggle:this.toggleFilter},this.props)):null;return Object(y.jsx)("div",{className:"monRhythmChart"},Object(y.jsx)("div",{style:{flexDirection:"column"},className:"monRhythmChart__content"},Object(y.jsx)("div",{className:"monRhythmChart__visualization"},Object(y.jsx)(It,me()({seriesToShow:this.state.seriesToShow,updateLegend:this.debouncedUpdateLegend},this.props))),e))}}function Pt({series:e,onBrush:t}){const s=e.map(((e,t)=>({color:_t(e.metric.app,t),data:e.data,label:e.metric.label}))),a=Object(g.first)(e),i=Object(g.get)(a,"timeRange"),n=function(e){const t=Object(g.get)(e,"metric.format","0,0.0"),s=Object(g.get)(e,"metric.units","");return function(e){let a=Je()(e).format(t);return"B"!==s&&""!==s&&(a+=" "+s),a}}(a);return Object(y.jsx)(timeseries_visualization_TimeseriesVisualization,{series:s,timeRange:i,tickFormatter:n,onBrush:t})}function Nt({series:e,bucketSize:t}){const s=e.map(((e,t)=>Object(y.jsx)("tr",{key:`chart-tooltip-${t}`,"data-debug-metric-agg":e.metric.metricAgg,"data-debug-metric-field":e.metric.field,"data-debug-metric-is-derivative":e.metric.isDerivative,"data-debug-metric-has-calculation":e.metric.hasCalculation},Object(y.jsx)("td",{className:"monChart__tooltipLabel"},e.metric.label),Object(y.jsx)("td",{className:"monChart__tooltipValue"},e.metric.description))));return Object(y.jsx)("table",null,Object(y.jsx)("tbody",null,Object(y.jsx)("tr",null,Object(y.jsx)("td",{className:"monChart__tooltipLabel"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.chart.infoTooltip.intervalLabel",defaultMessage:"Interval"})),Object(y.jsx)("td",{className:"monChart__tooltipValue"},t)),s))}function Dt(e=[]){return Object(g.chain)(e.map((e=>e.metric.title||e.metric.label))).first().value()}function Rt({series:e,onBrush:t,zoomInfo:s}){if(void 0===e)return null;const i=Dt(e).replace(/\s+/,"--"),n=function(e){let t=Object(g.get)(e,"[0].metric.units");if("B"===t){let s=0;Object(g.forEach)(e,(e=>{const t=Object(g.last)(e.data)||[null,0];s=Math.max(s,t[1])})),t=Je()(s).byteUnits()}return t}(e),r=Object(g.get)(Object(g.first)(e),"bucket_size"),o=[c.i18n.translate("xpack.monitoring.chart.seriesScreenReaderListDescription",{defaultMessage:"Interval: {bucketSize}",values:{bucketSize:r}})].concat(e.map((e=>`${e.metric.label}: ${e.metric.description}`)));let l=null;return e.alerts&&(l=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e.alerts}))),Object(y.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"s",className:"monRhythmChart__wrapper"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s",tabIndex:"0"},Object(y.jsx)("h2",null,Dt(e),n?` (${n})`:"",Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("span",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.chart.screenReaderUnaccessibleTitle",defaultMessage:"This chart is not screen reader accessible"})))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiIconTip,{anchorClassName:"eui-textRight eui-alignMiddle monChart__tooltipTrigger",type:"iInCircle",position:"right",content:Object(y.jsx)(Nt,{series:e,bucketSize:r})}),Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("span",{id:`monitoringChart${i}`},o.join(". "))))),(e=>e&&e.showZoomOutBtn()?Object(y.jsx)(u.EuiFlexItem,{className:"monRhythmChart__zoom"},Object(y.jsx)(u.EuiTextAlign,{textAlign:"right"},Object(y.jsx)(u.EuiButtonEmpty,{color:"primary",size:"s",iconType:"magnifyWithMinus",onClick:e.zoomOutHandler},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.zoomOut",defaultMessage:"Zoom out"})))):null)(s))),l)),Object(y.jsx)(u.EuiFlexItem,{style:{minHeight:"200px"}},Object(y.jsx)(Pt,{series:e,onBrush:t})))}timeseries_visualization_TimeseriesVisualization.defaultProps={hasLegend:!0},s(73),s(78);const At=({children:e})=>Object(y.jsx)("span",{style:{fontFamily:"monospace"}},e),zt=({reason:e})=>{const t=x.a.shims.docLinks.links.filebeat.installation,s=x.a.shims.docLinks.links.filebeat.elasticsearchModule,a=x.a.shims.docLinks.links.monitoring.troubleshootKibana;let i=c.i18n.translate("xpack.monitoring.logs.reason.defaultTitle",{defaultMessage:"No log data found"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessage",defaultMessage:"We did not find any log data and we are unable to diagnose why. {link}",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:t},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessageLink",defaultMessage:"Please verify your setup is correct."}))}});return!1===e.indexPatternExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternTitle",{defaultMessage:"No log data found"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternMessage",defaultMessage:"Set up {link}, then configure your Elasticsearch output to your monitoring cluster.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:t},c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternLink",{defaultMessage:"Filebeat"}))}})):!1===e.indexPatternInTimeRangeExists||!1===e.typeExists&&e.typeExistsAtAnyTime?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternInTimePeriodTitle",{defaultMessage:"No logs for the selected time"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternInTimePeriodMessage",defaultMessage:"Use the time filter to adjust your timeframe."})):!1===e.typeExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noTypeTitle",{defaultMessage:"No logs for Elasticsearch"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noTypeMessage",defaultMessage:"Follow {link} to set up Elasticsearch.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noTypeLink",{defaultMessage:"these directions"}))}})):!1===e.usingStructuredLogs?(i=c.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsTitle",{defaultMessage:"No structured logs found"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.notUsingStructuredLogsMessage",defaultMessage:"Check if the {varPaths} setting {link}.",values:{varPaths:Object(y.jsx)(At,null,"var.paths"),link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsLink",{defaultMessage:"points to JSON logs"}))}})):!1===e.clusterExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noClusterTitle",{defaultMessage:"No logs for this cluster"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noClusterMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noClusterLink",{defaultMessage:"setup"}))}})):!1===e.nodeExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noNodeTitle",{defaultMessage:"No logs for this Elasticsearch node"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noNodeMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noNodeLink",{defaultMessage:"setup"}))}})):!1===e.indexExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexTitle",{defaultMessage:"No logs for this index"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexMessage",defaultMessage:"We found logs, but none for this index. If this problem continues, check that your {link} is correct.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noIndexLink",{defaultMessage:"setup"}))}})):!1===e.correctIndexName&&(i=c.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameTitle",{defaultMessage:"Corrupted filebeat index"}),n=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.reason.correctIndexNameMessage",defaultMessage:"There is an issue reading from your filebeat indices.  {link}.",values:{link:Object(y.jsx)(u.EuiLink,{target:"_blank",href:a},c.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameLink",{defaultMessage:"Click here for more information"}))}})),Object(y.jsx)(u.EuiCallOut,{title:i,color:"warning",iconType:"help"},Object(y.jsx)("p",null,n))},Bt=e=>{var t;return Ie(e,null===(t=x.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"))},Vt=c.i18n.translate("xpack.monitoring.logs.listing.timestampTitle",{defaultMessage:"Timestamp"}),Ut=c.i18n.translate("xpack.monitoring.logs.listing.levelTitle",{defaultMessage:"Level"}),$t=c.i18n.translate("xpack.monitoring.logs.listing.typeTitle",{defaultMessage:"Type"}),Gt=c.i18n.translate("xpack.monitoring.logs.listing.messageTitle",{defaultMessage:"Message"}),qt=c.i18n.translate("xpack.monitoring.logs.listing.componentTitle",{defaultMessage:"Component"}),Ht=c.i18n.translate("xpack.monitoring.logs.listing.nodeTitle",{defaultMessage:"Node"}),Wt=[{field:"timestamp",name:Vt,width:"12%",render:e=>Bt(e)},{field:"level",name:Ut,width:"5%"},{field:"type",name:$t,width:"10%",render:e=>Object(g.upperFirst)(e)},{field:"message",name:Gt,width:"55%"},{field:"component",name:qt,width:"18%"}],Kt=[{field:"timestamp",name:Vt,width:"12%",render:e=>Bt(e)},{field:"level",name:Ut,width:"5%"},{field:"type",name:$t,width:"10%",render:e=>Object(g.upperFirst)(e)},{field:"message",name:Gt,width:"45%"},{field:"component",name:qt,width:"15%"},{field:"node",name:Ht,width:"13%"}];function Jt(e,t,s){const a=`${x.a.shims.getBasePath()}/app/logs/link-to/${Oe.A}/logs`,i=[];return e&&i.push(`elasticsearch.cluster.uuid:${e}`),t&&i.push(`elasticsearch.node.id:${t}`),s&&i.push(`elasticsearch.index.name:${s}`),0===i.length?a:`${a}?filter=${i.join(" and ")}`}class logs_Logs extends a.PureComponent{renderLogs(){const{logs:{enabled:e,logs:t},nodeId:s,indexUuid:a}=this.props;return e?Object(y.jsx)(u.EuiBasicTable,{items:t||[],columns:s||a?Wt:Kt}):null}renderNoLogs(){const{logs:{enabled:e,reason:t}}=this.props;return e?null:Object(y.jsx)(zt,{reason:t})}renderCallout(){const e=x.a.shims.capabilities,t=e.logs&&e.logs.show,{logs:{enabled:s},nodeId:a,clusterUuid:i,indexUuid:n}=this.props;return s&&t?Object(y.jsx)(u.EuiCallOut,{size:"m",title:c.i18n.translate("xpack.monitoring.logs.listing.calloutTitle",{defaultMessage:"Want to see more log entries?"}),iconType:"logsApp"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logs.listing.linkText",defaultMessage:"Visit {link} to dive deeper.",values:{link:Object(y.jsx)(u.EuiLink,{href:Jt(i,a,n)},c.i18n.translate("xpack.monitoring.logs.listing.calloutLinkText",{defaultMessage:"Logs"}))}}))):null}render(){const{nodeId:e,indexUuid:t,logs:{limit:s}}=this.props;let a;return a=e?c.i18n.translate("xpack.monitoring.logs.listing.nodePageDescription",{defaultMessage:"Showing the most recent log entries for this node, up to {limit} total log entries.",values:{limit:s}}):t?c.i18n.translate("xpack.monitoring.logs.listing.indexPageDescription",{defaultMessage:"Showing the most recent log entries for this index, up to {limit} total log entries.",values:{limit:s}}):c.i18n.translate("xpack.monitoring.logs.listing.clusterPageDescription",{defaultMessage:"Showing the most recent log entries for this cluster, up to {limit} total log entries.",values:{limit:s}}),Object(y.jsx)("div",null,Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h1",null,c.i18n.translate("xpack.monitoring.logs.listing.pageTitle",{defaultMessage:"Recent Log Entries"}))),Object(y.jsx)(u.EuiText,{size:"s"},Object(y.jsx)("p",null,a)),Object(y.jsx)(u.EuiSpacer,{size:"m"}),this.renderLogs(),this.renderNoLogs(),Object(y.jsx)(u.EuiSpacer,{size:"m"}),this.renderCallout())}}function Yt({clusterStatus:e,metrics:t,logs:s,cluster:a,shardActivity:i,...n}){const r=[t.cluster_search_request_rate,t.cluster_query_latency,t.cluster_index_request_rate,t.cluster_index_latency];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(et,{stats:e})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},n)),Object(y.jsx)(u.EuiSpacer,null)))))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(logs_Logs,{logs:s,clusterUuid:a.cluster_uuid})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(kt,me()({data:i},n)))))}const Qt=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingDownText",{defaultMessage:"down"}),Xt=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingUpText",{defaultMessage:"up"});function Zt(){return Object(y.jsx)("div",{className:"monTableCell__offline"},"N/A")}const es=e=>e||0===e?e>0?Xt:Qt:null,ts=e=>e||0===e?e>0?"sortUp":"sortDown":null,ss=(e,t,s,a)=>s?Ze(e,t,"%",{prependSpace:!1}):Ze(e,t,a);function as({isOnline:e,metric:t={},isPercent:s,...i}){const[n,r]=Object(a.useState)(!1);if(!e)return Object(y.jsx)(Zt,null);const{lastVal:o,maxVal:l,minVal:d,slope:m}=Object(g.get)(t,"summary",{}),p=Object(g.get)(t,"metric.format"),j=Object(g.get)(t,"metric.units"),b=[{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.trending",{defaultMessage:"Trending"}),description:es(m)},{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.max",{defaultMessage:"Max value"}),description:ss(l,p,s,j)},{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.min",{defaultMessage:"Min value"}),description:ss(d,p,s,j)}],x=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.iconLabel",{defaultMessage:"More information about this metric"}),h=Object(y.jsx)(u.EuiButtonIcon,{color:"text",onClick:()=>r((e=>!e)),iconType:ts(m),"data-test-subj":`monitoringCellIcon-${i["data-test-subj"]}`,title:x,"aria-label":x});return Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1}),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{"data-test-subj":i["data-test-subj"],gutterSize:"xs"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiPopover,{ownFocus:!0,button:h,isOpen:n,closePopover:()=>r(!1)},Object(y.jsx)("div",{"data-test-subj":`monitoringCellPopover-${i["data-test-subj"]}`},Object(y.jsx)(u.EuiDescriptionList,{type:"column",compressed:!0,listItems:b,style:{maxWidth:"150px"}}),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,{size:"xs"},c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.preface",{defaultMessage:"Applies to current time period"}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiText,null,ss(o,p,s))))))}const is=c.i18n.translate("xpack.monitoring.setupMode.clickToMonitorWithMetricbeat",{defaultMessage:"Monitor with Metricbeat"}),ns=c.i18n.translate("xpack.monitoring.setupMode.clickToDisableInternalCollection",{defaultMessage:"Disable self monitoring"}),rs=c.i18n.translate("xpack.monitoring.setupMode.usingMetricbeatCollection",{defaultMessage:"Monitored with Metricbeat"}),os=c.i18n.translate("xpack.monitoring.setupMode.unknown",{defaultMessage:"N/A"});function ls({setupMode:e,productName:t,status:s,instance:i,clusterUuid:n}){let r=null,o=null;const l=e.data||{},d=e.meta||{},g=l.totalUniquePartiallyMigratedCount===l.totalUniqueInstanceCount;if(s.isPartiallyMigrated&&t===Oe.r){if(!g)return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiIcon,{type:"flag"})," ",Object(y.jsx)(u.EuiTextColor,{color:"warning",size:"xs"},c.i18n.translate("xpack.monitoring.setupMode.monitorAllNodes",{defaultMessage:"Some nodes use only self monitoring"})));o=ns,d.liveClusterUuid===n&&(r=e.shortcutToFinishMigration)}const m={};(s.isInternalCollector||s.isPartiallyMigrated||s.isNetNewUser)&&(m.onClick=r||(()=>e.openFlyout(i)));let p=null;return s.isInternalCollector?(m.onClick&&(m.onClickAriaLabel=o||is),p=Object(y.jsx)(u.EuiBadge,me()({color:"danger",iconType:"flag"},m),o||is)):s.isPartiallyMigrated?(m.onClick&&(m.onClickAriaLabel=o||ns),p=Object(y.jsx)(u.EuiBadge,me()({color:"warning",iconType:"flag"},m),o||ns)):s.isFullyMigrated?(m.onClick&&(m.onClickAriaLabel=o||rs),p=Object(y.jsx)(u.EuiBadge,me()({color:"primary",iconType:"flag"},m),o||rs)):s.isNetNewUser?(m.onClick&&(m.onClickAriaLabel=o||is),p=Object(y.jsx)(u.EuiBadge,me()({color:"danger",iconType:"flag"},m),o||is)):(m.onClick&&(m.onClickAriaLabel=o||os),p=Object(y.jsx)(u.EuiBadge,me()({color:"danger",iconType:"flag"},m),o||os)),p}const cs=c.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeat",{defaultMessage:"Monitor with Metricbeat"});function us({setupModeData:e,productName:t,customRenderer:s=null}){if(s){const{shouldRender:e,componentToRender:t}=s();if(e)return t}const i=Object(g.get)(e,"detected.mightExist");return e.totalUniqueInstanceCount>0?e.totalUniqueFullyMigratedCount===e.totalUniqueInstanceCount?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.metricbeatAllNodes",{defaultMessage:"Metricbeat is monitoring all {identifier}.",values:{identifier:ut(t,!0)}}),color:"success",iconType:"flag"}),Object(y.jsx)(u.EuiSpacer,{size:"m"})):e.totalUniquePartiallyMigratedCount===e.totalUniqueInstanceCount?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring"}),color:"warning",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionDescription",{defaultMessage:"Metricbeat is now monitoring your {product} {identifier}. Disable self monitoring to finish the migration.",values:{product:ot(t),identifier:ut(t,!0)}}))),Object(y.jsx)(u.EuiSpacer,{size:"m"})):e.totalUniqueInstanceCount>0?0===e.totalUniqueFullyMigratedCount&&0===e.totalUniquePartiallyMigratedCount?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:cs,color:"danger",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeatDescription",{defaultMessage:"These {product} {identifier} are self monitored.\n                Click 'Monitor with Metricbeat' to migrate.",values:{product:ot(t),identifier:ut(t,!0)}}))),Object(y.jsx)(u.EuiSpacer,{size:"m"})):Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:cs,color:"danger",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.migrateSomeToMetricbeatDescription",{defaultMessage:"Some {product} {identifier} are monitored through self monitoring. Migrate to monitor with Metricbeat.",values:{product:ot(t),identifier:ut(t,!0)}}))),Object(y.jsx)(u.EuiSpacer,{size:"m"})):null:i?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.detectedNodeTitle",{defaultMessage:"{product} {identifier} detected",values:{product:ot(t),identifier:ut(t)}}),color:"warning",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.detectedNodeDescription",{defaultMessage:"Click 'Set up monitoring' below to start monitoring this {identifier}.",values:{identifier:ut(t)}}))),Object(y.jsx)(u.EuiSpacer,{size:"m"})):Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.noMonitoringDataFound",{defaultMessage:"No {product} {identifier} detected",values:{product:ot(t),identifier:ut(t,!0)}}),iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.netNewUserDescription",{defaultMessage:"Click 'Set up monitoring' to start monitoring with Metricbeat."}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}))}const ds=e=>t=>Object(g.get)(t,[e,"summary","lastVal"]);function gs({clusterStatus:e,showCgroupMetricsElasticsearch:t,...s}){const{sorting:n,pagination:r,onTableChange:o,clusterUuid:l,setupMode:d,alerts:m}=s,p=((e,t,s,a)=>{const n=[],r=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuUsageColumnTitle",{defaultMessage:"CPU Usage"});return n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.nameColumnTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(e,a)=>{let n=Object(y.jsx)(u.EuiLink,{href:se(`#/elasticsearch/nodes/${a.resolver}`),"data-test-subj":`nodeLink-${a.resolver}`},e),r=null;if(U(I.d.MetricbeatMigration)){const i=Object(g.get)(t,"data.byUuid",{})[a.resolver]||{},o={uuid:a.resolver,name:a.name};r=Object(y.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(y.jsx)(ls,{setupMode:t,status:i,instance:o,productName:Oe.r,clusterUuid:s})),i.isNetNewUser&&(n=e)}return Object(y.jsx)("div",null,Object(y.jsx)("div",{className:"monTableCell__name"},Object(y.jsx)(u.EuiText,{size:"m"},(e=>{const{nodeTypeLabel:t,nodeTypeClass:s}=e,a=t||c.i18n.translate("xpack.monitoring.elasticsearch.nodes.unknownNodeTypeLabel",{defaultMessage:"Unknown"}),n=s||"empty";return t?Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(u.EuiToolTip,{position:"bottom",content:a},Object(y.jsx)(u.EuiIcon,{type:n}))," "," "):null})(a),Object(y.jsx)("span",{"data-test-subj":"name"},n))),Object(y.jsx)("div",{className:"monTableCell__transportAddress"},function(e){if("string"!=typeof e)return null;const t=e.match(/inet\[[^\/]*\/([^\/\]]+)\]/);return t?t[1]:e}(a.transport_address)),r)}}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(e,t)=>Object(y.jsx)(Ue,{showBadge:!0,alerts:a,stateFilter:e=>(e.nodeId||e.nodeUuid)===t.resolver})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumnTitle",{defaultMessage:"Status"}),dataType:"boolean",field:"isOnline",sortable:!0,render:e=>{const t=e?c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.onlineLabel",{defaultMessage:"Online"}):c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.offlineLabel",{defaultMessage:"Offline"});return Object(y.jsx)(u.EuiToolTip,{content:t,position:"bottom",trigger:"hover"},Object(y.jsx)(u.EuiHealth,{color:e?"success":"subdued","data-test-subj":"statusIcon",alt:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.healthAltIcon",{defaultMessage:"Status: {status}",values:{status:t}})},t))}}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.shardsColumnTitle",{defaultMessage:"Shards"}),dataType:"number",field:"shardCount",sortable:!0,render:(e,t)=>t.isOnline?Object(y.jsx)("span",{"data-test-subj":"shards"},e):Object(y.jsx)(Zt,null)}),e?(n.push({name:r,dataType:"number",field:"node_cgroup_quota",sortable:ds("node_cgroup_quota"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuQuota"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuThrottlingColumnTitle",{defaultMessage:"CPU Throttling"}),dataType:"number",field:"node_cgroup_throttled",sortable:ds("node_cgroup_throttled"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"cpuThrottled"})})):(n.push({name:r,dataType:"number",field:"node_cpu_utilization",sortable:ds("node_cpu_utilization"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuUsage"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.loadAverageColumnTitle",{defaultMessage:"Load Average"}),dataType:"number",field:"node_load_average",sortable:ds("node_load_average"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"loadAverage"})})),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.jvmMemoryColumnTitle",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),dataType:"number",field:"node_jvm_mem_percent",sortable:ds("node_jvm_mem_percent"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"jvmMemory"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.diskFreeSpaceColumnTitle",{defaultMessage:"Disk Free Space"}),dataType:"number",field:"node_free_space",sortable:ds("node_free_space"),render:(e,t)=>Object(y.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"diskFreeSpace"})}),n})(t,d,l,m),j=s.nodes||[];if(d&&d.enabled&&U(I.d.MetricbeatMigration)){const e=j.reduce(((e,t)=>({...e,[t.id||t.resolver]:t})),{});j.push(...Object.entries(d.data.byUuid).reduce(((t,[s,a])=>(!e[s]&&a.node&&t.push(a.node),t)),[]))}let b=null;return U(I.d.MetricbeatMigration)&&(b=Object(y.jsx)(us,{setupModeData:d.data,useNodeIdentifier:!0,productName:Oe.r,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null},t=0===d.data.totalUniqueInstanceCount,s=0===d.data.totalUniqueInternallyCollectedCount&&0===d.data.totalUniqueFullyMigratedCount&&0===d.data.totalUniquePartiallyMigratedCount;if(t||s)e.shouldRender=!0,e.componentToRender=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Elasticsearch node detected"}),color:d.data.totalUniqueInstanceCount>0?"danger":"warning",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following nodes are not monitored. Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}));else if(d.data.totalUniquePartiallyMigratedCount===d.data.totalUniqueInstanceCount){const t=Object(g.get)(d.meta,"liveClusterUuid")===l?d.shortcutToFinishMigration:d.openFlyout;e.shouldRender=!0,e.componentToRender=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionTitle",{defaultMessage:"Metricbeat is now monitoring your Elasticsearch nodes"}),color:"warning",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionDescription",{defaultMessage:"Disable self monitoring to finish the migration."})),Object(y.jsx)(u.EuiButton,{onClick:t,size:"s",color:"warning",fill:!0},c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionMigrationButtonLabel",{defaultMessage:"Disable self monitoring"}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}))}return e}})),Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.heading",defaultMessage:"Elasticsearch nodes"}))),e?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(et,{stats:e,alerts:m})),Object(y.jsx)(u.EuiSpacer,{size:"m"})):null,b,Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(gt,me()({className:"elasticsearchNodesTable",rows:j,columns:p,sorting:n,pagination:r,setupMode:d,productName:Oe.r,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.monitoringTablePlaceholder",{defaultMessage:"Filter Nodes…"})}},onTableChange:o},s)))))}function ms({isOnline:e,status:t}){const s=e?pe.GREEN:pe.GRAY;return Object(y.jsx)(be,{type:s,label:c.i18n.translate("xpack.monitoring.elasticsearch.node.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:t}})})}function ps({stats:e,alerts:t={}}){const{transport_address:s,usedHeap:i,freeSpace:n,totalSpace:r,documents:o,dataSize:l,indexCount:u,totalShards:d,nodeTypeLabel:g,status:m,isOnline:p}=e,j=n/r*100,b=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(y.jsx)(Ue,{alerts:t,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.transportAddress",{defaultMessage:"Transport Address"}),value:s,"data-test-subj":"transportAddress"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.jvmHeapLabel",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),value:Ze(i,"0,0.[00]","%",{prependSpace:!1}),"data-test-subj":"jvmHeap"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.freeDiskSpaceLabel",{defaultMessage:"Free Disk Space"}),value:Ze(n,"0.0 b")+" ("+Ze(j,"0,0.[00]","%",{prependSpace:!1})+")","data-test-subj":"freeDiskSpace"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.documentsLabel",{defaultMessage:"Documents"}),value:Ze(o,"0.[0]a"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.dataLabel",{defaultMessage:"Data"}),value:Ze(l,"0.0 b"),"data-test-subj":"dataSize"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.indicesLabel",{defaultMessage:"Indices"}),value:Ze(u,"int_commas"),"data-test-subj":"indicesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.shardsLabel",{defaultMessage:"Shards"}),value:Ze(d,"int_commas"),"data-test-subj":"shardsCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.typeLabel",{defaultMessage:"Type"}),value:g,"data-test-subj":"nodeType"}];return Object(y.jsx)(He,{metrics:b,status:m,isOnline:p,IconComponent:({status:e,isOnline:t})=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(ms,{status:e,isOnline:t})),"data-test-subj":"elasticsearchNodeDetailStatus"})}const js=e=>{const{alerts:t}=e;if(V(i.a.useContext(xe)))return null;const s=Object.values(t).flat().map((e=>e.states.map((t=>({alert:e,state:t}))))).flat();if(0===s.length)return null;const n=s.map(((e,t)=>{const a=Object(y.jsx)("div",null,Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiIcon,{type:"alert",size:"m",color:"danger"})),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiTextColor,{color:"danger"},Ee(e.state.state.ui.message))))),{code:i}=e.state.state.ui.message,n=Object(y.jsx)(u.EuiAccordion,{id:`monitoringAlertCallout_${t}`,buttonContent:a,paddingSize:"s"},null!=i&&i.length?Object(y.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:300},i):null,Object(y.jsx)(u.EuiListGroup,{flush:!0,bordered:!0,gutterSize:"m",size:"xs",style:{marginTop:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem"}},(e.state.state.ui.message.nextSteps||[]).map(((e,s)=>Object(y.jsx)(u.EuiListGroupItem,{onClick:()=>{},label:Ee(e),key:t+s}))),Object(y.jsx)(u.EuiListGroupItem,{label:Object(y.jsx)(Me,{alert:e.alert.sanitizedRule,key:t,compressed:!0})}))),r=t!==s.length-1?Object(y.jsx)(u.EuiSpacer,null):null;return Object(y.jsx)("div",{key:t},n,r)}));return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiPanel,null,n),Object(y.jsx)(u.EuiSpacer,null))};s(83);class table_head_IndexLabel extends i.a.Component{constructor(e){super(e),this.state={showSystemIndices:e.showSystemIndices},this.toggleShowSystemIndicesState=this.toggleShowSystemIndicesState.bind(this)}toggleShowSystemIndicesState(e){const t=e.target.checked;this.setState({showSystemIndices:t}),this.props.toggleShowSystemIndices(t)}render(){return Object(y.jsx)(u.EuiFlexGroup,null,Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableHead.indicesLabel",defaultMessage:"Indices"})),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiSwitch,{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableHead.filterSystemIndices",{defaultMessage:"Filter for system indices"}),onChange:this.toggleShowSystemIndicesState,checked:this.state.showSystemIndices,"data-test-subj":"shardShowSystemIndices"})))}}class table_head_TableHead extends i.a.Component{constructor(e){super(e)}createColumn({key:e,content:t}){return Object(y.jsx)("th",{scope:"col",key:e,colSpan:1},t)}render(){const e=(this.props.labels||[]).map((e=>{const t={key:e.content.toLowerCase()};return e.showToggleSystemIndicesComponent?t.content=Object(y.jsx)(table_head_IndexLabel,{toggleShowSystemIndices:this.props.toggleShowSystemIndices,showSystemIndices:this.props.showSystemIndices}):t.content=e.content,t})).map(this.createColumn);return Object(y.jsx)("thead",null,Object(y.jsx)("tr",null,e))}}function bs(e,t){const s=[e.type];return t&&s.push(t),"shard"===e.type&&(s.push("monShard"),Object(g.get)(e,"shard.primary",e.primary)?s.push("primary"):s.push("replica"),s.push(Object(g.get)(e,"shard.state",e.state).toLowerCase()),"UNASSIGNED"===Object(g.get)(e,"shard.state",e.state)&&Object(g.get)(e,"shard.primary",e.primary)&&s.push("emergency")),e.master&&s.push("master"),s.join(" ")}const xs={};class shard_Shard extends i.a.Component{constructor(...e){super(...e),f()(this,"state",{tooltipVisible:!1}),f()(this,"generateKey",(e=>{const t=this.props.shard,s=Object(g.get)(t,"shard.primary",t.primary)?"primary":"replica",a="UNASSIGNED"===Object(g.get)(t,"shard.state",t.state)?Math.random():"",i=e?Object(g.get)(t,"relocation_node.uuid",t.relocating_node):Object(g.get)(t,"shard.name",t.node);return t.index+"."+i+"."+s+"."+t.shard+a})),f()(this,"toggle",(e=>{if(this.props.shard.tooltip_message){const t="mouseenter"===e.type?"show":"hide",s=this.generateKey(!0);this.setState({tooltipVisible:"show"===t}),function(){const e=Array.prototype.slice.call(arguments),t=e.shift();xs[t]&&Object(g.each)(xs[t],(function(t){t.apply(null,e)}))}(s,t)}}))}componentDidMount(){let e;const t=this.props.shard,s=this;var a,i;t.tooltip_message&&(e=this.generateKey(),a=e,i=function(e){s.setState({tooltipVisible:"show"===e})},Object(g.isArray)(xs[a])||(xs[a]=[]),xs[a].push(i))}componentWillUnmount(){let e;this.props.shard.tooltip_message&&(e=this.generateKey(),delete xs[e])}render(){const e=this.props.shard,t=bs(e),s=function(e){const t=e.split(" ");return t.includes("emergency")?"danger":t.includes("unassigned")?t.includes("replica")?"warning":"danger":t.includes("relocating")?"accent":t.includes("initializing")?"default":t.includes("primary")?"primary":t.includes("replica")?"success":void 0}(t),a=t+" "+Object(g.get)(e,"shard.number",e.shard);let i=Object(y.jsx)(u.EuiBadge,{color:s},Object(g.get)(e,"shard.number",e.shard));const n=e.tooltip_message||c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"});return this.state.tooltipVisible&&(i=Object(y.jsx)(u.EuiToolTip,{content:n,position:"bottom","data-test-subj":"shardTooltip"},Object(y.jsx)("p",null,i))),Object(y.jsx)("div",{onMouseEnter:this.toggle,onMouseLeave:this.toggle,className:t,"data-shard-tooltip":n,"data-shard-classification":a,"data-test-subj":"shardIcon"},i)}}f()(shard_Shard,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"}));class unassigned_Unassigned extends i.a.Component{constructor(...e){super(...e),f()(this,"createShard",(e=>{const t=e.primary?"primary":"replica",s="UNASSIGNED"===e.state?Math.random():"",a=e.index+"."+e.node+"."+t+"."+e.state+"."+e.shard+s;return Object(y.jsx)(shard_Shard,{shard:e,key:a})}))}render(){const e=Object(g.sortBy)(this.props.shards,"shard").map(this.createShard);return Object(y.jsx)("td",{className:"monUnassigned","data-test-subj":"clusterView-Unassigned"},Object(y.jsx)(u.EuiFlexGroup,{wrap:!0,className:"monUnassigned__children"},e))}}f()(unassigned_Unassigned,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedDisplayName",{defaultMessage:"Unassigned"}));const hs=e=>{let t="indices",s=e.name;return"node"===e.type&&(t="nodes",s=e.id),se(`#/elasticsearch/${t}/${s}`)};function fs(e){return"node"===e.type?[!e.master,e.name]:[e.name]}class assigned_Assigned extends i.a.Component{constructor(...e){super(...e),f()(this,"createShard",(e=>{const t=Object(g.get)(e,"shard.primary",e.primary)?"primary":"replica",s=`${Object(g.get)(e,"index.name",e.index)}.${Object(g.get)(e,"node.name",e.node)}.${t}.${Object(g.get)(e,"shard.state",e.state)}.${Object(g.get)(e,"shard.number",e.shard)}`;return Object(y.jsx)(shard_Shard,{shard:e,key:s})})),f()(this,"createChild",(e=>{const t=e.id,s=["monChild"];"index"===e.type&&s.push("monChild--index");const a=Object(g.get)(this.props.shardStats.indices,t);if(a)switch(a.status){case"red":s.push("monChild--danger");break;case"yellow":s.push("monChild--warning")}const i=Object(y.jsx)(u.EuiLink,{href:hs(e)},e.name),n="master"===e.node_type?Object(y.jsx)(u.EuiIcon,{type:"starFilledSpace",color:"primary"}):null,r=Object(g.sortBy)(e.children,"shard").map(this.createShard);return Object(y.jsx)(u.EuiFlexItem,{grow:!1,className:bs(e,s.join(" ")),key:t,"data-test-subj":`clusterView-Assigned-${t}`,"data-status":a&&a.status},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(y.jsx)(u.EuiFlexItem,{grow:!1,className:"monChild__title eui-textNoWrap"},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},i),Object(y.jsx)(u.EuiFlexItem,{grow:!1},n))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s"},r))))}))}render(){const e=Object(g.sortBy)(this.props.data,fs).map(this.createChild);return Object(y.jsx)("td",{className:"monAssigned"},Object(y.jsx)(u.EuiFlexGroup,{wrap:!0,className:"monAssigned__children"},e))}}const Os=e=>{let t;return e.data.unassigned&&e.data.unassigned.length?t=Object(y.jsx)(unassigned_Unassigned,{shards:e.data.unassigned}):3===e.cols&&(t=Object(y.jsx)("td",null)),Object(y.jsx)("tr",null,t,Object(y.jsx)(assigned_Assigned,{shardStats:e.shardStats,data:e.data.children}))};class table_body_TableBody extends i.a.Component{constructor(...e){super(...e),f()(this,"createRow",((e,t)=>Object(y.jsx)(Os,me()({key:`shardRow-${t}`,data:e},this.props))))}render(){return 0===this.props.totalCount?Object(y.jsx)("tbody",null,Object(y.jsx)("tr",null,Object(y.jsx)("td",{colSpan:this.props.cols},Object(y.jsx)("div",null,Object(y.jsx)("p",{style:{margin:"10px 0"},className:"text-center lead"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableBody.noShardsAllocatedDescription",defaultMessage:"There are no shards allocated."})))))):this.props.shardStats&&this.props.rows.length?Object(y.jsx)("tbody",null,this.props.rows.map(this.createRow)):Object(y.jsx)("tbody",null,Object(y.jsx)("tr",null,Object(y.jsx)("td",{colSpan:this.props.cols})))}}f()(table_body_TableBody,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableBodyDisplayName",{defaultMessage:"TableBody"}));const vs=e=>Object(y.jsx)("table",{cellPadding:"0",cellSpacing:"0",className:"table"},Object(y.jsx)(table_head_TableHead,{labels:e.labels,toggleShowSystemIndices:e.toggleShowSystemIndices,showSystemIndices:e.showSystemIndices}),Object(y.jsx)(table_body_TableBody,{filter:e.filter,totalCount:e.totalCount,rows:e.nodesByIndices,cols:e.labels.length,shardStats:e.shardStats})),Es=e=>{const t=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.primaryLabel",{defaultMessage:"Primary"}),color:"primary"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.replicaLabel",{defaultMessage:"Replica"}),color:"success"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.relocatingLabel",{defaultMessage:"Relocating"}),color:"accent"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.initializingLabel",{defaultMessage:"Initializing"}),color:"default"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedPrimaryLabel",{defaultMessage:"Unassigned Primary"}),color:"danger"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedReplicaLabel",{defaultMessage:"Unassigned Replica"}),color:"warning"}];return Object(y.jsx)("div",{className:"monCluster"},Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.shardLegendTitle",defaultMessage:"Shard Legend"}))),Object(y.jsx)(u.EuiSpacer,{size:"xs"}),Object(y.jsx)(u.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},t.map((e=>Object(y.jsx)(u.EuiFlexItem,{grow:!1,key:e.label},Object(y.jsx)(u.EuiBadge,{color:e.color},e.label))))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(vs,e))},ys=({nodeSummary:e,metrics:t,logs:s,alerts:a,nodeId:i,clusterUuid:n,...r})=>{const o=[t.node_jvm_mem,t.node_total_io,t.node_cpu_metric,t.node_load_average,t.node_latency,t.node_segment_count];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.node.heading",defaultMessage:"Elasticsearch node"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(ps,{stats:e,alerts:a})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:a}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},r)),Object(y.jsx)(u.EuiSpacer,null)))))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(logs_Logs,{logs:s,nodeId:i,clusterUuid:n})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Es,r))))};s(88);const Ms=e=>[{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.nameTitle",{defaultMessage:"Name"}),field:"name",width:"350px",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"name"},Object(y.jsx)(u.EuiLink,{href:se(`#/elasticsearch/indices/${e}`),"data-test-subj":`indexLink-${e}`},e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(t,s)=>Object(y.jsx)(Ue,{showBadge:!0,alerts:e,stateFilter:e=>e.meta.shardIndex===s.name})},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.statusTitle",{defaultMessage:"Status"}),field:"status",sortable:!0,render:e=>Object(y.jsx)("div",{className:"monElasticsearchIndicesTable__status",title:`Index status: ${e}`},Object(y.jsx)(We,{status:e})," ",Object(g.capitalize)(e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.documentCountTitle",{defaultMessage:"Document Count"}),field:"doc_count",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"documentCount"},Ze(e,Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.dataTitle",{defaultMessage:"Data"}),field:"data_size",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"dataSize"},Ze(e,we))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.indexRateTitle",{defaultMessage:"Index Rate"}),field:"index_rate",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"indexRate"},Ze(e,Te,"/s"))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.searchRateTitle",{defaultMessage:"Search Rate"}),field:"search_rate",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"searchRate"},Ze(e,Te,"/s"))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.unassignedShardsTitle",{defaultMessage:"Unassigned Shards"}),field:"unassigned_shards",sortable:!0,render:e=>Object(y.jsx)("div",{"data-test-subj":"unassignedShards"},Ze(e,"0"))}],ks=({clusterStatus:e,indices:t,sorting:s,pagination:a,onTableChange:i,toggleShowSystemIndices:n,showSystemIndices:r,alerts:o})=>Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.heading",defaultMessage:"Elasticsearch indices"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(et,{stats:e,alerts:o})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiSwitch,{label:Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.systemIndicesLabel",defaultMessage:"Filter for system indices"}),checked:r,onChange:e=>n(e.target.checked)}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(dt,{className:"elasticsearchIndicesTable",rows:t,columns:Ms(o),sorting:s,pagination:a,message:Object(y.jsx)("div",null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.noIndicesMatchYourSelectionDescription",defaultMessage:"There are no indices that match your selections. Try changing the time range selection."})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.howToShowSystemIndicesDescription",defaultMessage:"If you are looking for system indices (e.g., .kibana), try checking ‘Show system indices’."}))),search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.indices.monitoringTablePlaceholder",{defaultMessage:"Filter Indices…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))));function Ss({status:e}){const t=(()=>{const t=e.toUpperCase();return"OPENED"===t?pe.GREEN:"CLOSED"===t?pe.GRAY:"FAILED"===t?pe.RED:pe.YELLOW})();return Object(y.jsx)(be,{type:t,label:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.statusIconLabel",{defaultMessage:"Job Status: {status}",values:{status:e}})})}const _s=({clusterStatus:e,jobs:t,sorting:s,pagination:a,onTableChange:i})=>Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(et,{stats:e})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(dt,{className:"mlJobsTable",rows:t,columns:Ts,sorting:{...s,sort:{...s.sort,field:"job_id"}},pagination:a,message:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.noJobsDescription",{defaultMessage:"There are no Machine Learning Jobs that match your query. Try changing the time range selection."}),search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.filterJobsPlaceholder",{defaultMessage:"Filter Jobs…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["job_id"]}})))),Ts=[{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.jobIdTitle",{defaultMessage:"Job ID"}),field:"job_id",sortable:!0},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.stateTitle",{defaultMessage:"State"}),field:"state",sortable:!0,render:e=>Object(y.jsx)("div",null,Object(y.jsx)(Ss,{status:e})," ",Object(g.capitalize)(e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.processedRecordsTitle",{defaultMessage:"Processed Records"}),field:"data_counts.processed_record_count",sortable:!0,render:e=>Object(y.jsx)("span",null,Je()(e).format(Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.modelSizeTitle",{defaultMessage:"Model Size"}),field:"model_size_stats.model_bytes",sortable:!0,render:e=>Object(y.jsx)("span",null,Je()(e).format(we))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.forecastsTitle",{defaultMessage:"Forecasts"}),field:"forecasts_stats.total",sortable:!0,render:e=>Object(y.jsx)("span",null,Je()(e).format(Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.nodeTitle",{defaultMessage:"Node"}),field:"node.name",sortable:!0,render:(e,t)=>t.node?"id"in t.node?Object(y.jsx)(u.EuiLink,{href:se(`#/elasticsearch/nodes/${t.node.id}`)},e):Object(y.jsx)("span",null,e):Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.mlJobListing.noDataLabel",defaultMessage:"N/A"})}],ws=m.a.has;function Cs(e,t=""){let s="";t&&(s+=t+": ");const a=(e=>{const t=(e=>m.a.get(e,"resp.error.root_cause"))(e);if(Array.isArray(t))return t.map((e=>e.reason)).join("\n")})(e);return"string"==typeof e?s+=e:a?s+=a:e instanceof Error?s+=Cs.describeError(e):ws(e,"status")&&ws(e,"data")&&(-1===e.status?s+=c.i18n.translate("xpack.monitoring.formatMsg.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator."}):s+=c.i18n.translate("xpack.monitoring.formatMsg.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:e.status,errStatusText:e.statusText,errMessage:e.data.message}})),s}function Is(e){var t,s,a,i;return null!==(t=e.response)&&void 0!==t&&t.status&&-1!==(null===(s=e.response)||void 0===s?void 0:s.status)?Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,null===(a=e.body)||void 0===a?void 0:a.message),Object(y.jsx)(u.EuiText,{size:"xs"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.httpErrorMessage",defaultMessage:"HTTP {errStatus}",values:{errStatus:null===(i=e.response)||void 0===i?void 0:i.status}}))):Cs(e)}Cs.describeError=function(e){if(e)return e.shortMessage?e.shortMessage:e.body&&e.body.message?e.body.message:e.message?e.message:""+e};const Ls=()=>{var e;const{services:t}=Object(l.useKibana)(),s=Object(o.useHistory)();return Object(a.useCallback)((e=>{var a,i;if(403===(null===(a=e.response)||void 0===a?void 0:a.status))s.push("/access-denied");else if(404!==(null===(i=e.response)||void 0===i?void 0:i.status)||Object(g.includes)(window.location.hash,"no-data")){var n,r;null===(n=t.notifications)||void 0===n||n.toasts.addDanger({title:c.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestErrorNotificationTitle",{defaultMessage:"Monitoring Request Error"}),text:Object(l.toMountPoint)(Is(e),{theme$:null===(r=t.theme)||void 0===r?void 0:r.theme$})})}else{var o,d;const s=Is(e);null===(o=t.notifications)||void 0===o||o.toasts.addDanger({title:c.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestFailedNotificationTitle",{defaultMessage:"Monitoring Request Failed"}),text:Object(l.toMountPoint)(Object(y.jsx)("div",null,s,Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiButton,{size:"s",color:"danger",onClick:()=>window.location.reload()},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotification.retryButtonLabel",defaultMessage:"Retry"}))),{theme$:null===(d=t.theme)||void 0===d?void 0:d.theme$})})}}),[s,null===(e=t.notifications)||void 0===e?void 0:e.toasts,t.theme])},Fs=()=>{const{services:e}=Object(l.useKibana)(),t=Ls();return{shouldShowAlertsModal:function(e){const t="true"===window.sessionStorage.getItem("ALERTS_MODAL_HAS_BEEN_SHOWN"),s="true"===window.localStorage.getItem("ALERTS_MODAL_DECISION_MADE");return Object.keys(e).length>0?(window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),!1):!t&&!s},enableAlerts:async function(){try{var s,a;if(null===(s=e.http)||void 0===s||!s.post)throw new Error("HTTP service is unavailable");const t=await e.http.post("../api/monitoring/v1/alerts/enable",{});window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),((e,t)=>{const{isSufficientlySecure:s,hasPermanentEncryptionKey:a,disabledWatcherClusterAlerts:i}=e;!1===s||!1===a?(e=>{const t=x.a.shims.docLinks.links.alerting.generalSettings;x.a.shims.toastNotifications.addWarning({title:c.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionErrorTitle",{defaultMessage:"Additional setup required"}),text:Object(l.toMountPoint)(Object(y.jsx)("div",null,Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionError",{defaultMessage:"Stack Monitoring rules require API keys to be enabled and an encryption key to be configured."})),Object(y.jsx)(u.EuiSpacer,{size:"xs"}),Object(y.jsx)(u.EuiLink,{href:t,external:!0,target:"_blank"},c.i18n.translate("xpack.monitoring.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))),{theme$:e})})})(t):!1===i?(e=>{const t=x.a.shims.docLinks.links.alerting.generalSettings;x.a.shims.toastNotifications.addWarning({title:c.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.title",{defaultMessage:"Legacy cluster alerts still active"}),text:Object(l.toMountPoint)(Object(y.jsx)("div",null,Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.text",{defaultMessage:"We failed to remove legacy cluster alerts. Please check the Kibana server log for more details, or try again later."})),Object(y.jsx)(u.EuiSpacer,{size:"xs"}),Object(y.jsx)(u.EuiLink,{href:t,external:!0,target:"_blank"},c.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.action",{defaultMessage:"Learn more."}))),{theme$:e})})})(t):!0===i&&x.a.shims.toastNotifications.addWarning({title:c.i18n.translate("xpack.monitoring.healthCheck.disabledWatches.title",{defaultMessage:"New alerts created"}),text:c.i18n.translate("xpack.monitoring.healthCheck.disabledWatches.text",{defaultMessage:"Review the alert definition using Setup mode and configure additional action connectors to get notified via your favorite method."}),"data-test-subj":"alertsCreatedToast"})})(t,null===(a=e.theme)||void 0===a?void 0:a.theme$)}catch(e){await t(e)}},notAskAgain:function(){window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true")},hideModalForSession:function(){window.sessionStorage.setItem("ALERTS_MODAL_HAS_BEEN_SHOWN","true")}}},Ps=()=>{const e=Fs(),{navigateToApp:t}=Object(l.useKibana)().services.application,[s,i]=Object(a.useState)(!1),n=()=>{i(!1)},r=Object(y.jsx)(u.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:()=>{i(!s)}},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.dropdown.button",defaultMessage:"Alerts and rules"})),o=[{name:c.i18n.translate("xpack.monitoring.alerts.dropdown.createAlerts",{defaultMessage:"Create default rules"}),onClick:()=>{e.enableAlerts(),n()}},{name:c.i18n.translate("xpack.monitoring.alerts.dropdown.manageRules",{defaultMessage:"Manage rules"}),icon:"tableOfContents",onClick:()=>t("management",{path:"/insightsAndAlerting/triggersActions/rules"})}],d=[{id:0,title:c.i18n.translate("xpack.monitoring.alerts.dropdown.title",{defaultMessage:"Alerts and rules"}),items:o}];return Object(y.jsx)(u.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:r,isOpen:s,closePopover:n},Object(y.jsx)(u.EuiContextMenu,{initialPanelId:0,panels:d}))};function Ns({exitSetupMode:e}){return Object(y.jsx)(u.EuiButton,{color:"danger",fill:!0,iconType:"flag",iconSide:"right",size:"s",onClick:e,"data-test-subj":"exitSetupModeBtn"},c.i18n.translate("xpack.monitoring.setupMode.exit",{defaultMessage:"Exit setup mode"}))}const Ds=e=>{const[t,s]=i.a.useState(!1),a=Object(d.useUiTracker)({app:"stack_monitoring"});function n(t,i){s(!0),e.toggleSetupMode(t),a({metric:`${Oe.ab}setupmode_${i}`,metricType:d.METRIC_TYPE.CLICK}),s(!1)}return e.enabled?Object(y.jsx)(Ns,{exitSetupMode:()=>n(!1,"exit")}):Object(y.jsx)(u.EuiButton,{onClick:()=>n(!0,"enter"),iconType:"flag",size:"s",iconSide:"right",isLoading:t,"data-test-subj":"monitoringSetupModeBtn"},c.i18n.translate("xpack.monitoring.setupMode.enter",{defaultMessage:"Enter setup mode"}))},Rs=i.a.createContext({}),As=({title:e,pageTitle:t,tabs:s,getPageData:i,product:n,children:r})=>{!function(e,t){var s;const{services:a}=Object(l.useKibana)();let i=Object(g.get)("","cluster_name");i=i?`- ${i}`:"",t=t?`- ${t}`:"",null===(s=a.chrome)||void 0===s||s.docTitle.change(c.i18n.translate("xpack.monitoring.stackMonitoringDocTitle",{defaultMessage:"Stack Monitoring {clusterName} {suffix}",values:{clusterName:i,suffix:t}}))}(0,e);const{currentTimerange:m}=Object(a.useContext)(T.Context),[p,j]=Object(a.useState)(!1),[b,x]=Object(a.useState)(!1),h=Object(o.useHistory)(),[f,O]=Object(a.useState)(!1),v=Ls(),{setHeaderActionMenu:E,theme$:M}=Object(a.useContext)(Rs),k=Object(a.useCallback)((e=>(O(!1),e)),[O]);Object(a.useEffect)((()=>{x(!0),null==i||i().then(k).catch((e=>{v(e),O(!0)})).finally((()=>{j(!0),x(!1)}))}),[i,m,k,v]);const S=e=>h.location.pathname===e,{supported:_,enabled:C}=D();return Object(y.jsx)(u.EuiPage,{"data-test-subj":"monitoringAppContainer"},Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPageContent,null,E&&M&&Object(y.jsx)(d.HeaderMenuPortal,{setHeaderActionMenu:E,theme$:M},_&&Object(y.jsx)(Ds,{enabled:C,toggleSetupMode:z}),Object(y.jsx)(Ps,null)),Object(y.jsx)(w,{pageTitle:t,onRefresh:()=>{b||(x(!0),null==i||i().then(k).catch(v).finally((()=>{x(!1)})),U(I.d.MetricbeatMigration)&&A())}}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),s&&Object(y.jsx)(u.EuiTabs,{size:"l"},s.map(((e,t)=>{return Object(y.jsx)(u.EuiTab,{key:t,disabled:zs(n),title:e.label,"data-test-subj":e.testSubj,href:(s=e.route,h.createHref({pathname:s})),isSelected:S(e.route)},e.label);var s}))),Object(y.jsx)(u.EuiPageContentBody,null,f?null:i&&!p?Object(y.jsx)(de,null):r))))};function zs(e){const t=D();if(!U(I.d.MetricbeatMigration))return!1;if(!t.data)return!1;if(!e)return!1;const s=t.data[e]||{};return 0===s.totalUniqueInstanceCount||0===s.totalUniqueInternallyCollectedCount&&0===s.totalUniqueFullyMigratedCount&&0===s.totalUniquePartiallyMigratedCount}function Bs(e){return e.cluster_uuid===Oe.Y&&(e.cluster_name="Standalone Cluster"),e}const Vs=async({clusterUuid:e,timeRange:t,fetch:s,ccs:a,codePaths:i})=>{let n="../api/monitoring/v1/clusters";e&&(n+=`/${e}`);return(await s(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:t,codePaths:i})})).map(Bs)};function Us(e,t,s){var i;const{services:n}=Object(l.useKibana)(),r=null===(i=n.data)||void 0===i?void 0:i.query.timefilter.timefilter.getBounds(),[o]=Object(a.useState)(r.min.toISOString()),[c]=Object(a.useState)(r.max.toISOString()),[u,d]=Object(a.useState)([]),[g,m]=Object(a.useState)(!1),p=Ls();return Object(a.useEffect)((()=>{!async function(){try{var t;if(null!==(t=n.http)&&void 0!==t&&t.fetch){const t=await Vs({timeRange:{min:o,max:c},fetch:n.http.fetch,clusterUuid:e,codePaths:s});d(t)}}catch(e){p(e)}finally{m(!0)}}()}),[p,e,t,n.http,s,o,c]),{clusters:u,loaded:g}}const $s=[Oe.k],Gs=({staticLoadingState:e})=>{const{clusters:t,loaded:s}=Us(null,void 0,$s),a=c.i18n.translate("xpack.monitoring.loading.pageTitle",{defaultMessage:"Loading"});return e?Object(y.jsx)(As,{title:a},Object(y.jsx)(de,null),";"):Object(y.jsx)(As,{title:a},!1===s?Object(y.jsx)(de,null):qs(t))},qs=e=>e&&e.length?1===e.length?Object(y.jsx)(o.Redirect,{to:"/overview"}):Object(y.jsx)(o.Redirect,{to:"/home"}):Object(y.jsx)(o.Redirect,{to:"/no-data"}),Hs=[Oe.n],Ws=()=>{var e,t,s;const i=c.i18n.translate("xpack.monitoring.license.licenseRouteTitle",{defaultMessage:"License"}),{setIsDisabled:n}=Object(a.useContext)(T.Context);Object(a.useEffect)((()=>(n(!0),()=>{n(!1)})),[n]);const r=Object(a.useContext)(M),o=r.cluster_uuid,u=r.ccs,[d,g]=Object(a.useState)([]),{services:m}=Object(l.useKibana)(),p=null===(e=m.uiSettings)||void 0===e?void 0:e.get("dateFormat:tz"),j=null===(t=m.application)||void 0===t?void 0:t.getUrlForApp("management",{path:"stack/license_management/upload_license"}),b=Object(a.useCallback)((async()=>{var e;const t=null===(e=m.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();let s="../api/monitoring/v1/clusters";o&&(s+=`/${o}`);try{var a;const e=await(null===(a=m.http)||void 0===a?void 0:a.fetch(s,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:t.min.toISOString(),max:t.max.toISOString()},codePaths:Hs})}));g(function(e){return e.map(Ks)}(e))}catch(e){}}),[u,o,null===(s=m.data)||void 0===s?void 0:s.query.timefilter.timefilter,m.http]);return Object(y.jsx)(As,{title:i,pageTitle:"",getPageData:b},function(e,t,s){if(e.length){const a=e[0],i=a.isPrimary,n=a.license;let r=null==n?void 0:n.expiry_date_in_millis;void 0!==r&&(r=function(e,t){return _e.a.tz(e,t||_e.a.tz.guess()).format("LL LTS")}(r,t));const o=Date.now()>r;return Object(y.jsx)(le,{isPrimaryCluster:i,status:n.status,type:n.type,isExpired:o,expiryDate:r,uploadLicensePath:s})}return null}(d,p,j))};function Ks(e){return e.cluster_uuid===Oe.Y&&(e.cluster_name="Standalone Cluster"),e}function Js(e){if("green"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.healthy",{defaultMessage:"Healthy"});const{product:t,status:s}=e;if("es"===t){if("yellow"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.replicaShards",{defaultMessage:"Missing replica shards"});if("red"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.primaryShards",{defaultMessage:"Missing primary shards"})}return"kb"!==t||"yellow"!==s&&"red"!==s?"N/A":Object(y.jsx)(u.EuiText,null,c.i18n.translate("xpack.monitoring.cluster.health.pluginIssues",{defaultMessage:"Some plugins may be experiencing issues. Please check "}),Object(y.jsx)(u.EuiLink,{href:`${x.a.shims.getBasePath()}/status`},"the Kibana status page"),".")}function Ys(e){const t={green:"success",yellow:"warning",red:"danger"}[e.status]||"n/a";return Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiHealth,{color:t,"data-test-subj":"statusIcon"},Object(y.jsx)(Js,e))))}const Qs=({extras:e})=>void 0===e?null:Object(y.jsx)(u.EuiFlexItem,{grow:!1},e);function Xs(e){const t={elasticsearch:"logoElasticsearch",kibana:"logoKibana",logstash:"logoLogstash",beats:"logoBeats",apm:"apmApp",enterprise_search:"logoEnterpriseSearch"}[e.url];return Object(y.jsx)("div",{"data-test-subj":`clusterItemContainer${e.title}`},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiIcon,{type:t,size:"l"})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h2",null,e.title))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},e.statusIndicator),Object(y.jsx)(Qs,{extras:e.extras})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),e.children,Object(y.jsx)(u.EuiSpacer,{size:"xxl"}))}function Zs({usedBytes:e,maxBytes:t}){return e&&t?Object(y.jsx)("span",null,Object(y.jsx)(u.EuiText,null,Ye(e,t))):e?Object(y.jsx)("span",null,Object(y.jsx)(u.EuiText,null,Xe(e,"byte"))):null}function ea({usedBytes:e,maxBytes:t}){return e&&t?Object(y.jsx)("span",null,Object(y.jsx)(u.EuiText,null,Qe(e,t)),Object(y.jsx)(u.EuiText,{color:"subdued",size:"s"},Ye(e,t))):Object(y.jsx)(u.EuiText,null,"0")}function ta({setupModeEnabled:e,setupModeData:t,children:s,...a}){return e&&0===Object(g.get)(t,"totalUniqueInstanceCount",0)?s:Object(y.jsx)(u.EuiLink,a,s)}function sa({setupModeData:e,badgeClickLink:t,productName:s}){if(!e)return null;const{totalUniqueInstanceCount:a,totalUniqueFullyMigratedCount:i,totalUniquePartiallyMigratedCount:n}=e,r=a>0&&(i===a||n===a),o=n>0,l=Object(g.get)(e,"detected.mightExist")||Object(g.get)(e,"detected.doesExist");let d=null;if(0===a)if(l){const e=c.i18n.translate("xpack.monitoring.setupMode.tooltip.detected",{defaultMessage:"No monitoring"});d=Object(y.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.mightExist",{defaultMessage:"We detected usage of this product. Click to start monitoring."})},Object(y.jsx)(u.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsage",{defaultMessage:"No usage"});d=Object(y.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsageDetected",{defaultMessage:"We did not detect any usage. Click to view {identifier}.",values:{identifier:ut(s,!0)}})},Object(y.jsx)(u.EuiBadge,{color:"hollow",iconType:"flag",href:t,onClickAriaLabel:e},e))}else if(r)if(o){const e=c.i18n.translate("xpack.monitoring.euiTable.isPartiallyMigratedLabel",{defaultMessage:"Self monitoring is on"});d=Object(y.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.disableInternal",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}. Click to view {identifierPlural} and disable self monitoring.",values:{identifierPlural:ut(s,!0)}})},Object(y.jsx)(u.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.euiTable.isFullyMigratedLabel",{defaultMessage:"Metricbeat monitoring"});d=Object(y.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.allSet",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}.",values:{identifierPlural:ut(s,!0)}})},Object(y.jsx)(u.EuiBadge,{color:"success",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.euiTable.isInternalCollectorLabel",{defaultMessage:"Self monitoring"});d=Object(y.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.oneInternal",{defaultMessage:"At least one {identifier} isn’t monitored using Metricbeat. Click to view status.",values:{identifier:ut(s)}})},Object(y.jsx)(u.EuiBadge,{color:"danger",iconType:"flag",href:t,onClickAriaLabel:e},e))}return Object(y.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"monitoringSetupModeMetricbeatMigrationTooltip"},d)}function aa(e,t,s){if(!e)return!1;const a=V(s),i=t.find((t=>e[t]&&e[t].find((e=>e.states.length>0))));return a||i}function ia(e){switch(e){case"warn":return"warning";case"debug":return"hollow";case"info":return"default";case"error":return"danger"}}const na={info:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.infoLogsTooltipText",{defaultMessage:"The number of information logs"}),warn:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.warnLogsTooltipText",{defaultMessage:"The number of warning logs"}),debug:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.debugLogsTooltipText",{defaultMessage:"The number of debug logs"}),error:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.errorLogsTooltipText",{defaultMessage:"The number of error logs"}),fatal:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.fatalLogsTooltipText",{defaultMessage:"The number of fatal logs"}),unknown:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.unknownLogsTooltipText",{defaultMessage:"Unknown"})},ra=[Oe.I,Oe.P,Oe.H],oa=[Oe.J,Oe.L,Oe.W,Oe.X,Oe.R,Oe.T,Oe.M,Oe.S],la=[Oe.O];function ca(e){const t=e.cluster_stats||{},s=t.nodes,n=t.indices,r=e.setupMode,o=e.alerts,l=i.a.useContext(xe),d=()=>se("#/elasticsearch"),m=()=>se("#/elasticsearch/nodes"),{primaries:p,replicas:j}=(e=>{const t=Object(g.get)(e,"total",0);let s=Object(g.get)(e,"primaries","N/A"),a="N/A";return"N/A"!==s&&(a=Xe(t-s,"int_commas"),s=Xe(s,"int_commas")),{primaries:s,replicas:a}})(Object(g.get)(e,"cluster_stats.indices.shards",{})),b=Object(g.get)(r.data,"elasticsearch"),x=U(I.d.MetricbeatMigration)?Object(y.jsx)(sa,{setupModeData:b,productName:Oe.r,badgeClickLink:m()}):null;let h=null;if(aa(o,oa,l)){const e=oa.map((e=>o[e]));h=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e}))}let f=null;if(aa(o,ra,l)){const e=ra.map((e=>o[e]));f=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e}))}let O=null;if(aa(o,la,l)){const e=la.map((e=>o[e]));O=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e}))}return Object(y.jsx)(Xs,me()({},e,{url:"elasticsearch",title:"Elasticsearch"}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:r.enabled,setupModeData:b,href:d(),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.overviewLinkAriaLabel",{defaultMessage:"Elasticsearch Overview"}),"data-test-subj":"esOverview"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.overviewLinkLabel",defaultMessage:"Overview"}))))),f),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.healthLabel",defaultMessage:"Health"})),Object(y.jsx)(u.EuiDescriptionListDescription,null,Object(y.jsx)(u.EuiHealth,{color:{green:"success",yellow:"warning",red:"danger"}[t.status],"data-test-subj":"statusIcon"},Object(y.jsx)(Js,{status:t.status,product:"es"}))),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.versionLabel",defaultMessage:"Version"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esVersion"},e.version||c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esUptime"},Xe(Object(g.get)(s,"jvm.max_uptime_in_millis"),"time_since")),(()=>{if(e.ml){const t=se("#/elasticsearch/ml_jobs");return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(ta,{setupModeEnabled:r.enabled,setupModeData:b,href:t},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jobsLabel",defaultMessage:"Machine learning jobs"}))),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esMlJobs"},Object(y.jsx)(ta,{setupModeEnabled:r.enabled,setupModeData:b,href:t},e.ml.jobs)))}return null})(),e.showLicenseExpiration?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.licenseLabel",defaultMessage:"License"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esLicenseType"},Object(y.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiLink,{href:se("#/license")},Object(g.capitalize)(e.license.type))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiText,{size:"s"},void 0===e.license.expiry_date_in_millis?"":Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.expireDateText",defaultMessage:"expires on {expiryDate}",values:{expiryDate:(v=e.license.expiry_date_in_millis,_e.a.tz(v,_e.a.tz.guess()).format("LL"))}})))))):null))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiLink,{"data-test-subj":"esNumberOfNodes",href:m()},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:Xe(Object(g.get)(s,"count.total"),"int_commas")}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},x,h))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskAvailableLabel",defaultMessage:"Disk Available"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDiskAvailable"},Object(y.jsx)(ea,{usedBytes:Object(g.get)(s,"fs.available.bytes",Object(g.get)(s,"fs.available_in_bytes")),maxBytes:Object(g.get)(s,"fs.total.bytes",Object(g.get)(s,"fs.total_in_bytes"))})),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esJvmHeap"},Object(y.jsx)(ea,{usedBytes:Object(g.get)(s,"jvm.mem.heap.used.bytes",Object(g.get)(s,"jvm.mem.heap_used_in_bytes")),maxBytes:Object(g.get)(s,"jvm.mem.heap.max.bytes",Object(g.get)(s,"jvm.mem.heap_max_in_bytes"))}))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:r.enabled,setupModeData:b,href:se("#/elasticsearch/indices"),"data-test-subj":"esNumberOfIndices","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.indicesCountLinkAriaLabel",{defaultMessage:"Elasticsearch Indices: {indicesCount}",values:{indicesCount:Xe(Object(g.get)(n,"count"),"int_commas")}})},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.indicesCountLinkLabel",defaultMessage:"Indices: {indicesCount}",values:{indicesCount:Xe(Object(g.get)(n,"count"),"int_commas")}}))))),O),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.documentsLabel",defaultMessage:"Documents"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDocumentsCount",className:"eui-textBreakWord"},Xe(Object(g.get)(n,"docs.total",Object(g.get)(n,"docs.count")),"int_commas")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskUsageLabel",defaultMessage:"Disk Usage"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDiskUsage"},Xe(Object(g.get)(n,"store.size.bytes",Object(g.get)(n,"store.size_in_bytes")),"byte")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.primaryShardsLabel",defaultMessage:"Primary Shards"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esPrimaryShards"},p),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.replicaShardsLabel",defaultMessage:"Replica Shards"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esReplicaShards"},j)))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:r.enabled,setupModeData:b,href:d(),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.logsLinkAriaLabel",{defaultMessage:"Elasticsearch Logs"}),"data-test-subj":"esLogs"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.logsLinkLabel",defaultMessage:"Logs"})))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),function(e){return e.logs.enabled?Object(y.jsx)(u.EuiDescriptionList,{type:"column"},e.logs.types.map(((e,t)=>Object(y.jsx)(a.Fragment,{key:t},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.logTypeTitle",defaultMessage:"{type}",values:{type:Object(g.capitalize)(e.type)}})),Object(y.jsx)(u.EuiDescriptionListDescription,null,function(e){return Object(y.jsx)(u.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs"},e.levels.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{grow:!1,key:t},Object(y.jsx)(u.EuiToolTip,{position:"top",content:na[e.level]||na.unknown},Object(y.jsx)(u.EuiBadge,{color:ia(e.level)},Xe(e.count,"int_commas")))))))}(e))))),0===e.logs.types.length?Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.noLogsFound",defaultMessage:"No logs found."}):null):Object(y.jsx)(u.EuiDescriptionList,null,Object(y.jsx)(zt,{reason:e.logs.reason}))}(e)))));var v}const ua=[Oe.N];function da(e){const t=e.setupMode,s=e.alerts,a=i.a.useContext(xe),n=t.enabled&&Object(g.get)(t.data,"kibana.detected.doesExist",!1);if(!e.count&&!n)return null;const r=Object(y.jsx)(Ys,{status:e.status,product:"kb"}),o=()=>se("#/kibana/instances"),l=Object(g.get)(t.data,"kibana"),d=U(I.d.MetricbeatMigration)?Object(y.jsx)(sa,{setupModeData:l,productName:Oe.B,badgeClickLink:o()}):null;let m=null;if(aa(s,ua,a)){const e=ua.map((e=>s[e]));m=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e}))}return Object(y.jsx)(Xs,me()({},e,{statusIndicator:r,url:"kibana",title:c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.kibanaTitle",{defaultMessage:"Kibana"})}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:l,href:se("#/kibana"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkAriaLabel",{defaultMessage:"Kibana Overview"}),"data-test-subj":"kbnOverview"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column","data-test-subj":"kibana_overview","data-overview-status":e.status},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.requestsLabel",defaultMessage:"Requests"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnRequests"},e.requests_total),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeLabel",defaultMessage:"Max. Response Time"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnMaxResponseTime"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeDescription",defaultMessage:"{maxTime} ms",values:{maxTime:e.response_time_max}}))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiLink,{href:o(),"data-test-subj":"kbnInstances","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkAriaLabel",{defaultMessage:"Kibana Instances: {instancesCount}",values:{instancesCount:e.count}})},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkLabel",defaultMessage:"Instances: {instancesCount}",values:{instancesCount:Object(y.jsx)("span",{"data-test-subj":"number_of_kibana_instances"},e.count)}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},d,m))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.connectionsLabel",defaultMessage:"Connections"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnConnections"},Xe(e.concurrent_connections,"int_commas")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnMemoryUsage"},Object(y.jsx)(ea,{usedBytes:e.memory_size,maxBytes:e.memory_limit})))))))}const ga=[Oe.Q];function ma(e){const{setupMode:t}=e,s=e.node_count||0,a=e.queue_types||{},n=e.alerts,r=i.a.useContext(xe);if(!s&&!t.enabled)return null;const o=()=>se("#/logstash/nodes"),l=Object(g.get)(t.data,"logstash"),d=U(I.d.MetricbeatMigration)?Object(y.jsx)(sa,{setupModeData:l,productName:Oe.F,badgeClickLink:o()}):null;let m=null;if(aa(n,ga,r)){const e=ga.map((e=>n[e]));m=Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ve,{alerts:e}))}return Object(y.jsx)(Xs,me()({},e,{url:"logstash",title:c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.logstashTitle",{defaultMessage:"Logstash"})}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:l,href:se("#/logstash"),"data-test-subj":"lsOverview","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.overviewLinkAriaLabel",{defaultMessage:"Logstash Overview"})},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column","data-test-subj":"logstash_overview"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsEventsReceived"},Xe(e.events_in_total,"0.[0]a")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsEventsEmitted"},Xe(e.events_out_total,"0.[0]a"))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiLink,{href:o(),"data-test-subj":"lsNodes","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkAriaLabel",{defaultMessage:"Logstash Nodes: {nodesCount}",values:{nodesCount:s}})},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkLabel",defaultMessage:"Nodes: {nodesCount}",values:{nodesCount:Object(y.jsx)("span",{"data-test-subj":"number_of_logstash_instances"},s)}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},d,m))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsUptime"},e.max_uptime?Xe(e.max_uptime,"time_since"):0),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsJvmHeap"},Object(y.jsx)(ea,{usedBytes:e.avg_memory_used,maxBytes:e.avg_memory}))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:l,href:se("#/logstash/pipelines"),"data-test-subj":"lsPipelines","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.pipelineCountLinkAriaLabel",{defaultMessage:"Logstash Pipelines (beta feature): {pipelineCount}",values:{pipelineCount:e.pipeline_count}})},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.pipelinesCountLinkLabel",defaultMessage:"Pipelines: {pipelineCount}",values:{pipelineCount:Object(y.jsx)("span",{"data-test-subj":"number_of_logstash_pipelines"},e.pipeline_count)}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiIconTip,{content:c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.betaFeatureTooltip",{defaultMessage:"Beta feature"}),position:"bottom",type:"beaker","aria-label":"Beta feature"}))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withMemoryQueuesLabel",defaultMessage:"With Memory Queues"})),Object(y.jsx)(u.EuiDescriptionListDescription,null,a[Oe.E.QUEUE_TYPES.MEMORY]||0),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withPersistentQueuesLabel",defaultMessage:"With Persistent Queues"})),Object(y.jsx)(u.EuiDescriptionListDescription,null,a[Oe.E.QUEUE_TYPES.PERSISTED]||0))))))}function pa(e){const{setupMode:t}=e,s=Object(g.get)(e,"beats.total")||0;if(0===s&&!t.enabled)return null;const a=Object(g.get)(t.data,"beats"),i=U(I.d.MetricbeatMigration)?Object(y.jsx)(sa,{setupModeData:a,productName:Oe.b,badgeClickLink:se("#/beats/beats")}):null,n=Object(g.get)(e,"beats.types",[]).map(((e,t)=>[Object(y.jsx)(u.EuiDescriptionListTitle,{key:`beat-types-type-${t}`,"data-test-subj":"beatTypeCount","data-test-beat-type-count":e.type+":"+e.count},e.type),Object(y.jsx)(u.EuiDescriptionListDescription,{key:`beat-types-count-${t}`},e.count)]));return Object(y.jsx)(Xs,me()({},e,{url:"beats",title:c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.beatsTitle",{defaultMessage:"Beats"})}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:a,href:se("#/beats"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.overviewLinkAriaLabel",{defaultMessage:"Beats Overview"}),"data-test-subj":"beatsOverview"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.totalEventsLabel",defaultMessage:"Total Events"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"beatsTotalEvents"},Ze(e.totalEvents,"0.[0]a")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.bytesSentLabel",defaultMessage:"Bytes Sent"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"beatsBytesSent"},Ze(e.bytesSent,"byte"))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiLink,{href:se("#/beats/beats"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.instancesTotalLinkAriaLabel",{defaultMessage:"Beats Instances: {beatsTotal}",values:{beatsTotal:s}}),"data-test-subj":"beatsListing"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.beatsTotalLinkLabel",defaultMessage:"Beats: {beatsTotal}",values:{beatsTotal:Object(y.jsx)("span",{"data-test-subj":"beatsTotal"},s)}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},n)))))}const ja=e=>{if(!x.a.shims.isCloud||!e)return!1;let t=!1;return e.forEach((e=>{const[s,a]=e.split("."),i=Number(s);(i>7||7===i&&Number(a)>=13)&&(t=!0)})),t},ba=e=>e?c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmFleetTitle",{defaultMessage:"Integrations server"}):c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmTitle",{defaultMessage:"APM server"});function xa(e){const{setupMode:t,versions:s}=e,a=Object(g.get)(e,"apms.total")||0;if(0===a&&!t.enabled)return null;const i=ja(s),{link:n,aria:r}=((e,t)=>{const s=Object(y.jsx)("span",{"data-test-subj":"apmsTotal"},t),a={};return e?(a.link=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.agentServersTotalLinkLabel",defaultMessage:"Integrations Servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesAndFleetsTotalLinkAriaLabel",{defaultMessage:"Integrations server instances: {apmsTotal}",values:{apmsTotal:s}}),a):(a.link=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.serversTotalLinkLabel",defaultMessage:"APM servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesTotalLinkAriaLabel",{defaultMessage:"APM server instances: {apmsTotal}",values:{apmsTotal:s}}),a)})(i,a),o=(e=>e?c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewFleetLinkLabel",{defaultMessage:"Integrations server overview"}):c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewLinkLabel",{defaultMessage:"APM server overview"}))(i),l=()=>se("#/apm/instances"),d=Object(g.get)(t.data,"apm"),m=U(I.d.MetricbeatMigration)?Object(y.jsx)(sa,{setupModeData:d,badgeClickLink:l(),productName:Oe.a}):null;return Object(y.jsx)(Xs,me()({},e,{url:"apm",title:ba(i)}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:d,href:se("#/apm"),"aria-label":o,"data-test-subj":"apmOverview"},o))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.processedEventsLabel",defaultMessage:"Processed Events"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmsTotalEvents"},Ze(e.totalEvents,"0.[0]a")),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventLabel",defaultMessage:"Last Event"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmsBytesSent"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventDescription",defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+fe()(e.timeOfLastEvent),Oe.c)}}))))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiLink,{href:l(),"aria-label":r,"data-test-subj":"apmListing"},n)))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},m))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.memoryUsageLabel",defaultMessage:"Memory Usage (delta)"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmMemoryUsage"},Object(y.jsx)(Zs,{usedBytes:e.memRss})))))))}function ha(e){const{setupMode:t}=e,s=Object(g.get)(t.data,"enterprise_search"),a=e.stats.totalInstances||0;return a||t.enabled?Object(y.jsx)(Xs,me()({},e,{url:"enterprise_search",title:c.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.entSearchTitle",{defaultMessage:"Enterprise Search"})}),Object(y.jsx)(u.EuiFlexGrid,{columns:4},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(ta,{setupModeEnabled:t.enabled,setupModeData:s,href:se("#/enterprise_search"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkAriaLabel",{defaultMessage:"Enterprise Search Overview"}),"data-test-subj":"entSearchOverview"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.versionLabel",defaultMessage:"Version"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"entSearchVersion"},e.stats.versions[0]||c.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.appSearchEngines",defaultMessage:"Engines"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"appSearchEngines"},e.stats.appSearchEngines),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchOrgSources",defaultMessage:"Org Sources"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchOrgSources"},e.stats.workplaceSearchOrgSources),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchPrivateSources",defaultMessage:"Private Sources"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchPrivateSources"},e.stats.workplaceSearchPrivateSources)))),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h3",{"data-test-subj":"entSearchTotalNodes"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:Xe(a,"int_commas")}}))))),Object(y.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(u.EuiDescriptionList,{type:"column"},Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"entSearchMemoryUsage"},Object(y.jsx)(ea,{usedBytes:e.stats.memUsed,maxBytes:e.stats.memTotal})),Object(y.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(y.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"entSearchUptime"},Xe(e.stats.uptime,"time_since"))))))):null}function fa(e){const t=e.cluster.cluster_uuid===Oe.Y;return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.overview.heading",defaultMessage:"Stack Monitoring Overview"}))),t?null:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(ca,me()({},e.cluster.elasticsearch,{version:e.cluster.version,ml:e.cluster.ml,license:e.cluster.license,setupMode:e.setupMode,showLicenseExpiration:e.showLicenseExpiration,alerts:e.alerts})),Object(y.jsx)(da,me()({},e.cluster.kibana,{setupMode:e.setupMode,alerts:e.alerts}))),Object(y.jsx)(ma,me()({},e.cluster.logstash,{setupMode:e.setupMode,alerts:e.alerts})),Object(y.jsx)(pa,me()({},e.cluster.beats,{setupMode:e.setupMode,alerts:e.alerts})),Object(y.jsx)(xa,me()({},e.cluster.apm,{setupMode:e.setupMode,alerts:e.alerts})),Object(y.jsx)(ha,me()({},e.cluster.enterpriseSearch,{setupMode:e.setupMode,alerts:e.alerts}))))}const Oa=Object(a.createContext)({}),va=c.i18n.translate("xpack.monitoring.metricbeatMigration.migrationStatus",{defaultMessage:"Migration status"}),Ea=c.i18n.translate("xpack.monitoring.metricbeatMigration.monitoringStatus",{defaultMessage:"Monitoring status"});function ya(e){return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetup",defaultMessage:"If security is enabled, {link} might be required.",values:{link:Object(y.jsx)(a.Fragment,null," ",Object(y.jsx)(u.EuiLink,{href:e,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetupLinkText",defaultMessage:"additional setup"})))}}))}))}function Ma(e){return e.isInternalCollector||e.isNetNewUser?{title:e.isNetNewUser?Ea:va,status:"incomplete",children:Object(y.jsx)(u.EuiCallOut,{size:"s",color:"warning",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.isInternalCollectorStatusTitle",{defaultMessage:"No monitoring data detected, but we’ll continue checking."})})}:e.isPartiallyMigrated||e.isFullyMigrated?{title:va,status:"complete",children:Object(y.jsx)(u.EuiCallOut,{size:"s",color:"success",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusDescription",{defaultMessage:"Metricbeat is shipping monitoring data."})))}:null}function ka(e,t){if(!e||!e.isFullyMigrated){let s="";if(e){const t=ve(e.lastInternallyCollectedTimestamp||e.lastTimestamp,Oe.c);s=c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.partiallyMigratedStatusDescription",{defaultMessage:"Last self monitoring was {secondsSinceLastInternalCollectionLabel} ago.",values:{secondsSinceLastInternalCollectionLabel:t}})}return{title:va,status:"incomplete",children:Object(y.jsx)(u.EuiCallOut,{size:"s",color:"warning",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusTitle",{defaultMessage:"Data is still coming from self monitoring"})},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusDescription",{defaultMessage:"It can take up to {secondsAgo} seconds to detect data.",values:{secondsAgo:t.secondsAgo}})),Object(y.jsx)("p",null,s))}}return{title:va,status:"complete",children:Object(y.jsx)(u.EuiCallOut,{size:"s",color:"success",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusDescription",{defaultMessage:"We are not seeing any documents from self monitoring. Migration complete!"})))}}const Sa="beat",_a="setMonitoringUrl",Ta="enableMetricbeat",wa="disableInternal";const Ca=new E.Storage(window.localStorage),Ia=`${Oe.Z}.mb_migration.esMonitoringUrl`;class flyout_Flyout extends a.Component{constructor(e){super(e),f()(this,"setEsMonitoringUrl",(e=>{Ca.set(Ia,e),this.setState({esMonitoringUrl:e})}));let t=Ca.get(Ia);t||(t=e.monitoringHosts?e.monitoringHosts[0]:"http://localhost:9200"),this.checkInterval=null;let s=_a;e.product&&e.product.isPartiallyMigrated&&(s=wa),this.state={activeStep:s,esMonitoringUrl:t,checkedStatusByStep:{[Ta]:!1,[wa]:!1,userAcknowledgedNoClusterUuidPrompt:!1}}}finishedFlyout(){const{onClose:e}=this.props;e()}renderActiveStep(){const{product:e,productName:t,onClose:s,meta:i}=this.props,{activeStep:n,esMonitoringUrl:r,checkedStatusByStep:o}=this.state;switch(n){case _a:return Object(y.jsx)(u.EuiForm,null,Object(y.jsx)(u.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlLabel",{defaultMessage:"URL of monitoring cluster"}),helpText:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlHelpText",{defaultMessage:"Typically a single URL. If multiple URLs, separate with a comma.\n                The running Metricbeat instance must be able to communicate with these Elasticsearch servers."})},Object(y.jsx)(u.EuiFieldText,{fullWidth:!0,value:r,onChange:e=>this.setEsMonitoringUrl(e.target.value)})));case Ta:case wa:const l=function(e,t,s,i,n){switch(e){case Oe.B:if(s===Ta)return function(e,t,{esMonitoringUrl:s}){const i=x.a.shims.docLinks.links.monitoring.monitorKibana,n=x.a.shims.docLinks.links.metricbeat.install,r=x.a.shims.docLinks.links.metricbeat.start,o=ya(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Kibana"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Kibana x-pack module in Metricbeat"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable kibana-xpack"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Kibana monitoring metrics from http://localhost:5601. If the local Kibana instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(y.jsx)(At,null,"hosts"),file:Object(y.jsx)(At,null,"modules.d/kibana-xpack.yml")}}))),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(y.jsx)(At,null,"metricbeat.yml")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ma(e)]}(t,0,n);if(s===wa)return function(e,t){let s=null;return e.isPrimary&&(s=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartWarningTitle",{defaultMessage:"This step requires you to restart the Kibana server"}),color:"warning",iconType:"help"},Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartNote",defaultMessage:"Expect errors until the server is running again."})))))),[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Kibana monitoring metrics"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.description",defaultMessage:"Add this setting to {file}.",values:{file:Object(y.jsx)(At,null,"kibana.yml")}}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.kibana.collection.enabled: false"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.note",defaultMessage:"For {config}, leave the default value of ({defaultValue}).",values:{config:Object(y.jsx)(At,null,"monitoring.enabled"),defaultValue:Object(y.jsx)(At,null,"true")}}))),s)},ka(e,t)]}(t,i);case Oe.r:if(s===Ta)return function(e,t,{esMonitoringUrl:s}){const i=x.a.shims.docLinks.links.monitoring.monitorElasticsearch,n=x.a.shims.docLinks.links.metricbeat.install,r=x.a.shims.docLinks.links.metricbeat.start,o=ya(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Elasticsearch"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Elasticsearch x-pack module in Metricbeat"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleInstallDirectory",{defaultMessage:"From the installation directory, run:"}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable elasticsearch-xpack"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module collects Elasticsearch metrics from {url}. If the local server has a different address, add it to the hosts setting in {module}.",values:{module:Object(y.jsx)(At,null,"modules.d/elasticsearch-xpack.yml"),url:Object(y.jsx)(At,null,"http://localhost:9200")}}))),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send data to the monitoring cluster"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatDescription",defaultMessage:"Modify {file} to set the connection information.",values:{file:Object(y.jsx)(At,null,"metricbeat.yml")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},Ma(e)]}(t,0,n);if(s===wa)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionDescription",defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics. Set {monospace} to false on each server in the production cluster.",values:{monospace:Object(y.jsx)(At,null,"xpack.monitoring.elasticsearch.collection.enabled")}}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"curl"},'PUT _cluster/settings\n{\n  "persistent": {\n    "xpack.monitoring.elasticsearch.collection.enabled": false\n  }\n}\n          '))},ka(e,t)]}(t,i);case Oe.F:if(s===Ta)return function(e,t,{esMonitoringUrl:s}){const i=x.a.shims.docLinks.links.monitoring.monitorLogstash,n=x.a.shims.docLinks.links.metricbeat.install,r=x.a.shims.docLinks.links.metricbeat.start,o=ya(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Logstash"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Logstash x-pack module in Metricbeat"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable logstash-xpack"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Logstash monitoring metrics from http://localhost:9600. If the local Logstash instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(y.jsx)(At,null,"hosts"),file:Object(y.jsx)(At,null,"modules.d/logstash-xpack.yml")}}))),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(y.jsx)(At,null,"metricbeat.yml")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ma(e)]}(t,0,n);if(s===wa)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Logstash monitoring metrics"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the Logstash configuration file ({file}):",values:{file:Object(y.jsx)(At,null,"logstash.yml")}}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"xpack.monitoring.enabled: false"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart Logstash after making this change."}))))},ka(e,t)]}(t,i);case Oe.b:if(s===Ta)return function(e,t,{esMonitoringUrl:s}){const i=x.a.shims.docLinks.links.metricbeat.configure,n=x.a.shims.docLinks.links.metricbeat.install,r=x.a.shims.docLinks.links.metricbeat.start,o=x.a.shims.docLinks.links.metricbeat.httpEndpoint,l=e.beatType,d=ya(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as this {beatType}",values:{beatType:l||Sa}}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect {beatType} monitoring metrics from http://localhost:5066. If the {beatType} instance being monitored has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(y.jsx)(At,null,"hosts"),file:Object(y.jsx)(At,null,"modules.d/beat-xpack.yml"),beatType:l||Sa}}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirections",defaultMessage:"In order for Metricbeat to collect metrics from the running {beatType}, you need to {link}.",values:{link:Object(y.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirectionsLinkText",defaultMessage:"enable an HTTP endpoint for the {beatType} instance being monitored",values:{beatType:l}})),beatType:l||Sa}})))}),d)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(y.jsx)(At,null,"metricbeat.yml")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),d)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ma(e)]}(t,0,n);if(s===wa)return function(e,t){const s=e.beatType;return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of {beatType}'s monitoring metrics",values:{beatType:s||Sa}}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in {beatType}'s configuration file ({file}):",values:{beatType:s||Sa,file:Object(y.jsx)(At,null,s,".yml")}}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart {beatType} after making this change.",values:{beatType:s||Sa}}))))},ka(e,t)]}(t,i);case Oe.a:if(s===Ta)return function(e,t,{esMonitoringUrl:s}){const i=x.a.shims.docLinks.links.metricbeat.configure,n=x.a.shims.docLinks.links.metricbeat.install,r=x.a.shims.docLinks.links.metricbeat.start,o=ya(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as the APM server"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect APM server monitoring metrics from http://localhost:5066. If the local APM server has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(y.jsx)(At,null,"hosts"),file:Object(y.jsx)(At,null,"modules.d/beat-xpack.yml")}}))),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(y.jsx)(At,null,"metricbeat.yml")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ma(e)]}(t,0,n);if(s===wa)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of the APM server's monitoring metrics"}),children:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the APM server's configuration file ({file}):",values:{file:Object(y.jsx)(At,null,"apm-server.yml")}}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart the APM server after making this change."}))))},ka(e,t)]}(t,i)}return[]}(t,e,n,i,{doneWithMigration:s,esMonitoringUrl:r.split(",").map((e=>`"${e}"`)),hasCheckedStatus:o[n]});return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSteps,{steps:l}))}return null}renderActiveStepNextButton(){const{product:e,productName:t}=this.props,{activeStep:s,esMonitoringUrl:a,userAcknowledgedNoClusterUuidPrompt:i}=this.state;if(!e)return null;let n=!e.isFullyMigrated,r=s!==wa;if(s===Ta&&(t===Oe.r?(r=!1,n=!e.isPartiallyMigrated&&!e.isFullyMigrated):(r=!e.isFullyMigrated,n=!e.isFullyMigrated)),e.isFullyMigrated&&null===e.clusterUuid&&(i||(n=!0)),r){let t=!1,i=null;return s===_a?(t=!a||0===a.length,i=e.isPartiallyMigrated||e.isFullyMigrated?wa:Ta):s===Ta&&(t=!e.isPartiallyMigrated&&!e.isFullyMigrated,i=wa),Object(y.jsx)(u.EuiButton,{type:"submit",fill:!0,iconType:"sortRight",iconSide:"right",isDisabled:t,onClick:()=>this.setState({activeStep:i})},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.nextButtonLabel",{defaultMessage:"Next"}))}return Object(y.jsx)(u.EuiButton,{type:"submit",fill:!0,isDisabled:n,onClick:()=>this.finishedFlyout()},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.doneButtonLabel",{defaultMessage:"Done"}))}getDocumentationTitle(){const{productName:e}=this.props;let t=null;return e===Oe.B?t=x.a.shims.docLinks.links.monitoring.monitorKibana:e===Oe.r&&(t=x.a.shims.docLinks.links.monitoring.monitorElasticsearch),t?Object(y.jsx)(u.EuiText,{size:"s"},Object(y.jsx)(u.EuiLink,{href:t,target:"_blank"},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.learnMore",{defaultMessage:"Learn about why."}))):null}render(){const{onClose:e,instance:t,productName:s,product:i}=this.props,n=ut(s),r=t&&t.name||ot(s);let o=c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitle",{defaultMessage:"Monitor `{instanceName}` {instanceIdentifier} with Metricbeat",values:{instanceName:r,instanceIdentifier:n}});i.isNetNewUser&&(o=c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitleNewUser",{defaultMessage:"Monitor {instanceName} {instanceIdentifier} with Metricbeat",values:{instanceIdentifier:n,instanceName:r}}));let l=null;return i.isFullyMigrated&&null===i.clusterUuid&&(l=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidTitle",{defaultMessage:"No cluster detected"})},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.flyout.noClusterUuidDescription",defaultMessage:"This {productName} {instanceIdentifier} is not connected to an Elasticsearch cluster so once fully migrated, this {productName} {instanceIdentifier} will appear in the Standalone cluster instead of this one. {link}",values:{productName:s,instanceIdentifier:n,link:Object(y.jsx)(u.EuiLink,{href:"#/overview?_g=(cluster_uuid:__standalone_cluster__)",target:"_blank"},"Click here to view the Standalone cluster.")}})),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiCheckbox,{id:"monitoringFlyoutNoClusterUuidCheckbox",label:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidCheckboxLabel",{defaultMessage:"Yes, I understand that I will need to look in the Standalone cluster for\n                  this {productName} {instanceIdentifier}.",values:{productName:s,instanceIdentifier:n}}),checked:this.state.userAcknowledgedNoClusterUuidPrompt,onChange:e=>this.setState({userAcknowledgedNoClusterUuidPrompt:e.target.checked})})),Object(y.jsx)(u.EuiSpacer,{size:"s"}))),Object(y.jsx)(u.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutTitle"},Object(y.jsx)(u.EuiFlyoutHeader,{hasBorder:!0},Object(y.jsx)(u.EuiTitle,{size:"m"},Object(y.jsx)("h2",{id:"flyoutTitle"},o))),Object(y.jsx)(u.EuiFlyoutBody,null,this.renderActiveStep(),l),Object(y.jsx)(u.EuiFlyoutFooter,{style:{marginBottom:"64px"}},Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.closeButtonLabel",{defaultMessage:"Close"}))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},this.renderActiveStepNextButton()))))}}class setup_mode_WrappedSetupModeRenderer extends i.a.Component{constructor(...e){super(...e),f()(this,"globalState",void 0),f()(this,"state",{renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}UNSAFE_componentWillMount(){this.globalState=this.context;const{kibana:e,onHttpError:t}=this.props;N.supported=!0,B(this.globalState,e.services.http,t,(e=>{const t={renderState:!0},{productName:s}=this.props;if(!s)return void this.setState(t);const a=D();if(!a.enabled||!a.data)return void this.setState(t);const i=a.data[s],n=e?e[s]:null;if(i&&n){const e=function(e,t){for(const s of t)if(-1===e.indexOf(s))return s}(Object.keys(n.byUuid),Object.keys(i.byUuid));e&&(t.newProduct=i.byUuid[e])}this.setState(t)}))}componentWillUnmount(){N.supported=!1}reset(){this.setState({renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}getFlyout(e,t){const{productName:s}=this.props,{isFlyoutOpen:a,instance:i,isSettingUpNew:n,newProduct:r}=this.state;if(!e||!a)return null;let o=null;if(r?o=r:i&&Object.keys(i).length&&(o=e.byUuid[i.uuid]),!o){const t=Object.values(e.byUuid);o=t.length&&!n?t[0]:{isNetNewUser:!0}}return Object(y.jsx)(flyout_Flyout,{onClose:()=>this.reset(),productName:s,product:o,meta:t,instance:i,updateProduct:A,isSettingUpNew:n})}getBottomBar(e){return!e.enabled||e.hideBottomBar?null:Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiSpacer,{size:"xxl"}),Object(y.jsx)(u.EuiBottomBar,null,Object(y.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center","data-test-subj":"monitoringSetupModeBottomBar"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTextColor,{color:"ghost"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.setupMode.description",defaultMessage:"You are in setup mode. The ({flagIcon}) icon indicates configuration options.",values:{flagIcon:Object(y.jsx)(u.EuiIcon,{type:"flag"})}}))))),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(Ns,{exitSetupMode:()=>z(!1)})))))))}async shortcutToFinishMigration(){await(async()=>{const e=`../api/monitoring/v1/setup/collection/${L.cluster_uuid}/disable_internal_collection`;try{return await F.post(e)}catch(e){throw P(e),e}})(),await A()}render(){const{render:e,productName:t}=this.props,s=D();let a={byUuid:{}};s.data&&(t&&s.data[t]?a=s.data[t]:s.data&&(a=s.data));const i=s.data?s.data._meta:null;return e({setupMode:{data:a,meta:i,enabled:s.enabled,productName:t,updateSetupModeData:A,shortcutToFinishMigration:()=>this.shortcutToFinishMigration(),openFlyout:(e,t)=>this.setState({isFlyoutOpen:!0,instance:e,isSettingUpNew:t}),closeFlyout:()=>this.setState({isFlyoutOpen:!1})},flyoutComponent:this.getFlyout(a,i),bottomBarComponent:this.getBottomBar(s)})}}setup_mode_WrappedSetupModeRenderer.contextType=M;const La=Object(l.withKibana)((Fa=setup_mode_WrappedSetupModeRenderer,function(e){const t=Ls();return Object(y.jsx)(Fa,me()({},e,{onHttpError:t}))}));var Fa;const Pa=(e,t,s,a=!1)=>{const i={url:e,label:t,ignoreGlobalState:a};return s&&(i.testSubj=s),i};const Na=b()((({history:e})=>{const t=Object(l.useKibana)().services.chrome,[s,i]=Object(a.useState)([]),n=Object(a.useCallback)((e=>{var s,a;if(!t)return;if(!e){var i;const s=null===(i=t.getBreadcrumbs$())||void 0===i?void 0:i.source;s&&s.value&&(e=s.value)}const n=location.hash.split("?")[1];null!==(s=e)&&void 0!==s&&s.length&&0===(null==n?void 0:n.indexOf("_g"))&&(null===(a=e[0].href)||void 0===a?void 0:a.split("?")[1])!==n&&(e.forEach((e=>{var t;const s=null===(t=e.href)||void 0===t?void 0:t.split("?")[0];s&&!e.ignoreGlobalState&&(e.href=`${s}?${n}`),delete e.ignoreGlobalState})),t.setBreadcrumbs(e.slice(0)))}),[t]),r=Object(a.useCallback)(((e,t)=>{const s=function(e,t){const s=c.i18n.translate("xpack.monitoring.breadcrumbs.clustersLabel",{defaultMessage:"Clusters"});let a=[Pa("#/home",s,"breadcrumbClusters",!0)];return null!=t&&t.inOverview||!e||a.push(Pa("#/overview",e)),null!=t&&t.inElasticsearch&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(Pa("#/elasticsearch","Elasticsearch")),"indices"===e.name?t.push(Pa("#/elasticsearch/indices",c.i18n.translate("xpack.monitoring.breadcrumbs.es.indicesLabel",{defaultMessage:"Indices"}),"breadcrumbEsIndices")):"nodes"===e.name?t.push(Pa("#/elasticsearch/nodes",c.i18n.translate("xpack.monitoring.breadcrumbs.es.nodesLabel",{defaultMessage:"Nodes"}),"breadcrumbEsNodes")):"ml"===e.name?t.push(Pa("#/elasticsearch/ml_jobs",c.i18n.translate("xpack.monitoring.breadcrumbs.es.jobsLabel",{defaultMessage:"Machine learning jobs"}))):"ccr_shard"===e.name&&t.push(Pa("#/elasticsearch/ccr",c.i18n.translate("xpack.monitoring.breadcrumbs.es.ccrLabel",{defaultMessage:"CCR"}))),t.push(Pa(null,e.instance))):t.push(Pa(null,"Elasticsearch")),t}(t))),null!=t&&t.inKibana&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(Pa("#/kibana","Kibana")),t.push(Pa("#/kibana/instances",c.i18n.translate("xpack.monitoring.breadcrumbs.kibana.instancesLabel",{defaultMessage:"Instances"}))),t.push(Pa(null,e.instance))):t.push(Pa(null,"Kibana")),t}(t))),null!=t&&t.inLogstash&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.logstashLabel",{defaultMessage:"Logstash"}),s=[];return e.instance?(s.push(Pa("#/logstash",t)),"nodes"===e.name&&s.push(Pa("#/logstash/nodes",c.i18n.translate("xpack.monitoring.breadcrumbs.logstash.nodesLabel",{defaultMessage:"Nodes"}))),s.push(Pa(null,e.instance))):"pipeline"===e.page?(s.push(Pa("#/logstash",t)),s.push(Pa("#/logstash/pipelines",c.i18n.translate("xpack.monitoring.breadcrumbs.logstash.pipelinesLabel",{defaultMessage:"Pipelines"})))):s.push(Pa(null,t)),s}(t))),null!=t&&t.inBeats&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.beatsLabel",{defaultMessage:"Beats"}),s=[];return e.instance?(s.push(Pa("#/beats",t)),s.push(Pa("#/beats/beats",c.i18n.translate("xpack.monitoring.breadcrumbs.beats.instancesLabel",{defaultMessage:"Instances"}))),s.push(Pa(null,e.instance))):s.push(Pa(null,t)),s}(t))),null!=t&&t.inApm&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.apmLabel",{defaultMessage:"APM server"}),s=[];return e.instance?(s.push(Pa("#/apm",t)),s.push(Pa("#/apm/instances",c.i18n.translate("xpack.monitoring.breadcrumbs.apm.instancesLabel",{defaultMessage:"Instances"}))),s.push(Pa(null,e.instance))):s.push(Pa(null,t)),s}(t))),null!=t&&t.inEnterpriseSearch&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.entSearchLabel",{defaultMessage:"Enterprise Search"}),s=[];return s.push(Pa("#/enterprise_search",t)),s}())),a}(e,t);i(s),n(s.map((e=>({text:e.label,href:e.url?e.url:void 0,"data-test-subj":e.testSubj,ignoreGlobalState:e.ignoreGlobalState}))))}),[i,n]);return Object(a.useEffect)((()=>{e.listen(((e,t)=>{n()}))}),[e,n]),{generate:r,update:n,breadcrumbs:s}})),Da=async({alertTypeIds:e,filters:t,timeRange:s,clusterUuid:a,fetch:i})=>{const n=`../api/monitoring/v1/alert/${a}/status`;return await i(n,{method:"POST",body:JSON.stringify({alertTypeIds:e,filters:t,timeRange:s})})},Ra=({alerts:e})=>{const[t,s]=Object(a.useState)(!1),i=Fs(),n=()=>{s(!1),i.hideModalForSession()},r=[{id:"create-alerts",label:c.i18n.translate("xpack.monitoring.alerts.modal.yesOption",{defaultMessage:"Yes (Recommended - create default rules in this kibana space)"})},{id:"not-create-alerts",label:c.i18n.translate("xpack.monitoring.alerts.modal.noOption",{defaultMessage:"No"})}],[o,l]=Object(a.useState)("create-alerts");return Object(a.useEffect)((()=>{i.shouldShowAlertsModal(e)&&s(!0)}),[i,e]),t?Object(y.jsx)(u.EuiModal,{onClose:n},Object(y.jsx)(u.EuiModalHeader,null,Object(y.jsx)(u.EuiModalHeaderTitle,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.title",defaultMessage:"Create rules"})))),Object(y.jsx)(u.EuiModalBody,null,Object(y.jsx)(u.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description",defaultMessage:"Stack monitoring comes with many out-of-the box rules to notify you of common issues around cluster health, resource utilization and errors or exceptions. {learnMoreLink}",values:{learnMoreLink:Object(y.jsx)(u.EuiLink,{href:x.a.shims.docLinks.links.monitoring.alertsKibana,target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description.link",defaultMessage:"Learn more..."}))}})),Object(y.jsx)("div",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.createDescription",defaultMessage:"Create these out-of-the box rules?"}),Object(y.jsx)(u.EuiSpacer,{size:"xs"}),Object(y.jsx)(u.EuiRadioGroup,{options:r,idSelected:o,onChange:e=>{l(e)},name:"radio group"})))),Object(y.jsx)(u.EuiModalFooter,null,Object(y.jsx)(u.EuiButtonEmpty,{onClick:()=>{i.hideModalForSession(),n()},"data-test-subj":"alerts-modal-remind-later-button"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.remindLater",defaultMessage:"Remind me later"})),Object(y.jsx)(u.EuiButton,{onClick:()=>{"create-alerts"===o?i.enableAlerts():i.notAskAgain(),n()},fill:!0,"data-test-subj":"alerts-modal-button"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.alerts.modal.confirm",defaultMessage:"Ok"})))):null},Aa=[Oe.h],za=()=>{var e;const t=Object(a.useContext)(M),s=Object(a.useContext)(Oa),{services:i}=Object(l.useKibana)(),n=t.cluster_uuid,r=t.ccs,[o,u]=Object(a.useState)([]),[d,g]=Object(a.useState)({}),[m,p]=Object(a.useState)(!1),{generate:j}=Object(a.useContext)(Na.Context);let b=[];const x=c.i18n.translate("xpack.monitoring.cluster.overviewTitle",{defaultMessage:"Overview"}),h=c.i18n.translate("xpack.monitoring.cluster.overview.pageTitle",{defaultMessage:"Cluster overview"});m&&(b=[{id:"clusterName",label:o[0].cluster_name,testSubj:"overviewTabsclusterName",route:"/overview"}]);const f=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=i.http)&&void 0!==t&&t.fetch&&n){const e=await Vs({fetch:i.http.fetch,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},ccs:r,clusterUuid:n,codePaths:Aa});u(e);const t=await Da({fetch:i.http.fetch,clusterUuid:n,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});g(t),p(!0)}}),[r,n,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return Object(a.useEffect)((()=>{o&&o.length&&j(o[0].cluster_name)}),[o,j]),Object(y.jsx)(As,{title:x,pageTitle:h,tabs:b,getPageData:f},Object(y.jsx)(La,{render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(fa,{cluster:o[0],alerts:d,setupMode:e,showLicenseExpiration:s.showLicenseExpiration}),a)}),Object(y.jsx)(Ra,{alerts:d}))};s(93);const Ba=({isSupported:e,children:t})=>e?t:"-",Va=e=>{const{alertsMeta:t={enabled:!0}}=e.cluster.alerts;if(t.enabled)return Object(y.jsx)("span",null,e.children);const s=c.i18n.translate("xpack.monitoring.cluster.listing.unknownHealthMessage",{defaultMessage:"Unknown"});return Object(y.jsx)(u.EuiToolTip,{content:s,position:"bottom"},Object(y.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))},Ua="viewedStandaloneCluster",$a=(e,t,s,a)=>{e.$evalAsync((()=>{t.cluster_uuid=s,t.ccs=a,t.save(),window.history.replaceState(null,null,"#/overview")}))},Ga=(e,{title:t,text:s})=>{e.$evalAsync((()=>{x.a.shims.toastNotifications.addWarning({title:t,text:s,"data-test-subj":"monitoringLicenseWarning"})}))},qa=(e,t,s)=>{Ga(e,{title:c.i18n.translate("xpack.monitoring.cluster.listing.incompatibleLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(l.toMountPoint)(Object(y.jsx)(a.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.noMultiClusterSupportMessage",defaultMessage:"The Basic license does not support multi-cluster monitoring."})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.infoMessage",defaultMessage:"Need to monitor multiple clusters? {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getLicenseInfoLink:Object(y.jsx)(u.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},Ha=(e,t,s)=>{const i=`${x.a.shims.getBasePath()}/app/management/stack/license_management/home`;Ga(e,{title:c.i18n.translate("xpack.monitoring.cluster.listing.invalidLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(l.toMountPoint)(Object(y.jsx)(a.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.invalidInfoMessage",defaultMessage:"The license information is invalid."})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.infoMessage",defaultMessage:"Need a license? {getBasicLicenseLink} or {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getBasicLicenseLink:Object(y.jsx)(u.EuiLink,{href:i},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getBasicLicenseLinkLabel",defaultMessage:"Get a free Basic license"})),getLicenseInfoLink:Object(y.jsx)(u.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},Wa=({changeCluster:e,storage:t})=>t.get(Ua)?null:Object(y.jsx)("div",null,Object(y.jsx)(u.EuiCallOut,{color:"warning",title:c.i18n.translate("xpack.monitoring.cluster.listing.standaloneClusterCallOutTitle",{defaultMessage:"It looks like you have instances that aren't connected to an Elasticsearch cluster."}),iconType:"link"},Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{onClick:()=>e(Oe.Y),"data-test-subj":"standaloneClusterLink"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutLink",defaultMessage:"View these instances."}))," ",Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutText",defaultMessage:"Or, click Standalone Cluster in the table below"})),Object(y.jsx)("p",null,Object(y.jsx)(u.EuiLink,{onClick:()=>{t.set(Ua,!0)}},Object(y.jsx)(u.EuiIcon,{type:"cross"})," ",Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutDismiss",defaultMessage:"Dismiss"})))),Object(y.jsx)(u.EuiSpacer,null)),Ka=({angular:e,clusters:t,sorting:s,pagination:a,onTableChange:i})=>{const{services:n}=Object(l.useKibana)(),r=Object(g.partial)($a,e.scope,e.globalState),o=Object(g.partial)(qa,e.scope,n.theme.theme$),d=Object(g.partial)(Ha,e.scope,n.theme.theme$),m=!!t.find((e=>e.cluster_uuid===Oe.Y));return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPageContent,null,m?Object(y.jsx)(Wa,{changeCluster:r,storage:e.storage}):null,Object(y.jsx)(dt,{className:"clusterTable",rows:t,columns:(p=e.showLicenseExpiration,j=o,b=d,[{name:c.i18n.translate("xpack.monitoring.cluster.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"cluster_name",sortable:!0,render:(e,t)=>t.isSupported?Object(y.jsx)(u.EuiLink,{href:se("#/overview",{cluster_uuid:t.cluster_uuid}),"data-test-subj":"clusterLink"},e):t.license?Object(y.jsx)(u.EuiLink,{onClick:()=>j(t.cluster_name),"data-test-subj":"clusterLink"},e):Object(y.jsx)(u.EuiLink,{onClick:()=>b(t.cluster_name),"data-test-subj":"clusterLink"},e)},{name:c.i18n.translate("xpack.monitoring.cluster.listing.statusColumnTitle",{defaultMessage:"Alerts Status"}),field:"status","data-test-subj":"alertsStatus",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,Object(y.jsx)(Va,{cluster:t},Object(y.jsx)(Ue,{alerts:t.alerts.list,showBadge:!1})))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.nodesColumnTitle",{defaultMessage:"Nodes"}),field:"elasticsearch.cluster_stats.nodes.count.total","data-test-subj":"nodesCount",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,"number"==typeof e?Je()(e).format("0,0"):0)},{name:c.i18n.translate("xpack.monitoring.cluster.listing.indicesColumnTitle",{defaultMessage:"Indices"}),field:"elasticsearch.cluster_stats.indices.count","data-test-subj":"indicesCount",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.dataColumnTitle",{defaultMessage:"Data"}),field:"elasticsearch.cluster_stats.indices.store.size_in_bytes","data-test-subj":"dataSize",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,Je()(e).format("0,0[.]0 b"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.logstashColumnTitle",{defaultMessage:"Logstash"}),field:"logstash.node_count","data-test-subj":"logstashCount",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.kibanaColumnTitle",{defaultMessage:"Kibana"}),field:"kibana.count","data-test-subj":"kibanaCount",sortable:!0,render:(e,t)=>Object(y.jsx)(Ba,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.licenseColumnTitle",{defaultMessage:"License"}),field:"license.type","data-test-subj":"clusterLicense",sortable:!0,render:(e,t)=>{const s=t.license;if(!e)return Object(y.jsx)("div",null,Object(y.jsx)("div",{className:"monTableCell__clusterCellLicense"},"N/A"));if(s){const t=()=>s.expiry_date_in_millis<fe()().valueOf()?Object(y.jsx)("span",{className:"monTableCell__clusterCellExpired"},"Expired"):Object(y.jsx)("span",null,"Expires ",fe()(s.expiry_date_in_millis).format("D MMM YY"));return Object(y.jsx)("div",null,Object(y.jsx)("div",{className:"monTableCell__clusterCellLicense"},Object(g.capitalize)(e)),Object(y.jsx)("div",{className:"monTableCell__clusterCellExpiration"},p?t():null))}return Object(y.jsx)(u.EuiLink,{onClick:()=>b(t.cluster_name)},Object(y.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))}}]),rowProps:e=>({"data-test-subj":`clusterRow_${e.cluster_uuid}`}),sorting:{...s,sort:{...s.sort,field:"cluster_name"}},pagination:a,search:{box:{incremental:!0,placeholder:e.scope.filterText}},onTableChange:i,executeQueryOptions:{defaultFields:["cluster_name"]}}))));var p,j,b},Ja=[5,10,20,50],Ya={pageSize:20,initialPageSize:20,pageIndex:0,initialPageIndex:0,pageSizeOptions:Ja,totalItemCount:0};function Qa(e){const t=new E.Storage(window.localStorage),s=(i=e,e=>{const t=e.get(Oe.Z)||{},s=Object(g.get)(t,[i,"sort"]);return{page:Object(g.get)(t,[i,"page"]),sort:s}});var i;const n=(e=>(t,{sort:s,page:a})=>{const i=t.get(Oe.Z)||{};return Object(mt.set)(i,[e,"sort"],s||void 0),Object(mt.set)(i,[e,"page"],a||void 0),t.set(Oe.Z,i),i})(e),r=s(t),[o,l]=Object(a.useState)((e=>{const t=Ya;return e&&(t.initialPageSize=e.size,t.pageSize=e.size,t.initialPageIndex=e.index,t.pageIndex=e.index),{...t,pageSizeOptions:Ja}})(r.page)),c=Object(a.useCallback)((e=>{e!==o.totalItemCount&&l({...o,totalItemCount:e})}),[l,o]),[u,d]=Object(a.useState)(r.sort||{sort:{field:"name",direction:Oe.s}}),[m,p]=Object(a.useState)(""),j=({page:e,sort:s,queryText:a})=>{l({...o,initialPageSize:e.size,pageSize:e.size,initialPageIndex:e.index,pageIndex:e.index,pageSizeOptions:Ja}),d({sort:s}),n(t,{page:e,sort:{sort:s}}),p(a)};return{getPaginationRouteOptions:Object(a.useCallback)((()=>o&&u?{pagination:{size:o.pageSize,index:o.pageIndex},...u,queryText:m}:{}),[o,m,u]),getPaginationTableProps:()=>({sorting:u,pagination:o,onTableChange:j}),updateTotalItemCount:c}}const Xa=c.i18n.translate("xpack.monitoring.cluster.listing.pageTitle",{defaultMessage:"Cluster listing"}),Za=c.i18n.translate("xpack.monitoring.cluster.listing.tabTitle",{defaultMessage:"Clusters"}),ei=e=>e.reduce(((e,t)=>({...e,...t.alerts&&t.alerts.list||{}})),{}),ti=()=>{var e;const t=Object(a.useContext)(M),s=Object(a.useContext)(Oa),{services:i}=Object(l.useKibana)(),[n,r]=Object(a.useState)([]),{update:c}=Object(a.useContext)(Na.Context),{getPaginationTableProps:u}=Qa("clusters"),{sorting:d,pagination:g,onTableChange:m}=u();Object(a.useEffect)((()=>{c([{"data-test-subj":"clusterListingBreadcrumb",text:Za}])}),[c]);const p=[{id:"clusters",label:Za,testSubj:"clusterListingTab",route:"/home"}],j=Object(a.useCallback)((async()=>{var e,s;const a=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(s=i.http)&&void 0!==s&&s.fetch){const e=await Vs({fetch:i.http.fetch,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()},ccs:t.ccs,codePaths:["all"]});r(e)}}),[t.ccs,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return t.save&&1===n.length&&(t.cluster_uuid=n[0].cluster_uuid,t.save()),Object(y.jsx)(As,{tabs:p,title:Xa,pageTitle:Xa,getPageData:j},1===n.length&&Object(y.jsx)(o.Redirect,{to:{pathname:"/overview"}}),Object(y.jsx)(Ka,{clusters:n,angular:{scope:{$evalAsync:e=>e(),filterQuery:""},globalState:t,storage:{get:e=>window.localStorage.getItem(e),set:(e,t)=>window.localStorage.setItem(e,t)},showLicenseExpiration:s.showLicenseExpiration},sorting:d,pagination:g,onTableChange:m}),Object(y.jsx)(Ra,{alerts:ei(n)}))};function si(e,t){return t.search=e.location.search,t}function ai(e,t){return"string"==typeof e?{pathname:e,state:t}:e}const ii=({path:e,component:t,codePaths:s,fetchAllClusters:i,unsetGlobalState:n=!1})=>{const r=Object(a.useContext)(M),l=i?null:r.cluster_uuid,c=Object(o.useLocation)(),{clusters:u,loaded:d}=Us(l,void 0,s),m=V(void 0,r),p=function(e,t,s=!1){const a=(()=>{const s=Object(g.find)(e,{cluster_uuid:t.cluster_uuid});if(s)return s;const a=Object(g.first)(e);return a&&a.cluster_uuid?a:null})();return a&&a.license?(t.cluster_uuid=s?void 0:a.cluster_uuid,t.ccs=s?void 0:a.ccs,t.save&&t.save(),a):null}(u,r,n);if(d&&!p&&!m)return Object(y.jsx)(o.Redirect,{to:"/no-data"});if(d&&p){if("license"!==c.pathname&&"home"!==c.pathname&&ni(p.license))return Object(y.jsx)(o.Redirect,{to:"/license"});const e=p.isSupported||1===u.length;if("/home"!==c.pathname&&!e)return Object(y.jsx)(o.Redirect,{to:"/home"})}const j=t;return d?Object(y.jsx)(o.Route,{path:e},Object(y.jsx)(j,{clusters:u})):Object(y.jsx)(Gs,{staticLoadingState:!0})},ni=e=>{const{expiry_date_in_millis:t}=e;return void 0!==t&&(new Date).getTime()>=t};class enabler_Enabler{constructor(e,t){f()(this,"http",void 0),f()(this,"updateModel",void 0),this.http=e,this.updateModel=t}async enableCollectionInterval(){try{this.updateModel({isCollectionIntervalUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_interval",{method:"PUT"}),this.updateModel({isCollectionIntervalUpdated:!0,isCollectionIntervalUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionIntervalUpdated:!1,isCollectionIntervalUpdating:!1})}}async enableCollectionEnabled(){try{this.updateModel({isCollectionEnabledUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_enabled",{method:"PUT"}),this.updateModel({isCollectionEnabledUpdated:!0,isCollectionEnabledUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionEnabledUpdated:!1,isCollectionEnabledUpdating:!1})}}}const ri=[Oe.n],oi=[{message:c.i18n.translate("xpack.monitoring.noData.checker.clusterSettings",{defaultMessage:"Checking cluster settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/cluster"},{message:c.i18n.translate("xpack.monitoring.noData.checker.nodesSettings",{defaultMessage:"Checking nodes settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/nodes"}],li=()=>{const e=c.i18n.translate("xpack.monitoring.noData.routeTitle",{defaultMessage:"Setup Monitoring"}),{services:t}=Object(l.useKibana)(),[s,i]=Object(a.useState)(!1),[n,r]=Object(a.useState)({errors:[],checkMessage:null,isLoading:!0,isCollectionEnabledUpdating:!1,isCollectionEnabledUpdated:!1,isCollectionIntervalUpdating:!1,isCollectionIntervalUpdated:!1}),{update:u}=Object(a.useContext)(Na.Context);u([{"data-test-subj":"breadcrumbClusters",text:"Clusters",href:"#/home",ignoreGlobalState:!0}]);const d=Object(a.useContext)(M),g=Ls();B(d,t.http,g);const m=Object(a.useCallback)((e=>{r((t=>{const s={...t};return Object.keys(e).forEach((t=>{Array.isArray(s[t])?s[t].push(e[t]):s[t]=e[t]})),s}))}),[r]),p=Object(a.useCallback)((async()=>{let e;try{const e=await async function(e){var t,s;const a=null===(t=e.data)||void 0===t?void 0:t.query.timefilter.timefilter.getBounds(),i=a.min.toISOString(),n=a.max.toISOString();return function(e){return e.map(ci)}(await(null===(s=e.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/clusters",{method:"POST",body:JSON.stringify({css:void 0,timeRange:{min:i,max:n},codePaths:ri})})))}(t);if(e&&e.length)return void i(!0)}catch(t){t&&503===t.status&&(e={property:"custom",message:t.data.message})}e?m({reason:e}):await function(e,t,s){const a=async e=>{s({checkMessage:e.message});const{found:i,reason:n,error:r,errorReason:o}=await async function(e,t){try{const s=await t.fetch(e.api,{method:"GET"}),{found:a,reason:i}=s;return{found:a,reason:i}}catch(e){return{error:!0,found:!1,errorReason:e.body}}}(e,t);if(r){if(s({errors:o}),e.next)return a(e.next)}else{if(i)return s({reason:n,isLoading:!1,checkMessage:null});if(e.next)return a(e.next)}s({reason:null,isLoading:!1,checkMessage:null})},i=(e=>e.map(((t,s)=>{const a=e[s+1];return void 0!==a&&(t.next=a),t})))(e);return a(i[0])}(oi,t.http,m)}),[t,m]),j=new enabler_Enabler(t.http,m);return Object(y.jsx)(As,{title:e,getPageData:p},s?Object(y.jsx)(o.Redirect,{to:"/home"}):Object(y.jsx)(ie,me()({},n,{enabler:j,isCloudEnabled:x.a.shims.isCloud})))};function ci(e){return e.cluster_uuid===Oe.Y&&(e.cluster_name="Standalone Cluster"),e}const ui=({cluster:e,...t})=>{const s=[{id:"overview",label:c.i18n.translate("xpack.monitoring.esNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/elasticsearch"},{id:"nodes",label:c.i18n.translate("xpack.monitoring.esNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/elasticsearch/nodes"},{id:"indices",label:c.i18n.translate("xpack.monitoring.esNavigation.indicesLinkText",{defaultMessage:"Indices"}),route:"/elasticsearch/indices"}];return e&&di(e.license)&&s.push({id:"ml",label:c.i18n.translate("xpack.monitoring.esNavigation.jobsLinkText",{defaultMessage:"Machine learning jobs"}),route:"/elasticsearch/ml_jobs"}),null!=e&&e.isCcrEnabled&&s.push({id:"ccr",label:c.i18n.translate("xpack.monitoring.esNavigation.ccrLinkText",{defaultMessage:"CCR"}),route:"/elasticsearch/ccr"}),Object(y.jsx)(As,me()({},t,{tabs:s,product:"elasticsearch"}))},di=e=>Object(g.includes)(Oe.G,e.type);function gi(){const{services:e}=Object(l.useKibana)(),t=Object(o.useHistory)(),{handleTimeChange:s}=Object(a.useContext)(T.Context),[i,n]=Object(a.useState)(0),[r,c]=Object(a.useState)(!1),u=Object(a.useRef)(r),d=e=>{u.current=e,c(e)};return Object(a.useEffect)((()=>{const e=()=>{u.current?d(!1):n((e=>e>0?e-1:0))};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{onBrush:({xaxis:t})=>{var a;const{to:r,from:o}=t,l=null===(a=e.uiSettings)||void 0===a?void 0:a.get("dateFormat:tz"),c=mi(l),u=fe()(o-c),g=fe()(r-c);s(u.toISOString(),g.toISOString()),d(!0),n(i+1)},zoomInfo:{zoomOutHandler:()=>t.goBack(),showZoomOutBtn:()=>i>0}}}const mi=e=>"Browser"===e?0:1*fe.a.tz(e).utcOffset()*60*1e3,pi=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{zoomInfo:i,onBrush:n}=gi(),{services:r}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Na.Context),u=s.cluster_uuid,d=s.ccs,m=Object(g.find)(e,{cluster_uuid:u}),[p,j]=Object(a.useState)(null),[b,x]=Object(a.useState)(!1),h=()=>{x(!b)},f=c.i18n.translate("xpack.monitoring.elasticsearch.overview.title",{defaultMessage:"Elasticsearch"}),O=c.i18n.translate("xpack.monitoring.elasticsearch.overview.pageTitle",{defaultMessage:"Elasticsearch overview"});Object(a.useEffect)((()=>{m&&o(m.cluster_name,{inElasticsearch:!0})}),[m,o]);const v=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/elasticsearch`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(i)}),[d,u,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(y.jsx)(ui,{title:f,pageTitle:O,getPageData:v,"data-test-subj":"elasticsearchOverviewPage",cluster:m},Object(y.jsx)("div",{"data-test-subj":"elasticsearchOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,shardActivity:a,logs:r}=e||{},o=a&&(e=>e.filter((e=>b||"DONE"!==e.stage)))(a);return Object(y.jsx)(Yt,{clusterStatus:t,metrics:s,logs:r,cluster:m,shardActivity:o,onBrush:n,showShardActivityHistory:b,toggleShardActivityHistory:h,zoomInfo:i,"data-test-subj":"elasticsearchOverviewPage"})})(p)))},ji=({instance:e,...t})=>{const s=[];return e?s.push({id:"overview",label:c.i18n.translate("xpack.monitoring.beatsNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/beats/beat/${e}`}):(s.push({id:"overview",label:c.i18n.translate("xpack.monitoring.beatsNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/beats",testSubj:"beatsOverviewPage"}),s.push({id:"instances",label:c.i18n.translate("xpack.monitoring.beatsNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/beats/beats",testSubj:"beatsListingPage"})),Object(y.jsx)(As,me()({},t,{tabs:s,product:"beats"}))};function bi({latestActive:e}){const t={last1m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1MinuteLabel",{defaultMessage:"Last 1 minute"}),last5m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last5MinutesLabel",{defaultMessage:"Last 5 minutes"}),last20m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last20MinutesLabel",{defaultMessage:"Last 20 minutes"}),last1h:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1HourLabel",{defaultMessage:"Last 1 hour"}),last1d:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1DayLabel",{defaultMessage:"Last 1 day"})},s=e.map((({range:e,count:s})=>({range:t[e],count:s})));return Object(y.jsx)(u.EuiBasicTable,{items:s,columns:[{field:"range",name:""},{field:"count",dataType:"number",name:""}]})}function xi({latestVersions:e}){return Object(y.jsx)(u.EuiBasicTable,{items:e,columns:[{field:"version",name:""},{field:"count",dataType:"number",name:""}]})}function hi({latestTypes:e}){return Object(y.jsx)(u.EuiBasicTable,{items:e,columns:[{field:"type",name:""},{field:"count",dataType:"number",name:""}]})}function fi({stats:e,alerts:t}){const{total:s,types:a,stats:{bytesSent:i,totalEvents:n}}=e,r=[{label:c.i18n.translate("xpack.monitoring.beats.overview.totalBeatsLabel",{defaultMessage:"Total Beats"}),value:Ze(s,"int_commas"),"data-test-subj":"totalBeats"}];return r.push(...a.map((({type:e,count:t})=>({label:e,value:Ze(t,"int_commas"),"data-test-subj":"typeCount","data-test-type-count":`${e}:${t}`})))),r.push({label:c.i18n.translate("xpack.monitoring.beats.overview.totalEventsLabel",{defaultMessage:"Total Events"}),value:Ze(n,"0.[0]a"),"data-test-subj":"totalEvents"}),r.push({label:c.i18n.translate("xpack.monitoring.beats.overview.bytesSentLabel",{defaultMessage:"Bytes Sent"}),value:Ze(i,"byte"),"data-test-subj":"bytesSent"}),Object(y.jsx)(He,{metrics:r,alerts:t,"data-test-subj":"beatsSummaryStatus"})}function Oi({latestActive:e,latestTypes:t,latestVersions:s,stats:a,metrics:i,alerts:n,...r}){const o=[i.beat_event_rates,i.beat_fail_rates,i.beat_throughput_rates,i.beat_output_errors].map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Rt,me()({series:e},r))))));return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.overview.heading",defaultMessage:"Beats Overview"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(fi,{stats:a,alerts:n})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,function(e,t,s){if(t&&t.length>0)return Object(y.jsx)(u.EuiFlexGroup,{wrap:!0},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.overview.activeBeatsInLastDayTitle",defaultMessage:"Active Beats in last day"}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(bi,{latestActive:e})),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5BeatTypesInLastDayTitle",defaultMessage:"Top 5 Beat Types in last day"}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(hi,{latestTypes:t})),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5VersionsInLastDayTitle",defaultMessage:"Top 5 Versions in last day"}))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(xi,{latestVersions:s})));const a=c.i18n.translate("xpack.monitoring.beats.overview.noActivityDescription",{defaultMessage:"Hi there! This area is where your latest Beats activity would show up, but you don't seem to have any activity within the last day."});return Object(y.jsx)(u.EuiCallOut,{title:a,iconType:"gear","data-test-subj":"noRecentActivityMessage"})}(e,t,s)),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGroup,{wrap:!0},o))))}const vi=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{zoomInfo:i,onBrush:n}=gi(),{services:r}=Object(l.useKibana)(),o=s.cluster_uuid,u=s.ccs,{generate:d}=Object(a.useContext)(Na.Context),m=Object(g.find)(e,{cluster_uuid:o}),[p,j]=Object(a.useState)(null),b=c.i18n.translate("xpack.monitoring.beats.overview.routeTitle",{defaultMessage:"Beats - Overview"}),x=c.i18n.translate("xpack.monitoring.beats.overview.pageTitle",{defaultMessage:"Beats overview"});Object(a.useEffect)((()=>{m&&d(m.cluster_name,{inBeats:!0})}),[m,d]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/beats`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(i)}),[u,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(y.jsx)(ji,{title:b,pageTitle:x,getPageData:h},Object(y.jsx)("div",null,null===(f=p)?null:Object(y.jsx)(Oi,me()({},f,{onBrush:n,zoomInfo:i}))));var f};function Ei({summary:e,metrics:t,...s}){const a=[t.beat_event_rates,t.beat_fail_rates,t.beat_throughput_rates,t.beat_output_errors,t.beat_memory,t.beat_cpu_utilization,t.beat_os_load,t.beat_handles],i=[{label:c.i18n.translate("xpack.monitoring.beats.instance.nameLabel",{defaultMessage:"Name"}),value:e.name,"data-test-subj":"name"},{label:c.i18n.translate("xpack.monitoring.beats.instance.hostLabel",{defaultMessage:"Host"}),value:e.transportAddress,"data-test-subj":"host"},{label:c.i18n.translate("xpack.monitoring.beats.instance.versionLabel",{defaultMessage:"Version"}),value:e.version,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.beats.instance.typeLabel",{defaultMessage:"Type"}),value:e.type,"data-test-subj":"type"},{label:c.i18n.translate("xpack.monitoring.beats.instance.outputLabel",{defaultMessage:"Output"}),value:e.output,"data-test-subj":"output"},{label:c.i18n.translate("xpack.monitoring.beats.instance.configReloadsLabel",{defaultMessage:"Config reloads"}),value:Ze(e.configReloads,"int_commas"),"data-test-subj":"configReloads"},{label:c.i18n.translate("xpack.monitoring.beats.instance.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(e.uptime,"time_since"),"data-test-subj":"uptime"}],n=[{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsTotalLabel",{defaultMessage:"Events total"}),value:Ze(e.eventsTotal,"int_commas"),"data-test-subj":"eventsTotal"},{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsEmittedLabel",{defaultMessage:"Events emitted"}),value:Ze(e.eventsEmitted,"int_commas"),"data-test-subj":"eventsEmitted"},{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsDroppedLabel",{defaultMessage:"Events dropped"}),value:Ze(e.eventsDropped,"int_commas"),"data-test-subj":"eventsDropped"},{label:c.i18n.translate("xpack.monitoring.beats.instance.bytesSentLabel",{defaultMessage:"Bytes sent"}),value:Ze(e.bytesWritten,"byte"),"data-test-subj":"bytesWritten"},{label:c.i18n.translate("xpack.monitoring.beats.instance.handlesLimitSoftLabel",{defaultMessage:"Handles limit (soft)"}),value:Ze(e.handlesSoftLimit,"int_commas"),"data-test-subj":"handlesLimitSoft"},{label:c.i18n.translate("xpack.monitoring.beats.instance.handlesLimitHardLabel",{defaultMessage:"Handles limit (hard)"}),value:Ze(e.handlesHardLimit,"int_commas"),"data-test-subj":"handlesLimitHard"}];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(He,{metrics:i,"data-test-subj":"beatSummaryStatus01"})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(He,{metrics:n,"data-test-subj":"beatSummaryStatus02"})),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.beat.heading",defaultMessage:"Beat"}))),Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null))))))))}const yi=({clusters:e})=>{var t;const{instance:s}=Object(o.useParams)(),i=Object(a.useContext)(M),{services:n}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Na.Context),{zoomInfo:u,onBrush:d}=gi(),m=i.cluster_uuid,p=i.ccs,j=Object(g.find)(e,{cluster_uuid:m}),[b,x]=Object(a.useState)({}),[h,f]=Object(a.useState)(""),O=c.i18n.translate("xpack.monitoring.beats.instance.routeTitle",{defaultMessage:"Beats - {instanceName} - Overview",values:{instanceName:h}}),v=c.i18n.translate("xpack.monitoring.beats.instance.pageTitle",{defaultMessage:"Beat instance: {beatName}",values:{beatName:h}});Object(a.useEffect)((()=>{j&&r(j.cluster_name,{inBeats:!0,instance:h})}),[j,h,r]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${m}/beats/beat/${s}`,r=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));x(r),f((null==r?void 0:r.summary.name)||"")}),[p,m,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(y.jsx)(ji,{title:O,pageTitle:v,getPageData:E,instance:s,"data-test-subj":"beatDetailPage"},Object(y.jsx)("div",{"data-test-subj":"monitoringBeatsInstanceApp"},Object(y.jsx)(Ei,{summary:b.summary,metrics:b.metrics,onBrush:d,zoomInfo:u})))},Mi=({...e})=>{const t=[{id:"overview",label:c.i18n.translate("xpack.monitoring.apmNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/apm"},{id:"instances",label:c.i18n.translate("xpack.monitoring.apmNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/apm/instances"}];return Object(y.jsx)(As,me()({},e,{tabs:t,product:"apm"}))},ki=(e,t)=>e.map(((e,s)=>Object(y.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:s},Object(y.jsx)(Rt,me()({},t,{series:e}))))),Si=({stats:e,metrics:t,seriesToShow:s,title:a,summary:i,StatusComponent:n,...r})=>{if(!t)return null;const o=null!=i&&i.version?[null==i?void 0:i.version]:e.versions,l=(e=>{const t={};return e?(t.title=c.i18n.translate("xpack.monitoring.apm.metrics.topCharts.agentTitle",{defaultMessage:"Integrations Server - Resource Usage"}),t.heading=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.apm.metrics.agentHeading",defaultMessage:"Integrations Server"}),t):(t.title=c.i18n.translate("xpack.monitoring.apm.metrics.topCharts.title",{defaultMessage:"APM Server - Resource Usage"}),t.heading=Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.apm.metrics.heading",defaultMessage:"APM server"}),t)})(ja(o)),d=[t.apm_cpu,t.apm_os_load],{config:g}=i||e;return d.push(g.container?t.apm_memory_cgroup:t.apm_memory),Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,l.heading)),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(n,{stats:e})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h3",null,l.title)),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiFlexGroup,{wrap:!0},ki(d,r))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h3",null,a)),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiFlexGroup,{wrap:!0},ki(s,r)))))};function _i({status:e,availability:t=!0}){const s=(()=>{if(!t)return pe.GRAY;const s=e.toUpperCase();return pe[s]||pe.YELLOW})();return Object(y.jsx)(be,{type:s,label:c.i18n.translate("xpack.monitoring.apm.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Ti({alerts:e,stats:t}){const{apms:{total:s},totalEvents:i,timeOfLastEvent:n}=t,r=[{label:c.i18n.translate("xpack.monitoring.apm.instances.status.serversLabel",{defaultMessage:"Servers"}),value:s,"data-test-subj":"total"},{label:c.i18n.translate("xpack.monitoring.apm.instances.status.totalEventsLabel",{defaultMessage:"Total Events"}),value:Ze(i,"0.[0]a"),"data-test-subj":"totalEvents"},{label:c.i18n.translate("xpack.monitoring.apm.instances.status.lastEventLabel",{defaultMessage:"Last Event"}),value:c.i18n.translate("xpack.monitoring.apm.instances.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+fe()(n),Oe.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(y.jsx)(He,{metrics:r,alerts:e,IconComponent:({status:e})=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.apm.instances.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(y.jsx)(_i,{status:e})}})),"data-test-subj":"apmDetailStatus"})}function wi({stats:e}){return Object(y.jsx)(Ti,{stats:e})}const Ci=c.i18n.translate("xpack.monitoring.apm.overview.panels.title",{defaultMessage:"APM Server - Metrics"});function Ii(e){const{metrics:t}=e,s=[t.apm_responses_valid,t.apm_responses_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_requests,t.apm_transformations],a={...e,title:Ci,seriesToShow:s};return Object(y.jsx)(Si,me()({},a,{StatusComponent:wi}))}const Li=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{zoomInfo:i,onBrush:n}=gi(),{services:r}=Object(l.useKibana)(),o=s.cluster_uuid,u=s.ccs,{generate:d}=Object(a.useContext)(Na.Context),m=Object(g.find)(e,{cluster_uuid:o}),[p,j]=Object(a.useState)(null),b=c.i18n.translate("xpack.monitoring.apm.overview.routeTitle",{defaultMessage:"APM server"}),x=c.i18n.translate("xpack.monitoring.apm.overview.pageTitle",{defaultMessage:"APM server overview"});Object(a.useEffect)((()=>{m&&d(m.cluster_name,{inApm:!0})}),[m,d]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/apm`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(i)}),[u,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(y.jsx)(Mi,{title:b,pageTitle:x,getPageData:h,"data-test-subj":"apmOverviewPage"},p&&Object(y.jsx)(Ii,me()({},p,{onBrush:n,zoomInfo:i})))};function Fi(e,t,s){const i=s?{name:c.i18n.translate("xpack.monitoring.apm.instances.cgroupMemoryUsageTitle",{defaultMessage:"Memory Usage (cgroup)"}),field:"cgroup_memory",render:e=>Ze(e,"byte")}:{name:c.i18n.translate("xpack.monitoring.apm.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Ze(e,"byte")};return[{name:c.i18n.translate("xpack.monitoring.apm.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(e,s)=>{let i=null;if(U(I.d.MetricbeatMigration)){const e=Object(g.get)(t,"data.byUuid",{})[s.uuid]||{},a={uuid:s.uuid,name:s.name};i=Object(y.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(y.jsx)(ls,{setupMode:t,status:e,instance:a,productName:Oe.a}))}return Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiLink,{href:se(`#/apm/instances/${s.uuid}`),"data-test-subj":`apmLink-${e}`},e),i)}},{name:c.i18n.translate("xpack.monitoring.apm.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:c.i18n.translate("xpack.monitoring.apm.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Ze(e,"","/s")},{name:c.i18n.translate("xpack.monitoring.apm.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Ze(e,"byte","/s")},{name:c.i18n.translate("xpack.monitoring.apm.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Ze(e,"0")},{name:c.i18n.translate("xpack.monitoring.apm.instances.lastEventTitle",{defaultMessage:"Last Event"}),field:"time_of_last_event",render:e=>c.i18n.translate("xpack.monitoring.apm.instances.lastEventValue",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+fe()(e),"since")}})},i,{name:c.i18n.translate("xpack.monitoring.apm.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}function Pi({apms:e,alerts:t,setupMode:s}){const{pagination:a,sorting:i,onTableChange:n,data:r}=e;let o=null;U(I.d.MetricbeatMigration)&&(o=Object(y.jsx)(us,{setupModeData:s.data,useNodeIdentifier:!1,productName:Oe.a}));const l=Object(g.uniq)(r.apms.map((e=>e.version))).map((e=>({value:e})));return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.apm.instances.heading",defaultMessage:"APM Instances"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Ti,{stats:r.stats,alerts:t})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,o,Object(y.jsx)(dt,{className:"apmInstancesTable",rows:r.apms,columns:Fi(0,s,r.cgroup),sorting:i,pagination:a,setupMode:s,productName:Oe.a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.apm.instances.filterInstancesPlaceholder",{defaultMessage:"Filter Instances…"})},filters:[{type:"field_value_selection",field:"version",name:c.i18n.translate("xpack.monitoring.apm.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:n,executeQueryOptions:{defaultFields:["name"]}}))))}const Ni=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Na.Context),{updateTotalItemCount:r,getPaginationTableProps:o}=Qa("apm.instances"),u=s.cluster_uuid,d=s.ccs,m=Object(g.find)(e,{cluster_uuid:u}),[p,j]=Object(a.useState)({}),b=c.i18n.translate("xpack.monitoring.apm.instances.routeTitle",{defaultMessage:"{apm} - Instances",values:{apm:"APM server"}}),x=c.i18n.translate("xpack.monitoring.apm.instances.pageTitle",{defaultMessage:"APM server instances"});Object(a.useEffect)((()=>{m&&n(m.cluster_name,{inApm:!0})}),[m,n]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/apm/instances`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(n),r(null==n?void 0:n.stats.total)}),[d,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,r]),{pagination:f,sorting:O,onTableChange:v}=o();return Object(y.jsx)(Mi,{title:b,pageTitle:x,getPageData:h,"data-test-subj":"apmInstancesPage"},Object(y.jsx)(La,{productName:Oe.a,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(Pi,{setupMode:e,apms:{pagination:f,sorting:O,onTableChange:v,data:p}}),s)}))};function Di({alerts:e=null,stats:t}){const{name:s,output:i,version:n,uptime:r,timeOfLastEvent:o}=t,l=[{label:c.i18n.translate("xpack.monitoring.apm.instance.status.nameLabel",{defaultMessage:"Name"}),value:s,"data-test-subj":"name"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.outputLabel",{defaultMessage:"Output"}),value:i,"data-test-subj":"output"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.versionLabel",{defaultMessage:"Version"}),value:n,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(r,"time_since"),"data-test-subj":"uptime"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.lastEventLabel",{defaultMessage:"Last Event"}),value:c.i18n.translate("xpack.monitoring.apm.instance.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+fe()(o),Oe.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(y.jsx)(He,{metrics:l,alerts:e,IconComponent:({status:e})=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.apm.instance.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(y.jsx)(_i,{status:e})}})),"data-test-subj":"apmDetailStatus"})}const Ri=c.i18n.translate("xpack.monitoring.apm.instance.panels.title",{defaultMessage:"APM Server - Metrics"});function Ai(e){const{metrics:t}=e,s=[t.apm_requests,t.apm_responses_valid,t.apm_responses_errors,t.apm_acm_request_count,t.apm_acm_response,t.apm_acm_response_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_transformations],a=e.summary,i={...e,title:Ri,seriesToShow:s,stats:a};return Object(y.jsx)(Si,me()({},i,{StatusComponent:Di}))}const zi=({clusters:e})=>{var t;const{instance:s}=Object(o.useParams)(),i=Object(a.useContext)(M),{services:n}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Na.Context),{zoomInfo:u,onBrush:d}=gi(),m=i.cluster_uuid,p=i.ccs,j=Object(g.find)(e,{cluster_uuid:m}),[b,x]=Object(a.useState)({}),[h,f]=Object(a.useState)(""),O=c.i18n.translate("xpack.monitoring.apm.instance.routeTitle",{defaultMessage:"{apm} - Instance",values:{apm:"APM server"}}),v=c.i18n.translate("xpack.monitoring.apm.instance.pageTitle",{defaultMessage:"APM server instance: {instanceName}",values:{instanceName:h}});Object(a.useEffect)((()=>{j&&r(j.cluster_name,{inApm:!0,instance:h})}),[j,h,r]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${m}/apm/${s}`,r=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));x(r),f((null==r?void 0:r.apmSummary.name)||"")}),[p,m,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(y.jsx)(As,{title:O,pageTitle:v,getPageData:E,"data-test-subj":"apmInstancePage"},Object(y.jsx)(Ai,{summary:b.apmSummary||{},metrics:b.metrics||{},onBrush:d,zoomInfo:u}))},Bi=({...e})=>{const t=[{id:"overview",label:c.i18n.translate("xpack.monitoring.kibanaNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/kibana",testSubj:"kibanaOverviewPage"},{id:"instances",label:c.i18n.translate("xpack.monitoring.kibanaNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/kibana/instances",testSubj:"kibanaInstancesPage"}];return Object(y.jsx)(As,me()({},e,{tabs:t,product:"kibana"}))};function Vi({status:e,availability:t=!0}){const s=(()=>{if(!t)return pe.GRAY;const s=e.toUpperCase();return pe[s]||pe.YELLOW})();return Object(y.jsx)(be,{type:s,label:c.i18n.translate("xpack.monitoring.kibana.statusIconLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Ui({stats:e,alerts:t}){const{concurrent_connections:s,count:a,memory_limit:i,memory_size:n,requests_total:r,response_time_max:o,status:l}=e,u=[{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.instancesLabel",{defaultMessage:"Instances"}),value:a,"data-test-subj":"instances"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Ze(n,"byte")+" / "+Ze(i,"byte"),"data-test-subj":"memory"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.requestsLabel",{defaultMessage:"Requests"}),value:r,"data-test-subj":"requests"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.connectionsLabel",{defaultMessage:"Connections"}),value:s,"data-test-subj":"connections"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.maxResponseTimeLabel",{defaultMessage:"Max. Response Time"}),value:Ze(o,"0","ms"),"data-test-subj":"maxResponseTime"}];return Object(y.jsx)(He,{metrics:u,status:l,alerts:t,IconComponent:({status:e})=>Object(y.jsx)(Vi,{status:e}),"data-test-subj":"kibanaClusterStatus"})}const $i=({data:e})=>{const{zoomInfo:t,onBrush:s}=gi();return e?Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Ui,{stats:e.clusterStatus})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGroup,null,Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_cluster_requests,onBrush:s,zoomInfo:t})),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_cluster_response_times,onBrush:s,zoomInfo:t})))))):null},Gi=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Na.Context),[r,o]=Object(a.useState)(),u=s.cluster_uuid,d=Object(g.find)(e,{cluster_uuid:u}),m=s.ccs,p=c.i18n.translate("xpack.monitoring.kibana.overview.title",{defaultMessage:"Kibana"}),j=c.i18n.translate("xpack.monitoring.kibana.overview.pageTitle",{defaultMessage:"Kibana overview"});Object(a.useEffect)((()=>{d&&n(d.cluster_name,{inKibana:!0})}),[d,n]);const b=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/kibana`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));o(n)}),[m,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(y.jsx)(Bi,{getPageData:b,title:p,pageTitle:j},Object(y.jsx)($i,{data:r}))},qi=(e,t)=>[{name:c.i18n.translate("xpack.monitoring.kibana.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(U(I.d.MetricbeatMigration)){const i=Object(g.get)(e,"data.byUuid",{}),n=Object(g.get)(s,"kibana.uuid"),r=i[n]||{},o={uuid:n,name:s.name};if(a=Object(y.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(y.jsx)(ls,{setupMode:e,status:r,instance:o,productName:Oe.B})),r.isNetNewUser)return Object(y.jsx)("div",null,t,a)}return Object(y.jsx)("div",null,Object(y.jsx)(u.EuiLink,{href:se(`#/kibana/instances/${s.kibana.uuid}`),"data-test-subj":`kibanaLink-${t}`},t),a)}},{name:c.i18n.translate("xpack.monitoring.kibana.listing.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(y.jsx)(Ue,{showBadge:!0,alerts:t})},{name:c.i18n.translate("xpack.monitoring.kibana.listing.statusColumnTitle",{defaultMessage:"Status"}),field:"status",render:(e,t)=>Object(y.jsx)(u.EuiToolTip,{content:e,position:"bottom"},Object(y.jsx)(u.EuiHealth,{color:t.availability?"success":"subdued","data-test-subj":"statusIcon"},Object(g.capitalize)(e)))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.loadAverageColumnTitle",{defaultMessage:"Load Average"}),field:"os.load.1m",render:e=>Object(y.jsx)("span",null,Ze(e,"0.00"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.memorySizeColumnTitle",{defaultMessage:"Memory Size"}),field:"process.memory.resident_set_size_in_bytes",render:e=>Object(y.jsx)("span",null,Xe(e,"byte"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.requestsColumnTitle",{defaultMessage:"Requests"}),field:"requests.total",render:e=>Object(y.jsx)("span",null,Xe(e,"int_commas"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.responseTimeColumnTitle",{defaultMessage:"Response Times"}),field:"response_times.average",render:(e,t)=>{var s;return e?Object(y.jsx)("div",null,Object(y.jsx)("div",{className:"monTableCell__splitNumber"},Xe(e,"int_commas")+" ms avg"),Object(y.jsx)("div",{className:"monTableCell__splitNumber"},Xe(null==t||null===(s=t.response_times)||void 0===s?void 0:s.max,"int_commas")," ms max")):null}}],Hi=e=>{const{clusterStatus:t,alerts:s,setupMode:i,sorting:n,pagination:r,onTableChange:o}=e;let l=null;const d=e.instances||[];if(U(I.d.MetricbeatMigration)){const e=d.reduce(((e,t)=>{var s,a;return{...e,[null!==(s=null===(a=t.kibana)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""]:t}}),{});d.push(...Object.entries(i.data.byUuid).reduce(((t,[s,a])=>(e[s]||t.push({kibana:{...a.instance.kibana,status:pe.GRAY}}),t)),[])),l=Object(y.jsx)(us,{setupModeData:i.data,useNodeIdentifier:!1,productName:Oe.B,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null};return i.data.totalUniqueInstanceCount>0||(e.shouldRender=!0,e.componentToRender=Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Kibana instance detected"}),color:"warning",iconType:"flag"},Object(y.jsx)("p",null,c.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following instances are not monitored.\n                        Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}))),e}})}const g=d.map((e=>{var t,s;return{...e,name:null===(t=e.kibana)||void 0===t?void 0:t.name,status:null===(s=e.kibana)||void 0===s?void 0:s.status}}));return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.kibana.instances.heading",defaultMessage:"Kibana instances"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Ui,{stats:t,alerts:s})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),l,Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(dt,{className:"kibanaInstancesTable",rows:g,columns:qi(i,s),sorting:n,pagination:r,setupMode:i,productName:Oe.B,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.kibana.listing.filterInstancesPlaceholder",{defaultMessage:"Filter Instances…"})}},onTableChange:o,executeQueryOptions:{defaultFields:["name"]}}))))},Wi=({clusters:e})=>{var t;const{cluster_uuid:s,ccs:i}=Object(a.useContext)(M),{services:n}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Na.Context),{updateTotalItemCount:o,getPaginationTableProps:u}=Qa("kibana.instances"),d=Object(g.find)(e,{cluster_uuid:s}),[m,p]=Object(a.useState)({}),[j,b]=Object(a.useState)({}),x=c.i18n.translate("xpack.monitoring.kibana.instances.routeTitle",{defaultMessage:"Kibana - Instances"}),h=c.i18n.translate("xpack.monitoring.kibana.instances.pageTitle",{defaultMessage:"Kibana instances"});Object(a.useEffect)((()=>{d&&r(d.cluster_name,{inKibana:!0})}),[d,r]);const f=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),r=`../api/monitoring/v1/clusters/${s}/kibana/instances`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&s){var l;const e=await(null===(l=n.http)||void 0===l?void 0:l.fetch(r,{method:"POST",body:JSON.stringify({ccs:i,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));p(e),o(e.kibanas.length);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.N],clusterUuid:s,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});b(t)}}),[i,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,o]);return Object(y.jsx)(Bi,{title:x,pageTitle:h,getPageData:f},Object(y.jsx)("div",{"data-test-subj":"monitoringKibanaInstancesApp"},Object(y.jsx)(La,{productName:Oe.B,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(Hi,me()({alerts:j,instances:m.kibanas,setupMode:e,clusterStatus:m.clusterStatus},u())),s)})))};function Ki({stats:e}){const{transport_address:t,os_memory_free:s,version:a,uptime:i,status:n}=e,r=[{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"transportAddress"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.osFreeMemoryLabel",{defaultMessage:"OS Free Memory"}),value:Ze(s,"byte"),"data-test-subj":"osFreeMemory"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.versionLabel",{defaultMessage:"Version"}),value:a,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(i,"time_since"),"data-test-subj":"uptime"}];return Object(y.jsx)(He,{metrics:r,status:n,IconComponent:({status:e})=>Object(y.jsx)(Vi,{status:e}),"data-test-subj":"kibanaDetailStatus"})}const Ji=({data:e,alerts:t})=>{const{zoomInfo:s,onBrush:a}=gi();return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Ki,{stats:e.kibanaSummary})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:t}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_requests,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null)),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_response_times,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null)),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_memory,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null)),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_average_concurrent_connections,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null)),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_os_load,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null)),Object(y.jsx)(u.EuiFlexItem,{grow:!0},Object(y.jsx)(Rt,{series:e.metrics.kibana_process_delay,onBrush:a,zoomInfo:s}),Object(y.jsx)(u.EuiSpacer,null))))))},Yi=({clusters:e})=>{var t;const{instance:s}=Object(o.useParams)(),i=Object(a.useContext)(M),{services:n}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Na.Context),u=i.cluster_uuid,d=i.ccs,m=Object(g.find)(e,{cluster_uuid:u}),[p,j]=Object(a.useState)({}),[b,x]=Object(a.useState)(""),[h,f]=Object(a.useState)({}),O=`Kibana - ${b}`,v=c.i18n.translate("xpack.monitoring.kibana.instance.pageTitle",{defaultMessage:"Kibana instance: {instance}",values:{instance:b}});Object(a.useEffect)((()=>{m&&r(m.cluster_name,{inKibana:!0,instance:b})}),[m,b,r]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${u}/kibana/${s}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&u){var r;const e=await(null===(r=n.http)||void 0===r?void 0:r.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));j(e),x(e.kibanaSummary.name);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.N],clusterUuid:u,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});f(t)}}),[d,u,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(y.jsx)(As,{title:O,pageTitle:v,getPageData:E},Object(y.jsx)("div",{"data-test-subj":"kibanaInstancePage"},Object(y.jsx)(Ji,{data:p,alerts:h})))},Qi=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{showCgroupMetricsElasticsearch:n}=Object(a.useContext)(Oa),{services:r}=Object(l.useKibana)(),[o,u]=i.a.useState(!1),{generate:d}=Object(a.useContext)(Na.Context),{getPaginationRouteOptions:m,updateTotalItemCount:p,getPaginationTableProps:j}=Qa("elasticsearch.nodes"),b=s.cluster_uuid,x=s.ccs,h=Object(g.find)(e,{cluster_uuid:b}),[f,O]=Object(a.useState)({}),[v,E]=Object(a.useState)({}),k=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.routeTitle",{defaultMessage:"Elasticsearch - Nodes"}),S=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.pageTitle",{defaultMessage:"Elasticsearch nodes"});Object(a.useEffect)((()=>{h&&d(h.cluster_name,{inElasticsearch:!0})}),[h,d]);const _=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${b}/elasticsearch/nodes`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&b){var i;u(!0);const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:x,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...m()})}));u(!1),O(e),p(e.totalNodeCount);const t=await Da({fetch:r.http.fetch,clusterUuid:b,alertTypeIds:[Oe.J,Oe.L,Oe.W,Oe.X,Oe.R,Oe.S],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});E(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,b,x,m,p]);return Object(y.jsx)(ui,{title:k,pageTitle:S,getPageData:_,"data-test-subj":"elasticsearchOverviewPage",cluster:h},Object(y.jsx)("div",{"data-test-subj":"elasticsearchNodesListingPage"},Object(y.jsx)(La,{productName:Oe.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(gs,me()({clusterStatus:f.clusterStatus,clusterUuid:s.cluster_uuid,setupMode:e,nodes:f.nodes,alerts:v,isLoading:o,showCgroupMetricsElasticsearch:n},j())),a)})))},Xi=(e,t)=>{const s="xpack.monitoring.data",i=()=>{const e=window.localStorage.getItem(s);let t={};try{t=e&&JSON.parse(e)||{}}catch(e){throw new Error("Monitoring UI: error parsing locally stored monitoring data")}return t},n=t=>{const a=i();a[e]=t,window.localStorage.setItem(s,JSON.stringify(a))},r=(()=>{const t=i();if(Object(g.has)(t,e))return t[e]})();r||n(t);const o=r||t,[l,c]=Object(a.useState)(o);return[l,e=>{n(e),c(e)}]},Zi=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{generate:i}=Object(a.useContext)(Na.Context),{services:n}=Object(l.useKibana)(),{getPaginationTableProps:r}=Qa("elasticsearch.indices"),o=s.cluster_uuid,u=s.ccs,d=Object(g.find)(e,{cluster_uuid:o}),[m,p]=Object(a.useState)({}),[j,b]=Xi("showSystemIndices",!1),[x,h]=Object(a.useState)({});Object(a.useEffect)((()=>{d&&i(d.cluster_name,{inElasticsearch:!0})}),[d,i]);const f=c.i18n.translate("xpack.monitoring.elasticsearch.indices.routeTitle",{defaultMessage:"Elasticsearch - Indices"}),O=c.i18n.translate("xpack.monitoring.elasticsearch.indices.pageTitle",{defaultMessage:"Elasticsearch indices"}),v=Object(a.useCallback)((()=>b(!j)),[j,b]),E=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/elasticsearch/indices`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&o){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",query:{show_system_indices:j},body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(e);const t=await Da({fetch:n.http.fetch,clusterUuid:o,alertTypeIds:[Oe.O],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,o,j,u]);return Object(y.jsx)(ui,{title:f,pageTitle:O,getPageData:E,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(y.jsx)("div",{"data-test-subj":"elasticsearchIndicesListingPage"},Object(y.jsx)(La,{productName:Oe.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},e,Object(y.jsx)(ks,me()({clusterStatus:m.clusterStatus,indices:m.indices,alerts:x,showSystemIndices:j,toggleShowSystemIndices:v},r())),t)})))};function en({stats:e,alerts:t={}}){const{dataSize:s,documents:i,totalShards:n,unassignedShards:r,status:o}=e,l=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(y.jsx)(Ue,{alerts:t,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalTitle",{defaultMessage:"Total"}),value:Ze(s.total,"0.0 b"),"data-test-subj":"dataSize"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.primariesTitle",{defaultMessage:"Primaries"}),value:Ze(s.primaries,"0.0 b"),"data-test-subj":"dataSizePrimaries"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.documentsTitle",{defaultMessage:"Documents"}),value:Ze(i,"0.[0]a"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalShardsTitle",{defaultMessage:"Total shards"}),value:Ze(n,"int_commas"),"data-test-subj":"totalShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.unassignedShardsTitle",{defaultMessage:"Unassigned shards"}),value:Ze(r,"int_commas"),"data-test-subj":"unassignedShards"}];return Object(y.jsx)(He,{metrics:l,status:o,IconComponent:({status:e})=>Object(y.jsx)(a.Fragment,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indexDetailStatus.iconStatusLabel",defaultMessage:"Health: {elasticsearchStatusIcon}",values:{elasticsearchStatusIcon:Object(y.jsx)(We,{status:e})}})),"data-test-subj":"elasticsearchIndexDetailStatus"})}const tn=({indexSummary:e,metrics:t,clusterUuid:s,indexUuid:a,logs:i,alerts:n,...r})=>{const o=[t.index_size,t.index_search_request_rate,t.index_request_rate,t.index_segment_count,t.index_document_count];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(en,{stats:e,alerts:n})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:n}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},r)),Object(y.jsx)(u.EuiSpacer,null))))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(logs_Logs,{logs:i,indexUuid:a,clusterUuid:s})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(Es,r))))},sn=e=>{const{pageType:t,id:s,...a}=e,i=[{id:"overview",label:c.i18n.translate("xpack.monitoring.esItemNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:`/elasticsearch/${t}/${s}`},{id:"advanced",testSubj:"esItemDetailAdvancedLink",label:c.i18n.translate("xpack.monitoring.esItemNavigation.advancedLinkText",{defaultMessage:"Advanced"}),route:`/elasticsearch/${t}/${s}/advanced`}];return Object(y.jsx)(As,me()({},a,{tabs:i,product:"elasticsearch"}))};function an(e,t){return e.map((e=>{const s=t[e.node];return e.nodeName=s&&s.name||null,e.type="shard",e.tooltip_message=function(e){const s=Object(g.get)(Object(g.find)(t,(t=>{return s=t,Object(g.includes)(s.node_ids,e.relocating_node);var s})),"name");if(s){if("INITIALIZING"===e.state)return c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingFromTextMessage",{defaultMessage:"Relocating from {nodeName}",values:{nodeName:s}});if("RELOCATING"===e.state)return c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingToTextMessage",{defaultMessage:"Relocating to {nodeName}",values:{nodeName:s}})}const a=Object(g.get)(e,"state",Object(g.get)(e,"shard.state"));return Object(g.upperFirst)(a.toLowerCase())}(e),e}))}const nn={index:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.nodesLabel",{defaultMessage:"Nodes"})}],indexWithUnassigned:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedLabel",{defaultMessage:"Unassigned"})},{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedNodesLabel",{defaultMessage:"Nodes"})}],node:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.indicesLabel",{defaultMessage:"Indices"}),showToggleSystemIndicesComponent:!0}]},rn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{generate:i}=Object(a.useContext)(Na.Context),{services:n}=Object(l.useKibana)(),{index:r}=Object(o.useParams)(),{zoomInfo:u,onBrush:d}=gi(),m=s.cluster_uuid,p=s.ccs,[j,b]=Object(a.useState)({}),[x,h]=Object(a.useState)(nn.index),[f,O]=Object(a.useState)([]),[v,E]=Object(a.useState)({}),k=Object(g.find)(e,{cluster_uuid:m});Object(a.useEffect)((()=>{k&&i(k.cluster_name,{inElasticsearch:!0,name:"indices",instance:r})}),[k,i,r]);const S=c.i18n.translate("xpack.monitoring.elasticsearch.index.overview.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Overview",values:{indexName:r}}),_=c.i18n.translate("xpack.monitoring.elasticsearch.index.overview.pageTitle",{defaultMessage:"Index: {indexName}",values:{indexName:r}}),T=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${m}/elasticsearch/indices/${r}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&m){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));b(e);const t=function(e,t){const s=Object(g.reduce)(an(e,t),(function(e,s){return e=function(e,t){const s=t.index;return e[s]||(e[s]={id:s,name:s,children:[],unassigned:[],unassignedPrimaries:!1,type:"index"}),e}(e,s),e=function(e,s){const{node:a,index:i}=s;if(!s.node||null===s.node)return e[i].unassigned.push(s),s.primary&&(e[i].unassignedPrimaries=!0),e;let n=Object(g.find)(e[i].children,{id:a});return n||(n={id:a,type:"node",name:t[a].name,node_type:t[a].type,ip_port:t[a].transport_address,children:[]},e[i].children.push(n)),n.children.push(s),e}(e,s),e}),{}),a=Object(g.values)(s);return Object(g.sortBy)(a,(e=>[!e.unassignedPrimaries,/^\./.test(e.name),e.name]))};O(t(e.shards,e.nodes)),e.shards.some((e=>"UNASSIGNED"===e.state))&&h(nn.indexWithUnassigned);const o=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.O],filters:[{shardIndex:r}],clusterUuid:m,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});E(o)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,m,r,p]);return Object(y.jsx)(sn,{title:S,pageTitle:_,getPageData:T,id:r,pageType:"indices"},Object(y.jsx)(La,{productName:Oe.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(tn,me()({setupMode:e,labels:x,alerts:v,onBrush:d,indexUuid:r,clusterUuid:m,zoomInfo:u,nodesByIndices:f},j)),s)}))},on=({indexSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.index_3,t.index_4,t.index_total,t.index_time,t.index_refresh,t.index_throttling,t.index_disk,t.index_segment_count,t.index_latency];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.index.advanced.heading",defaultMessage:"Elasticsearch index advanced view"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(en,{stats:e,alerts:s})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:s}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},a)),Object(y.jsx)(u.EuiSpacer,null))))))))},ln=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{generate:i}=Object(a.useContext)(Na.Context),{services:n}=Object(l.useKibana)(),{index:r}=Object(o.useParams)(),{zoomInfo:u,onBrush:d}=gi(),m=s.cluster_uuid,p=s.ccs,[j,b]=Object(a.useState)({}),[x,h]=Object(a.useState)({}),f=Object(g.find)(e,{cluster_uuid:m});Object(a.useEffect)((()=>{f&&i(f.cluster_name,{inElasticsearch:!0,name:"indices",instance:r})}),[f,i,r]);const O=c.i18n.translate("xpack.monitoring.elasticsearch.index.advanced.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Advanced",values:{indexName:r}}),v=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${m}/elasticsearch/indices/${r}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&m){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));b(e);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.O],filters:[{shardIndex:r}],clusterUuid:m,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,m,r,p]);return Object(y.jsx)(sn,{title:O,getPageData:v,id:r,pageType:"indices",pageTitle:r},Object(y.jsx)(La,{productName:Oe.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(on,{setupMode:e,alerts:x,indexSummary:j.indexSummary,metrics:j.metrics,onBrush:d,zoomInfo:u}),s)}))};function cn(e){return Object(g.some)(e.children,{primary:!0})}const un=({clusters:e})=>{var t,s,i,n;const r=Object(a.useContext)(M),{generate:u}=Object(a.useContext)(Na.Context),{zoomInfo:d,onBrush:m}=gi(),[p,j]=Xi("showSystemIndices",!1),[b,x]=Object(a.useState)({}),{node:h}=Object(o.useParams)(),{services:f}=Object(l.useKibana)(),[O,v]=Object(a.useState)({}),E=r.cluster_uuid,k=Object(g.find)(e,{cluster_uuid:E});Object(a.useEffect)((()=>{var e;k&&u(k.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==O||null===(e=O.nodeSummary)||void 0===e?void 0:e.name})}),[k,u,null==O||null===(t=O.nodeSummary)||void 0===t?void 0:t.name]);const S=r.ccs,[_,T]=Object(a.useState)([]),w=c.i18n.translate("xpack.monitoring.elasticsearch.node.overview.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Overview",values:{nodeName:null==O||null===(s=O.nodeSummary)||void 0===s?void 0:s.name}}),C=c.i18n.translate("xpack.monitoring.elasticsearch.node.overview.pageTitle",{defaultMessage:"Elasticsearch node: {node}",values:{node:null==O||null===(i=O.nodeSummary)||void 0===i?void 0:i.name}}),I=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=f.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${E}/elasticsearch/nodes/${h}`;if(null!==(t=f.http)&&void 0!==t&&t.fetch&&E){var i;const e=await(null===(i=f.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({showSystemIndices:p,ccs:S,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));v(e);const t=function(e,t){let s={};Object(g.some)(e,(function(e){return"UNASSIGNED"===e.state}))&&(s.unassigned={name:"Unassigned",master:!1,type:"node",children:[]}),s=Object(g.reduce)(an(e,t),(function(e,s){const a=Object(g.get)(s,"node.name",s.node||"unassigned"),i=Object(g.get)(s,"index.name",s.index);e[a]||function(e,t,s){t.type="node",t.children=[];const a=function(e){return"true"===(e.attributes||{}).master?"master":"normal"}(t);"normal"!==a&&"data"!==a||(e[s]=t)}(e,t[a],a);let n=Object(g.find)(e[a].children,{id:i});return n||(n={id:i,name:i,type:"index",children:[]},e[a].children.push(n)),n.children.push(s),e}),s);const a=Object(g.values)(s);return Object(g.sortBy)(a,(function(e){return["Unassigned"!==e.name,!e.master,e.name]})).map((function(e){return"Unassigned"===e.name&&(e.unassignedPrimaries=e.children.some(cn)),e}))};T(t(e.shards,e.nodes));const n=await Da({fetch:f.http.fetch,alertTypeIds:[Oe.J,Oe.W,Oe.X,Oe.S,Oe.L,Oe.R],filters:[{nodeUuid:h}],clusterUuid:E,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(n)}}),[null===(n=f.data)||void 0===n?void 0:n.query.timefilter.timefilter,f.http,E,h,p,S]),L=Object(a.useCallback)((()=>{j(!p)}),[p,j]);return Object(y.jsx)(sn,{title:w,pageTitle:C,getPageData:I,id:h,pageType:"nodes"},Object(y.jsx)(La,{productName:Oe.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(ys,me()({alerts:b,labels:nn.node,nodeId:h,clusterUuid:E,onBrush:m,zoomInfo:d,toggleShowSystemIndices:L,showSystemIndices:p,nodesByIndices:_},O)),s)}))},dn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{generate:i}=Object(a.useContext)(Na.Context),{services:n}=Object(l.useKibana)(),{getPaginationTableProps:r}=Qa("elasticsearch.mlJobs"),o=s.cluster_uuid,u=s.ccs,d=Object(g.find)(e,{cluster_uuid:o});Object(a.useEffect)((()=>{d&&i(d.cluster_name,{inElasticsearch:!0})}),[d,i]);const[m,p]=Object(a.useState)({}),j=c.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.routeTitle",{defaultMessage:"Elasticsearch - Machine Learning Jobs"}),b=c.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.pageTitle",{defaultMessage:"Elasticsearch machine learning jobs"}),x=Object(a.useCallback)((async()=>{var e,t,s;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${o}/elasticsearch/ml_jobs`,r=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));p({clusterStatus:null==r?void 0:r.clusterStatus,jobs:null==r||null===(s=r.rows)||void 0===s?void 0:s.map((e=>{var t;return"ml"in e&&null!==(t=e.ml)&&void 0!==t&&t.job?{...e.ml.job,node:e.node,job_id:e.ml.job.id}:e}))})}),[u,o,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(y.jsx)(ui,{title:j,pageTitle:b,getPageData:x,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(y.jsx)("div",{"data-test-subj":"elasticsearchMLJobsListingPage"},Object(y.jsx)(La,{productName:Oe.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},e,Object(y.jsx)(_s,me()({clusterStatus:m.clusterStatus,jobs:m.jobs},r())),t)})))},gn=({nodeSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.node_gc,t.node_gc_time,t.node_jvm_mem,t.node_cpu_utilization,t.node_index_3,t.node_index_4,t.node_index_time,t.node_request_total,t.node_index_threads,t.node_read_threads,t.node_cgroup_cpu,t.node_cgroup_stats,t.node_latency];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.advanced.heading",defaultMessage:"Elasticsearch node advanced"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(ps,{stats:e,alerts:s})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:s}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},a)),Object(y.jsx)(u.EuiSpacer,null))))))))},mn=({clusters:e})=>{var t,s,i,n;const r=Object(a.useContext)(M),{generate:u}=Object(a.useContext)(Na.Context),{zoomInfo:d,onBrush:m}=gi(),[p,j]=Object(a.useState)({}),{node:b}=Object(o.useParams)(),{services:x}=Object(l.useKibana)(),h=r.cluster_uuid,f=r.ccs,[O,v]=Object(a.useState)({}),E=Object(g.find)(e,{cluster_uuid:h});Object(a.useEffect)((()=>{var e;E&&u(E.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==p||null===(e=p.nodeSummary)||void 0===e?void 0:e.name})}),[E,u,null==p||null===(t=p.nodeSummary)||void 0===t?void 0:t.name]);const k=c.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Advanced",values:{nodeName:null==p||null===(s=p.nodeSummary)||void 0===s?void 0:s.name}}),S=c.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.pageTitle",{defaultMessage:"Elasticsearch node: {nodeName}",values:{nodeName:null==p||null===(i=p.nodeSummary)||void 0===i?void 0:i.name}}),_=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=x.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${h}/elasticsearch/nodes/${b}`;if(null!==(t=x.http)&&void 0!==t&&t.fetch&&h){var i;const e=await(null===(i=x.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:f,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));j(e);const t=await Da({fetch:x.http.fetch,clusterUuid:h,alertTypeIds:[Oe.J,Oe.W,Oe.X,Oe.S,Oe.L,Oe.R],filters:[{nodeUuid:b}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});v(t)}}),[f,h,null===(n=x.data)||void 0===n?void 0:n.query.timefilter.timefilter,x.http,b]);return Object(y.jsx)(sn,{title:k,pageTitle:S,getPageData:_,id:b,pageType:"nodes"},Object(y.jsx)(gn,{nodeSummary:p.nodeSummary,alerts:O,metrics:p.metrics,onBrush:m,zoomInfo:d}))};function pn(e){return Math.floor(e/1e3)+"s"}s(98);const jn=e=>{const[t,s]=Object(a.useState)({});return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.heading",defaultMessage:"CCR"}))),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiPageContentBody,null,(()=>{const{data:i,alerts:n}=e,r=i;let o={initialPageSize:5,pageSizeOptions:[5,10,20]};return r.length<=o.initialPageSize&&(o=!1),Object(y.jsx)(u.EuiInMemoryTable,{className:"monitoringElasticsearchCcrListingTable",columns:[{field:"index",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.indexColumnTitle",{defaultMessage:"Index"}),sortable:!0,render:(i,{shards:n})=>{const r=!!t[i];return Object(y.jsx)(u.EuiLink,{onClick:()=>((i,n)=>{const r={...t};if(r[i])delete r[i];else{let t={initialPageSize:5,pageSizeOptions:[5,10,20]};n.length<=t.initialPageSize&&(t=!1),r[i]=Object(y.jsx)(u.EuiInMemoryTable,{items:n,columns:[{field:"shardId",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.shardColumnTitle",{defaultMessage:"Shard"}),render:e=>Object(y.jsx)(u.EuiLink,{href:se(`#/elasticsearch/ccr/${i}/shard/${e}`)},e)},{render:()=>null},{field:"alerts",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(t,s)=>Object(y.jsx)(Ue,{showBadge:!0,alerts:e.alerts,stateFilter:e=>e.meta.shardId===s.shardId})},{field:"syncLagOps",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"}),render:(e,t)=>Object(y.jsx)("span",null,e,"  ",Object(y.jsx)(u.EuiIconTip,{size:"m",type:"iInCircle",content:Object(y.jsx)(a.Fragment,null,Object(y.jsx)("span",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.leaderLagTooltip",defaultMessage:"Leader lag: {syncLagOpsLeader}",values:{syncLagOpsLeader:t.syncLagOpsLeader}})),Object(y.jsx)("br",null),Object(y.jsx)("span",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.followerLagTooltip",defaultMessage:"Follower lag: {syncLagOpsFollower}",values:{syncLagOpsFollower:t.syncLagOpsFollower}}))),position:"right"}))},{field:"syncLagTime",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(y.jsx)("span",null,pn(e))},{field:"opsSynced",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(y.jsx)(u.EuiTextColor,{color:"danger"},e)}],executeQueryOptions:{defaultFields:["shardId"]},sorting:!0,pagination:t})}s(r)})(i,n)},i," ",r?Object(y.jsx)(u.EuiIcon,{type:"arrowUp"}):Object(y.jsx)(u.EuiIcon,{type:"arrowDown"}))}},{field:"follows",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.followsColumnTitle",{defaultMessage:"Follows"})},{field:"alerts",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(e,t)=>Object(y.jsx)(Ue,{showBadge:!0,alerts:n,stateFilter:e=>e.meta.followerIndex===t.index})},{field:"syncLagOps",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"})},{field:"syncLagTime",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(y.jsx)("span",null,pn(e))},{field:"opsSynced",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(y.jsx)(u.EuiTextColor,{color:"danger"},e)}],items:r,pagination:o,executeQueryOptions:{defaultFields:["index","follows"]},sorting:{sort:{field:"index",direction:"asc"}},itemId:"id",itemIdToExpandedRowMap:t})})()))))},bn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{generate:i}=Object(a.useContext)(Na.Context),{services:n}=Object(l.useKibana)(),r=s.cluster_uuid,o=Object(g.find)(e,{cluster_uuid:r}),u=s.ccs,[d,m]=Object(a.useState)({}),[p,j]=Object(a.useState)({});Object(a.useEffect)((()=>{o&&i(o.cluster_name,{inElasticsearch:!0})}),[o,i]);const b=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.title",{defaultMessage:"Elasticsearch - Ccr"}),x=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.pageTitle",{defaultMessage:"Elasticsearch Ccr"}),h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/elasticsearch/ccr`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&r){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(e);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.H],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});j(t)}}),[u,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(y.jsx)(ui,{title:b,pageTitle:x,getPageData:h,"data-test-subj":"elasticsearchCcrPage",cluster:o},Object(y.jsx)(La,{productName:Oe.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},e,Object(y.jsx)(jn,{data:d.data,alerts:p}),t)}))};function xn({stat:e,formattedLeader:t,oldestStat:s,alerts:a={}}){const i=e.follower_index||Object(g.get)(e,"follower.index"),n="number"==typeof e.shard_id?e.shard_id:Object(g.get)(e,"follower.shard.number"),r=e.operations_written||Object(g.get)(e,"follower.operations_written"),o=e.failed_read_requests||Object(g.get)(e,"requests.failed.read.count"),l=s.operations_written||Object(g.get)(s,"follower.operations_written"),u=s.failed_read_requests||Object(g.get)(s,"requests.failed.read.count"),d=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.alerts",{defaultMessage:"Alerts"}),value:Object(y.jsx)(Ue,{alerts:a,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.followerIndexLabel",{defaultMessage:"Follower Index"}),value:i,"data-test-subj":"followerIndex"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.shardIdLabel",{defaultMessage:"Shard Id"}),value:n,"data-test-subj":"shardId"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.leaderIndexLabel",{defaultMessage:"Leader Index"}),value:t,"data-test-subj":"leaderIndex"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.opsSyncedLabel",{defaultMessage:"Ops Synced"}),value:Ze(r-l,"int_commas"),"data-test-subj":"operationsReceived"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.failedFetchesLabel",{defaultMessage:"Failed Fetches"}),value:Ze(o-u,"int_commas"),"data-test-subj":"failedFetches"}];return Object(y.jsx)(He,{metrics:d,"data-test-subj":"ccrDetailStatus"})}function hn(e){var t;const{services:s}=Object(l.useKibana)(),i=null===(t=s.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),{metrics:n,stat:r,timestamp:o,oldestStat:d,formattedLeader:g,alerts:m}=e;return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(xn,{stat:r,formattedLeader:g,oldestStat:d,alerts:m})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:m}),Object(y.jsx)(u.EuiSpacer,{size:"m"}),r.read_exceptions&&r.read_exceptions.length>0?Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(u.EuiTitle,{size:"s",color:"danger"},Object(y.jsx)("h3",null,Object(y.jsx)(u.EuiTextColor,{color:"danger"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.errorsTableTitle",defaultMessage:"Errors"})))),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiBasicTable,{items:r.read_exceptions,columns:[{name:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.typeColumnTitle",{defaultMessage:"Type"}),field:"exception.type"},{name:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.reasonColumnTitle",{defaultMessage:"Reason"}),field:"exception.reason",width:"75%"}]})),Object(y.jsx)(u.EuiHorizontalRule,null)):null,Object(y.jsx)(u.EuiFlexGroup,{wrap:!0},(()=>{const e=[n.ccr_sync_lag_ops,n.ccr_sync_lag_time].map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Rt,{series:e})))));return Object(y.jsx)(a.Fragment,null,e)})()),Object(y.jsx)(u.EuiHorizontalRule,null),Object(y.jsx)(u.EuiAccordion,{id:"ccrLatestStat",buttonContent:Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h2",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.latestStateAdvancedButtonLabel",defaultMessage:"Advanced"}))),paddingSize:"l"},Object(y.jsx)(a.Fragment,null,Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,Ie(o,i))),Object(y.jsx)(u.EuiHorizontalRule,null),Object(y.jsx)(u.EuiCodeBlock,{language:"json"},JSON.stringify(r,null,2))))))}const fn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{services:i}=Object(l.useKibana)(),[n,r]=Object(a.useState)({}),{index:u,shardId:d}=Object(o.useParams)(),{generate:m}=Object(a.useContext)(Na.Context),p=s.cluster_uuid,j=Object(g.find)(e,{cluster_uuid:p});Object(a.useEffect)((()=>{j&&m(j.cluster_name,{inElasticsearch:!0,name:"ccr",instance:`Index: ${u} Shard: ${d}`})}),[j,m,u,d]);const b=s.ccs,[x,h]=Object(a.useState)({}),f=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.title",{defaultMessage:"Elasticsearch - Ccr - Shard"}),O=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.pageTitle",{defaultMessage:"Elasticsearch Ccr Shard - Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(g.get)(n,"stat.follower.index",Object(g.get)(n,"stat.follower_index")),shardId:Object(g.get)(n,"stat.follower.shard.number",Object(g.get)(n,"stat.shard_id"))}}),v=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.instanceTitle",{defaultMessage:"Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(g.get)(n,"stat.follower_index"),shardId:Object(g.get)(n,"stat.shard_id")}}),E=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${p}/elasticsearch/ccr/${u}/shard/${d}`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&p){var n;const e=await(null===(n=i.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:b,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));r(e);const t=await Da({fetch:i.http.fetch,alertTypeIds:[Oe.H],clusterUuid:p,filters:[{shardId:d}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[b,p,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,u,d]);return Object(y.jsx)(As,{title:f,pageTitle:O,getPageData:E,"data-test-subj":"elasticsearchCcrShardPage"},Object(y.jsx)(La,{productName:Oe.r,instance:v,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},e,Object(y.jsx)(hn,me()({},n,{alerts:x})),t)}))},On=e=>Object(y.jsx)(As,me()({},e,{product:"enterprise_search"}));function vn({stats:e}){const t=[{label:c.i18n.translate("xpack.monitoring.entSearch.overview.instances",{defaultMessage:"Instances"}),value:Ze(e.totalInstances,"int_commas"),"data-test-subj":"totalInstances"},{label:c.i18n.translate("xpack.monitoring.entSearch.overview.appSearchEngines",{defaultMessage:"App Search Engines"}),value:Ze(e.appSearchEngines,"int_commas"),"data-test-subj":"appSearchEngines"},{label:c.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchOrgSources",{defaultMessage:"Org Content Sources"}),value:Ze(e.workplaceSearchOrgSources,"int_commas"),"data-test-subj":"workplaceSearchOrgSources"},{label:c.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchPrivateSources",{defaultMessage:"Private Content Sources"}),value:Ze(e.workplaceSearchPrivateSources,"int_commas"),"data-test-subj":"workplaceSearchPrivateSources"}];return Object(y.jsx)(He,{metrics:t,"data-test-subj":"entSearchSummaryStatus"})}const En=({metrics:e,stats:t,...s})=>{const a=[e.enterprise_search_heap,e.enterprise_search_jvm_finalizer_queue,e.enterprise_search_gc_time,e.enterprise_search_gc_rate,e.enterprise_search_threads,e.enterprise_search_threads_rate],i=[e.enterprise_search_http_traffic,e.enterprise_search_http_responses,e.enterprise_search_http_connections_current,e.enterprise_search_http_connections_rate],n=[e.app_search_total_engines,e.crawler_workers],r=[e.workplace_search_total_sources];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.heading",defaultMessage:"Enterprise Search Overview"}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(vn,{stats:t})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.networkingSummary",defaultMessage:"Network Traffic Summary"}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null)))))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.lowLevelSummary",defaultMessage:"Low Level Resource Usage Summary"}))),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null)))))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.appSearchSummary",defaultMessage:"App Search Summary"}))),Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},n.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null)))))),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.workplaceSearchSummary",defaultMessage:"Workplace Search Summary"}))),Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null))))))))},yn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{zoomInfo:i,onBrush:n}=gi(),{services:r}=Object(l.useKibana)(),o=s.cluster_uuid,u=s.ccs,{generate:d}=Object(a.useContext)(Na.Context),m=Object(g.find)(e,{cluster_uuid:o}),[p,j]=Object(a.useState)(null),b=c.i18n.translate("xpack.monitoring.entSearch.overview.routeTitle",{defaultMessage:"Enterprise Search - Overview"}),x=c.i18n.translate("xpack.monitoring.entSearch.overview.pageTitle",{defaultMessage:"Enterprise Search Overview"});Object(a.useEffect)((()=>{m&&d(m.cluster_name,{inEnterpriseSearch:!0})}),[m,d]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/enterprise_search`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(i)}),[u,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(y.jsx)(On,{title:b,pageTitle:x,getPageData:h,"data-test-subj":"entSearchOverviewPage"},Object(y.jsx)("div",{"data-test-subj":"entSearchOverviewPage"},p&&Object(y.jsx)(En,me()({},p,{onBrush:n,zoomInfo:i}))))};function Mn({stats:e,alerts:t}){const{node_count:s,avg_memory_used:a,avg_memory:i,events_in_total:n,events_out_total:r}=e,o=[{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:s,"data-test-subj":"node_count"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Ze(a,"byte")+" / "+Ze(i,"byte"),"data-test-subj":"memory_used"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Ze(n,"0.[0]a"),"data-test-subj":"events_in_total"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Ze(r,"0.[0]a"),"data-test-subj":"events_out_total"}];return Object(y.jsx)(He,{metrics:o,alerts:t,"data-test-subj":"logstashClusterStatus"})}class overview_overview_Overview extends a.PureComponent{render(){const{stats:e,metrics:t,...s}=this.props,a=[t.logstash_cluster_events_input_rate,t.logstash_cluster_events_output_rate,t.logstash_cluster_events_latency];return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.overview.heading",defaultMessage:"Logstash Overview"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Mn,{stats:e})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e},s)),Object(y.jsx)(u.EuiSpacer,null))))))))}}const kn=({cluster:e,instance:t,pipelineId:s,pipelineVersions:a,tabsDisabled:i,...n})=>{const r=[];if(!i)if(t||s){if(t){var o,l,u;r.push({id:"overview",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/logstash/node/${null===(o=t.nodeSummary)||void 0===o?void 0:o.uuid}`}),r.push({id:"pipeline",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:`/logstash/node/${null===(l=t.nodeSummary)||void 0===l?void 0:l.uuid}/pipelines`,testSubj:"logstashNodeDetailPipelinesLink"}),r.push({id:"advanced",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.advancedLinkText",{defaultMessage:"Advanced"}),route:`/logstash/node/${null===(u=t.nodeSummary)||void 0===u?void 0:u.uuid}/advanced`,testSubj:"logstashNodeDetailAdvancedLink"})}}else r.push({id:"overview",label:c.i18n.translate("xpack.monitoring.logstashNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/logstash"}),r.push({id:"nodes",label:c.i18n.translate("xpack.monitoring.logstashNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/logstash/nodes"}),r.push({id:"pipelines",label:c.i18n.translate("xpack.monitoring.logstashNavigation.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:"/logstash/pipelines"});return a&&a.length,Object(y.jsx)(As,me()({},n,{tabs:r,product:"logstash"}))},Sn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{zoomInfo:i,onBrush:n}=gi(),{services:r}=Object(l.useKibana)(),o=s.cluster_uuid,u=s.ccs,d=Object(g.find)(e,{cluster_uuid:o}),{generate:m}=Object(a.useContext)(Na.Context),[p,j]=Object(a.useState)(null),b=c.i18n.translate("xpack.monitoring.logstash.overview.title",{defaultMessage:"Logstash"}),x=c.i18n.translate("xpack.monitoring.logstash.overview.pageTitle",{defaultMessage:"Logstash overview"}),h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/logstash`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(i)}),[u,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(a.useEffect)((()=>{d&&m(d.cluster_name,{inLogstash:!0})}),[d,p,m]),Object(y.jsx)(kn,{title:b,pageTitle:x,getPageData:h,cluster:d},Object(y.jsx)("div",{"data-test-subj":"logstashOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,logs:a}=e||{};return Object(y.jsx)(overview_overview_Overview,{stats:t,metrics:s,logs:a,onBrush:n,zoomInfo:i})})(p)))};class listing_listing_Listing extends a.PureComponent{getColumns(){const e=this.props.setupMode,t=this.props.alerts;return[{name:c.i18n.translate("xpack.monitoring.logstash.nodes.nameTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(t,s)=>{let a=null;if(U(I.d.MetricbeatMigration)){const t=Object(g.get)(e,"data.byUuid",{}),i=Object(g.get)(s,"logstash.uuid"),n=t[i]||{},r={uuid:i,name:s.name};a=Object(y.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(y.jsx)(ls,{setupMode:e,status:n,instance:r,productName:Oe.F}))}return Object(y.jsx)("div",null,Object(y.jsx)("div",{"data-test-subj":"name"},Object(y.jsx)(u.EuiLink,{href:se(`#/logstash/node/${s.logstash.uuid}`),"data-test-subj":`nodeLink-${s.logstash.uuid}`},t)),Object(y.jsx)("div",{"data-test-subj":"httpAddress"},s.logstash.http_address),a)}},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(y.jsx)(Ue,{showBadge:!0,alerts:t})},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.cpuUsageTitle",{defaultMessage:"CPU Usage"}),field:"cpu_usage",sortable:!0,render:e=>Object(y.jsx)("span",{"data-test-subj":"cpuUsage"},Qe(e,100))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.loadAverageTitle",{defaultMessage:"Load Average"}),field:"load_average",sortable:!0,render:e=>Object(y.jsx)("span",{"data-test-subj":"loadAverage"},Xe(e,"0.00"))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.jvmHeapUsedTitle",{defaultMessage:"{javaVirtualMachine} Heap Used",values:{javaVirtualMachine:"JVM"}}),field:"jvm_heap_used",sortable:!0,render:e=>Object(y.jsx)("span",{"data-test-subj":"jvmHeapUsed"},Qe(e,100))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.eventsIngestedTitle",{defaultMessage:"Events Ingested"}),field:"events_out",sortable:!0,render:e=>Object(y.jsx)("span",{"data-test-subj":"eventsOut"},Xe(e,"0.[0]a"))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.configReloadsTitle",{defaultMessage:"Config Reloads"}),sortable:!0,render:e=>Object(y.jsx)("div",null,Object(y.jsx)("div",{"data-test-subj":"configReloadsSuccess"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsSuccessCountLabel",defaultMessage:"{reloadsSuccesses} successes",values:{reloadsSuccesses:e.reloads.successes}})),Object(y.jsx)("div",{"data-test-subj":"configReloadsFailure"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsFailuresCountLabel",defaultMessage:"{reloadsFailures} failures",values:{reloadsFailures:e.reloads.failures}})))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.versionTitle",{defaultMessage:"Version"}),field:"version",sortable:!0,render:e=>Object(y.jsx)("span",{"data-test-subj":"version"},Xe(e))}]}render(){const{stats:e,alerts:t,sorting:s,pagination:a,onTableChange:i,data:n,setupMode:r}=this.props,o=this.getColumns(),l=n.map((e=>({...e,name:Object(g.get)(e,"logstash.name","N/A"),cpu_usage:Object(g.get)(e,"process.cpu.percent","N/A"),load_average:Object(g.get)(e,"os.cpu.load_average.1m","N/A"),jvm_heap_used:Object(g.get)(e,"jvm.mem.heap_used_percent","N/A"),events_out:Object(g.get)(e,"events.out","N/A"),version:Object(g.get)(e,"logstash.version","N/A")})));let d=null;return U(I.d.MetricbeatMigration)&&(d=Object(y.jsx)(us,{setupModeData:r.data,useNodeIdentifier:!0,productName:Oe.F})),Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.instances.heading",defaultMessage:"Logstash instances"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(Mn,{stats:e,alerts:t})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),d,Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(dt,{className:"logstashNodesTable",rows:l,setupMode:r,productName:Oe.F,columns:o,sorting:{...s,sort:{...s.sort,field:"name"}},pagination:a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.logstash.filterNodesPlaceholder",{defaultMessage:"Filter Nodes…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))))}}const _n=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{services:i}=Object(l.useKibana)(),n=s.cluster_uuid,r=s.ccs,{generate:o}=Object(a.useContext)(Na.Context),u=Object(g.find)(e,{cluster_uuid:n}),[d,m]=Object(a.useState)({}),[p,j]=Object(a.useState)({}),{getPaginationTableProps:b}=Qa("logstash.nodes"),x=c.i18n.translate("xpack.monitoring.logstash.nodes.routeTitle",{defaultMessage:"Logstash - Nodes"}),h=c.i18n.translate("xpack.monitoring.logstash.nodes.pageTitle",{defaultMessage:"Logstash nodes"}),f=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${n}/logstash/nodes`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&n){var o;const e=await(null===(o=i.http)||void 0===o?void 0:o.fetch(a,{method:"POST",body:JSON.stringify({ccs:r,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(e);const t=await Da({fetch:i.http.fetch,alertTypeIds:[Oe.Q],clusterUuid:n,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});j(t)}}),[r,n,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(a.useEffect)((()=>{u&&o(u.cluster_name,{inLogstash:!0})}),[u,o]),Object(y.jsx)(kn,{title:x,pageTitle:h,getPageData:f,cluster:u},Object(y.jsx)("div",{"data-test-subj":"logstashNodesPage"},Object(y.jsx)(La,{productName:Oe.F,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(listing_listing_Listing,me()({stats:d.clusterStatus,metrics:d.metrics,data:d.nodes,setupMode:e,alerts:p},b())),s)})))};var Tn=s(103),wn=s.n(Tn);function Cn(e){return wn()(e)>=Oe.E.MAJOR_VER_REQD_FOR_PIPELINES}const In={grid:{show:!1,margin:4,hoverable:!0},colors:["#3b73ac"],series:{shadowSize:0,lines:{lineWidth:2},highlightColor:"#3b73ac",points:{radius:2}}};function Ln(e=[]){const t=[];return t.push(e),t.push({data:[Object(g.last)(e)],points:{show:!0,radius:2,fill:1,fillColor:!1}}),t}class sparkline_flot_chart_SparklineFlotChart{constructor(e,t,s,a,i){f()(this,"render",(()=>{this.flotChart=wt.a.plot(this.containerElem,this.data,this.options)})),f()(this,"setupBrushHandling",(e=>{this.options.selection={mode:"x",color:"#9c9c9c"},wt()(this.containerElem).off("plotselected"),wt()(this.containerElem).on("plotselected",((t,s)=>{e(s),this.flotChart.clearSelection()}))})),f()(this,"setupHoverHandling",(e=>{const t=wt()(this.containerElem),s=Object(g.debounce)(((s,a,i)=>{if(null===i)return e();e({xValue:i.datapoint[0],yValue:i.datapoint[1],xPosition:i.pageX-window.pageXOffset,yPosition:i.pageY-window.pageYOffset,plotTop:t.offset().top,plotLeft:t.offset().left,plotHeight:t.height(),plotWidth:t.width()})}),Oe.p,{leading:!0});t.off("plothover"),t.on("plothover",s)})),this.containerElem=e,this.data=Ln(t),this.options={...In,...i},Object(g.isFunction)(s)&&this.setupBrushHandling(s),Object(g.isFunction)(a)&&this.setupHoverHandling(a),this.render(),window.addEventListener("resize",this.render)}update(e){this.flotChart.setData(Ln(e)),this.flotChart.setupGrid(),this.flotChart.draw()}shutdown(){this.flotChart.shutdown();const e=wt()(this.containerElem);e.off("plotselected"),e.off("plothover"),window.removeEventListener("resize",this.render)}}s(109);class sparkline_Sparkline extends i.a.Component{constructor(e){super(e),this.makeSparklineFlotChart=this.makeSparklineFlotChart.bind(this),this.onHover=this.onHover.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.handleSparklineRef=this.handleSparklineRef.bind(this),this.state={tooltip:void 0}}UNSAFE_componentWillReceiveProps({series:e,options:t}){Object(g.isEqual)(t,this.props.options)||(this.sparklineFlotChart.shutdown(),this.makeSparklineFlotChart(t)),Object(g.isEqual)(e,this.props.series)||this.sparklineFlotChart.update(e)}makeSparklineFlotChart(e){this.sparklineFlotChart=new sparkline_flot_chart_SparklineFlotChart(this.chartElem,this.props.series,this.props.onBrush,this.onHover,e)}onHover(e){this.setState({tooltip:e})}renderTooltip(){if(!1===this.props.tooltip.enabled)return;if(!this.state.tooltip)return;const e={tooltipContainer:{top:this.state.tooltip.yPosition-28},tooltip:{height:56,width:220},leftCaret:{width:6},rightCaret:{width:6}},t=this.state.tooltip.plotLeft+this.state.tooltip.plotWidth/2;return this.state.tooltip.xPosition>t?(e.rightCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition-226-10):(e.leftCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition+10),Object(y.jsx)("div",{className:"monSparklineTooltip__container",style:e.tooltipContainer},Object(y.jsx)("i",{className:"fa fa-caret-left monSparklineTooltip__caret",style:e.leftCaret}),Object(y.jsx)("div",{className:"monSparklineTooltip",style:e.tooltip},Object(y.jsx)("div",{className:"monSparklineTooltip__yValue"},this.props.tooltip.yValueFormatter(this.state.tooltip.yValue)),Object(y.jsx)("div",{className:"monSparklineTooltip__xValue"},this.props.tooltip.xValueFormatter(this.state.tooltip.xValue))),Object(y.jsx)("i",{className:"fa fa-caret-right monSparklineTooltip__caret",style:e.rightCaret}))}handleSparklineRef(e){this.chartElem=e,this.chartElem?this.makeSparklineFlotChart(this.props.options):this.sparklineFlotChart&&this.sparklineFlotChart.shutdown()}render(){return Object(y.jsx)("div",null,Object(y.jsx)("div",{className:"monSparkline",ref:this.handleSparklineRef}),this.renderTooltip())}}class pipeline_listing_PipelineListing extends a.Component{tooltipXValueFormatter(e,t){return fe()(e).format(t)}tooltipYValueFormatter(e,t,s){return Ze(e,t,s)}getColumns(){const{onBrush:e,dateFormat:t}=this.props;return[{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.idTitle",{defaultMessage:"ID"}),field:"id",sortable:!0,render:e=>Object(y.jsx)(u.EuiLink,{"data-test-subj":"id",href:se(`#/logstash/pipelines/${e}`)},e)},{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.eventsEmittedRateTitle",{defaultMessage:"Events Emitted Rate"}),field:"latestThroughput",sortable:!0,render:(s,a)=>{const i=a.metrics.throughput;return Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(g.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(y.jsx)(u.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"eventsEmittedRate"},Ze(s,"0.[0]a",i.metric.units)))}},{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.numberOfNodesTitle",{defaultMessage:"Number of Nodes"}),field:"latestNodesCount",sortable:!0,render:(s,a)=>{const i=a.metrics.nodesCount;return Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(g.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(y.jsx)(u.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"nodeCount"},Ze(s,"0a")))}}]}renderStats(){if(this.props.statusComponent){const e=this.props.statusComponent;return Object(y.jsx)(e,{stats:this.props.stats})}return Object(y.jsx)(Mn,{stats:this.props.stats})}render(){const{data:e,sorting:t,pagination:s,onTableChange:a,upgradeMessage:i,className:n,...r}=this.props,o=t||{field:"id",direction:"asc"};"name"===o.field&&(o.field="id");const l=this.getColumns();return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipline_listing.heading",defaultMessage:"Logstash pipelines"}))),Object(y.jsx)(u.EuiPanel,null,this.renderStats()),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(gt,me()({className:n||"logstashNodesTable",rows:e,columns:l,sorting:o,message:i,pagination:s,search:{box:{placeholder:c.i18n.translate("xpack.monitoring.logstash.filterPipelinesPlaceholder",{defaultMessage:"Filter Pipelines…"})}},onTableChange:a},r)))))}}const Fn=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{onBrush:i}=gi(),{services:n}=Object(l.useKibana)(),r=Object(l.useUiSetting)("dateFormat"),o=s.cluster_uuid,u=s.ccs,d=Object(g.find)(e,{cluster_uuid:o}),[m,p]=Object(a.useState)(null),{getPaginationTableProps:j,getPaginationRouteOptions:b,updateTotalItemCount:x}=Qa("logstash.pipelines"),h=c.i18n.translate("xpack.monitoring.logstash.pipelines.routeTitle",{defaultMessage:"Logstash Pipelines"}),f=c.i18n.translate("xpack.monitoring.logstash.pipelines.pageTitle",{defaultMessage:"Logstash pipelines"}),{generate:O}=Object(a.useContext)(Na.Context),v=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/logstash/pipelines`,i=await(null===(t=n.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...b()})}));p(i),x(i.totalPipelineCount)}),[u,o,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,b,x]);return Object(a.useEffect)((()=>{d&&O(d.cluster_name,{inLogstash:!0})}),[d,m,O]),Object(y.jsx)(kn,{title:h,pageTitle:f,getPageData:v,cluster:d},Object(y.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},(e=>{if(null===e)return null;const{clusterStatus:t,pipelines:s}=e||{},a=e?(n=t.versions,!Array.isArray(n)||0===n.length||n.some(Cn)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."):null;var n;return Object(y.jsx)(pipeline_listing_PipelineListing,me()({className:"monitoringLogstashPipelinesTable",onBrush:e=>i({xaxis:e}),stats:t,data:s},j(),{upgradeMessage:a,dateFormat:r}))})(m)))};function Pn(e,t=0,s=null){const a=[];return e.forEach((e=>{a.push(...e.toList(t,s))})),a}class list_List{constructor(e,t,s,a){this.inputs=e,this.filters=t,this.outputs=s,this.queue=a}static fromPipeline(e){const{inputStatements:t,filterStatements:s,outputStatements:a,queue:i}=e;return new list_List(Pn(t),Pn(s),Pn(a),i)}}function Nn({vertex:e,onHide:t,timeseriesTooltipXValueFormatter:s}){return Object(y.jsx)(u.EuiFlyout,{size:"s",onClose:t},Object(y.jsx)(u.EuiFlyoutHeader,null,Object(y.jsx)(u.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},function(e){return Object(y.jsx)(u.EuiIcon,{type:e.iconType,className:"lspvDetailDrawerIcon"})}(e)),Object(y.jsx)(u.EuiFlexItem,null,Object(y.jsx)(u.EuiTitle,null,Object(y.jsx)("h2",null,function(e){switch(e.typeString){case"plugin":return`${e.title} ${e.pluginType}`;case"if":case"queue":return e.title}}(e)))))),Object(y.jsx)(u.EuiFlyoutBody,null,Object(y.jsx)(u.EuiText,null,function(e){switch(e.typeString){case"plugin":return function(e){return e.hasExplicitId?Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.vertexIdDescription",defaultMessage:"This {vertexType}'s ID is {vertexId}.",values:{vertexType:e.typeString,vertexId:Object(y.jsx)(u.EuiBadge,null,e.id)}})):Object(y.jsx)("div",null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.specifyVertexIdDescription",defaultMessage:"This {vertexType} does not have an ID explicitly specified. Specifying an ID allows you to track differences across pipeline changes. You can explicitly specify an ID for this plugin like so:",values:{vertexType:e.typeString}})),Object(y.jsx)(u.EuiCodeBlock,null,e.name," ",'{\n  id => "mySpecialId"\n}'),Object(y.jsx)(u.EuiSpacer,null))}(e);case"if":return function(e){const t=`if (${e.subtitle}) {\n  ...\n}`;return Object(y.jsx)("div",null,Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.conditionalStatementDescription",defaultMessage:"This is a conditional statement in your pipeline."})),Object(y.jsx)(u.EuiCodeBlock,null,t),Object(y.jsx)(u.EuiSpacer,null))}(e);case"queue":return Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.structureDescription",defaultMessage:"This is an internal structure used by Logstash to buffer events between inputs and the rest of the pipeline."}))}}(e),function(e,t){switch(e.typeString){case"plugin":return function(e,t){const s=e=>Ze(e,"0.[00]a","ms/e"),a=Array.isArray(e.stats.millis_per_event.data)&&e.stats.millis_per_event.data.length>0?Object(g.last)(e.stats.millis_per_event.data)[1]:null,i="input"===e.pluginType?null:Object(y.jsx)(u.EuiTableRow,{key:"events_latency"},Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsLatencyLabel",defaultMessage:"Events Latency"})),Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(y.jsx)(sparkline_Sparkline,{series:e.stats.millis_per_event.data,options:{xaxis:e.stats.millis_per_event.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:s}}))),Object(y.jsx)(u.EuiTableRowCell,null,s(a))),n=e=>Ze(e,"0.[0]a","e/s"),r=Object(y.jsx)(u.EuiTableRow,{key:"events_out_rate"},Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedRateLabel",defaultMessage:"Events Emitted Rate"})),Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(y.jsx)(sparkline_Sparkline,{series:e.eventsPerSecond.data,options:{xaxis:e.eventsPerSecond.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:n}}))),Object(y.jsx)(u.EuiTableRowCell,null,n(e.latestEventsPerSecond))),o=e=>Ze(e,"0a","events"),l=Array.isArray(e.stats.events_in.data)&&e.stats.events_in.data.length>0?Object(g.last)(e.stats.events_in.data)[1]:null,c="input"===e.pluginType?null:Object(y.jsx)(u.EuiTableRow,{key:"events_in"},Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(y.jsx)(sparkline_Sparkline,{series:e.stats.events_in.data,options:{xaxis:e.stats.events_in.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:o}}))),Object(y.jsx)(u.EuiTableRowCell,null,o(l))),d=o,m=Array.isArray(e.stats.events_out.data)&&e.stats.events_out.data.length>0?Object(g.last)(e.stats.events_out.data)[1]:null,p=Object(y.jsx)(u.EuiTableRow,{key:"events_out"},Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(y.jsx)(u.EuiTableRowCell,null,Object(y.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(y.jsx)(sparkline_Sparkline,{series:e.stats.events_out.data,options:{xaxis:e.stats.events_out.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:d}}))),Object(y.jsx)(u.EuiTableRowCell,null,d(m)));return Object(y.jsx)(u.EuiTable,null,Object(y.jsx)(u.EuiTableBody,null,i,r,c,p))}(e,t);case"if":return Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForIfDescription",defaultMessage:"There are currently no metrics to show for this if condition."}));case"queue":return Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForQueueDescription",defaultMessage:"There are currently no metrics to show for the queue."}))}}(e,s))))}function Dn({iconType:e,title:t}){return Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"baseline"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiIcon,{type:e})),Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiTitle,{size:"s"},Object(y.jsx)("h2",null,t))))}function Rn(){return Object(y.jsx)("div",null,Object(y.jsx)(Dn,{iconType:"logstashQueue",title:"Queue"}),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(u.EuiText,{className:"monPipelineViewer__queueMessage"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.queue.noMetricsDescription",defaultMessage:"Queue metrics not available"})))}s(114),s(119);class Statement{constructor(e){const{id:t,hasExplicitId:s,stats:a,meta:i}=e;this.id=t,this.hasExplicitId=s,this.stats=a,this.meta=i,this.vertex=e}}class Element{constructor(e,t,s,a){this.id=e,this.statement=t,this.depth=s,this.parentId=a}}class plugin_element_PluginElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}class plugin_statement_PluginStatement extends Statement{constructor(e){super(e);const{pluginType:t,name:s}=e;this.pluginType=t,this.name=s}toList(e,t){return[new plugin_element_PluginElement(this,e,t)]}static fromPipelineGraphVertex(e){return new plugin_statement_PluginStatement(e)}}function An(e){return e?"arrowRight":"arrowDown"}function zn(e){const{collapse:t,expand:s,id:a,isCollapsed:i}=e;return Object(y.jsx)(u.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center",className:"monPipelineViewer__collapsibleStatement"},Object(y.jsx)(u.EuiFlexItem,{key:a,grow:!1},Object(y.jsx)(u.EuiButtonIcon,{"aria-label":"collapse",color:"text",iconType:An(i),onClick:()=>{i?s(a):t(a)},size:"s"})),e.children)}s(124);class if_element_IfElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}var Bn=s(32),Vn=s.n(Bn);function Un({className:e,warning:t,value:s}){const a=Vn()("monPipelineViewer__metric",e);let i;return i=t?Object(y.jsx)(u.EuiBadge,{color:"warning",className:e},s):Object(y.jsx)(u.EuiText,{size:"s",color:"subdued",className:a},Object(y.jsx)("span",null,s)),Object(y.jsx)(u.EuiFlexItem,{className:"monPipelineViewer__metricFlexItem",grow:!1},i)}function $n({statement:{hasExplicitId:e,id:t,name:s,pluginType:a,vertex:i},onShowVertexDetails:n}){const r=function(e,t){return"input"===e?function({latestEventsPerSecond:e}){return[Object(y.jsx)(Un,{key:"eventsEmitted",className:"monPipelineViewer__metric--eventsEmitted",value:Ze(e,"0.[00]a","e/s emitted")})]}(t):function(e){const{latestMillisPerEvent:t,latestEventsPerSecond:s,percentOfTotalProcessorTime:a}=e;return[Object(y.jsx)(Un,{key:"cpuMetric",className:"monPipelineViewer__metric--cpuTime",warning:e.isTimeConsuming(),value:Ze(Math.round(a||0),"0","%",{prependSpace:!1})}),Object(y.jsx)(Un,{key:"eventMillis",className:"monPipelineViewer__metric--eventMillis",warning:e.isSlow(),value:Ze(t,"0.[00]a","ms/e")}),Object(y.jsx)(Un,{key:"eventsReceived",className:"monPipelineViewer__metric--events",value:Ze(s,"0.[00]a","e/s received")})]}(t)}(a,i),o=()=>{n(i)};return Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",className:"monPipelineViewer__pluginStatement",gutterSize:"none",justifyContent:"spaceBetween"},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiButtonEmpty,{"aria-label":s,className:"monPipelineViewer__plugin",color:"primary",flush:"left",iconType:"dot",onClick:o,size:"xs"},Object(y.jsx)("span",null,s))),e&&Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiBadge,{onClick:o,onClickAriaLabel:c.i18n.translate("xpack.monitoring.logstash.pipelineStatement.viewDetailsAriaLabel",{defaultMessage:"View details"})},t)))),r&&Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiFlexGroup,{gutterSize:"s"},r)))}function Gn(e,t){return Object(y.jsx)(u.EuiFlexItem,{grow:!1,key:"statementName"},Object(y.jsx)(u.EuiButtonEmpty,{"aria-label":e,color:"text",size:"xs",onClick:t,flush:"left"},Object(y.jsx)("span",{className:"monPipelineViewer__conditional"},e)))}function qn(e){const{depth:t}=e.element;return Object(y.jsx)("li",{className:"monPipelineViewer__listItem"},Object(y.jsx)("div",{className:"monPipelineViewer__spaceContainer"},function(e){const t=[];for(let s=0;s<e;s+=1)t.push(Object(y.jsx)("div",{key:`spacer_${s}`,className:"monPipelineViewer__spacer"}));return t}(t)),function({collapse:e,element:t,element:{id:s,statement:a,statement:{vertex:i}},expand:n,isCollapsed:r,onShowVertexDetails:o}){if(a instanceof plugin_statement_PluginStatement)return Object(y.jsx)($n,{statement:a,onShowVertexDetails:o});const l=function(e,t,s,a){const i=()=>{a(s)};return e?function({condition:e},t){return[Gn("if",t),Object(y.jsx)(u.EuiFlexItem,{key:"ifContent",grow:!1},Object(y.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"none",transparentBackground:!0},e))]}(t,i):Gn("else",i)}(t instanceof if_element_IfElement,a,i,o);return Object(y.jsx)(zn,{expand:n,collapse:e,isCollapsed:r,id:s},l)}(e))}s(129),s(134),s(139);class statement_list_StatementList extends i.a.PureComponent{constructor(e){super(e),f()(this,"expand",(e=>{const t=new Set(this.state.collapsedIds);t.delete(e),this.updateCollapsedElement(t)})),f()(this,"collapse",(e=>{const t=new Set(this.state.collapsedIds);t.add(e),this.updateCollapsedElement(t)})),f()(this,"updateCollapsedElement",(e=>{const{elements:t}=this.props,s=function(e,t){const s=new Set;return e.forEach((({id:e,parentId:a})=>{(t.has(a)||s.has(a))&&s.add(e)})),s}(t,e);this.setState({collapsedIds:e,collapsedChildIds:s})})),f()(this,"elementIsCollapsed",(e=>this.state.collapsedIds.has(e))),f()(this,"renderStatement",(e=>{const{id:t,parentId:s}=e,{onShowVertexDetails:a}=this.props;return this.state.collapsedIds.has(s)||this.state.collapsedChildIds.has(s)?null:Object(y.jsx)(qn,{key:t,element:e,collapse:this.collapse,expand:this.expand,isCollapsed:this.elementIsCollapsed(t),onShowVertexDetails:a})})),this.state={collapsedIds:new Set,collapsedChildIds:new Set}}render(){const{elements:e}=this.props;return Object(y.jsx)("ul",{className:"monPipelineViewer__list"},e.map(this.renderStatement))}}function Hn({iconType:e,headingText:t,elements:s,onShowVertexDetails:a}){return s.length?Object(y.jsx)("div",{"data-test-subj":`pipelineViewerSection_${t}`},Object(y.jsx)(Dn,{iconType:e,title:t}),Object(y.jsx)(u.EuiSpacer,{size:"s"}),Object(y.jsx)(statement_list_StatementList,{elements:s,onShowVertexDetails:a})):null}class pipeline_viewer_PipelineViewer extends i.a.Component{constructor(){super(),f()(this,"renderDetailDrawer",(()=>this.props.detailVertex?Object(y.jsx)(Nn,{vertex:this.props.detailVertex,onHide:()=>this.props.setDetailVertexId(void 0),timeseriesTooltipXValueFormatter:this.props.timeseriesTooltipXValueFormatter}):null)),this.state={detailDrawer:{vertex:null}}}render(){const{inputs:e,filters:t,outputs:s,queue:a}=this.props.pipeline;return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline_viewer.heading",defaultMessage:"Logstash pipelines"}))),Object(y.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"monPipelineViewer"},Object(y.jsx)(Hn,{iconType:"logstashInput",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.inputsTitle",{defaultMessage:"Inputs"}),elements:e,onShowVertexDetails:this.props.setDetailVertexId}),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(Rn,{queue:a}),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(Hn,{iconType:"logstashFilter",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.filtersTitle",{defaultMessage:"Filters"}),elements:t,onShowVertexDetails:this.props.setDetailVertexId}),Object(y.jsx)(u.EuiSpacer,null),Object(y.jsx)(Hn,{iconType:"logstashOutput",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.outputsTitle",{defaultMessage:"Outputs"}),elements:s,onShowVertexDetails:this.props.setDetailVertexId}),this.renderDetailDrawer())))}}function Wn(e,t){return e&&e.pipelineStage===t}class else_element_ElseElement extends Element{constructor(e,t,s){const{id:a}=e;super(`${a}_else`,e,t,s)}}function Kn(e,t,s,a){e.forEach((e=>{let i=e;for(;Wn(i,a)&&i!==s;)t.push(Yn(i,a)),i=i.next}))}function Jn(e,t,s,a){t.forEach((t=>{e.push(...t.toList(s,a))}))}class if_statement_IfStatement extends Statement{constructor(e,t,s){super(e);const{name:a}=e;this.condition=a,this.trueStatements=t,this.elseStatements=s}toList(e,t){const s=[],a=new if_element_IfElement(this,e,t);s.push(a);const i=e+1;if(Jn(s,this.trueStatements,i,a.id),this.elseStatements.length){const a=new else_element_ElseElement(this,e,t);s.push(a),Jn(s,this.elseStatements,i,a.id)}return s}static fromPipelineGraphVertex(e,t){const s=[],a=[],{trueOutgoingVertices:i,falseOutgoingVertices:n}=e,r=e.next;return Kn(i,s,r,t),Kn(n,a,r,t),new if_statement_IfStatement(e,s,a)}}class pipeline_queue_Queue extends Statement{static fromPipelineGraphVertex(e){return new pipeline_queue_Queue(e)}}function Yn(e,t){switch(e.typeString){case"plugin":return plugin_statement_PluginStatement.fromPipelineGraphVertex(e,t);case"if":return if_statement_IfStatement.fromPipelineGraphVertex(e,t);case"queue":return pipeline_queue_Queue.fromPipelineGraphVertex(e,t);default:throw new Error(`Unknown vertex class: ${e.typeString}`)}}class Vertex{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get name(){return this.json.config_name}get id(){return this.json.id}get subtitle(){return this.id}get incomingEdges(){return this.graph.edgesByTo[this.json.id]||[]}get incomingVertices(){return this.incomingEdges.map((e=>e.from))}get outgoingEdges(){return this.graph.edgesByFrom[this.json.id]||[]}get outgoingVertices(){return this.outgoingEdges.map((e=>e.to))}get meta(){return this.json.meta}get stats(){return this.json.stats||{}}descendants(){const e=[],t=[],s=[this],a={};for(;s.length>0;)s.pop().outgoingEdges.forEach((i=>{t.push(i);const n=i.to;!0!==a[n.id]&&(e.push(n),a[n.id]=!0,s.push(n))}));return{vertices:e,edges:t}}get hasExplicitId(){return Boolean(this.json.explicit_id)}}class queue_vertex_QueueVertex extends Vertex{get typeString(){return"queue"}get title(){return"queue"}get iconType(){return"logstashQueue"}get next(){return this.outgoingVertices}}class Pipeline{constructor(e,t,s,a){this.inputStatements=e,this.filterStatements=t,this.outputStatements=s,this.queue=a}static fromPipelineGraph(e){const t=function(e){return e.getVertices().filter((e=>"input"===e.pipelineStage)).map(Yn)}(e),s=function(e){const t=e.getVertices().filter((e=>"filter"===e.pipelineStage)),s=e.hasQueueVertex?t.find((e=>e.incomingVertices.every((e=>e instanceof queue_vertex_QueueVertex)))):t.find((e=>0===e.incomingVertices.length));if(!s)return[];const a=[];let i=s;for(;Wn(i,"filter");)a.push(Yn(i,"filter")),i=i.next;return a}(e),a=function(e){return e.getVertices().filter((e=>"output"===e.pipelineStage&&!e.incomingVertices.some((e=>"output"===e.pipelineStage)))).map((e=>Yn(e,"output")))}(e),i=function(e){return e.hasQueueVertex?Yn(e.queueVertex):null}(e);return new Pipeline(t,s,a,i)}}class plugin_vertex_PluginVertex extends Vertex{get typeString(){return"plugin"}get name(){return this.json.config_name}get title(){return this.name}get pluginType(){return this.json.plugin_type}get isInput(){return"input"===this.pluginType}get isFilter(){return"filter"===this.pluginType}get isOutput(){return"output"===this.pluginType}get isProcessor(){return this.isFilter||this.isOutput}get latestMillisPerEvent(){return Object(g.get)(this.stats,"millis_per_event")}get percentOfTotalProcessorTime(){return Object(g.get)(this.stats,"percent_of_total_processor_duration")}get eventsPerMillisecond(){return this.isInput?this.stats.events_out_per_millisecond:this.stats.events_in_per_millisecond}get eventsPerSecond(){if(!this.eventsPerMillisecond.hasOwnProperty("data"))return 1e3*this.eventsPerMillisecond;const e={...this.eventsPerMillisecond};return e.data=this.eventsPerMillisecond.data.map((([e,t])=>[e,1e3*t])),e}get latestEventsPerSecond(){if(!this.eventsPerSecond.hasOwnProperty("data"))return this.eventsPerSecond;const e=this.eventsPerSecond.data.length;return this.eventsPerSecond.data[e-1][1]}isTimeConsuming(){const e=1/this.graph.processorVertices.length*2;return this.percentOfTotalProcessorTime>e}isSlow(){const e=this.graph.processorVertices.length;if(0===e)return 0;const t=this.graph.processorVertices.reduce(((e,t)=>e+t.latestMillisPerEvent||0),0)/e,s=this.graph.processorVertices.reduce(((e,s)=>{const a=(s.latestMillisPerEvent||0)-t;return e+a*a}),0)/e,a=Math.sqrt(s);return(this.latestMillisPerEvent-t)/a>2}get iconType(){switch(this.pluginType){case"input":return"logstashInput";case"filter":return"logstashFilter";case"output":return"logstashOutput";default:throw new Error(`Unknown plugin type ${this.pluginType}! This shouldn't happen!`)}}get next(){return(this.outgoingEdges[0]||{}).to}}class if_vertex_IfVertex extends Vertex{get typeString(){return"if"}get name(){return this.json.condition}get iconType(){return"logstashIf"}get title(){return"if"}get subtitle(){return this.name}get trueEdge(){return this.outgoingEdges.find((e=>!0===e.when))}get trueEdges(){return this.outgoingEdges.filter((e=>!0===e.when))}get falseEdge(){return this.outgoingEdges.find((e=>!1===e.when))}get falseEdges(){return this.outgoingEdges.filter((e=>!1===e.when))}get trueOutgoingVertex(){return this.trueEdge?this.trueEdge.to:null}get trueOutgoingVertices(){return this.trueEdges.map((e=>e.to))}get falseOutgoingVertex(){return this.falseEdge?this.falseEdge.to:null}get falseOutgoingVertices(){return this.falseEdges.map((e=>e.to))}get next(){const e=this.trueOutgoingVertex?this.trueOutgoingVertex.descendants().vertices:[],t=this.falseOutgoingVertex?this.falseOutgoingVertex.descendants().vertices:[];return e.unshift(this.trueOutgoingVertex),t.unshift(this.falseOutgoingVertex),Object(g.intersection)(e,t)[0]}}function Qn(e,t){const s=t.type;switch(s){case"plugin":return new plugin_vertex_PluginVertex(e,t);case"if":return new if_vertex_IfVertex(e,t);case"queue":return new queue_vertex_QueueVertex(e,t);default:throw new Error(`Unknown vertex type ${s}! This shouldn't happen!`)}}class Edge{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get id(){return this.json.id}get from(){return this.graph.verticesById[this.fromId]}get fromId(){return this.json.from}get to(){return this.graph.verticesById[this.toId]}get toId(){return this.json.to}}class boolean_edge_BooleanEdge extends Edge{get when(){return this.json.when}get isTrue(){return!0===this.when}get isFalse(){return!1===this.when}}class graph_Graph{constructor(){this.json=null,this.verticesById={},this.edgesById={},this.edgesByFrom={},this.edgesByTo={}}getVertexById(e){return this.verticesById[e]}getVertices(){return void 0===this.vertexCache&&(this.vertexCache=Object.values(this.verticesById)),this.vertexCache}get queueVertex(){return this.getVertices().find((e=>e instanceof queue_vertex_QueueVertex))}get processorVertices(){return this.getVertices().filter((e=>e.isProcessor))}get edges(){return Object.values(this.edgesById)}update(e){this.json=e,e.vertices.forEach((e=>{const t=this.verticesById[e.id];if(void 0!==t)t.update(e);else{const t=Qn(this,e);this.verticesById[e.id]=t}})),e.edges.forEach((e=>{const t=this.edgesById[e.id];if(void 0!==t)t.update(e);else{const t=function(e,t){const s=t.type;switch(s){case"plain":return new Edge(e,t);case"boolean":return new boolean_edge_BooleanEdge(e,t);default:throw new Error(`Unknown edge type ${s}! This shouldn't happen!`)}}(this,e);this.edgesById[e.id]=t,void 0===this.edgesByFrom[t.from.json.id]&&(this.edgesByFrom[t.from.json.id]=[]),this.edgesByFrom[t.from.json.id].push(t),void 0===this.edgesByTo[t.to.json.id]&&(this.edgesByTo[t.to.json.id]=[]),this.edgesByTo[t.to.json.id].push(t)}})),this.annotateVerticesWithStages()}get startVertices(){return this.getVertices().filter((e=>0===e.incomingEdges.length))}get endVertices(){return this.getVertices().filter((e=>0===e.outgoingEdges.length))}get hasQueueVertex(){return!!this.queueVertex}annotateVerticesWithStages(){this.annotateInputStageVertices(),this.annotateOutputStageVertices(),this.annotateFilterStageVertices()}annotateInputStageVertices(){this.hasQueueVertex&&this.startVertices.forEach((e=>e.pipelineStage="input"))}annotateOutputStageVertices(){if(1===this.endVertices.length&&this.endVertices[0]instanceof queue_vertex_QueueVertex)return;if(this.endVertices.every((e=>"filter"===e.pluginType)))return;const e=[...this.endVertices];for(;e.length>0;){const t=e.shift(),s=t.incomingVertices,a=s.some((e=>e instanceof plugin_vertex_PluginVertex&&"filter"===e.pluginType)),i=s.some((e=>e instanceof queue_vertex_QueueVertex)),n=0===s.length;a||i||n?(t.pipelineStage="output",t.descendants().vertices.forEach((e=>e.pipelineStage="output"))):e.push(...s)}}annotateFilterStageVertices(){const e=[];for(this.hasQueueVertex?e.push(...this.queueVertex.outgoingVertices):e.push(...this.startVertices);e.length>0;){const t=e.shift();t.pipelineStage||(t.pipelineStage="filter",e.push(...t.outgoingVertices))}}}class config_Config{constructor(){this.graph=new graph_Graph}update(e){this.json=e,this.graph.update(e.graph)}}class pipeline_state_PipelineState{constructor(e){this.config=new config_Config,this.update(e)}update(e){this.config.update(e.representation)}}const Xn=e=>{const{pipelineHash:t,pipelineVersions:s,onChangePipelineHash:a}=e;return Object(y.jsx)(u.EuiFlexGroup,null,Object(y.jsx)(u.EuiFlexItem,{grow:!1},Object(y.jsx)(u.EuiSelect,{value:t,options:s.map((e=>({text:c.i18n.translate("xpack.monitoring.logstashNavigation.pipelineVersionDescription",{defaultMessage:"Version active {relativeLastSeen} and first seen {relativeFirstSeen}",values:{relativeLastSeen:e.relativeLastSeen,relativeFirstSeen:e.relativeFirstSeen}}),value:e.hash}))),onChange:({target:e})=>a(e.value)})))},Zn=({clusters:e})=>{const t=Object(o.useRouteMatch)(),{hash:s,id:i}=t.params,n=Object(a.useContext)(M),{services:r}=Object(l.useKibana)(),u=n.cluster_uuid,{minIntervalSeconds:d}=Object(a.useContext)(Oa),m=Object(l.useUiSetting)("dateFormat"),[p,j]=Object(a.useState)(null),b=n.ccs,x=Object(g.find)(e,{cluster_uuid:u}),[h,f]=Object(a.useState)({}),[O,v]=Object(a.useState)(void 0),{updateTotalItemCount:E}=Qa("logstash.pipelines"),k=c.i18n.translate("xpack.monitoring.logstash.pipeline.routeTitle",{defaultMessage:"Logstash - Pipeline"}),S=c.i18n.translate("xpack.monitoring.logstash.pipeline.pageTitle",{defaultMessage:"Logstash pipeline: {pipeline}",values:{pipeline:h.pipeline?h.pipeline.id:""}}),_=Object(a.useCallback)((async()=>{var e;const t=s?`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${i}/${s}`:`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${i}`,a=await(null===(e=r.http)||void 0===e?void 0:e.fetch(t,{method:"POST",body:JSON.stringify({ccs:b,detailVertexId:O||void 0})})),n=a;n.versions=n.versions.map((e=>{const t=ve(e.firstSeen,Oe.c),s=ve(e.lastSeen,Oe.c),a=2*d,i=Date.now()-e.lastSeen<=1e3*a;return{...e,relativeFirstSeen:c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeFirstSeenAgoLabel",{defaultMessage:"{relativeFirstSeen} ago",values:{relativeFirstSeen:t}}),relativeLastSeen:i?c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenNowLabel",{defaultMessage:"now"}):c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenAgoLabel",{defaultMessage:"until {relativeLastSeen} ago",values:{relativeLastSeen:s}})}})),f(n),E(a.totalNodeCount)}),[b,u,r.http,E,O,d,s,i]);Object(a.useEffect)((()=>{h.pipeline&&j(new pipeline_state_PipelineState(h.pipeline))}),[h]);const{generate:T}=Object(a.useContext)(Na.Context),w=Object(a.useCallback)((e=>{v(e?e.id:null)}),[]);Object(a.useEffect)((()=>{void 0!==O&&_()}),[O,_]);const C=Object(a.useCallback)((e=>{window.location.hash=se(`#/logstash/pipelines/${i}/${e}`)}),[i]);return Object(a.useEffect)((()=>{x&&T(x.cluster_name,{inLogstash:!0,page:"pipeline"})}),[x,h,T]),Object(y.jsx)(kn,{tabsDisabled:!0,title:k,pageTitle:S,getPageData:_,cluster:x},Object(y.jsx)("div",null,Object(y.jsx)(Xn,{pipelineVersions:h.versions,onChangePipelineHash:C,pipelineHash:s})),Object(y.jsx)("div",null,p&&Object(y.jsx)(pipeline_viewer_PipelineViewer,{pipeline:list_List.fromPipeline(Pipeline.fromPipelineGraph(p.config.graph)),timeseriesTooltipXValueFormatter:e=>fe()(e).format(m),setDetailVertexId:w,detailVertex:h.vertex?Qn(null,h.vertex):null})))};class beats_listing_listing_Listing extends a.PureComponent{getColumns(){const e=this.props.setupMode;return[{name:c.i18n.translate("xpack.monitoring.beats.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(U(I.d.MetricbeatMigration)){const t=Object(g.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(y.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(y.jsx)(ls,{setupMode:e,status:t,instance:i,productName:Oe.b}))}return Object(y.jsx)("div",null,Object(y.jsx)(u.EuiLink,{href:se(`#/beats/beat/${s.uuid}`),"data-test-subj":`beatLink-${t}`},t),a)}},{name:c.i18n.translate("xpack.monitoring.beats.instances.typeTitle",{defaultMessage:"Type"}),field:"type"},{name:c.i18n.translate("xpack.monitoring.beats.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:c.i18n.translate("xpack.monitoring.beats.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Ze(e,"","/s")},{name:c.i18n.translate("xpack.monitoring.beats.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Ze(e,"byte","/s")},{name:c.i18n.translate("xpack.monitoring.beats.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Ze(e,"0")},{name:c.i18n.translate("xpack.monitoring.beats.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Ze(e,"byte")},{name:c.i18n.translate("xpack.monitoring.beats.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}render(){const{stats:e,data:t,sorting:s,pagination:a,onTableChange:i,setupMode:n}=this.props;let r=null;U(I.d.MetricbeatMigration)&&(r=Object(y.jsx)(us,{setupModeData:n.data,useNodeIdentifier:!1,productName:Oe.b}));const o=Object(g.uniq)(t.map((e=>e.type))).map((e=>({value:e}))),l=Object(g.uniq)(t.map((e=>e.version))).map((e=>({value:e})));return Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiScreenReaderOnly,null,Object(y.jsx)("h1",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.beats.listing.heading",defaultMessage:"Beats listing"}))),Object(y.jsx)(u.EuiPanel,null,Object(y.jsx)(fi,{stats:e})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(u.EuiPageContent,null,r,Object(y.jsx)(dt,{className:"beatsTable",rows:t,setupMode:n,productName:Oe.b,columns:this.getColumns(),sorting:s,pagination:a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.beats.filterBeatsPlaceholder",{defaultMessage:"Filter Beats..."})},filters:[{type:"field_value_selection",field:"type",name:c.i18n.translate("xpack.monitoring.beats.instances.typeFilter",{defaultMessage:"Type"}),options:o,multiSelect:"or"},{type:"field_value_selection",field:"version",name:c.i18n.translate("xpack.monitoring.beats.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:i,executeQueryOptions:{defaultFields:["name","type"]}}))))}}const er=({clusters:e})=>{var t;const s=Object(a.useContext)(M),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Na.Context),{updateTotalItemCount:r,getPaginationTableProps:o}=Qa("beats.instances"),u=s.cluster_uuid,d=s.ccs,m=Object(g.find)(e,{cluster_uuid:u}),[p,j]=Object(a.useState)({}),b=c.i18n.translate("xpack.monitoring.beats.routeTitle",{defaultMessage:"Beats"}),x=c.i18n.translate("xpack.monitoring.beats.listing.pageTitle",{defaultMessage:"Beats listing"});Object(a.useEffect)((()=>{m&&n(m.cluster_name,{inBeats:!0})}),[m,n]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/beats/beats`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));j(n),r(null==n?void 0:n.stats.total)}),[d,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,r]);return Object(y.jsx)(ji,{title:b,pageTitle:x,getPageData:h},Object(y.jsx)("div",{"data-test-subj":"monitoringBeatsInstancesApp"},Object(y.jsx)(La,{productName:Oe.b,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(y.jsx)(xe.Provider,{value:{setupModeSupported:!0}},t,Object(y.jsx)(beats_listing_listing_Listing,me()({stats:p.stats,data:p.listing,setupMode:e},o())),s)})))};function tr({stats:e}){const{http_address:t,events:s,reloads:a,pipeline:i,queue_type:n,version:r,uptime:o}=e,l=[{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"httpAddress"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Ze(s.in,"0.[0]a"),"data-test-subj":"eventsIn"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Ze(s.out,"0.[0]a"),"data-test-subj":"eventsOut"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.configReloadsLabel",{defaultMessage:"Config Reloads"}),value:a.successes,"data-test-subj":"numReloads"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.pipelineWorkersLabel",{defaultMessage:"Pipeline Workers"}),value:i.workers,"data-test-subj":"pipelineWorkers"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.batchSizeLabel",{defaultMessage:"Batch Size"}),value:i.batch_size,"data-test-subj":"pipelineBatchSize"}],u=[{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.versionLabel",{defaultMessage:"Version"}),value:r,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(o,"time_since"),"data-test-subj":"uptime"}],d=[...l];return n&&d.push({label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.queueTypeLabel",{defaultMessage:"Queue Type"}),value:n,"data-test-subj":"queueType"}),d.push(...u),Object(y.jsx)(He,{metrics:d,"data-test-subj":"logstashDetailStatus"})}const sr=({clusters:e})=>{var t;const s=Object(a.useContext)(M),i=Object(o.useRouteMatch)(),{services:n}=Object(l.useKibana)(),r=s.cluster_uuid,{zoomInfo:d,onBrush:m}=gi(),p=s.ccs,j=Object(g.find)(e,{cluster_uuid:r}),{generate:b}=Object(a.useContext)(Na.Context),[x,h]=Object(a.useState)({}),[f,O]=Object(a.useState)({}),v=c.i18n.translate("xpack.monitoring.logstash.node.advanced.routeTitle",{defaultMessage:"Logstash - {nodeName} - Advanced",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.advanced.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),k=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/logstash/node/${i.params.uuid}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&r){var o;const e=await(null===(o=n.http)||void 0===o?void 0:o.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));h(e);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.Q],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});O(t)}}),[p,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,i.params.uuid]),S=Object(a.useMemo)((()=>x.metrics?[x.metrics.logstash_node_cpu_utilization,x.metrics.logstash_queue_events_count,x.metrics.logstash_node_cgroup_cpu,x.metrics.logstash_pipeline_queue_size,x.metrics.logstash_node_cgroup_stats]:[]),[x.metrics]);return Object(a.useEffect)((()=>{j&&x.nodeSummary&&b(j.cluster_name,{inLogstash:!0,instance:x.nodeSummary.host,name:"nodes"})}),[j,x,b]),Object(y.jsx)(kn,{instance:x,title:v,pageTitle:E,getPageData:k,cluster:j},Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,x.nodeSummary&&Object(y.jsx)(tr,{stats:x.nodeSummary})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:f}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},S.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e,onBrush:m,zoomInfo:d},x)),Object(y.jsx)(u.EuiSpacer,null)))))))))},ar=({clusters:e})=>{var t;const s=Object(o.useRouteMatch)(),i=Object(a.useContext)(M),{services:n}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Na.Context),d=i.cluster_uuid,m=i.ccs,p=Object(g.find)(e,{cluster_uuid:d}),[j,b]=Object(a.useState)({}),[x,h]=Object(a.useState)({}),{zoomInfo:f,onBrush:O}=gi(),v=c.i18n.translate("xpack.monitoring.logstash.node.routeTitle",{defaultMessage:"Logstash - {nodeName}",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}});Object(a.useEffect)((()=>{p&&j.nodeSummary&&r(p.cluster_name,{inLogstash:!0,instance:j.nodeSummary.host,name:"nodes"})}),[p,j,r]);const k=Object(a.useCallback)((async()=>{var e,t;const a=`../api/monitoring/v1/clusters/${d}/logstash/node/${s.params.uuid}`,i=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=n.http)&&void 0!==t&&t.fetch&&d){var r;const e=await(null===(r=n.http)||void 0===r?void 0:r.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},is_advanced:!1})}));b(e);const t=await Da({fetch:n.http.fetch,alertTypeIds:[Oe.Q],clusterUuid:d,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});h(t)}}),[m,d,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,s.params]),S=Object(a.useMemo)((()=>j.metrics?[j.metrics.logstash_events_input_rate,j.metrics.logstash_jvm_usage,j.metrics.logstash_events_output_rate,j.metrics.logstash_node_cpu_metric,j.metrics.logstash_events_latency,j.metrics.logstash_os_load]:[]),[j.metrics]);return Object(y.jsx)(kn,{instance:j,title:v,pageTitle:E,getPageData:k,cluster:p},Object(y.jsx)(u.EuiPage,null,Object(y.jsx)(u.EuiPageBody,null,Object(y.jsx)(u.EuiPanel,null,j.nodeSummary&&Object(y.jsx)(tr,{stats:j.nodeSummary})),Object(y.jsx)(u.EuiSpacer,{size:"m"}),Object(y.jsx)(js,{alerts:x}),Object(y.jsx)(u.EuiPageContent,null,Object(y.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},S.map(((e,t)=>Object(y.jsx)(u.EuiFlexItem,{key:t},Object(y.jsx)(Rt,me()({series:e,onBrush:O,zoomInfo:f},j)),Object(y.jsx)(u.EuiSpacer,null)))))))))},ir=({clusters:e})=>{var t;const s=Object(a.useContext)(M),i=Object(o.useRouteMatch)(),{services:n}=Object(l.useKibana)(),r=s.cluster_uuid,u=s.ccs,{onBrush:d,zoomInfo:m}=gi(),p=Object(g.find)(e,{cluster_uuid:r}),{generate:j}=Object(a.useContext)(Na.Context),{getPaginationTableProps:b,getPaginationRouteOptions:x,updateTotalItemCount:h}=Qa("logstash.pipelines"),[f,O]=Object(a.useState)({}),v=c.i18n.translate("xpack.monitoring.logstash.node.pipelines.routeTitle",{defaultMessage:"Logstash - {nodeName} - Pipelines",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.pipelines.pageTitle",{defaultMessage:"Logstash node pipelines: {nodeName}",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),k=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/logstash/node/${i.params.uuid}/pipelines`,o=await(null===(t=n.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...x()})}));O(o),h(o.totalPipelineCount)}),[u,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,x,h,i.params.uuid]);return Object(a.useEffect)((()=>{p&&f.nodeSummary&&j(p.cluster_name,{inLogstash:!0,instance:f.nodeSummary.host,name:"nodes"})}),[p,f,j]),Object(y.jsx)(kn,{instance:f,title:v,pageTitle:E,getPageData:k,cluster:p},f.pipelines&&Object(y.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},Object(y.jsx)(pipeline_listing_PipelineListing,me()({className:"monitoringLogstashPipelinesTable",onBrush:d,zoomInfo:m,stats:f.nodeSummary,data:f.pipelines,statusComponent:tr},b(),{upgradeMessage:(S=f.nodeSummary.version,!Array.isArray(S)||0===S.length||S.some(Cn)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher.")}))));var S};var nr=s(144),rr=s.n(nr);const or=()=>{const{services:e}=Object(l.useKibana)(),[t,s]=Object(a.useState)(!1);rr()((()=>{!async function(){var t;if(null!==(t=e.http)&&void 0!==t&&t.fetch)try{var a;const t=await(null===(a=e.http)||void 0===a?void 0:a.fetch("../api/monitoring/v1/check_access"));s(t.has_access)}catch(e){s(!1)}}()}),5e3);const i=c.i18n.translate("xpack.monitoring.accessDeniedTitle",{defaultMessage:"Access Denied"});return t?Object(y.jsx)(o.Redirect,{to:"/home"}):Object(y.jsx)(u.EuiPanel,{paddingSize:"m"},Object(y.jsx)(u.EuiCallOut,{title:i,color:"danger",iconType:"alert","data-test-subj":"accessDeniedTitle"},Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.accessDenied.notAuthorizedDescription",defaultMessage:"You are not authorized to access Monitoring. To use Monitoring, you need the privileges granted by both the `{kibanaAdmin}` and `{monitoringUser}` roles.",values:{kibanaAdmin:"kibana_admin",monitoringUser:"monitoring_user "}})),Object(y.jsx)("p",null,Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.accessDenied.clusterNotConfiguredDescription",defaultMessage:"If you are attempting to access a dedicated monitoring cluster, this might be because you are logged in as a user that is not configured on the monitoring cluster."})),Object(y.jsx)("p",null,Object(y.jsx)(u.EuiButton,{href:"../app/home"},Object(y.jsx)(C.FormattedMessage,{id:"xpack.monitoring.accessDenied.backToKibanaButtonLabel",defaultMessage:"Back to Kibana"})))))},lr=(e,t,{element:s,history:a,setHeaderActionMenu:i,theme$:n},o)=>{const l=a.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return r.a.render(Object(y.jsx)(cr,{core:e,plugins:t,externalConfig:o,setHeaderActionMenu:i,theme$:n}),s),()=>{r.a.unmountComponentAtNode(s),l()}},cr=({core:e,plugins:t,externalConfig:s,setHeaderActionMenu:a,theme$:i})=>{const n=function(){const e=Object(O.createHashHistory)({hashType:"slash"}),t=e.push,s=e.replace;return e.push=(s,a)=>t.apply(e,[si(e,ai(s,a))]),e.replace=(t,a)=>s.apply(e,[si(e,ai(t,a))]),e}();return Object(y.jsx)(l.KibanaContextProvider,{services:{...e,...t}},Object(y.jsx)(Oa.Provider,{value:s},Object(y.jsx)(S,{query:t.data.query,toasts:e.notifications.toasts,uiSettings:e.uiSettings},Object(y.jsx)(Rs.Provider,{value:{setHeaderActionMenu:a,theme$:i}},Object(y.jsx)(T.Provider,null,Object(y.jsx)(Na.Provider,{history:n},Object(y.jsx)(o.Router,{history:n},Object(y.jsx)(o.Switch,null,Object(y.jsx)(o.Route,{path:"/access-denied",component:or}),Object(y.jsx)(o.Route,{path:"/no-data",component:li}),Object(y.jsx)(o.Route,{path:"/loading",component:Gs}),Object(y.jsx)(ii,{path:"/license",component:Ws,codePaths:["all"],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/home",component:ti,codePaths:["all"],fetchAllClusters:!0,unsetGlobalState:!0}),Object(y.jsx)(ii,{path:"/overview",component:za,codePaths:["all"],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/ml_jobs",component:dn,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/ccr/:index/shard/:shardId",component:fn,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/ccr",component:bn,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/indices/:index/advanced",component:ln,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/indices/:index",component:rn,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/indices",component:Zi,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/nodes/:node/advanced",component:mn,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/nodes/:node",component:un,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch/nodes",component:Qi,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/elasticsearch",component:pi,codePaths:[Oe.k],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/kibana/instances/:instance",component:Yi,codePaths:[Oe.m],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/kibana/instances",component:Wi,codePaths:[Oe.m],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/kibana",component:Gi,codePaths:[Oe.m],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/beats/beat/:instance",component:yi,codePaths:[Oe.j],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/beats/beats",component:er,codePaths:[Oe.j],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/beats",component:vi,codePaths:[Oe.j],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/nodes",component:_n,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/node/:uuid/advanced",component:sr,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/node/:uuid/pipelines",component:ir,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/node/:uuid",component:ar,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/pipelines/:id/:hash?",component:Zn,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash/pipelines",component:Fn,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/logstash",component:Sn,codePaths:[Oe.o],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/apm/instances/:instance",component:zi,codePaths:[Oe.i],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/apm/instances",component:Ni,codePaths:[Oe.i],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/apm",component:Li,codePaths:[Oe.i],fetchAllClusters:!1}),Object(y.jsx)(ii,{path:"/enterprise_search",component:yn,codePaths:[Oe.l],fetchAllClusters:!1}),Object(y.jsx)(o.Redirect,{to:{pathname:"/loading",search:n.location.search}})))))))))}}])]);