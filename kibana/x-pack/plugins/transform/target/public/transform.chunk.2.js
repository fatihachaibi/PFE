/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[2],{101:function(e,t,a){"use strict";const s=a(102),r=a(103),n=a(104);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function l(e,t){return t.decode?r(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=a):s[e]=a};case"bracket":return(e,a,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],a):s[e]=[a]:s[e]=a};case"comma":case"separator":return(t,a,s)=>{const r="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);s[t]=r};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){let[e,o]=n(t.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:l(o,t),a(l(e,t),o,s)}for(const e of Object.keys(s)){const a=s[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=m(a[e],t);else s[e]=m(a,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const a=s[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=u,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],s=function(e){switch(e.arrayFormat){case"index":return t=>(a,s)=>{const r=a.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?a:null===s?[...a,[i(t,e),"[",r,"]"].join("")]:[...a,[i(t,e),"[",i(r,e),"]=",i(s,e)].join("")]};case"bracket":return t=>(a,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?a:null===s?[...a,[i(t,e),"[]"].join("")]:[...a,[i(t,e),"[]=",i(s,e)].join("")];case"comma":case"separator":return t=>(a,s)=>null==s||0===s.length?a:0===a.length?[[i(t,e),"=",i(s,e)].join("")]:[[a,i(s,e)].join(e.arrayFormatSeparator)];default:return t=>(a,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?a:null===s?[...a,i(t,e)]:[...a,[i(t,e),"=",i(s,e)].join("")]}}(t),r={};for(const t of Object.keys(e))a(t)||(r[t]=e[t]);const n=Object.keys(r);return!1!==t.sort&&n.sort(t.sort),n.map((a=>{const r=e[a];return void 0===r?"":null===r?i(a,t):Array.isArray(r)?r.reduce(s(a),[]).join("&"):i(a,t)+"="+i(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,s]=n(e,"#");return Object.assign({url:a.split("?")[0]||"",query:f(u(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:l(s,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const s=d(e.url).split("?")[0]||"",r=t.extract(e.url),n=t.parse(r,{sort:!1}),o=Object.assign(n,e.query);let l=t.stringify(o,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${i(e.fragmentIdentifier,a)}`),`${s}${l}${c}`}},102:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},103:function(e,t,a){"use strict";var s="%[a-f0-9]{2}",r=new RegExp(s,"gi"),n=new RegExp("("+s+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],o(a),o(s))}function i(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(r),a=1;a<t.length;a++)t=(e=o(t,a).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=n.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var s=i(a[0]);s!==a[0]&&(t[a[0]]=s)}a=n.exec(e)}t["%C2"]="�";for(var r=Object.keys(t),o=0;o<r.length;o++){var l=r[o];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},104:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},105:function(e,t,a){"use strict";a.r(t),a.d(t,"mountManagementSection",(function(){return $t}));var s=a(31),r=a(60),n=a(49),o=a.n(n),i=a(0);const l=new class text_TextService{constructor(){o()(this,"breadcrumbs",{})}init(){this.breadcrumbs={home:i.i18n.translate("xpack.transform.home.breadcrumbTitle",{defaultMessage:"Transforms"}),cloneTransform:i.i18n.translate("xpack.transform.cloneTransform.breadcrumbTitle",{defaultMessage:"Clone transform"}),createTransform:i.i18n.translate("xpack.transform.createTransform.breadcrumbTitle",{defaultMessage:"Create transform"})}}getSizeNotationHelpText(){return i.i18n.translate("xpack.transform.transformForm.sizeNotationPlaceholder",{defaultMessage:"Examples: {example1}, {example2}, {example3}, {example4}",values:{example1:"1g",example2:"10mb",example3:"5k",example4:"1024B"}})}};let c;!function(e){e.HOME="home",e.CLONE_TRANSFORM="cloneTransform",e.CREATE_TRANSFORM="createTransform"}(c||(c={}));const d=new class breadcrumb_BreadcrumbService{constructor(){o()(this,"breadcrumbs",{home:[],cloneTransform:[],createTransform:[]}),o()(this,"setBreadcrumbsHandler",void 0)}setup(e){this.setBreadcrumbsHandler=e,this.breadcrumbs.home=[{text:l.breadcrumbs.home,href:"/"}],this.breadcrumbs.cloneTransform=[...this.breadcrumbs.home,{text:l.breadcrumbs.cloneTransform}],this.breadcrumbs.createTransform=[...this.breadcrumbs.home,{text:l.breadcrumbs.createTransform}]}setBreadcrumbs(e){if(!this.setBreadcrumbsHandler)throw new Error("BreadcrumbService#setup() must be called first!");const t=this.breadcrumbs[e]?[...this.breadcrumbs[e]]:[...this.breadcrumbs.home],a=t.pop();t.push({...a,href:void 0}),this.setBreadcrumbsHandler(t)}},u=new class doc_title_DocTitleService{constructor(){o()(this,"changeDocTitle",(()=>{}))}init(e){this.changeDocTitle=e}setTitle(e){e&&"home"!==e?l.breadcrumbs[e]&&this.changeDocTitle(`${l.breadcrumbs[e]} - ${l.breadcrumbs.home}`):this.changeDocTitle(`${l.breadcrumbs.home}`)}};var m=a(2),f=a.n(m),b=a(32),j=a(26),p=a(16),g=a(18),x=a(20),O=a(3),h=a(53),T=a(66),v=a(42);function y(e){return Object(v.b)(e,["hasAllPrivileges","missingPrivileges"])&&"boolean"==typeof e.hasAllPrivileges&&"object"==typeof e.missingPrivileges&&null!==e.missingPrivileges}const M=e=>t=>{const[a,s]=t;return!(!y(e)||e.missingPrivileges[a])||!(!y(e)||0!==e.missingPrivileges[a].length)||"*"!==s&&y(e)&&!e.missingPrivileges[a].includes(s)};function k(e){let t="";switch(e){case"canCreateTransform":t=i.i18n.translate("xpack.transform.capability.noPermission.createTransformTooltip",{defaultMessage:"You do not have permission to create transforms."});break;case"canCreateTransformAlerts":t=i.i18n.translate("xpack.transform.capability.noPermission.canCreateTransformAlertsTooltip",{defaultMessage:"You do not have permission to create transform alert rules."});break;case"canStartStopTransform":t=i.i18n.translate("xpack.transform.capability.noPermission.startOrStopTransformTooltip",{defaultMessage:"You do not have permission to start or stop transforms."});break;case"canDeleteTransform":t=i.i18n.translate("xpack.transform.capability.noPermission.deleteTransformTooltip",{defaultMessage:"You do not have permission to delete transforms."});break;case"canResetTransform":t=i.i18n.translate("xpack.transform.capability.noPermission.resetTransformTooltip",{defaultMessage:"You do not have permission to reset transforms."});break;case"noTransformNodes":t=i.i18n.translate("xpack.transform.capability.noPermission.noTransformNodesTooltip",{defaultMessage:"There are no transform nodes available."})}return i.i18n.translate("xpack.transform.capability.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:t}})}var S=a(52),E=a(15);const F={canGetTransform:!1,canDeleteTransform:!1,canPreviewTransform:!1,canCreateTransform:!1,canStartStopTransform:!1,canCreateTransformAlerts:!1,canUseTransformAlerts:!1,canResetTransform:!1},C={isLoading:!0,apiError:null,privileges:{hasAllPrivileges:!1,missingPrivileges:{}},capabilities:F},w=Object(m.createContext)({...C}),I=({privilegesEndpoint:e,children:t})=>{const{isLoading:a,error:s,data:r}=Object(S.e)({path:e,method:"get"}),n={isLoading:a,privileges:a?{...C.privileges}:r,capabilities:{...F},apiError:s||null},o=M(n.privileges);return n.capabilities.canGetTransform=o(["cluster","cluster:monitor/transform/get"])&&o(["cluster","cluster:monitor/transform/stats/get"]),n.capabilities.canCreateTransform=o(["cluster","cluster:admin/transform/put"]),n.capabilities.canDeleteTransform=o(["cluster","cluster:admin/transform/delete"]),n.capabilities.canResetTransform=o(["cluster","cluster:admin/transform/reset"]),n.capabilities.canPreviewTransform=o(["cluster","cluster:admin/transform/preview"]),n.capabilities.canStartStopTransform=o(["cluster","cluster:admin/transform/start"])&&o(["cluster","cluster:admin/transform/start_task"])&&o(["cluster","cluster:admin/transform/stop"]),n.capabilities.canCreateTransformAlerts=n.capabilities.canCreateTransform,n.capabilities.canUseTransformAlerts=n.capabilities.canGetTransform,Object(E.jsx)(w.Provider,{value:{...n}},t)},D=({title:e,message:t})=>Object(E.jsx)(p.EuiEmptyPrompt,{iconType:"securityApp",title:Object(E.jsx)("h2",null,e),body:Object(E.jsx)("p",null,t)}),P=({privileges:e,children:t})=>{const{isLoading:a,privileges:s}=Object(m.useContext)(w),r=(n=e,Array.isArray(n)?n:[n]).map((e=>{const[t,a]=e.split(".");if(!a)throw new Error('Required privilege must have the format "section.privilege"');return[t,a]}));var n;const o=M(s);return t({isLoading:a,hasPrivileges:!a&&r.every(o),privilegesMissing:r.reduce(((e,[t,a])=>{if("*"===a)e[t]=s.missingPrivileges[t]||[];else if(s.missingPrivileges[t]&&s.missingPrivileges[t].includes(a)){const s=e[t]||[];e[t]=[...s,a]}return e}),{})})},L=({missingPrivileges:e,privilegesCount:t})=>Object(E.jsx)(p.EuiFlexGroup,{justifyContent:"spaceAround"},Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(E.jsx)(D,{title:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.app.deniedPrivilegeTitle",defaultMessage:"You're missing cluster privileges"}),message:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.app.deniedPrivilegeDescription",defaultMessage:"To use this section of Transforms, you must have {privilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {missingPrivileges}.",values:{missingPrivileges:e,privilegesCount:t}})})))),A=({children:e,privileges:t})=>Object(E.jsx)(P,{privileges:t},(({isLoading:t,hasPrivileges:a,privilegesMissing:s})=>t?Object(E.jsx)(h.b,null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.app.checkingPrivilegesDescription",defaultMessage:"Checking privileges…"})):a?Object(E.jsx)(f.a.Fragment,null,e):Object(E.jsx)(L,{missingPrivileges:s.cluster.join(", "),privilegesCount:s.cluster.length})));var B=a(101),N=a(47),R=a(44),_=a(51),V=a(67),z=a(41),U=a(83),q=a(27),$=a(40);let H=[];async function G(e){return H=await e.find("*",1e4),H}function Y(e){var t;return null===(t=H.find((({title:t})=>t===e)))||void 0===t?void 0:t.id}const J=e=>{const[t,a]=Object(m.useState)(e),[s,n]=Object(m.useState)(),o=Object(z.a)(),l=o.data.dataViews,c=o.uiSettings,[d,u]=Object(m.useState)(void 0);return Object(m.useEffect)((()=>{void 0!==t&&async function(e){let t,a;try{t=await l.get(e)}catch(e){}try{var s,d;if(a=await Object(r.c)(e,{search:o.data.search,savedObjectsClient:o.savedObjects.client,spaces:o.spaces}),null!==(s=a)&&void 0!==s&&null!==(d=s.sharingSavedObjectProps)&&void 0!==d&&d.errorJSON)return void n(await Object(r.d)(a))}catch(e){}Object(V.a)(t)||void 0!==a?(u(function(e,t,a){let s={query:"",language:"lucene"},r={bool:{must:[$.B]}};if(!Object(V.a)(e)&&null!==t&&void 0!==t.id){const n=t.searchSource;e=n.getField("index"),s=n.getField("query");const o=n.getField("filter"),i=o.length?o:[],l=Object(q.getEsQueryConfig)(a);r=Object(U.a)(e,[s],i,l)}if(!Object(V.a)(e))throw new Error("Data view is not defined.");return{dataView:e,savedSearch:t,query:s,combinedQuery:r}}(t,a,c)),n(void 0)):n(i.i18n.translate("xpack.transform.searchItems.errorInitializationTitle",{defaultMessage:"An error occurred initializing the Kibana data view or saved search."}))}(t)}),[t]),{error:s,getDataViewIdByTitle:Y,loadDataViews:G,searchItems:d,setSavedObjectId:a}};var W=a(64),K=a(54);const Q=({match:e,location:t})=>{const{dataViewId:a}=Object(B.parse)(t.search,{sort:!1});Object(m.useEffect)((()=>{d.setBreadcrumbs(c.CLONE_TRANSFORM),u.setTitle("createTransform")}),[]);const s=Object(R.a)(),{esTransform:r}=Object(_.a)(),n=e.params.transformId,[o,l]=Object(m.useState)(),[b,j]=Object(m.useState)(),[x,h]=Object(m.useState)(!1),{error:T,searchItems:v,setSavedObjectId:y}=J(void 0);Object(m.useEffect)((()=>{(async()=>{if(void 0!==T)return l(void 0),j(T),void h(!0);const e=await s.getTransform(n);if(Object(N.g)(e))return l(void 0),j(e.message),void h(!0);try{if(void 0===a)throw new Error(i.i18n.translate("xpack.transform.clone.fetchErrorPromptText",{defaultMessage:"Could not fetch the Kibana data view ID."}));y(a),l(Object(K.d)(e.transforms[0])),j(void 0),h(!0)}catch(e){l(void 0),void 0!==e.message?j(e.message):j(JSON.stringify(e,null,2)),h(!0)}})()}),[]);const M=Object(E.jsx)(p.EuiButtonEmpty,{href:r,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(E.jsx)(A,{privileges:O.c},Object(E.jsx)(p.EuiPageHeader,{pageTitle:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformsWizard.cloneTransformTitle",defaultMessage:"Clone transform"}),rightSideItems:[M],bottomBorder:!0}),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiPageContentBody,{"data-test-subj":"transformPageCloneTransform"},void 0!==b&&Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiCallOut,{title:i.i18n.translate("xpack.transform.clone.errorPromptTitle",{defaultMessage:"An error occurred getting the transform configuration."}),color:"danger",iconType:"alert"},Object(E.jsx)("pre",null,JSON.stringify(b))),Object(E.jsx)(p.EuiSpacer,{size:"l"})),void 0!==v&&!0===x&&void 0!==o&&Object(E.jsx)(W.b,{cloneConfig:o,searchItems:v})))},Z=({match:e})=>{Object(m.useEffect)((()=>{d.setBreadcrumbs(c.CREATE_TRANSFORM),u.setTitle("createTransform")}),[]);const{esTransform:t}=Object(_.a)(),{error:a,searchItems:s}=J(e.params.savedObjectId),r=Object(E.jsx)(p.EuiButtonEmpty,{href:t,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(E.jsx)(A,{privileges:O.c},Object(E.jsx)(p.EuiPageHeader,{pageTitle:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformsWizard.createTransformTitle",defaultMessage:"Create transform"}),rightSideItems:[r],bottomBorder:!0}),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiPageContentBody,{"data-test-subj":"transformPageCreateTransform"},void 0!==a&&Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiCallOut,{title:a,color:"danger",iconType:"alert"}),Object(E.jsx)(p.EuiSpacer,{size:"l"})),void 0!==s&&Object(E.jsx)(W.b,{searchItems:s})))};var X=a(81),ee=a(37);const te=({onSearchSelected:e})=>{const{uiSettings:t,savedObjects:a}=Object(z.a)();return Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiModalHeader,null,Object(E.jsx)(p.EuiModalHeaderTitle,null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.newTransform.newTransformTitle",defaultMessage:"New transform"})," ","/"," ",Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.newTransform.chooseSourceTitle",defaultMessage:"Choose a source"}))),Object(E.jsx)(p.EuiModalBody,null,Object(E.jsx)(ee.SavedObjectFinderUi,{key:"searchSavedObjectFinder",onChoose:e,showFilter:!0,noItemsMessage:i.i18n.translate("xpack.transform.newTransform.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:()=>"search",name:i.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:i.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.dataView",{defaultMessage:"Data view"})}],fixedPageSize:8,uiSettings:t,savedObjects:a})))},ae=({onClick:e,transformNodes:t})=>{const{capabilities:a}=Object(m.useContext)(w),s=!a.canCreateTransform||!a.canPreviewTransform||!a.canStartStopTransform||0===t,r=Object(E.jsx)(p.EuiButton,{disabled:s,fill:!0,onClick:e,iconType:"plusInCircle","data-test-subj":"transformButtonCreate"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.createTransformButton",defaultMessage:"Create a transform"}));return s?Object(E.jsx)(p.EuiToolTip,{position:"top",content:k(t>0?"canCreateTransform":"noTransformNodes")},r):r},se=({onClick:e,isLoading:t})=>Object(E.jsx)(p.EuiButton,{color:"success",iconType:"refresh","data-test-subj":"transformRefreshTransformListButton"+(t?" loading":" loaded"),onClick:e,isLoading:t},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.refreshButtonLabel",defaultMessage:"Reload"})),re=i.i18n.translate("xpack.transform.transformList.deleteActionNameText",{defaultMessage:"Delete"}),ne=e=>![O.o.STOPPED,O.o.FAILED].includes(e.stats.state),oe=(e,t)=>{const a=e.some(ne);return!0===t||a},ie=({canDeleteTransform:e,disabled:t,isBulkAction:a})=>{const s=i.i18n.translate("xpack.transform.transformList.deleteBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must be stopped in order to be deleted."}),r=i.i18n.translate("xpack.transform.transformList.deleteActionDisabledToolTipContent",{defaultMessage:"Stop the transform in order to delete it."});if(t||!e){let e;return e=t?a?s:r:k("canDeleteTransform"),Object(E.jsx)(p.EuiToolTip,{position:"top",content:e},Object(E.jsx)(f.a.Fragment,null,re))}return Object(E.jsx)(f.a.Fragment,null,re)},le=e=>{const{canDeleteTransform:t}=Object(m.useContext)(w).capabilities,a=Object(S.c)(),[s,r]=Object(m.useState)(!1),[n,o]=Object(m.useState)([]),i=n.length>1,l=Object(m.useMemo)((()=>n.some((e=>e.stats.state===O.o.FAILED))),[n]),{userCanDeleteIndex:c,userCanDeleteDataView:d,deleteDestIndex:u,dataViewExists:f,deleteDataView:b,toggleDeleteIndex:j,toggleDeleteDataView:p}=Object(S.b)(n),g=e=>{Array.isArray(e)&&(o(e),r(!0))};return{action:Object(m.useMemo)((()=>({name:a=>Object(E.jsx)(ie,{canDeleteTransform:t,disabled:oe([a],e),isBulkAction:!1}),enabled:a=>!oe([a],e)&&t,description:re,icon:"trash",type:"icon",onClick:e=>g([e]),"data-test-subj":"transformActionDelete"})),[t,e]),closeModal:()=>r(!1),deleteAndCloseModal:()=>{r(!1);const e=c&&u,t=c&&d&&f&&b,s=i?l:n[0]&&n[0]&&n[0].stats.state===O.o.FAILED;a({transformsInfo:n.map((e=>({id:e.config.id,state:e.stats.state}))),deleteDestIndex:e,deleteDestDataView:t,forceDelete:s})},deleteDestIndex:u,deleteDataView:b,dataViewExists:f,isModalVisible:s,items:n,openModal:g,shouldForceDelete:l,toggleDeleteIndex:j,toggleDeleteDataView:p,userCanDeleteIndex:c,userCanDeleteDataView:d}},ce=e=>{var t,a;return null===(t=e.config)||void 0===t||null===(a=t._meta)||void 0===a?void 0:a.managed},de=({count:e,action:t})=>Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(p.EuiCallOut,{color:"warning"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.managedTransformsWarningCallout",defaultMessage:"{count, plural, one {This transform} other {At least one of these transforms}} is preconfigured by Elastic; {action} {count, plural, one {it} other {them}} might impact other parts of the product.",values:{count:e,action:t}}))),ue=({closeModal:e,deleteAndCloseModal:t,deleteDestIndex:a,deleteDataView:s,dataViewExists:r,items:n,shouldForceDelete:o,toggleDeleteIndex:l,toggleDeleteDataView:c,userCanDeleteIndex:d,userCanDeleteDataView:u})=>{const b=Object(m.useMemo)((()=>n.some((e=>ce(e)))),[n]),j=n.length>1,g=i.i18n.translate("xpack.transform.transformList.bulkDeleteModalTitle",{defaultMessage:"Delete {count} {count, plural, one {transform} other {transforms}}?",values:{count:n.length}}),x=i.i18n.translate("xpack.transform.transformList.deleteModalTitle",{defaultMessage:"Delete {transformId}?",values:{transformId:n[0]&&n[0].config.id}}),O=Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiFlexGroup,{direction:"column",gutterSize:"none"},b?Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(de,{count:n.length,action:i.i18n.translate("xpack.transform.transformList.deleteManagedTransformDescription",{defaultMessage:"deleting"})}),Object(E.jsx)(p.EuiSpacer,null)):null,Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(p.EuiSwitch,{"data-test-subj":"transformBulkDeleteIndexSwitch",label:i.i18n.translate("xpack.transform.actionDeleteTransform.bulkDeleteDestinationIndexTitle",{defaultMessage:"Delete destination indices"}),checked:a,onChange:l})),Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(p.EuiSwitch,{"data-test-subj":"transformBulkDeleteDataViewSwitch",label:i.i18n.translate("xpack.transform.actionDeleteTransform.bulkDeleteDestDataViewTitle",{defaultMessage:"Delete destination data views"}),checked:s,onChange:c,disabled:!1===u})))),h=Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiFlexGroup,{direction:"column",gutterSize:"none"},b?Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(de,{count:1,action:i.i18n.translate("xpack.transform.transformList.deleteManagedTransformDescription",{defaultMessage:"deleting"})}),Object(E.jsx)(p.EuiSpacer,null)):null,Object(E.jsx)(p.EuiFlexItem,null,d&&Object(E.jsx)(p.EuiSwitch,{"data-test-subj":"transformDeleteIndexSwitch",label:i.i18n.translate("xpack.transform.actionDeleteTransform.deleteDestinationIndexTitle",{defaultMessage:"Delete destination index {destinationIndex}",values:{destinationIndex:n[0]&&n[0].config.dest.index}}),checked:a,onChange:l})),d&&r&&Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(p.EuiSwitch,{"data-test-subj":"transformDeleteDataViewSwitch",label:i.i18n.translate("xpack.transform.actionDeleteTransform.deleteDestDataViewTitle",{defaultMessage:"Delete data view {destinationIndex}",values:{destinationIndex:n[0]&&n[0].config.dest.index}}),checked:s,onChange:c,disabled:!1===u}))));return Object(E.jsx)(p.EuiConfirmModal,{"data-test-subj":"transformDeleteModal",title:!0===j?g:x,onCancel:e,onConfirm:t,cancelButtonText:i.i18n.translate("xpack.transform.transformList.deleteModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.transform.transformList.deleteModalDeleteButton",{defaultMessage:"Delete"}),defaultFocusedButton:p.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},j?O:h)},me=i.i18n.translate("xpack.transform.transformList.resetActionNameText",{defaultMessage:"Reset"}),fe=e=>![O.o.STOPPED,O.o.FAILED].includes(e.stats.state),be=(e,t)=>{const a=e.some(fe);return!0===t||a},je=({canResetTransform:e,disabled:t,isBulkAction:a})=>{const s=i.i18n.translate("xpack.transform.transformList.resetBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must be stopped to be reset."}),r=i.i18n.translate("xpack.transform.transformList.resetActionDisabledToolTipContent",{defaultMessage:"Stop the transform in order to reset it."});if(t||!e){let e;return e=t?a?s:r:k("canResetTransform"),Object(E.jsx)(p.EuiToolTip,{position:"top",content:e},Object(E.jsx)(f.a.Fragment,null,me))}return Object(E.jsx)(f.a.Fragment,null,me)},pe=e=>{const{canResetTransform:t}=Object(m.useContext)(w).capabilities,a=Object(S.f)(),[s,r]=Object(m.useState)(!1),[n,o]=Object(m.useState)([]),i=Object(m.useMemo)((()=>n.some((e=>e.stats.state===O.o.FAILED))),[n]),l=e=>{Array.isArray(e)&&(o(e),r(!0))};return{action:Object(m.useMemo)((()=>({name:a=>Object(E.jsx)(je,{canResetTransform:t,disabled:be([a],e),isBulkAction:!1}),enabled:a=>!be([a],e)&&t,description:me,icon:"refresh",type:"icon",onClick:e=>l([e]),"data-test-subj":"transformActionReset"})),[t,e]),closeModal:()=>r(!1),resetAndCloseModal:()=>{r(!1),a({transformsInfo:n.map((e=>({id:e.config.id,state:e.stats.state})))})},isModalVisible:s,items:n,openModal:l,shouldForceReset:i}},ge=({closeModal:e,resetAndCloseModal:t,items:a,shouldForceReset:s})=>{const r=Object(m.useMemo)((()=>a.some((e=>ce(e)))),[a]),n=a.length>1,o=i.i18n.translate("xpack.transform.transformList.bulkResetModalTitle",{defaultMessage:"Reset {count} {count, plural, one {transform} other {transforms}}?",values:{count:a.length}}),l=i.i18n.translate("xpack.transform.transformList.resetModalTitle",{defaultMessage:"Reset {transformId}?",values:{transformId:a[0]&&a[0].config.id}}),c=Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiFlexGroup,{direction:"column",gutterSize:"none"},r?Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(de,{count:a.length,action:i.i18n.translate("xpack.transform.transformList.resetManagedTransformDescription",{defaultMessage:"resetting"})}),Object(E.jsx)(p.EuiSpacer,null)):null)),d=Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiFlexGroup,{direction:"column",gutterSize:"none"},r?Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(de,{count:1,action:i.i18n.translate("xpack.transform.transformList.resetManagedTransformDescription",{defaultMessage:"resetting"})}),Object(E.jsx)(p.EuiSpacer,null)):null));return Object(E.jsx)(p.EuiConfirmModal,{"data-test-subj":"transformResetModal",title:!0===n?o:l,onCancel:e,onConfirm:t,cancelButtonText:i.i18n.translate("xpack.transform.transformList.resetModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.transform.transformList.resetModalResetButton",{defaultMessage:"Reset"}),defaultFocusedButton:p.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},n?c:d)},xe=i.i18n.translate("xpack.transform.transformList.startActionNameText",{defaultMessage:"Start"}),Oe=(e,t,a)=>{const s=e.some((e=>Object($.q)(e))),r=e.some((e=>e.stats.state===O.o.STARTED));return!t||s||r||0===e.length||0===a},he=({items:e,forceDisable:t,transformNodes:a})=>{const{canStartStopTransform:s}=Object(m.useContext)(w).capabilities,r=e.length>1,n=e.some((e=>Object($.q)(e))),o=e.some((e=>e.stats.state===O.o.STARTED));let l,c;!0===r?(l=i.i18n.translate("xpack.transform.transformList.startedTransformBulkToolTip",{defaultMessage:"One or more transforms are already started."}),c=i.i18n.translate("xpack.transform.transformList.completeBatchTransformBulkActionToolTip",{defaultMessage:"One or more transforms are completed batch transforms and cannot be restarted."})):(l=i.i18n.translate("xpack.transform.transformList.startedTransformToolTip",{defaultMessage:"{transformId} is already started.",values:{transformId:e[0]&&e[0].config.id}}),c=i.i18n.translate("xpack.transform.transformList.completeBatchTransformToolTip",{defaultMessage:"{transformId} is a completed batch transform and cannot be restarted.",values:{transformId:e[0]&&e[0].config.id}}));const d=Oe(e,s,a);let u;return d&&e.length>0&&(s?n?u=c:o&&(u=l):u=k("canStartStopTransform")),!0!==t&&!d||void 0===u?Object(E.jsx)(f.a.Fragment,null,xe):Object(E.jsx)(p.EuiToolTip,{position:"top",content:u},Object(E.jsx)(f.a.Fragment,null,xe))},Te=(e,t)=>{const{canStartStopTransform:a}=Object(m.useContext)(w).capabilities,s=Object(S.g)(),[r,n]=Object(m.useState)(!1),[o,i]=Object(m.useState)([]),l=e=>{Array.isArray(e)&&(i(e),n(!0))};return{action:Object(m.useMemo)((()=>({name:a=>Object(E.jsx)(he,{items:[a],forceDisable:e,transformNodes:t}),available:e=>e.stats.state===O.o.STOPPED,enabled:e=>!Oe([e],a,t),description:xe,icon:"play",type:"icon",onClick:e=>l([e]),"data-test-subj":"transformActionStart"})),[a,e,t]),closeModal:()=>n(!1),isModalVisible:r,items:o,openModal:l,startAndCloseModal:()=>{n(!1),s(o.map((e=>({id:e.id}))))}}},ve=({closeModal:e,items:t,startAndCloseModal:a})=>{const s=t.length>1,r=i.i18n.translate("xpack.transform.transformList.bulkStartModalTitle",{defaultMessage:"Start {count} {count, plural, one {transform} other {transforms}}?",values:{count:t&&t.length}}),n=i.i18n.translate("xpack.transform.transformList.startModalTitle",{defaultMessage:"Start {transformId}?",values:{transformId:t[0]&&t[0].config.id}});return Object(E.jsx)(p.EuiConfirmModal,{"data-test-subj":"transformStartModal",title:!0===s?r:n,onCancel:e,onConfirm:a,cancelButtonText:i.i18n.translate("xpack.transform.transformList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.transform.transformList.startModalStartButton",{defaultMessage:"Start"}),defaultFocusedButton:p.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},Object(E.jsx)("p",null,i.i18n.translate("xpack.transform.transformList.startModalBody",{defaultMessage:"A transform increases search and indexing load in your cluster. If excessive load is experienced, stop the transform."})))},ye=i.i18n.translate("xpack.transform.transformList.stopActionNameText",{defaultMessage:"Stop"}),Me=({items:e,forceDisable:t})=>{const a=e.length>1,{canStartStopTransform:s}=Object(m.useContext)(w).capabilities,r=e.some((e=>e.stats.state===O.o.STOPPED));let n;return n=!0===a?i.i18n.translate("xpack.transform.transformList.stoppedTransformBulkToolTip",{defaultMessage:"One or more transforms are already stopped."}):i.i18n.translate("xpack.transform.transformList.stoppedTransformToolTip",{defaultMessage:"{transformId} is already stopped.",values:{transformId:e[0]&&e[0].config.id}}),!s||r?Object(E.jsx)(p.EuiToolTip,{position:"top",content:s?n:k("canStartStopTransform")},Object(E.jsx)(f.a.Fragment,null,ye)):Object(E.jsx)(f.a.Fragment,null,ye)},ke=e=>{const{canStartStopTransform:t}=Object(m.useContext)(w).capabilities,a=Object(S.h)(),[s,r]=Object(m.useState)(!1),[n,o]=Object(m.useState)([]),i=e=>{Array.isArray(e)&&(o(e),r(!0))},l=Object(m.useCallback)((e=>{r(!1),a(e.map((e=>({id:e.id,state:e.stats.state}))))}),[a]),c=Object(m.useCallback)((e=>a([{id:e.id,state:e.stats.state}])),[a]),d=Object(m.useMemo)((()=>({name:t=>Object(E.jsx)(Me,{items:[t],forceDisable:e}),available:e=>e.stats.state!==O.o.STOPPED,enabled:a=>!((e,t,a)=>{const s=e.some((e=>e.stats.state===O.o.STOPPED));return!0===a||!t||!0===s})([a],t,e),description:ye,icon:"stop",type:"icon",onClick:e=>{ce(e)?i([e]):c(e)},"data-test-subj":"transformActionStop"})),[t,c,e]);return{action:d,closeModal:()=>r(!1),openModal:i,isModalVisible:s,items:n,stopAndCloseModal:l}};var Se=a(57);const Ee=i.i18n.translate("xpack.transform.transformList.cloneActionNameText",{defaultMessage:"Clone"}),Fe=({disabled:e})=>e?Object(E.jsx)(p.EuiToolTip,{position:"top",content:k("canStartStopTransform")},Object(E.jsx)(f.a.Fragment,null,Ee)):Object(E.jsx)(f.a.Fragment,null,Ee);var Ce=a(24);const we=i.i18n.translate("xpack.transform.transformList.discoverActionNameText",{defaultMessage:"View in Discover"}),Ie=({dataViewExists:e,items:t})=>{const a=t.length>1,s=t[0],r=s.stats.state===O.o.STOPPED,n=Object($.n)(s),o=void 0===s.config.sync,l=r&&void 0===n&&!0===o;let c;return!0===a?c=i.i18n.translate("xpack.transform.transformList.discoverTransformBulkToolTip",{defaultMessage:"Links to Discover are not supported as a bulk action."}):e?l&&(c=i.i18n.translate("xpack.transform.transformList.discoverTransformToolTip",{defaultMessage:"The transform needs to be started before it's available in Discover."})):c=i.i18n.translate("xpack.transform.transformList.discoverTransformNoDataViewToolTip",{defaultMessage:"A Kibana data view is required for the destination index to be viewable in Discover"}),void 0!==c?Object(E.jsx)(p.EuiToolTip,{position:"top",content:c},Object(E.jsx)("span",{"data-test-subj":"transformDiscoverActionNameText disabled"},we)):Object(E.jsx)("span",{"data-test-subj":"transformDiscoverActionNameText enabled"},we)},De=e=>Array.isArray(e.config.dest.index)?e.config.dest.index.join(","):e.config.dest.index;var Pe=a(46),Le=a(50);const Ae=()=>{const{esTransformUpdate:e}=Object(_.a)();return Object(E.jsx)(p.EuiCallOut,null,Object(E.jsx)(p.EuiFlexGroup,null,Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiIcon,{type:"help"})),Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(p.EuiTextColor,{color:"subdued"},i.i18n.translate("xpack.transform.transformList.editFlyoutCalloutText",{defaultMessage:"This form allows you to update a transform. The list of properties that you can update is a subset of the list that you can define when you create a transform."})),Object(E.jsx)(p.EuiLink,{href:e,target:"_BLANK"},i.i18n.translate("xpack.transform.transformList.editFlyoutCalloutDocs",{defaultMessage:"View docs"})))))};var Be=a(21);const Ne=({dataTestSubj:e,errorMessages:t,helpText:a,label:s,onChange:r,placeholder:n,value:o})=>Object(E.jsx)(p.EuiFormRow,{label:s,helpText:a,isInvalid:t.length>0,error:t},Object(E.jsx)(p.EuiFieldText,{"data-test-subj":e,placeholder:n,isInvalid:t.length>0,value:o,onChange:e=>r(e.target.value),"aria-label":s})),Re=({editTransformFlyout:[e,t],dataViewId:a})=>{const{formFields:s,formSections:r}=e,[n,o]=Object(m.useState)([]),[l,c]=Object(m.useState)([]),d=n.length>0,u=Object(z.a)().data.dataViews,f=Object(R.a)();Object(m.useEffect)((function(){let e=!1;if(void 0!==a)return u.get(a).then((t=>{if(t){const a=t.fields.filter((e=>e.type===Be.KBN_FIELD_TYPES.DATE)).map((e=>e.name)).sort();e||o(a)}})),()=>{e=!0}}),[a,u]),Object(m.useEffect)((function(){let e=!1;return async function(){const t=await f.getEsIngestPipelines();!e&&Object(Pe.c)(t)&&c(t.map((({name:e})=>e)))}(),()=>{e=!0}}),[]);const b=Object(m.useMemo)((()=>Array.isArray(n)?n.map((e=>({text:e,value:e}))):[]),[n]);return Object(E.jsx)(p.EuiForm,null,Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutDescriptionInput",errorMessages:s.description.errorMessages,label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDescriptionLabel",{defaultMessage:"Description"}),onChange:e=>t({field:"description",value:e}),value:s.description.value}),Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutFrequencyInput",errorMessages:s.frequency.errorMessages,helpText:i.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyHelpText",{defaultMessage:"The interval to check for changes in source indices when the transformation runs continuously."}),label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyLabel",{defaultMessage:"Frequency"}),onChange:e=>t({field:"frequency",value:e}),placeholder:i.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyPlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:s.frequency.defaultValue}}),value:s.frequency.value}),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiSwitch,{name:"transformEditRetentionPolicySwitch",label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicySwitchLabel",{defaultMessage:"Retention policy"}),checked:r.retentionPolicy.enabled,onChange:e=>t({section:"retentionPolicy",enabled:e.target.checked}),disabled:!d,"data-test-subj":"transformEditRetentionPolicySwitch"}),r.retentionPolicy.enabled&&Object(E.jsx)("div",{"data-test-subj":"transformEditRetentionPolicyContent"},Object(E.jsx)(p.EuiSpacer,{size:"m"}),a?Object(E.jsx)(p.EuiFormRow,{label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldLabel",{defaultMessage:"Field"}),isInvalid:s.retentionPolicyField.errorMessages.length>0,error:s.retentionPolicyField.errorMessages,helpText:i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify out of date documents in the destination index."})},Object(E.jsx)(p.EuiSelect,{"aria-label":i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldSelectAriaLabel",{defaultMessage:"Date field to set retention policy"}),"data-test-subj":"transformEditFlyoutRetentionPolicyFieldSelect",options:b,value:s.retentionPolicyField.value,onChange:e=>t({field:"retentionPolicyField",value:e.target.value}),hasNoInitialSelection:!b.map((e=>e.text)).includes(s.retentionPolicyField.value)})):Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutRetentionPolicyFieldInput",errorMessages:s.retentionPolicyField.errorMessages,label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldLabel",{defaultMessage:"Field"}),onChange:e=>t({field:"retentionPolicyField",value:e}),value:s.retentionPolicyField.value}),Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutRetentionPolicyMaxAgeInput",errorMessages:s.retentionPolicyMaxAge.errorMessages,label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionMaxAgeFieldLabel",{defaultMessage:"Max age"}),onChange:e=>t({field:"retentionPolicyMaxAge",value:e}),value:s.retentionPolicyMaxAge.value})),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiAccordion,{"data-test-subj":"transformEditAccordionDestination",id:"transformEditAccordionDestination",buttonContent:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationButtonContent",{defaultMessage:"Destination configuration"}),paddingSize:"s"},Object(E.jsx)("div",{"data-test-subj":"transformEditAccordionDestinationContent"},Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutDestinationIndexInput",errorMessages:s.destinationIndex.errorMessages,label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationIndexLabel",{defaultMessage:"Destination index"}),onChange:e=>t({field:"destinationIndex",value:e}),value:s.destinationIndex.value}),Object(E.jsx)(p.EuiSpacer,{size:"m"}),Object(E.jsx)("div",{"data-test-subj":"transformEditAccordionIngestPipelineContent"},l?Object(E.jsx)(p.EuiFormRow,{label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationIngestPipelineLabel",{defaultMessage:"Ingest Pipeline"}),isInvalid:s.destinationIngestPipeline.errorMessages.length>0,error:s.destinationIngestPipeline.errorMessages},Object(E.jsx)(p.EuiComboBox,{"data-test-subj":"transformEditFlyoutDestinationIngestPipelineFieldSelect","aria-label":i.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormDestinationIngestPipelineFieldSelectAriaLabel",{defaultMessage:"Select an ingest pipeline"}),placeholder:i.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormDestinationIngestPipelineFieldSelectPlaceholder",{defaultMessage:"Select an ingest pipeline"}),singleSelection:{asPlainText:!0},options:l.map((e=>({label:e}))),selectedOptions:[{label:s.destinationIngestPipeline.value}],onChange:e=>{var a,s;return t({field:"destinationIngestPipeline",value:null!==(a=null===(s=e[0])||void 0===s?void 0:s.label)&&void 0!==a?a:""})}})):Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutDestinationIngestPipelineInput",errorMessages:s.destinationIngestPipeline.errorMessages,label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationIngestPipelineLabel",{defaultMessage:"Ingest Pipeline"}),onChange:e=>t({field:"destinationIngestPipeline",value:e}),value:s.destinationIngestPipeline.value})))),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiAccordion,{"data-test-subj":"transformEditAccordionAdvancedSettings",id:"transformEditAccordionAdvancedSettings",buttonContent:i.i18n.translate("xpack.transform.transformList.editFlyoutFormAdvancedSettingsButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(E.jsx)("div",{"data-test-subj":"transformEditAccordionAdvancedSettingsContent"},Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutDocsPerSecondInput",errorMessages:s.docsPerSecond.errorMessages,helpText:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDocsPerSecondHelptext",{defaultMessage:"To enable throttling, set a limit of documents to input per second."}),label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormDocsPerSecondLabel",{defaultMessage:"Documents per second"}),onChange:e=>t({field:"docsPerSecond",value:e}),value:s.docsPerSecond.value}),Object(E.jsx)(Ne,{dataTestSubj:"transformEditFlyoutMaxPageSearchSizeInput",errorMessages:s.maxPageSearchSize.errorMessages,helpText:i.i18n.translate("xpack.transform.transformList.editFlyoutFormMaxPageSearchSizeHelptext",{defaultMessage:"The initial page size to use for the composite aggregation for each checkpoint."}),label:i.i18n.translate("xpack.transform.transformList.editFlyoutFormMaxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"}),onChange:e=>t({field:"maxPageSearchSize",value:e}),value:s.maxPageSearchSize.value,placeholder:i.i18n.translate("xpack.transform.transformList.editFlyoutFormMaxPageSearchSizePlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:s.maxPageSearchSize.defaultValue}})}))))};var _e=a(17),Ve=a(75),ze=a(82);const Ue=i.i18n.translate("xpack.transform.transformList.editFlyoutFormNumberNotValidErrorMessage",{defaultMessage:"Value needs to be an integer above zero."}),qe=e=>!isNaN(e)&&Number.isInteger(+e)&&+e>0&&!(e+"").includes(".")?[]:[Ue],$e=i.i18n.translate("xpack.transform.transformList.editFlyoutFormNumberRange10To10000NotValidErrorMessage",{defaultMessage:"Value needs to be an integer between 10 and 10000."}),He=i.i18n.translate("xpack.transform.transformList.editFlyoutFormRequiredErrorMessage",{defaultMessage:"Required field."}),Ge=i.i18n.translate("xpack.transform.transformList.editFlyoutFormStringNotValidErrorMessage",{defaultMessage:"Value needs to be of type string."});function Ye(e,t){if("string"!=typeof e||null===e)return[Ge];const a=e.match(/[a-z]+|[^a-z]+/gi);if(null===a||Array.isArray(a)&&2!==a.length)return[Je];const s=+a[0],r=a[1];return isNaN(s)||!Number.isInteger(s)||0===s?[Je]:{number:s,timeUnit:r}}const Je=i.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyNotValidErrorMessage",{defaultMessage:"The frequency value is not valid."}),We=i.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyMaxAgeNotValidErrorMessage",{defaultMessage:"Invalid max age format. Minimum of 60s required."}),Ke={string:(e,t=!0)=>"string"!=typeof e?[Ge]:0!==e.length||t?[]:[He],frequency:e=>{const t=Ye(e);return Array.isArray(t)?t:Object(ze.b)(t)?[]:[Je]},integerAboveZero:qe,integerRange10To10000:e=>0===qe(e).length&&+e>=10&&+e<=1e4?[]:[$e],retentionPolicyMaxAge:e=>{const t=Ye(e);return Array.isArray(t)?t:Object(ze.c)(t)?[]:[We]}},Qe=(e,t,a,s)=>{const r=void 0!==(null==s?void 0:s.defaultValue)?s.defaultValue:"",n=Object(Ve.a)(a,t,void 0);return{formFieldName:e,configFieldName:t,defaultValue:r,dependsOn:[],errorMessages:[],isNullable:!1,isOptional:!0,validator:"string",value:null!=n?n.toString():"",valueParser:e=>e,...void 0!==s?{...s}:{}}},Ze=(e,t,a,s)=>{var r;return{formSectionName:e,configFieldName:t,defaultEnabled:null!==(r=null==s?void 0:s.defaultEnabled)&&void 0!==r&&r,enabled:null!=Object(Ve.a)(a,t,void 0)}},Xe=(e,t,a,s=!1)=>{const{formFields:r,formSections:n}=a,o=r[e],i=o.isNullable?null:o.defaultValue,l=void 0===o.section||n[o.section].enabled,c=""!==o.value?o.valueParser(o.value):i,d=Object(Ve.a)(t,o.configFieldName,i),u=!1===s?o.dependsOn.reduce(((e,s)=>Object(_e.merge)({...e},Xe(s,t,a,!0))),{}):{};return c===o.defaultValue&&c===d&&o.isOptional?{}:void 0===o.section||l?l&&(c!==d||s)?Object(Ve.b)(u,o.configFieldName,""===c&&o.isOptional?void 0:c):{}:Object(Ve.b)(u,n[o.section].configFieldName,null)},et=e=>({formFields:{description:Qe("description","description",e),frequency:Qe("frequency","frequency",e,{defaultValue:O.g,validator:"frequency"}),destinationIndex:Qe("destinationIndex","dest.index",e,{dependsOn:["destinationIngestPipeline"],isOptional:!1}),destinationIngestPipeline:Qe("destinationIngestPipeline","dest.pipeline",e,{dependsOn:["destinationIndex"],isOptional:!0}),docsPerSecond:Qe("docsPerSecond","settings.docs_per_second",e,{isNullable:!0,isOptional:!0,validator:"integerAboveZero",valueParser:e=>""===e?null:+e}),maxPageSearchSize:Qe("maxPageSearchSize","settings.max_page_search_size",e,{defaultValue:`${O.i}`,isNullable:!0,isOptional:!0,validator:"integerRange10To10000",valueParser:e=>+e}),retentionPolicyField:Qe("retentionPolicyField","retention_policy.time.field",e,{dependsOn:["retentionPolicyMaxAge"],isNullable:!1,isOptional:!0,section:"retentionPolicy"}),retentionPolicyMaxAge:Qe("retentionPolicyMaxAge","retention_policy.time.max_age",e,{dependsOn:["retentionPolicyField"],isNullable:!1,isOptional:!0,section:"retentionPolicy",validator:"retentionPolicyMaxAge"})},formSections:{retentionPolicy:Ze("retentionPolicy","retention_policy",e)},isFormTouched:!1,isFormValid:!0}),tt=(e,t)=>({...e,errorMessages:e.isOptional&&"string"==typeof t&&0===t.length?[]:Ke[e.validator](t,e.isOptional),value:t}),at=(e,t)=>({...e,enabled:t}),st=e=>Object.values(e).map((e=>e.value)),rt=e=>Object.values(e).map((e=>e.enabled)),nt=({closeFlyout:e,config:t,dataViewId:a})=>{const s=Object(R.a)(),r=Object(z.b)(),[n,o]=(e=>Object(m.useReducer)((e=>{const t=et(e),a=st(t.formFields),s=rt(t.formSections);return(e,t)=>{const r=function(e){return Object(v.b)(e,["field"])}(t)?{...e.formFields,[t.field]:tt(e.formFields[t.field],t.value)}:e.formFields,n=function(e){return Object(v.b)(e,["section"])}(t)?{...e.formSections,[t.section]:at(e.formSections[t.section],t.enabled)}:e.formSections;return{...e,formFields:r,formSections:n,isFormTouched:!Object(_e.isEqual)(a,st(r))||!Object(_e.isEqual)(s,rt(n)),isFormValid:(o=r,Object.keys(o).reduce(((e,t)=>e&&0===o[t].errorMessages.length),!0))};var o}})(e),et(e)))(t),[l,c]=Object(m.useState)(void 0),d=!n.isFormValid||!n.isFormTouched;return Object(E.jsx)(p.EuiFlyout,{onClose:e,hideCloseButton:!0,"aria-labelledby":"transformEditFlyoutTitle","data-test-subj":"transformEditFlyout"},Object(E.jsx)(p.EuiFlyoutHeader,{hasBorder:!0},Object(E.jsx)(p.EuiTitle,{size:"m"},Object(E.jsx)("h2",{id:"transformEditFlyoutTitle"},i.i18n.translate("xpack.transform.transformList.editFlyoutTitle",{defaultMessage:"Edit {transformId}",values:{transformId:t.id}})))),ce({config:t})?Object(E.jsx)(de,{count:1,action:i.i18n.translate("xpack.transform.transformList.editManagedTransformsDescription",{defaultMessage:"editing"})}):null,Object(E.jsx)(p.EuiFlyoutBody,{banner:Object(E.jsx)(Ae,null)},Object(E.jsx)(Re,{editTransformFlyout:[n,o],dataViewId:a}),void 0!==l&&Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiSpacer,{size:"m"}),Object(E.jsx)(p.EuiCallOut,{title:i.i18n.translate("xpack.transform.transformList.editTransformGenericErrorMessage",{defaultMessage:"An error occurred calling the API endpoint to update transforms."}),color:"danger",iconType:"alert"},Object(E.jsx)("p",null,l)))),Object(E.jsx)(p.EuiFlyoutFooter,null,Object(E.jsx)(p.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},i.i18n.translate("xpack.transform.transformList.editFlyoutCancelButtonText",{defaultMessage:"Cancel"}))),Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiButton,{"data-test-subj":"transformEditFlyoutUpdateButton",onClick:async function(){c(void 0);const a=((e,t)=>Object.keys(t.formFields).reduce(((a,s)=>Object(_e.merge)({...a},Xe(s,e,t))),{}))(t,n),o=t.id,l=await s.updateTransform(o,a);Object(Pe.m)(l)?(r.addSuccess(i.i18n.translate("xpack.transform.transformList.editTransformSuccessMessage",{defaultMessage:"Transform {transformId} updated.",values:{transformId:o}})),e(),$.E.next($.c.REFRESH)):c(Object(Le.a)(l))},fill:!0,isDisabled:d},i.i18n.translate("xpack.transform.transformList.editFlyoutUpdateButtonText",{defaultMessage:"Update"}))))))},ot=i.i18n.translate("xpack.transform.transformList.editActionNameText",{defaultMessage:"Edit"}),it=()=>{const{canCreateTransform:e}=Object(m.useContext)(w).capabilities;return e?Object(E.jsx)(f.a.Fragment,null,ot):Object(E.jsx)(p.EuiToolTip,{position:"top",content:k("canStartStopTransform")},Object(E.jsx)(f.a.Fragment,null,ot))},lt=i.i18n.translate("xpack.transform.transformList.createAlertRuleNameText",{defaultMessage:"Create alert rule"}),ct=({disabled:e})=>e?Object(E.jsx)(p.EuiToolTip,{position:"top",content:k("canCreateTransformAlerts")},Object(E.jsx)(f.a.Fragment,null,lt)):Object(E.jsx)(f.a.Fragment,null,lt);var dt=a(63);const ut=({closeModal:e,items:t,stopAndCloseModal:a})=>{const s=Object(m.useMemo)((()=>t.some((e=>ce(e)))),[t]),r=t.length>1,n=i.i18n.translate("xpack.transform.transformList.bulkStopModalTitle",{defaultMessage:"Stop {count} {count, plural, one {transform} other {transforms}}?",values:{count:t&&t.length}}),o=i.i18n.translate("xpack.transform.transformList.stopModalTitle",{defaultMessage:"Stop {transformId}?",values:{transformId:t[0]&&t[0].config.id}});return Object(E.jsx)(p.EuiConfirmModal,{"data-test-subj":"transformStopModal",title:!0===r?n:o,onCancel:e,onConfirm:()=>a(t),cancelButtonText:i.i18n.translate("xpack.transform.transformList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.transform.transformList.startModalStopButton",{defaultMessage:"Stop"}),defaultFocusedButton:p.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},s?Object(E.jsx)(de,{count:t.length,action:i.i18n.translate("xpack.transform.transformList.stopManagedTransformsDescription",{defaultMessage:"stopping"})}):null)},mt=({forceDisable:e,transformNodes:t})=>{const a=((e,t)=>{const a=Object(j.useHistory)(),s=Object(z.a)().data.dataViews,r=Object(z.b)(),{getDataViewIdByTitle:n,loadDataViews:o}=J(void 0),{canCreateTransform:l}=Object(m.useContext)(w).capabilities,c=Object(m.useCallback)((async e=>{try{await o(s);const t=Array.isArray(e.config.source.index)?e.config.source.index.join(","):e.config.source.index,l=n(t);void 0===l?r.addDanger(i.i18n.translate("xpack.transform.clone.noDataViewErrorPromptText",{defaultMessage:"Unable to clone the transform {transformId}. No data view exists for {dataViewTitle}.",values:{dataViewTitle:t,transformId:e.id}})):a.push(`/${T.a.CLONE_TRANSFORM}/${e.id}?dataViewId=${l}`)}catch(e){r.addError(e,{title:i.i18n.translate("xpack.transform.clone.errorPromptText",{defaultMessage:"An error occurred checking if source data view exists"})})}}),[a,s,r,o,n]);return{action:Object(m.useMemo)((()=>({name:e=>Object(E.jsx)(Fe,{disabled:!l}),enabled:()=>l&&!e&&t>0,description:Ee,icon:"copy",type:"icon",onClick:c,"data-test-subj":"transformActionClone"})),[l,e,c,t])}})(e,t),s=le(e),r=(e=>{var t;const{share:a,data:{dataViews:s},application:{capabilities:r}}=Object(z.a)(),n=!(null===(t=r.discover)||void 0===t||!t.show),{getDataViewIdByTitle:o,loadDataViews:i}=J(void 0),[l,c]=Object(m.useState)(!1);Object(m.useEffect)((()=>{!async function(){await i(s),c(!0)}()}),[i,s]);const d=Object(m.useCallback)((e=>{const t=a.url.locators.get(Ce.DISCOVER_APP_LOCATOR);if(!t)return;const s=De(e),r=o(s);t.navigateSync({indexPatternId:r})}),[o,a]),u=Object(m.useCallback)((e=>{const t=De(e);return void 0!==o(t)}),[o]);return{action:Object(m.useMemo)((()=>({name:e=>Object(E.jsx)(Ie,{items:[e],dataViewExists:u(e)}),available:()=>n,enabled:t=>l&&!((e,t,a)=>{if(1!==e.length)return!0;const s=e[0],r=s.stats.state===O.o.STOPPED,n=Object($.n)(s),o=void 0===s.config.sync;return!0===t||!1===a||1==(!0===r&&void 0===n&&!0===o)})([t],e,u(t)),description:we,icon:"visTable",type:"icon",onClick:d,"data-test-subj":"transformActionDiscover"})),[e,u,l,n,d])}})(e),n=((e,t)=>{const{canCreateTransform:a}=Object(m.useContext)(w).capabilities,[s,r]=Object(m.useState)(),[n,o]=Object(m.useState)(!1),[l,c]=Object(m.useState)(),{getDataViewIdByTitle:d}=J(void 0),u=Object(z.b)(),f=Object(z.a)().data.dataViews,b=Object(m.useCallback)((async e=>{try{const t=Array.isArray(e.config.source.index)?e.config.source.index.join(","):e.config.source.index,a=d(t);void 0===a&&u.addWarning(i.i18n.translate("xpack.transform.edit.noDataViewErrorPromptText",{defaultMessage:"Unable to get the data view for the transform {transformId}. No data view exists for {dataViewTitle}.",values:{dataViewTitle:t,transformId:e.id}})),c(a),r(e.config),o(!0)}catch(e){u.addError(e,{title:i.i18n.translate("xpack.transform.edit.errorPromptText",{defaultMessage:"An error occurred checking if source data view exists"})})}}),[f,u,d]);return{action:Object(m.useMemo)((()=>({name:()=>Object(E.jsx)(it,null),enabled:()=>a&&!e&&t>0,description:ot,icon:"pencil",type:"icon",onClick:e=>b(e),"data-test-subj":"transformActionEdit"})),[a,b,e,t]),config:s,closeFlyout:()=>o(!1),isFlyoutVisible:n,dataViewId:l}})(e,t),o=pe(e),l=Te(e,t),c=ke(e),d=(e=>{const{canCreateTransformAlerts:t}=Object(m.useContext)(w).capabilities,{setCreateAlertRule:a}=Object(dt.e)(),s=Object(m.useCallback)((e=>{a(e.id)}),[a]);return{action:Object(m.useMemo)((()=>({name:e=>Object(E.jsx)(ct,{disabled:!t}),available:e=>Object(Se.a)(e.config),enabled:()=>t&&!e,description:lt,type:"icon",icon:"bell",onClick:s,"data-test-subj":"transformActionCreateAlertRule"})),[t,e,s])}})(e);return{modals:Object(E.jsx)(f.a.Fragment,null,o.isModalVisible&&Object(E.jsx)(ge,o),l.isModalVisible&&Object(E.jsx)(ve,l),c.isModalVisible&&Object(E.jsx)(ut,c),n.config&&n.isFlyoutVisible&&Object(E.jsx)(nt,{closeFlyout:n.closeFlyout,config:n.config,dataViewId:n.dataViewId}),s.isModalVisible&&Object(E.jsx)(ue,s)),actions:[r.action,d.action,l.action,c.action,n.action,a.action,s.action,o.action]}},ft={aborting:"warning",failed:"danger",indexing:"primary",started:"primary",stopped:"hollow",stopping:"hollow",waiting:"hollow"},bt=(e,t)=>{const a=ft[e];return e===O.o.FAILED&&void 0!==t?Object(E.jsx)(p.EuiToolTip,{content:t},Object(E.jsx)(p.EuiBadge,{className:"transform__TaskStateBadge",color:a},e)):Object(E.jsx)(p.EuiBadge,{className:"transform__TaskStateBadge",color:a},e)};var jt=a(28),pt=a.n(jt);const gt=({section:e})=>0===e.items.length?null:Object(E.jsx)(p.EuiPanel,null,Object(E.jsx)(p.EuiTitle,{size:"xs"},Object(E.jsx)("span",null,e.title)),Object(E.jsx)(p.EuiDescriptionList,{compressed:!0,type:"column",listItems:e.items})),xt=({sections:e})=>Object(E.jsx)("div",{"data-test-subj":"transformDetailsTabContent"},Object(E.jsx)(p.EuiFlexGroup,null,Object(E.jsx)(p.EuiFlexItem,{style:{width:"50%"}},e.filter((e=>"left"===e.position)).map((e=>Object(E.jsx)(m.Fragment,{key:e.title},Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(gt,{section:e}))))),Object(E.jsx)(p.EuiFlexItem,{style:{width:"50%"}},e.filter((e=>"right"===e.position)).map((e=>Object(E.jsx)(m.Fragment,{key:e.title},Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(gt,{section:e}))))))),Ot=({json:e})=>Object(E.jsx)("div",{"data-test-subj":"transformJsonTabContent"},Object(E.jsx)(p.EuiFlexGroup,null,Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(p.EuiCodeBlock,{"aria-label":i.i18n.translate("xpack.transform.transformList.transformDetails.expandedRowJsonPane",{defaultMessage:"JSON of transform configuration"}),fontSize:"s",language:"json",paddingSize:"s",style:{width:"100%"},isCopyable:!0},"value=",JSON.stringify(e,null,2))),Object(E.jsx)(p.EuiFlexItem,{grow:!1}," ")));var ht=a(38),Tt=a(39);const[vt,yt,Mt]=["info","warning","error"],kt=({message:e,showTooltip:t=!1})=>{if(void 0===e)return Object(E.jsx)("span",null);let a="primary";const s="alert";return e.level===vt?a="primary":e.level===yt?a="warning":e.level===Mt&&(a="danger"),t?Object(E.jsx)(p.EuiToolTip,{position:"bottom",content:e.text},Object(E.jsx)(p.EuiIcon,{type:s,color:a})):Object(E.jsx)(p.EuiIcon,{type:s,color:a})},St=({transformId:e})=>{const[t,a]=Object(m.useState)([]),[s,r]=Object(m.useState)(!1),[n,o]=Object(m.useState)(""),[l,c]=Object(m.useState)(0),[d,u]=Object(m.useState)(10),f=Object(R.a)();Object($.F)({onRefresh:(()=>{let t=0;return async function s(){if(t++,t>1)return;r(!0);const n=await f.getTransformAuditMessages(e);if(!Object(Pe.h)(n))return r(!1),void o(i.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.errorMessage",{defaultMessage:"Messages could not be loaded"}));r(!1),a(n),t--,t>0&&(t=0,s())}})()});const b=[{name:"",render:e=>Object(E.jsx)(kt,{message:e}),width:Tt.euiLightVars.euiSizeXL},{name:i.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.timeLabel",{defaultMessage:"Time"}),render:e=>Object(ht.formatDate)(e.timestamp,"YYYY-MM-DD HH:mm:ss")},{field:"node_name",name:i.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.nodeLabel",{defaultMessage:"Node"})},{field:"message",name:i.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.messageLabel",{defaultMessage:"Message"}),width:"50%"}],{pageOfMessages:j,totalItemCount:g}=(({index:e,size:a})=>{const s=t,r=s.length,n=e*a;return{pageOfMessages:s.slice(n,n+a),totalItemCount:r}})({index:l,size:d}),x={pageIndex:l,pageSize:d,totalItemCount:g,pageSizeOptions:[10,20,50],showPerPageOptions:!0};return Object(E.jsx)("div",{"data-test-subj":"transformMessagesTabContent"},Object(E.jsx)(p.EuiSpacer,{size:"s"}),Object(E.jsx)(p.EuiBasicTable,{className:"transform__TransformTable__messagesPaneTable",items:j,columns:b,compressed:!0,loading:s,error:n,pagination:x,onChange:({page:e={index:0,size:10}})=>{const{index:t,size:a}=e;c(t),u(a)}}))};var Et=a(80),Ft=a.n(Et),Ct=a(72),wt=a(84);const It=({transformConfig:e})=>{const{ml:{DataGrid:t}}=Object(z.a)(),a=Object(z.b)(),{searchQuery:s,validationStatus:r,previewRequest:n,runtimeMappings:o}=Object(m.useMemo)((()=>Object(wt.d)(Object(wt.f)({}),e)),[e]),i=Object(m.useMemo)((()=>Object($.k)(s)),[s]),l=Array.isArray(e.source.index)?e.source.index.join(","):e.source.index,c=Object(Ct.a)(l,i,r,n,o);return Object(E.jsx)(t,Ft()({},c,{dataTestSubj:"transformPivotPreview",toastNotifications:a}))},Dt=({item:e,onAlertEdit:t})=>{var a,s,r;const{ml:{formatHumanReadableDateTimeSeconds:n}}=Object(z.a)(),o={...e.stats};delete o.stats,delete o.checkpointing;const l=[];l.push({title:"ID",description:e.id},{title:"state",description:e.stats.state}),void 0!==e.stats.node&&l.push({title:"node.name",description:e.stats.node.name});const c={title:"State",items:l,position:"right"},d={title:"General",items:[{title:"transform_id",description:e.id},{title:"transform_version",description:e.config.version},{title:"description",description:null!==(a=e.config.description)&&void 0!==a?a:""},{title:"create_time",description:null!==(s=n(1e3*pt()(e.config.create_time).unix()))&&void 0!==s?s:""},{title:"source_index",description:Array.isArray(e.config.source.index)?e.config.source.index[0]:e.config.source.index},{title:"destination_index",description:Array.isArray(e.config.dest.index)?e.config.dest.index[0]:e.config.dest.index}],position:"left"},u=[];void 0!==e.stats.checkpointing.last&&(u.push({title:"last.checkpoint",description:e.stats.checkpointing.last.checkpoint}),void 0!==e.stats.checkpointing.last.timestamp_millis&&(u.push({title:"last.timestamp",description:n(e.stats.checkpointing.last.timestamp_millis)}),u.push({title:"last.timestamp_millis",description:e.stats.checkpointing.last.timestamp_millis}))),void 0!==e.stats.checkpointing.next&&(u.push({title:"next.checkpoint",description:e.stats.checkpointing.next.checkpoint}),void 0!==e.stats.checkpointing.next.checkpoint_progress&&(u.push({title:"next.checkpoint_progress.total_docs",description:e.stats.checkpointing.next.checkpoint_progress.total_docs}),u.push({title:"next.checkpoint_progress.docs_remaining",description:e.stats.checkpointing.next.checkpoint_progress.docs_remaining}),u.push({title:"next.checkpoint_progress.percent_complete",description:e.stats.checkpointing.next.checkpoint_progress.percent_complete})));const m=null===(r=e.alerting_rules)||void 0===r?void 0:r.map((e=>({title:Object(E.jsx)(p.EuiButtonEmpty,{iconType:"documentEdit",iconSide:"left",onClick:()=>{t(e)},flush:"left",size:"xs",iconSize:"s"},e.name),description:e.executionStatus.status}))),f={title:"Checkpointing",items:u,position:"right"},b={title:i.i18n.translate("xpack.transform.transformList.transformDetails.alertRulesTitle",{defaultMessage:"Alert rules"}),items:m,position:"right"},j={title:"Stats",items:Object.entries(e.stats.stats).map((e=>{return{title:e[0].toString(),description:(t=e[1],"object"==typeof t?JSON.stringify(t):t.toString())};var t})),position:"left"},g=function(e){let t=0,a=0;if(0===e.length)return t;for(let s=0;s<e.length;s++)a=e.charCodeAt(s),t=(t<<5)-t+a,t|=0;return t<0?-2*t:t}(e.id),x=[{id:`transform-details-tab-${g}`,"data-test-subj":"transformDetailsTab",name:i.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformDetailsLabel",{defaultMessage:"Details"}),content:Object(E.jsx)(xt,{sections:[d,c,f,...b.items?[b]:[]]})},{id:`transform-stats-tab-${g}`,"data-test-subj":"transformStatsTab",name:i.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformStatsLabel",{defaultMessage:"Stats"}),content:Object(E.jsx)(xt,{sections:[j]})},{id:`transform-json-tab-${g}`,"data-test-subj":"transformJsonTab",name:"JSON",content:Object(E.jsx)(Ot,{json:e.config})},{id:`transform-messages-tab-${g}`,"data-test-subj":"transformMessagesTab",name:i.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformMessagesLabel",{defaultMessage:"Messages"}),content:Object(E.jsx)(St,{transformId:e.id})},{id:`transform-preview-tab-${g}`,"data-test-subj":"transformPreviewTab",name:i.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformPreviewLabel",{defaultMessage:"Preview"}),content:Object(E.jsx)(It,{transformConfig:e.config})}];return Object(E.jsx)(p.EuiTabbedContent,{size:"s",tabs:x,initialSelectedTab:x[0],onTabClick:()=>{},expand:!1,style:{width:"100%"},"data-test-subj":"transformExpandedRowTabbedContent"})},Pt=[{type:"field_value_selection",field:"state.state",name:i.i18n.translate("xpack.transform.statusFilter",{defaultMessage:"Status"}),multiSelect:"or",options:Object.values(O.o).map((e=>({value:e,name:e,view:bt(e)})))},{type:"field_value_selection",field:"mode",name:i.i18n.translate("xpack.transform.modeFilter",{defaultMessage:"Mode"}),multiSelect:!1,options:Object.values(O.m).map((e=>({value:e,name:e,view:Object(E.jsx)(p.EuiBadge,{className:"transform__TaskModeBadge",color:"hollow"},e)})))}];function Lt(e,t){return"string"==typeof e&&"string"==typeof t&&null===e.toLowerCase().match(t.toLowerCase())==0}const At=[10,25,50],Bt=({onCreateTransform:e,transformNodes:t,transforms:a,transformsLoading:s})=>{var r,n,o;const[l,c]=Object(m.useState)(!1),{refresh:d}=Object($.F)({isLoading:c}),{setEditAlertRule:u}=Object(dt.e)(),[b,j]=Object(m.useState)(),[x,h]=Object(m.useState)([]),[T,v]=Object(m.useState)([]),[y,M]=Object(m.useState)(!1),k=Te(!1,t),S=le(!1),F=pe(!1),C=ke(!1),{capabilities:I}=Object(m.useContext)(w),D=!I.canCreateTransform||!I.canPreviewTransform||!I.canStartStopTransform,{sorting:P,pagination:L,onTableChange:A}=function(e,t){const[a,s]=Object(m.useState)({pageIndex:0,pageSize:10,totalItemCount:0,showPerPageOptions:!0,sortField:e,sortDirection:"asc"}),{pageIndex:r,pageSize:n,sortField:o,sortDirection:i}=a;return{onTableChange:({page:t={index:0,size:10},sort:r={field:e,direction:"asc"}})=>{const{index:n,size:o}=t,{field:i,direction:l}=r;s({...a,pageIndex:n,pageSize:o,sortField:i,sortDirection:l})},pagination:{pageIndex:r,pageSize:n,totalItemCount:t.length,pageSizeOptions:At},sorting:{sort:{field:o,direction:i}}}}($.e.ID,a),{columns:B,modals:N}=((e,t,a,s)=>{const{actions:r,modals:n}=mt({forceDisable:s.length>0,transformNodes:a});return{columns:[{name:Object(E.jsx)(p.EuiScreenReaderOnly,null,Object(E.jsx)("p",null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.showDetailsColumn.screenReaderDescription",defaultMessage:"This column contains clickable controls for showing more details on each transform"}))),align:p.RIGHT_ALIGNMENT,width:"40px",isExpander:!0,render:a=>Object(E.jsx)(p.EuiButtonIcon,{onClick:()=>function(a){const s=e.indexOf(a.config.id);-1!==s?(e.splice(s,1),t([...e])):e.push(a.config.id),t([...e])}(a),"aria-label":e.includes(a.config.id)?i.i18n.translate("xpack.transform.transformList.rowCollapse",{defaultMessage:"Hide details for {transformId}",values:{transformId:a.config.id}}):i.i18n.translate("xpack.transform.transformList.rowExpand",{defaultMessage:"Show details for {transformId}",values:{transformId:a.config.id}}),iconType:e.includes(a.config.id)?"arrowUp":"arrowDown","data-test-subj":"transformListRowDetailsToggle"})},{field:$.e.ID,"data-test-subj":"transformListColumnId",name:"ID",sortable:!0,truncateText:!0,scope:"row",render:(e,t)=>ce(t)?Object(E.jsx)(f.a.Fragment,null,e," ",Object(E.jsx)(p.EuiToolTip,{content:i.i18n.translate("xpack.transform.transformList.managedBadgeTooltip",{defaultMessage:"This transform is preconfigured and managed by Elastic; other parts of the product might have might have dependencies on its behavior."})},Object(E.jsx)(p.EuiBadge,{color:"hollow","data-test-subj":"transformListRowIsManagedBadge"},i.i18n.translate("xpack.transform.transformList.managedBadgeLabel",{defaultMessage:"Managed"})))):e},{id:"alertRule",name:Object(E.jsx)(p.EuiScreenReaderOnly,null,Object(E.jsx)("p",null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.alertingRules.screenReaderDescription",defaultMessage:"This column displays an icon when there are alert rules associated with a transform"}))),width:"30px",render:e=>Array.isArray(e.alerting_rules)?Object(E.jsx)(p.EuiToolTip,{position:"bottom",content:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.alertingRules.tooltipContent",defaultMessage:"Transform has {rulesCount} associated alert {rulesCount, plural, one { rule} other { rules}}",values:{rulesCount:e.alerting_rules.length}})},Object(E.jsx)(p.EuiIcon,{type:"bell"})):Object(E.jsx)("span",null)},{field:$.e.DESCRIPTION,"data-test-subj":"transformListColumnDescription",name:i.i18n.translate("xpack.transform.description",{defaultMessage:"Description"}),sortable:!0,truncateText:!0},{name:i.i18n.translate("xpack.transform.type",{defaultMessage:"Type"}),"data-test-subj":"transformListColumnType",sortable:e=>e.mode,truncateText:!0,render(e){let t=i.i18n.translate("xpack.transform.type.unknown",{defaultMessage:"unknown"});return!0===Object(Se.c)(e.config)&&(t=i.i18n.translate("xpack.transform.type.pivot",{defaultMessage:"pivot"})),!0===Object(Se.b)(e.config)&&(t=i.i18n.translate("xpack.transform.type.latest",{defaultMessage:"latest"})),Object(E.jsx)(p.EuiBadge,{color:"hollow"},t)},width:"100px"},{name:i.i18n.translate("xpack.transform.status",{defaultMessage:"Status"}),"data-test-subj":"transformListColumnStatus",sortable:e=>e.stats.state,truncateText:!0,render:e=>bt(e.stats.state,e.stats.reason),width:"100px"},{name:i.i18n.translate("xpack.transform.mode",{defaultMessage:"Mode"}),"data-test-subj":"transformListColumnMode",sortable:e=>e.mode,truncateText:!0,render(e){const t=e.mode;return Object(E.jsx)(p.EuiBadge,{color:"hollow"},t)},width:"100px"},{name:i.i18n.translate("xpack.transform.progress",{defaultMessage:"Progress"}),"data-test-subj":"transformListColumnProgress",sortable:e=>Object($.n)(e)||0,truncateText:!0,render(e){const t=Object($.n)(e),a=void 0===e.config.sync;return void 0===t&&!0===a?null:Object(E.jsx)(p.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},a&&Object(E.jsx)(m.Fragment,null,Object(E.jsx)(p.EuiFlexItem,{style:{width:"40px"},grow:!1},Object(E.jsx)(p.EuiProgress,{value:t,max:100,color:"primary",size:"m","data-test-subj":"transformListProgress"},t,"%")),Object(E.jsx)(p.EuiFlexItem,{style:{width:"35px"},grow:!1},Object(E.jsx)(p.EuiText,{size:"xs"},`${t}%`))),!a&&Object(E.jsx)(m.Fragment,null,Object(E.jsx)(p.EuiFlexItem,{style:{width:"40px"},grow:!1},e.stats.state!==O.o.STOPPED&&e.stats.state!==O.o.WAITING&&e.stats.state!==O.o.FAILED&&Object(E.jsx)(p.EuiProgress,{color:"primary",size:"m"}),(e.stats.state===O.o.STOPPED||e.stats.state===O.o.WAITING||e.stats.state===O.o.FAILED)&&Object(E.jsx)(p.EuiProgress,{value:0,max:100,color:"primary",size:"m"})),Object(E.jsx)(p.EuiFlexItem,{style:{width:"35px"},grow:!1}," ")))},width:"100px"},{name:i.i18n.translate("xpack.transform.tableActionLabel",{defaultMessage:"Actions"}),actions:r,width:"80px"}],modals:n}})(x,h,t,T),R=null!=b&&b.error?null==b?void 0:b.error.message:void 0,_=null!==(r=null==b||null===(n=b.query)||void 0===n||null===(o=n.ast)||void 0===o?void 0:o.clauses)&&void 0!==r?r:[],V=_.length>0?((e,t)=>{const a=e.reduce(((e,t)=>(e[t.id]={transform:t,count:0},e)),{});return t.forEach((t=>{const s="must"===t.match;let r=[];r="term"===t.type?!0===s?e.filter((e=>Lt(e.id,t.value)===s||Lt(e.config.description,t.value)===s)):e.filter((e=>Lt(e.id,t.value)===s&&Lt(e.config.description,t.value)===s)):"is"!==t.type&&Array.isArray(t.value)?e.filter((e=>t.value.includes(e.stats.state))):e.filter((e=>{if("field"===t.type&&"mode"===t.field)return e.mode===t.value;if("field"===t.type&&"type"===t.field){if(t.value===O.k.PIVOT)return Object(Se.c)(e.config);if(t.value===O.k.LATEST)return Object(Se.b)(e.config)}return!1})),r.forEach((e=>a[e.id].count++))})),Object.values(a).filter((e=>(e&&e.count)>=t.length)).map((e=>e.transform))})(a,_):a;if(0===a.length&&0===t)return null;if(0===a.length)return Object(E.jsx)(p.EuiFlexGroup,{justifyContent:"spaceAround"},Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(E.jsx)(p.EuiEmptyPrompt,{title:Object(E.jsx)("h2",null,i.i18n.translate("xpack.transform.list.emptyPromptTitle",{defaultMessage:"No transforms found"})),actions:[Object(E.jsx)(p.EuiButton,{color:"primary",fill:!0,onClick:e,isDisabled:D,"data-test-subj":"transformCreateFirstButton"},i.i18n.translate("xpack.transform.list.emptyPromptButtonText",{defaultMessage:"Create your first transform"}))],"data-test-subj":"transformNoTransformsFound"}))));const z=function(e,t,a){return e.reduce(((e,s)=>{const r=t.find((e=>e.config.id===s));return void 0!==r&&(e[s]=Object(E.jsx)(Dt,{item:r,onAlertEdit:a})),e}),{})}(x,a,u),U=[Object(E.jsx)("div",{key:"startAction",className:"transform__BulkActionItem"},Object(E.jsx)(p.EuiButtonEmpty,{onClick:()=>k.openModal(T)},Object(E.jsx)(he,{items:T,transformNodes:t}))),Object(E.jsx)("div",{key:"stopAction",className:"transform__BulkActionItem"},Object(E.jsx)(p.EuiButtonEmpty,{onClick:()=>{C.openModal(T)}},Object(E.jsx)(Me,{items:T}))),Object(E.jsx)("div",{key:"resetAction",className:"transform__BulkActionItem"},Object(E.jsx)(p.EuiButtonEmpty,{onClick:()=>{F.openModal(T)}},Object(E.jsx)(je,{canResetTransform:I.canResetTransform,disabled:be(T,!1),isBulkAction:!0}))),Object(E.jsx)("div",{key:"deleteAction",className:"transform__BulkActionItem"},Object(E.jsx)(p.EuiButtonEmpty,{onClick:()=>S.openModal(T)},Object(E.jsx)(ie,{canDeleteTransform:I.canDeleteTransform,disabled:oe(T,!1),isBulkAction:!0})))],q=Object(E.jsx)(p.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceAround"},Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(se,{onClick:d,isLoading:l})),Object(E.jsx)(p.EuiFlexItem,null,Object(E.jsx)(ae,{onClick:e,transformNodes:t}))),H={toolsLeft:T.length>0?(()=>{const e=Object(E.jsx)(p.EuiButtonIcon,{size:"s",iconType:"gear",color:"text",onClick:()=>{M(!0)},"aria-label":i.i18n.translate("xpack.transform.multiTransformActionsMenu.managementActionsAriaLabel",{defaultMessage:"Management actions"})}),t=Object(E.jsx)(p.EuiPopover,{key:"bulkActionIcon",id:"transformBulkActionsMenu",button:e,isOpen:y,closePopover:()=>M(!1),panelPaddingSize:"s",anchorPosition:"rightUp"},U);return[Object(E.jsx)(p.EuiTitle,{key:"selectedText",size:"s"},Object(E.jsx)("h3",null,i.i18n.translate("xpack.transform.multiTransformActionsMenu.transformsCount",{defaultMessage:"{count} {count, plural, one {transform} other {transforms}} selected",values:{count:T.length}}))),Object(E.jsx)("div",{key:"bulkActionsBorder",className:"transform__BulkActionsBorder"}),t]})():void 0,toolsRight:q,onChange:j,box:{incremental:!0},filters:Pt},G={onSelectionChange:e=>v(e)};return Object(E.jsx)("div",{"data-test-subj":"transformListTableContainer"},k.isModalVisible&&Object(E.jsx)(ve,k),S.isModalVisible&&Object(E.jsx)(ue,S),F.isModalVisible&&Object(E.jsx)(ge,F),C.isModalVisible&&Object(E.jsx)(ut,C),N,Object(E.jsx)(p.EuiInMemoryTable,{allowNeutralSort:!1,className:"transform__TransformTable",columns:B,error:R,hasActions:!1,isExpandable:!0,isSelectable:!1,items:V,itemId:$.e.ID,itemIdToExpandedRowMap:z,loading:l||s,onTableChange:A,pagination:L,rowProps:e=>({"data-test-subj":`transformListRow row-${e.id}`}),selection:G,sorting:P,search:H,"data-test-subj":"transformListTable "+(l||s?"loading":"loaded")}))},Nt=({stat:e})=>Object(E.jsx)("span",{className:"transformStat"},Object(E.jsx)("span",null,e.label),": ",Object(E.jsx)("strong",null,e.value)),Rt=({stats:e,dataTestSub:t})=>{const a=Object.keys(e).map((t=>e[t]));return Object(E.jsx)("div",{className:"transformStatsBar","data-test-subj":t},a.filter((e=>e.show)).map((e=>Object(E.jsx)(Nt,{key:e.label,stat:e}))))},_t=({transformNodes:e,transformsList:t})=>{const{esNodeRoles:a}=Object(_.a)(),s=function(e,t){const a={total:{label:i.i18n.translate("xpack.transform.statsBar.totalTransformsLabel",{defaultMessage:"Total transforms"}),value:0,show:!0},batch:{label:i.i18n.translate("xpack.transform.statsBar.batchTransformsLabel",{defaultMessage:"Batch"}),value:0,show:!0},continuous:{label:i.i18n.translate("xpack.transform.statsBar.continuousTransformsLabel",{defaultMessage:"Continuous"}),value:0,show:!0},failed:{label:i.i18n.translate("xpack.transform.statsBar.failedTransformsLabel",{defaultMessage:"Failed"}),value:0,show:!1},started:{label:i.i18n.translate("xpack.transform.statsBar.startedTransformsLabel",{defaultMessage:"Started"}),value:0,show:!0},nodes:{label:i.i18n.translate("xpack.transform.statsBar.transformNodesLabel",{defaultMessage:"Nodes"}),value:e,show:!0}};if(void 0===t)return a;let s=0,r=0;return t.forEach((e=>{e.mode===O.m.CONTINUOUS?a.continuous.value++:e.mode===O.m.BATCH&&a.batch.value++,e.stats.state===O.o.FAILED?s++:e.stats.state===O.o.STARTED&&r++})),a.total.value=t.length,a.started.value=r,0!==s?(a.failed.value=s,a.failed.show=!0):a.failed.show=!1,a}(e,t);return Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(Rt,{stats:s,dataTestSub:"transformStatsBar"}),0===e&&Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiSpacer,{size:"m"}),Object(E.jsx)(p.EuiCallOut,{title:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesCallOutTitle",defaultMessage:"There are no transform nodes available."}),color:"warning",iconType:"alert"},Object(E.jsx)("p",null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesCallOutBody",defaultMessage:"You will not be able to create or run transforms. {learnMoreLink}",values:{learnMoreLink:Object(E.jsx)(p.EuiLink,{href:a,target:"_blank"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesLearnMoreLinkText",defaultMessage:"Learn more"}))}})))))},Vt=()=>{const{esTransform:e}=Object(_.a)(),[t,a]=Object(m.useState)(!1),[s,r]=Object(m.useState)(!1),[n,o]=Object(m.useState)(!1),[i,l]=Object(m.useState)([]),[c,d]=Object(m.useState)(0),[u,b]=Object(m.useState)(void 0),[j,x]=Object(m.useState)(),h=Object(S.c)(),T=Object(S.d)(l,d,b,x,r,n);Object($.F)({isLoading:a,onRefresh:()=>T(!0)}),(e=>{const{refresh:t}=Object($.F)();Object(m.useEffect)((()=>{const e=setInterval(t,O.f);return()=>{clearInterval(e)}}),[])})();const[v,y]=Object(m.useState)(!1),[M,k]=Object(m.useState)(null);if(null!==M)return Object(E.jsx)(X.a,{savedObjectId:M});const F=Object(E.jsx)(p.EuiButtonEmpty,{href:e,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiPageHeader,{pageTitle:Object(E.jsx)("span",{"data-test-subj":"transformAppTitle"},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.transformTitle",defaultMessage:"Transforms"})),description:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.transformList.transformDescription",defaultMessage:"Use transforms to pivot existing Elasticsearch indices into summarized entity-centric indices or to create an indexed view of the latest documents for fast access."}),rightSideItems:[F],bottomBorder:!0}),Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiPageContentBody,{"data-test-subj":"transformPageTransformList"},!s&&Object(E.jsx)(p.EuiLoadingContent,{lines:2}),s&&Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(_t,{transformNodes:c,transformsList:i}),Object(E.jsx)(p.EuiSpacer,{size:"s"}),void 0!==u&&Object(E.jsx)(p.EuiFlexGroup,{justifyContent:"spaceAround"},Object(E.jsx)(p.EuiFlexItem,{grow:!1},Object(E.jsx)(p.EuiSpacer,{size:"l"}),Object(E.jsx)(p.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(E.jsx)(p.EuiEmptyPrompt,{iconType:"alert",title:Object(E.jsx)("h2",null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.list.errorPromptTitle",defaultMessage:"An error occurred getting the transform list"})),body:Object(E.jsx)("p",null,Object(E.jsx)("pre",null,JSON.stringify(u))),actions:[]})))),void 0===u&&Object(E.jsx)(dt.a.Provider,{value:Object(dt.d)()},j?Object(E.jsx)(f.a.Fragment,null,Object(E.jsx)(p.EuiCallOut,{color:"warning"},Object(E.jsx)("p",null,Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.danglingTasksError",defaultMessage:"{count} {count, plural, one {transform is} other {transforms are}} missing configuration details: [{transformIds}] {count, plural, one {It} other {They}} cannot be recovered and should be deleted.",values:{count:j.length,transformIds:j.join(", ")}})),Object(E.jsx)(p.EuiButton,{color:"warning",size:"s",onClick:async()=>{await h({transformsInfo:j.map((e=>({id:e,state:O.o.FAILED}))),deleteDestIndex:!1,deleteDestDataView:!1,forceDelete:!0})}},Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.forceDeleteTransformMessage",defaultMessage:"Delete {count} {count, plural, one {transform} other {transforms}}",values:{count:j.length}}))),Object(E.jsx)(p.EuiSpacer,null)):null,Object(E.jsx)(Bt,{onCreateTransform:()=>y(!0),transformNodes:c,transforms:i,transformsLoading:t}),Object(E.jsx)(dt.c,null)))),v&&Object(E.jsx)(p.EuiModal,{onClose:()=>y(!1),className:"transformCreateTransformSearchDialog","data-test-subj":"transformSelectSourceModal"},Object(E.jsx)(te,{onSearchSelected:(e,t)=>{k(e)}})))},zt=()=>(Object(m.useEffect)((()=>{d.setBreadcrumbs(c.HOME),u.setTitle("home")}),[]),Object(E.jsx)(A,{privileges:O.d},Object(E.jsx)(Vt,null))),Ut=({history:e})=>{const{apiError:t}=Object(m.useContext)(w);return null!==t?Object(E.jsx)(h.a,{title:Object(E.jsx)(g.FormattedMessage,{id:"xpack.transform.app.checkingPrivilegesErrorMessage",defaultMessage:"Error fetching user privileges from the server"}),error:t}):Object(E.jsx)(j.Router,{history:e},Object(E.jsx)(j.Switch,null,Object(E.jsx)(j.Route,{path:`/${T.a.CLONE_TRANSFORM}/:transformId`,component:Q}),Object(E.jsx)(j.Route,{path:`/${T.a.CREATE_TRANSFORM}/:savedObjectId`,component:Z}),Object(E.jsx)(j.Route,{path:"/",component:zt})))},qt=new s.Storage(window.localStorage);async function $t(e,t){const{element:a,setBreadcrumbs:s,history:n}=t,{http:o,notifications:i,getStartServices:c}=e,m=await c(),[f,j]=m,{application:g,chrome:h,docLinks:T,i18n:v,overlays:y,theme:M,savedObjects:k,uiSettings:S}=f,{data:F,share:C,spaces:w,triggersActionsUi:D}=j,{docTitle:P}=h;l.init(),u.init(P.change),d.setup(s);const L=((e,t)=>{const a=t.i18n.Context;return Object(b.render)(Object(E.jsx)(p.EuiErrorBoundary,null,Object(E.jsx)(x.KibanaThemeProvider,{theme$:t.theme.theme$},Object(E.jsx)(x.KibanaContextProvider,{services:t},Object(E.jsx)(I,{privilegesEndpoint:`${O.b}privileges`},Object(E.jsx)(a,null,Object(E.jsx)(Ut,{history:t.history})))))),e),()=>{Object(b.unmountComponentAtNode)(e)}})(a,{application:g,chrome:h,data:F,docLinks:T,http:o,i18n:v,notifications:i,overlays:y,theme:M,savedObjects:k,storage:qt,uiSettings:S,history:n,savedObjectsPlugin:j.savedObjects,share:C,spaces:w,ml:await Object(r.b)(),triggersActionsUi:D});return()=>{P.reset(),L()}}}}]);