/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudSecurityPosture_bundle_jsonpfunction=window.cloudSecurityPosture_bundle_jsonpfunction||[]).push([[1],Array(26).concat([function(e,t,n){e.exports=n(10)(2565)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.noop=function(){},t.functionalUpdate=function(e,t){return"function"==typeof e?e(t):e},t.isValidTimeout=function(e){return"number"==typeof e&&e>=0&&e!==1/0},t.ensureQueryKeyArray=s,t.difference=function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))},t.replaceAt=function(e,t,n){var r=e.slice(0);return r[t]=n,r},t.timeUntilStale=function(e,t){return Math.max(e+(t||0)-Date.now(),0)},t.parseQueryArgs=function(e,t,n){return g(e)?"function"==typeof t?(0,i.default)({},n,{queryKey:e,queryFn:t}):(0,i.default)({},t,{queryKey:e}):e},t.parseMutationArgs=function(e,t,n){return g(e)?"function"==typeof t?(0,i.default)({},n,{mutationKey:e,mutationFn:t}):(0,i.default)({},t,{mutationKey:e}):"function"==typeof e?(0,i.default)({},t,{mutationFn:e}):(0,i.default)({},e)},t.parseFilterArgs=function(e,t,n){return g(e)?[(0,i.default)({},t,{queryKey:e}),n]:[e||{},t]},t.parseMutationFilterArgs=function(e,t){return g(e)?(0,i.default)({},t,{mutationKey:e}):e},t.mapQueryStatusFilter=u,t.matchQuery=function(e,t){var n=e.active,r=e.exact,i=e.fetching,a=e.inactive,s=e.predicate,c=e.queryKey,l=e.stale;if(g(c))if(r){if(t.queryHash!==o(c,t.options))return!1}else if(!d(t.queryKey,c))return!1;var f=u(n,a);if("none"===f)return!1;if("all"!==f){var p=t.isActive();if("active"===f&&!p)return!1;if("inactive"===f&&p)return!1}return("boolean"!=typeof l||t.isStale()===l)&&(("boolean"!=typeof i||t.isFetching()===i)&&!(s&&!s(t)))},t.matchMutation=function(e,t){var n=e.exact,r=e.fetching,i=e.predicate,a=e.mutationKey;if(g(a)){if(!t.options.mutationKey)return!1;if(n){if(c(t.options.mutationKey)!==c(a))return!1}else if(!d(t.options.mutationKey,a))return!1}return("boolean"!=typeof r||"loading"===t.state.status===r)&&!(i&&!i(t))},t.hashQueryKeyByOptions=o,t.hashQueryKey=c,t.stableValueHash=l,t.partialMatchKey=d,t.partialDeepEqual=f,t.replaceEqualDeep=function e(t,n){if(t===n)return t;var r=Array.isArray(t)&&Array.isArray(n);if(r||p(t)&&p(n)){for(var i=r?t.length:Object.keys(t).length,a=r?n:Object.keys(n),s=a.length,u=r?[]:{},o=0,c=0;c<s;c++){var l=r?c:a[c];u[l]=e(t[l],n[l]),u[l]===t[l]&&o++}return i===s&&o===i?t:u}return n},t.shallowEqualObjects=function(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},t.isPlainObject=p,t.isQueryKey=g,t.isError=function(e){return e instanceof Error},t.sleep=function(e){return new Promise((function(t){setTimeout(t,e)}))},t.scheduleMicrotask=function(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))},t.getAbortController=function(){if("function"==typeof AbortController)return new AbortController},t.isServer=void 0;var i=r(n(28)),a="undefined"==typeof window;function s(e){return Array.isArray(e)?e:[e]}function u(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}function o(e,t){return((null==t?void 0:t.queryKeyHashFn)||c)(e)}function c(e){return l(s(e))}function l(e){return JSON.stringify(e,(function(e,t){return p(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}))}function d(e,t){return f(s(e),s(t))}function f(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some((function(n){return!f(e[n],t[n])}))}function p(e){if(!h(e))return!1;var t=e.constructor;if(void 0===t)return!0;var n=t.prototype;return!!h(n)&&!!n.hasOwnProperty("isPrototypeOf")}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return"string"==typeof e||Array.isArray(e)}t.isServer=a},function(e,t,n){e.exports=n(10)(3)},function(e,t,n){"use strict";t.__esModule=!0,t.notifyManager=t.NotifyManager=void 0;var r=n(27),i=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){this.transactions++;var t=e();return this.transactions--,this.transactions||this.flush(),t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,r.scheduleMicrotask)((function(){t.notifyFn(e)}))},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.schedule((function(){e.apply(void 0,r)}))}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,r.scheduleMicrotask)((function(){e.batchNotifyFn((function(){t.forEach((function(t){e.notifyFn(t)}))}))}))},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}();t.NotifyManager=i;var a=new i;t.notifyManager=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(36);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(t[e]=r[e])}));var i=n(63);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(t[e]=i[e])}))},function(e,t,n){e.exports=n(10)(2567)},function(e,t,n){var r=n(58);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){e.exports=n(10)(2)},function(e,t,n){"use strict";t.__esModule=!0,t.Subscribable=void 0;var r=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter((function(e){return e!==n})),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}();t.Subscribable=r},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueryClientProvider=t.useQueryClient=void 0;var i=r(n(5)),a=i.default.createContext(void 0),s=i.default.createContext(!1);function u(e){return e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=a),window.ReactQueryClientContext):a}t.useQueryClient=function(){var e=i.default.useContext(u(i.default.useContext(s)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},t.QueryClientProvider=function(e){var t=e.client,n=e.contextSharing,r=void 0!==n&&n,a=e.children;i.default.useEffect((function(){return t.mount(),function(){t.unmount()}}),[t]);var o=u(r);return i.default.createElement(s.Provider,{value:r},i.default.createElement(o.Provider,{value:t},a))}},function(e,t,n){"use strict";t.__esModule=!0;var r={CancelledError:!0,QueryCache:!0,QueryClient:!0,QueryObserver:!0,QueriesObserver:!0,InfiniteQueryObserver:!0,MutationCache:!0,MutationObserver:!0,setLogger:!0,notifyManager:!0,focusManager:!0,onlineManager:!0,hashQueryKey:!0,isError:!0,isCancelledError:!0,dehydrate:!0,hydrate:!0};t.hydrate=t.dehydrate=t.isCancelledError=t.isError=t.hashQueryKey=t.onlineManager=t.focusManager=t.notifyManager=t.setLogger=t.MutationObserver=t.MutationCache=t.InfiniteQueryObserver=t.QueriesObserver=t.QueryObserver=t.QueryClient=t.QueryCache=t.CancelledError=void 0;var i=n(37);t.CancelledError=i.CancelledError,t.isCancelledError=i.isCancelledError;var a=n(45);t.QueryCache=a.QueryCache;var s=n(60);t.QueryClient=s.QueryClient;var u=n(43);t.QueryObserver=u.QueryObserver;var o=n(49);t.QueriesObserver=o.QueriesObserver;var c=n(50);t.InfiniteQueryObserver=c.InfiniteQueryObserver;var l=n(46);t.MutationCache=l.MutationCache;var d=n(51);t.MutationObserver=d.MutationObserver;var f=n(40);t.setLogger=f.setLogger;var p=n(29);t.notifyManager=p.notifyManager;var h=n(39);t.focusManager=h.focusManager;var g=n(42);t.onlineManager=g.onlineManager;var b=n(27);t.hashQueryKey=b.hashQueryKey,t.isError=b.isError;var y=n(61);t.dehydrate=y.dehydrate,t.hydrate=y.hydrate;var v=n(62);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=v[e]))}))},function(e,t,n){"use strict";t.__esModule=!0,t.isCancelable=u,t.isCancelledError=function(e){return e instanceof o},t.Retryer=t.CancelledError=void 0;var r=n(39),i=n(42),a=n(27);function s(e){return Math.min(1e3*Math.pow(2,e),3e4)}function u(e){return"function"==typeof(null==e?void 0:e.cancel)}var o=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};t.CancelledError=o,t.Retryer=function(e){var t,n,c,l,d=this,f=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){f=!0},this.continueRetry=function(){f=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((function(e,t){c=e,l=t}));var p=function(t){d.isResolved||(d.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),c(t))},h=function(t){d.isResolved||(d.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),l(t))};!function c(){if(!d.isResolved){var l;try{l=e.fn()}catch(e){l=Promise.reject(e)}t=function(e){if(!d.isResolved&&(h(new o(e)),null==d.abort||d.abort(),u(l)))try{l.cancel()}catch(e){}},d.isTransportCancelable=u(l),Promise.resolve(l).then(p).catch((function(t){var u,o;if(!d.isResolved){var l=null!=(u=e.retry)?u:3,p=null!=(o=e.retryDelay)?o:s,g="function"==typeof p?p(d.failureCount,t):p,b=!0===l||"number"==typeof l&&d.failureCount<l||"function"==typeof l&&l(d.failureCount,t);!f&&b?(d.failureCount++,null==e.onFail||e.onFail(d.failureCount,t),(0,a.sleep)(g).then((function(){if(!r.focusManager.isFocused()||!i.onlineManager.isOnline())return new Promise((function(t){n=t,d.isPaused=!0,null==e.onPause||e.onPause()})).then((function(){n=void 0,d.isPaused=!1,null==e.onContinue||e.onContinue()}))})).then((function(){f?h(t):c()}))):h(t)}}))}}()}},function(e,t,n){e.exports=n(10)(9)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.focusManager=t.FocusManager=void 0;var i=r(n(32)),a=n(34),s=n(27),u=function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!s.isServer&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}(0,i.default)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"==typeof e?n.setFocused(e):n.onFocus()}))},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach((function(e){e()}))},n.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(a.Subscribable);t.FocusManager=u;var o=new u;t.focusManager=o},function(e,t,n){"use strict";t.__esModule=!0,t.getLogger=function(){return r},t.setLogger=function(e){r=e};var r=console},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(77),u=s.either.map,o=s.either.chain,c=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,r){var i=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new e(r,n.is,(function(e,t){return o(i.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return i.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=c,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,r){for(var i=e.length,a=Array(i+1),s=0;s<i;s++)a[s]=e[s];return a[i]={key:t,type:n,actual:r},a},t.failures=s.left,t.failure=function(e,n,r){return t.failures([{value:e,context:n,message:r}])},t.success=s.right;var l=function(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])},d=function(e){return function(t){return t._tag===e}},f=d("AnyType"),p=d("InterfaceType"),h=d("PartialType"),g=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NullType",n}return i(n,e),n}(c);t.NullType=g,t.nullType=new g,t.null=t.nullType;var b=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="UndefinedType",n}return i(n,e),n}(c);t.UndefinedType=b;var y=new b;t.undefined=y;var v=function(e){function n(){var n=e.call(this,"void",y.is,y.validate,t.identity)||this;return n._tag="VoidType",n}return i(n,e),n}(c);t.VoidType=v,t.voidType=new v,t.void=t.voidType;var m=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return i(n,e),n}(c);t.UnknownType=m,t.unknown=new m;var j=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="StringType",n}return i(n,e),n}(c);t.StringType=j,t.string=new j;var x=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NumberType",n}return i(n,e),n}(c);t.NumberType=x,t.number=new x;var O=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="BooleanType",n}return i(n,e),n}(c);t.BooleanType=O,t.boolean=new O;var E=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyArrayType",n}return i(n,e),n}(c);t.AnyArrayType=E,t.UnknownArray=new E,t.Array=t.UnknownArray;var M=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return i(n,e),n}(c);t.AnyDictionaryType=M,t.UnknownRecord=new M;var k=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="FunctionType",n}return i(n,e),n}(c);t.FunctionType=k,t.Function=new k;var T=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,n,r,i)||this;return u.type=a,u.predicate=s,u._tag="RefinementType",u}return i(t,e),t}(c);t.RefinementType=T,t.brand=function(e,t,n){return X(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var C=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.value=a,s._tag="LiteralType",s}return i(t,e),t}(c);t.LiteralType=C,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var r=function(t){return t===e};return new C(n,r,(function(n,i){return r(n)?t.success(e):t.failure(n,i)}),t.identity,e)};var _=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.keys=a,s._tag="KeyofType",s}return i(t,e),t}(c);t.KeyofType=_;var w=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(n){return t.string.is(n)&&w.call(e,n)};return new _(n,r,(function(e,n){return r(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var S=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.runDefinition=a,s._tag="RecursiveType",s}return i(t,e),t}(c);t.RecursiveType=S,Object.defineProperty(S.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,r=function(){return n||((n=t(i)).name=e),n},i=new S(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return i};var I=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ArrayType",s}return i(t,e),t}(c);t.ArrayType=I,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new I(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,r){return o(t.UnknownArray.validate(n,r),(function(n){for(var i=n.length,a=n,u=[],o=0;o<i;o++){var c=n[o],d=e.validate(c,t.appendContext(r,String(o),e,c));if(s.isLeft(d))l(u,d.left);else{var f=d.right;f!==c&&(a===n&&(a=n.slice()),a[o]=f)}}return u.length>0?t.failures(u):t.success(a)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var F=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="InterfaceType",s}return i(t,e),t}(c);t.InterfaceType=F;var R=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},P=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},L=function(e){return"{ "+R(e)+" }"};t.type=function(e,n){void 0===n&&(n=L(e));var r=Object.keys(e),i=r.map((function(t){return e[t]})),u=r.length;return new F(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<u;n++){var a=r[n];if(!w.call(e,a)||!i[n].is(e[a]))return!1}return!0}return!1}),(function(e,n){return o(t.UnknownRecord.validate(e,n),(function(e){for(var o=e,c=[],d=0;d<u;d++){var f=r[d];w.call(o,f)||(o===e&&(o=a({},e)),o[f]=o[f]);var p=o[f],h=i[d],g=h.validate(p,t.appendContext(n,f,h,p));if(s.isLeft(g))l(c,g.left);else{var b=g.right;b!==p&&(o===e&&(o=a({},e)),o[f]=b)}}return c.length>0?t.failures(c):t.success(o)}))}),P(i)?t.identity:function(e){for(var n=a({},e),s=0;s<u;s++){var o=r[s],c=i[s].encode;c!==t.identity&&(n[o]=c(e[o]))}return n},e)},t.interface=t.type;var A=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="PartialType",s}return i(t,e),t}(c);t.PartialType=A;var Q=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=Q(L(e)));var r=Object.keys(e),i=r.map((function(t){return e[t]})),u=r.length;return new A(n,(function(n){if(t.UnknownRecord.is(n)){for(var i=0;i<u;i++){var a=r[i],s=n[a];if(void 0!==s&&!e[a].is(s))return!1}return!0}return!1}),(function(n,i){return o(t.UnknownRecord.validate(n,i),(function(n){for(var o=n,c=[],d=0;d<u;d++){var f=r[d],p=o[f],h=e[f],g=h.validate(p,t.appendContext(i,f,h,p));if(s.isLeft(g))void 0!==p&&l(c,g.left);else{var b=g.right;b!==p&&(o===n&&(o=a({},n)),o[f]=b)}}return c.length>0?t.failures(c):t.success(o)}))}),P(i)?t.identity:function(e){for(var t=a({},e),n=0;n<u;n++){var s=r[n],o=e[s];void 0!==o&&(t[s]=i[n].encode(o))}return t},e)};var q=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,n,r,i)||this;return u.domain=a,u.codomain=s,u._tag="DictionaryType",u}return i(t,e),t}(c);t.DictionaryType=q,t.record=function(e,n,r){return void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }"),new q(r,(function(r){return t.UnknownRecord.is(r)?Object.keys(r).every((function(t){return e.is(t)&&n.is(r[t])})):f(n)&&Array.isArray(r)}),(function(r,i){if(t.UnknownRecord.is(r)){for(var a={},u=[],o=Object.keys(r),c=o.length,d=!1,p=0;p<c;p++){var h=o[p],g=r[h],b=e.validate(h,t.appendContext(i,h,e,h));if(s.isLeft(b))l(u,b.left);else{var y=b.right;d=d||y!==h,h=y;var v=n.validate(g,t.appendContext(i,h,n,g));if(s.isLeft(v))l(u,v.left);else{var m=v.right;d=d||m!==g,a[h]=m}}}return u.length>0?t.failures(u):t.success(d?a:r)}return f(n)&&Array.isArray(r)?t.success(r):t.failure(r,i)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var r={},i=Object.keys(t),a=i.length,s=0;s<a;s++){var u=i[s];r[String(e.encode(u))]=n.encode(t[u])}return r},e,n)};var N=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="UnionType",s}return i(t,e),t}(c);t.UnionType=N;var U=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=U(e));var r=ae(e);if(void 0!==r&&e.length>0){var i=r[0],a=r[1],u=a.length,c=function(e){for(var t=0;t<u;t++)if(-1!==a[t].indexOf(e))return t};return new G(n,(function(n){if(t.UnknownRecord.is(n)){var r=c(n[i]);return void 0!==r&&e[r].is(n)}return!1}),(function(n,r){return o(t.UnknownRecord.validate(n,r),(function(a){var s=c(a[i]);if(void 0===s)return t.failure(n,r);var u=e[s];return u.validate(a,t.appendContext(r,String(s),u,a))}))}),P(e)?t.identity:function(t){var r=c(t[i]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return e[r].encode(t)},e,i)}return new N(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,r){for(var i=[],a=0;a<e.length;a++){var u=e[a],o=u.validate(n,t.appendContext(r,String(a),u,n));if(!s.isLeft(o))return t.success(o.right);l(i,o.left)}return t.failures(i)}),P(e)?t.identity:function(t){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(a.is(t))return a.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var D=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="IntersectionType",s}return i(t,e),t}(c);t.IntersectionType=D;var B=function(e,n){for(var r=!0,i=!0,a=0,s=n;a<s.length;a++)(l=s[a])!==e&&(r=!1),t.UnknownRecord.is(l)&&(i=!1);if(r)return e;if(i)return n[n.length-1];for(var u={},o=0,c=n;o<c.length;o++){var l=c[o];for(var d in l)l[d]===e[d]&&u.hasOwnProperty(d)||(u[d]=l[d])}return u};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var r=e.length;return new D(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,i){for(var a=[],u=[],o=0;o<r;o++){var c=e[o],d=c.validate(n,t.appendContext(i,String(o),c,n));s.isLeft(d)?l(u,d.left):a.push(d.right)}return u.length>0?t.failures(u):t.success(B(n,a))},0===e.length?t.identity:function(t){return B(t,e.map((function(e){return e.encode(t)})))},e)};var z=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.types=a,s._tag="TupleType",s}return i(t,e),t}(c);t.TupleType=z,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var r=e.length;return new z(n,(function(n){return t.UnknownArray.is(n)&&n.length===r&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,i){return o(t.UnknownArray.validate(n,i),(function(n){for(var a=n.length>r?n.slice(0,r):n,u=[],o=0;o<r;o++){var c=n[o],d=e[o],f=d.validate(c,t.appendContext(i,String(o),d,c));if(s.isLeft(f))l(u,f.left);else{var p=f.right;p!==c&&(a===n&&(a=n.slice()),a[o]=p)}}return u.length>0?t.failures(u):t.success(a)}))}),P(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var K=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ReadonlyType",s}return i(t,e),t}(c);t.ReadonlyType=K,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new K(n,e.is,(function(t,n){return u(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var H=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ReadonlyArrayType",s}return i(t,e),t}(c);t.ReadonlyArrayType=H,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var r=t.array(e);return new H(n,r.is,(function(e,t){return u(r.validate(e,t),(function(e){return e}))}),r.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var G=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,n,r,i,a)||this;return u.tag=s,u}return i(t,e),t}(N);t.TaggedUnionType=G,t.taggedUnion=function(e,n,r){void 0===r&&(r=U(n));var i=t.union(n,r);return i instanceof G?i:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new G(r,i.is,i.validate,i.encode,n,e))};var V=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.type=a,s._tag="ExactType",s}return i(t,e),t}(c);t.ExactType=V;var W=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return W(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,W(t))}),{})}},$=function(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,i={},a=0;a<n.length;a++){var s=n[a];w.call(t,s)?i[s]=e[s]:r=!0}return r?i:e};t.exact=function(e,n){void 0===n&&(n=function(e){return p(e)?"{| "+R(e.props)+" |}":h(e)?Q("{| "+R(e.props)+" |}"):"Exact<"+e.name+">"}(e));var r=W(e);return new V(n,e.is,(function(n,i){return o(t.UnknownRecord.validate(n,i),(function(){return u(e.validate(n,i),(function(e){return $(e,r)}))}))}),(function(t){return e.encode($(t,r))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var J=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return i(n,e),n}(c);t.NeverType=J,t.never=new J;var Y=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return i(n,e),n}(c);t.AnyType=Y,t.any=new Y,t.Dictionary=t.UnknownRecord;var Z=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="ObjectType",n}return i(n,e),n}(c);function X(e,n,r){return void 0===r&&(r="("+e.name+" | "+t.getFunctionName(n)+")"),new T(r,(function(t){return e.is(t)&&n(t)}),(function(r,i){return o(e.validate(r,i),(function(e){return n(e)?t.success(e):t.failure(e,i)}))}),e.encode,e,n)}t.ObjectType=Z,t.object=new Z,t.refinement=X,t.Integer=X(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,r,i,a){var s=e.call(this,t,n,r,i)||this;return s.props=a,s._tag="StrictType",s}return i(t,e),t}(c);function te(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];-1!==t.indexOf(a)&&n.push(a)}return n}function ne(e){return"LiteralType"===e._tag}t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}},t.emptyTags={};var re=[];function ie(e){if(-1!==re.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var r in e.props){var i=e.props[r];ne(i)&&(n===t.emptyTags&&(n={}),n[r]=[i.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return ie(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var r=Object.assign({},e);for(var i in n)if(e.hasOwnProperty(i)){var a=te(e[i],n[i]);if(!(a.length>0)){r=t.emptyTags;break}r[i]=a}else r[i]=n[i];return r}(e,ie(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var r=t.emptyTags;for(var i in e)n.hasOwnProperty(i)&&0===te(e[i],n[i]).length&&(r===t.emptyTags&&(r={}),r[i]=e[i].concat(n[i]));return r}(e,ie(n))}),ie(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){re.push(e);var a=ie(e.type);return re.pop(),a}return t.emptyTags}function ae(e){for(var t=ie(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),a=[t[n]],s=1;s<r;s++){var u=ie(e[s])[n];if(void 0===u)return"continue-keys";if(u.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,u),a.push(u)}return{value:[n,a]}},a=0,s=n;a<s.length;a++){var u=i(s[a]);if("object"==typeof u)return u.value}}t.getTags=ie,t.getIndex=ae},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.onlineManager=t.OnlineManager=void 0;var i=r(n(32)),a=n(34),s=n(27),u=function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!s.isServer&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}(0,i.default)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"==typeof e?n.setOnline(e):n.onOnline()}))},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach((function(e){e()}))},n.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},t}(a.Subscribable);t.OnlineManager=u;var o=new u;t.onlineManager=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueryObserver=void 0;var i=r(n(28)),a=r(n(32)),s=n(27),u=n(29),o=n(39),c=n(34),l=n(40),d=n(37),f=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.options=n,r.trackedProps=[],r.previousSelectError=null,r.bindMethods(),r.setOptions(n),r}(0,a.default)(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),p(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnReconnect||!1!==t.refetchOnReconnect&&g(e,t));var e,t},n.shouldFetchOnWindowFocus=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnWindowFocus||!1!==t.refetchOnWindowFocus&&g(e,t));var e,t},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var i=this.hasListeners();i&&h(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var a=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&a===this.currentRefetchInterval||this.updateRefetchInterval(a)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,r={},i=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return i(t),e[t]}})})),(t.useErrorBoundary||t.suspense)&&i("error"),r},n.getNextResult=function(e){var t=this;return new Promise((function(n,r){var i=t.subscribe((function(t){t.isFetching||(i(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):n(t))}))}))},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch((0,i.default)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then((function(){return t.createResult(r,n)}))},n.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(s.noop)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!s.isServer&&!this.currentResult.isStale&&(0,s.isValidTimeout)(this.options.staleTime)){var t=(0,s.timeUntilStale)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},n.computeRefetchInterval=function(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!s.isServer&&!1!==this.options.enabled&&(0,s.isValidTimeout)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||o.focusManager.isFocused())&&t.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},n.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},n.createResult=function(e,t){var n,r=this.currentQuery,i=this.options,a=this.currentResult,u=this.currentResultState,o=this.currentResultOptions,c=e!==r,d=c?e.state:this.currentQueryInitialState,f=c?this.currentResult:this.previousQueryResult,b=e.state,y=b.dataUpdatedAt,v=b.error,m=b.errorUpdatedAt,j=b.isFetching,x=b.status,O=!1,E=!1;if(t.optimisticResults){var M=this.hasListeners(),k=!M&&p(e,t),T=M&&h(e,r,t,i);(k||T)&&(j=!0,y||(x="loading"))}if(t.keepPreviousData&&!b.dataUpdateCount&&(null==f?void 0:f.isSuccess)&&"error"!==x)n=f.data,y=f.dataUpdatedAt,x=f.status,O=!0;else if(t.select&&void 0!==b.data){var C;if(a&&b.data===(null==u?void 0:u.data)&&t.select===(null==(C=this.previousSelect)?void 0:C.fn)&&!this.previousSelectError)n=this.previousSelect.result;else try{n=t.select(b.data),this.previousSelect={fn:t.select,result:n},!1!==t.structuralSharing&&(n=(0,s.replaceEqualDeep)(null==a?void 0:a.data,n)),this.previousSelectError=null}catch(e){(0,l.getLogger)().error(e),v=e,this.previousSelectError=e,m=Date.now(),x="error"}}else n=b.data;if(void 0!==t.placeholderData&&void 0===n&&("loading"===x||"idle"===x)){var _;if((null==a?void 0:a.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData))_=a.data;else if(_="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==_)try{_=t.select(_),!1!==t.structuralSharing&&(_=(0,s.replaceEqualDeep)(null==a?void 0:a.data,_)),this.previousSelectError=null}catch(e){(0,l.getLogger)().error(e),v=e,this.previousSelectError=e,m=Date.now(),x="error"}void 0!==_&&(x="success",n=_,E=!0)}return{status:x,isLoading:"loading"===x,isSuccess:"success"===x,isError:"error"===x,isIdle:"idle"===x,data:n,dataUpdatedAt:y,error:v,errorUpdatedAt:m,failureCount:b.fetchFailureCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>d.dataUpdateCount||b.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&"loading"!==x,isLoadingError:"error"===x&&0===b.dataUpdatedAt,isPlaceholderData:E,isPreviousData:O,isRefetchError:"error"===x&&0!==b.dataUpdatedAt,isStale:g(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,r=n.notifyOnChangeProps,i=n.notifyOnChangePropsExclusions;if(!r&&!i)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var a="tracked"===r?this.trackedProps:r;return Object.keys(e).some((function(n){var r=n,s=e[r]!==t[r],u=null==a?void 0:a.some((function(e){return e===n})),o=null==i?void 0:i.some((function(e){return e===n}));return s&&!o&&(!a||u)}))},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,s.shallowEqualObjects)(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify((0,i.default)({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,d.isCancelledError)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;u.notifyManager.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(c.Subscribable);function p(e,t){return function(e,t){return!(!1===t.enabled||e.state.dataUpdatedAt||"error"===e.state.status&&!1===t.retryOnMount)}(e,t)||function(e,t){return!1!==t.enabled&&e.state.dataUpdatedAt>0&&("always"===t.refetchOnMount||!1!==t.refetchOnMount&&g(e,t))}(e,t)}function h(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&g(e,n)}function g(e,t){return e.isStaleByTime(t.staleTime)}t.QueryObserver=f},function(e,t,n){e.exports=n(10)(23)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueryCache=void 0;var i=r(n(32)),a=n(27),s=n(59),u=n(29),o=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}(0,i.default)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r,i=t.queryKey,u=null!=(r=t.queryHash)?r:(0,a.hashQueryKeyByOptions)(i,t),o=this.get(u);return o||(o=new s.Query({cache:this,queryKey:i,queryHash:u,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i),meta:t.meta}),this.add(o)),o},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((function(t){return t!==e})),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;u.notifyManager.batch((function(){e.queries.forEach((function(t){e.remove(t)}))}))},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=(0,a.parseFilterArgs)(e,t)[0];return void 0===n.exact&&(n.exact=!0),this.queries.find((function(e){return(0,a.matchQuery)(n,e)}))},n.findAll=function(e,t){var n=(0,a.parseFilterArgs)(e,t)[0];return Object.keys(n).length>0?this.queries.filter((function(e){return(0,a.matchQuery)(n,e)})):this.queries},n.notify=function(e){var t=this;u.notifyManager.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){var e=this;u.notifyManager.batch((function(){e.queries.forEach((function(e){e.onFocus()}))}))},n.onOnline=function(){var e=this;u.notifyManager.batch((function(){e.queries.forEach((function(e){e.onOnline()}))}))},t}(n(34).Subscribable);t.QueryCache=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.MutationCache=void 0;var i=r(n(32)),a=n(29),s=n(47),u=n(27),o=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}(0,i.default)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r=new s.Mutation({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter((function(t){return t!==e})),e.cancel(),this.notify(e)},n.clear=function(){var e=this;a.notifyManager.batch((function(){e.mutations.forEach((function(t){e.remove(t)}))}))},n.getAll=function(){return this.mutations},n.find=function(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find((function(t){return(0,u.matchMutation)(e,t)}))},n.findAll=function(e){return this.mutations.filter((function(t){return(0,u.matchMutation)(e,t)}))},n.notify=function(e){var t=this;a.notifyManager.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter((function(e){return e.state.isPaused}));return a.notifyManager.batch((function(){return e.reduce((function(e,t){return e.then((function(){return t.continue().catch(u.noop)}))}),Promise.resolve())}))},t}(n(34).Subscribable);t.MutationCache=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.getDefaultState=l,t.Mutation=void 0;var i=r(n(28)),a=n(40),s=n(29),u=n(37),o=n(27),c=function(){function e(e){this.options=(0,i.default)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter((function(t){return t!==e}))},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(o.noop).catch(o.noop)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,r=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then((function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)})).then((function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)})).then((function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})}))),r.then((function(){return t.executeMutation()})).then((function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)})).then((function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)})).then((function(){return t.dispatch({type:"success",data:e}),e})).catch((function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,a.getLogger)().error(e),Promise.resolve().then((function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)})).then((function(){throw t.dispatch({type:"error",error:e}),e}))}))},t.executeMutation=function(){var e,t=this;return this.retryer=new u.Retryer({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,i.default)({},e,{failureCount:e.failureCount+1});case"pause":return(0,i.default)({},e,{isPaused:!0});case"continue":return(0,i.default)({},e,{isPaused:!1});case"loading":return(0,i.default)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,i.default)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,i.default)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,i.default)({},e,t.state);default:return e}}(this.state,e),s.notifyManager.batch((function(){t.observers.forEach((function(t){t.onMutationUpdate(e)})),t.mutationCache.notify(t)}))},e}();function l(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}t.Mutation=c},function(e,t,n){"use strict";t.__esModule=!0,t.infiniteQueryBehavior=function(){return{onFetch:function(e){e.fetchFn=function(){var t,n,u,o,c,l,d,f=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,p=null==(u=e.fetchOptions)||null==(o=u.meta)?void 0:o.fetchMore,h=null==p?void 0:p.pageParam,g="forward"===(null==p?void 0:p.direction),b="backward"===(null==p?void 0:p.direction),y=(null==(c=e.state.data)?void 0:c.pages)||[],v=(null==(l=e.state.data)?void 0:l.pageParams)||[],m=(0,i.getAbortController)(),j=null==m?void 0:m.signal,x=v,O=!1,E=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},M=function(e,t,n,r){return x=r?[t].concat(x):[].concat(x,[t]),r?[n].concat(e):[].concat(e,[n])},k=function(t,n,i,a){if(O)return Promise.reject("Cancelled");if(void 0===i&&!n&&t.length)return Promise.resolve(t);var s={queryKey:e.queryKey,signal:j,pageParam:i,meta:e.meta},u=E(s),o=Promise.resolve(u).then((function(e){return M(t,i,e,a)}));return(0,r.isCancelable)(u)&&(o.cancel=u.cancel),o};if(y.length)if(g){var T=void 0!==h,C=T?h:a(e.options,y);d=k(y,T,C)}else if(b){var _=void 0!==h,w=_?h:s(e.options,y);d=k(y,_,w,!0)}else!function(){x=[];var t=void 0===e.options.getNextPageParam,n=!f||!y[0]||f(y[0],0,y);d=n?k([],t,v[0]):Promise.resolve(M([],v[0],y[0]));for(var r=function(n){d=d.then((function(r){if(!f||!y[n]||f(y[n],n,y)){var i=t?v[n]:a(e.options,r);return k(r,t,i)}return Promise.resolve(M(r,v[n],y[n]))}))},i=1;i<y.length;i++)r(i)}();else d=k([]);var S=d.then((function(e){return{pages:e,pageParams:x}}));return S.cancel=function(){O=!0,null==m||m.abort(),(0,r.isCancelable)(d)&&d.cancel()},S}}}},t.getNextPageParam=a,t.getPreviousPageParam=s,t.hasNextPage=function(e,t){if(e.getNextPageParam&&Array.isArray(t)){var n=a(e,t);return null!=n&&!1!==n}},t.hasPreviousPage=function(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){var n=s(e,t);return null!=n&&!1!==n}};var r=n(37),i=n(27);function a(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function s(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueriesObserver=void 0;var i=r(n(32)),a=n(27),s=n(29),u=n(43),o=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.queries=[],r.result=[],r.observers=[],r.observersMap={},n&&r.setQueries(n),r}(0,i.default)(t,e);var n=t.prototype;return n.onSubscribe=function(){var e=this;1===this.listeners.length&&this.observers.forEach((function(t){t.subscribe((function(n){e.onUpdate(t,n)}))}))},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.destroy=function(){this.listeners=[],this.observers.forEach((function(e){e.destroy()}))},n.setQueries=function(e,t){this.queries=e,this.updateObservers(t)},n.getCurrentResult=function(){return this.result},n.getOptimisticResult=function(e){return this.findMatchingObservers(e).map((function(e){return e.observer.getOptimisticResult(e.defaultedQueryOptions)}))},n.findMatchingObservers=function(e){var t=this,n=this.observers,r=e.map((function(e){return t.client.defaultQueryObserverOptions(e)})),i=r.flatMap((function(e){var t=n.find((function(t){return t.options.queryHash===e.queryHash}));return null!=t?[{defaultedQueryOptions:e,observer:t}]:[]})),a=i.map((function(e){return e.defaultedQueryOptions.queryHash})),s=r.filter((function(e){return!a.includes(e.queryHash)})),u=n.filter((function(e){return!i.some((function(t){return t.observer===e}))})),o=s.map((function(e,n){if(e.keepPreviousData){var r=u[n];if(void 0!==r)return{defaultedQueryOptions:e,observer:r}}return{defaultedQueryOptions:e,observer:t.getObserver(e)}}));return i.concat(o).sort((function(e,t){return r.indexOf(e.defaultedQueryOptions)-r.indexOf(t.defaultedQueryOptions)}))},n.getObserver=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.observersMap[t.queryHash];return null!=n?n:new u.QueryObserver(this.client,t)},n.updateObservers=function(e){var t=this;s.notifyManager.batch((function(){var n=t.observers,r=t.findMatchingObservers(t.queries);r.forEach((function(t){return t.observer.setOptions(t.defaultedQueryOptions,e)}));var i=r.map((function(e){return e.observer})),s=Object.fromEntries(i.map((function(e){return[e.options.queryHash,e]}))),u=i.map((function(e){return e.getCurrentResult()})),o=i.some((function(e,t){return e!==n[t]}));(n.length!==i.length||o)&&(t.observers=i,t.observersMap=s,t.result=u,t.hasListeners()&&((0,a.difference)(n,i).forEach((function(e){e.destroy()})),(0,a.difference)(i,n).forEach((function(e){e.subscribe((function(n){t.onUpdate(e,n)}))})),t.notify()))}))},n.onUpdate=function(e,t){var n=this.observers.indexOf(e);-1!==n&&(this.result=(0,a.replaceAt)(this.result,n,t),this.notify())},n.notify=function(){var e=this;s.notifyManager.batch((function(){e.listeners.forEach((function(t){t(e.result)}))}))},t}(n(34).Subscribable);t.QueriesObserver=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.InfiniteQueryObserver=void 0;var i=r(n(28)),a=r(n(32)),s=n(43),u=n(48),o=function(e){function t(t,n){return e.call(this,t,n)||this}(0,a.default)(t,e);var n=t.prototype;return n.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},n.setOptions=function(t,n){e.prototype.setOptions.call(this,(0,i.default)({},t,{behavior:(0,u.infiniteQueryBehavior)()}),n)},n.getOptimisticResult=function(t){return t.behavior=(0,u.infiniteQueryBehavior)(),e.prototype.getOptimisticResult.call(this,t)},n.fetchNextPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==e?void 0:e.pageParam}}})},n.fetchPreviousPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==e?void 0:e.pageParam}}})},n.createResult=function(t,n){var r,a,s,o,c,l,d=t.state,f=e.prototype.createResult.call(this,t,n);return(0,i.default)({},f,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,u.hasNextPage)(n,null==(r=d.data)?void 0:r.pages),hasPreviousPage:(0,u.hasPreviousPage)(n,null==(a=d.data)?void 0:a.pages),isFetchingNextPage:d.isFetching&&"forward"===(null==(s=d.fetchMeta)||null==(o=s.fetchMore)?void 0:o.direction),isFetchingPreviousPage:d.isFetching&&"backward"===(null==(c=d.fetchMeta)||null==(l=c.fetchMore)?void 0:l.direction)})},t}(s.QueryObserver);t.InfiniteQueryObserver=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.MutationObserver=void 0;var i=r(n(28)),a=r(n(32)),s=n(47),u=n(29),o=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}(0,a.default)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||null==(e=this.currentMutation)||e.removeObserver(this)},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,i.default)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,s.getDefaultState)(),t=(0,i.default)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},n.notify=function(e){var t=this;u.notifyManager.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(34).Subscribable);t.MutationObserver=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueryErrorResetBoundary=t.useQueryErrorResetBoundary=void 0;var i=r(n(5));function a(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var s=i.default.createContext(a());t.useQueryErrorResetBoundary=function(){return i.default.useContext(s)},t.QueryErrorResetBoundary=function(e){var t=e.children,n=i.default.useMemo((function(){return a()}),[]);return i.default.createElement(s.Provider,{value:n},"function"==typeof t?t(n):t)}},function(e,t,n){"use strict";t.__esModule=!0,t.shouldThrowError=function(e,t,n){return"function"==typeof t?t(n):"boolean"==typeof t?t:!!e}},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.useBaseQuery=function(e,t){var n=i.default.useRef(!1),r=i.default.useState(0)[1],c=(0,u.useQueryClient)(),l=(0,s.useQueryErrorResetBoundary)(),d=c.defaultQueryObserverOptions(e);d.optimisticResults=!0,d.onError&&(d.onError=a.notifyManager.batchCalls(d.onError)),d.onSuccess&&(d.onSuccess=a.notifyManager.batchCalls(d.onSuccess)),d.onSettled&&(d.onSettled=a.notifyManager.batchCalls(d.onSettled)),d.suspense&&("number"!=typeof d.staleTime&&(d.staleTime=1e3),0===d.cacheTime&&(d.cacheTime=1)),(d.suspense||d.useErrorBoundary)&&(l.isReset()||(d.retryOnMount=!1));var f=i.default.useState((function(){return new t(c,d)}))[0],p=f.getOptimisticResult(d);if(i.default.useEffect((function(){n.current=!0,l.clearReset();var e=f.subscribe(a.notifyManager.batchCalls((function(){n.current&&r((function(e){return e+1}))})));return f.updateResult(),function(){n.current=!1,e()}}),[l,f]),i.default.useEffect((function(){f.setOptions(d,{listeners:!1})}),[d,f]),d.suspense&&p.isLoading)throw f.fetchOptimistic(d).then((function(e){var t=e.data;null==d.onSuccess||d.onSuccess(t),null==d.onSettled||d.onSettled(t,null)})).catch((function(e){l.clearReset(),null==d.onError||d.onError(e),null==d.onSettled||d.onSettled(void 0,e)}));if(p.isError&&!l.isReset()&&!p.isFetching&&(0,o.shouldThrowError)(d.suspense,d.useErrorBoundary,p.error))throw p.error;return"tracked"===d.notifyOnChangeProps&&(p=f.trackResult(p,d)),p};var i=r(n(5)),a=n(29),s=n(52),u=n(35),o=n(53)},function(e,t,n){e.exports=n(10)(45)},function(e,t,n){"use strict";function r(e,t,n,i){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,r.prototype),a.expected=t,a.found=n,a.location=i,a.name="SyntaxError",a}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,s=this.location.source+":"+a.line+":"+a.column;if(r){var u=this.location.end,o=i("",a.line.toString().length),c=r[a.line-1],l=a.line===u.line?u.column:c.length+1;t+="\n --\x3e "+s+"\n"+o+" |\n"+a.line+" | "+c+"\n"+o+" | "+i("",a.column-1)+i("",l-a.column,"^")}else t+="\n at "+s}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(s);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},a=(t=void 0!==t?t:{}).grammarSource,s={start:de,Literal:Me},u=de,o='"',c="\\",l="@kuery-cursor@",d=/^[\\"]/,f=/^[^"]/,p=/^[\\():<>"*{}]/,h=/^[0-9a-f]/i,g=/^[ \t\r\n\xA0]/,b=ae("(",!1),y=ae(")",!1),v=ae(":",!1),m=ae("{",!1),j=ae("}",!1),x=ue("fieldName"),O=ue("value"),E=ue("OR"),M=ae("or",!0),k=ue("AND"),T=ae("and",!0),C=ue("NOT"),_=ae("not",!0),w=ue("literal"),S=ae('"',!1),I=ae("\\",!1),F=se(["\\",'"'],!1,!1),R=se(['"'],!0,!1),P={type:"any"},L=ae("*",!1),A=ae("\\t",!1),Q=ae("\\r",!1),q=ae("\\n",!1),N=se(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),U=ae("u",!1),D=se([["0","9"],["a","f"]],!1,!0),B=ae("<=",!1),z=ae(">=",!1),K=ae("<",!1),H=ae(">",!1),G=ue("whitespace"),V=se([" ","\t","\r","\n"," "],!1,!1),W=ae("@kuery-cursor@",!1),$=function(e,t){return t},J=function(e,t){return t},Y=function(){return Ae},Z=function(t,n,r){const{start:i,end:a}=ce(ee,X);return{type:"cursor",start:i.offset,end:a.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(ee,X).replace(n,"")}},X=0,ee=0,te=[{line:1,column:1}],ne=0,re=[],ie=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');u=s[t.startRule]}function ae(e,t){return{type:"literal",text:e,ignoreCase:t}}function se(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ue(e){return{type:"other",description:e}}function oe(t){var n,r=te[t];if(r)return r;for(n=t-1;!te[n];)n--;for(r={line:(r=te[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return te[t]=r,r}function ce(e,t){var n=oe(e),r=oe(t);return{source:a,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function le(e){X<ne||(X>ne&&(ne=X,re=[]),re.push(e))}function de(){var e,t,n,r,a,s;for(e=X,t=[],n=Pe();n!==i;)t.push(n),n=Pe();return(n=fe())===i&&(n=null),(r=we())!==i?(ee=e,a=n,e="cursor"===(s=r).type?{...s,suggestionTypes:["conjunction"]}:null!==a?a:Ne.function.buildNode("is","*","*")):(X=e,e=i),e}function fe(){var e,t,n,r,a;if(e=X,(t=pe())!==i){if(n=[],r=X,xe()!==i&&(a=pe())!==i?(ee=r,r=$(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,xe()!==i&&(a=pe())!==i?(ee=r,r=$(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Ae&&n.find((e=>"cursor"===e.type))||Ue("or",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=pe()),e}function pe(){var e,t,n,r,a;if(e=X,(t=he())!==i){if(n=[],r=X,Oe()!==i&&(a=he())!==i?(ee=r,r=$(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(a=he())!==i?(ee=r,r=$(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Ae&&n.find((e=>"cursor"===e.type))||Ue("and",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=he()),e}function he(){var e,t,n;return e=X,Ee()!==i&&(t=ge())!==i?(ee=e,e="cursor"===(n=t).type?n:Ue("not",[n])):(X=e,e=i),e===i&&(e=ge()),e}function ge(){var t,n,r,a,s,u,o,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(b)),n!==i){for(r=[],a=Pe();a!==i;)r.push(a),a=Pe();(a=fe())!==i&&(s=we())!==i?(41===e.charCodeAt(X)?(u=")",X++):(u=i,0===ie&&le(y)),u!==i?(ee=t,o=a,t="cursor"===(c=s).type?{...c,suggestionTypes:["conjunction"]}:o):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=function(){var t,n,r,a,s,u,o,c,l,d;if(t=X,(n=be())!==i){for(r=[],a=Pe();a!==i;)r.push(a),a=Pe();if(58===e.charCodeAt(X)?(a=":",X++):(a=i,0===ie&&le(v)),a!==i){for(s=[],u=Pe();u!==i;)s.push(u),u=Pe();if(123===e.charCodeAt(X)?(u="{",X++):(u=i,0===ie&&le(m)),u!==i){for(o=[],c=Pe();c!==i;)o.push(c),c=Pe();(c=fe())!==i&&(l=we())!==i?(125===e.charCodeAt(X)?(d="}",X++):(d=i,0===ie&&le(j)),d!==i?(ee=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ue("nested",[e,t])}(n,c,l)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i}else X=t,t=i}else X=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,n,r,a,s,u,o,c,l;if(t=X,(n=be())!==i){for(r=[],a=Pe();a!==i;)r.push(a),a=Pe();if(a=function(){var t,n;return t=X,"<="===e.substr(X,2)?(n="<=",X+=2):(n=i,0===ie&&le(B)),n!==i&&(ee=t,n="lte"),(t=n)===i&&(t=X,">="===e.substr(X,2)?(n=">=",X+=2):(n=i,0===ie&&le(z)),n!==i&&(ee=t,n="gte"),(t=n)===i&&(t=X,60===e.charCodeAt(X)?(n="<",X++):(n=i,0===ie&&le(K)),n!==i&&(ee=t,n="lt"),(t=n)===i&&(t=X,62===e.charCodeAt(X)?(n=">",X++):(n=i,0===ie&&le(H)),n!==i&&(ee=t,n="gt"),t=n))),t}(),a!==i){for(s=[],u=Pe();u!==i;)s.push(u),u=Pe();(u=Me())!==i?(ee=t,o=n,c=a,t="cursor"===(l=u).type?{...l,suggestionTypes:["conjunction"]}:Ue("range",[o,c,l])):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var t,n,r,a,s,u,o,c;if(t=X,(n=be())!==i){for(r=[],a=Pe();a!==i;)r.push(a),a=Pe();if(58===e.charCodeAt(X)?(a=":",X++):(a=i,0===ie&&le(v)),a!==i){for(s=[],u=Pe();u!==i;)s.push(u),u=Pe();(u=ye())!==i?(ee=t,o=n,t="cursor"===(c=u).type?{...c,fieldName:o.value,suggestionTypes:["value","conjunction"]}:c(o)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=X,(t=je())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(De(null))}(t)),t}())),t}()),t}()),t}function be(){var e;return ie++,e=Me(),ie--,e===i&&0===ie&&le(x),e}function ye(){var t,n,r,a,s,u,o,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(b)),n!==i){for(r=[],a=Pe();a!==i;)r.push(a),a=Pe();a=function(){var e,t,n,r,a;if(e=X,(t=ve())!==i){if(n=[],r=X,xe()!==i&&(a=ve())!==i?(ee=r,r=J(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,xe()!==i&&(a=ve())!==i?(ee=r,r=J(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=Ae&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("or",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ve()),e}(),a!==i&&(s=we())!==i?(41===e.charCodeAt(X)?(u=")",X++):(u=i,0===ie&&le(y)),u!==i?(ee=t,o=a,t="cursor"===(c=s).type?{...c,suggestionTypes:["conjunction"]}:o):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=je()),t}function ve(){var e,t,n,r,a;if(e=X,(t=me())!==i){if(n=[],r=X,Oe()!==i&&(a=me())!==i?(ee=r,r=J(0,a)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(a=me())!==i?(ee=r,r=J(0,a)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=Ae&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("and",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=me()),e}function me(){var e,t,n;return e=X,Ee()!==i&&(t=ye())!==i?(ee=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ue("not",[n(e)])):(X=e,e=i),e===i&&(e=ye()),e}function je(){var e,t;return ie++,e=X,(t=ke())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=De(!0);return n=>Ue("is",[n,e,t])}(t)),(e=t)===i&&(e=X,(t=Ce())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!qe&&"wildcard"===e.type&&Ne.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new r("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:ce(ee,X))}();const t=De(!1);return n=>Ue("is",[n,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&le(O)),e}function xe(){var t,n,r,a,s;if(ie++,t=X,n=[],(r=Pe())!==i)for(;r!==i;)n.push(r),r=Pe();else n=i;if(n!==i)if("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(M)),r!==i){if(a=[],(s=Pe())!==i)for(;s!==i;)a.push(s),s=Pe();else a=i;a!==i?t=n=[n,r,a]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(E)),t}function Oe(){var t,n,r,a,s;if(ie++,t=X,n=[],(r=Pe())!==i)for(;r!==i;)n.push(r),r=Pe();else n=i;if(n!==i)if("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(T)),r!==i){if(a=[],(s=Pe())!==i)for(;s!==i;)a.push(s),s=Pe();else a=i;a!==i?t=n=[n,r,a]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(k)),t}function Ee(){var t,n,r,a;if(ie++,t=X,"not"===e.substr(X,3).toLowerCase()?(n=e.substr(X,3),X+=3):(n=i,0===ie&&le(_)),n!==i){if(r=[],(a=Pe())!==i)for(;a!==i;)r.push(a),a=Pe();else r=i;r!==i?t=n=[n,r]:(X=t,t=i)}else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(C)),t}function Me(){var e;return ie++,(e=ke())===i&&(e=Ce()),ie--,e===i&&0===ie&&le(w),e}function ke(){var t,n,r,a,s,u,c;if(t=X,ee=X,(n=(n=Y())?void 0:i)!==i)if(34===e.charCodeAt(X)?(r=o,X++):(r=i,0===ie&&le(S)),r!==i){for(a=[],s=Te();s!==i;)a.push(s),s=Te();if((s=Le())!==i){for(u=[],c=Te();c!==i;)u.push(c),c=Te();34===e.charCodeAt(X)?(c=o,X++):(c=i,0===ie&&le(S)),c!==i?(ee=t,t=Z(a,s,u)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;else X=t,t=i;if(t===i)if(t=X,34===e.charCodeAt(X)?(n=o,X++):(n=i,0===ie&&le(S)),n!==i){for(r=[],a=Te();a!==i;)r.push(a),a=Te();34===e.charCodeAt(X)?(a=o,X++):(a=i,0===ie&&le(S)),a!==i?(ee=t,t=De(r.join(""))):(X=t,t=i)}else X=t,t=i;return t}function Te(){var t,n,r;return(t=Se())===i&&(t=Fe())===i&&(t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(I)),n!==i?(d.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(F)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t===i&&(t=X,n=X,ie++,r=Le(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(f.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(R)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i))),t}function Ce(){var e,t,n,r,a,s;if(e=X,ee=X,(t=(t=Y())?void 0:i)!==i){for(n=[],r=_e();r!==i;)n.push(r),r=_e();if((r=Le())!==i){for(a=[],s=_e();s!==i;)a.push(s),s=_e();ee=e,e=Z(n,r,a)}else X=e,e=i}else X=e,e=i;if(e===i){if(e=X,t=[],(n=_e())!==i)for(;n!==i;)t.push(n),n=_e();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?De(null):"true"===t?De(!0):"false"===t?De(!1):e.includes(ze)?Be(t):De(t)}(t)),e=t}return e}function _e(){var t,n,r,a,s;return(t=Se())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(I)),n!==i&&(r=Ie())!==i?(ee=t,t=r):(X=t,t=i),t}(),t===i&&(t=Fe())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(I)),n!==i?("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(M)),r===i&&("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(T)),r===i&&("not"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(_)))),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}(),t===i&&(t=function(){var t,n;return t=X,42===e.charCodeAt(X)?(n="*",X++):(n=i,0===ie&&le(L)),n!==i&&(ee=t,n=ze),n}(),t===i&&(t=X,n=X,ie++,r=Ie(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(r=X,ie++,a=function(){var e;return(e=xe())===i&&(e=Oe())===i&&(e=Ee()),e}(),ie--,a===i?r=void 0:(X=r,r=i),r!==i?(a=X,ie++,s=Le(),ie--,s===i?a=void 0:(X=a,a=i),a!==i?(e.length>X?(s=e.charAt(X),X++):(s=i,0===ie&&le(P)),s!==i?(ee=t,t=s):(X=t,t=i)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i))))),t}function we(){var e,t,n,r,a,s;if(e=X,ee=X,(t=(t=Y())?void 0:i)!==i){for(n=[],r=Pe();r!==i;)n.push(r),r=Pe();if((r=Le())!==i){for(a=[],s=Pe();s!==i;)a.push(s),s=Pe();ee=e,e=Z(n,r,a)}else X=e,e=i}else X=e,e=i;if(e===i)for(e=[],t=Pe();t!==i;)e.push(t),t=Pe();return e}function Se(){var t,n;return t=X,"\\t"===e.substr(X,2)?(n="\\t",X+=2):(n=i,0===ie&&le(A)),n!==i&&(ee=t,n="\t"),(t=n)===i&&(t=X,"\\r"===e.substr(X,2)?(n="\\r",X+=2):(n=i,0===ie&&le(Q)),n!==i&&(ee=t,n="\r"),(t=n)===i&&(t=X,"\\n"===e.substr(X,2)?(n="\\n",X+=2):(n=i,0===ie&&le(q)),n!==i&&(ee=t,n="\n"),t=n)),t}function Ie(){var t;return p.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(N)),t}function Fe(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(I)),n!==i?(r=function(){var t,n,r,a,s,u,o,c,l;return t=X,117===e.charCodeAt(X)?(n="u",X++):(n=i,0===ie&&le(U)),n!==i?(r=X,a=X,(s=Re())!==i&&(u=Re())!==i&&(o=Re())!==i&&(c=Re())!==i?a=s=[s,u,o,c]:(X=a,a=i),(r=a!==i?e.substring(r,X):a)!==i?(ee=t,l=r,t=String.fromCharCode(parseInt(l,16))):(X=t,t=i)):(X=t,t=i),t}(),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}function Re(){var t;return h.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(D)),t}function Pe(){var t;return ie++,g.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(V)),ie--,t===i&&0===ie&&le(G),t}function Le(){var t,n;return t=X,ee=X,(Y()?void 0:i)!==i?(e.substr(X,14)===l?(n=l,X+=14):(n=i,0===ie&&le(W)),n!==i?(ee=t,t=Qe):(X=t,t=i)):(X=t,t=i),t}const{parseCursor:Ae,cursorSymbol:Qe,allowLeadingWildcards:qe=!0,helpers:{nodeTypes:Ne}}=t,Ue=Ne.function.buildNodeWithArgumentNodes,De=Ne.literal.buildNode,Be=Ne.wildcard.buildNode,{wildcardSymbol:ze}=Ne.wildcard;if((n=u())!==i&&X===e.length)return n;throw n!==i&&X<e.length&&le({type:"end"}),Ke=re,He=ne<e.length?e.charAt(ne):null,Ge=ne<e.length?ce(ne,ne+1):ce(ne,ne),new r(r.buildMessage(Ke,He),Ke,He,Ge);var Ke,He,Ge}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=n(5),a=r.__importDefault(n(88));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=a.default(e,t),s=r[0],u=r[1],o=r[2];return i.useEffect(o,n),[s,u]}},function(e,t,n){e.exports=n(10)(990)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.Query=void 0;var i=r(n(28)),a=n(27),s=n(29),u=n(40),o=n(37),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,i.default)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,a.isValidTimeout)(this.cacheTime)&&(this.gcTimeout=setTimeout((function(){e.optionalRemove()}),this.cacheTime))},t.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,r,i=this.state.data,s=(0,a.functionalUpdate)(e,i);return(null==(n=(r=this.options).isDataEqual)?void 0:n.call(r,i,s))?s=i:!1!==this.options.structuralSharing&&(s=(0,a.replaceEqualDeep)(i,s)),this.dispatch({data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),s},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(a.noop).catch(a.noop):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some((function(e){return!1!==e.options.enabled}))},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((function(e){return e.getCurrentResult().isStale}))},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,a.timeUntilStale)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnWindowFocus()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnReconnect()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((function(t){return t!==e})),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,r,i,s=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var l=this.observers.find((function(e){return e.options.queryFn}));l&&this.setOptions(l.options)}var d=(0,a.ensureQueryKeyArray)(this.queryKey),f=(0,a.getAbortController)(),p={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(p,"signal",{enumerable:!0,get:function(){if(f)return s.abortSignalConsumed=!0,f.signal}});var h,g,b={fetchOptions:t,options:this.options,queryKey:d,state:this.state,fetchFn:function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(p)):Promise.reject("Missing queryFn")},meta:this.meta};return(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(h=this.options.behavior)||h.onFetch(b)),this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=b.fetchOptions)?void 0:r.meta)||this.dispatch({type:"fetch",meta:null==(g=b.fetchOptions)?void 0:g.meta}),this.retryer=new o.Retryer({fn:b.fetchFn,abort:null==f||null==(i=f.abort)?void 0:i.bind(f),onSuccess:function(e){s.setData(e),null==s.cache.config.onSuccess||s.cache.config.onSuccess(e,s),0===s.cacheTime&&s.optionalRemove()},onError:function(e){(0,o.isCancelledError)(e)&&e.silent||s.dispatch({type:"error",error:e}),(0,o.isCancelledError)(e)||(null==s.cache.config.onError||s.cache.config.onError(e,s),(0,u.getLogger)().error(e)),0===s.cacheTime&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:b.options.retry,retryDelay:b.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),s.notifyManager.batch((function(){t.observers.forEach((function(t){t.onQueryUpdate(e)})),t.cache.notify({query:t,type:"queryUpdated",action:e})}))},t.getDefaultState=function(e){var t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==e.initialData?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r=void 0!==t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var n,r;switch(t.type){case"failed":return(0,i.default)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,i.default)({},e,{isPaused:!0});case"continue":return(0,i.default)({},e,{isPaused:!1});case"fetch":return(0,i.default)({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,i.default)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(r=t.dataUpdatedAt)?r:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=t.error;return(0,o.isCancelledError)(a)&&a.revert&&this.revertState?(0,i.default)({},this.revertState):(0,i.default)({},e,{error:a,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,i.default)({},e,{isInvalidated:!0});case"setState":return(0,i.default)({},e,t.state);default:return e}},e}();t.Query=c},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.QueryClient=void 0;var i=r(n(28)),a=n(27),s=n(45),u=n(46),o=n(39),c=n(42),l=n(29),d=n(48),f=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new s.QueryCache,this.mutationCache=e.mutationCache||new u.MutationCache,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=o.focusManager.subscribe((function(){o.focusManager.isFocused()&&c.onlineManager.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())})),this.unsubscribeOnline=c.onlineManager.subscribe((function(){o.focusManager.isFocused()&&c.onlineManager.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())}))},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=(0,a.parseFilterArgs)(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll((0,i.default)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map((function(e){return[e.queryKey,e.state.data]}))},t.setQueryData=function(e,t,n){var r=(0,a.parseQueryArgs)(e),i=this.defaultQueryOptions(r);return this.queryCache.build(this,i).setData(t,n)},t.setQueriesData=function(e,t,n){var r=this;return l.notifyManager.batch((function(){return r.getQueryCache().findAll(e).map((function(e){var i=e.queryKey;return[i,r.setQueryData(i,t,n)]}))}))},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=(0,a.parseFilterArgs)(e,t)[0],r=this.queryCache;l.notifyManager.batch((function(){r.findAll(n).forEach((function(e){r.remove(e)}))}))},t.resetQueries=function(e,t,n){var r=this,s=(0,a.parseFilterArgs)(e,t,n),u=s[0],o=s[1],c=this.queryCache,d=(0,i.default)({},u,{active:!0});return l.notifyManager.batch((function(){return c.findAll(u).forEach((function(e){e.reset()})),r.refetchQueries(d,o)}))},t.cancelQueries=function(e,t,n){var r=this,i=(0,a.parseFilterArgs)(e,t,n),s=i[0],u=i[1],o=void 0===u?{}:u;void 0===o.revert&&(o.revert=!0);var c=l.notifyManager.batch((function(){return r.queryCache.findAll(s).map((function(e){return e.cancel(o)}))}));return Promise.all(c).then(a.noop).catch(a.noop)},t.invalidateQueries=function(e,t,n){var r,s,u,o=this,c=(0,a.parseFilterArgs)(e,t,n),d=c[0],f=c[1],p=(0,i.default)({},d,{active:null==(r=null!=(s=d.refetchActive)?s:d.active)||r,inactive:null!=(u=d.refetchInactive)&&u});return l.notifyManager.batch((function(){return o.queryCache.findAll(d).forEach((function(e){e.invalidate()})),o.refetchQueries(p,f)}))},t.refetchQueries=function(e,t,n){var r=this,s=(0,a.parseFilterArgs)(e,t,n),u=s[0],o=s[1],c=l.notifyManager.batch((function(){return r.queryCache.findAll(u).map((function(e){return e.fetch(void 0,(0,i.default)({},o,{meta:{refetchPage:null==u?void 0:u.refetchPage}}))}))})),d=Promise.all(c).then(a.noop);return(null==o?void 0:o.throwOnError)||(d=d.catch(a.noop)),d},t.fetchQuery=function(e,t,n){var r=(0,a.parseQueryArgs)(e,t,n),i=this.defaultQueryOptions(r);void 0===i.retry&&(i.retry=!1);var s=this.queryCache.build(this,i);return s.isStaleByTime(i.staleTime)?s.fetch(i):Promise.resolve(s.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(a.noop).catch(a.noop)},t.fetchInfiniteQuery=function(e,t,n){var r=(0,a.parseQueryArgs)(e,t,n);return r.behavior=(0,d.infiniteQueryBehavior)(),this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(a.noop).catch(a.noop)},t.cancelMutations=function(){var e=this,t=l.notifyManager.batch((function(){return e.mutationCache.getAll().map((function(e){return e.cancel()}))}));return Promise.all(t).then(a.noop).catch(a.noop)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find((function(t){return(0,a.hashQueryKey)(e)===(0,a.hashQueryKey)(t.queryKey)}));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find((function(t){return(0,a.partialMatchKey)(e,t.queryKey)})))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find((function(t){return(0,a.hashQueryKey)(e)===(0,a.hashQueryKey)(t.mutationKey)}));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find((function(t){return(0,a.partialMatchKey)(e,t.mutationKey)})))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,i.default)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,a.hashQueryKeyByOptions)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,i.default)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}();t.QueryClient=f},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.dehydrate=function(e,t){var n,r,i=[],u=[];if(!1!==(null==(n=t=t||{})?void 0:n.dehydrateMutations)){var o=t.shouldDehydrateMutation||a;e.getMutationCache().getAll().forEach((function(e){o(e)&&i.push(function(e){return{mutationKey:e.options.mutationKey,state:e.state}}(e))}))}if(!1!==(null==(r=t)?void 0:r.dehydrateQueries)){var c=t.shouldDehydrateQuery||s;e.getQueryCache().getAll().forEach((function(e){c(e)&&u.push(function(e){return{state:e.state,queryKey:e.queryKey,queryHash:e.queryHash}}(e))}))}return{mutations:i,queries:u}},t.hydrate=function(e,t,n){if("object"==typeof t&&null!==t){var r=e.getMutationCache(),a=e.getQueryCache(),s=t.mutations||[],u=t.queries||[];s.forEach((function(t){var a;r.build(e,(0,i.default)({},null==n||null==(a=n.defaultOptions)?void 0:a.mutations,{mutationKey:t.mutationKey}),t.state)})),u.forEach((function(t){var r,s=a.get(t.queryHash);s?s.state.dataUpdatedAt<t.state.dataUpdatedAt&&s.setState(t.state):a.build(e,(0,i.default)({},null==n||null==(r=n.defaultOptions)?void 0:r.queries,{queryKey:t.queryKey,queryHash:t.queryHash}),t.state)}))}};var i=r(n(28));function a(e){return e.state.isPaused}function s(e){return"success"===e.state.status}},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0;var r={QueryClientProvider:!0,useQueryClient:!0,QueryErrorResetBoundary:!0,useQueryErrorResetBoundary:!0,useIsFetching:!0,useIsMutating:!0,useMutation:!0,useQuery:!0,useQueries:!0,useInfiniteQuery:!0,useHydrate:!0,Hydrate:!0};t.Hydrate=t.useHydrate=t.useInfiniteQuery=t.useQueries=t.useQuery=t.useMutation=t.useIsMutating=t.useIsFetching=t.useQueryErrorResetBoundary=t.QueryErrorResetBoundary=t.useQueryClient=t.QueryClientProvider=void 0,n(64),n(66);var i=n(35);t.QueryClientProvider=i.QueryClientProvider,t.useQueryClient=i.useQueryClient;var a=n(52);t.QueryErrorResetBoundary=a.QueryErrorResetBoundary,t.useQueryErrorResetBoundary=a.useQueryErrorResetBoundary;var s=n(68);t.useIsFetching=s.useIsFetching;var u=n(69);t.useIsMutating=u.useIsMutating;var o=n(70);t.useMutation=o.useMutation;var c=n(71);t.useQuery=c.useQuery;var l=n(72);t.useQueries=l.useQueries;var d=n(74);t.useInfiniteQuery=d.useInfiniteQuery;var f=n(75);t.useHydrate=f.useHydrate,t.Hydrate=f.Hydrate;var p=n(76);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=p[e]))}))},function(e,t,n){"use strict";var r=n(36),i=n(65);r.notifyManager.setBatchNotifyFunction(i.unstable_batchedUpdates)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.unstable_batchedUpdates=void 0;var i=r(n(17)).default.unstable_batchedUpdates;t.unstable_batchedUpdates=i},function(e,t,n){"use strict";var r=n(36),i=n(67);(0,r.setLogger)(i.logger)},function(e,t,n){"use strict";t.__esModule=!0,t.logger=void 0;var r=console;t.logger=r},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.useIsFetching=function(e,t){var n=i.default.useRef(!1),r=(0,u.useQueryClient)(),o=(0,s.parseFilterArgs)(e,t)[0],c=i.default.useState(r.isFetching(o)),l=c[0],d=c[1],f=i.default.useRef(o);f.current=o;var p=i.default.useRef(l);return p.current=l,i.default.useEffect((function(){n.current=!0;var e=r.getQueryCache().subscribe(a.notifyManager.batchCalls((function(){if(n.current){var e=r.isFetching(f.current);p.current!==e&&d(e)}})));return function(){n.current=!1,e()}}),[r]),l};var i=r(n(5)),a=n(29),s=n(27),u=n(35)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.useIsMutating=function(e,t){var n=i.default.useRef(!1),r=(0,s.parseMutationFilterArgs)(e,t),o=(0,u.useQueryClient)(),c=i.default.useState(o.isMutating(r)),l=c[0],d=c[1],f=i.default.useRef(r);f.current=r;var p=i.default.useRef(l);return p.current=l,i.default.useEffect((function(){n.current=!0;var e=o.getMutationCache().subscribe(a.notifyManager.batchCalls((function(){if(n.current){var e=o.isMutating(f.current);p.current!==e&&d(e)}})));return function(){n.current=!1,e()}}),[o]),l};var i=r(n(5)),a=n(29),s=n(27),u=n(35)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.useMutation=function(e,t,n){var r=a.default.useRef(!1),d=a.default.useState(0)[1],f=(0,u.parseMutationArgs)(e,t,n),p=(0,c.useQueryClient)(),h=a.default.useRef();h.current?h.current.setOptions(f):h.current=new o.MutationObserver(p,f);var g=h.current.getCurrentResult();a.default.useEffect((function(){r.current=!0;var e=h.current.subscribe(s.notifyManager.batchCalls((function(){r.current&&d((function(e){return e+1}))})));return function(){r.current=!1,e()}}),[]);var b=a.default.useCallback((function(e,t){h.current.mutate(e,t).catch(u.noop)}),[]);if(g.error&&(0,l.shouldThrowError)(void 0,h.current.options.useErrorBoundary,g.error))throw g.error;return(0,i.default)({},g,{mutate:b,mutateAsync:g.mutate})};var i=r(n(28)),a=r(n(5)),s=n(29),u=n(27),o=n(51),c=n(35),l=n(53)},function(e,t,n){"use strict";t.__esModule=!0,t.useQuery=function(e,t,n){var s=(0,i.parseQueryArgs)(e,t,n);return(0,a.useBaseQuery)(s,r.QueryObserver)};var r=n(36),i=n(27),a=n(54)},function(e,t,n){"use strict";var r=n(73);t.__esModule=!0,t.useQueries=function(e){var t=i.default.useRef(!1),n=i.default.useState(0)[1],r=(0,u.useQueryClient)(),o=(0,i.useMemo)((function(){return e.map((function(e){var t=r.defaultQueryObserverOptions(e);return t.optimisticResults=!0,t}))}),[e,r]),c=i.default.useState((function(){return new s.QueriesObserver(r,o)}))[0],l=c.getOptimisticResult(o);return i.default.useEffect((function(){t.current=!0;var e=c.subscribe(a.notifyManager.batchCalls((function(){t.current&&n((function(e){return e+1}))})));return function(){t.current=!1,e()}}),[c]),i.default.useEffect((function(){c.setQueries(o,{listeners:!1})}),[o,c]),l};var i=r(n(5)),a=n(29),s=n(49),u=n(35)},function(e,t,n){e.exports=n(10)(2566)},function(e,t,n){"use strict";t.__esModule=!0,t.useInfiniteQuery=function(e,t,n){var s=(0,i.parseQueryArgs)(e,t,n);return(0,a.useBaseQuery)(s,r.InfiniteQueryObserver)};var r=n(50),i=n(27),a=n(54)},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.useHydrate=u,t.Hydrate=void 0;var i=r(n(5)),a=n(36),s=n(35);function u(e,t){var n=(0,s.useQueryClient)(),r=i.default.useRef(t);r.current=t,i.default.useMemo((function(){e&&(0,a.hydrate)(n,e,r.current)}),[n,e])}t.Hydrate=function(e){var t=e.children,n=e.options;return u(e.state,n),t}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var r=n(78),i=n(79);function a(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=a,t.parseJSON=function(e,t){return a((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return a((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fold=function(e,n){return function(r){return t.isLeft(r)?e(r.left):n(r.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(r){return e(r)?t.right(r):t.left(n(r))}))};var s=function(e,n){return i.pipe(e,t.map(n))},u=function(e,n){return i.pipe(e,t.ap(n))},o=function(e,n){return i.pipe(e,t.chain(n))},c=function(e,n,r){return i.pipe(e,t.reduce(n,r))},l=function(e){return function(n,r){var a=t.foldMap(e);return i.pipe(n,a(r))}},d=function(e,n,r){return i.pipe(e,t.reduceRight(n,r))},f=function(e){var n=t.traverse(e);return function(e,t){return i.pipe(e,n(t))}},p=function(e,n,r){return i.pipe(e,t.bimap(n,r))},h=function(e,n){return i.pipe(e,t.mapLeft(n))},g=function(e,n){return i.pipe(e,t.alt(n))},b=function(e,n){return i.pipe(e,t.extend(n))},y=function(e,n){return r.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function v(e){return{concat:function(n,r){return t.isLeft(n)?n:t.isLeft(r)?r:t.right(e.concat(n.right,r.right))}}}function m(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:s,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,r){return t.isLeft(e)||r(e.right)?e:n},filterMap:function(e,r){if(t.isLeft(e))return e;var i=r(e.right);return"None"===i._tag?n:t.right(i.value)},partition:function(e,r){return t.isLeft(e)?{left:e,right:e}:r(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,r){if(t.isLeft(e))return{left:e,right:e};var i=r(e.right);return t.isLeft(i)?{left:t.right(i.left),right:n}:{left:n,right:t.right(i.right)}}}}function j(e){return{URI:t.URI,_E:void 0,map:s,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.left,r.left)):n:t.isLeft(r)?r:t.right(n.right(r.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:s,alt:function(n,r){if(t.isRight(n))return n;var i=r();return t.isLeft(i)?t.left(e.concat(n.left,i.left)):i}}}function O(e,n){return{concat:function(r,i){return t.isLeft(r)?t.isLeft(i)?t.left(e.concat(r.left,i.left)):r:t.isLeft(i)?i:t.right(n.concat(r.right,i.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(r){return t.isLeft(r)?t.left(e(r.left)):t.right(n(r.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return i.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return i.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return i.pipe(n,t.chainW((function(n){return i.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(i.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(i.identity),t.reduce=function(e,n){return function(r){return t.isLeft(r)?e:n(e,r.right)}},t.foldMap=function(e){return function(n){return function(r){return t.isLeft(r)?e.empty:n(r.right)}}},t.reduceRight=function(e,n){return function(r){return t.isLeft(r)?e:n(r.right,e)}},t.traverse=function(e){return function(n){return function(r){return t.isLeft(r)?e.of(t.left(r.left)):e.map(n(r.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(r){return t.isLeft(r)?"left("+e.show(r.left)+")":"right("+n.show(r.right)+")"}}},t.getEq=function(e,n){return{equals:function(r,i){return r===i||(t.isLeft(r)?t.isLeft(i)&&e.equals(r.left,i.left):t.isRight(i)&&n.equals(r.right,i.right))}}},t.getSemigroup=function(e){return{concat:function(n,r){return t.isLeft(r)?n:t.isLeft(n)?r:t.right(e.concat(n.right,r.right))}}},t.getApplySemigroup=v,t.getApplyMonoid=function(e){return{concat:v(e).concat,empty:t.right(e.empty)}},t.getFilterable=m,t.getWitherable=function(e){var n=m(e);return{URI:t.URI,_E:void 0,map:s,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:f,sequence:t.sequence,reduce:c,foldMap:l,reduceRight:d,wither:function(e){var t=f(e);return function(r,i){return e.map(t(r,i),n.compact)}},wilt:function(e){var t=f(e);return function(r,i){return e.map(t(r,i),n.separate)}}}},t.getApplicativeValidation=j,t.getAltValidation=x,t.getValidation=function(e){var n=j(e),r=x(e);return{URI:t.URI,_E:void 0,map:s,of:t.of,chain:o,bimap:p,mapLeft:h,reduce:c,foldMap:l,reduceRight:d,extend:b,traverse:f,sequence:t.sequence,chainRec:y,throwError:t.throwError,ap:n.ap,alt:r.alt}},t.getValidationSemigroup=O,t.Functor={URI:t.URI,map:s},t.Applicative={URI:t.URI,map:s,ap:u,of:t.of},t.Monad={URI:t.URI,map:s,ap:u,of:t.of,chain:o},t.Foldable={URI:t.URI,reduce:c,foldMap:l,reduceRight:d},t.Traversable={URI:t.URI,map:s,reduce:c,foldMap:l,reduceRight:d,traverse:f,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:p,mapLeft:h},t.Alt={URI:t.URI,map:s,alt:g},t.Extend={URI:t.URI,map:s,extend:b},t.ChainRec={URI:t.URI,map:s,ap:u,chain:o,chainRec:y},t.MonadThrow={URI:t.URI,map:s,ap:u,of:t.of,chain:o,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:O(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:s,of:t.of,ap:u,chain:o,reduce:c,foldMap:l,reduceRight:d,traverse:f,sequence:t.sequence,bimap:p,mapLeft:h,alt:g,extend:b,chainRec:y,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,r){return!t.isLeft(r)&&e.equals(n,r.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(i.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(r){return i.pipe(n(r),t.map((function(t){return i.bind_(r,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return i.flow(t.map((function(t){return function(n){return i.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";function r(e){return e}function i(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=r,t.unsafeCoerce=r,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,r,i,a,s,u,o){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return u(s(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return o(u(s(a(i(r(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=i,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,r,i,a,s,u,o,c,l,d,f,p,h,g,b,y,v,m){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return s(a(i(r(n(t(e))))));case 8:return u(s(a(i(r(n(t(e)))))));case 9:return o(u(s(a(i(r(n(t(e))))))));case 10:return c(o(u(s(a(i(r(n(t(e)))))))));case 11:return l(c(o(u(s(a(i(r(n(t(e))))))))));case 12:return d(l(c(o(u(s(a(i(r(n(t(e)))))))))));case 13:return f(d(l(c(o(u(s(a(i(r(n(t(e))))))))))));case 14:return p(f(d(l(c(o(u(s(a(i(r(n(t(e)))))))))))));case 15:return h(p(f(d(l(c(o(u(s(a(i(r(n(t(e))))))))))))));case 16:return g(h(p(f(d(l(c(o(u(s(a(i(r(n(t(e)))))))))))))));case 17:return b(g(h(p(f(d(l(c(o(u(s(a(i(r(n(t(e))))))))))))))));case 18:return y(b(g(h(p(f(d(l(c(o(u(s(a(i(r(n(t(e)))))))))))))))));case 19:return v(y(b(g(h(p(f(d(l(c(o(u(s(a(i(r(n(t(e))))))))))))))))));case 20:return m(v(y(b(g(h(p(f(d(l(c(o(u(s(a(i(r(n(t(e)))))))))))))))))))}},t.hole=i,t.bind_=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){e.exports=n(10)(15)},function(e,t,n){e.exports=n(10)(13)},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){e.exports=n(10)(18)},function(e,t,n){e.exports=n(10)(2564)},function(e,t,n){e.exports=n(10)(2572)},function(e,t,n){e.exports=n.p+"4c19e824d4ddbcb450a8dd5b72ceb88f.svg"},function(e,t,n){e.exports=n.p+"556aaa7f500540cdf81296a57d2a1399.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.default=function(e,t){void 0===t&&(t=0);var n=r.useRef(!1),i=r.useRef(),a=r.useRef(e),s=r.useCallback((function(){return n.current}),[]),u=r.useCallback((function(){n.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout((function(){n.current=!0,a.current()}),t)}),[t]),o=r.useCallback((function(){n.current=null,i.current&&clearTimeout(i.current)}),[]);return r.useEffect((function(){a.current=e}),[e]),r.useEffect((function(){return u(),o}),[t]),[s,o,u]}},function(e,t,n){"use strict";n.r(t),n.d(t,"renderApp",(function(){return Ka}));var r={};n.r(r),n.d(r,"buildNode",(function(){return It})),n.d(r,"toElasticsearchQuery",(function(){return Ft}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return Rt})),n.d(i,"buildNode",(function(){return At})),n.d(i,"test",(function(){return Qt})),n.d(i,"toElasticsearchQuery",(function(){return qt})),n.d(i,"toQueryStringQuery",(function(){return Nt})),n.d(i,"hasLeadingWildcard",(function(){return Ut}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return Vt})),n.d(a,"toElasticsearchQuery",(function(){return Wt}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return $t})),n.d(s,"toElasticsearchQuery",(function(){return Jt}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return Yt})),n.d(u,"toElasticsearchQuery",(function(){return Zt}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return Xt})),n.d(o,"toElasticsearchQuery",(function(){return en}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return tn})),n.d(c,"toElasticsearchQuery",(function(){return nn}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return rn})),n.d(l,"toElasticsearchQuery",(function(){return an}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return sn})),n.d(d,"toElasticsearchQuery",(function(){return un}));var f={};n.r(f),n.d(f,"buildNode",(function(){return cn})),n.d(f,"buildNodeWithArgumentNodes",(function(){return ln})),n.d(f,"toElasticsearchQuery",(function(){return dn}));var p=n(5),h=n.n(p),g=n(17),b=n.n(g),y=n(13),v=n(28),m=n.n(v),j=n(9),x=n(11),O=n(30),E=n(7),M=n(1),k=n(12);const T=k.i18n.translate("xpack.csp.navigation.cloudPostureBreadcrumbLabel",{defaultMessage:"Cloud Posture"}),C=k.i18n.translate("xpack.csp.navigation.findingsPageLabel",{defaultMessage:"Findings"}),_=k.i18n.translate("xpack.csp.navigation.dashboardPageLabel",{defaultMessage:"Dashboard"}),w=k.i18n.translate("xpack.csp.navigation.myBenchmarksPageLabel",{defaultMessage:"My Benchmarks"}),S="logs-cloud_security_posture.findings_latest-*",I="passed",F="failed",R="csp_rule",P={dashboard:{name:_,path:"/dashboard"},findings:{name:C,path:"/findings"},rules:{name:"Rules",path:"/benchmarks/:packagePolicyId/:policyId/rules",disabled:!1},benchmarks:{name:w,path:"/benchmarks",exact:!0,disabled:!1}},L={findings_default:{name:C,path:"/findings/default"},findings_by_resource:{name:C,path:"/findings/resource"},resource_findings:{name:C,path:"/findings/resource/:resourceId"}};var A=n(6);const Q=({children:e,...t})=>{const{euiTheme:n}=Object(E.useEuiTheme)();return Object(A.jsx)(E.EuiFlexGroup,{css:Object(A.css)("padding:",n.size.l,";",""),direction:"column",alignItems:"center","data-test-subj":t["data-test-subj"]},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiLoadingSpinner,{size:"xl"})),Object(A.jsx)(E.EuiFlexItem,null,e))},q={PAGE_TITLE:k.i18n.translate("xpack.csp.cspPageTemplate.packageNotInstalled.pageTitle",{defaultMessage:"Install Integration to get started"}),SOLUTION:k.i18n.translate("xpack.csp.cspPageTemplate.packageNotInstalled.solutionNameLabel",{defaultMessage:"Cloud Security Posture"}),BUTTON_TITLE:k.i18n.translate("xpack.csp.cspPageTemplate.packageNotInstalled.buttonLabel",{defaultMessage:"Add a CIS integration"}),DESCRIPTION:k.i18n.translate("xpack.csp.cspPageTemplate.packageNotInstalled.description",{defaultMessage:"Use our CIS Kubernetes Benchmark integration to measure your Kubernetes cluster setup against the CIS recommendations."})},N={PAGE_TITLE:k.i18n.translate("xpack.csp.cspPageTemplate.defaultNoDataConfig.pageTitle",{defaultMessage:"No data found"}),SOLUTION:k.i18n.translate("xpack.csp.cspPageTemplate.defaultNoDataConfig.solutionNameLabel",{defaultMessage:"Cloud Security Posture"})},U=k.i18n.translate("xpack.csp.cspPageTemplate.navigationTitle",{defaultMessage:"Cloud Security Posture"});var D=n(18);const B=()=>Object(y.useKibana)(),z=()=>{const{http:e}=B().services;return Object(O.useQuery)(["integrations"],(()=>e.get(D.epmRouteService.getInfoPath("cloud_security_posture"),{query:{experimental:!0}})))};var K=n(15);const H=()=>{const{http:e}=B().services,t=z();if(!t.isSuccess)return;const n=K.pagePathGetters.integration_details_overview({pkgkey:Object(K.pkgKeyFromPackageInfo)({name:t.data.item.name,version:t.data.item.version})}).join("/");return e.basePath.prepend(n)},G=e=>{if(!("body"in e))return!1;const{body:{error:t,message:n,statusCode:r}}=e;return!!(t&&n&&r)},V={fontWeight:700},W={solutionNav:{name:U,items:($={dashboard:P.dashboard,findings:P.findings,benchmark:P.benchmarks},Object.entries($).filter((([e,t])=>!t.disabled)).map((([e,t])=>({id:e,name:t.name,renderItem:()=>Object(A.jsx)(x.NavLink,{to:t.path,activeStyle:V},t.name)}))))},restrictWidth:!1};var $;const J={pageTitle:N.PAGE_TITLE,solution:N.SOLUTION,docsLink:"https://www.elastic.co/guide/index.html",logo:"logoSecurity",actions:{}},Y=()=>Object(A.jsx)(Q,{"data-test-subj":"csp_page_template_loading"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.cspPageTemplate.loadingDescription",defaultMessage:"Loading..."})),Z=e=>Object(A.jsx)(E.EuiEmptyPrompt,{color:"danger",iconType:"alert","data-test-subj":"csp_page_template_error",title:Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiTitle,null,Object(A.jsx)("h2",null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.pageTemplate.loadErrorMessage",defaultMessage:"We couldn't fetch your cloud security posture data"}))),G(e)&&Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiTitle,{size:"xs"},Object(A.jsx)("h5",null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.pageTemplate.errorDetails.errorCodeTitle",defaultMessage:"{error} {statusCode}",values:{error:e.body.error,statusCode:e.body.statusCode}}))),Object(A.jsx)(E.EuiTitle,{size:"xs"},Object(A.jsx)("h5",null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.pageTemplate.errorDetails.errorBodyTitle",defaultMessage:"{body}",values:{body:e.body.message}})))))}),X=({query:e,children:t,loadingRender:n=Y,errorRender:r=Z,...i})=>{const a=z(),s=H();return Object(A.jsx)(y.KibanaPageTemplate,m()({},W,i,{template:null!=e&&e.isLoading||null!=e&&e.isError||a.isLoading?"centeredContent":i.template||"default",noDataConfig:a.isSuccess?"installed"!==(null===(u=a.data)||void 0===u?void 0:u.item.status)?(e=>({pageTitle:q.PAGE_TITLE,solution:q.SOLUTION,docsLink:"https://www.elastic.co/guide/index.html",logo:"logoSecurity",actions:{elasticAgent:{href:e,isDisabled:!e,title:q.BUTTON_TITLE,description:q.DESCRIPTION}}}))(s):null==e||!e.isSuccess||null!=e&&e.data?i.noDataConfig:i.noDataConfig||J:void 0}),Object(A.jsx)(E.EuiErrorBoundary,null,Object(A.jsx)(h.a.Fragment,null,null!=e&&e.isLoading||null!=e&&e.isIdle||a.isLoading?n():null!=e&&e.isError?r(e.error):(null!=e&&e.isSuccess,t))));var u},ee=h.a.memo((()=>Object(A.jsx)(X,{template:"centeredContent"},Object(A.jsx)(E.EuiEmptyPrompt,{"data-test-subj":"unknownRoute",iconColor:"default",iconType:"logoElastic",title:Object(A.jsx)("p",null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.unknownRoute.pageNotFoundTitle",defaultMessage:"Page not found"}))})))),te=6e4,ne=Object(p.createContext)({}),re="findings_container";var ie=n(0);const ae=k.i18n.translate("xpack.csp.findings.nameLabel",{defaultMessage:"Name"}),se=k.i18n.translate("xpack.csp.findings.impactLabel",{defaultMessage:"Impact"}),ue=k.i18n.translate("xpack.csp.findings.defaultValueLabel",{defaultMessage:"Default Value"}),oe=k.i18n.translate("xpack.csp.findings.rationaleLabel",{defaultMessage:"Rationale"}),ce=k.i18n.translate("xpack.csp.findings.searchFailedLabel",{defaultMessage:"Search failed"}),le=(k.i18n.translate("xpack.csp.findings.tagsLabel",{defaultMessage:"Tags"}),k.i18n.translate("xpack.csp.findings.ruleNameLabel",{defaultMessage:"Rule Name"})),de=(k.i18n.translate("xpack.csp.findings.osLabel",{defaultMessage:"OS"}),k.i18n.translate("xpack.csp.findings.resourceLabel",{defaultMessage:"Resource"})),fe=k.i18n.translate("xpack.csp.findings.resourceNameLabel",{defaultMessage:"Resource Name"}),pe=(k.i18n.translate("xpack.csp.findings.findingsFlyout.generalTabLabel",{defaultMessage:"General"}),k.i18n.translate("xpack.csp.findings.findingsFlyout.overviewTabLabel",{defaultMessage:"Overview"})),he=k.i18n.translate("xpack.csp.findings.findingsFlyout.jsonTabLabel",{defaultMessage:"JSON"}),ge=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.resourceIdColumnLabel",{defaultMessage:"Resource ID"}),be=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.resultColumnLabel",{defaultMessage:"Result"}),ye=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.resourceTypeColumnLabel",{defaultMessage:"Resource Type"}),ve=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.clusterIdColumnLabel",{defaultMessage:"Cluster ID"}),me=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.ruleSectionColumnLabel",{defaultMessage:"CIS Section"}),je=k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.lastCheckedColumnLabel",{defaultMessage:"Last Checked"}),xe=(k.i18n.translate("xpack.csp.findings.filenameLabel",{defaultMessage:"Filename"}),k.i18n.translate("xpack.csp.findings.modeLabel",{defaultMessage:"Mode"}),k.i18n.translate("xpack.csp.findings.typeLabel",{defaultMessage:"Type"}),k.i18n.translate("xpack.csp.findings.pathLabel",{defaultMessage:"Path"}),k.i18n.translate("xpack.csp.findings.uidLabel",{defaultMessage:"UID"}),k.i18n.translate("xpack.csp.findings.gidLabel",{defaultMessage:"GID"}),k.i18n.translate("xpack.csp.findings.ruleLabel",{defaultMessage:"Rule"})),Oe=k.i18n.translate("xpack.csp.findings.descriptionLabel",{defaultMessage:"Description"}),Ee=k.i18n.translate("xpack.csp.findings.remediationLabel",{defaultMessage:"Remediation"}),Me=k.i18n.translate("xpack.csp.findings.benchmarkLabel",{defaultMessage:"Benchmark"}),ke=(k.i18n.translate("xpack.csp.findings.severityLabel",{defaultMessage:"Severity"}),k.i18n.translate("xpack.csp.findings.indexLabel",{defaultMessage:"Index"}),k.i18n.translate("xpack.csp.findings.ruleEvaluatedAt",{defaultMessage:"Rule evaluated at"}),k.i18n.translate("xpack.csp.findings.evaluatedAt",{defaultMessage:"Evaluated at"})),Te=k.i18n.translate("xpack.csp.findings.frameworkSourcesLabel",{defaultMessage:"Framework Sources"}),Ce=(k.i18n.translate("xpack.csp.findings.sectionLabel",{defaultMessage:"Section"}),k.i18n.translate("xpack.csp.findings.auditLabel",{defaultMessage:"Audit"})),_e=k.i18n.translate("xpack.csp.findings.findingsFlyout.generalTab.referencesLabel",{defaultMessage:"References"}),we=(k.i18n.translate("xpack.csp.findings.resultLabel",{defaultMessage:"Result Details"}),k.i18n.translate("xpack.csp.findings.profileApplicabilityLabel",{defaultMessage:"Profile Applicability"})),Se=(k.i18n.translate("xpack.csp.findings.evaluationLabel",{defaultMessage:"Evaluation"}),k.i18n.translate("xpack.csp.findings.expectedLabel",{defaultMessage:"Expected"})),Ie=k.i18n.translate("xpack.csp.findings.actualLabel",{defaultMessage:"Actual"}),Fe=k.i18n.translate("xpack.csp.findings.evidenceLabel",{defaultMessage:"Evidence"}),Re=(k.i18n.translate("xpack.csp.findings.timestampLabel",{defaultMessage:"Timestamp"}),k.i18n.translate("xpack.csp.findings.agentLabel",{defaultMessage:"Agent"}),k.i18n.translate("xpack.csp.findings.versionLabel",{defaultMessage:"Version"}),k.i18n.translate("xpack.csp.findings.idLabel",{defaultMessage:"ID"}),k.i18n.translate("xpack.csp.findings.hostLabel",{defaultMessage:"Host"})),Pe=(k.i18n.translate("xpack.csp.findings.architectureLabel",{defaultMessage:"Architecture"}),k.i18n.translate("xpack.csp.findings.containerizedLabel",{defaultMessage:"Containerized"}),k.i18n.translate("xpack.csp.findings.hostnameLabel",{defaultMessage:"Hostname"}),k.i18n.translate("xpack.csp.findings.macLabel",{defaultMessage:"Mac"}),k.i18n.translate("xpack.csp.findings.ipLabel",{defaultMessage:"IP"}),k.i18n.translate("xpack.csp.findings.codenameLabel",{defaultMessage:"Codename"}),k.i18n.translate("xpack.csp.findings.familyLabel",{defaultMessage:"Family"}),k.i18n.translate("xpack.csp.findings.kernelLabel",{defaultMessage:"Kernel"}),k.i18n.translate("xpack.csp.findings.platformLabel",{defaultMessage:"Platform"}),k.i18n.translate("xpack.csp.findings.nonFindingsLabel",{defaultMessage:"There are no Findings"})),Le=k.i18n.translate("xpack.csp.findings.findingsFlyout.detailsTabLabel",{defaultMessage:"Details"}),Ae=k.i18n.translate("xpack.csp.findings.searchBar.searchPlaceholder",{defaultMessage:'Search findings (eg. rule.section.keyword : "API Server" )'}),Qe=k.i18n.translate("xpack.csp.findings.errorCallout.pageSearchErrorTitle",{defaultMessage:"We encountered an error retrieving search results"}),qe=({dataView:e,loading:t,setQuery:n})=>{const{euiTheme:r}=Object(E.useEuiTheme)(),{unifiedSearch:{ui:{SearchBar:i}}}=Object(y.useKibana)().services;return Object(A.jsx)("div",{css:Ne(r)},Object(A.jsx)(i,{appName:ie.b,dataTestSubj:"findings_search_bar",showFilterBar:!0,showQueryBar:!0,showQueryInput:!0,showDatePicker:!1,showSaveQuery:!1,isLoading:t,indexPatterns:[e],onQuerySubmit:n,onFiltersUpdated:e=>n({filters:e}),placeholder:Ae}))},Ne=e=>Object(A.css)("border-bottom:",e.border.thin,";background-color:",e.colors.body,";padding:",e.size.base,";","");var Ue=n(21);const De=e=>{const t=(e=>{try{return Object(Ue.encode)(e)}catch(e){console.error(e)}})(e);if(t)return`query=${t}`},Be=e=>{const t=new URLSearchParams(e).get("query");if(t)return(e=>{try{return Object(Ue.decode)(e)}catch(e){console.error(e)}})(t)},ze=e=>{const{push:t,replace:n}=Object(x.useHistory)(),{search:r,key:i}=Object(x.useLocation)(),a=Object(p.useMemo)((()=>({...e(),...Be(r)})),[e,r]),s=Object(p.useCallback)((n=>t({search:De({...e(),...a,...n})})),[e,a,t]);return Object(p.useEffect)((()=>{r||n({search:De(e())})}),[e,r,n]),{key:i,urlQuery:a,setUrlQuery:s}};var Ke=n(16),He=n(41);const Ge=e=>null!=e,Ve=(e,t="Unknown Error")=>e instanceof Error?e.message:"string"==typeof e?e:t,We=new Set(["@timestamp","resource.sub_type","resource.name","rule.name"]),$e=(e,t)=>{t instanceof Error?e.addError(t,{title:ce}):e.addDanger(Ve(t,ce))},Je=({query:e,size:t,from:n,sort:r,pitId:i})=>{return{body:{query:e,sort:[{[(a=r.field,We.has(a)?a:`${a}.keyword`)]:r.direction}],size:t,from:n,aggs:{count:{terms:{field:"result.evaluation.keyword"}}}},pit:{id:i},ignore_unavailable:!1};var a},Ye=e=>{const t=e.find((e=>"passed"===e.key)),n=e.find((e=>"failed"===e.key));return{passed:(null==t?void 0:t.doc_count)||0,failed:(null==n?void 0:n.doc_count)||0}},Ze=({query:e,from:t,size:n,pitId:r})=>({body:{query:e,size:0,aggs:{resource_total:{cardinality:{field:"resource.id"}},resources:{terms:{field:"resource.id",size:6e4},aggs:{name:{terms:{field:"resource.name",size:1}},subtype:{terms:{field:"resource.sub_type",size:1}},cis_sections:{terms:{field:"rule.section.keyword"}},failed_findings:{filter:{term:{"result.evaluation.keyword":"failed"}}},cluster_id:{terms:{field:"cluster_id.keyword",size:1}},sort_failed_findings:{bucket_sort:{from:t,size:n,sort:[{"failed_findings>_count":{order:"desc"},_count:{order:"desc"},_key:{order:"asc"}}]}}}}},pit:{id:r}},ignore_unavailable:!1}),Xe=e=>{var t,n,r;if(!(Array.isArray(e.cis_sections.buckets)&&Array.isArray(e.name.buckets)&&Array.isArray(e.subtype.buckets)&&Array.isArray(e.cluster_id.buckets)&&e.cis_sections.buckets.length&&e.name.buckets.length&&e.subtype.buckets.length&&e.cluster_id.buckets.length))throw new Error("expected buckets to be an array");return{resource_id:e.key,resource_name:null===(t=e.name.buckets[0])||void 0===t?void 0:t.key,resource_subtype:null===(n=e.subtype.buckets[0])||void 0===n?void 0:n.key,cluster_id:null===(r=e.cluster_id.buckets[0])||void 0===r?void 0:r.key,cis_sections:e.cis_sections.buckets.map((e=>e.key)),failed_findings:{count:e.failed_findings.doc_count,normalized:e.doc_count>0?e.failed_findings.doc_count/e.doc_count:0,total_findings:e.doc_count}}};var et=n(19),tt=n.n(et);const nt=({tooltipContent:e,columnName:t})=>Object(A.jsx)(E.EuiToolTip,{content:e},Object(A.jsx)(E.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)("span",null,t)),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiIcon,{size:"m",color:"subdued",type:"questionInCircle"})))),rt=({items:e,loading:t,pagination:n,setTableOptions:r})=>t||e.length?Object(A.jsx)(E.EuiBasicTable,{loading:t,items:e,columns:it,rowProps:e=>{return{"data-test-subj":(n=e,t=[n.resource_id,...n.cis_sections].join("/"),`findings_resource_table_row_${t}`)};var t,n},pagination:n,onChange:r}):Object(A.jsx)(E.EuiEmptyPrompt,{iconType:"logoKibana",title:Object(A.jsx)("h2",null,Pe)}),it=[{field:"resource_id",name:Object(A.jsx)(nt,{columnName:ge,tooltipContent:k.i18n.translate("xpack.csp.findings.resourceTable.resourceTableColumn.resourceIdColumnTooltipLabel",{defaultMessage:"Custom Elastic Resource ID"})}),render:e=>Object(A.jsx)(x.Link,{to:Object(x.generatePath)(L.resource_findings.path,{resourceId:e})},e)},{field:"resource_subtype",truncateText:!0,name:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.groupByResourceTable.resourceTypeColumnLabel",defaultMessage:"Resource Type"})},{field:"resource_name",truncateText:!0,name:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.groupByResourceTable.resourceNameColumnLabel",defaultMessage:"Resource Name"})},{field:"cis_sections",truncateText:!0,name:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.groupByResourceTable.cisSectionsColumnLabel",defaultMessage:"CIS Sections"}),render:e=>e.join(", ")},{field:"cluster_id",name:Object(A.jsx)(nt,{columnName:ve,tooltipContent:k.i18n.translate("xpack.csp.findings.resourceTable.resourceTableColumn.clusterIdColumnTooltipLabel",{defaultMessage:"Kube-System Namespace ID"})}),truncateText:!0},{field:"failed_findings",width:"150px",truncateText:!0,name:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.groupByResourceTable.failedFindingsColumnLabel",defaultMessage:"Failed Findings"}),render:e=>{return Object(A.jsx)(E.EuiToolTip,{content:k.i18n.translate("xpack.csp.findings.groupByResourceTable.failedFindingsToolTip",{defaultMessage:"{failed} out of {total}",values:{failed:e.count,total:e.total_findings}})},Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiTextColor,{color:0===e.count?"":"danger"},(t=e.count)<1e3?t:tt()(t).format("0.0a")),Object(A.jsx)("span",null," (",tt()(e.normalized).format("0%"),")")));var t},dataType:"number"}],at=h.a.memo(rt);var st,ut,ot=n(33),ct=n.n(ot),lt=n(31),dt=n.n(lt),ft=n(8),pt=n.n(ft),ht=n(55),gt=n.n(ht),bt=function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t},yt=function(e,t){var n=bt(e,t);return{script:{source:vt(e),lang:e.lang,params:{value:n}}}},vt=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(st||(st={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(ut||(ut={}));var mt={gt:">",gte:">=",lte:"<=",lt:"<"},jt={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},xt={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},Ot=function(e,t){var n=Object(ft.mapValues)(Object(ft.pickBy)(t,(function(e,t){return t in mt})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(ft.map)(n,(function(t,n){return"("+e.script+")"+Object(ft.get)(mt,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?xt:jt,a=Object(ft.reduce)(n,(function(e,t,n){return e.concat(Object(ft.get)(i,n))}),[]).join(" "),s=Object(ft.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(a).concat(s)}return{script:{source:r,params:n,lang:e.lang}}},Et=function(e){return function(e){return Object(ft.has)(e,"query.exists")}(e)?function(e){return e.query.exists&&e.query.exists.field}(e):function(e){var t=Object(ft.has)(e,"query.match_phrase"),n=Object(ft.get)(e,"query.match",[]),r=void 0!==Object.values(n).find((function(e){return"phrase"===e.type}));return t||r}(e)?function(e){var t,n,r=null!==(t=null!==(n=e.query.match_phrase)&&void 0!==n?n:e.query.match)&&void 0!==t?t:{};return Object.keys(r)[0]}(e):function(e){var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.type)===st.PHRASES}(e)?function(e){return e.meta.key}(e):function(e){return Object(ft.has)(e,"query.range")}(e)?function(e){return e.query.range&&Object.keys(e.query.range)[0]}(e):void 0},Mt=function(e){return Object(ft.get)(e,"meta.disabled",!1)},kt=function(e){return Object(ft.omit)(e,["meta","$state"])};function Tt(e,t){if(function(e){var t,n,r=Object.keys(null!==(t=e.match||(null===(n=e.query)||void 0===n?void 0:n.match))&&void 0!==t?t:{})[0];return Boolean(r&&("phrase"===Object(ft.get)(e,["query","match",r,"type"])||"phrase"===Object(ft.get)(e,["match",r,"type"])))}(e)){var n=e.match||e.query.match,r=Object.keys(n)[0],i=Object(ft.get)(n,[r]),a=i.query;if(t){var s=t.fields.find((function(e){return e.name===r}));s&&(a=bt(s,i.query))}return{meta:e.meta,$state:e.$state,query:{match_phrase:ct()({},r,Object(ft.omit)(dt()(dt()({},i),{},{query:a}),"type"))}}}return e.query?e=Object(ft.pick)(e,["meta","query","$state"]):e.query={},e.exists&&(e.query.exists=e.exists,delete e.exists),e.range&&(e.query.range=e.range,delete e.range),e.match_all&&(e.query.match_all=e.match_all,delete e.match_all),Object.keys(e).forEach((function(t){"meta"!==t&&"query"!==t&&"$state"!==t&&(e.query[t]=e[t],delete e[t])})),e}var Ct=n(44),_t=n.n(Ct),wt=n(38),St=n.n(wt);function It(e){return{type:"literal",value:e}}function Ft(e){return e.value}var Rt="@kuery-wildcard@";function Pt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lt(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function At(e){return e.includes(Rt)?{type:"wildcard",value:e}:Sn(e)}function Qt(e,t){var n=e.value.split(Rt).map(Pt).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function qt(e){return e.value.split(Rt).join("*")}function Nt(e){return e.value.split(Rt).map(Lt).join("*")}function Ut(e){var t=e.value;return t.startsWith(Rt)&&t.replace(Rt,"").length>0}function Dt(e,t){if(!t)return[];if("literal"===e.type){var n=Ft(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Qt(e,t.name)})):void 0}var Bt=n(22),zt=n.n(Bt);function Kt(e){var t=zt.a.tz.guess();return"Browser"===e?t:e}function Ht(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function Gt(e,t,n){var r=dt()(dt()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=Dt(r,t).reduce((function(e,t){var r=Ht(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(_t()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(_t()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(_t()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function Vt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(ft.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(ft.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?Sn(e):It(e),i="string"==typeof t?Sn(t):It(t),a=It(n);return{arguments:[r,i,a]}}function Wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=St()(e.arguments,3),a=i[0],s=i[1],u=i[2],o="wildcard"===s.type&&s.value===Rt,c="wildcard"===a.type&&a.value===Rt,l=o&&c;if(l)return{match_all:{}};var d=Gt(a,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(ft.isUndefined)(s)?s:Fn(s),p=u.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===s.type?{query_string:{query:Nt(s)}}:{multi_match:{type:p,query:f,lenient:!0}};var h=t?Dt(d,t):[];if(h&&0===h.length&&h.push({name:Fn(d),scripted:!1,type:""}),o&&(null==h||!h.length||(null==h?void 0:h.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var g=h.reduce((function(e,t){var i=function(e){var n=Ht(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(o)return[].concat(_t()(e),[i({exists:{field:t.name}})]);if("wildcard"===s.type)return[].concat(_t()(e),[i({query_string:{fields:[t.name],query:Nt(s)}})]);if("date"===t.type){var a=n.dateFormatTZ?{time_zone:Kt(n.dateFormatTZ)}:{};return[].concat(_t()(e),[i({range:ct()({},t.name,dt()({gte:f,lte:f},a))})])}var u="phrase"===p?"match_phrase":"match";return[].concat(_t()(e),[i(ct()({},u,ct()({},t.name,f)))])}if(!o)return[].concat(_t()(e),[{script:dt()({},yt(t,f))}])}),[]);return{bool:{should:g||[],minimum_should_match:1}}}function $t(e){return{arguments:e}}function Jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,a=e.arguments||[],s=i?"must":"filter";return{bool:ct()({},s,a.map((function(e){return Fn(e,t,n,r)})))}}function Yt(e){return{arguments:e}}function Zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Fn(e,t,n,r)})),minimum_should_match:1}}}function Xt(e){return{arguments:[e]}}function en(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=St()(e.arguments,1),a=i[0];return{bool:{must_not:Fn(a,t,n,r)}}}function tn(e,t,n){return{arguments:[Sn(e),t,fn.literal.buildNode(n)]}}function nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=St()(e.arguments,3),a=i[0],s=i[1],u=i[2],o=Gt(a,t,null!=r&&r.nested?r.nested.path:void 0),c=t?Dt(o,t):[];c&&0===c.length&&c.push({name:Fn(o),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var n=Ht(e);return"wildcard"!==o.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=ct()({},s,Fn(u));if(e.scripted)return{script:Ot(e,i)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:Kt(n.dateFormatTZ)}:{};return t({range:ct()({},e.name,dt()(dt()({},i),a))})}return t({range:ct()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function rn(e){return{arguments:[It(e)]}}function an(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=St()(e.arguments,1),a=i[0],s=dt()(dt()({},a),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(a.value):a.value}),u=Ft(s),o=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===u}));if(null!=o&&o.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:u}}}function sn(e,t){return{arguments:["string"==typeof e?Sn(e):It(e),t]}}function un(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=St()(e.arguments,2),s=a[0],u=a[1],o=Fn(s),c=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(o):o;return{nested:{path:c,query:Fn(u,t,r,dt()(dt()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var on={is:a,and:s,or:u,not:o,range:c,exists:l,nested:d};function cn(e){var t=on[e];if(pt.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return dt()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function ln(e,t){if(pt.a.isUndefined(on[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function dn(e,t,n,r){return on[e.function].toElasticsearchQuery(e,t,n,r)}var fn={function:f,literal:r,wildcard:i},pn=n(80),hn=n.n(pn),gn=n(81),bn=n.n(gn),yn=n(82),vn=n.n(yn),mn=n(83),jn=n.n(mn),xn=n(84),On=n.n(xn),En=n(85),Mn=n.n(En),kn=k.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Tn={fieldName:k.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:k.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:k.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:k.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Cn=function(e){jn()(n,e);var t=On()(n);function n(e,r){var i;bn()(this,n);var a=e.message;if(e.expected){var s=e.expected.map((function(e){var t,n="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Tn[n]||n})),u=Object(ft.uniq)(s).filter((function(e){return void 0!==e})).sort().join(", ");a=k.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:u,foundInput:e.found?'"'.concat(e.found,'"'):kn}})}var o=[a,r,Object(ft.repeat)("-",e.location.start.offset)+"^"].join("\n");return i=t.call(this,o),ct()(vn()(i),"shortMessage",void 0),i.name="KQLSyntaxError",i.shortMessage=a,i}return hn()(n)}(Mn()(Error)),_n=n(56),wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_n.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,dt()(dt()({},t),{},{helpers:{nodeTypes:fn}}))},Sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wn(e,dt()(dt()({},t),{},{startRule:"Literal"}),_n.parse)},In=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return wn(e,t,_n.parse)}catch(t){throw"SyntaxError"===t.name?new Cn(t,e):t}},Fn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!fn[t.type])return e(fn.function.buildNode("and",[]),n);var a=fn[t.type];return a.toElasticsearchQuery(t,n,r,i)};Object(ft.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var Rn=function(){return Fn.apply(void 0,arguments)};function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.map((function(e){return In(e.query,{allowLeadingWildcards:n})}));return Ln(e,a,{dateFormatTZ:r,filtersInMustClause:i})}function Ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=fn.function.buildNode("and",t),i=Rn(r,e,n);return Object.assign({must:[],filter:[],should:[],must_not:[]},i.bool)}function An(e,t){var n,r;return null===(n=e.meta)||void 0===n||!n.key||!t||("custom"===(null===(r=e.meta)||void 0===r?void 0:r.type)?e.meta.index===t.id:t.fields.some((function(t){return t.name===e.meta.key})))}var Qn=function(e,t){if(!t)return e;var n=Et(e);if(!n)return e;var r=t.fields.find((function(e){return e.name===n})),i=r&&Ht(r);if(!i)return e;var a=kt(e);return{meta:e.meta,query:{nested:{path:i.nested.path,query:a.query||a}}}},qn=function(e){return function(t){return Object(ft.isUndefined)(t.meta)||Object(ft.isUndefined)(t.meta.negate)?!e:t.meta&&t.meta.negate===e}},Nn=function(e){return e.query||e},Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.filter((function(e){return e&&!Mt(e)}));var r=function(r){return e.filter((function(e){return!!e})).filter(qn(r)).filter((function(e){return!n||An(e,t)})).map((function(e){return Tt(e,t)})).map((function(e){return Qn(e,t)})).map(kt).map(Nn)};return{must:[],filter:r(!1),should:[],must_not:r(!0)}};function Dn(e,t,n){return{must:(e||[]).map((function(e){var r=function(e){return Object(ft.isString)(e)?""===e.trim()?{match_all:{}}:{query_string:{query:e}}:e}(e.query);return function(e,t,n){return function(e){return Object(ft.has)(e,"query_string.query")}(e)&&("string"==typeof t&&(t=JSON.parse(t)),Object(ft.extend)(e.query_string,t),n&&Object(ft.defaults)(e.query_string,{time_zone:Kt(n)})),e}(r,t,n)})),filter:[],should:[],must_not:[]}}function Bn(e){return e.filter((function(e){return!e||"object"!==gt()(e)||!Object(ft.isEqual)(e,{match_all:{}})}))}function zn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1};t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];var i=t.filter((function(e){return Object(ft.has)(e,"query")})),a=Object(ft.groupBy)(i,"language"),s=Pn(e,a.kuery,r.allowLeadingWildcards,r.dateFormatTZ,r.filtersInMustClause),u=Dn(a.lucene,r.queryStringOptions,r.dateFormatTZ),o=Un(n,e,r.ignoreFilterIfFieldNotInIndex);return{bool:{must:Bn([].concat(_t()(s.must),_t()(u.must),_t()(o.must))),filter:Bn([].concat(_t()(s.filter),_t()(u.filter),_t()(o.filter))),should:Bn([].concat(_t()(s.should),_t()(u.should),_t()(o.should))),must_not:[].concat(_t()(s.must_not),_t()(u.must_not),_t()(o.must_not))}}}const Kn=(e,t=[10,25,100],n=!0)=>({...e,pageSizeOptions:t,showPerPageOptions:n}),Hn=e=>{const{data:{query:{filterManager:t,queryString:n}}}=B().services;return Object(p.useCallback)((()=>e({filters:t.getAppFilters(),query:n.getQuery()})),[e,t,n])},Gn=({pageIndex:e,pageSize:t})=>({from:e*t,size:t}),Vn=({dataView:e,filters:t,query:n})=>{const{notifications:{toasts:r},data:{query:{filterManager:i,queryString:a}}}=B().services,s=Object(p.useMemo)((()=>(({dataView:e,query:t,filters:n})=>{try{return{query:zn(e,t,n)}}catch(e){return{query:void 0,error:e instanceof Error?e:new Error("Unknown Error")}}})({dataView:e,filters:t,query:n})),[e,t,n]);return Object(p.useEffect)((()=>{i.setAppFilters(t),a.setQuery(n)}),[t,i,a,n]),Object(p.useEffect)((()=>{const e=s.error;e&&r.addError(e,{title:k.i18n.translate("xpack.csp.findings.search.queryErrorToastMessage",{defaultMessage:"Query Error"}),toastLifeTimeMs:5e3})}),[s.error,r]),s};var Wn=n(14),$n=n.n(Wn);const Jn=e=>"passed"===e?"success":"failed"===e?"danger":"default",Yn=({type:e})=>Object(A.jsx)(E.EuiBadge,{color:Jn(e)},"failed"===e?Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.cspEvaluationBadge.failLabel",defaultMessage:"Fail"}):Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.cspEvaluationBadge.passLabel",defaultMessage:"Pass"})),Zn=({children:e})=>{const{euiTheme:t}=Object(E.useEuiTheme)();return Object(A.jsx)("div",{css:Object(A.css)("padding:",t.size.l,";","")},e)},Xn=({children:e})=>Object(A.jsx)(E.EuiTitle,{size:"l"},Object(A.jsx)("div",null,e,Object(A.jsx)(E.EuiSpacer,null))),er=({title:e})=>Object(A.jsx)("h2",null,e),tr=({onClick:e})=>({width:"40px",actions:[{name:k.i18n.translate("xpack.csp.expandColumnNameLabel",{defaultMessage:"Expand"}),description:k.i18n.translate("xpack.csp.expandColumnDescriptionLabel",{defaultMessage:"Expand"}),type:"icon",icon:"expand",onClick:e}]}),nr=()=>[{field:"resource_id",name:Object(A.jsx)(nt,{columnName:ge,tooltipContent:k.i18n.translate("xpack.csp.findings.findingsTable.findingsTableColumn.resourceIdColumnTooltipLabel",{defaultMessage:"Custom Elastic Resource ID"})}),truncateText:!0,width:"15%",sortable:!0,render:e=>Object(A.jsx)(E.EuiToolTip,{position:"top",content:e},Object(A.jsx)("span",null,e))},{field:"result.evaluation",name:be,width:"100px",sortable:!0,render:e=>Object(A.jsx)(Yn,{type:e})},{field:"resource.sub_type",name:ye,sortable:!0,width:"150px"},{field:"resource.name",name:fe,sortable:!0},{field:"rule.name",name:xe,sortable:!0},{field:"rule.section",name:me,sortable:!0,truncateText:!0},{field:"cluster_id",name:Object(A.jsx)(nt,{columnName:ve,tooltipContent:k.i18n.translate("xpack.csp.findings.resourceTable.resourceTableColumn.clusterIdColumnTooltipLabel",{defaultMessage:"Kube-System Namespace ID"})}),truncateText:!0,sortable:!0},{field:"@timestamp",width:"150px",name:je,truncateText:!0,sortable:!0,render:e=>Object(A.jsx)(E.EuiToolTip,{position:"top",content:e},Object(A.jsx)("span",null,$n()(e).fromNow()))}],rr=()=>[{value:"default",label:k.i18n.translate("xpack.csp.findings.groupBySelector.groupByNoneLabel",{defaultMessage:"None"})},{value:"resource",label:k.i18n.translate("xpack.csp.findings.groupBySelector.groupByResourceIdLabel",{defaultMessage:"Resource"})}],ir=e=>{const[t]=e;return"resource"===(null==t?void 0:t.value)?L.findings_by_resource.path:L.findings_default.path},ar=({type:e})=>{const t=Object(p.useMemo)(rr,[]),n=Object(x.useHistory)();return Object(A.jsx)("div",null,Object(A.jsx)(E.EuiComboBox,{prepend:Object(A.jsx)(sr,null),singleSelection:{asPlainText:!0},options:t,selectedOptions:t.filter((t=>t.value===e)),onChange:e=>n.push({pathname:ir(e)})}),Object(A.jsx)(E.EuiSpacer,null))},sr=()=>Object(A.jsx)(E.EuiFormLabel,null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.groupBySelector.groupByLabel",defaultMessage:"Group by"})),ur=e=>{const{services:{chrome:{setBreadcrumbs:t,docTitle:n},application:{getUrlForApp:r}}}=Object(y.useKibana)(),i=Object(x.useRouteMatch)(),a=Object(x.useHistory)();Object(p.useEffect)((()=>{const r=e.map((e=>{const t=((e,t)=>{if(!t.includes(":"))return e!==t?t.startsWith("/")?`${t}`:`/${t}`:void 0})(i.path,e.path);return{text:e.name,...t&&{onClick:e=>{e.preventDefault(),a.push(t)}}}})),s=[{text:T,onClick:e=>{e.preventDefault(),a.push("/")}},...r];t(s),n.change(or(s))}),[i.path,r,t,e,a,n])},or=e=>e.map((e=>e.text)).filter(He.string.is),cr=({query:e,resourceId:t,from:n,size:r,pitId:i})=>{var a;return{from:n,size:r,body:{query:{...e,bool:{...null==e?void 0:e.bool,filter:[...(null==e||null===(a=e.bool)||void 0===a?void 0:a.filter)||[],{term:{"resource_id.keyword":t}}]}},pit:{id:i}},ignore_unavailable:!1}};var lr=n(20),dr=n(86),fr=n.n(dr);const pr=e=>void 0===e?"undefined":"boolean"==typeof e||null===e?Object(A.jsx)(E.EuiCode,null,JSON.stringify(e)):"object"==typeof e?Object(A.jsx)(E.EuiCodeBlock,{isCopyable:!0,overflowHeight:300},JSON.stringify(e,null,2)):Object(A.jsx)(E.EuiText,{size:"s"},e),hr=e=>Object.entries(Object(lr.getFlattenedObject)(e)).sort(((e,t)=>e[0].localeCompare(t[0]))).map((([e,t])=>({title:Object(A.jsx)(E.EuiText,{size:"s"},Object(A.jsx)("strong",null,e)),description:pr(t)}))),gr=({data:e})=>{const{euiTheme:t}=Object(E.useEuiTheme)(),n=Object(p.useMemo)((()=>[{title:de,id:"resourceAccordion",listItems:hr(e.resource)},{title:Re,id:"hostAccordion",listItems:hr(e.host)}]),[e.host,e.resource]);return Object(A.jsx)(h.a.Fragment,null,n.map((e=>Object(A.jsx)(h.a.Fragment,{key:e.id},Object(A.jsx)(E.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(A.jsx)(E.EuiAccordion,{id:e.id,buttonContent:Object(A.jsx)(E.EuiText,null,Object(A.jsx)("strong",null,e.title)),arrowDisplay:"left",initialIsOpen:!0},Object(A.jsx)(E.EuiDescriptionList,{listItems:e.listItems,type:"column",style:{marginTop:t.size.l},titleProps:{style:{width:"35%"}},descriptionProps:{style:{width:"65%"}}}))),Object(A.jsx)(E.EuiSpacer,{size:"m"})))))};var br=n(23);const yr=({data:e})=>Object(A.jsx)("div",{style:{position:"absolute",inset:0,top:120}},Object(A.jsx)(y.CodeEditor,{isCopyable:!0,allowFullScreen:!0,languageId:br.XJsonLang.ID,value:JSON.stringify(e,null,2),options:{readOnly:!0,lineNumbers:"on",folding:!0}})),vr=e=>[{title:le,description:e.rule.name},{title:ke,description:$n()(e["@timestamp"]).format("MMMM D, YYYY @ HH:mm:ss.SSS")},{title:fe,description:e.resource.name},{title:Te,description:Object(A.jsx)(wr,null)},{title:me,description:e.rule.section}],mr=e=>[{title:"",description:Object(A.jsx)(_r,null,e.remediation)},{title:se,description:Object(A.jsx)(_r,null,e.impact)},{title:ue,description:Object(A.jsx)(_r,null,e.default_value)},{title:oe,description:Object(A.jsx)(_r,null,e.rationale)}],jr=({result:e})=>[e.expected&&{title:Se,description:Object(A.jsx)(Cr,null,JSON.stringify(e.expected,null,2))},{title:Ie,description:Object(A.jsx)(Cr,null,JSON.stringify(e.evidence,null,2))}].filter(Boolean),xr=({data:e})=>{const t=Object(p.useMemo)((()=>[{initialIsOpen:!0,title:Le,id:"detailsAccordion",listItems:vr(e)},{initialIsOpen:!0,title:Ee,id:"remediationAccordion",listItems:mr(e.rule)},{initialIsOpen:!1,title:Fe,id:"evidenceAccordion",listItems:jr(e)}]),[e]);return Object(A.jsx)(h.a.Fragment,null,t.map((e=>Object(A.jsx)(h.a.Fragment,{key:e.id},Object(A.jsx)(E.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(A.jsx)(E.EuiAccordion,{id:e.id,buttonContent:Object(A.jsx)(E.EuiText,null,Object(A.jsx)("strong",null,e.title)),arrowDisplay:"left",initialIsOpen:e.initialIsOpen},Object(A.jsx)(E.EuiSpacer,{size:"m"}),Object(A.jsx)(E.EuiDescriptionList,{listItems:e.listItems}))),Object(A.jsx)(E.EuiSpacer,{size:"m"})))))},Or=e=>[{title:ae,description:e.name},{title:Oe,description:Object(A.jsx)(_r,null,e.description)},{title:Te,description:Object(A.jsx)(wr,null)},{title:me,description:e.section},{title:we,description:Object(A.jsx)(_r,null,e.profile_applicability)},{title:Me,description:e.benchmark.name},{title:Ce,description:Object(A.jsx)(_r,null,e.audit)},{title:_e,description:Object(A.jsx)(_r,null,e.references)}],Er=({data:e})=>Object(A.jsx)(E.EuiDescriptionList,{listItems:Or(e.rule)});var Mr=n(87),kr=n.n(Mr);const Tr=[{title:pe,id:"overview"},{title:xe,id:"rule"},{title:de,id:"resource"},{title:he,id:"json"}],Cr=e=>Object(A.jsx)(E.EuiCodeBlock,m()({isCopyable:!0,paddingSize:"s",overflowHeight:300},e)),_r=e=>Object(A.jsx)(E.EuiMarkdownFormat,m()({textSize:"s"},e)),wr=()=>Object(A.jsx)(E.EuiFlexGroup,{gutterSize:"s"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiIcon,{type:fr.a,size:"xxl"})),Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiIcon,{type:kr.a,size:"xxl"}))),Sr=({tab:e,findings:t})=>{switch(e.id){case"overview":return Object(A.jsx)(xr,{data:t});case"rule":return Object(A.jsx)(Er,{data:t});case"resource":return Object(A.jsx)(gr,{data:t});case"json":return Object(A.jsx)(yr,{data:t});default:Object(lr.assertNever)(e)}},Ir=({onClose:e,findings:t})=>{const[n,r]=Object(p.useState)(Tr[0]);return Object(A.jsx)(E.EuiFlyout,{ownFocus:!1,onClose:e},Object(A.jsx)(E.EuiFlyoutHeader,null,Object(A.jsx)(E.EuiFlexGroup,{alignItems:"center"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(Yn,{type:t.result.evaluation})),Object(A.jsx)(E.EuiFlexItem,{grow:!0,style:{minWidth:0}},Object(A.jsx)(E.EuiTitle,{size:"m",className:"eui-textTruncate"},Object(A.jsx)(E.EuiTextColor,{color:"primary",title:t.rule.name},t.rule.name)))),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(E.EuiTabs,null,Tr.map((e=>Object(A.jsx)(E.EuiTab,{key:e.id,isSelected:n.id===e.id,onClick:()=>r(e)},e.title))))),Object(A.jsx)(E.EuiFlyoutBody,null,Object(A.jsx)(Sr,{tab:n,findings:t})))},Fr=({items:e,loading:t,pagination:n,setTableOptions:r})=>{const[i,a]=Object(p.useState)(),s=Object(p.useMemo)((()=>[tr({onClick:a}),...nr()]),[]);return t||e.length?Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiBasicTable,{loading:t,items:e,columns:s,onChange:r,pagination:n}),i&&Object(A.jsx)(Ir,{findings:i,onClose:()=>a(void 0)})):Object(A.jsx)(E.EuiEmptyPrompt,{iconType:"logoKibana",title:Object(A.jsx)("h2",null,Pe)})},Rr=h.a.memo(Fr),Pr=({error:e})=>{const{data:{search:t}}=B().services;return Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiPanel,{paddingSize:"l",grow:!0},Object(A.jsx)(E.EuiCallOut,{title:Qe,color:"danger",iconType:"alert"},Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(E.EuiButton,{size:"s",color:"danger",onClick:()=>t.showError(e)},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.showErrorButtonLabel",defaultMessage:"Show error message"}))))))},Lr=({query:e,filters:t})=>({query:e,filters:t,pageIndex:0,pageSize:10}),Ar=()=>Object(A.jsx)(x.Link,{to:Object(x.generatePath)(L.findings_by_resource.path)},Object(A.jsx)(E.EuiButtonEmpty,{iconType:"arrowLeft"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.resourceFindings.backToResourcesPageButtonLabel",defaultMessage:"Back to group by resource view"}))),Qr=({dataView:e})=>{var t,n;ur([L.findings_default]);const{euiTheme:r}=Object(E.useEuiTheme)(),i=Object(x.useParams)(),a=Hn(Lr),{urlQuery:s,setUrlQuery:u}=ze(a),o=Vn({dataView:e,filters:s.filters,query:s.query}),c=(e=>{const{data:t,notifications:{toasts:n}}=B().services,{pitIdRef:r,setPitId:i}=Object(p.useContext)(ne),a={...e,pitId:r.current};return Object(O.useQuery)(["csp_resource_findings",{params:a}],(()=>Object(Ke.lastValueFrom)(t.search.search({params:cr(a)}))),{enabled:e.enabled,keepPreviousData:!0,select:({rawResponse:{hits:e,pit_id:t}})=>({page:e.hits.map((e=>e._source)),total:He.number.is(e.total)?e.total:0,newPitId:t}),onError:e=>$e(n,e),onSuccess:({newPitId:e})=>{i(e)},refetchInterval:te,refetchIntervalInBackground:!0})})({...Gn({pageSize:s.pageSize,pageIndex:s.pageIndex}),query:o.query,resourceId:i.resourceId,enabled:!o.error}),l=c.error||o.error;return Object(A.jsx)("div",{"data-test-subj":re},Object(A.jsx)(qe,{dataView:e,setQuery:e=>{u({...e,pageIndex:0})},loading:c.isFetching}),Object(A.jsx)(Zn,null,Object(A.jsx)(Xn,null,Object(A.jsx)(Ar,null),Object(A.jsx)(er,{title:Object(A.jsx)("div",{style:{padding:r.size.s}},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.resourceFindingsTitle",defaultMessage:"{resourceId} - Findings",values:{resourceId:i.resourceId}}))})),Object(A.jsx)(E.EuiSpacer,null),l&&Object(A.jsx)(Pr,{error:l}),!l&&Object(A.jsx)(Rr,{loading:c.isFetching,items:(null===(t=c.data)||void 0===t?void 0:t.page)||[],pagination:Kn({pageSize:s.pageSize,pageIndex:s.pageIndex,totalItemCount:(null===(n=c.data)||void 0===n?void 0:n.total)||0}),setTableOptions:({page:e})=>u({pageIndex:e.index,pageSize:e.size})})))},qr=({query:e,filters:t})=>({query:e,filters:t,pageIndex:0,pageSize:10}),Nr=({dataView:e})=>Object(A.jsx)(x.Switch,null,Object(A.jsx)(x.Route,{exact:!0,path:L.findings_by_resource.path,render:()=>Object(A.jsx)(Ur,{dataView:e})}),Object(A.jsx)(x.Route,{path:L.resource_findings.path,render:()=>Object(A.jsx)(Qr,{dataView:e})})),Ur=({dataView:e})=>{var t,n;ur([L.findings_by_resource]);const r=Hn(qr),{urlQuery:i,setUrlQuery:a}=ze(r),s=Vn({dataView:e,filters:i.filters,query:i.query}),u=(e=>{const{data:t,notifications:{toasts:n}}=B().services,{pitIdRef:r,setPitId:i}=Object(p.useContext)(ne),a={...e,pitId:r.current};return Object(O.useQuery)(["csp_findings_resource",{params:a}],(async()=>{const{rawResponse:{aggregations:e,pit_id:n}}=await Object(Ke.lastValueFrom)(t.search.search({params:Ze(a)}));if(!e)throw new Error("expected aggregations to be defined");if(!Array.isArray(e.resources.buckets))throw new Error("expected buckets to be an array");return{page:e.resources.buckets.map(Xe),total:e.resource_total.value,newPitId:n}}),{enabled:e.enabled,keepPreviousData:!0,onError:e=>$e(n,e),onSuccess:({newPitId:e})=>{i(e)},refetchInterval:te,refetchIntervalInBackground:!0})})({...Gn(i),query:s.query,enabled:!s.error}),o=u.error||s.error;return Object(A.jsx)("div",{"data-test-subj":re},Object(A.jsx)(qe,{dataView:e,setQuery:e=>{a({...e,pageIndex:0})},loading:u.isFetching}),Object(A.jsx)(Zn,null,Object(A.jsx)(Xn,null,Object(A.jsx)(er,{title:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.findingsByResourceTitle",defaultMessage:"Findings"})})),o&&Object(A.jsx)(Pr,{error:o}),!o&&Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(ar,{type:"resource"}),Object(A.jsx)(at,{loading:u.isFetching,items:(null===(t=u.data)||void 0===t?void 0:t.page)||[],pagination:Kn({pageSize:i.pageSize,pageIndex:i.pageIndex,totalItemCount:(null===(n=u.data)||void 0===n?void 0:n.total)||0}),setTableOptions:({page:e})=>a({pageIndex:e.index,pageSize:e.size})}))))},Dr=({loading:e,items:t,pagination:n,sorting:r,setTableOptions:i})=>{const[a,s]=Object(p.useState)(),u=Object(p.useMemo)((()=>[tr({onClick:s}),...nr()]),[]);return e||t.length?Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiBasicTable,{loading:e,"data-test-subj":"findings_table",items:t,columns:u,pagination:n,sorting:r,onChange:i,hasActions:!0}),a&&Object(A.jsx)(Ir,{findings:a,onClose:()=>s(void 0)})):Object(A.jsx)(E.EuiEmptyPrompt,{iconType:"logoKibana",title:Object(A.jsx)("h2",null,Pe),"data-test-subj":"findings_table_zero_state"})},Br=h.a.memo(Dr),zr=e=>e<1e3?e:tt()(e).format("0.0a"),Kr=e=>Object(A.jsx)("div",null,Object(A.jsx)(Gr,e),Object(A.jsx)(E.EuiSpacer,{size:"s"}),Object(A.jsx)($r,e));var Hr={name:"1kx2ysr",styles:"align-items:flex-end"};const Gr=e=>Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(Wr,e)),Object(A.jsx)(E.EuiFlexItem,{css:Hr},Object(A.jsx)(Vr,e))),Vr=({passed:e,failed:t})=>{const{euiTheme:n}=Object(E.useEuiTheme)();return Object(A.jsx)("div",{css:Object(A.css)("display:grid;grid-template-columns:auto auto;grid-column-gap:",n.size.m,";","")},Object(A.jsx)(Yr,{label:k.i18n.translate("xpack.csp.findings.distributionBar.totalPassedLabel",{defaultMessage:"Passed"}),color:n.colors.success,value:e}),Object(A.jsx)(Yr,{label:k.i18n.translate("xpack.csp.findings.distributionBar.totalFailedLabel",{defaultMessage:"Failed"}),color:n.colors.danger,value:t}))},Wr=({pageEnd:e,pageStart:t,total:n})=>Object(A.jsx)(E.EuiTextColor,{color:"subdued"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.distributionBar.showingPageOfTotalLabel",defaultMessage:"Showing {pageStart}-{pageEnd} of {total} Findings",values:{pageStart:Object(A.jsx)("b",null,t),pageEnd:Object(A.jsx)("b",null,e),total:Object(A.jsx)("b",null,zr(n))}})),$r=({passed:e,failed:t})=>{const{euiTheme:n}=Object(E.useEuiTheme)();return Object(A.jsx)(E.EuiFlexGroup,{gutterSize:"none",css:Object(A.css)("height:8px;background:",n.colors.subdued,";","")},Object(A.jsx)(Jr,{value:e,color:n.colors.success}),Object(A.jsx)(Jr,{value:t,color:n.colors.danger}))},Jr=({value:e,color:t})=>Object(A.jsx)("div",{css:Object(A.css)("flex:",e,";background:",t,";height:100%;","")}),Yr=({label:e,value:t,color:n})=>Object(A.jsx)(E.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiHealth,{color:n},e)),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiBadge,null,zr(t)))),Zr=({query:e,filters:t})=>({query:e,filters:t,sort:{field:"@timestamp",direction:"desc"},pageIndex:0,pageSize:10}),Xr=({dataView:e})=>{var t,n;ur([L.findings_default]);const r=Hn(Zr),{urlQuery:i,setUrlQuery:a}=ze(r),s=Vn({dataView:e,filters:i.filters,query:i.query}),u=(e=>{const{data:t,notifications:{toasts:n}}=B().services,{pitIdRef:r,setPitId:i}=Object(p.useContext)(ne),a={...e,pitId:r.current};return Object(O.useQuery)(["csp_findings",{params:a}],(async()=>{const{rawResponse:{hits:e,aggregations:n,pit_id:r}}=await Object(Ke.lastValueFrom)(t.search.search({params:Je(a)}));if(!n)throw new Error("expected aggregations to be an defined");if(!Array.isArray(n.count.buckets))throw new Error("expected buckets to be an array");return{page:e.hits.map((e=>e._source)),total:He.number.is(e.total)?e.total:0,count:Ye(n.count.buckets),newPitId:r}}),{enabled:e.enabled,keepPreviousData:!0,onError:e=>$e(n,e),onSuccess:({newPitId:e})=>{i(e)},refetchInterval:te,refetchIntervalInBackground:!0})})({...Gn({pageIndex:i.pageIndex,pageSize:i.pageSize}),query:s.query,sort:i.sort,enabled:!s.error}),o=u.error||s.error;return Object(A.jsx)("div",{"data-test-subj":re},Object(A.jsx)(qe,{dataView:e,setQuery:e=>{a({...e,pageIndex:0})},loading:u.isFetching}),Object(A.jsx)(Zn,null,Object(A.jsx)(ei,null),o&&Object(A.jsx)(Pr,{error:o}),!o&&Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(ar,{type:"default"}),u.isSuccess&&Object(A.jsx)(Kr,m()({total:u.data.total,passed:u.data.count.passed,failed:u.data.count.failed},ti({pageIndex:i.pageIndex,pageSize:i.pageSize,currentPageSize:u.data.page.length}))),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(Br,{loading:u.isFetching,items:(null===(t=u.data)||void 0===t?void 0:t.page)||[],pagination:Kn({pageSize:i.pageSize,pageIndex:i.pageIndex,totalItemCount:(null===(n=u.data)||void 0===n?void 0:n.total)||0}),sorting:{sort:{field:i.sort.field,direction:i.sort.direction}},setTableOptions:({page:e,sort:t})=>a({sort:t,pageIndex:e.index,pageSize:e.size})}))))},ei=()=>Object(A.jsx)(Xn,null,Object(A.jsx)(er,{title:Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.findings.findingsTitle",defaultMessage:"Findings"})})),ti=({currentPageSize:e,pageIndex:t,pageSize:n})=>({pageStart:t*n+1,pageEnd:t*n+e}),ni=()=>Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"center",alignItems:"center","data-test-subj":"chart_is_loading"},Object(A.jsx)(E.EuiLoadingChart,{size:"m"})),ri=()=>Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"center",alignItems:"center","data-test-subj":"chart_is_error"},Object(A.jsx)(E.EuiText,{size:"xs",color:"subdued"},"Error")),ii=({title:e,hasBorder:t=!0,isLoading:n,isError:r,children:i})=>Object(A.jsx)(E.EuiPanel,{hasBorder:t,hasShadow:!1,"data-test-subj":"chart-panel"},Object(A.jsx)(E.EuiFlexGroup,{direction:"column",gutterSize:"none",style:{height:"100%"}},Object(A.jsx)(E.EuiFlexItem,{grow:!1},e&&Object(A.jsx)(E.EuiTitle,{size:"s"},Object(A.jsx)("h3",null,e))),Object(A.jsx)(E.EuiFlexItem,null,n?Object(A.jsx)(ni,null):r?Object(A.jsx)(ri,null):i))),ai=k.i18n.translate("xpack.csp.cloud_posture",{defaultMessage:"Cloud Posture"}),si=k.i18n.translate("xpack.csp.cloud_posture_score",{defaultMessage:"Cloud Posture Score"}),ui=k.i18n.translate("xpack.csp.complianceDashboard.failedFindingsChartLabel",{defaultMessage:"Failed Findings"}),oi=k.i18n.translate("xpack.csp.open_cases",{defaultMessage:"Open Cases"}),ci=k.i18n.translate("xpack.csp.coming_soon",{defaultMessage:"Coming soon"}),li=k.i18n.translate("xpack.csp.compliance_score",{defaultMessage:"Compliance Score"}),di=(k.i18n.translate("xpack.csp.compliance_trend",{defaultMessage:"Compliance Trend"}),k.i18n.translate("xpack.csp.posture_score",{defaultMessage:"Posture Score"}),k.i18n.translate("xpack.csp.status",{defaultMessage:"STATUS"}),k.i18n.translate("xpack.csp.total_failures",{defaultMessage:"Total Failures"}),k.i18n.translate("xpack.csp.error",{defaultMessage:"Error"}),k.i18n.translate("xpack.csp.posture_score_trend",{defaultMessage:"Posture Score Trend"}),k.i18n.translate("xpack.csp.active_frameworks",{defaultMessage:"Active Frameworks"}),k.i18n.translate("xpack.csp.total_resources",{defaultMessage:"Total Resources"}),k.i18n.translate("xpack.csp.passed",{defaultMessage:"Passed"}),k.i18n.translate("xpack.csp.failed",{defaultMessage:"Failed"}),k.i18n.translate("xpack.csp.view_all_failed_findings",{defaultMessage:"View all failed findings"})),fi=k.i18n.translate("xpack.csp.dashboard.risksTable.cisSectionColumnLabel",{defaultMessage:"CIS Section"}),pi=k.i18n.translate("xpack.csp.findings",{defaultMessage:"Findings"}),hi={PAGE_TITLE:k.i18n.translate("xpack.csp.complianceDashboard.noDataConfig.pageTitle",{defaultMessage:"Cloud Posture Dashboard"}),SOLUTION:k.i18n.translate("xpack.csp.complianceDashboard.noDataConfig.solutionNameLabel",{defaultMessage:"Cloud Security Posture"}),BUTTON_TITLE:k.i18n.translate("xpack.csp.complianceDashboard.noDataConfig.actionTitle",{defaultMessage:"Try Again"}),DESCRIPTION:k.i18n.translate("xpack.csp.complianceDashboard.noDataConfig.actionDescription",{defaultMessage:"The cloud posture dashboard can't be presented since there are no findings. This can happen due to the agent not being installed yet, or since data is still being processed."})};var gi=n(24);const[bi,yi,vi]=Object(E.euiPaletteForStatus)(3),mi={success:bi,warning:yi,danger:vi},ji=({number:e})=>Object(A.jsx)(j.FormattedNumber,{value:e,maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}),xi=e=>`${Math.round(e)}%`,Oi=({data:{totalPassed:e,totalFailed:t},id:n,partitionOnElementClick:r})=>{const i=[{label:I,value:e},{label:F,value:t}];return Object(A.jsx)(gi.Chart,{size:{height:90,width:90}},Object(A.jsx)(gi.Settings,{theme:{partition:{linkLabel:{maximumSection:1/0,maxCount:0},outerSizeRatio:.9,emptySizeRatio:.75}},onElementClick:r}),Object(A.jsx)(gi.Partition,{id:n,data:i,valueGetter:"percent",valueAccessor:e=>e.value,layout:gi.PartitionLayout.sunburst,layers:[{groupByRollup:e=>e.label,shape:{fillColor:(e,t)=>e.dataName===I?mi.success:mi.danger}}]}))},Ei=({postureScore:e,totalPassed:t,totalFindings:n})=>{const r=xi(e);return Object(A.jsx)(E.EuiFlexGroup,{direction:"column",justifyContent:"center"},Object(A.jsx)(E.EuiText,{style:{fontSize:40,fontWeight:"bold",lineHeight:1}},r),Object(A.jsx)(E.EuiText,{size:"xs"},Object(A.jsx)(ji,{number:t}),"/",Object(A.jsx)(ji,{number:n})," Findings passed"))},Mi=e=>({...e,timestamp:$n()(e.timestamp).valueOf()}),ki=({trend:e})=>{const t=e.map(Mi);return Object(A.jsx)(gi.Chart,null,Object(A.jsx)(gi.Settings,{showLegend:!1,legendPosition:"right",tooltip:{headerFormatter:({value:e})=>Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(j.FormattedDate,{value:e,month:"short",day:"numeric"}),", ",Object(A.jsx)(j.FormattedTime,{value:e}))}}),Object(A.jsx)(gi.AreaSeries,{id:"Posture Score",data:t,xScaleType:"time",xAccessor:"timestamp",yAccessors:["postureScore"]}),Object(A.jsx)(gi.Axis,{id:"bottom-axis",position:"bottom",tickFormat:Object(gi.timeFormatter)(Object(gi.niceTimeFormatByDay)(2)),ticks:4}),Object(A.jsx)(gi.Axis,{ticks:3,id:"left-axis",position:"left",showGridLines:!0,domain:{min:0,max:100},tickFormat:e=>xi(e)}))},Ti=({data:e,trend:t,id:n,partitionOnElementClick:r})=>Object(A.jsx)(E.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(A.jsx)(E.EuiFlexItem,{grow:4},Object(A.jsx)(E.EuiFlexGroup,{direction:"row"},Object(A.jsx)(E.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},Object(A.jsx)(Oi,{id:n,data:e,partitionOnElementClick:r})),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(Ei,e)))),Object(A.jsx)(E.EuiHorizontalRule,{margin:"xs"}),Object(A.jsx)(E.EuiFlexItem,{grow:6},Object(A.jsx)(ki,{trend:t}))),Ci=({data:e,maxItems:t,onCellClick:n,onViewAllClick:r})=>{const i=Object(p.useMemo)((()=>[{field:"name",truncateText:!0,name:fi,render:e=>Object(A.jsx)(E.EuiLink,{onClick:()=>n(e),className:"eui-textTruncate"},e)},{field:"totalFailed",name:pi,render:(e,t)=>Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(E.EuiText,{size:"s",color:"danger"},Object(A.jsx)(ji,{number:t.totalFailed})),Object(A.jsx)(E.EuiText,{size:"s"},"/",Object(A.jsx)(ji,{number:t.totalFindings})))}]),[n]),a=Object(p.useMemo)((()=>((e,t)=>e.filter((e=>e.totalFailed>0)).slice().sort(((e,t)=>t.totalFailed-e.totalFailed)).slice(0,t))(e,t)),[e,t]);return Object(A.jsx)(E.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"s"},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiBasicTable,{rowHeader:"name",items:a,columns:i})),Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"center",gutterSize:"none"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiButtonEmpty,{onClick:r,iconType:"search"},di)))))},_i=()=>Object(A.jsx)(E.EuiFlexGroup,{direction:"column",justifyContent:"center",alignItems:"center"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiIcon,{type:"visualizeApp",size:"xl"})),Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiText,{size:"xs"},ci))),wi=()=>{const e=Object(x.useHistory)();return t=>{var n;e.push({pathname:L.findings_default.path,...t&&{search:De((n=t,{query:{language:"kuery",query:"string"==typeof n?n:Object.entries(n).reduce(((e,[t,n])=>(e.push(`${t}: "${n}"`),e)),[]).join(" and ")}}))}})}},Si={height:360},Ii=({complianceData:e})=>{const t=wi();return Object(A.jsx)(E.EuiFlexGrid,{columns:3,style:Si},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(ii,{title:si},Object(A.jsx)(Ti,{id:"cloud_posture_score_chart",data:e.stats,trend:e.trend,partitionOnElementClick:e=>{const[n]=e,[r]=n,i=r[0].groupByRollup;t({"result.evaluation.keyword":i})}}))),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(ii,{title:ui},Object(A.jsx)(Ci,{data:e.groupedFindingsEvaluation,maxItems:5,onCellClick:e=>{t({"rule.section.keyword":e,"result.evaluation.keyword":F})},onViewAllClick:()=>{t({"result.evaluation.keyword":F})}}))),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(ii,{title:oi},Object(A.jsx)(_i,null))))},Fi=({complianceData:e})=>{const{euiTheme:t}=Object(E.useEuiTheme)(),n=wi();return Object(A.jsx)(h.a.Fragment,null,e.clusters.map((e=>{const r=e.meta.clusterId.slice(0,6);return Object(A.jsx)(h.a.Fragment,{key:e.meta.clusterId},Object(A.jsx)(E.EuiPanel,{hasBorder:!0,hasShadow:!1,paddingSize:"none"},Object(A.jsx)(E.EuiFlexGroup,{gutterSize:"none",style:{height:300}},Object(A.jsx)(E.EuiFlexItem,{grow:2,style:Ri(t)},Object(A.jsx)(E.EuiFlexGroup,{direction:"column",alignItems:"center",justifyContent:"spaceAround"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiText,{style:{textAlign:"center"}},Object(A.jsx)("h4",null,e.meta.benchmarkName)),Object(A.jsx)(E.EuiText,{style:{textAlign:"center"}},Object(A.jsx)("h4",null,`Cluster ID ${r}`)),Object(A.jsx)(E.EuiSpacer,{size:"xs"}),Object(A.jsx)(E.EuiText,{size:"xs",color:"subdued",style:{textAlign:"center"}},Object(A.jsx)(E.EuiIcon,{type:"clock"}),` ${$n()(e.meta.lastUpdate).fromNow()}`)),Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiIcon,{type:"logoKubernetes",size:"xxl"})),Object(A.jsx)(E.EuiFlexItem,{grow:!1},false))),Object(A.jsx)(E.EuiFlexItem,{grow:4,style:{borderRight:`1px solid ${t.colors.lightShade}`}},Object(A.jsx)(ii,{title:li,hasBorder:!1},Object(A.jsx)(Ti,{id:`${e.meta.clusterId}_score_chart`,data:e.stats,trend:e.trend,partitionOnElementClick:t=>((e,t)=>{const[r]=t,[i]=r,a=i[0].groupByRollup;n({"cluster_id.keyword":e,"result.evaluation.keyword":a})})(e.meta.clusterId,t)}))),Object(A.jsx)(E.EuiFlexItem,{grow:4},Object(A.jsx)(ii,{title:ui,hasBorder:!1},Object(A.jsx)(Ci,{data:e.groupedFindingsEvaluation,maxItems:3,onCellClick:t=>{return r=e.meta.clusterId,void n({"cluster_id.keyword":r,"rule.section.keyword":t,"result.evaluation.keyword":F});var r},onViewAllClick:()=>{return t=e.meta.clusterId,void n({"cluster_id.keyword":t,"result.evaluation.keyword":F});var t}}))))),Object(A.jsx)(E.EuiSpacer,null))})))},Ri=e=>({border:`1px solid ${e.colors.lightShade}`,borderRadius:`${e.border.radius.medium} 0 0 ${e.border.radius.medium}`,background:e.colors.lightestShade}),Pi=["csp_dashboard_stats"];var Li=n(57),Ai=n.n(Li);const Qi=k.i18n.translate("xpack.csp.benchmarks.benchmarkIntegrationsTitle",{defaultMessage:"Benchmark Integrations"}),qi={INTEGRATION:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.integrationColumnTitle",{defaultMessage:"Integration"}),INTEGRATION_TYPE:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.integrationTypeColumnTitle",{defaultMessage:"Integration Type"}),ACTIVE_RULES:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.activeRulesColumnTitle",{defaultMessage:"Active Rules"}),AGENT_POLICY:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.agentPolicyColumnTitle",{defaultMessage:"Agent Policy"}),NUMBER_OF_AGENTS:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.numberOfAgentsColumnTitle",{defaultMessage:"Number of Agents"}),CREATED_BY:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.createdByColumnTitle",{defaultMessage:"Created by"}),CREATED_AT:k.i18n.translate("xpack.csp.benchmarks.benchmarksTable.createdAtColumnTitle",{defaultMessage:"Created at"})},Ni=k.i18n.translate("xpack.csp.benchmarks.searchPlaceholder",{defaultMessage:"e.g. benchmark name"}),Ui=({name:e,id:t})=>{const{http:n,application:r}=B().services,[i,a]=K.pagePathGetters.policy_details({policyId:t});return Object(A.jsx)("a",{href:n.basePath.prepend([i,a].join("")),title:e,onClick:e=>{e.stopPropagation(),e.preventDefault(),r.navigateToApp("fleet",{path:a})}},e)},Di=[{field:"package_policy.name",name:qi.INTEGRATION,render:(e,t)=>Object(A.jsx)(x.Link,{to:Object(x.generatePath)(P.rules.path,{packagePolicyId:t.package_policy.id,policyId:t.package_policy.policy_id}),title:e,onClick:e=>{e.stopPropagation()}},e),truncateText:!0,sortable:!0},{field:"rules",name:qi.ACTIVE_RULES,truncateText:!0,render:({enabled:e,all:t})=>Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmark.benchmarkTable.activeRulesColumnRenderTitle",defaultMessage:"{enabled} of {all}",values:{enabled:e,all:t}})},{field:"package_policy.package.title",name:qi.INTEGRATION_TYPE,dataType:"string",truncateText:!0,sortable:!0},{field:"agent_policy.name",name:qi.AGENT_POLICY,render:(e,t)=>Object(A.jsx)(Ui,{name:e,id:t.agent_policy.id}),truncateText:!0},{field:"agent_policy.agents",name:qi.NUMBER_OF_AGENTS,truncateText:!0},{field:"package_policy.created_by",name:qi.CREATED_BY,dataType:"string",truncateText:!0,sortable:!0},{field:"package_policy.created_at",name:qi.CREATED_AT,dataType:"date",truncateText:!0,render:e=>$n()(e).fromNow(),sortable:!0}],Bi=({benchmarks:e,pageIndex:t,pageSize:n,totalItemCount:r,loading:i,error:a,setQuery:s,noItemsMessage:u,sorting:o,...c})=>{const l=Object(x.useHistory)(),d={pageIndex:Math.max(t-1,0),pageSize:n,totalItemCount:r};return Object(A.jsx)(E.EuiBasicTable,{"data-test-subj":c["data-test-subj"],items:e,columns:Di,rowProps:e=>({onClick:()=>l.push(Object(x.generatePath)(P.rules.path,{packagePolicyId:e.package_policy.id,policyId:e.package_policy.policy_id}))}),itemId:e=>[e.agent_policy.id,e.package_policy.id].join("/"),pagination:d,onChange:({page:e,sort:t})=>{s({page:{...e,index:e.index+1},sort:t})},tableLayout:"fixed",loading:i,noItemsMessage:u,error:a,sorting:o})},zi=[P.benchmarks],Ki=({name:e})=>Object(A.jsx)("div",null,Object(A.jsx)(E.EuiSpacer,{size:"l"}),Object(A.jsx)(E.EuiText,null,Object(A.jsx)("strong",null,Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmarks.integrationsNotFoundMessage",defaultMessage:"No benchmark integrations found"}),e&&Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmarks.integrationsNotFoundForNameMessage",defaultMessage:' for "{name}"',values:{name:e}}))),Object(A.jsx)(E.EuiSpacer,{size:"s"}),Object(A.jsx)(E.EuiText,null,Object(A.jsx)(E.EuiTextColor,{color:"subdued"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmarks.integrationsNotFoundWithFiltersMessage",defaultMessage:"We weren't able to find any benchmark integrations with the above filters."}))),Object(A.jsx)(E.EuiSpacer,{size:"l"})),Hi=({pageCount:e,totalCount:t})=>Object(A.jsx)(E.EuiText,{size:"xs",style:{marginLeft:8}},Object(A.jsx)(E.EuiTextColor,{color:"subdued"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmarks.totalIntegrationsCountMessage",defaultMessage:"Showing {pageCount} of {totalCount, plural, one {# integration} other {# integrations}}",values:{pageCount:e,totalCount:t}}))),Gi=({onSearch:e,isLoading:t})=>{const[n,r]=Object(p.useState)("");return Ai()((()=>e(n)),300,[n]),Object(A.jsx)(E.EuiFlexGroup,null,Object(A.jsx)(E.EuiFlexItem,{grow:!0,style:{alignItems:"flex-end"}},Object(A.jsx)(E.EuiFieldSearch,{onSearch:r,isLoading:t,placeholder:Ni,incremental:!0})))},Vi={pageTitle:Qi,rightSideItems:[Object(A.jsx)((()=>{const e=H();return Object(A.jsx)(E.EuiButton,{"data-test-subj":"csp_add_integration",fill:!0,iconType:"plusInCircle",href:e,isDisabled:!e},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.benchmarks.addCisIntegrationButtonLabel",defaultMessage:"Add a CIS integration"}))}),null)]},Wi=e=>`csp_rules_table_item_switch_${e}`,$i=k.i18n.translate("xpack.csp.rules.saveButtonLabel",{defaultMessage:"Save"}),Ji=k.i18n.translate("xpack.csp.rules.cancelButtonLabel",{defaultMessage:"Cancel"}),Yi=(k.i18n.translate("xpack.csp.rules.unknownErrorMessage",{defaultMessage:"Unknown Error"}),k.i18n.translate("xpack.csp.rules.refreshButtonLabel",{defaultMessage:"Refresh"})),Zi=k.i18n.translate("xpack.csp.rules.searchPlaceholder",{defaultMessage:"Search"}),Xi=k.i18n.translate("xpack.csp.rules.bulkActionsButtonLabel",{defaultMessage:"Bulk Actions"}),ea=k.i18n.translate("xpack.csp.rules.rulesTable.rulesTableColumn.nameLabel",{defaultMessage:"Rule Name"}),ta=k.i18n.translate("xpack.csp.rules.rulesTable.rulesTableColumn.cisSectionLabel",{defaultMessage:"CIS Section"}),na=k.i18n.translate("xpack.csp.rules.rulesTable.rulesTableColumn.lastModifiedLabel",{defaultMessage:"Last modified"}),ra=k.i18n.translate("xpack.csp.rules.rulesTable.rulesTableColumn.enabledLabel",{defaultMessage:"Enabled"}),ia=k.i18n.translate("xpack.csp.rules.disableLabel",{defaultMessage:"Disable"}),aa=k.i18n.translate("xpack.csp.rules.enableLabel",{defaultMessage:"Enable"}),sa=k.i18n.translate("xpack.csp.rules.deactivateLabel",{defaultMessage:"Deactivate"}),ua=k.i18n.translate("xpack.csp.rules.activateLabel",{defaultMessage:"Activate"}),oa=k.i18n.translate("xpack.csp.rules.activatedLabel",{defaultMessage:"Activated"}),ca=(k.i18n.translate("xpack.csp.rules.missingRulesMessage",{defaultMessage:"Rules are missing"}),k.i18n.translate("xpack.csp.rules.updateFailedMessage",{defaultMessage:"Update failed"})),la=k.i18n.translate("xpack.csp.rules.ruleFlyout.tabs.overviewTabLabel",{defaultMessage:"Overview"}),da=k.i18n.translate("xpack.csp.rules.ruleFlyout.tabs.remediationTabLabel",{defaultMessage:"Remediation"}),fa=k.i18n.translate("xpack.csp.rules.dataUpdateInfoCallout",{defaultMessage:"Please note, any changes to your benchmark rules will take effect the next time your resources are evaluated. This can take up to ~5 hours"}),pa=({toggleRule:e,setSelectedRules:t,setPagination:n,setSelectedRuleId:r,perPage:i,rules_page:a,page:s,tableRef:u,total:o,loading:c,error:l,selectedRuleId:d})=>{const{euiTheme:f}=Object(E.useEuiTheme)(),h=Object(p.useMemo)((()=>ha({toggleRule:e,setSelectedRuleId:r})),[r,e]),g={pageIndex:s,pageSize:i,totalItemCount:o,pageSizeOptions:[10,25,100]},b={selectable:()=>!0,onSelectionChange:t};return Object(A.jsx)(E.EuiBasicTable,{ref:u,"data-test-subj":"csp_rules_table",loading:c,error:l,items:a,columns:h,pagination:g,onChange:({page:e})=>{e&&n({page:e.index,perPage:e.size})},isSelectable:!0,selection:b,itemId:e=>e.id,rowProps:e=>{return{"data-test-subj":(t=e.id,`csp_rules_table_row_item_name_${t}`),style:{background:e.id===d?f.colors.highlight:void 0},onClick:t=>{const n=t.target.tagName;"BUTTON"!==n&&"INPUT"!==n&&r(e.id)}};var t}})},ha=({toggleRule:e,setSelectedRuleId:t})=>[{field:"attributes.name",name:ea,width:"60%",truncateText:!0,render:(e,n)=>Object(A.jsx)(E.EuiButtonEmpty,{className:"eui-textTruncate",title:e,onClick:e=>{e.stopPropagation(),t(n.id)},"data-test-subj":"csp_rules_table_row_item_name"},e)},{field:"attributes.section",name:ta,width:"15%"},{field:"updatedAt",name:na,width:"15%",render:e=>$n()(e).fromNow()},{field:"attributes.enabled",name:ra,render:(t,n)=>Object(A.jsx)(E.EuiToolTip,{content:t?sa:ua},Object(A.jsx)(E.EuiSwitch,{showLabel:!1,label:t?ia:aa,checked:t,onChange:()=>e(n),"data-test-subj":Wi(n.id)})),width:"10%"}],ga=({onSave:e,onCancel:t,isLoading:n})=>Object(A.jsx)(E.EuiBottomBar,{style:{zIndex:1001}},Object(A.jsx)(E.EuiFlexGroup,{justifyContent:"flexEnd"},Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiButton,{size:"m",iconType:"cross",isLoading:n,onClick:t,color:"ghost"},Ji)),Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiButton,{size:"m",iconType:"save",isLoading:n,onClick:e,fill:!0,"data-test-subj":"csp_rules_table_save_button"},$i)))),ba=({items:e})=>{const[t,n]=Object(p.useState)(!1),r=()=>n(!1),i=e.map(((e,t)=>Object(A.jsx)(E.EuiContextMenuItem,m()({},e,{key:t,onClick:t=>{var n;r(),null===(n=e.onClick)||void 0===n||n.call(e,t)}})))),a=Object(A.jsx)(E.EuiButtonEmpty,{iconType:"arrowDown",onClick:()=>n(!t),"data-test-subj":"csp_rules_table_bulk_menu_button"},Xi);return Object(A.jsx)(E.EuiPopover,{button:a,isOpen:t,closePopover:r,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(A.jsx)(E.EuiContextMenuPanel,{size:"s",items:i}))},ya=({lastModified:e})=>Object(A.jsx)(E.EuiText,{size:"s"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.tableHeader.lastModificationLabel",defaultMessage:"Last modification to integration {timeAgo} ",values:{timeAgo:$n()(e).fromNow()}})),va=({search:e,refresh:t,bulkEnable:n,bulkDisable:r,selectAll:i,clearSelection:a,totalRulesCount:s,selectedRulesCount:u,searchValue:o,isSearching:c,lastModified:l})=>Object(A.jsx)("div",null,l&&Object(A.jsx)(ya,{lastModified:l}),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(E.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",responsive:!1,wrap:!0},Object(A.jsx)(ma,{total:s,selected:u}),Object(A.jsx)(ja,{isSelectAll:u===s,clear:a,select:i}),Object(A.jsx)(xa,{bulkEnable:n,bulkDisable:r,selectedRulesCount:u}),Object(A.jsx)(Sa,{onClick:t}),Object(A.jsx)(Oa,{isSearching:c,searchValue:o,search:e}))),ma=({total:e,selected:t})=>Object(A.jsx)(E.EuiFlexItem,{grow:!1,style:{flexDirection:"row",fontVariantNumeric:"tabular-nums"}},Object(A.jsx)(Ea,{count:e}),Ia,Object(A.jsx)(Ma,{count:t})),ja=({isSelectAll:e,select:t,clear:n})=>Object(A.jsx)(E.EuiFlexItem,{grow:!1},e?Object(A.jsx)(_a,{onClick:n}):Object(A.jsx)(wa,{onClick:t})),xa=({bulkEnable:e,bulkDisable:t,selectedRulesCount:n})=>Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(ba,{items:[{icon:"eye",disabled:!n,children:Object(A.jsx)(ka,{count:n}),"data-test-subj":"csp_rules_table_bulk_enable_button",onClick:e},{icon:"eyeClosed",disabled:!n,children:Object(A.jsx)(Ta,{count:n}),"data-test-subj":"csp_rules_table_bulk_disable_button",onClick:t}]})),Oa=({search:e,isSearching:t,searchValue:n})=>{const[r,i]=Object(p.useState)(n);return Ai()((()=>e(r)),300,[r]),Object(A.jsx)(E.EuiFlexItem,{grow:!0,style:{alignItems:"flex-end"}},Object(A.jsx)(E.EuiFieldSearch,{isLoading:t,placeholder:Zi,value:r,onChange:e=>i(e.target.value),style:{minWidth:150}}))},Ea=({count:e})=>Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.header.totalRulesCount",defaultMessage:"Showing {rules}",values:{rules:Object(A.jsx)(Ca,{count:e})}}),Ma=({count:e})=>Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.header.selectedRulesCount",defaultMessage:"Selected {rules}",values:{rules:Object(A.jsx)(Ca,{count:e})}}),ka=({count:e})=>Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.activateAllButtonLabel",defaultMessage:"Activate {count, plural, one {# rule} other {# rules}}",values:{count:e}}),Ta=({count:e})=>Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.deactivateAllButtonLabel",defaultMessage:"Deactivate {count, plural, one {# rule} other {# rules}}",values:{count:e}}),Ca=({count:e})=>Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)("strong",{style:{margin:"0 4px"}},e),Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.header.rulesCountLabel",defaultMessage:"{count, plural, one { rule} other { rules}}",values:{count:e}})),_a=({onClick:e})=>Object(A.jsx)(E.EuiButtonEmpty,{onClick:e,iconType:"cross","data-test-subj":"rules_clear_selection"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.clearSelectionButtonLabel",defaultMessage:"Clear Selection"})),wa=({onClick:e})=>Object(A.jsx)(E.EuiButtonEmpty,{onClick:e,iconType:"pagesSelect","data-test-subj":"rules_select_all"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.selectAllButtonLabel",defaultMessage:"Select All"})),Sa=({onClick:e})=>Object(A.jsx)(E.EuiFlexItem,{grow:!1},Object(A.jsx)(E.EuiButtonEmpty,{onClick:e,iconType:"refresh","data-test-subj":"csp_rules_table_refresh_button"},Yi)),Ia=Object(A.jsx)("span",{css:{name:"m8ohgb",styles:"border-right:1px solid;margin:0px 8px"}}),Fa=[{label:la,id:"overview",disabled:!1},{label:da,id:"remediation",disabled:!1}],Ra=({onClose:e,rule:t,toggleRule:n})=>{const[r,i]=Object(p.useState)("overview");return Object(A.jsx)(E.EuiFlyout,{ownFocus:!1,onClose:e,outsideClickCloses:!0,"data-test-subj":"csp_rules_flyout_container"},Object(A.jsx)(E.EuiFlyoutHeader,null,Object(A.jsx)(E.EuiTitle,{size:"l"},Object(A.jsx)("h2",null,t.attributes.name)),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(E.EuiTabs,null,Fa.map((e=>Object(A.jsx)(E.EuiTab,{key:e.id,isSelected:r===e.id,onClick:()=>i(e.id),disabled:e.disabled},e.label))))),Object(A.jsx)(E.EuiFlyoutBody,null,"overview"===r&&Object(A.jsx)(Pa,{rule:t,toggleRule:()=>n(t)}),"remediation"===r&&Object(A.jsx)(E.EuiDescriptionList,{compressed:!1,listItems:mr(t.attributes)})))},Pa=({rule:e,toggleRule:t})=>Object(A.jsx)(E.EuiFlexGroup,{direction:"column"},Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)("span",null,Object(A.jsx)(E.EuiToolTip,{content:e.attributes.enabled?sa:ua},Object(A.jsx)(E.EuiSwitch,{label:oa,checked:e.attributes.enabled,onChange:t,"data-test-subj":Wi(e.id)})))),Object(A.jsx)(E.EuiFlexItem,null,Object(A.jsx)(E.EuiDescriptionList,{listItems:Or(e.attributes)}))),La=e=>e.map((e=>e.updatedAt)).filter(Ge).sort(((e,t)=>new Date(t).getTime()-new Date(e).getTime()))[0],Aa=()=>{const e=Object(x.useParams)(),t=Object(p.useRef)(null),[n,r]=Object(p.useState)(new Map),[i,a]=Object(p.useState)(null),[s,u]=Object(p.useState)(!1),[o,c]=Object(p.useState)([]),[l,d]=Object(p.useState)({filter:`csp_rule.attributes.policy_id: "${e.policyId}" and csp_rule.attributes.package_policy_id: "${e.packagePolicyId}"`,search:"",page:0,perPage:10}),{data:f,status:h,error:g,refetch:b}=(({search:e,page:t,perPage:n,filter:r})=>{const{savedObjects:i}=B().services;return Object(O.useQuery)([R,{search:e,page:t,perPage:n}],(()=>i.client.find({type:R,search:e,searchFields:["name"],page:1,sortField:"name.raw",perPage:n,filter:r})))})({filter:l.filter,search:(y=l.search,y?`${y}*`:""),page:1,perPage:1e4});var y;const{mutate:v,isLoading:m}=(()=>{const{savedObjects:e,notifications:t,http:n}=B().services,r=Object(O.useQueryClient)();return Object(O.useMutation)((async({savedObjectRules:t,packagePolicyId:r})=>{await e.client.bulkUpdate(t.map((e=>({type:R,id:e.id,attributes:e.attributes})))),await n.post("/internal/cloud_security_posture/update_rules_config",{body:JSON.stringify({package_policy_id:r})})}),{onError:e=>{e instanceof Error?t.toasts.addError(e,{title:ca}):t.toasts.addDanger(ca)},onSettled:()=>r.invalidateQueries({queryKey:R,exact:!1})})})(),j=Object(p.useMemo)((()=>(({status:e,data:t,error:n},r,i)=>{const a=(null==t?void 0:t.savedObjects)||[],s=((e,{page:t,perPage:n})=>e.slice(t*n,(t+1)*n))(a,i);return{loading:"loading"===e,error:n?Ve(n):void 0,all_rules:a,rules_map:new Map(a.map((e=>[e.id,e]))),rules_page:s.map((e=>r.get(e.id)||e)),total:(null==t?void 0:t.total)||0,lastModified:La(a)||null}})({data:f,error:g,status:h},n,l)),[f,g,h,n,l]),M=!!n.size,k=(e,t)=>r(((e,t,n)=>{const r=new Map(t);return n.forEach((t=>{const n=e.get(t.id),i=r.get(t.id);if(!n)throw new Error("expected base rule to exists");const a=n.attributes.enabled!==t.attributes.enabled;!i&&a&&r.set(t.id,t),i&&!a&&r.delete(t.id)})),r})(j.rules_map,n,e.map((e=>({...e,attributes:{...e.attributes,enabled:t}}))))),T=e=>k(s?j.all_rules:o.map((e=>j.rules_map.get(e))),e),C=e=>k([e],!e.attributes.enabled),_=Object(p.useCallback)((()=>r(new Map)),[]),w=Object(p.useCallback)((()=>{t.current&&(t.current.setSelection([]),u(!1))}),[]);return Object(p.useEffect)(_,[f,_]),Object(p.useEffect)(w,[l,w]),Object(A.jsx)("div",{"data-test-subj":"csp_rules_container"},Object(A.jsx)(E.EuiCallOut,{size:"m",title:fa,iconType:"iInCircle"}),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(E.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(A.jsx)(va,{search:e=>d((t=>({...t,search:e}))),refresh:()=>{w(),b()},bulkEnable:()=>T(!0),bulkDisable:()=>T(!1),selectAll:()=>{t.current&&(t.current.setSelection(j.rules_page),u(!0))},clearSelection:w,selectedRulesCount:s?j.all_rules.length:o.length,searchValue:l.search,totalRulesCount:j.all_rules.length,isSearching:"loading"===h,lastModified:j.lastModified}),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(pa,{rules_page:j.rules_page,total:j.total,error:j.error,loading:j.loading,perPage:l.perPage,page:l.page,tableRef:t,toggleRule:C,setSelectedRules:e=>{u(!1),c(e.map((e=>e.id)))},setPagination:e=>d((t=>({...t,...e}))),setSelectedRuleId:a,selectedRuleId:i})),M&&Object(A.jsx)(ga,{onSave:()=>v({savedObjectRules:[...n].map((([,e])=>e)),packagePolicyId:e.packagePolicyId}),onCancel:_,isLoading:m}),i&&Object(A.jsx)(Ra,{rule:n.get(i)||j.rules_map.get(i),onClose:()=>a(null),toggleRule:C}))},Qa=He.type({body:He.type({message:He.string})}),qa=({error:e})=>Object(A.jsx)(E.EuiEmptyPrompt,{color:"danger",iconType:"alert",title:Object(A.jsx)("h2",null,e)}),Na={findings:()=>{const e=Object(x.useLocation)(),t=(()=>{const{data:{dataViews:e}}=Object(y.useKibana)().services;return Object(O.useQuery)(["latest_findings_data_view"],(async()=>{var t;const n=null===(t=await e.find(S))||void 0===t?void 0:t[0];if(!n)throw new Error("Findings data view not found");return n}))})(),{pitQuery:n,pitIdRef:r,setPitId:i}=(e=>{const t=Object(p.useRef)(),[n,r]=Object(p.useState)(!1),i=Object(p.useCallback)((e=>{t.current=e,r(!0)}),[t,r]),{http:a}=B().services,s=Object(O.useQuery)(["findingsPitQuery","findings"],(()=>a.post("/internal/cloud_security_posture/es_pit",{query:{index_name:S,keep_alive:"2m"}})),{enabled:!n,onSuccess:e=>{i(e)},cacheTime:0});return{pitIdRef:t,setPitId:i,pitQuery:s}})();let a=t;return(n.isError||n.isLoading||n.isIdle)&&(a=n),Object(A.jsx)(X,{paddingSize:"none",query:a},Object(A.jsx)(ne.Provider,{value:{pitQuery:n,pitIdRef:r,setPitId:i}},Object(A.jsx)(x.Switch,null,Object(A.jsx)(x.Route,{exact:!0,path:P.findings.path,component:()=>Object(A.jsx)(x.Redirect,{to:{pathname:L.findings_default.path,search:e.search}})}),Object(A.jsx)(x.Route,{path:L.findings_default.path,render:()=>Object(A.jsx)(Xr,{dataView:t.data})}),Object(A.jsx)(x.Route,{path:L.findings_by_resource.path,render:()=>Object(A.jsx)(Nr,{dataView:t.data})}),Object(A.jsx)(x.Route,{path:"*",component:()=>Object(A.jsx)(x.Redirect,{to:L.findings_default.path})}))))},dashboard:()=>{var e;const t=(()=>{const{http:e}=B().services;return Object(O.useQuery)(["csp_info_key"],(()=>e.get("/internal/cloud_security_posture/setup_status")))})(),n="applicable"===(null===(e=t.data)||void 0===e?void 0:e.latestFindingsIndexStatus),r=(e=>{const{http:t}=B().services;return Object(O.useQuery)(Pi,(()=>t.get("/internal/cloud_security_posture/stats")),e)})({enabled:n});ur([P.dashboard]);const i=n?r:t;return Object(A.jsx)(X,{pageHeader:{pageTitle:ai},restrictWidth:1600,query:i,noDataConfig:n?void 0:(a=t.refetch,{pageTitle:hi.PAGE_TITLE,solution:hi.SOLUTION,docsLink:"https://www.elastic.co/guide/index.html",logo:"logoSecurity",actions:{dashboardNoDataCard:{icon:Object(A.jsx)(E.EuiIcon,{type:"refresh",size:"xxl"}),onClick:a,title:hi.BUTTON_TITLE,description:hi.DESCRIPTION}}})},r.data&&Object(A.jsx)(h.a.Fragment,null,Object(A.jsx)(Ii,{complianceData:r.data}),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(Fi,{complianceData:r.data}),Object(A.jsx)(E.EuiSpacer,null)));var a},benchmarks:()=>{var e,t,n;const[r,i]=Object(p.useState)({name:"",page:1,perPage:10,sortField:"package_policy.name",sortOrder:"asc"}),a=(({name:e,perPage:t,page:n,sortField:r,sortOrder:i})=>{const{http:a}=B().services,s={benchmark_name:e,per_page:t,page:n,sort_field:r,sort_order:i};return Object(O.useQuery)(["csp_benchmark_integrations",s],(()=>a.get("/internal/cloud_security_posture/benchmarks",{query:s})),{keepPreviousData:!0})})(r);ur(zi);const s=(null===(e=a.data)||void 0===e?void 0:e.total)||0;return Object(A.jsx)(X,{pageHeader:Vi},Object(A.jsx)(Gi,{isLoading:a.isFetching,onSearch:e=>i((t=>({...t,name:e})))}),Object(A.jsx)(E.EuiSpacer,null),Object(A.jsx)(Hi,{pageCount:((null===(t=a.data)||void 0===t?void 0:t.items)||[]).length,totalCount:s}),Object(A.jsx)(E.EuiSpacer,{size:"s"}),Object(A.jsx)(Bi,{benchmarks:(null===(n=a.data)||void 0===n?void 0:n.items)||[],"data-test-subj":"csp_benchmarks_table",error:a.error?Ve(a.error):void 0,loading:a.isFetching,pageIndex:r.page,pageSize:r.perPage,sorting:{sort:{field:r.sortField,direction:r.sortOrder},allowNeutralSort:!1},totalItemCount:s,setQuery:({page:e,sort:t})=>{i((n=>({...n,page:e.index,perPage:e.size,sortField:(null==t?void 0:t.field)||n.sortField,sortOrder:(null==t?void 0:t.direction)||n.sortOrder})))},noItemsMessage:a.isSuccess&&!a.data.total?Object(A.jsx)(Ki,{name:r.name}):void 0}))},rules:({match:{params:e}})=>{const{http:t}=B().services,n=(({packagePolicyId:e,policyId:t})=>{const{http:n}=B().services;return Object(O.useQuery)(["cspRulesInfo",{packagePolicyId:e,policyId:t}],(()=>Promise.all([n.get(D.packagePolicyRouteService.getInfoPath(e)).then((e=>e.item)),n.get(D.agentPolicyRouteService.getInfoPath(t)).then((e=>e.item))])))})(e),[r,i]=n.data||[],a=Object(p.useMemo)((()=>{return e=null==r?void 0:r.name,[P.benchmarks,{...P.rules,name:e}].filter((e=>!!e.name));var e}),[null==r?void 0:r.name]);ur(a);const s=Object(p.useMemo)((()=>({pageHeader:{alignItems:"bottom",rightSideItems:[Object(A.jsx)(E.EuiButtonEmpty,{iconType:"gear",size:"xs",href:t.basePath.prepend(K.pagePathGetters.edit_integration(e).join(""))},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.manageIntegrationButtonLabel",defaultMessage:"Manage Integration"}))],pageTitle:Object(A.jsx)(E.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(A.jsx)(x.Link,{to:Object(x.generatePath)(P.benchmarks.path)},Object(A.jsx)(E.EuiButtonEmpty,{iconType:"arrowLeft",contentProps:{style:{padding:0}}},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.rulesPageHeader.benchmarkIntegrationsButtonLabel",defaultMessage:"Benchmark Integrations"}))),Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.rulePageHeader.pageHeaderTitle",defaultMessage:"Rules - {integrationName}",values:{integrationName:null==r?void 0:r.name}})),description:(null==r?void 0:r.package)&&(null==i?void 0:i.name)&&Object(A.jsx)(E.EuiTextColor,{color:"subdued"},Object(A.jsx)(j.FormattedMessage,{id:"xpack.csp.rules.rulePageHeader.pageDescriptionTitle",defaultMessage:"{integrationType}, {agentPolicyName}",values:{integrationType:r.package.title,agentPolicyName:i.name}}))}})),[null==i?void 0:i.name,t.basePath,null==r?void 0:r.name,null==r?void 0:r.package,e]);return Object(A.jsx)(X,m()({},s,{query:n,errorRender:e=>{return Object(A.jsx)(qa,{error:(t=e,Qa.is(t)?t.body.message:Ve(t))});var t}}),Object(A.jsx)(Aa,null))}},Ua=new O.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Da=((e,t)=>Object.entries(t).filter((([t,n])=>!e[t].disabled)).map((([t,n])=>({...e[t],component:n}))))(P,Na),Ba=({core:e,deps:t,params:n})=>Object(A.jsx)(y.RedirectAppLinks,{application:e.application,className:M.APP_WRAPPER_CLASS},Object(A.jsx)(y.KibanaContextProvider,{services:{...t,...e}},Object(A.jsx)(O.QueryClientProvider,{client:Ua},Object(A.jsx)(E.EuiErrorBoundary,null,Object(A.jsx)(x.Router,{history:n.history},Object(A.jsx)(j.I18nProvider,null,Object(A.jsx)(x.Switch,null,Da.map((e=>Object(A.jsx)(x.Route,m()({key:e.path},e)))),Object(A.jsx)(x.Route,{exact:!0,path:"/",component:za}),Object(A.jsx)(x.Route,{path:"*",component:ee})))))))),za=()=>Object(A.jsx)(x.Redirect,{to:P.dashboard.path}),Ka=(e,t,n)=>(b.a.render(Object(A.jsx)(y.KibanaThemeProvider,{theme$:n.theme$},Object(A.jsx)(Ba,{core:e,params:n,deps:t})),n.element),()=>b.a.unmountComponentAtNode(n.element))}])]);