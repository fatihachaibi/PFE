/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[11],{127:function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return h}));var a=i(0),l=i(1),n=i(7),s=i(137),r=i(47),o=i(3),d=i(30),c=i(35),u=i(8),b=i(118),p=i(11);const y={"host.os.platform":o.O,"host.os.full":o.w,"service.version":o.Z,"network.carrier.icc":o.f,"network.carrier.name":o.g,"network.connection_type":o.i,"labels.device_model":o.o,"url.full":o.hb};var m=i(96);const g=i(54).j,f={[d.b.UX]:l.i18n.translate("xpack.observability.overview.exploratoryView.uxLabel",{defaultMessage:"User experience (RUM)"}),[d.b.SYNTHETICS]:l.i18n.translate("xpack.observability.overview.exploratoryView.syntheticsLabel",{defaultMessage:"Synthetics monitoring"}),[d.b.METRICS]:l.i18n.translate("xpack.observability.overview.exploratoryView.metricsLabel",{defaultMessage:"Metrics"}),[d.b.LOGS]:l.i18n.translate("xpack.observability.overview.exploratoryView.logsLabel",{defaultMessage:"Logs"}),[d.b.MOBILE]:l.i18n.translate("xpack.observability.overview.exploratoryView.mobileExperienceLabel",{defaultMessage:"Mobile experience"})},T=[{id:d.b.SYNTHETICS,label:f[d.b.SYNTHETICS]},{id:d.b.UX,label:f[d.b.UX]},{id:d.b.LOGS,label:f[d.b.LOGS]},{id:d.b.MOBILE,label:f[d.b.MOBILE]}],x=[{reportType:"kpi-over-time",label:o.y},{reportType:"data-distribution",label:o.S},{reportType:"core-web-vitals",label:o.j},{reportType:"device-data-distribution",label:o.m}],v={[d.b.UX]:[function({dataView:e}){return{defaultSeriesType:"bar_stacked",seriesTypes:[],reportType:d.m.KPI,xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:d.l,operationType:"median"}],hasOperationType:!1,filterFields:[u.o,u.s,u.a,u.q,{field:u.r,nested:u.u},d.f],breakdownFields:[u.r,u.s,u.a,u.q,d.h,d.e],baseFilters:[...Object(c.b)(u.n,"page-load",e),...Object(c.b)(u.h,"transaction",e)],labels:{...d.d,[u.j]:o.ib},definitionFields:[u.j,u.i],metricOptions:[{field:d.j,id:d.j,label:o.R},{label:o.Q,field:u.l,id:u.l,columnType:d.g},{label:o.c,field:u.m,id:u.m,columnType:d.g},{label:o.t,field:u.c,id:u.c,columnType:d.g},{label:o.eb,field:u.k,id:u.k,columnType:d.g},{label:o.A,field:u.e,id:u.e,columnType:d.g},{label:o.u,field:u.d,id:u.d,columnType:d.g},{label:o.h,field:u.b,id:u.b,columnType:d.g}]}},function({dataView:e}){return{reportType:d.m.DISTRIBUTION,defaultSeriesType:"line",seriesTypes:[],xAxisColumn:{sourceField:d.l},yAxisColumns:[{sourceField:d.k,label:o.P}],hasOperationType:!1,filterFields:[{field:u.o,isNegated:!1},u.s,u.a,u.q,{field:u.r,nested:u.u},d.f],breakdownFields:[u.r,u.s,u.a,u.q,u.j],definitionFields:[u.j,u.i],metricOptions:[{label:o.Q,id:u.l,field:u.l},{label:o.c,id:u.m,field:u.m},{label:o.t,id:u.c,field:u.c},{label:o.eb,id:u.k,field:u.k},{label:o.A,id:u.e,field:u.e},{label:o.u,id:u.d,field:u.d},{label:o.h,id:u.b,field:u.b}],baseFilters:[...Object(c.b)(u.n,"page-load",e),...Object(c.b)(u.h,"transaction",e)],labels:{...d.d,[u.j]:o.ib,[u.l]:o.Q},query:{query:"transaction.duration.us < 60000000",language:"kuery"}}},function({dataView:e}){const t=Object(n.euiPaletteForStatus)(3);return{defaultSeriesType:"bar_horizontal_percentage_stacked",reportType:d.m.CORE_WEB_VITAL,seriesTypes:["bar_horizontal_percentage_stacked"],xAxisColumn:{sourceField:d.o},yAxisColumns:[{sourceField:d.l,label:"Good"},{sourceField:d.l,label:"Average"},{sourceField:d.l,label:"Poor"}],hasOperationType:!1,filterFields:[{field:u.o,isNegated:!1},u.j,{field:u.s,nested:u.t},u.a,u.q,{field:u.r,nested:u.u},d.f],breakdownFields:[u.j,u.r,u.s,u.a,u.q,u.p],baseFilters:[...Object(c.b)(u.n,"page-load",e),...Object(c.b)(u.h,"transaction",e)],labels:{...d.d,[u.j]:"Web Application"},definitionFields:[u.j,u.i],metricOptions:[{id:u.e,label:o.A,columnType:d.c,columnFilters:[{language:"kuery",query:`${u.e} < 2500`},{language:"kuery",query:`${u.e} > 2500 and ${u.e} < 4000`},{language:"kuery",query:`${u.e} > 4000`}]},{label:o.u,id:u.d,columnType:d.c,columnFilters:[{language:"kuery",query:`${u.d} < 100`},{language:"kuery",query:`${u.d} > 100 and ${u.d} < 300`},{language:"kuery",query:`${u.d} > 300`}]},{label:o.h,id:u.b,columnType:d.c,columnFilters:[{language:"kuery",query:`${u.b} < 0.1`},{language:"kuery",query:`${u.b} > 0.1 and ${u.b} < 0.25`},{language:"kuery",query:`${u.b} > 0.25`}]}],yConfig:[{color:t[0],forAccessor:"y-axis-column"},{color:t[1],forAccessor:"y-axis-column-1"},{color:t[2],forAccessor:"y-axis-column-2"}],query:{query:'transaction.type: "page-load"',language:"kuery"}}}],[d.b.SYNTHETICS]:[b.a,function({series:e,dataView:t}){return{reportType:d.m.DISTRIBUTION,defaultSeriesType:(null==e?void 0:e.seriesType)||"line",seriesTypes:[],xAxisColumn:{sourceField:d.l},yAxisColumns:[{sourceField:d.k,label:o.T}],hasOperationType:!1,filterFields:["monitor.type","observer.geo.name","tags","url.full"],breakdownFields:["observer.geo.name","monitor.name","monitor.id","monitor.type","tags","url.port"],baseFilters:[],definitionFields:[{field:"monitor.name",nested:"synthetics.step.name.keyword",singleSelection:!0},{field:"url.full",filters:Object(c.a)("summary.up",t)}],metricOptions:[{label:o.G,id:p.a,field:p.a},{label:o.A,field:p.f,id:p.f},{label:o.t,field:p.e,id:p.e},{label:o.l,field:p.c,id:p.c},{label:o.p,field:p.d,id:p.d},{label:o.h,field:p.b,id:p.b}],labels:{...d.d,"monitor.duration.us":o.G}}}],[d.b.MOBILE]:[function({dataView:e}){return{reportType:d.m.KPI,defaultSeriesType:"line",seriesTypes:["line","bar","area"],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:d.l,operationType:"median"}],hasOperationType:!0,filterFields:[...Object.keys(y),d.f],breakdownFields:Object.keys(y),baseFilters:[...Object(c.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...d.d,...y,[u.l]:o.W,[u.j]:o.F,[u.g]:o.cb,[u.f]:o.k},definitionFields:[u.j,u.i],metricOptions:[{label:o.W,field:u.l,id:u.l,columnType:d.g},{field:d.j,id:d.j,label:o.fb,columnFilters:[{language:"kuery",query:`${u.h}: transaction`}],timeScale:"m"},{label:o.cb,field:u.g,id:u.g,columnType:d.g,columnFilters:[{language:"kuery",query:`${u.h}: metric`}]},{label:o.k,field:u.f,id:u.f,columnType:d.g,columnFilters:[{language:"kuery",query:`${u.h}: metric`}]}]}},function({dataView:e}){return{reportType:d.m.DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["line","bar"],xAxisColumn:{sourceField:d.l},yAxisColumns:[{sourceField:d.j}],hasOperationType:!1,filterFields:[...Object.keys(y),d.f],breakdownFields:Object.keys(y),baseFilters:[...Object(c.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...d.d,...y,[u.j]:o.F},definitionFields:[u.j,u.i],metricOptions:[{label:o.W,field:u.l,id:u.l,columnFilters:[{language:"kuery",query:`${u.h}: transaction`}]},{label:o.cb,field:u.g,id:u.g,columnFilters:[{language:"kuery",query:`${u.h}: metric`}]},{label:o.k,field:u.f,id:u.f,columnFilters:[{language:"kuery",query:`${u.h}: metric`}]}]}},function({dataView:e}){return{reportType:d.m.DEVICE_DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["bar","bar_horizontal"],xAxisColumn:{sourceField:d.o},yAxisColumns:[{sourceField:d.l,operationType:"unique_count"}],hasOperationType:!1,filterFields:[...Object.keys(y),d.f],breakdownFields:Object.keys(y),baseFilters:[...Object(c.b)("agent.name","iOS/swift",e),...Object(c.b)("processor.event","transaction",e)],labels:{...d.d,...y,[u.j]:o.F},definitionFields:[u.j],metricOptions:[{field:"labels.device_id",id:"labels.device_id",label:o.L}]}}],[d.b.LOGS]:[function(e){return{reportType:d.m.KPI,defaultSeriesType:"bar",seriesTypes:[],xAxisColumn:{label:l.i18n.translate("xpack.observability.exploratoryView.logs.logRateXAxisLabel",{defaultMessage:"Timestamp"}),dataType:"date",operationType:"date_histogram",sourceField:"@timestamp",isBucketed:!0,scale:"interval"},yAxisColumns:[{label:l.i18n.translate("xpack.observability.exploratoryView.logs.logRateYAxisLabel",{defaultMessage:"Log rate per minute"}),dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:d.j,timeScale:"m"}],hasOperationType:!1,filterFields:["agent.type","service.type","event.dataset"],breakdownFields:["agent.hostname","service.type","event.dataset"],baseFilters:[],definitionFields:["agent.hostname","service.type","event.dataset"],textDefinitionFields:["message"],metricOptions:[{label:o.C,field:d.j,id:g,columnType:"unique_count"}],labels:{...d.d}}}]};function h(){const{appMountParameters:e}=Object(m.a)();return a.createElement(n.EuiErrorBoundary,null,a.createElement(r.a,{reportTypes:x,dataTypes:T,dataViews:{},reportConfigMap:v,setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},a.createElement(s.ExploratoryViewPage,null)))}},94:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return w}));var a=i(0),l=i.n(a),n=i(7),s=i(22),r=i.n(s),o=i(93),d=i(36),c=i(128),u=i(121),b=i(134),p=i(127),y=i(1),m=i(10),g=i(35);var f=i(141),T=i(14);function x({alignLnsMetric:e="flex-start",children:t,disableBorder:i=!0,disableShadow:a=!0,metricIcon:s,metricIconColor:r,metricIconWidth:o="30px",metricPostfix:d,metricPostfixWidth:c="150px"}){let u="100%";return u=s?`${u} - ${o}`:u,u=d?`${u} - ${c}`:u,l.a.createElement(h,{"data-test-subj":"single-metric-wrapper",gutterSize:"none",$alignLnsMetric:e,$disableBorder:i,$disableShadow:a},s&&l.a.createElement(n.EuiFlexItem,{style:{justifyContent:"space-evenly",paddingTop:"24px"},grow:!1},l.a.createElement(n.EuiIcon,{type:s,size:"l",color:r,"data-test-subj":"single-metric-icon"})),l.a.createElement(n.EuiFlexItem,{style:{maxWidth:`calc(${u})`},grow:1,"data-test-subj":"single-metric"},t),d&&l.a.createElement(n.EuiFlexItem,{style:{justifyContent:"space-evenly",paddingTop:"24px",maxWidth:c,minWidth:0},grow:!1,"data-test-subj":"single-metric-postfix"},l.a.createElement(v,{size:"m"},l.a.createElement("h3",null,d))))}const v=r()(n.EuiTitle).withConfig({displayName:"StyledTitle",componentId:"sc-he28tw-0"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),h=r()(n.EuiFlexGroup).withConfig({displayName:"LensWrapper",componentId:"sc-he28tw-1"})([".embPanel__optionsMenuPopover{visibility:collapse;}.embPanel--editing{background-color:transparent;}"," &&&:hover{.embPanel__optionsMenuPopover{visibility:visible;}","}.embPanel__title{display:none;}",""],(e=>e.$disableBorder?".embPanel--editing {\n    border: 0;\n  }":""),(e=>e.$disableShadow?".embPanel--editing {\n      box-shadow: none;\n    }":""),(e=>{var t;return e.$alignLnsMetric?`.lnsMetricExpression__container {\n    align-items: ${null!==(t=e.$alignLnsMetric)&&void 0!==t?t:"flex-start"};\n  }`:""}));function w({appId:e,appendTitle:t,attributes:i=[],axisTitlesVisibility:s,customHeight:r,customLensAttrs:v,customTimeRange:h,indexPatterns:w,isSingleMetric:k=!1,legendIsVisible:F,lens:j,onBrushEnd:E,caseOwner:I=T.observabilityFeatureId,reportConfigMap:S={},reportType:C,showCalculationMethod:A=!1,singleMetricOptions:M,title:V,withActions:$=!0}){var _,L;const q=null==j?void 0:j.EmbeddableComponent,P=null==j?void 0:j.SaveModalComponent,[B,N]=Object(a.useState)(!1),[R,W]=Object(a.useState)(!1),D=null===(_=Object.entries(i)[0])||void 0===_?void 0:_[1],[z,H]=Object(a.useState)(null==D?void 0:D.operationType),U=Object(d.useTheme)(),G=Object(u.b)(i,C,U,w,{...S,...p.b});let K;try{K=new c.a(G)}catch(e){}const X=null!=v?v:null===(L=K)||void 0===L?void 0:L.getJSON(),Y=null!=h?h:null==D?void 0:D.time;void 0!==s&&(X.state.visualization.axisTitlesVisibilitySettings=s),void 0!==F&&(X.state.visualization.legend.isVisible=F);const Q=function({withActions:e,attributes:t,reportType:i,setIsSaveOpen:l,setAddToCaseOpen:n,appId:s="observability",timeRange:r,lensAttributes:o}){const d=Object(m.useKibana)().services,{lens:c}=d,[u,b]=Object(a.useState)(["explore","save","addToCase"]);Object(a.useEffect)((()=>{!1===e&&b([]),Array.isArray(e)&&b(e)}),[e]);const{http:p,application:f}=Object(m.useKibana)().services,T=Object(g.f)({reportType:i,allSeries:t},null==p?void 0:p.basePath.get(),s),x=Object(g.e)({reportType:i,allSeries:t}),v=Object(a.useCallback)((()=>{o&&c.navigateToPrefilledEditor({id:"",timeRange:r,attributes:o},{openInNewTab:!0})}),[c,o,r]),h=Object(a.useCallback)((()=>{null==f||f.navigateToApp(s,{path:x})}),[s,f,x]),w=Object(a.useCallback)((()=>{l(!0)}),[l]),O=Object(a.useCallback)((()=>{n(!0)}),[n]);return u.map((e=>"save"===e?(({callback:e})=>({id:"expViewSave",getDisplayName:e=>y.i18n.translate("xpack.observability.expView.save",{defaultMessage:"Save visualization"}),getIconType:e=>"save",type:"actionButton",isCompatible:async e=>!0,async execute(t){e()},order:49}))({callback:w}):"addToCase"===e?(({callback:e})=>({id:"expViewAddToCase",getDisplayName:e=>y.i18n.translate("xpack.observability.expView.addToCase",{defaultMessage:"Add to case"}),getIconType:e=>"link",type:"actionButton",isCompatible:async e=>!0,async execute(t){e()},order:48}))({callback:O}):"openInLens"===e?(({callback:e})=>({id:"expViewOpenInLens",getDisplayName:e=>y.i18n.translate("xpack.observability.expView.openInLens",{defaultMessage:"Open in Lens"}),getIconType:e=>"visArea",type:"link",isCompatible:async e=>!0,async execute(t){e()}}))({callback:v}):(({href:e,callback:t})=>({id:"expViewExplore",getDisplayName:e=>y.i18n.translate("xpack.observability.expView.explore",{defaultMessage:"Explore"}),getIconType:e=>"visArea",type:"link",isCompatible:async e=>!0,getHref:async t=>e,async execute(e){t()},order:50}))({href:T,callback:h})))}({withActions:$,attributes:i,reportType:C,appId:e,setIsSaveOpen:N,setAddToCaseOpen:W,lensAttributes:X,timeRange:Y});return!X&&G.length<1?null:q?l.a.createElement(O,{$customHeight:r},l.a.createElement(n.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},V&&l.a.createElement(n.EuiFlexItem,{"data-test-subj":"exploratoryView-title"},l.a.createElement(n.EuiTitle,{size:"xs"},l.a.createElement("h3",null,V))),A&&l.a.createElement(n.EuiFlexItem,{grow:!1,style:{minWidth:150}},l.a.createElement(b.a,{operationType:z,onChange:e=>{H(e)}})),t&&t),k&&l.a.createElement(x,M,l.a.createElement(q,{id:"exploratoryView-singleMetric","data-test-subj":"exploratoryView-singleMetric",style:{height:"100%"},timeRange:Y,attributes:X,onBrushEnd:E,withDefaultActions:Boolean($),extraActions:Q,viewMode:o.ViewMode.VIEW})),!k&&l.a.createElement(q,{id:"exploratoryView","data-test-subj":"exploratoryView",style:{height:"100%"},timeRange:Y,attributes:X,onBrushEnd:E,withDefaultActions:Boolean($),extraActions:Q,viewMode:o.ViewMode.VIEW}),B&&X&&l.a.createElement(P,{initialInput:X,onClose:()=>N(!1),onSave:()=>{}}),l.a.createElement(f.a,{lensAttributes:X,timeRange:null!=h?h:null==D?void 0:D.time,autoOpen:R,setAutoOpen:W,appId:e,owner:I})):l.a.createElement(n.EuiText,null,"No lens component")}const O=r.a.div.withConfig({displayName:"Wrapper",componentId:"sc-1sjndm2-0"})(["height:100%;&&&{> :nth-child(2){height:",";}.embPanel--editing{border-style:initial !important;:hover{box-shadow:none;}}.embPanel__title{display:none;}.embPanel__optionsMenuPopover{visibility:collapse;}&&&:hover{.embPanel__optionsMenuPopover{visibility:visible;}}}"],(e=>e.$customHeight?`${e.$customHeight};`:"calc(100% - 32px);"))}}]);