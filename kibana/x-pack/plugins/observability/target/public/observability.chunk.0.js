/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[0,5,6,13,14],{101:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(0),r=a(52);function n(){return Object(i.useContext)(r.a)}},111:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return f}));var i=a(0),r=a.n(i),n=a(7),l=a(62),o=a.n(l),s=a(1),u=a(10),c=a(95),d=a(30);const p=(e,t={})=>o.a.parse(e,t);function f({seriesId:e,series:t}){var a,i;const{firstSeries:l,setSeries:o,reportType:f}=Object(c.f)(),b=Object(u.useUiSetting)("dateFormat"),m=null===(a=t.time)||void 0===a?void 0:a.from,g=null===(i=t.time)||void 0===i?void 0:i.to,{from:y,to:v}=l.time,h=p(null!=m?m:y),E=p(null!=g?g:v,{roundUp:!0}),w=()=>{const e=p(y);return p(v,{roundUp:!0}).diff(e,"millisecond")};return r.a.createElement(n.EuiDatePickerRange,{fullWidth:!0,isCustom:!0,startDateControl:r.a.createElement(n.EuiDatePicker,{fullWidth:!0,selected:h,onChange:a=>{if(f===d.m.KPI){const i=w(),r=a.toISOString(),n=a.add(i,"millisecond").toISOString();o(e,{...t,time:{from:r,to:n}})}else{const i=a.toISOString();o(e,{...t,time:{from:i,to:g}})}},startDate:h,endDate:E,isInvalid:h>E,"aria-label":s.i18n.translate("xpack.observability.expView.dateRanger.startDate",{defaultMessage:"Start date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"}),endDateControl:r.a.createElement(n.EuiDatePicker,{fullWidth:!0,showIcon:!1,selected:E,onChange:a=>{if(f===d.m.KPI){const i=w(),r=a.toISOString(),n=a.subtract(i,"millisecond").toISOString();o(e,{...t,time:{from:n,to:r}})}else{const i=a.toISOString();o(e,{...t,time:{from:m,to:i}})}},startDate:h,endDate:E,isInvalid:h>E,"aria-label":s.i18n.translate("xpack.observability.expView.dateRanger.endDate",{defaultMessage:"End date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"})})}},115:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(0);const r=Object(i.createContext)({})},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(2),r=a(0),n=a(122),l=a.n(n),o=a(41),s=a(8);const u=({sourceField:e,dataViewTitle:t,query:a="",filters:n,time:u,label:c,keepHistory:d,cardinalityField:p})=>{const[f,b]=Object(r.useState)(a),[m,g]=Object(r.useState)([]),{from:y,to:v}=null!=u?u:{};l()((()=>{b(a)}),350,[a]),Object(r.useEffect)((()=>{a||b(a)}),[a]);const h=((e,t)=>{if(!t)return"";let a="";return a=e===s.o?`*.${t.toLowerCase()}.*`:t[0].toLowerCase()===t[0]?`(${t}|${Object(i.capitalize)(t)}).*`:`(${t}|${t.toLowerCase()}).*`,a})(e,a),{data:E,loading:w}=Object(o.b)(Object(o.a)({index:t,body:{query:{bool:{filter:[...null!=n?n:[],...y&&v?[{range:{"@timestamp":{gte:y,lte:v}}}]:[]]}},size:0,aggs:{values:{terms:{field:e,size:50,...a?{include:h}:{}},...p?{aggs:{count:{cardinality:{field:p}}}}:{}}}}}),[f,y,v,JSON.stringify(n),t,e],{name:`get${c.replace(/\s/g,"")}ValuesList`});return Object(r.useEffect)((()=>{var e,t;const a=null==E||null===(e=E.aggregations)||void 0===e?void 0:e.values.buckets,r=null!==(t=null==a?void 0:a.map((({key:e,doc_count:t,count:a})=>a?{count:a.value,label:String(e)}:{count:t,label:String(e)})))&&void 0!==t?t:[];g(d?e=>((e,t)=>Object(i.uniqBy)([...e,...t],"label"))(r,e):r)}),[E,d,w,a]),{values:m,loading:w}}},118:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return c}));var i=a(30),r=a(3),n=a(11),l=a(35);const o="summary.up",s="summary.down",u=e=>!!e&&[n.f,n.e,n.b,n.c,n.g,n.d].includes(e);function c({dataView:e}){return{reportType:i.m.KPI,defaultSeriesType:"bar_stacked",seriesTypes:[],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:i.l,operationType:"median"}],hasOperationType:!1,filterFields:["observer.geo.name","monitor.type","tags","url.full"],breakdownFields:["observer.geo.name","monitor.type","monitor.name",n.h,i.h],baseFilters:[],palette:{type:"palette",name:"status"},definitionFields:[{field:"monitor.name",nested:n.h,singleSelection:!0},{field:"url.full",filters:Object(l.a)("summary.up",e)}],metricOptions:[{label:r.G,field:n.a,id:n.a,columnType:i.g},{field:o,id:o,label:r.gb,columnType:i.g},{field:s,id:s,label:r.q,columnType:i.g},{label:r.ab,field:n.g,id:n.g,columnType:i.g,columnFilters:[p]},{label:r.A,field:n.f,id:n.f,columnType:i.g,columnFilters:d(n.f)},{label:r.t,field:n.e,id:n.e,columnType:i.g,columnFilters:d(n.e)},{label:r.l,field:n.c,id:n.c,columnType:i.g,columnFilters:d(n.c)},{label:r.Q,field:n.d,id:n.d,columnType:i.g,columnFilters:d(n.d)},{label:r.h,field:n.b,id:n.b,columnType:i.g,columnFilters:d(n.b)}],labels:{...i.d,[o]:r.gb,[s]:r.q}}}const d=e=>[{language:"kuery",query:`synthetics.type: step/metrics and ${e}: *`}],p={language:"kuery",query:"synthetics.type: step/end"}},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return m}));var i=a(0),r=a(2),n=a(128),l=a(95),o=a(133),s=a(98),u=a(51),c=a(37),d=a(30),p=a(47);const f=e=>Object.entries(null!=e?e:{}).map((([e,t])=>({field:e,values:Array.isArray(t)?t:[t]}))).filter((({values:e})=>!e.includes(u.a)));function b(e,t,a,i,n){const l=[];return e.forEach(((e,s)=>{const u=null==i?void 0:i[null==e?void 0:e.dataType];if(u&&!Object(r.isEmpty)(e.reportDefinitions)&&!e.hidden&&e.selectedMetricField){var c,p,b;const i=Object(o.a)({reportType:t,dataView:u,dataType:e.dataType,reportConfigMap:n}),r=(null!==(c=e.filters)&&void 0!==c?c:[]).concat(f(e.reportDefinitions),f(e.textReportDefinitions)),m=`euiColorVis${s}`;l.push({filters:r,indexPattern:u,seriesConfig:i,time:e.time,name:e.name,breakdown:e.breakdown===d.e?void 0:e.breakdown,seriesType:e.seriesType,operationType:e.operationType,reportDefinitions:null!==(p=e.reportDefinitions)&&void 0!==p?p:{},selectedMetricField:e.selectedMetricField,color:null!==(b=e.color)&&void 0!==b?b:a.eui[m]})}})),l}const m=()=>{const{storage:e,allSeries:t,lastRefresh:a,reportType:o}=Object(l.f)(),{dataViews:u}=Object(s.b)(),{reportConfigMap:d}=Object(p.b)(),f=Object(c.a)();return Object(i.useMemo)((()=>{var t;const i=Object(l.d)(null!==(t=e.get(l.c))&&void 0!==t?t:[]),o=e.get(l.e);if(Object(r.isEmpty)(u)||Object(r.isEmpty)(i)||!o)return null;const s=b(i,o,f,u,d);return s.length<1?null:new n.a(s).getJSON(a)}),[u,o,e,f,a,t])}},122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(73),r=a(0),n=i.__importDefault(a(123));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var i=n.default(e,t),l=i[0],o=i[1],s=i[2];return r.useEffect(s,a),[l,o]}},123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0);t.default=function(e,t){void 0===t&&(t=0);var a=i.useRef(!1),r=i.useRef(),n=i.useRef(e),l=i.useCallback((function(){return a.current}),[]),o=i.useCallback((function(){a.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){a.current=!0,n.current()}),t)}),[t]),s=i.useCallback((function(){a.current=null,r.current&&clearTimeout(r.current)}),[]);return i.useEffect((function(){n.current=e}),[e]),i.useEffect((function(){return o(),s}),[t]),[l,s,o]}},124:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),r=a(125).isClient?window:null,n=function(e){return!!e.addEventListener},l=function(e){return!!e.on};t.default=function(e,t,a,o){void 0===a&&(a=r),i.useEffect((function(){if(t&&a)return n(a)?a.addEventListener(e,t,o):l(a)&&a.on(e,t,o),function(){n(a)?a.removeEventListener(e,t,o):l(a)&&a.off(e,t,o)}}),[e,t,a,JSON.stringify(o)])}},125:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=a(73).__importDefault(a(126));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},126:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var i,r,n;if(Array.isArray(t)){if((i=t.length)!=a.length)return!1;for(r=i;0!=r--;)if(!e(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((i=(n=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(a,n[r]))return!1;for(r=i;0!=r--;){var l=n[r];if(!("_owner"===l&&t.$$typeof||e(t[l],a[l])))return!1}return!0}return t!=t&&a!=a}},128:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return lens_attributes_LensAttributes}));var i=a(5),r=a.n(i),n=a(1),l=a(2),o=a(27);const s=e=>1===e.length?`${e.join(" or ")}`:`(${e.join(" or ")})`;function u(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}var c=a(30),d=a(111);function p({label:e,layerId:t,columnFilter:a}){const i=`y-axis-column-${t}`;let r="count() / overall_sum(count())";a&&(r=`count(kql='${a}') / overall_sum(count(kql='${a}'))`);const n={label:e||"Percentage of records",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:r,isFormulaBroken:!1,format:{id:"percent",params:{decimals:0}}},references:[`${i}X4`]},l={label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:c.j,customLabel:!0,filter:{query:null!=a?a:"",language:"kuery"}};return{main:n,supportingColumns:{[`${i}X0`]:l,[`${i}X1`]:l,[`${i}X2`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:`${i}X1`},references:[`${i}X1`],customLabel:!0},[`${i}X3`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"overall_sum",isBucketed:!1,scale:"ratio",references:[`${i}X2`],customLabel:!0},[`${i}X4`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"divide",args:[`${i}X0`,`${i}X3`],location:{min:0,max:30},text:r}},references:[`${i}X0`,`${i}X3`],customLabel:!0}}}}function f(e){return{sourceField:e,dataType:"number",isBucketed:!1,scale:"ratio"}}const b=(e,t)=>{var a;let i,r,n,l;const o=null!==(a=e.metricOptions)&&void 0!==a?a:[];if(t&&o){const e=o.find((({field:e,id:a})=>e===t||a===t));i=null==e?void 0:e.columnType,r=null==e?void 0:e.columnFilters,n=null==e?void 0:e.timeScale,l=null==e?void 0:e.label}return{fieldName:t,columnType:i,columnFilters:r,timeScale:n,columnLabel:l}};class lens_attributes_LensAttributes{constructor(e){r()(this,"layers",void 0),r()(this,"visualization",void 0),r()(this,"layerConfigs",void 0),r()(this,"isMultiSeries",void 0),r()(this,"globalFilter",void 0),this.layers={},e.forEach((({seriesConfig:e,operationType:t})=>{t&&e.yAxisColumns.forEach((e=>{void 0!==typeof e.operationType&&(e.operationType=t)}))})),this.layerConfigs=e,this.isMultiSeries=e.length>1,this.globalFilter=this.getGlobalFilter(this.isMultiSeries),this.layers=this.getLayers(),this.visualization=this.getXyState()}getGlobalFilter(e){if(e)return;const t=this.layerConfigs[0].seriesConfig.query?` and ${this.layerConfigs[0].seriesConfig.query.query}`:"";return{query:`${this.getLayerFilters(this.layerConfigs[0],this.layerConfigs.length)}${t}`,language:"kuery"}}getBreakdownColumn({sourceField:e,layerId:t,labels:a,indexPattern:i,layerConfig:r}){const n=i.getFieldByName(e),{sourceField:l}=r.seriesConfig.yAxisColumns[0],o=l===c.k;return{sourceField:e,label:`Top values of ${a[e]}`,dataType:null==n?void 0:n.type,operationType:"terms",scale:"ordinal",isBucketed:!0,params:{orderBy:o?{type:"alphabetical"}:{type:"column",columnId:`y-axis-column-${t}`},size:10,orderDirection:"desc",otherBucket:!0,missingBucket:!1}}}getNumberRangeColumn(e,t,a){var i;return{sourceField:e,label:null!==(i=t.labels[e])&&void 0!==i?i:a,dataType:"number",operationType:"range",isBucketed:!0,scale:"interval",params:{type:"histogram",ranges:[{from:0,to:1e3,label:""}],maxBars:"auto"}}}getCardinalityColumn({sourceField:e,label:t,seriesConfig:a}){return this.getNumberOperationColumn({sourceField:e,operationType:"unique_count",label:t,seriesConfig:a})}getNumberColumn({seriesConfig:e,label:t,sourceField:a,columnType:i,columnFilter:r,operationType:n}){if("operation"===i||n){if("median"===n||"average"===n||"sum"===n||"unique_count"===n)return this.getNumberOperationColumn({sourceField:a,operationType:n,label:t,seriesConfig:e,columnFilter:r});if("last_value"===n)return this.getLastValueOperationColumn({sourceField:a,operationType:n,label:t,seriesConfig:e,columnFilter:r});if(null!=n&&n.includes("th"))return this.getPercentileNumberColumn(a,n,e)}return this.getNumberRangeColumn(a,e,t)}getLastValueOperationColumn({sourceField:e,label:t,seriesConfig:a,operationType:i,columnFilter:r}){return{...f(e),operationType:i,label:n.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||a.labels[e],operationType:Object(l.capitalize)(i)}}),filter:r,params:{sortField:"@timestamp",showArrayValues:!1}}}getNumberOperationColumn({sourceField:e,label:t,seriesConfig:a,operationType:i,columnFilter:r}){return{...f(e),label:n.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||a.labels[e],operationType:Object(l.capitalize)(i)}}),filter:r,operationType:i}}getPercentileBreakdowns(e,t){const a=e.seriesConfig.yAxisColumns,{sourceField:i,label:r}=a[0],n={};for(let a=1;a<c.i.length;a++)n[`y-axis-column-${a}`]={...this.getColumnBasedOnType({sourceField:i,operationType:c.i[a],label:r,layerConfig:e,colIndex:a}),filter:{query:t||"",language:"kuery"}};return n}getPercentileNumberColumn(e,t,a){var i;return{...f(e),label:n.i18n.translate("xpack.observability.expView.columns.label",{defaultMessage:"{percentileValue} percentile of {sourceField}",values:{sourceField:null===(i=a.labels[e])||void 0===i?void 0:i.toLowerCase(),percentileValue:t}}),operationType:"percentile",params:{percentile:Number(t.split("th")[0])}}}getDateHistogramColumn(e){return{sourceField:e,dataType:"date",isBucketed:!0,label:"@timestamp",operationType:"date_histogram",params:{interval:"auto"},scale:"interval"}}getTermsColumn(e,t){return{operationType:"terms",sourceField:e,label:"Top values of "+t||!1,dataType:"string",isBucketed:!0,scale:"ordinal",params:{size:10,orderBy:{type:"alphabetical",fallback:!1},orderDirection:"desc"}}}getXAxis(e,t){const{xAxisColumn:a}=e.seriesConfig;return(null==a?void 0:a.sourceField)===c.o?this.getBreakdownColumn({layerId:t,layerConfig:e,indexPattern:e.indexPattern,sourceField:e.breakdown||e.seriesConfig.breakdownFields[0],labels:e.seriesConfig.labels}):this.getColumnBasedOnType({layerConfig:e,label:a.label,sourceField:a.sourceField})}getColumnBasedOnType({sourceField:e,label:t,layerConfig:a,operationType:i,colIndex:r}){const{breakdown:n,seriesConfig:l}=a,{fieldMeta:o,columnType:s,fieldName:u,columnLabel:d,timeScale:p,columnFilters:f}=this.getFieldMeta(e,a),{type:b}=null!=o?o:{};return s===c.n?this.getTermsColumn(u,d||t):u===c.j||s===c.c?this.getRecordsColumn(t||d,void 0!==r?null==f?void 0:f[r]:void 0,p):"date"===b?this.getDateHistogramColumn(u):"number"===b&&n===c.h?{...this.getPercentileNumberColumn(u,i||c.i[0],l),filter:void 0!==r?null==f?void 0:f[r]:void 0}:"number"===b?this.getNumberColumn({sourceField:u,columnType:s,columnFilter:null==f?void 0:f[0],operationType:i,label:d||t,seriesConfig:a.seriesConfig}):"unique_count"===i?this.getCardinalityColumn({sourceField:u,label:d||t,seriesConfig:a.seriesConfig}):this.getDateHistogramColumn(u)}getCustomFieldName({sourceField:e,layerConfig:t}){return b(t.seriesConfig,e)}getFieldMeta(e,t){if(e===c.l){const{fieldName:e,columnType:a,columnLabel:i,columnFilters:r,timeScale:n}=b(t.seriesConfig,t.selectedMetricField);return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e,columnType:a,columnLabel:i,columnFilters:r,timeScale:n}}return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e}}getMainYAxis(e,t,a){const{breakdown:i}=e,{sourceField:r,operationType:n,label:l,timeScale:o}=e.seriesConfig.yAxisColumns[0];return r===c.k?p({label:l,layerId:t,columnFilter:a}).main:r!==c.j&&r?this.getColumnBasedOnType({sourceField:r,label:l,layerConfig:e,colIndex:0,operationType:i===c.h?c.i[0]:n}):this.getRecordsColumn(l,void 0,o)}getChildYAxises(e,t,a){const{breakdown:i}=e,r={},n=e.seriesConfig.yAxisColumns,{sourceField:l,label:o}=n[0];if(l===c.k&&t)return p({label:o,layerId:t,columnFilter:a}).supportingColumns;if(1===n.length&&i===c.h)return this.getPercentileBreakdowns(e,a);if(1===n.length)return r;for(let t=1;t<n.length;t++){const{sourceField:a,operationType:i,label:l}=n[t];r[`y-axis-column-${t}`]=this.getColumnBasedOnType({sourceField:a,operationType:i,label:l,layerConfig:e,colIndex:t})}return r}getRecordsColumn(e,t,a){return{dataType:"number",isBucketed:!1,label:e||"Count of records",operationType:"count",scale:"ratio",sourceField:c.j,filter:t,...a?{timeScale:a}:{}}}getLayerFilters(e,t){const{filters:a,time:i,seriesConfig:{baseFilters:r,reportType:n}}=e;let l="";n!==c.m.KPI&&t>1&&i&&(l+=`@timestamp >= ${i.from} and @timestamp <= ${i.to}`),null==r||r.forEach((e=>{var t,a,i;const r=e;if(null!==(t=r.query)&&void 0!==t&&t.match_phrase){const e=Object.keys(r.query.match_phrase)[0],t=`${e}: ${r.query.match_phrase[e]}`;l.length>0?l+=` and ${t}`:l+=t}if(null!==(a=r.query)&&void 0!==a&&null!==(i=a.bool)&&void 0!==i&&i.should){var n;const e=[];let t="";null===(n=r.query)||void 0===n||n.bool.should.forEach((a=>{a.match_phrase&&(t=Object.keys(a.match_phrase)[0],e.push(a.match_phrase[t]))}));const a=`${t}: (${e.join(" or ")})`;l.length>0?l+=` and ${a}`:l+=a}const s=e;if(Object(o.e)(s)){var u;const e=`${null===(u=s.query.exists)||void 0===u?void 0:u.field} : *`;l.length>0?l+=` and ${e}`:l+=e}}));const d=(e=>{let t="";return e.forEach((({field:e,values:a,notValues:i,wildcards:r,notWildcards:n})=>{const l=null==a?void 0:a.map((e=>`"${u(e)}"`)),o=null==i?void 0:i.map((e=>`"${u(e)}"`)),c=null==r?void 0:r.map((e=>`*${e}*`)),d=null==n?void 0:n.map((e=>`*${e}*`));l&&(null==l?void 0:l.length)>0&&(t.length>0&&(t+=" and "),t+=`${e}: ${s(l)}`),o&&(null==o?void 0:o.length)>0&&(t.length>0&&(t+=" and "),t+=`not (${e}: ${s(o)})`),c&&(null==c?void 0:c.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${s(c)})`),d&&(null==d?void 0:d.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${s(d)})`)})),t})(null!=a?a:[]);return l?d?`${d} and ${l}`:l:d}getTimeShift(e,t,a){if(0===a||e.seriesConfig.reportType!==c.m.KPI||!t.time)return null;const{time:{from:i}}=e,{time:{from:r}}=t,n=Object(d.b)(i),l=Object(d.b)(r),o=n&&l?Math.abs(n.diff(l,"days")):0;if(o>1)return o+"d";const s=n&&l?Math.abs(null==n?void 0:n.diff(l,"hours")):0;return 0===s?null:s+"h"}getLayers(){const e={},t=this.layerConfigs;return t.forEach(((a,i)=>{var r,n,l;const{breakdown:o,seriesConfig:s}=a,u=`layer${i}`,d=this.getLayerFilters(a,t.length),p=this.getTimeShift(this.layerConfigs[0],a,i),f=this.getMainYAxis(a,u,d),{sourceField:b}=s.xAxisColumn,m=p?`${f.label}(${p})`:f.label;let g=d||(null===(r=f.filter)||void 0===r?void 0:r.query);d&&null!==(n=f.filter)&&void 0!==n&&n.query&&(g=`${d} and ${f.filter.query}`),e[u]={columnOrder:[...o&&b!==c.o&&o!==c.h?[`breakdown-column-${u}`]:[],`x-axis-column-${u}`,`y-axis-column-${u}`,...Object.keys(this.getChildYAxises(a,u,d))],columns:{[`x-axis-column-${u}`]:this.getXAxis(a,u),[`y-axis-column-${u}`]:{...f,label:m,filter:{query:null!==(l=g)&&void 0!==l?l:"",language:"kuery"},...p?{timeShift:p}:{}},...o&&b!==c.o&&o!==c.h?{[`breakdown-column-${u}`]:this.getBreakdownColumn({layerId:u,sourceField:o,indexPattern:a.indexPattern,labels:a.seriesConfig.labels,layerConfig:a})}:{},...this.getChildYAxises(a,u,d)},incompleteColumns:{}}})),e}getXyState(){return{legend:{isVisible:!0,showSingleSeries:!0,position:"right"},valueLabels:"hide",fittingFunction:"Linear",curveType:"CURVE_MONOTONE_X",axisTitlesVisibilitySettings:{x:!0,yLeft:!this.isMultiSeries,yRight:!this.isMultiSeries},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},preferredSeriesType:"line",layers:this.layerConfigs.map(((e,t)=>{var a,i;return{accessors:[`y-axis-column-layer${t}`,...Object.keys(this.getChildYAxises(e))],layerId:`layer${t}`,layerType:"data",seriesType:e.seriesType||e.seriesConfig.defaultSeriesType,palette:e.seriesConfig.palette,yConfig:e.seriesConfig.yConfig||[{forAccessor:`y-axis-column-layer${t}`,color:e.color,axisMode:(null===(a=e.indexPattern.fieldFormatMap[e.selectedMetricField])||void 0===a?void 0:a.id)===(null===(i=this.layerConfigs[0].indexPattern.fieldFormatMap[this.layerConfigs[0].selectedMetricField])||void 0===i?void 0:i.id)?"left":"right"}],xAccessor:`x-axis-column-layer${t}`,...e.breakdown&&e.breakdown!==c.h&&e.seriesConfig.xAxisColumn.sourceField!==c.o?{splitAccessor:`breakdown-column-layer${t}`}:{}}})),...this.layerConfigs[0].seriesConfig.yTitle?{yTitle:this.layerConfigs[0].seriesConfig.yTitle}:{}}}getJSON(e){const t=Array.from(new Set([...this.layerConfigs.map((({indexPattern:e})=>e.id))])),a=this.globalFilter||this.layerConfigs[0].seriesConfig.query;return{title:"Prefilled from exploratory view app",description:e?`Last refreshed at ${new Date(e).toISOString()}`:"",visualizationType:"lnsXY",references:[...t.map((e=>({id:e,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"}))),...this.layerConfigs.map((({indexPattern:e},t)=>{return{id:e.id,name:(a=`layer${t}`,`indexpattern-datasource-layer-${a}`),type:"index-pattern"};var a}))],state:{datasourceStates:{indexpattern:{layers:this.layers}},visualization:this.visualization,query:a||{query:"",language:"kuery"},filters:[]}}}}},129:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var i,r=a(0),n=a.n(r),l=a(84),o=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},i(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),s=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return o(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return l.createPortal(r.Children.map(a,(function(t){return r.isValidElement(t)?r.cloneElement(t,e.state.nodeProps):t})),i)},t}(r.PureComponent),u=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=r.createRef(),a.passPropsThroughPortal(),a}return o(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return r.createElement("div",{ref:this.placeholderNode})},t}(r.PureComponent),c=a(10);function d({children:e,setHeaderActionMenu:t,theme$:a}){const i=Object(r.useMemo)((()=>function(){var e,t,a={},i=Object.assign(document.createElement("div"),{setPortalProps:function(e){a=e},getInitialPortalProps:function(){return a},mount:function(a,r){r!==t&&(i.unmount(),a.replaceChild(i,r),e=a,t=r)},unmount:function(a){a&&a!==t||e&&t&&(e.replaceChild(t,i),e=void 0,t=void 0)}});return i}()),[]);return Object(r.useEffect)((()=>(t((e=>Object(c.toMountPoint)(n.a.createElement(u,{node:i}),{theme$:a})(e))),()=>{i.unmount(),t(void 0)})),[i,t,a]),n.a.createElement(s,{node:i},e)}},130:function(e,t,a){"use strict";a.r(t),a.d(t,"FieldValueSuggestions",(function(){return g}));var i=a(0),r=a.n(i),n=a(117),l=a(7),o=a(1),s=a(22),u=a.n(s),c=a(2);const d=a(48).euiStyled.div`
  border-radius: ${({theme:e})=>e.eui.euiBorderRadius};
  background: ${({theme:e})=>e.eui.euiColorLightShade};
  padding: 0 ${({theme:e})=>e.eui.paddingSizes.xs};
`,p=(e,t,a,i)=>{const n={};return null==e||e.forEach((({label:e,count:t})=>{n[e]=t})),Object.entries(n).map((([e,n])=>({label:e,append:i?r.a.createElement(d,null,r.a.createElement(l.EuiText,{size:"xs"},n)):null,...null!=t&&t.includes(e)?{checked:"on"}:{},...null!=a&&a.includes(e)?{checked:"off"}:{}})))};function f({fullWidth:e,label:t,loading:a,query:n,setQuery:s,button:u,width:d,forceOpen:f,setForceOpen:m,anchorPosition:g,singleSelection:y,asFilterButton:v,showCount:h=!0,values:E=[],selectedValue:w,excludedValue:x,allowExclusions:C=!0,compressed:S=!0,onChange:k}){const[O,T]=Object(i.useState)((()=>p(E,w,x,h))),[F,j]=Object(i.useState)(!1);Object(i.useEffect)((()=>{T(p(E,w,x,h))}),[E,w,h,x]);const I=()=>{j(!F)},M=r.a.createElement(l.EuiButton,{style:d?{width:d}:{},size:"m",color:"text",iconType:"arrowDown",iconSide:"right",onClick:I,"data-test-subj":"fieldValueSelectionBtn",fullWidth:e},t),V=(w||[]).length+(x||[]).length,A=r.a.createElement(l.EuiFilterButton,{"aria-label":o.i18n.translate("xpack.observability.filterButton.label",{defaultMessage:"expands filter group for {label} filter",values:{label:t}}),hasActiveFilters:V>0,iconType:"arrowDown",numActiveFilters:V,numFilters:O.length,onClick:I},t),D=()=>{const e=(null!=O?O:[]).filter((e=>"on"===(null==e?void 0:e.checked))).map((({label:e})=>e)),t=(null!=O?O:[]).filter((e=>"off"===(null==e?void 0:e.checked))).map((({label:e})=>e));return Object(c.isEqual)(null!=w?w:[],e)&&Object(c.isEqual)(null!=x?x:[],t)};return r.a.createElement(b,null,r.a.createElement(l.EuiPopover,{id:"popover",panelPaddingSize:"none",button:u||(v?A:M),isOpen:F||f,closePopover:()=>{j(!1),null==m||m(!1)},anchorPosition:g,style:{width:"100%"}},r.a.createElement(l.EuiSelectable,{searchable:!0,singleSelection:y,searchProps:{placeholder:o.i18n.translate("xpack.observability.fieldValueSelection.placeholder",{defaultMessage:"Filter {label}",values:{label:t}}),compressed:S,onInput:e=>{s(e.target.value)},"data-test-subj":"suggestionInputField"},listProps:{onFocusBadge:!1},options:O,onChange:e=>{T(e)},allowExclusions:C,isLoading:a&&!n&&0===O.length},((e,i)=>r.a.createElement("div",{style:{width:240}},r.a.createElement(l.EuiPopoverTitle,{paddingSize:"s"},i),e,a&&n&&r.a.createElement(l.EuiText,{className:"eui-textCenter",color:"subdued"},o.i18n.translate("xpack.observability.fieldValueSelection.loading",{defaultMessage:"Loading"})," ",r.a.createElement(l.EuiLoadingSpinner,{size:"m"})),r.a.createElement(l.EuiPopoverFooter,{paddingSize:"s"},r.a.createElement(l.EuiButton,{"aria-label":o.i18n.translate("xpack.observability.fieldValueSelection.apply.label",{defaultMessage:"Apply the selected filters for {label}",values:{label:t}}),fill:!0,fullWidth:!0,size:"s",isDisabled:D(),onClick:()=>{const e=O.filter((e=>"on"===(null==e?void 0:e.checked))),t=O.filter((e=>"off"===(null==e?void 0:e.checked)));k(Object(c.map)(e,"label"),Object(c.map)(t,"label")),j(!1),null==m||m(!1)}},o.i18n.translate("xpack.observability.fieldValueSelection.apply",{defaultMessage:"Apply"}))))))))}const b=u.a.div.withConfig({displayName:"Wrapper",componentId:"sc-o6ohvj-0"})(["&&&{div.euiPopover__anchor{width:100%;.euiButton{width:100%;}}}"]);var m=a(51);function g({fullWidth:e,sourceField:t,label:a,dataViewTitle:l,selectedValue:o,excludedValue:s,filters:u,button:c,time:d,width:p,forceOpen:b,setForceOpen:g,anchorPosition:y,singleSelection:v,compressed:h,asFilterButton:E,usePrependLabel:w,allowAllValuesSelection:x,required:C,allowExclusions:S=!0,cardinalityField:k,inspector:O,asCombobox:T=!0,keepHistory:F=!0,onChange:j}){const[I,M]=Object(i.useState)(""),{values:V,loading:A}=Object(n.a)({dataViewTitle:l,query:I,sourceField:t,filters:u,time:d,inspector:O,cardinalityField:k,keepHistory:F,label:a}),D=T?m.b:f;return r.a.createElement(D,{fullWidth:e,singleSelection:v,values:V,label:a,onChange:j,query:I,setQuery:M,loading:A,selectedValue:o,excludedValue:s,button:c,forceOpen:b,setForceOpen:g,anchorPosition:y,width:p,compressed:h,asFilterButton:E,usePrependLabel:w,allowExclusions:S,allowAllValuesSelection:!v&&x,required:C})}t.default=g},132:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var i=a(31);const r=(e,t,a)=>{l(e,t,a),s(e,t,a),o(e)},n=(e,t,a)=>{u(e,t,a)},l=(e,t,a)=>{const r=(e=>{const t=new Map;return e.forEach((e=>{const a=t.get(e.dataType),i=(e.filters||[]).map((e=>e.field));a?a.push(...i):t.set(e.dataType,[...i])})),t})(t);[...r.keys()].forEach((t=>{(r.get(t)||[]).forEach((r=>{e({app:"observability-overview",metricType:i.a.COUNT,metric:`exploratory_view__filters__filter_${r}`}),e({app:"observability-overview",metricType:i.a.COUNT,metric:`exploratory_view__filters__report_type_${a}__data_type_${t}__filter_${r}`})}))}))},o=e=>{e({app:"observability-overview",metricType:i.a.COUNT,metric:"exploratory_view_apply_changes"})},s=(e,t,a)=>{t.map((e=>({dataType:e.dataType,metricType:e.selectedMetricField}))).forEach((({dataType:t,metricType:r})=>{a&&t&&r&&e({app:"observability-overview",metricType:i.a.COUNT,metric:`exploratory_view__report_type_${a}__data_type_${t}__metric_type_${r}`})}))},u=(e,t,a)=>{const i=(r=(a-t)/1e3)<0||isNaN(r)?null:r>=60?"60+":r>=30?"30-60":r>=20?"20-30":r>=10?"10-20":r>=5?"5-10":"0-5";var r;i&&c(e,i)},c=(e,t)=>{e({app:"observability-overview",metricType:i.a.COUNT,metric:`exploratory_view__chart_loading_in_seconds_${t}`})}},133:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=({reportType:e,dataType:t,dataView:a,reportConfigMap:i})=>{var r;let n;if(null===(r=i[t])||void 0===r||r.some((t=>{const i=t({dataView:a});return i.reportType===e&&(n=i),i.reportType===e})),!n)throw new Error(`No report config provided for dataType: ${t} and reportType: ${e}`);return n}},134:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return u}));var i=a(0),r=a.n(i),n=a(1),l=a(7),o=a(95);function s({seriesId:e,series:t,defaultOperationType:a}){const{setSeries:i}=Object(o.f)(),n=null==t?void 0:t.operationType;return r.a.createElement(u,{onChange:a=>{i(e,{...t,operationType:a})},operationType:n||a})}function u({operationType:e,onChange:t}){const a=[{value:"average",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.average",{defaultMessage:"Average"})},{value:"median",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.median",{defaultMessage:"Median"})},{value:"sum",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.sum",{defaultMessage:"Sum"})},{value:"last_value",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.lastValue",{defaultMessage:"Last value"})},{value:"75th",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.75thPercentile",{defaultMessage:"75th Percentile"})},{value:"90th",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.90thPercentile",{defaultMessage:"90th Percentile"})},{value:"95th",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.95thPercentile",{defaultMessage:"95th Percentile"})},{value:"99th",inputDisplay:n.i18n.translate("xpack.observability.expView.operationType.99thPercentile",{defaultMessage:"99th Percentile"})}];return r.a.createElement(l.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"operationTypeSelect",valueOfSelected:e,options:a,onChange:t})}},135:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(18),r=a(59),n=a(162),l=a(60),o=a(164);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=s(i),c=s(r),d=s(n),p=s(l),f=s(o);function b(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var m={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:b,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:b,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}},g=function(e){function t(t){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,c.default(a)}return d.default(t,e),t}(p.default(Error)),y=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function v(e,t){var a,i=e.pop();return t.push(i.f.apply(i,(a=[]).concat.apply(a,t.splice(-i.argCount)))),i.precedence}function h(e){return e.split("").reverse().join("")}var E=/--[\S]*/g;function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}var x=["Top","Right","Bottom","Left"];function C(e,t){if(!e)return t.toLowerCase();var a=e.split("-");if(a.length>1)return a.splice(1,0,t),a.reduce((function(e,t){return""+e+w(t)}));var i=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===i?""+e+t:i}function S(e,t){for(var a={},i=0;i<t.length;i+=1)(t[i]||0===t[i])&&(a[C(e,x[i])]=t[i]);return a}function k(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];var r=a[0],n=a[1],l=void 0===n?r:n,o=a[2],s=void 0===o?r:o,u=a[3],c=void 0===u?l:u,d=[r,l,s,c];return S(e,d)}function O(e,t){return e.substr(-t.length)===t}var T=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function F(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var a=e.match(T);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),a?[parseFloat(e),a[2]]:[e,void 0]):a?parseFloat(e):e}var j=function(e){return function(t,a){void 0===a&&(a="16px");var i=t,r=a;if("string"==typeof t){if(!O(t,"px"))throw new g(69,e,t);i=F(t)}if("string"==typeof a){if(!O(a,"px"))throw new g(70,e,a);r=F(a)}if("string"==typeof i)throw new g(71,t,e);if("string"==typeof r)throw new g(72,a,e);return""+i/r+e}},I=j("em"),M=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function V(e){if("string"!=typeof e)return[e,""];var t=e.match(M);return t?[parseFloat(e),t[2]]:[e,void 0]}var A={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4},D=j("rem");function P(e,t,a,i){void 0===a&&(a="320px"),void 0===i&&(i="1200px");var r=V(e),n=r[0],l=r[1],o=V(t),s=o[0],u=o[1],c=V(a),d=c[0],p=c[1],f=V(i),b=f[0],m=f[1];if("number"!=typeof d||"number"!=typeof b||!p||!m||p!==m)throw new g(47);if("number"!=typeof n||"number"!=typeof s||l!==u)throw new g(48);if(l!==p||u!==m)throw new g(75);var y=(n-s)/(d-b);return"calc("+(s-y*b).toFixed(2)+(l||"")+" + "+(100*y).toFixed(2)+"vw)"}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var _,R,B=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,L={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function $(e,t){return t?' format("'+L[e]+'")':""}function N(e,t,a,i){var r=[];return t&&r.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&r.push(function(e,t,a){return function(e){return!!e.replace(/\s+/g," ").match(B)}(e)?'url("'+e+'")'+$(t[0],a):t.map((function(t){return'url("'+e+"."+t+'")'+$(t,a)})).join(", ")}(e,a,i)),r.join(", ")}function W(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function q(e){for(var t="",a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)if(t+=e[n],n===i.length-1&&i[n]){var l=i.filter((function(e){return!!e}));l.length>1?(t=t.slice(0,-1),t+=", "+i[n]):1===l.length&&(t+=""+i[n])}else i[n]&&(t+=i[n]+" ");return t.trim()}var U={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"},G=function(e,t,a){var i=""+a[0]+(a[1]||""),r=""+a[0]/2+(a[1]||""),n=""+t[0]+(t[1]||""),l=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+r+" "+n+" "+r;case"topLeft":return i+" "+n+" 0 0";case"left":return l+" "+i+" "+l+" 0";case"bottomLeft":return i+" 0 0 "+n;case"bottom":return n+" "+r+" 0 "+r;case"bottomRight":return"0 0 "+i+" "+n;case"right":return l+" 0 "+l+" "+i;default:return"0 "+i+" "+n+" 0"}};function H(e){return Math.round(255*e)}function X(e,t,a){return H(e)+","+H(t)+","+H(a)}function K(e,t,a,i){if(void 0===i&&(i=X),0===t)return i(a,a,a);var r=(e%360+360)%360/60,n=(1-Math.abs(2*a-1))*t,l=n*(1-Math.abs(r%2-1)),o=0,s=0,u=0;r>=0&&r<1?(o=n,s=l):r>=1&&r<2?(o=l,s=n):r>=2&&r<3?(s=n,u=l):r>=3&&r<4?(s=l,u=n):r>=4&&r<5?(o=l,u=n):r>=5&&r<6&&(o=n,u=l);var c=a-n/2;return i(o+c,s+c,u+c)}var Q={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J=/^#[a-fA-F0-9]{6}$/,Y=/^#[a-fA-F0-9]{8}$/,Z=/^#[a-fA-F0-9]{3}$/,ee=/^#[a-fA-F0-9]{4}$/,te=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,ae=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ie=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,re=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function ne(e){if("string"!=typeof e)throw new g(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Q[t]?"#"+Q[t]:e}(e);if(t.match(J))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Y)){var a=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:a}}if(t.match(Z))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(ee)){var i=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:i}}var r=te.exec(t);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var n=ae.exec(t.substring(0,50));if(n)return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:parseFloat(""+n[4])};var l=ie.exec(t);if(l){var o="rgb("+K(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",s=te.exec(o);if(!s)throw new g(4,t,o);return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10)}}var u=re.exec(t.substring(0,50));if(u){var c="rgb("+K(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=te.exec(c);if(!d)throw new g(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])}}throw new g(5)}function le(e){return function(e){var t,a=e.red/255,i=e.green/255,r=e.blue/255,n=Math.max(a,i,r),l=Math.min(a,i,r),o=(n+l)/2;if(n===l)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var s=n-l,u=o>.5?s/(2-n-l):s/(n+l);switch(n){case a:t=(i-r)/s+(i<r?6:0);break;case i:t=(r-a)/s+2;break;default:t=(a-i)/s+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:u,lightness:o,alpha:e.alpha}:{hue:t,saturation:u,lightness:o}}(ne(e))}var oe=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function se(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function ue(e){return se(Math.round(255*e))}function ce(e,t,a){return oe("#"+ue(e)+ue(t)+ue(a))}function de(e,t,a){return K(e,t,a,ce)}function pe(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return de(e,t,a);if("object"==typeof e&&void 0===t&&void 0===a)return de(e.hue,e.saturation,e.lightness);throw new g(1)}function fe(e,t,a,i){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof i)return i>=1?de(e,t,a):"rgba("+K(e,t,a)+","+i+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===i)return e.alpha>=1?de(e.hue,e.saturation,e.lightness):"rgba("+K(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new g(2)}function be(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return oe("#"+se(e)+se(t)+se(a));if("object"==typeof e&&void 0===t&&void 0===a)return oe("#"+se(e.red)+se(e.green)+se(e.blue));throw new g(6)}function me(e,t,a,i){if("string"==typeof e&&"number"==typeof t){var r=ne(e);return"rgba("+r.red+","+r.green+","+r.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof i)return i>=1?be(e,t,a):"rgba("+e+","+t+","+a+","+i+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===i)return e.alpha>=1?be(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new g(7)}function ge(e){if("object"!=typeof e)throw new g(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return me(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return be(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return fe(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return pe(e);throw new g(8)}function ye(e,t,a){return function(){var i=a.concat(Array.prototype.slice.call(arguments));return i.length>=t?e.apply(this,i):ye(e,t,i)}}function ve(e){return ye(e,e.length,[])}function he(e,t){if("transparent"===t)return t;var a=le(t);return ge(u.default({},a,{hue:a.hue+parseFloat(e)}))}var Ee=ve(he);function we(e,t,a){return Math.max(e,Math.min(t,a))}function xe(e,t){if("transparent"===t)return t;var a=le(t);return ge(u.default({},a,{lightness:we(0,1,a.lightness-parseFloat(e))}))}var Ce=ve(xe);function Se(e,t){if("transparent"===t)return t;var a=le(t);return ge(u.default({},a,{saturation:we(0,1,a.saturation-parseFloat(e))}))}var ke=ve(Se);function Oe(e){if("transparent"===e)return 0;var t=ne(e),a=Object.keys(t).map((function(e){var a=t[e]/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)})),i=a[0],r=a[1],n=a[2];return parseFloat((.2126*i+.7152*r+.0722*n).toFixed(3))}function Te(e,t){var a=Oe(e),i=Oe(t);return parseFloat((a>i?(a+.05)/(i+.05):(i+.05)/(a+.05)).toFixed(2))}function Fe(e,t){if("transparent"===t)return t;var a=le(t);return ge(u.default({},a,{lightness:we(0,1,a.lightness+parseFloat(e))}))}var je=ve(Fe);function Ie(e,t,a){if("transparent"===t)return a;if("transparent"===a)return t;if(0===e)return a;var i=ne(t),r=u.default({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),n=ne(a),l=u.default({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),o=r.alpha-l.alpha,s=2*parseFloat(e)-1,c=((s*o==-1?s:s+o)/(1+s*o)+1)/2,d=1-c;return me({red:Math.floor(r.red*c+l.red*d),green:Math.floor(r.green*c+l.green*d),blue:Math.floor(r.blue*c+l.blue*d),alpha:r.alpha*(parseFloat(e)/1)+l.alpha*(1-parseFloat(e)/1)})}var Me=ve(Ie);function Ve(e,t){if("transparent"===t)return t;var a=ne(t),i="number"==typeof a.alpha?a.alpha:1;return me(u.default({},a,{alpha:we(0,1,(100*i+100*parseFloat(e))/100)}))}var Ae=ve(Ve),De="#000",Pe="#fff";function ze(e,t){if("transparent"===t)return t;var a=le(t);return ge(u.default({},a,{saturation:we(0,1,a.saturation+parseFloat(e))}))}var _e=ve(ze);function Re(e,t){return"transparent"===t?t:ge(u.default({},le(t),{hue:parseFloat(e)}))}var Be=ve(Re);function Le(e,t){return"transparent"===t?t:ge(u.default({},le(t),{lightness:parseFloat(e)}))}var $e=ve(Le);function Ne(e,t){return"transparent"===t?t:ge(u.default({},le(t),{saturation:parseFloat(e)}))}var We=ve(Ne);function qe(e,t){return"transparent"===t?t:Me(parseFloat(e),"rgb(0, 0, 0)",t)}var Ue=ve(qe);function Ge(e,t){return"transparent"===t?t:Me(parseFloat(e),"rgb(255, 255, 255)",t)}var He=ve(Ge);function Xe(e,t){if("transparent"===t)return t;var a=ne(t),i="number"==typeof a.alpha?a.alpha:1;return me(u.default({},a,{alpha:we(0,1,+(100*i-100*parseFloat(e)).toFixed(2)/100)}))}var Ke=ve(Xe),Qe=["top","right","bottom","left"];function Je(e,t){return e(t?":"+t:"")}function Ye(e,t,a){if(!t)throw new g(67);if(0===e.length)return Je(t,null);for(var i=[],r=0;r<e.length;r+=1){if(a&&a.indexOf(e[r])<0)throw new g(68);i.push(Je(t,e[r]))}return i.join(",")}var Ze=[void 0,null,"active","focus","hover"];function et(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var tt=["absolute","fixed","relative","static","sticky"],at=[void 0,null,"active","focus","hover"];function it(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=Ee,t.animation=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=Array.isArray(t[0]);if(!i&&t.length>8)throw new g(64);var r=t.map((function(e){if(i&&!Array.isArray(e)||!i&&Array.isArray(e))throw new g(65);if(Array.isArray(e)&&e.length>8)throw new g(66);return Array.isArray(e)?e.join(" "):e})).join(", ");return{animation:r}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{background:t.join(", ")}},t.between=P,t.border=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];var r;return"string"==typeof e&&Qe.indexOf(e)>=0?((r={})["border"+w(e)+"Width"]=a[0],r["border"+w(e)+"Style"]=a[1],r["border"+w(e)+"Color"]=a[2],r):(a.unshift(e),{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return k.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var a,i,r=w(e);if(!t&&0!==t)throw new g(62);if("Top"===r||"Bottom"===r)return(a={})["border"+r+"RightRadius"]=t,a["border"+r+"LeftRadius"]=t,a;if("Left"===r||"Right"===r)return(i={})["borderTop"+r+"Radius"]=t,i["borderBottom"+r+"Radius"]=t,i;throw new g(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return k.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return k.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Ye(t,et,Ze)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=le(e);return ge(u.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(E)){if(t)return e;throw new g(73)}var a;if("undefined"!=typeof document&&null!==document.documentElement&&(a=getComputedStyle(document.documentElement).getPropertyValue(e)),a)return a.trim();throw new g(74)},t.darken=Ce,t.desaturate=ke,t.directionalProperty=k,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=I,t.fluidRange=function(e,t,a){if(void 0===t&&(t="320px"),void 0===a&&(a="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new g(49);if(Array.isArray(e)){for(var i,r={},n={},l=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(i=l()).done;){var o,s,c=i.value;if(!c.prop||!c.fromSize||!c.toSize)throw new g(50);n[c.prop]=c.fromSize,r["@media (min-width: "+t+")"]=u.default({},r["@media (min-width: "+t+")"],((o={})[c.prop]=P(c.fromSize,c.toSize,t,a),o)),r["@media (min-width: "+a+")"]=u.default({},r["@media (min-width: "+a+")"],((s={})[c.prop]=c.toSize,s))}return u.default({},n,r)}var d,p,f;if(!e.prop||!e.fromSize||!e.toSize)throw new g(51);return(f={})[e.prop]=e.fromSize,f["@media (min-width: "+t+")"]=((d={})[e.prop]=P(e.fromSize,e.toSize,t,a),d),f["@media (min-width: "+a+")"]=((p={})[e.prop]=e.toSize,p),f},t.fontFace=function(e){var t=e.fontFamily,a=e.fontFilePath,i=e.fontStretch,r=e.fontStyle,n=e.fontVariant,l=e.fontWeight,o=e.fileFormats,s=void 0===o?["eot","woff2","woff","ttf","svg"]:o,u=e.formatHint,c=void 0!==u&&u,d=e.localFonts,p=e.unicodeRange,f=e.fontDisplay,b=e.fontVariationSettings,m=e.fontFeatureSettings;if(!t)throw new g(55);if(!a&&!d)throw new g(52);if(d&&!Array.isArray(d))throw new g(53);if(!Array.isArray(s))throw new g(54);var y={"@font-face":{fontFamily:t,src:N(a,d,s,c),unicodeRange:p,fontStretch:i,fontStyle:r,fontVariant:n,fontWeight:l,fontDisplay:f,fontVariationSettings:b,fontFeatureSettings:m}};return JSON.parse(JSON.stringify(y))},t.getContrast=Te,t.getLuminance=Oe,t.getValueAndUnit=V,t.grayscale=function(e){return"transparent"===e?e:ge(u.default({},le(e),{saturation:0}))},t.hiDPI=W,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=pe,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?fe({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):pe({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new g(45)},t.hsla=fe,t.invert=function(e){if("transparent"===e)return e;var t=ne(e);return ge(u.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=je,t.linearGradient=function(e){var t=e.colorStops,a=e.fallback,i=e.toDirection,r=void 0===i?"":i;if(!t||t.length<2)throw new g(56);return{backgroundColor:a||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:q(_||(_=f.default(["linear-gradient(","",")"])),r,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return k.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var a=h(e),i=a.match(y);if(i&&!i.every((function(e){return e===i[0]})))throw new g(41);return""+function(e,t){var a,i=function(e){var t={};return t.symbols=e?u.default({},m.symbols,e.symbols):u.default({},m.symbols),t}(t),r=[i.symbols["("].prefix],n=[],l=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(i.symbols).map((function(e){return i.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");l.lastIndex=0;var o=!1;do{var s=(a=l.exec(e))||[")",void 0],c=s[0],d=s[1],p=i.symbols[c],f=p&&!p.prefix&&!p.func,b=!p||!p.postfix&&!p.infix;if(d||(o?b:f))throw new g(37,a?a.index:e.length,e);if(o){var y=p.postfix||p.infix;do{var h=r[r.length-1];if((y.precedence-h.precedence||h.rightToLeft)>0)break}while(v(r,n));o="postfix"===y.notation,")"!==y.symbol&&(r.push(y),o&&v(r,n))}else if(p){if(r.push(p.prefix||p.func),p.func&&(!(a=l.exec(e))||"("!==a[0]))throw new g(38,a?a.index:e.length,e)}else n.push(+c),o=!0}while(a&&r.length);if(r.length)throw new g(39,a?a.index:e.length,e);if(a)throw new g(40,a?a.index:e.length,e);return n.pop()}(h(a.replace(y,"")),t)+(i?h(i[0]):"")},t.meetsContrastGuidelines=function(e,t){var a=Te(e,t);return{AA:a>=4.5,AALarge:a>=3,AAA:a>=7,AAALarge:a>=4.5}},t.mix=Me,t.modularScale=function(e,t,a){if(void 0===t&&(t="1em"),void 0===a&&(a=1.333),"number"!=typeof e)throw new g(42);if("string"==typeof a&&!A[a])throw new g(43);var i="string"==typeof t?V(t):[t,""],r=i[0],n=i[1],l="string"==typeof a?A[a]:a;if("string"==typeof r)throw new g(44,t);return""+r*Math.pow(l,e)+(n||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=Ae,t.padding=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return k.apply(void 0,["padding"].concat(t))},t.parseToHsl=le,t.parseToRgb=ne,t.position=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return tt.indexOf(e)>=0&&e?u.default({},k.apply(void 0,[""].concat(a)),{position:e}):k.apply(void 0,["",e].concat(a))},t.radialGradient=function(e){var t=e.colorStops,a=e.extent,i=void 0===a?"":a,r=e.fallback,n=e.position,l=void 0===n?"":n,o=e.shape,s=void 0===o?"":o;if(!t||t.length<2)throw new g(57);return{backgroundColor:r||t[0].split(" ")[0],backgroundImage:q(R||(R=f.default(["radial-gradient(","","","",")"])),l,s,i,t.join(", "))}},t.readableColor=function(e,t,a,i){void 0===t&&(t=De),void 0===a&&(a=Pe),void 0===i&&(i=!0);var r=Oe(e)>.179,n=r?t:a;return!i||Te(e,n)>=4.5?n:r?De:Pe},t.rem=D,t.retinaImage=function(e,t,a,i,r){var n;if(void 0===a&&(a="png"),void 0===r&&(r="_2x"),!e)throw new g(58);var l=a.replace(/^\./,""),o=i?i+"."+l:""+e+r+"."+l;return(n={backgroundImage:"url("+e+"."+l+")"})[W()]=u.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),n},t.rgb=be,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?me({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):be({red:e.red,green:e.green,blue:e.blue});throw new g(46)},t.rgba=me,t.saturate=_e,t.setHue=Be,t.setLightness=$e,t.setSaturation=We,t.shade=Ue,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=F,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Ye(t,it,at)},t.timingFunctions=function(e){return U[e]},t.tint=He,t.toColorString=ge,t.transitions=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(Array.isArray(t[0])&&2===t.length){var i=t[1];if("string"!=typeof i)throw new g(61);var r=t[0].map((function(e){return e+" "+i})).join(", ");return{transition:r}}return{transition:t.join(", ")}},t.transparentize=Ke,t.triangle=function(e){var t=e.pointingDirection,a=e.height,i=e.width,r=e.foregroundColor,n=e.backgroundColor,l=void 0===n?"transparent":n,o=V(i),s=V(a);if(isNaN(s[0])||isNaN(o[0]))throw new g(60);return u.default({width:"0",height:"0",borderColor:l},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new g(59)}}(t,r),{borderStyle:"solid",borderWidth:G(t,s,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},136:function(e,t,a){"use strict";a.r(t),a.d(t,"buildFilterLabel",(function(){return u})),a.d(t,"FilterValueLabel",(function(){return c}));var i=a(0),r=a.n(i),n=a(80),l=a(27),o=a(85),s=a(10);function u({field:e,value:t,label:a,dataView:i,negate:r}){const n=i.getFieldByName(e),o=t instanceof Array&&t.length>1?Object(l.c)(n,t,i):Object(l.b)(n,t,i);return o.meta.type=t instanceof Array&&t.length>1?"phrases":"phrase",o.meta.value=t,o.meta.key=a,o.meta.alias=null,o.meta.negate=r,o.meta.disabled=!1,o}function c({label:e,field:t,value:a,negate:i,dataView:l,invertFilter:c,removeFilter:d,allowExclusion:p=!0}){const f=Object(n.injectI18n)(o.FilterItem),b=u({field:t,value:a,label:e,dataView:l,negate:i}),{services:{uiSettings:m}}=Object(s.useKibana)();return l?r.a.createElement(f,{indexPatterns:[l],id:`${t}-${a}-${i}`,filter:b,onRemove:()=>{d(t,a,!1)},onUpdate:e=>{e.meta.negate!==i&&c({field:t,value:a,negate:i})},uiSettings:m,hiddenPanelOptions:[...p?[]:["negateFilter"],"pinFilter","editFilter","disableFilter"]}):null}t.default=c},137:function(e,t,a){"use strict";a.r(t),a.d(t,"ExploratoryViewPage",(function(){return da}));var i=a(0),r=a.n(i),n=a(1),l=a(19),o=a(10),s=a(25),u=a(18),c=a.n(u),d=a(22),p=a.n(d),f=a(7),b=a(95),m=a(121),g=a(98),y=a(135),v=a(48),h=a(133),E=a(47);const w="SELECT_REPORT_TYPE",x={reportType:w,label:n.i18n.translate("xpack.observability.expView.reportType.selectLabel",{defaultMessage:"Select report type"})};function C({prepend:e}){const{setReportType:t,reportType:a,allSeries:i}=Object(b.f)(),{reportTypes:n}=Object(E.b)(),l=[x,...n].filter((({reportType:e})=>!a||e!==w)).map((({reportType:e,label:t})=>({value:e,inputDisplay:e===w?t:r.a.createElement("strong",null,t),dropdownDisplay:t})));return r.a.createElement(f.EuiSuperSelect,{"aria-labelledby":"report-type-label",options:l,valueOfSelected:null!=a?a:w,onChange:e=>{t(e)},style:{minWidth:200},isInvalid:!a&&i.length>0,disabled:i.length>0,prepend:e})}var S=a(2);function k(e){const t=(a=e,Object(S.pickBy)(a,(e=>void 0!==e)));var a;return Object.entries(t).forEach((([e,a])=>{"object"==typeof a&&(t[e]=k(a))})),t}function O({onApply:e}){var t;const{allSeries:a,storage:i,applyChanges:l}=Object(b.f)(),o=Object(b.d)(null!==(t=i.get(b.c))&&void 0!==t?t:[]);let s=a.length===o.length;return s&&(s=!a.some(((e,t)=>!Object(S.isEqual)(k(e),k(o[t]))))),r.a.createElement(f.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButton,{onClick:()=>l(e),isDisabled:s,fill:!0,"data-test-subj":"seriesChangesApplyButton"},n.i18n.translate("xpack.observability.expView.seriesBuilder.apply",{defaultMessage:"Apply changes"}))))}var T=a(46),F=a(35),j=a(30);function I({seriesId:e,series:t,seriesConfig:a,onEditClick:n}){const{setSeries:l,removeSeries:o,allSeries:s}=Object(b.f)(),[u,c]=Object(i.useState)(!1),{href:d}=(({series:e,seriesConfig:t})=>{var a;const r=Object(T.a)().services,{application:{navigateToUrl:n}}=r,{dataViews:l}=Object(g.b)(),o=null===(a=r.discover)||void 0===a?void 0:a.locator,[s,u]=Object(i.useState)("");Object(i.useEffect)((()=>{const a=null==l?void 0:l[e.dataType];if(a){var i,r;const n=null!==(i=e.reportDefinitions)&&void 0!==i?i:{},l=(null!==(r=e.filters)&&void 0!==r?r:[]).concat(Object(m.a)(n)),s=Object(F.g)({dataView:a,urlFilters:l,initFilters:null==t?void 0:t.baseFilters}),c=e.selectedMetricField;c&&c!==j.j&&c!==j.k&&s.push(Object(F.a)(c,a)[0]),(async()=>{if(!o)return;const e=await o.getUrl({filters:s,indexPatternId:null==a?void 0:a.id});u(e)})()}}),[l,e.dataType,e.filters,e.reportDefinitions,e.selectedMetricField,null==t?void 0:t.baseFilters,o]);const c=Object(i.useCallback)((e=>{if(s)return e.preventDefault(),n(s)}),[s,n]);return{href:s,onClick:c}})({series:t,seriesConfig:a}),{dataViews:p}=Object(g.b)(),y=null==p?void 0:p[t.dataType],v=0===e&&s.length>1,h=Object(i.useCallback)((()=>{c(!1)}),[c]),E=Object(i.useCallback)((()=>{o(e),h()}),[o,e,h]),w=Object(i.useCallback)((()=>{c(!u)}),[c,u]),x=r.a.createElement(f.EuiButtonIcon,{iconType:"boxesHorizontal",onClick:w,color:"text","aria-label":R});return r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"flexEnd",responsive:!1},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiToolTip,{content:M},r.a.createElement(f.EuiButtonIcon,{iconType:"pencil",color:"text","aria-label":M,size:"s",onClick:n}))),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiPopover,{button:x,isOpen:u,closePopover:h,panelPaddingSize:"none",anchorPosition:"downLeft"},r.a.createElement(f.EuiContextMenuPanel,{"aria-label":B,items:[r.a.createElement(f.EuiContextMenuItem,{key:"viewSampleDocuments",icon:"discoverApp",href:d,"aria-label":_,disabled:!t.dataType||!t.selectedMetricField||!y,target:"_blank"},_),r.a.createElement(f.EuiContextMenuItem,{key:"hideSeries",icon:t.hidden?"eye":"eyeClosed",onClick:()=>{t.hidden?l(e,{...t,hidden:void 0}):l(e,{...t,hidden:!0}),h()},"aria-label":t.hidden?A:V},t.hidden?A:V),r.a.createElement(f.EuiContextMenuItem,{key:"copySeries",icon:"copy",onClick:()=>{let e=`${t.name}-copy`;s.find((({name:t})=>t===e))&&(e+=s.length),l(s.length,{...t,name:e,breakdown:void 0}),h()},"aria-label":D},D),r.a.createElement(f.EuiContextMenuItem,{key:"deleteSeries",icon:"trash",onClick:E,"aria-label":P,disabled:v,toolTipContent:v?z:""},P)]}))))}const M=n.i18n.translate("xpack.observability.seriesEditor.edit",{defaultMessage:"Edit series"}),V=n.i18n.translate("xpack.observability.seriesEditor.hide",{defaultMessage:"Hide series"}),A=n.i18n.translate("xpack.observability.seriesEditor.show",{defaultMessage:"Show series"}),D=n.i18n.translate("xpack.observability.seriesEditor.clone",{defaultMessage:"Duplicate series"}),P=n.i18n.translate("xpack.observability.expView.seriesEditor.removeSeries",{defaultMessage:"Remove series"}),z=n.i18n.translate("xpack.observability.expView.seriesEditor.removeSeriesDisabled",{defaultMessage:"Main series cannot be removed. Please remove all series below before you can remove this."}),_=n.i18n.translate("xpack.observability.seriesEditor.sampleDocuments",{defaultMessage:"View transaction in Discover"}),R=n.i18n.translate("xpack.observability.seriesEditor.popoverButtonLabel",{defaultMessage:"View series actions"}),B=n.i18n.translate("xpack.observability.seriesEditor.actionsAriaContextLabel",{defaultMessage:"Series actions list"});var L=a(37);function $({seriesId:e,series:t}){var a;const n=Object(L.a)(),{setSeries:l}=Object(b.f)(),[o,s]=Object(i.useState)(!1),u=null!==(a=t.color)&&void 0!==a?a:n.eui[`euiColorVis${e}`],c=r.a.createElement(f.EuiToolTip,{content:W},r.a.createElement(f.EuiButtonEmpty,{size:"s",onClick:()=>s((e=>!e)),flush:"both"},r.a.createElement(f.EuiIcon,{type:"stopFilled",size:"l",color:u})));return r.a.createElement(f.EuiPopover,{button:c,isOpen:o,closePopover:()=>s(!1)},r.a.createElement(f.EuiFormRow,{label:N},r.a.createElement(f.EuiColorPicker,{onChange:a=>{l(e,{...t,color:a})},color:u})))}const N=n.i18n.translate("xpack.observability.overview.exploratoryView.pickColor",{defaultMessage:"Pick a color"}),W=n.i18n.translate("xpack.observability.overview.exploratoryView.editSeriesColor",{defaultMessage:"Edit color for series"});var q=a(36);const U=n.i18n.translate("xpack.observability.expView.chartTypes.label",{defaultMessage:"Chart type"});function G({seriesId:e,series:t,defaultChartType:a}){var i;const{setSeries:n}=Object(b.f)(),l=null!==(i=null==t?void 0:t.seriesType)&&void 0!==i?i:a;return r.a.createElement(H,{onChange:a=>{n(e,{...t,seriesType:a})},value:l,excludeChartTypes:["bar_percentage_stacked"],includeChartTypes:["bar","bar_horizontal","line","area","bar_stacked","area_stacked","bar_horizontal_percentage_stacked"],label:U})}function H({onChange:e,value:t,includeChartTypes:a,excludeChartTypes:i}){var n;const{services:{lens:l}}=Object(o.useKibana)(),{data:s=[],loading:u}=Object(q.useFetcher)((()=>l.getXyVisTypes()),[l]);let c=s;(null!=i?i:[]).length>0&&(c=c.filter((({id:e})=>!(null!=i&&i.includes(e))))),(null!=a?a:[]).length>0&&(c=c.filter((({id:e})=>null==a?void 0:a.includes(e))));const d=(null!==(n=c)&&void 0!==n?n:[]).map((({id:e,fullLabel:t,label:a,icon:i})=>{const n=r.a.createElement(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiIcon,{type:i})),r.a.createElement(f.EuiFlexItem,null,t||a));return{value:e,inputDisplay:n,dropdownDisplay:n}}));return r.a.createElement(f.EuiFormRow,{label:U,style:{minWidth:280}},r.a.createElement(f.EuiSuperSelect,{fullWidth:!0,valueOfSelected:t,isLoading:u,options:d,onChange:e}))}function X({seriesId:e,series:t,seriesConfig:a}){var n,l,s;const u=null!==(n=null==t?void 0:t.seriesType)&&void 0!==n?n:a.defaultSeriesType,{services:{lens:c}}=Object(o.useKibana)(),{data:d=[]}=Object(q.useFetcher)((()=>c.getXyVisTypes()),[c]),p=null===(l=(null!=d?d:[]).find((({id:e})=>e===u)))||void 0===l?void 0:l.icon,[b,m]=Object(i.useState)(!1);return r.a.createElement(f.EuiPopover,{isOpen:b,closePopover:()=>m(!1),button:r.a.createElement(f.EuiToolTip,{content:K},r.a.createElement(f.EuiButtonEmpty,{size:"s","aria-label":Q,onClick:()=>m((e=>!e)),flush:"both"},p&&r.a.createElement(f.EuiIcon,{type:null===(s=(null!=d?d:[]).find((({id:e})=>e===u)))||void 0===s?void 0:s.icon,size:"l"})))},r.a.createElement(G,{seriesId:e,series:t,defaultChartType:a.defaultSeriesType}))}const K=n.i18n.translate("xpack.observability.expView.seriesEditor.editChartSeriesLabel",{defaultMessage:"Edit chart type for series"}),Q=n.i18n.translate("xpack.observability.expView.chartTypes.label",{defaultMessage:"Chart type"});function J({seriesId:e,series:t,seriesConfig:a}){return a?r.a.createElement(f.EuiFlexGroup,{gutterSize:"s",responsive:!1},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(X,{seriesId:e,series:t,seriesConfig:a})),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement($,{seriesId:e,series:t}))):null}function Y({seriesId:e,series:t}){const{setSeries:a,reportType:n}=Object(b.f)(),[l,o]=Object(i.useState)(!1),s=Object(i.useCallback)((e=>{null==e||e.focus()}),[]),{dataTypes:u}=Object(E.b)(),c=u.filter((({id:e})=>n===j.m.DEVICE_DISTRIBUTION?e===j.b.MOBILE:n===j.m.CORE_WEB_VITAL?e===j.b.UX:e!==j.b.LOGS||n===j.m.KPI)).map((({id:e,label:t})=>({value:e,inputDisplay:t}))),d=u.find((e=>e.id===t.dataType));return r.a.createElement(r.a.Fragment,null,!t.dataType&&r.a.createElement(f.EuiPopover,{button:r.a.createElement(f.EuiButton,{iconType:"plusInCircle",onClick:()=>o((e=>!e)),fill:!0,size:"s",buttonRef:s},Z),isOpen:l,closePopover:()=>o((e=>!e))},r.a.createElement(f.EuiListGroup,null,c.map((i=>r.a.createElement(f.EuiListGroupItem,{key:i.value,onClick:()=>{return r=i.value,void("SELECT_DATA_TYPE"!==String(r)&&a(e,{dataType:r,time:t.time,name:`${r}-series-${e+1}`}));var r},label:i.inputDisplay}))))),t.dataType&&r.a.createElement(f.EuiToolTip,{position:"top",content:ee},r.a.createElement(f.EuiBadge,null,null==d?void 0:d.label)))}const Z=n.i18n.translate("xpack.observability.overview.exploratoryView.selectDataType",{defaultMessage:"Select data type"}),ee=n.i18n.translate("xpack.observability.overview.exploratoryView.selectDataTypeTooltip",{defaultMessage:"Data type cannot be edited."});function te({seriesConfig:e,series:t}){const{loading:a}=Object(g.b)();if(!e)return null;const{dataType:i,reportDefinitions:l,selectedMetricField:o}=t,{definitionFields:s,labels:u}=e,c=(!i||Object(S.isEmpty)(l)||!o)&&!a,d=Object(S.isEmpty)(l)?n.i18n.translate("xpack.observability.overview.exploratoryView.missingReportDefinition",{defaultMessage:"Missing {reportDefinition}",values:{reportDefinition:null==u?void 0:u["string"==typeof s[0]?s[0]:s[0].field]}}):"";let p=o?d:ae;return i||(p=ie),c?r.a.createElement(f.EuiBadge,{color:"warning"},p):null}const ae=n.i18n.translate("xpack.observability.overview.exploratoryView.missingReportMetric",{defaultMessage:"Missing report metric"}),ie=n.i18n.translate("xpack.observability.overview.exploratoryView.missingDataType",{defaultMessage:"Missing data type"});var re=a(130),ne=a(51);function le({singleSelection:e,keepHistory:t,series:a,field:n,seriesConfig:l,onChange:o,filters:s}){var u;const{dataView:c}=Object(g.b)(a.dataType),d="string"==typeof n?n:n.field,{reportDefinitions:p={}}=a,{labels:f,baseFilters:b,definitionFields:m}=l,y=Object(i.useMemo)((()=>{const e=[];return(null!=b?b:[]).concat(null!=s?s:[]).forEach((t=>{t.query&&e.push(t.query);const a=t;a.query.exists&&e.push({exists:a.query.exists})})),Object(S.isEmpty)(p)||m.forEach((t=>{const a="string"==typeof t?t:t.field;if(c&&null!=p&&p[a]&&a!==d){const t=null==p?void 0:p[a];if(!t.includes(ne.a)){const i=Object(F.c)(a,t,c)[0];i.query&&e.push(i.query)}}})),e}),[JSON.stringify(p),JSON.stringify(b)]);return c?r.a.createElement(re.default,{label:null!==(u=f[d])&&void 0!==u?u:d,sourceField:d,dataViewTitle:c.title,selectedValue:null==p?void 0:p[d],onChange:e=>o(d,e),filters:y,time:a.time,fullWidth:!0,asCombobox:!0,allowExclusions:!1,allowAllValuesSelection:!0,usePrependLabel:!1,compressed:!1,required:Object(S.isEmpty)(p),singleSelection:e,keepHistory:t}):null}function oe({series:e,field:t,seriesConfig:a,onChange:i}){var l;const{textReportDefinitions:o={}}=e,{labels:s}=a,u=null!==(l=s[t])&&void 0!==l?l:t;return r.a.createElement(f.EuiFormRow,{label:u},r.a.createElement(f.EuiFieldText,{placeholder:n.i18n.translate("xpack.observability.textDefinitionField.placeholder.search",{defaultMessage:"Search {label}",values:{label:u}}),value:null==o?void 0:o[t],onChange:e=>i(t,e.target.value),compressed:!1}))}var se=a(118),ue=a(11);function ce({seriesId:e,series:t,seriesConfig:a}){const{setSeries:i}=Object(b.f)(),{reportDefinitions:n={},textReportDefinitions:l={}}=t,{definitionFields:o,textDefinitionFields:s}=a,u=(a,r)=>{null!=r&&r[0]?i(e,{...t,reportDefinitions:{...n,[a]:r}}):(delete n[a],i(e,{...t,reportDefinitions:{...n}}))},c=(a,r)=>{Object(S.isEmpty)(r)?(delete l[a],i(e,{...t,textReportDefinitions:{...l}})):i(e,{...t,textReportDefinitions:{...l,[a]:r}})};return r.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},o.map((l=>{var o;const s="string"==typeof l?l:l.field,c="string"!=typeof l&&l.singleSelection,d="string"!=typeof l&&l.nested,p="string"!=typeof l?l.filters:void 0,b=!Object(se.b)(t.selectedMetricField),m=d===ue.h&&b;let g;return m&&d&&(null===(o=n[d])||void 0===o?void 0:o.length)>0&&i(e,{...t,reportDefinitions:{...n,[d]:[]}}),d&&(e=>{var a;return!Object(S.isEmpty)(null===(a=t.reportDefinitions)||void 0===a?void 0:a[e])})(s)&&!m&&(g=r.a.createElement(f.EuiFlexItem,{key:d,grow:1},r.a.createElement(le,{seriesId:e,series:t,seriesConfig:a,field:d,onChange:u,keepHistory:!1,singleSelection:c}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexItem,{key:s,grow:1},r.a.createElement(le,{seriesId:e,series:t,seriesConfig:a,field:s,onChange:u,singleSelection:c,filters:p})),g)})),null==s?void 0:s.map((i=>r.a.createElement(f.EuiFlexItem,{key:i,grow:1},r.a.createElement(oe,{seriesId:e,series:t,seriesConfig:a,field:i,onChange:c})))))}var de=a(134),pe=a(128),fe=a(27),be=a(117);function me({field:e,series:t,baseFilters:a,label:i},r){var n;const{dataViews:l}=Object(g.b)(t.dataType),o=[];return null==a||a.forEach((e=>{e.query&&o.push(e.query),Object(fe.e)(e)&&o.push({exists:e.query.exists})})),Object(be.a)({query:r,label:null!=i?i:e,sourceField:e,time:t.time,keepHistory:!0,filters:o,dataViewTitle:null===(n=l[t.dataType])||void 0===n?void 0:n.title})}const ge=({seriesId:e,series:t})=>{var a;const{setSeries:i}=Object(b.f)(),r=null!==(a=t.filters)&&void 0!==a?a:[],n=({field:a,values:n,notValues:l,wildcards:o,notWildcards:s})=>{var u;const c=null!==(u=r.find((({field:e})=>a===e)))&&void 0!==u?u:{field:a};c.notValues=l.length>0?l:void 0,c.values=n.length>0?n:void 0,c.wildcards=o,c.notWildcards=s;const d=r.filter((({field:e})=>e!==a));Object(S.concat)(n,l,o,s).length>0?i(e,{...t,filters:[...d,c]}):i(e,{...t,filters:d})},l=({field:e,value:t,negate:a,wildcards:i})=>{var l,o,s;const u=null!==(l=r.find((({field:t})=>e===t)))&&void 0!==l?l:{field:e},c=null!==(o=u.notValues)&&void 0!==o?o:[],d=null!==(s=u.values)&&void 0!==s?s:[],p=c.filter((e=>t instanceof Array?!t.includes(e):e!==t)),f=d.filter((e=>t instanceof Array?!t.includes(e):e!==t));a?t instanceof Array?p.push(...t):p.push(t):t instanceof Array?f.push(...t):f.push(t),n({field:e,values:f,notValues:p,wildcards:i})};return{invertFilter:({field:e,value:t,negate:a})=>{l({field:e,value:t,negate:!a})},setFilter:({field:a,value:n,negate:o,wildcards:s})=>{r.find((({field:e})=>a===e))?l({field:a,value:n,negate:o,wildcards:s}):(({field:a,value:n,negate:l})=>{const o={field:a};l?o.notValues=n instanceof Array?n:[n]:o.values=n instanceof Array?n:[n],0===r.length?i(e,{...t,filters:[o]}):i(e,{...t,filters:[o,...r.filter((e=>e.field!==a))]})})({field:a,value:n,negate:o,wildcards:s})},removeFilter:({field:a,value:n,negate:l,isWildcard:o})=>{const s=r.map((e=>{if(e.field===a){if(l){var t;if(o){var i;const t=null===(i=e.notWildcards)||void 0===i?void 0:i.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,notWildcards:t}}const a=null===(t=e.notValues)||void 0===t?void 0:t.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,notValues:a}}{var r;if(o){var s;const t=null===(s=e.wildcards)||void 0===s?void 0:s.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,wildcards:t}}const t=null===(r=e.values)||void 0===r?void 0:r.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,values:t}}}return e})).filter((({values:e=[],notValues:t=[],wildcards:a=[],notWildcards:i=[]})=>e.length>0||t.length>0||a.length>0||i.length>0));i(e,{...t,filters:s})},replaceFilter:n,setFiltersWildcard:({field:a,wildcards:l})=>{let o=r.find((({field:e})=>a===e));var s,u;o?n({field:a,values:null!==(s=o.values)&&void 0!==s?s:[],notValues:null!==(u=o.notValues)&&void 0!==u?u:[],wildcards:l}):(o={field:a,wildcards:l},0===r.length?i(e,{...t,filters:[o]}):i(e,{...t,filters:[o,...r.filter((e=>e.field!==a))]}))}}};function ye({isNestedOpen:e,setIsNestedOpen:t,value:a,field:l,negate:o,seriesId:s,series:u,nestedField:c,allSelectedValues:d}){var p;const{dataViews:f}=Object(g.b)(u.dataType),{setFilter:b,removeFilter:m}=ge({seriesId:s,series:u}),y=(null!=d?d:[]).includes(a),v=r.a.createElement(ve,{hasActiveFilters:y,color:o?"danger":"primary",onClick:()=>{y?m({field:l,value:a,negate:o}):b({field:l,value:a,negate:o}),t(y?{value:"",negate:o}:{value:a,negate:o})}},o?n.i18n.translate("xpack.observability.expView.filterValueButton.negate",{defaultMessage:"Not {value}",values:{value:a}}):a),h=(null==e?void 0:e.value)===a&&e.negate===o,E=Object(i.useMemo)((()=>[{term:{[l]:a}}]),[l,a]);return c&&h?r.a.createElement(re.default,{button:v,label:"Version",sourceField:c,onChange:e=>{(null!=e?e:[]).forEach((e=>{b({field:c,value:e})})),t({value:"",negate:o})},filters:E,forceOpen:h,anchorPosition:"rightCenter",time:u.time,asCombobox:!1,dataViewTitle:null===(p=f[u.dataType])||void 0===p?void 0:p.title}):v}const ve=Object(v.euiStyled)(f.EuiFilterButton)`
  background-color: rgba(${e=>{const t=e.hasActiveFilters?"danger"===e.color?Object(f.hexToRgb)(e.theme.eui.euiColorDanger):Object(f.hexToRgb)(e.theme.eui.euiColorPrimary):"initial";return`${t[0]}, ${t[1]}, ${t[2]}, 0.1`}});
`;function he({field:e,values:t,query:a,setQuery:n,label:l,loading:o,isNegated:s,nestedField:u,series:d,seriesId:p}){var b;const[m,g]=Object(i.useState)({value:"",negate:!1}),y=Object(S.map)(t,"label").filter((e=>e.toLowerCase().includes(a.toLowerCase()))),v=(null!==(b=null==d?void 0:d.filters)&&void 0!==b?b:[]).find((({field:t})=>e===t)),h={field:e,nestedField:u,seriesId:p,series:d,isNestedOpen:m,setIsNestedOpen:g};return r.a.createElement(Ce,null,r.a.createElement(f.EuiFieldSearch,{fullWidth:!0,isLoading:o,value:a,onChange:e=>{n(e.target.value)},placeholder:we(l)}),r.a.createElement(f.EuiSpacer,{size:"s"}),r.a.createElement(xe,null,o&&r.a.createElement("div",{className:"eui-textCenter"},r.a.createElement(f.EuiProgress,{size:"xs",color:"primary",position:"absolute",style:{top:"initial"}})),0===y.length&&!o&&r.a.createElement(f.EuiText,{className:"eui-textCenter"},Ee),y.map((e=>r.a.createElement(i.Fragment,{key:e},r.a.createElement(f.EuiFilterGroup,{fullWidth:!0,color:"primary"},!1!==s&&r.a.createElement(ye,c()({},h,{value:e,negate:!0,allSelectedValues:null==v?void 0:v.notValues})),r.a.createElement(ye,c()({},h,{value:e,negate:!1,allSelectedValues:null==v?void 0:v.values}))),r.a.createElement(f.EuiSpacer,{size:"s"}))))))}const Ee=n.i18n.translate("xpack.observability.filters.expanded.noFilter",{defaultMessage:"No filters found."}),we=e=>n.i18n.translate("xpack.observability.filters.expanded.search",{defaultMessage:"Search for {label}",values:{label:e}}),xe=v.euiStyled.div`
  height: 370px;
  overflow-y: auto;
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(y.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Ce=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-dqgr2v-0"})(["width:400px;"]);function Se(e){const[t,a]=Object(i.useState)(!1),[n,l]=Object(i.useState)(""),{values:o,loading:s}=me(e,n);return r.a.createElement(f.EuiPopover,{button:r.a.createElement(f.EuiFilterButton,{onClick:()=>a((e=>!e)),iconType:"arrowDown"},e.label),isOpen:t,closePopover:()=>a(!1)},r.a.createElement(he,c()({},e,{setQuery:l,query:n,values:o,loading:s})))}var ke=a(54),Oe=a(136);function Te({label:e,seriesId:t,series:a,field:i,value:n,negate:l,dataView:o,removeFilter:s,definitionFilter:u}){const{invertFilter:c}=ge({seriesId:t,series:a});return o?r.a.createElement(Oe.FilterValueLabel,{dataView:o,removeFilter:s,invertFilter:e=>{u||c(e)},field:i,value:n,negate:l,label:e}):null}function Fe({seriesId:e,series:t,seriesConfig:a}){var l,o;const{setSeries:s}=Object(b.f)(),{labels:u}=a,d=null!==(l=t.filters)&&void 0!==l?l:[],{removeFilter:p,replaceFilter:m}=ge({seriesId:e,series:t}),{dataView:y}=Object(g.b)(t.dataType);if(0===d.length||!y)return null;const v={seriesId:e,series:t,dataView:y};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,{wrap:!0,gutterSize:"xs",alignItems:"center"},d.map((({field:e,values:t=[],notValues:a=[],wildcards:l=[],notWildcards:o=[]})=>{var s,d,b,g;return r.a.createElement(i.Fragment,{key:e},t.length>0&&r.a.createElement(f.EuiFlexItem,{grow:!1,style:{maxWidth:300}},r.a.createElement(Te,c()({field:e,label:null!==(s=u[e])&&void 0!==s?s:e,value:null!=t?t:[],removeFilter:()=>{m({field:e,values:[],notValues:a,wildcards:l,notWildcards:o})},negate:!1},v))),a.length>0&&r.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},r.a.createElement(Te,c()({field:e,label:null!==(d=u[e])&&void 0!==d?d:e,value:null!=a?a:[],negate:!0,removeFilter:()=>{m({field:e,notValues:[],values:t,wildcards:l,notWildcards:o})}},v))),l.length>0&&r.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},r.a.createElement(Te,c()({field:e,label:n.i18n.translate("xpack.observability.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(b=u[e])&&void 0!==b?b:e}}),value:null!=l?l:[],negate:!1,removeFilter:()=>{null==l||l.forEach((t=>{p({field:e,value:t,negate:!1,isWildcard:!0})}))}},v))),o.length>0&&r.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},r.a.createElement(Te,c()({field:e,label:n.i18n.translate("xpack.observability.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(g=u[e])&&void 0!==g?g:e}}),value:null!=o?o:[],negate:!1,removeFilter:()=>{null==o||o.forEach((t=>{p({field:e,value:t,negate:!0,isWildcard:!0})}))}},v))))})),(null!==(o=t.filters)&&void 0!==o?o:[]).length>0&&r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButtonEmpty,{flush:"left",iconType:"cross",onClick:()=>{s(e,{...t,filters:void 0})},size:"xs"},n.i18n.translate("xpack.observability.expView.seriesEditor.clearFilter",{defaultMessage:"Clear filters"})))),r.a.createElement(f.EuiSpacer,{size:"s"}))}function je(e){const{series:t}=e,[a,n]=Object(i.useState)(""),{dataView:l}=Object(g.b)(t.dataType),o=null==l?void 0:l.fields.filter((e=>e.name.startsWith("labels."))),[s,u]=Object(i.useState)(!1),d=r.a.createElement(f.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{u(!s)}},Ie),[p,b]=Object(i.useState)(""),{values:m,loading:y}=me({...e,field:p},a),v=(null!=o?o:[]).map((e=>({label:e.name,searchableLabel:e.name,append:r.a.createElement(f.EuiIcon,{type:"arrowRight"}),showIcons:!1})));return v.unshift({label:Me,isGroupLabel:!0}),r.a.createElement(f.EuiPopover,{button:d,closePopover:()=>{u(!1),b("")},isOpen:s},p?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiPopoverTitle,null,r.a.createElement(f.EuiButtonEmpty,{iconType:"arrowLeft",iconSide:"left",onClick:()=>b("")},Ve)),r.a.createElement(he,c()({},e,{label:p,values:m,query:a,setQuery:n,loading:y,field:p}))):r.a.createElement(f.EuiSelectable,{searchable:!0,options:v,onChange:e=>{var t;const a=e.find((e=>"on"===e.checked));b(null!==(t=null==a?void 0:a.label)&&void 0!==t?t:"")},listProps:{onFocusBadge:!1},height:450},((e,t)=>r.a.createElement("div",{style:{width:400}},t,e))))}const Ie=n.i18n.translate("xpack.observability.filters.expanded.labels.label",{defaultMessage:"Labels"}),Me=n.i18n.translate("xpack.observability.filters.expanded.labels.fields",{defaultMessage:"Label fields"}),Ve=n.i18n.translate("xpack.observability.filters.expanded.labels.backTo",{defaultMessage:"Back to labels"});var Ae=a(139),De=a(8);const Pe=e=>{const t=e.filter((({isWildcard:e})=>!e)),a=e.filter((({isWildcard:e})=>e));return{includedItems:Object(S.map)(t.filter((e=>"on"===e.checked)),"label"),excludedItems:Object(S.map)(t.filter((e=>"off"===e.checked)),"label"),includedWildcards:Object(S.map)(a.filter((e=>"on"===e.checked)),"title"),excludedWildcards:Object(S.map)(a.filter((e=>"off"===e.checked)),"title")}},ze=e=>n.i18n.translate("xpack.observability.urlFilter.wildcard",{defaultMessage:"Use wildcard *{wildcard}*",values:{wildcard:e}});function _e({series:e,seriesConfig:t,seriesId:a}){const[n,l]=Object(i.useState)(!1),[o,s]=Object(i.useState)(""),[u,c]=Object(i.useState)([]),{values:d,loading:p}=(({series:e,query:t,seriesId:a,seriesConfig:i})=>{const{values:r,loading:n}=me({series:e,seriesId:a,field:De.o,baseFilters:i.baseFilters,label:i.labels[De.o]},t);return{values:r,loading:n}})({query:o,series:e,seriesConfig:t,seriesId:a});Object(i.useEffect)((()=>{var t;const a=ze(o),i=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===De.o)),{wildcards:r=[],notWildcards:n=[],values:l=[],notValues:s=[]}=null!=i?i:{field:De.o};c((e=>{const{includedItems:t,excludedItems:i}=Pe(e),u=(null!=d?d:[]).map((e=>t.includes(e.label)||r.includes(e.label)||l.includes(e.label)?{...e,checked:"on",title:e.label}:i.includes(e.label)||n.includes(e.label)||s.includes(e.label)?{...e,checked:"off",title:e.label,...e}:{...e,title:e.label,checked:void 0}));r.forEach((e=>{u.unshift({title:e,label:ze(e),isWildcard:!0,checked:"on"})})),n.forEach((e=>{u.unshift({title:e,label:ze(e),isWildcard:!0,checked:"off"})}));let c=e.find((({isNewWildcard:e})=>e));return o?(c||(c={title:o,label:a,isNewWildcard:!0,isWildcard:!0},u.unshift(c)),[{...c,label:a,title:o},...u]):u}))}),[d,p,o]),Object(i.useEffect)((()=>{var t;const a=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===De.o)),{wildcards:i=[],notWildcards:r=[],values:n=[],notValues:l=[]}=null!=a?a:{field:De.o};c((e=>(null!=e?e:[]).map((e=>n.includes(e.label)||i.includes(e.title)?{...e,checked:"on"}:l.includes(e.label)||r.includes(e.title)?{...e,checked:"off"}:{...e,checked:void 0}))))}),[e]);const{replaceFilter:f}=ge({seriesId:a,series:e});return r.a.createElement(Ae.SelectableUrlList,{loading:Boolean(p),onInputChange:e=>s(e),data:{items:u,total:u.length},onSelectionChange:e=>{c(e)},searchValue:o,popoverIsOpen:n,setPopoverIsOpen:l,onSelectionApply:()=>{const{includedItems:e,excludedItems:t,includedWildcards:a,excludedWildcards:i}=Pe(u);f({field:De.o,values:e,notValues:t,wildcards:a,notWildcards:i}),s(""),l(!1)},hasChanged:()=>{var t;const{includedItems:a,excludedItems:i,includedWildcards:r,excludedWildcards:n}=Pe(u),l=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===De.o)),{wildcards:o=[],notWildcards:s=[],values:c=[],notValues:d=[]}=null!=l?l:{field:De.o};return!(Object(S.isEqual)(a.sort(),c.sort())&&Object(S.isEqual)(i.sort(),d.sort())&&Object(S.isEqual)(o.sort(),r.sort())&&Object(S.isEqual)(s.sort(),n.sort()))}})}function Re({series:e,seriesConfig:t,seriesId:a}){const n=t.filterFields.filter((e=>e!==De.o)).map((e=>{var a,i,r,n,l;return"string"==typeof e?{label:null!==(r=null!==(n=null===(l=t.labels)||void 0===l?void 0:l[e])&&void 0!==n?n:ke.d[e])&&void 0!==r?r:e,field:e}:{field:e.field,nestedField:e.nested,isNegated:e.isNegated,label:(null!==(a=null===(i=t.labels)||void 0===i?void 0:i[e.field])&&void 0!==a?a:ke.d[e.field])||e.field}})),l=Object(i.useMemo)((()=>t.filterFields.some((e=>"string"==typeof e?e===De.o:void 0!==e.field&&e.field===De.o))),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},l?r.a.createElement(f.EuiFlexItem,null,r.a.createElement(_e,{series:e,seriesId:a,seriesConfig:t})):null,r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiFilterGroup,null,n.map((i=>i.field===ke.f?r.a.createElement(je,c()({series:e,key:i.label,seriesId:a,baseFilters:t.baseFilters},i)):r.a.createElement(Se,c()({series:e,key:i.label,seriesId:a,baseFilters:t.baseFilters},i))))))),r.a.createElement(f.EuiSpacer,{size:"s"}),r.a.createElement(Fe,{seriesId:a,series:e,seriesConfig:t}))}var Be=a(111),Le=a(99),$e=a(63);function Ne({series:e,seriesId:t}){var a,i;const{onRefreshTimeRange:n}=Object(Le.a)(),l=Object(o.useUiSetting)($e.UI_SETTINGS.TIMEPICKER_QUICK_RANGES).map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))),{setSeries:s,reportType:u,allSeries:c}=Object(b.f)();function d({start:a,end:i}){n(),u===j.m.KPI?c.forEach(((e,t)=>{s(t,{...e,time:{from:a,to:i}})})):s(t,{...e,time:{from:a,to:i}})}return r.a.createElement(f.EuiSuperDatePicker,{start:null==e||null===(a=e.time)||void 0===a?void 0:a.from,end:null==e||null===(i=e.time)||void 0===i?void 0:i.to,onTimeChange:d,commonlyUsedRanges:l,onRefresh:d,showUpdateButton:!1})}const We=n.i18n.translate("xpack.observability..synthetics.addDataButtonLabel",{defaultMessage:"Add synthetics data"}),qe=n.i18n.translate("xpack.observability.mobile.addDataButtonLabel",{defaultMessage:"Add Mobile data"}),Ue=n.i18n.translate("xpack.observability.ux.addDataButtonLabel",{defaultMessage:"Add UX data"}),Ge={mobile:function(){var e,t;const a=Object(T.a)();return r.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.observability.page_header.addMobileDataLink.label",{defaultMessage:"Navigate to a tutorial about adding mobile APM data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/apm"),color:"primary",iconType:"indexOpen"},qe)},ux:function(){var e,t;const a=Object(T.a)();return r.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.observability.page_header.addUXDataLink.label",{defaultMessage:"Navigate to a tutorial about adding user experience APM data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/apm"),color:"primary",iconType:"indexOpen"},Ue)},synthetics:function(){var e,t;const a=Object(T.a)();return r.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.observability.page_header.addUptimeDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(e=a.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},We)},apm:null,infra_logs:null,infra_metrics:null};function He({seriesId:e,series:t}){const{reportType:a}=Object(b.f)(),{hasAppData:i}=Object(g.b)();if(!t.dataType)return null;const l=Ge[t.dataType];return!1===i[t.dataType]&&null!==l?r.a.createElement(f.EuiFlexGroup,{alignItems:"center"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement("strong",null,n.i18n.translate("xpack.observability.overview.exploratoryView.noDataAvailable",{defaultMessage:"No {dataType} data available.",values:{dataType:t.dataType}}))),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(l,null))):r.a.createElement(Xe,null,0===e||a!==j.m.KPI?r.a.createElement(Ne,{seriesId:e,series:t}):r.a.createElement(Be.a,{seriesId:e,series:t}))}const Xe=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-6ndrp0-0"})(["width:100%;.euiSuperDatePicker__flexWrapper{width:100%;> .euiFlexItem{margin-right:0;}}"]);function Ke({seriesConfig:e,seriesId:t,series:a}){const{setSeries:n,allSeries:l}=Object(b.f)(),o=l.findIndex((e=>Boolean(e.breakdown))),s=-1!==o&&!(o===t),u=a.breakdown,c="no_breakdown";if(Object(i.useEffect)((()=>{Object(se.b)(a.selectedMetricField)||u!==ue.h||n(t,{...a,breakdown:void 0})})),!e)return null;const d=e.xAxisColumn.sourceField===j.o,p=a.selectedMetricField===j.j,m=e.breakdownFields.map((t=>{var a;return{id:t,label:null!==(a=e.labels[t])&&void 0!==a?a:t}}));d||m.push({id:c,label:Qe});const g=m.map((({id:e,label:t})=>e!==ue.h||Object(se.b)(a.selectedMetricField)?{inputDisplay:t,value:e,dropdownDisplay:t}:{inputDisplay:t,value:e,dropdownDisplay:r.a.createElement(f.EuiToolTip,{content:Ye},r.a.createElement(r.a.Fragment,null,t)),disabled:!0})).filter((({value:e})=>!(e===j.h&&p)));let y=u||(d?g[0].value:c);function v(){return r.a.createElement(f.EuiSuperSelect,{options:g,valueOfSelected:y,onChange:e=>{var i;n(t,(i=e)===c?{...a,breakdown:void 0}:{...a,breakdown:u===i?void 0:i})},"data-test-subj":"seriesBreakdown",disabled:s})}return null!=u&&u.startsWith("labels.")&&(y=j.e),r.a.createElement(Ze,null,s?r.a.createElement(f.EuiToolTip,{content:Je,position:"top"},r.a.createElement(v,null)):r.a.createElement(v,null))}const Qe=n.i18n.translate("xpack.observability.exp.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),Je=n.i18n.translate("xpack.observability.exp.breakDownFilter.warning",{defaultMessage:"Breakdowns can be applied to only one series at a time."}),Ye=n.i18n.translate("xpack.observability.exp.breakDownFilter.unavailable",{defaultMessage:"Step name breakdown is not available for monitor duration metric. Use step duration metric to breakdown by step name."}),Ze=p.a.span.withConfig({displayName:"Wrapper",componentId:"sc-125bdxf-0"})([".euiToolTipAnchor{width:100%;}"]);function et({series:e,seriesId:t}){const{dataView:a}=Object(g.b)(e.dataType),i=null==a?void 0:a.fields.filter((e=>e.name.startsWith("labels."))),{setSeries:n}=Object(b.f)(),{breakdown:l}=e;if(l!==j.e&&!(null==l?void 0:l.startsWith("labels.")))return null;const o=null==i?void 0:i.map((e=>({label:e.name,value:e.name})));return r.a.createElement(f.EuiFlexItem,{grow:!1,style:{minWidth:200}},r.a.createElement(f.EuiComboBox,{selectedOptions:null==o?void 0:o.filter((e=>e.label===l)),options:o,placeholder:tt,onChange:a=>{var i,r;n(t,{...e,breakdown:null!==(i=null==a||null===(r=a[0])||void 0===r?void 0:r.label)&&void 0!==i?i:j.e})},singleSelection:{asPlainText:!0},isInvalid:e.breakdown===j.e}))}const tt=n.i18n.translate("xpack.observability.expView.seriesBuilder.labelField",{defaultMessage:"Choose label field"});function at(e){const{seriesConfig:t,series:a,seriesId:i}=e;if(!t)return null;const{selectedMetricField:n}=null!=a?a:{},{hasOperationType:l,yAxisColumns:o}=t,s=function(e,t){const{columnType:a}=Object(pe.b)(e,t);return a}(t,n),u=a.breakdown===j.h;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(f.EuiFlexGroup,{gutterSize:"xs",wrap:!0},r.a.createElement(f.EuiFlexItem,{grow:1},r.a.createElement(f.EuiFormRow,{label:lt,fullWidth:!0},r.a.createElement(He,e))),r.a.createElement(f.EuiFlexItem,{grow:2},r.a.createElement(ce,{seriesConfig:t,seriesId:i,series:a}))),r.a.createElement(f.EuiHorizontalRule,null),r.a.createElement(f.EuiFormRow,{label:rt,fullWidth:!0},r.a.createElement(Re,{seriesConfig:t,seriesId:i,series:a})),r.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiFormRow,{label:it},r.a.createElement(f.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(f.EuiFlexItem,{style:{minWidth:200}},r.a.createElement(Ke,e)),r.a.createElement(et,e)))),(l||"operation"===s&&!u)&&r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiFormRow,{label:nt},r.a.createElement(de.b,c()({},e,{defaultOperationType:o[0].operationType}))))))}const it=n.i18n.translate("xpack.observability.expView.seriesBuilder.breakdownBy",{defaultMessage:"Breakdown by"}),rt=n.i18n.translate("xpack.observability.expView.seriesBuilder.selectFilters",{defaultMessage:"Filters"}),nt=n.i18n.translate("xpack.observability.expView.seriesBuilder.operation",{defaultMessage:"Operation"}),lt=n.i18n.translate("xpack.observability.expView.seriesBuilder.date",{defaultMessage:"Date"}),ot=p()(f.EuiText).withConfig({displayName:"StyledText",componentId:"sc-7zp12x-0"})(["&.euiText.euiText--constrainedWidth{max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]);function st({series:e,seriesId:t}){const{setSeries:a}=Object(b.f)(),[l,o]=Object(i.useState)(e.name),[s,u]=Object(i.useState)(!1),c=Object(i.useRef)(null),d=Object(i.useRef)(null);return Object(i.useEffect)((()=>{o(e.name)}),[e.name]),Object(i.useEffect)((()=>{s&&c.current&&c.current.focus()}),[s,c]),r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},s?r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiOutsideClickDetector,{onOutsideClick:e=>{e.target!==d.current&&u(!1)}},r.a.createElement(f.EuiFieldText,{value:l,onChange:e=>{o(e.target.value)},onBlur:()=>{l!==e.name&&a(t,{...e,name:l})},onKeyDown:e=>{"Enter"===e.key&&u(!1)},fullWidth:!0,inputRef:c,"aria-label":n.i18n.translate("xpack.observability.expView.seriesEditor.seriesName",{defaultMessage:"Series name"}),"data-test-subj":"exploratoryViewSeriesNameInput"}))):r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(ot,{grow:!1},l)),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButtonIcon,{onClick:()=>u(!s),iconType:"pencil","aria-label":n.i18n.translate("xpack.observability.expView.seriesEditor.editName",{defaultMessage:"Edit name"}),color:"text",buttonRef:d})))}var ut=a(80);function ct({seriesId:e,series:t,seriesConfig:a}){var n,l;const{setSeries:o}=Object(b.f)(),[s,u]=Object(i.useState)(!1),c=null==a?void 0:a.metricOptions,{dataViews:d,dataViewErrors:p,loading:m}=Object(g.b)(),y=a=>{o(e,{...t,selectedMetricField:a})},v=Object(i.useCallback)((e=>{null==e||e.focus()}),[]);if(!t.dataType)return null;const h=null==d?void 0:d[t.dataType],E=null==p?void 0:p[t.dataType],w=(null!=c?c:[]).map((({label:e,field:t,id:a})=>{let i=!1;return t!==j.j&&t!==j.k&&t&&(i=!Boolean(null==h?void 0:h.getFieldByName(t))),{disabled:i,value:t||a,dropdownDisplay:i?r.a.createElement(f.EuiToolTip,{content:r.a.createElement(ut.FormattedMessage,{id:"xpack.observability.expView.seriesEditor.selectReportMetric.noFieldData",defaultMessage:"No data available for field {field}.",values:{field:r.a.createElement("strong",null,t)}})},r.a.createElement("span",null,e)):e,inputDisplay:e}}));var x;return!E||h||m?h||m?r.a.createElement(r.a.Fragment,null,!t.selectedMetricField&&r.a.createElement(f.EuiPopover,{button:r.a.createElement(f.EuiButton,{iconType:"plusInCircle",onClick:()=>u((e=>!e)),fill:!0,size:"s",isLoading:!h&&m,buttonRef:v},dt),isOpen:s,closePopover:()=>u((e=>!e))},r.a.createElement(f.EuiListGroup,null,w.map((e=>r.a.createElement(f.EuiListGroupItem,{key:e.value,onClick:()=>y(e.value),label:e.dropdownDisplay,isDisabled:e.disabled}))))),t.selectedMetricField&&(h?r.a.createElement(f.EuiToolTip,{position:"top",content:mt},r.a.createElement(f.EuiBadge,{iconType:"cross",iconSide:"right",iconOnClick:()=>y(void 0),iconOnClickAriaLabel:pt},null==a||null===(n=a.metricOptions)||void 0===n||null===(l=n.find((e=>e.id===t.selectedMetricField)))||void 0===l?void 0:l.label)):r.a.createElement(f.EuiLoadingSpinner,null))):r.a.createElement(f.EuiText,null,ft):r.a.createElement(f.EuiText,{color:"danger",className:"eui-textNoWrap"},"Forbidden"===(null===(x=E.body)||void 0===x?void 0:x.error)||"DataViewInsufficientAccessError"===E.name?bt:E.body.message)}const dt=n.i18n.translate("xpack.observability.expView.seriesEditor.selectReportMetric",{defaultMessage:"Select report metric"}),pt=n.i18n.translate("xpack.observability.expView.seriesEditor.removeReportMetric",{defaultMessage:"Remove report metric"}),ft=n.i18n.translate("xpack.observability.expView.seriesEditor.noData",{defaultMessage:"No data available"}),bt=n.i18n.translate("xpack.observability.expView.seriesEditor.noPermissions",{defaultMessage:"Unable to create Data View. You don't have the required permission, please contact your admin."}),mt=n.i18n.translate("xpack.observability.expView.seriesEditor.reportMetricTooltip",{defaultMessage:"Report metric"}),gt=p()(f.EuiAccordion).withConfig({displayName:"StyledAccordion",componentId:"sc-fdabah-0"})([".euiAccordion__button{width:auto;flex-grow:0;}.euiAccordion__optionalAction{flex-grow:1;flex-shrink:1;}.euiAccordion__childWrapper{overflow:visible;}"]);function yt({item:e,isExpanded:t,toggleExpanded:a}){const{id:n}=e,l={...e,seriesId:n},[o,s]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{t&&s(!0)}),[t]),r.a.createElement(f.EuiPanel,{hasBorder:!0,"data-test-subj":"exploratoryViewSeriesPanel0",paddingSize:"s"},r.a.createElement(gt,{id:`exploratoryViewSeriesAccordion${n}`,forceState:t?"open":"closed","aria-label":vt,onToggle:a,arrowDisplay:l.series.dataType?void 0:"none",extraAction:r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(J,l)),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(st,l)))),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(Y,l)),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(ct,l)),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(te,l)))),r.a.createElement(f.EuiFlexItem,null,r.a.createElement(I,c()({},l,{onEditClick:t?void 0:a}))))},r.a.createElement(f.EuiSpacer,{size:"s"}),r.a.createElement(f.EuiPanel,{color:"subdued"},o&&r.a.createElement(at,l))))}const vt=n.i18n.translate("xpack.observability.expView.seriesBuilder.accordion.label",{defaultMessage:"Toggle series information"}),ht=({dataViews:e,allSeries:t,reportType:a,reportConfigMap:i})=>t.map(((t,r)=>({id:r,series:t,seriesConfig:(t=>{if(null!=e&&e[t])return Object(h.a)({dataType:t,reportType:a,reportConfigMap:i,dataView:e[t]})})(t.dataType)}))),Et=r.a.memo((function(){const[e,t]=Object(i.useState)([]),{getSeries:a,allSeries:n,reportType:l}=Object(b.f)(),{loading:o,dataViews:s}=Object(g.b)(),{reportConfigMap:u,setIsEditMode:c}=Object(E.b)(),[d,p]=Object(i.useState)({}),[{prevCount:m,curCount:y},v]=Object(i.useState)({curCount:n.length});return Object(i.useEffect)((()=>{null==c||c(Object.keys(d).length>0)}),[d,c]),Object(i.useEffect)((()=>{v((e=>({prevCount:e.curCount,curCount:n.length}))),void 0!==m&&!isNaN(m)&&m<y&&p({})}),[n.length,y,m]),Object(i.useEffect)((()=>{const e={};t((t=>{const a=ht({reportType:l,allSeries:n,dataViews:s,reportConfigMap:u});return a.forEach((({series:a,id:i})=>{const r=t.find((({id:e})=>e===i));r&&a.selectedMetricField&&r.series.selectedMetricField!==a.selectedMetricField&&(e[i]=!0)})),[...a]})),p((t=>({...t,...e})))}),[n,a,s,o,u,l]),r.a.createElement(wt,null,r.a.createElement(xt,null),r.a.createElement(Ct,{gutterSize:"none"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(Ft,{"aria-label":Tt,id:"report-type-label",isDisabled:!0},r.a.createElement(C,{prepend:Ot}))),r.a.createElement(f.EuiFlexItem,null,r.a.createElement(O,{onApply:()=>p({})}))),r.a.createElement(St,null,e.map(((t,a)=>r.a.createElement("div",{key:t.id},r.a.createElement(yt,{item:t,toggleExpanded:()=>(e=>{const t={...d};t[e.id]?delete t[e.id]:t[e.id]=!0,p(t)})(t),isExpanded:d[t.id]}),a+1!==e.length&&r.a.createElement(f.EuiSpacer,{size:"s"}))))))})),wt=v.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(y.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }

  &&& {
    .euiTableRow-isExpandedRow .euiTableRowCell {
      border-top: none;
      background-color: #FFFFFF;
      border-bottom: 2px solid #d3dae6;
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
    }

    .isExpanded {
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
      .euiTableRowCell {
        border-bottom: none;
      }
    }
    .isIncomplete .euiTableRowCell {
      background-color: rgba(254, 197, 20, 0.1);
    }
  }
`,xt=v.euiStyled.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 56px;
  background-color: ${({theme:e})=>e.eui.euiPageBackgroundColor};
  border-bottom: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
  z-index: 90;
`,Ct=Object(v.euiStyled)(f.EuiFlexGroup)`
  position: sticky;
  top: 0;
  z-index: 100;
  padding: 0;
`,St=v.euiStyled.div`
  margin: ${({theme:e})=>e.eui.paddingSizes.m} 0;
`,kt=n.i18n.translate("xpack.observability.expView.seriesBuilder.loadingView",{defaultMessage:"Loading view ..."}),Ot=(n.i18n.translate("xpack.observability.expView.seriesBuilder.selectReportType",{defaultMessage:"No report type selected"}),n.i18n.translate("xpack.observability.expView.seriesBuilder.reportType",{defaultMessage:"Report type"})),Tt=n.i18n.translate("xpack.observability.expView.seriesBuilder.reportType.aria",{defaultMessage:"This select allows you to choose the type of report you wish to create"});var Ft=p()(f.EuiFormRow).withConfig({displayName:"_StyledEuiFormRow",componentId:"sc-1l6fn79-0"})({alignItems:"center"});function jt(){const[e,t]=Object(i.useState)([]),a=Object(i.useRef)(null),{getSeries:l,allSeries:o,setSeries:s,reportType:u}=Object(b.f)(),{loading:c,dataViews:d}=Object(g.b)(),{reportConfigMap:p}=Object(E.b)();Object(i.useEffect)((()=>{t(ht({allSeries:o,dataViews:d,reportType:u,reportConfigMap:p}))}),[o,l,d,c,p,u]);const m=!u||(u===j.m.CORE_WEB_VITAL||u===j.m.DEVICE_DISTRIBUTION)&&o.length>0;return r.a.createElement(f.EuiToolTip,{content:u?m?n.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries.limitation",{defaultMessage:"You can only add one series of this report type."}):"":n.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries.selectReportType",{defaultMessage:"Please select report type before you can add series."})},r.a.createElement(f.EuiButton,{onClick:()=>(()=>{const t=null==o?void 0:o[0],i={name:`${b.a}-${e.length+1}`};null!=a&&a.current&&a.current.blur();const r=o.length;s(r,"data-distribution"===u?{...i,time:(null==t?void 0:t.time)||j.a}:t?i:{...i,time:j.a})})(),isDisabled:m,iconType:"plusInCircle",size:"s",buttonRef:a},n.i18n.translate("xpack.observability.expView.seriesBuilder.addSeries",{defaultMessage:"Add series"})))}function It({seriesBuilderRef:e}){return r.a.createElement("div",{ref:e},r.a.createElement(Et,null),r.a.createElement(jt,null))}var Mt=a(31);const Vt=()=>{const{storage:e,reportType:t,lastRefresh:a,firstSeries:r}=Object(b.f)();return Object(i.useMemo)((()=>{var a;const i=Object(b.d)(null!==(a=e.get(b.c))&&void 0!==a?a:[]),r=null==i?void 0:i[0];return r?((e,t,a)=>{let i="",r="";return e===j.m.KPI?null==a?void 0:a.time:(t.forEach((e=>{if(e.dataType&&e.selectedMetricField&&e.time){const t=Object(Be.b)(e.time.from),a=Object(Be.b)(e.time.to,{roundUp:!0});(!i||a>Object(Be.b)(i,{roundUp:!0}))&&(i=e.time.to),(!r||t<Object(Be.b)(r))&&(r=e.time.from)}})),{to:i,from:r})})(t,i,r):void 0}),[t,e,a,r])};var At=a(132);function Dt(e){const{lensAttributes:t,setChartTimeRangeContext:a}=e,{services:{lens:l,notifications:s}}=Object(o.useKibana)(),u=null==l?void 0:l.EmbeddableComponent,c=null==l?void 0:l.SaveModalComponent,{firstSeries:d,setSeries:p,reportType:f,lastRefresh:m}=Object(b.f)(),[g,y]=Object(i.useState)(!1),v=Vt(),h=Object(Mt.d)(),E=Object(i.useCallback)((e=>{var t,i;const r=Date.now();null==a||a({lastUpdated:r,to:null===(t=Object(Be.b)((null==v?void 0:v.to)||""))||void 0===t?void 0:t.valueOf(),from:null===(i=Object(Be.b)((null==v?void 0:v.from)||""))||void 0===i?void 0:i.valueOf()}),e||Object(At.b)(h,m,r)}),[a,v,m,h]),w=Object(i.useCallback)((({range:e})=>{"data-distribution"!==f&&d?p(0,{...d,time:{from:new Date(e[0]).toISOString(),to:new Date(e[1]).toISOString()}}):null==s||s.toasts.add(n.i18n.translate("xpack.observability.exploratoryView.noBrusing",{defaultMessage:"Zoom by brush selection is only available on time series charts."}))}),[f,p,d,null==s?void 0:s.toasts]);return v&&t?r.a.createElement(Pt,null,r.a.createElement(u,{id:"exploratoryView",timeRange:v,attributes:t,onLoad:E,onBrushEnd:w}),g&&t&&r.a.createElement(c,{initialInput:t,onClose:()=>y(!1),onSave:()=>{}})):null}const Pt=p.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-hgoyq0-0"})(["height:100%;.embPanel__optionsMenuPopover{visibility:collapse;}&&&:hover{.embPanel__optionsMenuPopover{visibility:visible;}}&& .embPanel--editing{border-style:initial !important;:hover{box-shadow:none;}}.embPanel__title{display:none;}&&& > div{height:100%;}"]);function zt({loading:e,series:t,reportType:a}){const{dataType:i,reportDefinitions:l}=null!=t?t:{};let o=Bt;return i?a?Object(S.isEmpty)(l)&&(o=Lt):o=$t:o=Nt,t||(o=n.i18n.translate("xpack.observability.expView.seriesEditor.notFound",{defaultMessage:"No series found. Please add a series."})),r.a.createElement(_t,null,e&&r.a.createElement(f.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{top:"initial"}}),r.a.createElement(f.EuiSpacer,null),r.a.createElement(Rt,{justifyContent:"center",alignItems:"center"},r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiText,null,e?kt:o))))}const _t=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-174xx6x-0"})(["text-align:center;position:relative;"]),Rt=p()(f.EuiFlexGroup).withConfig({displayName:"FlexGroup",componentId:"sc-174xx6x-1"})(["height:100%;"]),Bt=n.i18n.translate("xpack.observability.expView.seriesBuilder.emptyview",{defaultMessage:"Nothing to display."}),Lt=n.i18n.translate("xpack.observability.expView.seriesBuilder.emptyReportDefinition",{defaultMessage:"Select a report definition to create a visualization."}),$t=n.i18n.translate("xpack.observability.expView.seriesBuilder.selectReportType.empty",{defaultMessage:"Select a report type to create a visualization."}),Nt=n.i18n.translate("xpack.observability.expView.reportType.selectDataType",{defaultMessage:"Select a data type to create a visualization."});var Wt=a(141);function qt({timeRange:e,lensAttributes:t}){const a=Object(o.useKibana)().services,{lens:l}=a,[s,u]=Object(i.useState)(!1),c=l.SaveModalComponent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,style:{paddingRight:20}},e&&r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(Wt.a,{lensAttributes:t,timeRange:e})),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButton,{iconType:"lensApp",fullWidth:!1,isDisabled:!l.canUseEditor()||null===t,size:"s",onClick:()=>{t&&l.navigateToPrefilledEditor({id:"",timeRange:e,attributes:t},{openInNewTab:!0})}},n.i18n.translate("xpack.observability.expView.heading.openInLens",{defaultMessage:"Open in Lens"}))),r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButton,{fill:!0,iconType:"save",fullWidth:!1,isDisabled:!l.canUseEditor()||null===t,onClick:()=>{t&&u(!0)},size:"s"},n.i18n.translate("xpack.observability.expView.heading.saveLensVisualization",{defaultMessage:"Save"})))),s&&t&&r.a.createElement(c,{initialInput:t,onClose:()=>u(!1),onSave:()=>{}}))}var Ut=a(129);function Gt(e){const{setHeaderActionMenu:t,theme$:a}=Object(E.b)();return r.a.createElement(Ut.default,{setHeaderActionMenu:t,theme$:a},r.a.createElement(qt,e))}function Ht({saveAttributes:e}){const{services:{lens:t}}=Object(o.useKibana)(),a=Object(i.useRef)(null),n=Object(i.useRef)(null),[l,s]=Object(i.useState)("100vh"),{isEditMode:u}=Object(E.b)(),[d,p]=Object(i.useState)(null),{loadDataView:y,loading:v}=Object(g.b)(),{firstSeries:h,allSeries:w,lastRefresh:x,reportType:C,setChartTimeRangeContext:S}=Object(b.f)(),k=Object(m.c)(),O=Vt();Object(i.useEffect)((()=>{w.forEach((e=>{y({dataType:e.dataType})}))}),[w,y]),Object(i.useEffect)((()=>{p(k),e&&e(k)}),[JSON.stringify(null!=k?k:{}),x]),Object(i.useEffect)((()=>{(()=>{if(null!=a&&a.current&&n.current){const e=n.current.getBoundingClientRect().top;s(`calc(100vh - ${e+40}px)`)}})()}));const T=Object(i.useRef)(),[F,j]=Object(i.useState)(""),I=e=>{j((t=>e===t?"":e))},M=e=>{I(e),T.current&&T.current(e,"seriesPanel"===e?"right":"left")};return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{timeRange:O,lensAttributes:d}),r.a.createElement(Xt,{ref:n,height:l},r.a.createElement(Kt,{direction:"vertical",onToggleCollapsed:I},((e,t,{togglePanel:i})=>(T.current=(e,t)=>null==i?void 0:i(e,{direction:t}),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},r.a.createElement(f.EuiFlexItem,{grow:!1},r.a.createElement(f.EuiButtonEmpty,c()({size:"xs"},"chartPanel"===F?{iconType:"arrowRight"}:{iconType:"arrowDown"},{onClick:()=>M("chartPanel")}),"chartPanel"===F?Zt:Yt))),r.a.createElement(e,{initialSize:u?40:60,minSize:"30%",mode:"collapsible",id:"chartPanel",paddingSize:"s"},d?r.a.createElement(Dt,{setChartTimeRangeContext:S,lensAttributes:d}):r.a.createElement(zt,{series:h,loading:v,reportType:C})),r.a.createElement(e,{initialSize:u?60:40,minSize:"10%",mode:"main",id:"seriesPanel",color:"subdued",className:"paddingTopSmall"},r.a.createElement(It,{seriesBuilderRef:a,onSeriesPanelCollapse:M})))))),"seriesPanel"===F&&r.a.createElement(Qt,{onClick:()=>M("seriesPanel"),iconType:"arrowUp"},Jt))):r.a.createElement(f.EuiTitle,null,r.a.createElement("h2",null,ea))}const Xt=p.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-1r2o5cy-0"})(["min-height:400px;height:",";&&& > div{height:100%;}"],(e=>e.height)),Kt=p()(f.EuiResizableContainer).withConfig({displayName:"ResizableContainer",componentId:"sc-1r2o5cy-1"})(["height:100%;&&& .paddingTopSmall{padding-top:8px;}#chartPanel{> .euiPanel{padding-bottom:0;padding-top:0;}.expExpressionRenderer__expression{padding-bottom:0 !important;padding-top:0 !important;}}"]),Qt=p()(f.EuiButtonEmpty).withConfig({displayName:"ShowPreview",componentId:"sc-1r2o5cy-2"})(["position:absolute;bottom:34px;"]),Jt=n.i18n.translate("xpack.observability.overview.exploratoryView.preview",{defaultMessage:"Preview"}),Yt=n.i18n.translate("xpack.observability.overview.exploratoryView.hideChart",{defaultMessage:"Hide chart"}),Zt=n.i18n.translate("xpack.observability.overview.exploratoryView.showChart",{defaultMessage:"Show chart"}),ea=n.i18n.translate("xpack.observability.overview.exploratoryView.lensDisabled",{defaultMessage:"Lens app is not available, please enable Lens to use exploratory view."});var ta=a(50),aa=a(96),ia=a(23),ra=a.n(ia);function na(e){const t="lll",a=ra()(e.from).format(t),i=ra()(e.to).format(t),n=ra()(e.lastUpdated).format(t);return r.a.createElement(r.a.Fragment,null,e.lastUpdated&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,null,r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiText,{size:"xs"},r.a.createElement(ut.FormattedMessage,{id:"xpack.observability.expView.seriesBuilder.creationTime",defaultMessage:"Chart created"}))),r.a.createElement(f.EuiFlexItem,{grow:2},r.a.createElement(f.EuiText,{size:"xs"},n))),r.a.createElement(f.EuiSpacer,{size:"xs"})),e.to&&e.from&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.EuiFlexGroup,{alignItems:"center"},r.a.createElement(f.EuiFlexItem,null,r.a.createElement(f.EuiText,{size:"xs"},r.a.createElement(ut.FormattedMessage,{id:"xpack.observability.expView.seriesBuilder.creationContext",defaultMessage:"Displaying from"}))),r.a.createElement(f.EuiFlexItem,{grow:2},r.a.createElement(f.EuiText,{size:"xs"},a,"  ",i)))))}function la({chartTimeRange:e}){const{lastUpdated:t}=e||{},[a,n]=Object(i.useState)((()=>Date.now()));if(Object(i.useEffect)((()=>{const e=setInterval((()=>{n(Date.now())}),5e3);return()=>{clearInterval(e)}}),[]),Object(i.useEffect)((()=>{n(Date.now())}),[t]),!t)return null;const l=ra()().diff(ra()(t),"minute")>5,o=ra()().diff(ra()(t),"minute")>10;return r.a.createElement(f.EuiText,{color:o?"danger":l?"warning":"subdued",size:"s"},r.a.createElement(oa,{as:f.EuiToolTip,position:"top",content:r.a.createElement(na,e)},r.a.createElement(f.EuiIcon,{type:"iInCircle"}))," ",r.a.createElement(ut.FormattedMessage,{id:"xpack.observability.expView.lastUpdated.label",defaultMessage:"Last Updated: {updatedDate}",values:{updatedDate:ra()(t).from(a)}}))}const oa=p.a.div.withConfig({displayName:"StyledToolTipWrapper",componentId:"sc-yw5uw0-0"})(["min-width:30vw;"]);function sa(){const{setLastRefresh:e,chartTimeRangeContext:t}=Object(b.f)();return r.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},r.a.createElement(f.EuiFlexItem,{style:{textAlign:"right",minWidth:280}},r.a.createElement(la,{chartTimeRange:t})),r.a.createElement(f.EuiFlexItem,{style:{textAlign:"right"}},r.a.createElement(f.EuiButton,{iconType:"refresh",onClick:()=>e(Date.now())},ua)))}const ua=n.i18n.translate("xpack.observability.overview.exploratoryView.refresh",{defaultMessage:"Refresh"}),ca=n.i18n.translate("xpack.observability.expView.heading.label",{defaultMessage:"Explore data"});function da({app:e,saveAttributes:t,useSessionStorage:a=!1}){Object(q.useTrackPageview)({app:"observability-overview",path:"exploratory-view"}),Object(q.useTrackPageview)({app:"observability-overview",path:"exploratory-view",delay:15e3}),Object(ta.a)([{text:n.i18n.translate("xpack.observability.overview.exploratoryView",{defaultMessage:"Explore data"})}],e);const{ObservabilityPageTemplate:i}=Object(aa.a)(),{services:{uiSettings:u,notifications:c}}=Object(o.useKibana)(),d=Object(l.useHistory)(),p=a?Object(s.createSessionStorageStateStorage)():Object(s.createKbnUrlStateStorage)({history:d,useHash:u.get("state:storeInSessionStorage"),...Object(s.withNotifyOnErrors)(c.toasts)});return r.a.createElement(b.b,{storage:p},r.a.createElement(i,{pageHeader:{pageTitle:ca,rightSideItems:[r.a.createElement(sa,null)]}},r.a.createElement(g.a,null,r.a.createElement(Ht,{saveAttributes:t}))))}t.default=da},139:function(e,t,a){"use strict";a.r(t),a.d(t,"formatOptions",(function(){return p})),a.d(t,"SelectableUrlList",(function(){return f}));var i=a(0),r=a.n(i),n=a(7),l=a(1),o=a(124),s=a.n(o),u=a(88),c=a.n(u);const d={filterByUrl:l.i18n.translate("xpack.observability.filters.filterByUrl",{defaultMessage:"Filter by URL"}),getSearchResultsLabel:e=>l.i18n.translate("xpack.observability.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:e}}),topPages:l.i18n.translate("xpack.observability.filters.topPages",{defaultMessage:"Top pages"}),select:l.i18n.translate("xpack.observability.filters.select",{defaultMessage:"Select"}),url:l.i18n.translate("xpack.observability.filters.url",{defaultMessage:"Url"}),loadingResults:l.i18n.translate("xpack.observability.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:l.i18n.translate("xpack.observability.filters.url.noResults",{defaultMessage:"No results available"})},p=e=>e.map((e=>({title:e.label,...e,className:c()("euiSelectableTemplateSitewide__listItem",e.className)})));function f({data:e,loading:t,onInputChange:a,onSelectionChange:o,onSelectionApply:u,searchValue:c,popoverIsOpen:f,setPopoverIsOpen:b,initialValue:m,renderOption:g,rowHeight:y,hasChanged:v}){var h,E;const[w,x]=Object(i.useState)(null),C=Object(i.useRef)(null),S=p(null!==(h=e.items)&&void 0!==h?h:[]),k=()=>{b(!1)};s()("keydown",(e=>{"enter"===e.key.toLowerCase()&&(u(),b(!1))}),w),s()("escape",(()=>b(!1)),w);const O=r.a.createElement(n.EuiSelectableMessage,{style:{minHeight:300}},r.a.createElement(n.EuiLoadingSpinner,{size:"l"}),r.a.createElement("br",null),r.a.createElement("p",null,d.loadingResults)),T=r.a.createElement(n.EuiSelectableMessage,{style:{minHeight:300}},r.a.createElement("p",null,d.noResults)),F=c?d.getSearchResultsLabel(null!==(E=null==e?void 0:e.total)&&void 0!==E?E:0):d.topPages;function j(){return r.a.createElement(n.EuiPopoverTitle,{paddingSize:"s"},r.a.createElement(n.EuiFlexGroup,{ref:C,gutterSize:"xs"},r.a.createElement(n.EuiFlexItem,{style:{justifyContent:"center"}},t?r.a.createElement(n.EuiLoadingSpinner,null):F),r.a.createElement(n.EuiFlexItem,{grow:!1},r.a.createElement(n.EuiButtonIcon,{color:"text",onClick:()=>k(),"aria-label":l.i18n.translate("xpack.observability.search.url.close",{defaultMessage:"Close"}),iconType:"cross"}))))}return r.a.createElement(n.EuiSelectable,{searchable:!0,onChange:o,options:c!==(null==w?void 0:w.value)?[]:S,renderOption:g,singleSelection:!1,searchProps:{value:c,isClearable:!0,onClick:e=>{b(!0),w&&w.focus()},onInput:e=>{a(e.target.value),b(!0)},inputRef:x,placeholder:d.filterByUrl,"aria-label":d.filterByUrl},listProps:{rowHeight:y,showIcons:!0,onFocusBadge:!1},loadingMessage:O,emptyMessage:T,noMatchesMessage:T,allowExclusions:!0,isPreFiltered:c!==(null==w?void 0:w.value)},((e,t)=>{var a;return r.a.createElement(n.EuiPopover,{panelPaddingSize:"none",isOpen:f,display:"block",button:t,closePopover:k,style:{minWidth:400},anchorPosition:"downLeft",ownFocus:!1},r.a.createElement("div",{style:{width:null!==(a=null==w?void 0:w.getBoundingClientRect().width)&&void 0!==a?a:600,maxWidth:"100%"}},r.a.createElement(j,null),e,r.a.createElement(n.EuiPopoverFooter,{paddingSize:"s"},r.a.createElement(n.EuiFlexGroup,{style:{justifyContent:"flex-end"}},r.a.createElement(n.EuiFlexItem,{grow:!1},r.a.createElement(n.EuiButton,{fill:!0,size:"s",onClick:()=>{u(),k()},isDisabled:!v()},l.i18n.translate("xpack.observability.apply.label",{defaultMessage:"Apply"})))))))}))}t.default=f},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return m}));var i=a(2),r=a(0),n=a.n(r),l=a(19),o=a(89),s=a(10),u=a(32),c=a(24),d=a(101);const p=["apm","uptime","logs","infrastructure","alerts"],f=Object(r.createContext)({}),b=["apm","synthetics","infra_logs","infra_metrics","ux","alert"];function m({children:e}){const{http:t}=Object(s.useKibana)().services,[a,m]=Object(r.useState)(""),{absoluteStart:g,absoluteEnd:y}=Object(d.a)(),[v,h]=Object(r.useState)({}),E=Object(l.useRouteMatch)("/exploratory-view");Object(r.useEffect)((()=>{E||Object(o.asyncForEach)(b,(async e=>{var t,a,i,r,n;try{const l=({hasData:t,indices:a,serviceName:i})=>{h((r=>({...r,[e]:{hasData:t,...i?{serviceName:i}:{},...a?{indices:a}:{},status:c.a.SUCCESS}})))};switch(e){case"ux":const o={absoluteTime:{start:g,end:y}},s=await(null===(t=Object(u.a)(e))||void 0===t?void 0:t.hasData(o));l({hasData:null==s?void 0:s.hasData,indices:null==s?void 0:s.indices,serviceName:null==s?void 0:s.serviceName});break;case"synthetics":const c=await(null===(a=Object(u.a)(e))||void 0===a?void 0:a.hasData());l({hasData:null==c?void 0:c.hasData,indices:null==c?void 0:c.indices});break;case"apm":const d=await(null===(i=Object(u.a)(e))||void 0===i?void 0:i.hasData());l({hasData:null==d?void 0:d.hasData,indices:null==d?void 0:d.indices});break;case"infra_logs":const p=await(null===(r=Object(u.a)(e))||void 0===r?void 0:r.hasData());l({hasData:null==p?void 0:p.hasData,indices:null==p?void 0:p.indices});break;case"infra_metrics":const f=await(null===(n=Object(u.a)(e))||void 0===n?void 0:n.hasData());l({hasData:null==f?void 0:f.hasData,indices:null==f?void 0:f.indices})}}catch(t){h((t=>({...t,[e]:{hasData:void 0,status:c.a.FAILURE}})))}}))}),[E]),Object(r.useEffect)((()=>{!async function(){try{const e=await async function({http:e}){try{const{data:t=[]}=await e.get("/api/alerts/_find",{query:{page:1,per_page:20}})||{};return t.filter((({consumer:e})=>p.includes(e)))}catch(e){throw console.error("Error while fetching alerts",e),e}}({http:t});h((t=>({...t,alert:{hasData:e.length>0,status:c.a.SUCCESS}})))}catch(e){h((e=>({...e,alert:{hasData:void 0,status:c.a.FAILURE}})))}}()}),[a,t]);const w=b.every((e=>{var t;const a=null===(t=v[e])||void 0===t?void 0:t.status;return void 0!==a&&a!==c.a.LOADING})),x=Object.keys(v).some((e=>{var t;return!0===(null===(t=v[e])||void 0===t?void 0:t.hasData)}));return n.a.createElement(f.Provider,{value:{hasDataMap:v,hasAnyData:Object(i.isEmpty)(v)?void 0:x,isAllRequestsComplete:w,forceUpdate:a,onRefreshTimeRange:()=>{m(Object(i.uniqueId)())}},children:e})}},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a(7),r=a(1),n=a(0),l=a.n(n),o=a(10),s=a(20),u=a(46),c=a(14);var d=a(111);function p({appId:e,autoOpen:t,lensAttributes:a,owner:p=c.observabilityFeatureId,setAutoOpen:b,timeRange:m}){var g,y;const v=Object(o.useKibana)().services,{cases:h,application:{getUrlForApp:E},theme:w}=v,x=Object(n.useCallback)((t=>Object(o.toMountPoint)(l.a.createElement(f,{linkUrl:E(null!=e?e:c.observabilityAppId,{deepLinkId:s.CasesDeepLinkId.cases,path:Object(s.generateCaseViewPath)({detailName:t.id})})}),{theme$:null==w?void 0:w.theme$})),[e,E,null==w?void 0:w.theme$]),C=Object(d.b)(m.from),S=Object(d.b)(m.to,{roundUp:!0}),{onCaseClicked:k,isCasesOpen:O,setIsCasesOpen:T,isSaving:F}=(({lensAttributes:e,getToastText:t,timeRange:a,appId:i,owner:l=c.observabilityFeatureId})=>{const[o,d]=Object(n.useState)(!1),[p,f]=Object(n.useState)(!1),{http:b,application:{navigateToApp:m},notifications:{toasts:g},storage:y}=Object(u.a)().services,v=Object(n.useCallback)((n=>{n&&e?(f(!1),d(!0),async function(e,t,a,i,r){const n=`/api/cases/${null==t?void 0:t.id}/comments`,l={attributes:a,timeRange:i},o={comment:`!{lens${JSON.stringify(l)}}`,type:"user",owner:null!=r?r:c.observabilityFeatureId};return e.post(n,{body:JSON.stringify(o)})}(b,n,e,a,l).then((()=>{d(!1),g.addSuccess({title:r.i18n.translate("xpack.observability.expView.heading.addToCase.notification",{defaultMessage:"Successfully added visualization to the case: {caseTitle}",values:{caseTitle:n.title}}),text:t(n)},{toastLifeTimeMs:1e4})}),(e=>{g.addError(e,{title:r.i18n.translate("xpack.observability.expView.heading.addToCase.notification.error",{defaultMessage:"Failed to add visualization to the selected case."})})}))):(null==y||y.set(s.DRAFT_COMMENT_STORAGE_ID,{commentId:"description",comment:`!{lens${JSON.stringify({timeRange:a,attributes:e})}}`,position:"",caseTitle:"",caseTags:""}),m(null!=i?i:c.observabilityFeatureId,{deepLinkId:s.CasesDeepLinkId.casesCreate,openInNewTab:!0}))}),[i,t,b,e,m,l,y,a,g]);return{onCaseClicked:v,isSaving:o,isCasesOpen:p,setIsCasesOpen:f}})({lensAttributes:a,getToastText:x,timeRange:{from:null!==(g=null==C?void 0:C.toISOString())&&void 0!==g?g:"",to:null!==(y=null==S?void 0:S.toISOString())&&void 0!==y?y:""},appId:e,owner:p}),j={onRowClick:k,userCanCrud:!0,owner:[p],onClose:()=>{T(!1)}};return Object(n.useEffect)((()=>{t&&T(!0)}),[t,T]),Object(n.useEffect)((()=>{O||null==b||b(!1)}),[O,b]),l.a.createElement(l.a.Fragment,null,void 0===t&&l.a.createElement(i.EuiButtonEmpty,{size:"s",isLoading:F,isDisabled:null===a,onClick:()=>{a&&T(!0)}},r.i18n.translate("xpack.observability.expView.heading.addToCase",{defaultMessage:"Add to case"})),O&&a&&h.ui.getAllCasesSelectorModal(j))}function f({linkUrl:e}){return l.a.createElement(i.EuiFlexGroup,{justifyContent:"center"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiLink,{href:e,target:"_blank"},r.i18n.translate("xpack.observability.expView.heading.addToCase.notification.viewCase",{defaultMessage:"View case"}))))}},162:function(e,t,a){var i=a(163);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},163:function(e,t,a){e.exports=a(13)(990)},164:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),e.raw=t,e},e.exports.__esModule=!0,e.exports.default=e.exports},95:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"a",(function(){return b}));var i=a(0),r=a.n(i),n=a(31),l=a(35),o=(a(15),a(132));const s=Object(i.createContext)({});function u(e){return(null!=e?e:[]).map((e=>function(e){const{dt:t,op:a,st:i,bd:r,ft:n,time:l,rdf:o,mt:s,h:u,n:c,c:d,...p}=e;return{operationType:a,seriesType:i,breakdown:r,filters:n,time:l,reportDefinitions:o,dataType:t,selectedMetricField:s,hidden:u,name:c,color:d,...p}}(e)))}const c="sr",d="reportType";function p({children:e,storage:t}){const[a,p]=Object(i.useState)((()=>{var e;return u(null!==(e=t.get(c))&&void 0!==e?e:[])})),[f,b]=Object(i.useState)((()=>Date.now())),[m,g]=Object(i.useState)(),[y,v]=Object(i.useState)((()=>{var e;return null!==(e=t.get(d))&&void 0!==e?e:""})),[h,E]=Object(i.useState)(),w=Object(n.d)();Object(i.useEffect)((()=>{const e=null==a?void 0:a[0];E(e)}),[a,t]);const x=Object(i.useCallback)(((e,t)=>{p((a=>{const i=a.findIndex((e=>e.breakdown)),r=a.map(((a,r)=>r===e?{...t,breakdown:i===e||-1===i?t.breakdown:void 0}:a));return a.length===e?[...r,t]:[...r]}))}),[]),C=Object(i.useCallback)((e=>{p((t=>t.filter(((t,a)=>a!==e))))}),[]),S=Object(i.useCallback)((e=>a[e]),[a]),k={applyChanges:Object(i.useCallback)((e=>{const i=a.map((e=>Object(l.d)(e)));t.set(d,y),t.set(c,i),b(Date.now()),Object(o.a)(w,a,y),e&&e()}),[a,t,w,y]),storage:t,getSeries:S,setSeries:x,removeSeries:C,allSeries:a,lastRefresh:f,setLastRefresh:b,setReportType:v,reportType:y,chartTimeRangeContext:m,setChartTimeRangeContext:g,firstSeries:h};return r.a.createElement(s.Provider,{value:k},e)}function f(){return Object(i.useContext)(s)}const b="new-series"},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(0),r=a(115);function n(){return Object(i.useContext)(r.a)}},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return f}));var i=a(0),r=a.n(i),n=a(10),l=a(92),o=a(58),s=a(32),u=a(47),c=a(2);const d=Object(i.createContext)({});function p({children:e}){const[t,a]=Object(i.useState)({}),[p,f]=Object(i.useState)({}),[b,m]=Object(i.useState)({}),[g,y]=Object(i.useState)({}),{services:{dataViews:v}}=Object(n.useKibana)(),{dataViews:h}=Object(u.b)(),E=Object(i.useCallback)((async({dataType:e})=>{var i,r,n,u;if(void 0===g[e]&&!t[e]){a((t=>({...t,[e]:!0})));try{let t=!1,l="";switch(h[e]&&(l=h[e],t=!0),e){case"ux":case"synthetics":const a=await(null===(i=Object(s.a)(e))||void 0===i?void 0:i.hasData());t=Boolean(null==a?void 0:a.hasData),l=null==a?void 0:a.indices;break;case"infra_metrics":const o=await(null===(r=Object(s.a)(e))||void 0===r?void 0:r.hasData());t=Boolean(null==o?void 0:o.hasData),l=null==o?void 0:o.indices;break;case"infra_logs":const d=await(null===(n=Object(s.a)(e))||void 0===n?void 0:n.hasData());t=Boolean(null==d?void 0:d.hasData),l=null==d?void 0:d.indices;break;case"apm":case"mobile":const p=await Object(s.a)("apm").hasData();t=Boolean(null==p?void 0:p.hasData),u=null==p?void 0:p.indices,l=Object(c.uniq)([u.transaction,u.metric]).join(",")}if(y((a=>({...a,[e]:t}))),t&&l){const t=new o.a(v),a=await t.getDataView(e,l);f((t=>({...t,[e]:a})))}a((t=>({...t,[e]:!1})))}catch(t){(t instanceof l.DataViewInsufficientAccessError||"Forbidden"===t.body)&&m((a=>({...a,[e]:t}))),a((t=>({...t,[e]:!1})))}}}),[v,g,h,t]);return r.a.createElement(d.Provider,{value:{hasAppData:g,dataViews:p,loadDataView:E,dataViewErrors:b,loading:!!Object.values(t).find((e=>e))}},e)}const f=e=>{const{loading:t,hasAppData:a,loadDataView:r,dataViews:n,dataViewErrors:l}=Object(i.useContext)(d);return!e||null!=n&&n[e]||t||r({dataType:e}),Object(i.useMemo)((()=>({hasAppData:a,loading:t,dataViews:n,dataViewErrors:l,dataView:e?null==n?void 0:n[e]:void 0,hasData:e?null==a?void 0:a[e]:void 0,loadDataView:r})),[e,a,l,n,r,t])}},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(0),r=a(140);function n(){return Object(i.useContext)(r.a)}}}]);