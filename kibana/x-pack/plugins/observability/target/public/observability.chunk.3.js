/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[3,9,12],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(7),l=a(1),n=a(0),r=a.n(n);function s(){return r.a.createElement(i.EuiBetaBadge,{label:l.i18n.translate("xpack.observability.experimentalBadgeLabel",{defaultMessage:"Technical preview"}),tooltipContent:l.i18n.translate("xpack.observability.experimentalBadgeDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})})}},104:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(0),l=a(46),n=a(14);function r(){const[e,t]=Object(i.useState)(null),a=Object(l.a)().services.application.capabilities;return Object(i.useEffect)((()=>{var e,i;const l="boolean"==typeof(null===(e=a[n.casesFeatureId])||void 0===e?void 0:e.crud_cases)&&a[n.casesFeatureId].crud_cases,r="boolean"==typeof(null===(i=a[n.casesFeatureId])||void 0===i?void 0:i.read_cases)&&a[n.casesFeatureId].read_cases;t({crud:l,read:r})}),[a]),e}},106:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return b}));var i=a(7),l=a(0),n=a.n(l),r=a(97),s=a(110),o=a(55);function u({time:e,timeUnit:t="milliseconds"}){const a=Object(o.a)(e,t);return n.a.createElement(i.EuiToolTip,{content:a},n.a.createElement(n.a.Fragment,null,a))}var c=a(49),d=a(113),m=a(103),p=a(96);const b=({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value},g=({setFlyoutAlert:e})=>({columnId:t,data:a})=>{var l;if(!a)return null;const{observabilityRuleTypeRegistry:o}=Object(p.a)(),g=null===(l=b({data:a,fieldName:t}))||void 0===l?void 0:l.reduce((e=>e[0]));switch(t){case r.K:return g!==r.L&&g!==r.M?null:n.a.createElement(s.a,{alertStatus:g});case r.X:return n.a.createElement(u,{time:new Date(null!=g?g:"").getTime(),timeUnit:"milliseconds"});case r.b:return Object(c.a)(Number(g));case r.I:return n.a.createElement(d.a,{severityLevel:null!=g?g:void 0});case r.g:const t=a.reduce(((e,t)=>({...e,[t.field]:t.value})),{}),l=Object(m.a)(o)(t);return n.a.createElement(i.EuiLink,{href:"",onClick:()=>e&&e(l)},l.reason);default:return n.a.createElement(n.a.Fragment,null,g)}}},107:function(e,t,a){"use strict";var i,l=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),n=[];function r(e){for(var t=-1,a=0;a<n.length;a++)if(n[a].identifier===e){t=a;break}return t}function s(e,t){for(var a={},i=[],l=0;l<e.length;l++){var s=e[l],o=t.base?s[0]+t.base:s[0],u=a[o]||0,c="".concat(o," ").concat(u);a[o]=u+1;var d=r(c),m={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(n[d].references++,n[d].updater(m)):n.push({identifier:c,updater:g(m,t),references:1}),i.push(c)}return i}function o(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=a.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=l(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,a,i){var l=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,l);else{var n=document.createTextNode(l),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function m(e,t,a){var i=a.css,l=a.media,n=a.sourceMap;if(l?e.setAttribute("media",l):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,b=0;function g(e,t){var a,i,l;if(t.singleton){var n=b++;a=p||(p=o(t)),i=d.bind(null,a,n,!1),l=d.bind(null,a,n,!0)}else a=o(t),i=m.bind(null,a,t),l=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else l()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var l=r(a[i]);n[l].references--}for(var o=s(e,t),u=0;u<a.length;u++){var c=r(a[u]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}a=o}}}},108:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,i,l,n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var s=(a=r,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([s]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var l={};if(i)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(l[r]=!0)}for(var s=0;s<e.length;s++){var o=[].concat(e[s]);i&&l[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},112:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return A}));var i=a(18),l=a.n(i),n=a(97),r=a(7),s=a(22),o=a.n(s),u=a(0),c=a.n(u),d=a(2),m=a(10),p=a(86);const b=(e,t)=>t&&e[t]?{crud:"apm"===t?e[t]["alerting:save"]:e[t].save,read:"apm"===t?e[t]["alerting:show"]:e[t].show,loading:!1,featureId:t}:{crud:!1,read:!1,loading:!1,featureId:t};var g=a(106),E=a(14),y=a(104),f=a(96),v=a(36),x=a(103),h=a(100),k=a(116),T=a(1);const S=T.i18n.translate("xpack.observability.alerts.actions.addToCase",{defaultMessage:"Add to existing case"}),F=T.i18n.translate("xpack.observability.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}),w=T.i18n.translate("xpack.observability.alerts.actions.addToCaseDisabled",{defaultMessage:"Add to case is not supported for this selection"}),j=o.a.div.attrs((({className:e=""})=>({className:`siemEventsTable__thContent ${e}`}))).withConfig({displayName:"EventsThContent",componentId:"sc-9d5m0f-0"})(["font-size:",";font-weight:",";line-height:",";min-width:0;padding:",";text-align:",";width:",";> button.euiButtonIcon,> .euiToolTipAnchor > button.euiButtonIcon{margin-left:",";}"],(({theme:e})=>e.eui.euiFontSizeXS),(({theme:e})=>e.eui.euiFontWeightBold),(({theme:e})=>e.eui.euiLineHeight),(({theme:e})=>e.eui.paddingSizes.xs),(({textAlign:e})=>e),(({width:e})=>null!=e?`${e}px`:"100%"),(({theme:e})=>`-${e.eui.paddingSizes.xs}`)),O=[{columnHeaderType:"not-filtered",displayAsText:h.c.alertsTable.statusColumnDescription,id:n.K,initialWidth:110},{columnHeaderType:"not-filtered",displayAsText:h.c.alertsTable.lastUpdatedColumnDescription,id:n.X,initialWidth:230},{columnHeaderType:"not-filtered",displayAsText:h.c.alertsTable.durationColumnDescription,id:n.b,initialWidth:116},{columnHeaderType:"not-filtered",displayAsText:h.c.alertsTable.reasonColumnDescription,id:n.g,linkField:"*"}],C=[],M=[];function I({data:e,eventId:t,ecsData:a,setFlyoutAlert:i}){var l,n;const{observabilityRuleTypeRegistry:s}=Object(f.a)(),o=e.reduce(((e,t)=>({...e,[t.field]:t.value})),{}),[d,b]=Object(u.useState)(null),{cases:g,http:v}=Object(m.useKibana)().services,k=Object(u.useMemo)((()=>Object(x.a)(s)),[s])(o),T=Object(u.useCallback)((()=>{b(null)}),[]),w=Object(u.useCallback)((e=>{b((t=>t?null:e))}),[]),j=Object(y.a)(),O=null!==(l=k.fields["kibana.alert.rule.uuid"])&&void 0!==l?l:null,C=O?v.basePath.prepend(h.b.observability.ruleDetails(O)):null,M=Object(u.useMemo)((()=>{var t,i;return null!=a&&a._id?[{alertId:null!==(t=null==a?void 0:a._id)&&void 0!==t?t:"",index:null!==(i=null==a?void 0:a._index)&&void 0!==i?i:"",owner:E.observabilityFeatureId,type:p.CommentType.alert,rule:g.helpers.getRuleIdFromEvent({ecs:a,data:null!=e?e:[]})}]:[]}),[a,g.helpers,e]),I=g.hooks.getUseCasesAddToNewCaseFlyout(),L=g.hooks.getUseCasesAddToExistingCaseModal(),A=Object(u.useCallback)((()=>{I.open({attachments:M}),T()}),[I,M,T]),R=Object(u.useCallback)((()=>{L.open({attachments:M}),T()}),[M,T,L]),z=Object(u.useMemo)((()=>[...null!=j&&j.crud?[c.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",onClick:R,size:"s"},S),c.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",onClick:A,size:"s"},F)]:[],...C?[c.a.createElement(r.EuiContextMenuItem,{key:"viewRuleDetails","data-test-subj":"viewRuleDetails",href:C},h.c.alertsTable.viewRuleDetailsButtonText)]:[],c.a.createElement(r.EuiContextMenuItem,{key:"viewAlertDetails","data-test-subj":"viewAlertDetails",onClick:()=>{T(),i(k)}},h.c.alertsTable.viewAlertDetailsButtonText)]),[null==j?void 0:j.crud,R,A,C,k,i,T]),D=z.length<=0?h.c.alertsTable.notEnoughPermissions:h.c.alertsTable.moreActionsTextLabel;return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.EuiFlexGroup,{gutterSize:"none",responsive:!1},c.a.createElement(r.EuiFlexItem,null,c.a.createElement(r.EuiToolTip,{content:h.c.alertsTable.viewInAppTextLabel},c.a.createElement(r.EuiButtonIcon,{size:"s",href:v.basePath.prepend(null!==(n=k.link)&&void 0!==n?n:""),iconType:"eye",color:"text","aria-label":h.c.alertsTable.viewInAppTextLabel}))),c.a.createElement(r.EuiFlexItem,null,c.a.createElement(r.EuiPopover,{button:c.a.createElement(r.EuiToolTip,{content:D},c.a.createElement(r.EuiButtonIcon,{display:"empty",size:"s",color:"text",iconType:"boxesHorizontal","aria-label":D,onClick:()=>w(t),"data-test-subj":"alertsTableRowActionMore"})),isOpen:d===t,closePopover:T,panelPaddingSize:"none",anchorPosition:"downLeft"},c.a.createElement(r.EuiContextMenuPanel,{size:"s",items:z})))))}const L=["@timestamp","signal.rule.risk_score","signal.reason","kibana.alert.duration.us","kibana.alert.reason"];function A(e){const{indexNames:t,rangeFrom:a,rangeTo:i,kuery:r,setRefetch:s,stateStorageKey:o,storage:p,itemsPerPage:x}=e,{timelines:T,application:{capabilities:A}}=Object(m.useKibana)().services,[R,z]=Object(u.useState)(void 0),[D,P]=Object(u.useState)(p.get(o)),_=Object(y.a)(),B=Object(u.useCallback)((({ruleConsumer:e,ruleProducer:t})=>"alerts"===e&&t?b(A,t).crud:b(A,e).crud),[A]),[N,G]=Object(u.useState)([]);Object(u.useEffect)((()=>{if(D){var e;const t={...D,columns:null===(e=D.columns)||void 0===e?void 0:e.map((e=>Object(d.pick)(e,["columnHeaderType","displayAsText","id","initialWidth","linkField"])))};t!==p.get(o)&&p.set(o,t)}}),[D,o,p]);const V=Object(u.useCallback)((e=>{e.isDeleted&&G((t=>[...t,...e.eventIds]))}),[]),U=Object(u.useMemo)((()=>[{id:"expand",width:120,headerCellRender:()=>c.a.createElement(j,null,h.c.alertsTable.actionsTextLabel),rowCellRender:e=>c.a.createElement(I,l()({},e,{setEventsDeleted:V,setFlyoutAlert:z}))}]),[V]),$=Object(u.useCallback)((e=>{const t=Object(d.pick)(e.timelineById["standalone-t-grid"],["columns","sort","selectedEventIds"]);JSON.stringify(t)!==JSON.stringify(D)&&P(t)}),[D]),q=(({onClose:e,onSuccess:t}={})=>{var a;const{cases:i}=Object(m.useKibana)().services,l=Object(y.a)(),n=null!==(a=null==l?void 0:l.crud)&&void 0!==a&&a,r=i.hooks.getUseCasesAddToNewCaseFlyout({onClose:e,onSuccess:t}),s=i.hooks.getUseCasesAddToExistingCaseModal({onClose:e,onRowClick:t});return Object(u.useMemo)((()=>n?[{label:F,key:"attach-new-case","data-test-subj":"attach-new-case",disableOnQuery:!0,disabledLabel:w,onClick:e=>{const t=e?i.helpers.groupAlertsByRule(e,E.observabilityFeatureId):[];r.open({attachments:t})}},{label:S,key:"attach-existing-case",disableOnQuery:!0,disabledLabel:w,"data-test-subj":"attach-existing-case",onClick:e=>{const t=e?i.helpers.groupAlertsByRule(e,E.observabilityFeatureId):[];s.open({attachments:t})}}]:[]),[i.helpers,r,n,s])})(),H=Object(u.useMemo)((()=>({alertStatusActions:!1,customBulkActions:q})),[q]),K=Object(u.useMemo)((()=>{var e,l;return{appId:E.observabilityAppId,casesOwner:E.observabilityFeatureId,casePermissions:_,type:"standalone",columns:(null!==(e=null==D?void 0:D.columns)&&void 0!==e?e:O).map(k.a),deletedEventIds:N,disabledCellActions:L,end:i,filters:[],hasAlertsCrudPermissions:B,indexNames:t,itemsPerPage:x,itemsPerPageOptions:[10,25,50],loadingText:h.c.alertsTable.loadingTextLabel,footerText:h.c.alertsTable.footerTextLabel,onStateChange:$,query:{query:null!=r?r:"",language:"kuery"},renderCellValue:Object(g.b)({setFlyoutAlert:z}),rowRenderers:C,runtimeMappings:{},start:a,setRefetch:s,bulkActions:H,sort:null!==(l=null==D?void 0:D.sort)&&void 0!==l?l:[{columnId:"@timestamp",columnType:"date",sortDirection:"desc"}],queryFields:[n.b,n.d,n.e,n.g,n.j,n.t,n.K,n.O,n.J,n.X],leadingControlColumns:U,trailingControlColumns:M,unit:e=>h.c.alertsTable.showingAlertsTitle(e)}}),[_,null==D?void 0:D.columns,null==D?void 0:D.sort,N,i,B,t,x,$,r,a,s,H,U]),{observabilityRuleTypeRegistry:W}=Object(f.a)();return c.a.createElement(c.a.Fragment,null,R&&c.a.createElement(u.Suspense,{fallback:null},c.a.createElement(v.LazyAlertsFlyout,{alert:R,observabilityRuleTypeRegistry:W,onClose:()=>z(void 0)})),T.getTGrid(K))}},113:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(7),l=a(0),n=a.n(l);const r={critical:"danger",warning:"warning"};function s({severityLevel:e}){return e?n.a.createElement(i.EuiBadge,{color:e?r[e]:"default"},e):null}},116:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(97),l=a(100);const n=e=>e.id===i.g?{...e,displayAsText:l.c.alertsTable.reasonColumnDescription}:e.id===i.b?{...e,displayAsText:l.c.alertsTable.durationColumnDescription}:e.id===i.K?{...e,displayAsText:l.c.alertsTable.statusColumnDescription}:e.id===i.X?{...e,displayAsText:l.c.alertsTable.lastUpdatedColumnDescription}:e},119:function(e,t,a){"use strict";a.r(t),a.d(t,"AlertsFlyout",(function(){return g}));var i=a(7),l=a(97),n=a(26),r=a.n(n),s=a(0),o=a.n(s),u=a(10),c=a(49),d=a(103),m=a(110),p=a(102),b=a(100);function g({alert:e,alerts:t,isInApp:a=!1,observabilityRuleTypeRegistry:n,onClose:g,selectedAlertId:E}){var y,f,v,x;const h=Object(u.useUiSetting)("dateFormat"),{services:k}=Object(u.useKibana)(),{http:T}=k,S=null==T?void 0:T.basePath.prepend,F=Object(s.useMemo)((()=>{const e=Object(d.a)(n);return(null!=t?t:[]).map(e)}),[t,n]);let w=e;if(w||(w=null==F?void 0:F.find((e=>e.fields[l.O]===E))),!w)return null;const j=null!==(y=w.fields["kibana.alert.rule.uuid"])&&void 0!==y?y:null,O=j&&S?S(b.b.observability.ruleDetails(j)):null,C=[{title:b.c.alertsFlyout.statusLabel,description:o.a.createElement(m.a,{alertStatus:w.active?l.L:l.M})},{title:b.c.alertsFlyout.lastUpdatedLabel,description:o.a.createElement("span",{title:w.start.toString()},r()(w.start).format(h))},{title:b.c.alertsFlyout.durationLabel,description:Object(c.a)(w.fields[l.b],{extended:!0})},{title:b.c.alertsFlyout.expectedValueLabel,description:null!==(f=w.fields[l.d])&&void 0!==f?f:"-"},{title:b.c.alertsFlyout.actualValueLabel,description:null!==(v=w.fields[l.e])&&void 0!==v?v:"-"},{title:b.c.alertsFlyout.ruleTypeLabel,description:null!==(x=w.fields[l.j])&&void 0!==x?x:"-"}];return o.a.createElement(i.EuiFlyout,{onClose:g,size:"s","data-test-subj":"alertsFlyout"},o.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0},o.a.createElement(p.a,null),o.a.createElement(i.EuiSpacer,{size:"s"}),o.a.createElement(i.EuiTitle,{size:"m","data-test-subj":"alertsFlyoutTitle"},o.a.createElement("h2",null,w.fields[l.t]))),o.a.createElement(i.EuiFlyoutBody,null,o.a.createElement(i.EuiTitle,{size:"xs"},o.a.createElement("h4",null,b.c.alertsFlyout.reasonTitle)),o.a.createElement(i.EuiSpacer,{size:"s"}),o.a.createElement(i.EuiText,{size:"s"},w.reason),o.a.createElement(i.EuiSpacer,{size:"s"}),!!O&&o.a.createElement(i.EuiLink,{href:O,"data-test-subj":"viewRuleDetailsFlyout"},b.c.alertsFlyout.viewRulesDetailsLinkText),o.a.createElement(i.EuiHorizontalRule,{size:"full"}),o.a.createElement(i.EuiTitle,{size:"xs"},o.a.createElement("h4",null,b.c.alertsFlyout.documentSummaryTitle)),o.a.createElement(i.EuiSpacer,{size:"m"}),o.a.createElement(i.EuiDescriptionList,{compressed:!0,type:"responsiveColumn",listItems:C,titleProps:{"data-test-subj":"alertsFlyoutDescriptionListTitle"},descriptionProps:{"data-test-subj":"alertsFlyoutDescriptionListDescription"}})),w.link&&!a&&o.a.createElement(i.EuiFlyoutFooter,null,o.a.createElement(i.EuiFlexGroup,{justifyContent:"flexEnd"},o.a.createElement(i.EuiFlexItem,{grow:!1},o.a.createElement(i.EuiButton,{href:S&&S(w.link),"data-test-subj":"alertsFlyoutViewInAppButton",fill:!0},b.c.alertsFlyout.viewInAppButtonText)))))}t.default=g},127:function(e,t,a){"use strict";a.d(t,"b",(function(){return x})),a.d(t,"a",(function(){return h}));var i=a(0),l=a(1),n=a(7),r=a(137),s=a(47),o=a(3),u=a(30),c=a(35),d=a(8),m=a(118),p=a(11);const b={"host.os.platform":o.O,"host.os.full":o.w,"service.version":o.Z,"network.carrier.icc":o.f,"network.carrier.name":o.g,"network.connection_type":o.i,"labels.device_model":o.o,"url.full":o.hb};var g=a(96);const E=a(54).j,y={[u.b.UX]:l.i18n.translate("xpack.observability.overview.exploratoryView.uxLabel",{defaultMessage:"User experience (RUM)"}),[u.b.SYNTHETICS]:l.i18n.translate("xpack.observability.overview.exploratoryView.syntheticsLabel",{defaultMessage:"Synthetics monitoring"}),[u.b.METRICS]:l.i18n.translate("xpack.observability.overview.exploratoryView.metricsLabel",{defaultMessage:"Metrics"}),[u.b.LOGS]:l.i18n.translate("xpack.observability.overview.exploratoryView.logsLabel",{defaultMessage:"Logs"}),[u.b.MOBILE]:l.i18n.translate("xpack.observability.overview.exploratoryView.mobileExperienceLabel",{defaultMessage:"Mobile experience"})},f=[{id:u.b.SYNTHETICS,label:y[u.b.SYNTHETICS]},{id:u.b.UX,label:y[u.b.UX]},{id:u.b.LOGS,label:y[u.b.LOGS]},{id:u.b.MOBILE,label:y[u.b.MOBILE]}],v=[{reportType:"kpi-over-time",label:o.y},{reportType:"data-distribution",label:o.S},{reportType:"core-web-vitals",label:o.j},{reportType:"device-data-distribution",label:o.m}],x={[u.b.UX]:[function({dataView:e}){return{defaultSeriesType:"bar_stacked",seriesTypes:[],reportType:u.m.KPI,xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:u.l,operationType:"median"}],hasOperationType:!1,filterFields:[d.o,d.s,d.a,d.q,{field:d.r,nested:d.u},u.f],breakdownFields:[d.r,d.s,d.a,d.q,u.h,u.e],baseFilters:[...Object(c.b)(d.n,"page-load",e),...Object(c.b)(d.h,"transaction",e)],labels:{...u.d,[d.j]:o.ib},definitionFields:[d.j,d.i],metricOptions:[{field:u.j,id:u.j,label:o.R},{label:o.Q,field:d.l,id:d.l,columnType:u.g},{label:o.c,field:d.m,id:d.m,columnType:u.g},{label:o.t,field:d.c,id:d.c,columnType:u.g},{label:o.eb,field:d.k,id:d.k,columnType:u.g},{label:o.A,field:d.e,id:d.e,columnType:u.g},{label:o.u,field:d.d,id:d.d,columnType:u.g},{label:o.h,field:d.b,id:d.b,columnType:u.g}]}},function({dataView:e}){return{reportType:u.m.DISTRIBUTION,defaultSeriesType:"line",seriesTypes:[],xAxisColumn:{sourceField:u.l},yAxisColumns:[{sourceField:u.k,label:o.P}],hasOperationType:!1,filterFields:[{field:d.o,isNegated:!1},d.s,d.a,d.q,{field:d.r,nested:d.u},u.f],breakdownFields:[d.r,d.s,d.a,d.q,d.j],definitionFields:[d.j,d.i],metricOptions:[{label:o.Q,id:d.l,field:d.l},{label:o.c,id:d.m,field:d.m},{label:o.t,id:d.c,field:d.c},{label:o.eb,id:d.k,field:d.k},{label:o.A,id:d.e,field:d.e},{label:o.u,id:d.d,field:d.d},{label:o.h,id:d.b,field:d.b}],baseFilters:[...Object(c.b)(d.n,"page-load",e),...Object(c.b)(d.h,"transaction",e)],labels:{...u.d,[d.j]:o.ib,[d.l]:o.Q},query:{query:"transaction.duration.us < 60000000",language:"kuery"}}},function({dataView:e}){const t=Object(n.euiPaletteForStatus)(3);return{defaultSeriesType:"bar_horizontal_percentage_stacked",reportType:u.m.CORE_WEB_VITAL,seriesTypes:["bar_horizontal_percentage_stacked"],xAxisColumn:{sourceField:u.o},yAxisColumns:[{sourceField:u.l,label:"Good"},{sourceField:u.l,label:"Average"},{sourceField:u.l,label:"Poor"}],hasOperationType:!1,filterFields:[{field:d.o,isNegated:!1},d.j,{field:d.s,nested:d.t},d.a,d.q,{field:d.r,nested:d.u},u.f],breakdownFields:[d.j,d.r,d.s,d.a,d.q,d.p],baseFilters:[...Object(c.b)(d.n,"page-load",e),...Object(c.b)(d.h,"transaction",e)],labels:{...u.d,[d.j]:"Web Application"},definitionFields:[d.j,d.i],metricOptions:[{id:d.e,label:o.A,columnType:u.c,columnFilters:[{language:"kuery",query:`${d.e} < 2500`},{language:"kuery",query:`${d.e} > 2500 and ${d.e} < 4000`},{language:"kuery",query:`${d.e} > 4000`}]},{label:o.u,id:d.d,columnType:u.c,columnFilters:[{language:"kuery",query:`${d.d} < 100`},{language:"kuery",query:`${d.d} > 100 and ${d.d} < 300`},{language:"kuery",query:`${d.d} > 300`}]},{label:o.h,id:d.b,columnType:u.c,columnFilters:[{language:"kuery",query:`${d.b} < 0.1`},{language:"kuery",query:`${d.b} > 0.1 and ${d.b} < 0.25`},{language:"kuery",query:`${d.b} > 0.25`}]}],yConfig:[{color:t[0],forAccessor:"y-axis-column"},{color:t[1],forAccessor:"y-axis-column-1"},{color:t[2],forAccessor:"y-axis-column-2"}],query:{query:'transaction.type: "page-load"',language:"kuery"}}}],[u.b.SYNTHETICS]:[m.a,function({series:e,dataView:t}){return{reportType:u.m.DISTRIBUTION,defaultSeriesType:(null==e?void 0:e.seriesType)||"line",seriesTypes:[],xAxisColumn:{sourceField:u.l},yAxisColumns:[{sourceField:u.k,label:o.T}],hasOperationType:!1,filterFields:["monitor.type","observer.geo.name","tags","url.full"],breakdownFields:["observer.geo.name","monitor.name","monitor.id","monitor.type","tags","url.port"],baseFilters:[],definitionFields:[{field:"monitor.name",nested:"synthetics.step.name.keyword",singleSelection:!0},{field:"url.full",filters:Object(c.a)("summary.up",t)}],metricOptions:[{label:o.G,id:p.a,field:p.a},{label:o.A,field:p.f,id:p.f},{label:o.t,field:p.e,id:p.e},{label:o.l,field:p.c,id:p.c},{label:o.p,field:p.d,id:p.d},{label:o.h,field:p.b,id:p.b}],labels:{...u.d,"monitor.duration.us":o.G}}}],[u.b.MOBILE]:[function({dataView:e}){return{reportType:u.m.KPI,defaultSeriesType:"line",seriesTypes:["line","bar","area"],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:u.l,operationType:"median"}],hasOperationType:!0,filterFields:[...Object.keys(b),u.f],breakdownFields:Object.keys(b),baseFilters:[...Object(c.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...u.d,...b,[d.l]:o.W,[d.j]:o.F,[d.g]:o.cb,[d.f]:o.k},definitionFields:[d.j,d.i],metricOptions:[{label:o.W,field:d.l,id:d.l,columnType:u.g},{field:u.j,id:u.j,label:o.fb,columnFilters:[{language:"kuery",query:`${d.h}: transaction`}],timeScale:"m"},{label:o.cb,field:d.g,id:d.g,columnType:u.g,columnFilters:[{language:"kuery",query:`${d.h}: metric`}]},{label:o.k,field:d.f,id:d.f,columnType:u.g,columnFilters:[{language:"kuery",query:`${d.h}: metric`}]}]}},function({dataView:e}){return{reportType:u.m.DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["line","bar"],xAxisColumn:{sourceField:u.l},yAxisColumns:[{sourceField:u.j}],hasOperationType:!1,filterFields:[...Object.keys(b),u.f],breakdownFields:Object.keys(b),baseFilters:[...Object(c.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...u.d,...b,[d.j]:o.F},definitionFields:[d.j,d.i],metricOptions:[{label:o.W,field:d.l,id:d.l,columnFilters:[{language:"kuery",query:`${d.h}: transaction`}]},{label:o.cb,field:d.g,id:d.g,columnFilters:[{language:"kuery",query:`${d.h}: metric`}]},{label:o.k,field:d.f,id:d.f,columnFilters:[{language:"kuery",query:`${d.h}: metric`}]}]}},function({dataView:e}){return{reportType:u.m.DEVICE_DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["bar","bar_horizontal"],xAxisColumn:{sourceField:u.o},yAxisColumns:[{sourceField:u.l,operationType:"unique_count"}],hasOperationType:!1,filterFields:[...Object.keys(b),u.f],breakdownFields:Object.keys(b),baseFilters:[...Object(c.b)("agent.name","iOS/swift",e),...Object(c.b)("processor.event","transaction",e)],labels:{...u.d,...b,[d.j]:o.F},definitionFields:[d.j],metricOptions:[{field:"labels.device_id",id:"labels.device_id",label:o.L}]}}],[u.b.LOGS]:[function(e){return{reportType:u.m.KPI,defaultSeriesType:"bar",seriesTypes:[],xAxisColumn:{label:l.i18n.translate("xpack.observability.exploratoryView.logs.logRateXAxisLabel",{defaultMessage:"Timestamp"}),dataType:"date",operationType:"date_histogram",sourceField:"@timestamp",isBucketed:!0,scale:"interval"},yAxisColumns:[{label:l.i18n.translate("xpack.observability.exploratoryView.logs.logRateYAxisLabel",{defaultMessage:"Log rate per minute"}),dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:u.j,timeScale:"m"}],hasOperationType:!1,filterFields:["agent.type","service.type","event.dataset"],breakdownFields:["agent.hostname","service.type","event.dataset"],baseFilters:[],definitionFields:["agent.hostname","service.type","event.dataset"],textDefinitionFields:["message"],metricOptions:[{label:o.C,field:u.j,id:E,columnType:"unique_count"}],labels:{...u.d}}}]};function h(){const{appMountParameters:e}=Object(g.a)();return i.createElement(n.EuiErrorBoundary,null,i.createElement(s.a,{reportTypes:v,dataTypes:f,dataViews:{},reportConfigMap:x,setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},i.createElement(r.ExploratoryViewPage,null)))}},131:function(e,t,a){"use strict";a.r(t),a.d(t,"DatePicker",(function(){return o}));var i=a(7),l=a(0),n=a.n(l),r=a(43),s=a(101);function o({rangeFrom:e,rangeTo:t,refreshPaused:a,refreshInterval:o,onTimeRangeRefresh:u}){const{updateTimeRange:c,updateRefreshInterval:d}=Object(s.a)(),m=Object(r.b)(r.a.TIMEPICKER_QUICK_RANGES).map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))),p=Object(l.useCallback)((e=>{u&&u(e),c(e)}),[u,c]);return n.a.createElement(i.EuiSuperDatePicker,{start:e,end:t,onTimeChange:p,onRefresh:p,isPaused:a,refreshInterval:o,onRefreshChange:function({isPaused:e,refreshInterval:t}){d({isPaused:e,interval:t})},commonlyUsedRanges:m})}t.default=o},138:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return $}));var i=a(0),l=a.n(i),n=a(7),r=a(1);const s=r.i18n.translate("xpack.observability.ux.coreVitals.noData",{defaultMessage:"No data is available."}),o=r.i18n.translate("xpack.observability.ux.coreVitals.lcp",{defaultMessage:"Largest contentful paint"}),u=r.i18n.translate("xpack.observability.ux.coreVitals.fip",{defaultMessage:"First input delay"}),c=r.i18n.translate("xpack.observability.ux.coreVitals.cls",{defaultMessage:"Cumulative layout shift"}),d=r.i18n.translate("xpack.observability.ux.coreVitals.poor",{defaultMessage:"a poor"}),m=r.i18n.translate("xpack.observability.ux.coreVitals.good",{defaultMessage:"a good"}),p=r.i18n.translate("xpack.observability.ux.coreVitals.average",{defaultMessage:"an average"}),b=r.i18n.translate("xpack.observability.ux.coreVitals.legends.poor",{defaultMessage:"Poor"}),g=r.i18n.translate("xpack.observability.ux.coreVitals.legends.good",{defaultMessage:"Good"}),E=r.i18n.translate("xpack.observability.ux.coreVitals.legends.needsImprovement",{defaultMessage:"Needs improvement"}),y=r.i18n.translate("xpack.observability.ux.coreVitals.more",{defaultMessage:"more"}),f=r.i18n.translate("xpack.observability.ux.coreVitals.less",{defaultMessage:"less"}),v=r.i18n.translate("xpack.observability.ux.coreVitals.is",{defaultMessage:"is"}),x=r.i18n.translate("xpack.observability.ux.coreVitals.takes",{defaultMessage:"takes"}),h=r.i18n.translate("xpack.observability.ux.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),k=r.i18n.translate("xpack.observability.ux.coreVitals.fid.help",{defaultMessage:"First input delay measures interactivity. To provide a good user experience, pages should have a FID of less than 100 milliseconds."}),T=r.i18n.translate("xpack.observability.ux.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."});var S=a(22),F=a.n(S),w=a(80),j=a(87),O=a(10);const C=F()(n.EuiHealth).withConfig({displayName:"PaletteLegend",componentId:"sc-r7v41l-0"})(["&:hover{cursor:pointer;text-decoration:underline;}"]),M=F.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-r7v41l-1"})(["&:hover{background-color:",";}"],(e=>e.darkMode?j.euiDarkVars.euiColorLightestShade:j.euiLightVars.euiColorLightestShade));function I({ranks:e,title:t,onItemHover:a,thresholds:i,isCls:r}){const[s]=Object(O.useUiSetting$)("theme:darkMode"),o=Object(n.euiPaletteForStatus)(3),u=[g,E,b];return l.a.createElement(n.EuiFlexGroup,{responsive:!1,gutterSize:"s"},o.map(((o,c)=>l.a.createElement(n.EuiFlexItem,{key:c,grow:!1,onMouseEnter:()=>{a(c)},onMouseLeave:()=>{a(null)}},l.a.createElement(n.EuiToolTip,{content:R(i,c,t,e[c],r),position:"bottom"},l.a.createElement(M,{darkMode:s},l.a.createElement(C,{color:o},l.a.createElement(n.EuiText,{size:"xs"},l.a.createElement(w.FormattedMessage,{id:"xpack.observability.ux.coreVitals.paletteLegend.rankPercentage",defaultMessage:"{labelsInd} ({ranksInd}%)",values:{labelsInd:u[c],ranksInd:null==e?void 0:e[c]}})))))))))}const L=F.a.div.withConfig({displayName:"ColoredSpan",componentId:"sc-tpi8wf-0"})(["height:16px;width:100%;cursor:pointer;"]);function A({hexCode:e,inFocus:t,percentage:a,tooltip:i,position:r}){const s=((e,t,a,i)=>{let l=0===e||100===i,n=2===e||100===i;100===i&&(l=!0,n=!0);const r={backgroundColor:a,opacity:t?.3:1};let s="";return l&&(s="4px 0 0 4px"),n&&(s="0 4px 4px 0"),l&&n&&(s="4px"),r.borderRadius=s,r})(r,t,e,a);return l.a.createElement(n.EuiFlexItem,{key:e,grow:!1,style:{width:a+"%"}},l.a.createElement(n.EuiToolTip,{content:i},l.a.createElement(L,{style:s})))}function R(e,t,a,i,l){const n=0===t,s=2===t,o=!n&&!s;return r.i18n.translate("xpack.observability.ux.dashboard.webVitals.palette.tooltip",{defaultMessage:"{percentage} % of users have {exp} experience because the {title} {isOrTakes} {moreOrLess} than {value}{averageMessage}.",values:{percentage:i,isOrTakes:l?v:x,title:null==a?void 0:a.toLowerCase(),exp:n?m:s?d:p,moreOrLess:s||o?y:f,value:n||o?e.good:e.bad,averageMessage:o?r.i18n.translate("xpack.observability.ux.coreVitals.averageMessage",{defaultMessage:" and less than {bad}",values:{bad:e.bad}}):""}})}function z({loading:e,title:t,value:a,thresholds:r,ranks:o=[100,0,0],isCls:u,helpLabel:c}){const d=Object(n.euiPaletteForStatus)(3),[m,p]=Object(i.useState)(null),b=o.indexOf(Math.max(...o));return a||e?l.a.createElement(l.a.Fragment,null,l.a.createElement(n.EuiStat,{"aria-label":`${t} ${a}`,titleSize:"s",title:null!=a?a:"",description:l.a.createElement(l.a.Fragment,null,t,l.a.createElement(n.EuiIconTip,{content:c,type:"questionInCircle"})),titleColor:d[b],isLoading:e}),l.a.createElement(n.EuiSpacer,{size:"s"}),l.a.createElement(n.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",style:{maxWidth:350},responsive:!1},d.map(((e,a)=>l.a.createElement(A,{hexCode:e,key:e,position:a,inFocus:m!==a&&null!==m,percentage:o[a],tooltip:R(r,a,t,o[a],u)})))),l.a.createElement(n.EuiSpacer,{size:"s"}),l.a.createElement(I,{ranks:o,thresholds:r,title:t,onItemHover:e=>{p(e)},isCls:u})):l.a.createElement(n.EuiCard,{title:t,isDisabled:!0,description:s})}const D=r.i18n.translate("xpack.observability.ux.coreWebVitals",{defaultMessage:"Core web vitals"}),P=r.i18n.translate("xpack.observability.ux.coreWebVitals.browser.support",{defaultMessage:"browser support for core web vitals"});function _({loading:e,coreVitalPages:t,totalPageViews:a=0,displayTrafficMetric:s}){const[o,u]=Object(i.useState)(!1),[c,d]=Object(i.useState)(!1),m=r.i18n.translate("xpack.observability.ux.dashboard.webCoreVitals.helpAriaLabel",{defaultMessage:"help"});return l.a.createElement(n.EuiFlexGroup,{gutterSize:"none"},l.a.createElement(n.EuiFlexItem,null,l.a.createElement(n.EuiTitle,{size:"xs"},l.a.createElement("h3",null,D,l.a.createElement(n.EuiPopover,{isOpen:o,button:l.a.createElement(n.EuiButtonIcon,{"aria-label":m,onClick:()=>u(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>u(!1)},l.a.createElement("div",null,l.a.createElement(n.EuiText,null,l.a.createElement(w.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.help",defaultMessage:"Learn more about"})," ",l.a.createElement(n.EuiLink,{href:"https://web.dev/vitals/",external:!0,target:"_blank"},D))))))),s&&a>0&&l.a.createElement(n.EuiFlexItem,{grow:!1},e?l.a.createElement(n.EuiLoadingSpinner,null):l.a.createElement(n.EuiText,{size:"s"},l.a.createElement(w.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.traffic",defaultMessage:"{trafficPerc} of the traffic represented",values:{trafficPerc:l.a.createElement("strong",null," ",((t||0)/a*100).toFixed(0),"%")}}),l.a.createElement(n.EuiPopover,{isOpen:c,button:l.a.createElement(n.EuiButtonIcon,{"aria-label":m,onClick:()=>d(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>d(!1)},l.a.createElement("div",null,l.a.createElement(n.EuiText,null,l.a.createElement(w.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.browser.help",defaultMessage:"Learn more about"})," ",l.a.createElement(n.EuiLink,{href:"https://github.com/GoogleChrome/web-vitals#browser-support",external:!0,target:"_blank"},P)))))))}const B=r.i18n.translate("xpack.observability.ux.coreWebVitals.service",{defaultMessage:"Service"}),N=r.i18n.translate("xpack.observability.ux.service.help",{defaultMessage:"The RUM service with the most traffic is selected"});function G({name:e}){return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.EuiText,{size:"s"},B,l.a.createElement(n.EuiIconTip,{color:"text","aria-label":N,type:"questionInCircle",content:N})),l.a.createElement(n.EuiTitle,{size:"s"},l.a.createElement("h3",null,e)))}function V(e){return null==e?null:function(e,t="MicroSec"){const a=Number(null!=e?e:0)/("MicroSec"===t?1e3:1);return a<1e3?a.toFixed(0)+" ms":(a/1e3).toFixed(2)+" s"}(e,"ms")}const U={LCP:{good:"2.5s",bad:"4.0s"},FID:{good:"100ms",bad:"300ms"},CLS:{good:"0.1",bad:"0.25"}};function $({data:e,loading:t,displayServiceName:a,serviceName:l,totalPageViews:r,displayTrafficMetric:s=!1}){var d;const{lcp:m,lcpRanks:p,fid:b,fidRanks:g,cls:E,clsRanks:y,coreVitalPages:f}=e||{};return i.createElement(i.Fragment,null,i.createElement(_,{loading:t,coreVitalPages:f,totalPageViews:r,displayTrafficMetric:s}),i.createElement(n.EuiSpacer,{size:"s"}),a&&i.createElement(G,{name:l}),i.createElement(n.EuiSpacer,{size:"s"}),i.createElement(n.EuiFlexGroup,{gutterSize:"xl",justifyContent:"spaceBetween",wrap:!0},i.createElement(n.EuiFlexItem,{style:{flexBasis:380}},i.createElement(z,{title:o,value:V(m),ranks:p,loading:t,thresholds:U.LCP,helpLabel:h})),i.createElement(n.EuiFlexItem,{style:{flexBasis:380}},i.createElement(z,{title:u,value:V(b),ranks:g,loading:t,thresholds:U.FID,helpLabel:k})),i.createElement(n.EuiFlexItem,{style:{flexBasis:380}},i.createElement(z,{title:c,value:null!==(d=null==E?void 0:E.toFixed(3))&&void 0!==d?d:null,ranks:y,loading:t,thresholds:U.CLS,isCls:!0,helpLabel:T}))))}},144:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(145);case"v8light":return a(147)}},145:function(e,t,a){var i=a(107),l=a(146);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},146:function(e,t,a){(t=a(108)(!1)).push([e.i,".kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiOverlayMask--belowHeader{top:72px}.kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiFlyout,.kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiCollapsibleNav{top:72px;height:calc(100% - 72px)}\n",""]),e.exports=t},147:function(e,t,a){var i=a(107),l=a(148);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},148:function(e,t,a){(t=a(108)(!1)).push([e.i,".kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiOverlayMask--belowHeader{top:72px}.kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiFlyout,.kbnBody.euiBody--headerIsFixed.euiDataGrid__restrictBody .euiCollapsibleNav{top:72px;height:calc(100% - 72px)}\n",""]),e.exports=t},149:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(73),l=a(0),n=i.__importDefault(a(150));t.default=function(e,t){void 0===t&&(t=[]);var a=n.default(e,t,{loading:!0}),i=a[0],r=a[1];return l.useEffect((function(){r()}),[r]),i}},150:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(73),l=a(0),n=i.__importDefault(a(151));t.default=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a={loading:!1});var r=l.useRef(0),s=n.default(),o=l.useState(a),u=o[0],c=o[1],d=l.useCallback((function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var l=++r.current;return c((function(e){return i.__assign(i.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&l===r.current&&c({value:e,loading:!1}),e}),(function(e){return s()&&l===r.current&&c({error:e,loading:!1}),e}))}),t);return[u,d]}},151:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},152:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(153);case"v8light":return a(155)}},153:function(e,t,a){var i=a(107),l=a(154);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},154:function(e,t,a){(t=a(108)(!1)).push([e.i,"@media only screen and (max-width: 574px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 768px) and (max-width: 991px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 992px) and (max-width: 1199px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 768px) and (max-width: 991px){.obsLanding__title{max-width:50%}}@media only screen and (min-width: 992px) and (max-width: 1199px){.obsLanding__title{max-width:50%}}@media only screen and (min-width: 1200px){.obsLanding__title{max-width:50%}}\n",""]),e.exports=t},155:function(e,t,a){var i=a(107),l=a(156);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},156:function(e,t,a){(t=a(108)(!1)).push([e.i,"@media only screen and (max-width: 574px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 768px) and (max-width: 991px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 992px) and (max-width: 1199px){.obsLanding__appSection .euiFlexItem{flex-basis:100% !important}}@media only screen and (min-width: 768px) and (max-width: 991px){.obsLanding__title{max-width:50%}}@media only screen and (min-width: 992px) and (max-width: 1199px){.obsLanding__title{max-width:50%}}@media only screen and (min-width: 1200px){.obsLanding__title{max-width:50%}}\n",""]),e.exports=t},157:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(158);case"v8light":return a(160)}},158:function(e,t,a){var i=a(107),l=a(159);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},159:function(e,t,a){(t=a(108)(!1)).push([e.i,".obsNewsFeed__itemImg{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.175),0 1.9px 4px rgba(0,0,0,0.125),0 4.5px 10px rgba(0,0,0,0.125)}\n",""]),e.exports=t},160:function(e,t,a){var i=a(107),l=a(161);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);i(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},161:function(e,t,a){(t=a(108)(!1)).push([e.i,".obsNewsFeed__itemImg{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.07),0 1.9px 4px rgba(0,0,0,0.05),0 4.5px 10px rgba(0,0,0,0.05)}\n",""]),e.exports=t},171:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return ci}));var i=a(1),l=a(0),n=a.n(l),r=a(84),s=a.n(r),o=a(19),u=a(9),c=a(48),d=a(10),m=a(25),p=a(52),b=a(140),g=a(115),E=a(109),y=a(105),f=a(120),v=a(90),x=a(14),h=a(46);const k=x.observabilityFeatureId,T=x.casesPath;var S=a(96),F=a(36),w=a(2);a(119),a(106),a(113);var j=a(7);i.i18n.translate("xpack.observability.alerts.workflowStatusFilter.openButtonLabel",{defaultMessage:"Open"}),i.i18n.translate("xpack.observability.alerts.workflowStatusFilter.acknowledgedButtonLabel",{defaultMessage:"Acknowledged"}),i.i18n.translate("xpack.observability.alerts.workflowStatusFilter.closedButtonLabel",{defaultMessage:"Closed"});var O=a(56),C=a(85),M=a(100);function I({dynamicIndexPatterns:e,rangeFrom:t,rangeTo:a,onQueryChange:i,query:r}){const s=Object(l.useMemo)((()=>new O.TimeHistory(new m.Storage(localStorage))),[]),[o,u]=Object(l.useState)("kuery"),c=Object(l.useMemo)((()=>e.map((e=>{var t,a;return{title:null!==(t=e.title)&&void 0!==t?t:"",id:null!==(a=e.id)&&void 0!==a?a:"",fields:e.fields}}))),[e]);return n.a.createElement(C.SearchBar,{indexPatterns:c,placeholder:M.c.alertsSearchBar.placeholder,query:{query:null!=r?r:"",language:o},timeHistory:s,dateRangeFrom:t,dateRangeTo:a,onRefresh:({dateRange:e})=>{i({dateRange:e,query:r})},onQuerySubmit:({dateRange:e,query:t})=>{var a;i({dateRange:e,query:"string"==typeof(null==t?void 0:t.query)?t.query:""}),u(null!==(a=null==t?void 0:t.language)&&void 0!==a?a:"kuery")},displayStyle:"inPage"})}var L=a(80);const A="xpack.observability.alert.ack.experimental.message";function R(){const[e,t]=Object(l.useState)((()=>{try{const e=localStorage.getItem(A);return e&&!0===JSON.parse(e)}catch{return!1}}));return n.a.createElement(n.a.Fragment,null,!e&&n.a.createElement(j.EuiCallOut,{"data-test-subj":"o11yExperimentalDisclaimer",title:i.i18n.translate("xpack.observability.alertsDisclaimerTitle",{defaultMessage:"Technical preview"}),color:"warning"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.alertsDisclaimerText",defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but features in technical preview are not subject to the support SLA of official GA features. Provide {feedback}.",values:{feedback:n.a.createElement(j.EuiLink,{href:"https://discuss.elastic.co/c/observability/82",target:"_blank"},i.i18n.translate("xpack.observability.alertsDisclaimerLinkText",{defaultMessage:"feedback"}))}}),n.a.createElement(j.EuiSpacer,{size:"l"}),n.a.createElement(j.EuiButton,{"data-test-subj":"o11yExperimentalDisclaimerDismissBtn",color:"warning",onClick:()=>{t(!0),localStorage.setItem(A,"true")},tabIndex:0},i.i18n.translate("xpack.observability.alertsDisclaimerDismissMessage",{defaultMessage:"Dismiss message"}))))}a(91);const z=i.i18n.translate("xpack.observability.hoverActions.filterForValueButtonLabel",{defaultMessage:"Filter in"});n.a.memo((({Component:e,field:t,value:a,addToQuery:i})=>{const r=Object(l.useMemo)((()=>`${t}${null!=a?`: "${a}"`:""}`),[t,a]),s=Object(l.useCallback)((()=>{i(r)}),[r,i]);return Object(l.useMemo)((()=>e?n.a.createElement(e,{"aria-label":z,"data-test-subj":"filterForValue",iconType:"plusInCircle",onClick:s,title:z},z):n.a.createElement(j.EuiButtonIcon,{"aria-label":z,className:"timelines__hoverActionButton","data-test-subj":"filterForValue",iconSize:"s",iconType:"plusInCircle",onClick:s})),[e,s])})).displayName="FilterForValueButton",i.i18n.translate("xpack.observability.hoverActions.filterForValue",{defaultMessage:"Filter for value"});var D=a(103),P=a(97);const _={status:"",query:"",label:i.i18n.translate("xpack.observability.alerts.alertStatusFilter.showAll",{defaultMessage:"Show all"})},B={status:P.L,query:`${P.K}: "${P.L}"`,label:i.i18n.translate("xpack.observability.alerts.alertStatusFilter.active",{defaultMessage:"Active"})},N={status:P.M,query:`${P.K}: "${P.M}"`,label:i.i18n.translate("xpack.observability.alerts.alertStatusFilter.recovered",{defaultMessage:"Recovered"})},G=[{id:_.status,label:_.label,value:_.query,"data-test-subj":"alert-status-filter-show-all-button"},{id:B.status,label:B.label,value:B.query,"data-test-subj":"alert-status-filter-active-button"},{id:N.status,label:N.label,value:N.query,"data-test-subj":"alert-status-filter-recovered-button"}];function V({status:e,onChange:t}){return n.a.createElement(j.EuiButtonGroup,{legend:"Filter by",color:"primary",options:G,idSelected:e,onChange:t})}var U=a(149),$=a.n(U),q=a(81),H=a(104),K=a(102),W=a(50),J=a(24),Q=a(65);const X=[];function Y(){const{data:e=X}=Object(J.b)((({signal:e})=>Object(Q.a)("GET /api/observability/rules/alerts/dynamic_index_pattern",{signal:e,params:{query:{namespace:"default",registrationContexts:["observability.apm","observability.logs","observability.metrics","observability.uptime"]}}})),[]);return e}var Z=a(99);function ee(){const{services:e}=Object(d.useKibana)();return e.data.query.timefilter.timefilter}function te({docsLink:e,basePath:t,hasData:a}){if(!1===a)return{solution:i.i18n.translate("xpack.observability.noDataConfig.solutionName",{defaultMessage:"Observability"}),actions:{elasticAgent:{title:i.i18n.translate("xpack.observability.noDataConfig.beatsCard.title",{defaultMessage:"Add integrations"}),description:i.i18n.translate("xpack.observability.noDataConfig.beatsCard.description",{defaultMessage:"Use Beats and APM agents to send observability data to Elasticsearch. We make it easy with support for many popular systems, apps, and languages."}),href:t.prepend("/app/integrations/browse")}},docsLink:e}}var ae=a(129);function ie(){const{appMountParameters:{setHeaderActionMenu:e}}=Object(S.a)(),{http:t,theme:a}=Object(d.useKibana)().services;return n.a.createElement(ae.default,{setHeaderActionMenu:e,theme$:a.theme$},n.a.createElement(j.EuiHeaderLinks,null,n.a.createElement(j.EuiHeaderLink,{color:"primary",href:t.basePath.prepend("/app/integrations/browse"),iconType:"indexOpen"},le)))}const le=i.i18n.translate("xpack.observability.home.addData",{defaultMessage:"Add integrations"});function ne(){const{ObservabilityPageTemplate:e}=Object(S.a)();return n.a.createElement(e,{template:"centeredContent",showSolutionNav:!1},n.a.createElement(ie,null),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiLoadingSpinner,{size:"xl"})),n.a.createElement(j.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},n.a.createElement(j.EuiText,null,re))))}const re=i.i18n.translate("xpack.observability.overview.loadingObservability",{defaultMessage:"Loading Observability"});var se=a(112);const oe={rangeFrom:"now-15m",rangeTo:"now",kuery:""},ue=Object(m.createStateContainer)(oe,{setRangeFrom:e=>t=>({...e,rangeFrom:t}),setRangeTo:e=>t=>({...e,rangeTo:t}),setKuery:e=>t=>({...e,kuery:t})}),{Provider:ce,useContainer:de}=Object(m.createStateContainerReactHelpers)();a(144);const me=c.euiStyled.div`
  border-right: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
  height: 100%;
`,pe=Object(c.euiStyled)(j.EuiStat)`
  .euiText {
    line-height: 1;
  }
`,be=({condition:e,wrap:t,children:a})=>e?t(a):a,ge=(e,t,a)=>{const l=(e,a)=>{const i=e[a];let l=`${t}?_a=(lastResponse:!(),status:!())`;if(i>0)switch(a){case"error":l=`${t}?_a=(lastResponse:!(error),status:!())`;break;case"snoozed":case"disabled":l=`${t}?_a=(lastResponse:!(),status:!(${a}))`}return l},r=n.a.createElement(be,{condition:e.disabled>0,wrap:t=>n.a.createElement(j.EuiButtonEmpty,{href:l(e,"disabled")},t)},n.a.createElement(pe,{title:e.disabled,description:i.i18n.translate("xpack.observability.alerts.ruleStats.disabled",{defaultMessage:"Disabled"}),color:"primary",titleColor:e.disabled>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statDisabled"})),s=n.a.createElement(be,{condition:e.muted+e.snoozed>0,wrap:t=>n.a.createElement(j.EuiButtonEmpty,{href:l(e,"snoozed")},t)},n.a.createElement(pe,{title:e.muted+e.snoozed,description:i.i18n.translate("xpack.observability.alerts.ruleStats.muted",{defaultMessage:"Snoozed"}),color:"primary",titleColor:e.muted+e.snoozed>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statMuted"})),o=n.a.createElement(be,{condition:e.error>0,wrap:t=>n.a.createElement(j.EuiButtonEmpty,{href:l(e,"error")},t)},n.a.createElement(pe,{title:e.error,description:i.i18n.translate("xpack.observability.alerts.ruleStats.errors",{defaultMessage:"Errors"}),color:"primary",titleColor:e.error>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statErrors"}));return[n.a.createElement(pe,{title:e.total,description:i.i18n.translate("xpack.observability.alerts.ruleStats.ruleCount",{defaultMessage:"Rule count"}),color:"primary",titleSize:"xs",isLoading:a,"data-test-subj":"statRuleCount"}),r,s,o,n.a.createElement(me,null),n.a.createElement(j.EuiButtonEmpty,{"data-test-subj":"manageRulesPageButton",href:t},i.i18n.translate("xpack.observability.alerts.manageRulesButtonLabel",{defaultMessage:"Manage Rules"}))].reverse()},Ee=e=>e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),ye=[],fe=new RegExp(`\\s*${Ee(P.K)}\\s*:\\s*"(.*?|\\*?)"`),ve=new RegExp(`\\s*and\\s*${Ee(P.K)}\\s*:\\s*(".+?"|\\*?)|${Ee(P.K)}\\s*:\\s*(".+?"|\\*?)`,"gm");function xe(){var e,t;const{ObservabilityPageTemplate:a,config:r,observabilityRuleTypeRegistry:s}=Object(S.a)(),[u,c]=Object(l.useState)(""),p=Object(l.useRef)(),b=ee(),{rangeFrom:g,setRangeFrom:E,rangeTo:y,setRangeTo:f,kuery:v,setKuery:h}=function(){const e=de();!function(e){const t=Object(o.useHistory)(),a=ee();Object(l.useEffect)((()=>{const i=Object(m.createKbnUrlStateStorage)({history:t,useHash:!1,useHashQuery:!1}),{start:l,stop:n}=function(e,t){return Object(m.syncState)({storageKey:"_a",stateContainer:{...e,set:t=>{e.set({...oe,...t})}},stateStorage:t})}(e,i);return l(),function(e,t,a){const i=a.get("_a");if(i){const e={...oe,...i};t.set(e)}else if(e.isTimeTouched()){const{from:a,to:i}=e.getTime(),l={...oe,rangeFrom:a,rangeTo:i};t.set(l)}else t.set(oe);a.set("_a",t.get())}(a,e,i),n}),[e,t,a])}(e);const{setRangeFrom:t,setRangeTo:a,setKuery:i}=e.transitions,{rangeFrom:n,rangeTo:r,kuery:s}=Object(m.useContainerSelector)(e,(e=>e));return{rangeFrom:n,setRangeFrom:t,rangeTo:r,setRangeTo:a,kuery:s,setKuery:i}}(),{cases:k,dataViews:T,docLinks:F,http:w,notifications:{toasts:O}}=Object(d.useKibana)().services,[C,M]=Object(l.useState)(!1),[L,A]=Object(l.useState)({total:0,disabled:0,muted:0,error:0,snoozed:0});Object(l.useEffect)((()=>{B(v)}),[v]),Object(W.a)([{text:i.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"})}]);const z=Y();Object(l.useEffect)((()=>{!async function(){M(!0);try{const e=await Object(q.loadRuleAggregations)({http:w,typesFilter:s.list()}),{ruleExecutionStatus:t,ruleMutedStatus:a,ruleEnabledStatus:i,ruleSnoozedStatus:l}=e;if(t&&a&&i&&l){const e=Object.values(t).reduce(((e,t)=>e+t),0),{disabled:n}=i,{muted:r}=a,{error:s}=t,{snoozed:o}=l;A({...L,total:e,disabled:n,muted:r,error:s,snoozed:o})}M(!1)}catch(e){O.addDanger({title:i.i18n.translate("xpack.observability.alerts.ruleStats.loadError",{defaultMessage:"Unable to load rule stats"})}),M(!1)}}()}),[]);const D=r.unsafe.rules.enabled?w.basePath.prepend("/app/observability/alerts/rules"):w.basePath.prepend("/app/management/insightsAndAlerting/triggersActions/rules"),P=$()((async()=>0===z.length?[]:[{id:"dynamic-observability-alerts-table-index-pattern",title:z.join(","),fields:await T.getFieldsForWildcard({pattern:z.join(","),allowNoIndex:!0})}]),[z]),_=Object(l.useCallback)((({dateRange:e,query:t})=>{if(g===e.from&&y===e.to&&v===(null!=t?t:""))return p.current&&p.current();b.setTime(e),E(e.from),f(e.to),h(t),B(t)}),[g,E,y,f,v,h,b]),B=e=>{const[,t]=fe.exec(e)||[];c(t?t.toLowerCase():"")},N=Object(l.useCallback)(((e,t)=>{c(e);let a=v;a=""===v?t:`${v.replace(ve,"")} and ${t}`,_({dateRange:{from:g,to:y},query:a.replace(/^\s*and\s*|\s*and\s*$/gm,"")})}),[v,_,g,y]),G=Object(l.useCallback)((e=>{p.current=e}),[]),{hasAnyData:U,isAllRequestsComplete:J}=Object(Z.a)(),Q=!0===U||!1===J&&void 0,X=k.ui.getCasesContext(),ae=Object(H.a)();if(!U&&!J)return n.a.createElement(ne,null);const ie=te({hasData:Q,basePath:w.basePath,docsLink:F.links.observability.guide});return n.a.createElement(a,{noDataConfig:ie,"data-test-subj":ie?"noDataPage":void 0,pageHeader:{pageTitle:n.a.createElement(n.a.Fragment,null,i.i18n.translate("xpack.observability.alertsTitle",{defaultMessage:"Alerts"})," ",n.a.createElement(K.a,null)),rightSideItems:ge(L,D,C)}},n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(R,null)),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(I,{dynamicIndexPatterns:null!==(e=P.value)&&void 0!==e?e:ye,rangeFrom:g,rangeTo:y,query:v,onQueryChange:_})),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(V,{status:u,onChange:N})))),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(X,{owner:[x.observabilityFeatureId],userCanCrud:null!==(t=null==ae?void 0:ae.crud)&&void 0!==t&&t,features:{alerts:{sync:!1}}},n.a.createElement(se.a,{indexNames:z,rangeFrom:g,rangeTo:y,kuery:v,setRefetch:G,stateStorageKey:"xpack.observability.alert.tableState",storage:new m.Storage(window.localStorage),itemsPerPage:50})))))}function he(){return n.a.createElement(ce,{value:ue},n.a.createElement(xe,null))}const ke=({paramsForApiCall:e,initialDataState:t,executeApiCall:a,shouldExecuteApiCall:i})=>{const{http:n}=Object(h.a)().services,[r,s]=Object(l.useState)(!1),[o,u]=Object(l.useState)(t),{fetch:c,cancel:d}=Object(l.useMemo)((()=>{const t=new AbortController;let l=!1;return{fetch:async()=>{if(i(e)){s(!0);const i=await a(e,t,n);l||(s(!1),u(i))}},cancel:()=>{l=!0,t.abort()}}}),[a,n,e,i]);return Object(l.useEffect)((()=>(c(),()=>{d()})),[c,d]),{loading:r,data:o}},Te=async(e,t,a)=>{const{id:i,ruleType:l}=e;try{const e=await a.get("/internal/rac/alerts",{query:{id:i},signal:t.signal});if(void 0!==e)return Object(D.a)(l)(e)}catch(e){}return null},Se=e=>{const t=Object(l.useMemo)((()=>je(e)),[e]),a=Object(l.useCallback)((e=>e.length>0),[]),{loading:i,data:n}=ke({paramsForApiCall:t,initialDataState:void 0,executeApiCall:Fe,shouldExecuteApiCall:a});return[i,null!=n?n:{}]},Fe=async(e,t,a)=>{try{const i=await a.post("/internal/rac/alerts/find",{body:JSON.stringify({query:{ids:{values:e}},track_total_hits:!1,size:1e4}),signal:t.signal});if(i)return we(i)}catch(e){}},we=e=>e.hits.hits.reduce(((e,{_id:t,_index:a,_source:i})=>({...e,[t]:{_id:t,_index:a,...i}})),{}),je=e=>e.filter((e=>!Object(w.isEmpty)(e))),Oe=n.a.memo((({userCanCrud:e})=>{const{cases:t,application:{getUrlForApp:a,navigateToApp:i}}=Object(h.a)().services,{observabilityRuleTypeRegistry:r}=Object(S.a)(),[s,o]=Object(l.useState)(""),u=Object(l.useCallback)((()=>{o("")}),[]),[c,d]=(e=>{const{observabilityRuleTypeRegistry:t}=Object(S.a)(),a=Object(l.useMemo)((()=>({id:e,ruleType:t})),[e,t]),i=Object(l.useCallback)((e=>!Object(w.isEmpty)(e.id)),[]),{loading:n,data:r}=ke({paramsForApiCall:a,initialDataState:null,executeApiCall:Te,shouldExecuteApiCall:i});return[n,r]})(s);return n.a.createElement(n.a.Fragment,null,!1===c&&d&&""!==s&&n.a.createElement(l.Suspense,{fallback:null},n.a.createElement(F.LazyAlertsFlyout,{alert:d,observabilityRuleTypeRegistry:r,onClose:u})),t.ui.getCases({basePath:T,userCanCrud:e,owner:[k],features:{alerts:{sync:!1}},useFetchAlertData:Se,showAlertDetails:e=>{o(e)},ruleDetailsNavigation:{href:e=>a("management",{path:`/insightsAndAlerting/triggersActions/rule/${e}`}),onClick:async(e,t)=>(null!=t&&t.preventDefault(),i("management",{path:`/insightsAndAlerting/triggersActions/rule/${e}`}))}}))}));Oe.displayName="Cases";var Ce=a(18),Me=a.n(Ce),Ie=a(22),Le=a.n(Ie);const Ae=Le()(j.EuiEmptyPrompt).withConfig({displayName:"EmptyPrompt",componentId:"sc-lbahp1-0"})(["align-self:center;max-width:60em;"]);Ae.displayName="EmptyPrompt";const Re=n.a.memo((({actions:e,message:t,title:a,...i})=>{const r=Object.keys(e),s=Object(l.useMemo)((()=>Object.values(e).filter((e=>e.label&&e.url)).map((({icon:e,label:t,target:a,url:i,descriptionTitle:l,description:s,onClick:o,fill:u=!0},c)=>null!=l||null!=s?n.a.createElement(j.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${r[c]}`},n.a.createElement(j.EuiCard,{title:null!=l&&l,description:null!=s&&s,footer:n.a.createElement(j.EuiButton,{href:i,onClick:o,iconType:e,target:a,fill:u,"data-test-subj":`emptyPageAction-${r[c]}`},t)})):n.a.createElement(j.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${r[c]}`},n.a.createElement(j.EuiButton,{href:i,onClick:o,iconType:e,target:a,"data-test-subj":`emptyPageAction-${r[c]}`},t))))),[e,r]);return n.a.createElement(Ae,Me()({iconType:"casesApp",title:n.a.createElement("h2",null,a),body:t&&n.a.createElement("p",null,t),actions:n.a.createElement(j.EuiFlexGroup,{justifyContent:"center"},s)},i))}));Re.displayName="EmptyPageComponent";const ze=n.a.memo(Re);ze.displayName="EmptyPage";const De=i.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsTitle",{defaultMessage:"Kibana feature privileges required"}),Pe=i.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsMessage",{defaultMessage:"To view cases, you must have privileges for the Cases feature in the Kibana space. For more information, contact your Kibana administrator."}),_e=i.i18n.translate("xpack.observability.cases.caseView.goToDocumentationButton",{defaultMessage:"View documentation"}),Be=n.a.memo((()=>{const e=Object(h.a)().services.docLinks,t=Object(l.useMemo)((()=>({savedObject:{icon:"documents",label:_e,url:`${e.ELASTIC_WEBSITE_URL}guide/en/security/${e.DOC_LINK_VERSION}s`,target:"_blank"}})),[e]);return n.a.createElement(ze,{actions:t,message:Pe,"data-test-subj":"noFeaturePermissions",title:De})}));Be.displayName="CaseSavedObjectNoPermissions";const Ne=n.a.memo((()=>{var e;const t=Object(H.a)(),{docLinks:a,http:i}=Object(d.useKibana)().services,{ObservabilityPageTemplate:l}=Object(S.a)(),{hasAnyData:r,isAllRequestsComplete:s}=Object(Z.a)();if(!r&&!s)return n.a.createElement(ne,null);const o=te({hasData:!0===r||!1===s&&void 0,basePath:i.basePath,docsLink:a.links.observability.guide});return null==t||null!=t&&t.read?n.a.createElement(l,{"data-test-subj":o?"noDataPage":void 0,noDataConfig:o},n.a.createElement(Oe,{userCanCrud:null!==(e=null==t?void 0:t.crud)&&void 0!==e&&e})):n.a.createElement(Be,null)}));function Ge(){const e=Object(o.useHistory)(),{hasAnyData:t,isAllRequestsComplete:a}=Object(Z.a)();return Object(l.useEffect)((()=>{!0===t?e.replace({pathname:"/overview"}):!1===t&&!0===a&&e.replace({pathname:"/landing"})}),[t,a,e]),n.a.createElement(ne,null)}Ne.displayName="CasesPage";var Ve=a(31);function Ue(){Object(Ve.c)({app:"observability-overview",path:"landing"}),Object(Ve.c)({app:"observability-overview",path:"landing",delay:15e3}),Object(W.a)([{text:i.i18n.translate("xpack.observability.breadcrumbs.landingLinkText",{defaultMessage:"Getting started"})}]);const{http:e,docLinks:t}=Object(d.useKibana)().services,{ObservabilityPageTemplate:a}=Object(S.a)(),l=te({hasData:!1,basePath:e.basePath,docsLink:t.links.observability.guide});return n.a.createElement(a,{noDataConfig:l,restrictWidth:!0,showSolutionNav:!1})}function $e({section:e}){return n.a.createElement(j.EuiEmptyPrompt,{style:{maxWidth:"none"},title:n.a.createElement("h2",null,e.title),titleSize:"xs",body:n.a.createElement(j.EuiText,{color:"default"},e.description),actions:n.a.createElement(n.a.Fragment,null,e.linkTitle&&n.a.createElement(j.EuiButton,{size:"s",color:"primary",fill:!0,href:e.href,target:e.target,"data-test-subj":`empty-${e.id}`},e.linkTitle))})}function qe(){const{http:e}=Object(d.useKibana)().services,t=Object(l.useContext)(Ie.ThemeContext),{hasDataMap:a}=Object(Z.a)(),r=(({http:e})=>[{id:"infra_logs",title:i.i18n.translate("xpack.observability.emptySection.apps.logs.title",{defaultMessage:"Logs"}),icon:"logoLogging",description:i.i18n.translate("xpack.observability.emptySection.apps.logs.description",{defaultMessage:"Fast, easy, and scalable centralized log monitoring with out-of-the-box support for common data sources."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.logs.link",{defaultMessage:"Install Filebeat"}),href:e.basePath.prepend("/app/home#/tutorial_directory/logging")},{id:"apm",title:i.i18n.translate("xpack.observability.emptySection.apps.apm.title",{defaultMessage:"APM"}),icon:"logoObservability",description:i.i18n.translate("xpack.observability.emptySection.apps.apm.description",{defaultMessage:"Get deeper visibility into your applications with extensive support for popular languages, OpenTelemetry, and distributed tracing."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.apm.link",{defaultMessage:"Install Agent"}),href:e.basePath.prepend("/app/home#/tutorial/apm")},{id:"infra_metrics",title:i.i18n.translate("xpack.observability.emptySection.apps.metrics.title",{defaultMessage:"Metrics"}),icon:"logoMetrics",description:i.i18n.translate("xpack.observability.emptySection.apps.metrics.description",{defaultMessage:"Stream, visualize, and analyze your infrastructure metrics."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.metrics.link",{defaultMessage:"Install Metricbeat"}),href:e.basePath.prepend("/app/home#/tutorial_directory/metrics")},{id:"synthetics",title:i.i18n.translate("xpack.observability.emptySection.apps.uptime.title",{defaultMessage:"Uptime"}),icon:"logoUptime",description:i.i18n.translate("xpack.observability.emptySection.apps.uptime.description",{defaultMessage:"Proactively monitor the availability and functionality of user journeys."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.uptime.link",{defaultMessage:"Install Heartbeat"}),href:e.basePath.prepend("/app/home#/tutorial/uptimeMonitors")},{id:"ux",title:i.i18n.translate("xpack.observability.emptySection.apps.ux.title",{defaultMessage:"User Experience"}),icon:"logoObservability",description:i.i18n.translate("xpack.observability.emptySection.apps.ux.description",{defaultMessage:"Collect, measure, and analyze performance data that reflects real-world user experiences."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.ux.link",{defaultMessage:"Install RUM Agent"}),href:e.basePath.prepend("/app/home#/tutorial/apm")},{id:"alert",title:i.i18n.translate("xpack.observability.emptySection.apps.alert.title",{defaultMessage:"No alerts found."}),icon:"watchesApp",description:i.i18n.translate("xpack.observability.emptySection.apps.alert.description",{defaultMessage:"Detect complex conditions within Observability and trigger actions when those conditions are met."}),linkTitle:i.i18n.translate("xpack.observability.emptySection.apps.alert.link",{defaultMessage:"Create rule"}),href:e.basePath.prepend("/app/management/insightsAndAlerting/triggersActions/alerts")}])({http:e}).filter((({id:e})=>{const t=a[e];return!(!t||t.status!==J.a.FAILURE&&t.hasData)}));return n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiFlexGrid,{columns:r.length>2?2:1,gutterSize:"s"},r.map((e=>n.a.createElement(j.EuiFlexItem,{key:e.id,style:{border:`${t.eui.euiBorderEditable}`,borderRadius:`${t.eui.euiBorderRadius}`}},n.a.createElement($e,{section:e}))))))}function He({items:e}){return n.a.createElement(j.EuiErrorBoundary,null,n.a.createElement(j.EuiFlexGrid,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiTitle,{size:"xs"},n.a.createElement("h4",null,i.i18n.translate("xpack.observability.news.title",{defaultMessage:"What's new"})))),e.map(((e,t)=>n.a.createElement(j.EuiFlexItem,{key:t,grow:!1},n.a.createElement(Ke,{item:e}))))))}function Ke({item:e}){var t;const a=Object(l.useContext)(Ie.ThemeContext);return n.a.createElement(j.EuiPanel,{hasBorder:!0},n.a.createElement(j.EuiFlexGrid,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiTitle,{size:"xxs"},n.a.createElement("h4",null,e.title.en))),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFlexGroup,{gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiText,{size:"s",color:"subdued"},(r=e.description.en,128,Object(w.truncate)(r,{length:128})))),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiText,{size:"s"},n.a.createElement(j.EuiLink,{href:e.link_url.en,target:"_blank",external:!0},i.i18n.translate("xpack.observability.news.readFullStory",{defaultMessage:"Read full story"})))))),(null===(t=e.image_url)||void 0===t?void 0:t.en)&&n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement("img",{"data-test-subj":"newsImage",style:{border:a.eui.euiBorderThin},width:48,height:48,alt:e.title.en,src:e.image_url.en,className:"obsNewsFeed__itemImg"}))))));var r}a(152),a(157);const We=[{iconType:"documents",label:i.i18n.translate("xpack.observability.resources.documentation",{defaultMessage:"Documentation"}),href:"https://ela.st/observability-documentation"},{iconType:"editorComment",label:i.i18n.translate("xpack.observability.resources.forum",{defaultMessage:"Discuss Forum"}),href:"https://ela.st/observability-discuss"},{iconType:"play",label:i.i18n.translate("xpack.observability.resources.quick_start",{defaultMessage:"Quick Start Videos"}),href:"https://ela.st/observability-quick-starts"},{iconType:"training",label:i.i18n.translate("xpack.observability.resources.training",{defaultMessage:"Free Observability Course"}),href:"https://ela.st/observability-training"}];function Je(){return n.a.createElement(j.EuiFlexGrid,{direction:"column"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiTitle,{size:"xs"},n.a.createElement("h4",null,i.i18n.translate("xpack.observability.resources.title",{defaultMessage:"Resources"})))),n.a.createElement(j.EuiListGroup,{flush:!0,listItems:We,"data-test-subj":"listGroup",size:"s"}))}var Qe=a(131),Xe=a(23),Ye=a.n(Xe);const Ze=Ye.a.duration,et=[[Ze(500,"ms"),Ze(100,"ms")],[Ze(5,"second"),Ze(1,"second")],[Ze(7.5,"second"),Ze(5,"second")],[Ze(15,"second"),Ze(10,"second")],[Ze(45,"second"),Ze(30,"second")],[Ze(3,"minute"),Ze(1,"minute")],[Ze(9,"minute"),Ze(5,"minute")],[Ze(20,"minute"),Ze(10,"minute")],[Ze(45,"minute"),Ze(30,"minute")],[Ze(2,"hour"),Ze(1,"hour")],[Ze(6,"hour"),Ze(3,"hour")],[Ze(24,"hour"),Ze(12,"hour")],[Ze(1,"week"),Ze(1,"d")],[Ze(3,"week"),Ze(1,"week")],[Ze(1,"year"),Ze(1,"month")],[1/0,Ze(1,"year")]].slice(0).reverse();function tt(e,t,a){return(i,l)=>{const n=function(i,l){const n=l/i;let r=null;for(let i=0;i<e.length;i++){const l=e[i],s=t(l[0],l[1],n);if(null==s){if(!a)continue;if(r)return r;break}if(!a)return s;r=s}const s=Math.max(Math.floor(n),1);return Ye.a.duration(s,"ms")}(i,l);if(n)return Ye.a.duration(n._data)}}const at={near:tt(et,(function(e,t,a){if(e>a)return t}),!0),lessThan:tt(et,(function(e,t,a){if(t<a)return t})),atLeast:tt(et,(function(e,t,a){if(t<=a)return t}))};function it(e,t){return Ye.a.duration(e,t).asSeconds()}const lt={ms:it(1,"millisecond"),s:it(1,"second"),m:it(1,"minute"),h:it(1,"hour"),d:it(1,"day"),w:it(1,"week"),M:it(1,"month"),y:it(1,"year")};var nt=a(82),rt=a(33),st=a.n(rt),ot=a(101);function ut(){return n.a.createElement(j.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiText,{color:"subdued"},i.i18n.translate("xpack.observability.section.errorPanel",{defaultMessage:"An error happened when trying to fetch data. Please try again"}))))}function ct({title:e,appLink:t,children:a,hasError:i,showExperimentalBadge:l=!1}){const{http:r}=Object(d.useKibana)().services;return n.a.createElement(j.EuiPanel,{color:"subdued"},n.a.createElement(j.EuiAccordion,{initialIsOpen:!0,id:e,buttonContentClassName:"accordion-button",buttonContent:n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiTitle,{size:"xs"},n.a.createElement("h5",null,e))),l&&n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(K.a,null)))),extraAction:(null==t?void 0:t.href)&&n.a.createElement(j.EuiButtonEmpty,{iconType:"sortRight",size:"xs",color:"text",href:r.basePath.prepend(t.href)},t.label)},n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiPanel,{hasBorder:!0},i?n.a.createElement(ut,null):n.a.createElement(n.a.Fragment,null,a)))))}var dt=a(32),mt=a(53);function pt({isInitialLoad:e,children:t,iconSize:a="l",height:i=120}){return e?n.a.createElement("div",{"data-test-subj":"loading",style:{height:i,display:"flex",alignItems:"center",justifyContent:"center"}},n.a.createElement(j.EuiLoadingChart,{size:a})):n.a.createElement(nt.Chart,{size:{height:i}},t)}const bt=Le()(j.EuiStat).withConfig({displayName:"Stat",componentId:"sc-10wwbqs-0"})([".euiStat__title{color:",";}"],(e=>e.color)),gt="--";function Et(e){const{description:t=gt,title:a=gt,...i}=e;return n.a.createElement(bt,Me()({description:t,title:a,titleSize:"s"},i))}var yt=a(42);const ft=({x:e,history:t})=>{if(e){const a=e[0],i=e[1],l=Object(yt.b)(t.location.search),n={rangeFrom:new Date(a).toISOString(),rangeTo:new Date(i).toISOString()};t.push({...t.location,search:Object(yt.a)({...l,...n})})}};function vt({bucketSize:e}){var t;const a=Object(l.useContext)(Ie.ThemeContext),r=Object(mt.a)(),s=Object(o.useHistory)(),{forceUpdate:u,hasDataMap:c}=Object(Z.a)(),{relativeStart:d,relativeEnd:m,absoluteStart:p,absoluteEnd:b,lastUpdated:g}=Object(ot.a)(),{data:E,status:y}=Object(J.b)((()=>{var t;if(e&&p&&b)return null===(t=Object(dt.a)("apm"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:p,end:b},relativeTime:{start:d,end:m},...e})}),[e,d,m,p,b,u,g]);if(null===(t=c.apm)||void 0===t||!t.hasData)return null;const{appLink:f,stats:v,series:x}=E||{},h=Ye.a.utc(p).valueOf(),k=Ye.a.utc(b).valueOf(),T=Object(nt.niceTimeFormatter)([h,k]),S=y===J.a.LOADING,F=a.eui.euiColorVis1;return n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.apm.title",{defaultMessage:"Services"}),appLink:{href:f,label:i.i18n.translate("xpack.observability.overview.apm.appLink",{defaultMessage:"Show service inventory"})},hasError:y===J.a.FAILURE},n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{title:st()(null==v?void 0:v.services.value).format("0a"),description:i.i18n.translate("xpack.observability.overview.apm.services",{defaultMessage:"Services"}),isLoading:S})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{title:`${w=null==v?void 0:v.transactions.value,w&&0!==w?w<=.1?"< 0.1":w>1e3?st()(w).format("0.00a"):st()(w).format("0,0.0"):"0"} tpm`,description:n.a.createElement(j.EuiToolTip,{content:i.i18n.translate("xpack.observability.overview.apm.throughputTip",{defaultMessage:'Values are calculated for transactions with type "Request" or "page-load". If neither are available, values reflect the top transaction type.'})},n.a.createElement(n.a.Fragment,null,i.i18n.translate("xpack.observability.overview.apm.throughput",{defaultMessage:"Throughput"})," ",n.a.createElement(j.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignCenter"}))),isLoading:S,color:F}))),n.a.createElement(pt,{isInitialLoad:S&&!E},n.a.createElement(nt.Settings,{onBrushEnd:e=>ft({x:e.x,history:s}),theme:r,showLegend:!1,xDomain:{min:h,max:k}}),(null==x?void 0:x.transactions.coordinates)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(nt.BarSeries,{id:"transactions",name:"Transactions",data:null==x?void 0:x.transactions.coordinates,xScaleType:nt.ScaleType.Time,yScaleType:nt.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],color:F}),n.a.createElement(nt.Axis,{id:"y-axis",position:nt.Position.Left,gridLine:{visible:!0},tickFormat:e=>`${function(e){return st()(e).format("0.00a")}(e)} tpm`}),n.a.createElement(nt.Axis,{id:"x-axis",position:nt.Position.Bottom,tickFormat:T}))));var w}function xt(e){const{value:t,type:a}=e;switch(a){case"bytesPerSecond":return`${st()(t).format("0.0b")}/s`;case"number":return st()(t).format("0a");case"percent":return st()(t).format("0.0%")}}function ht({bucketSize:e}){var t;const a=Object(o.useHistory)(),r=Object(mt.a)(),{forceUpdate:s,hasDataMap:u}=Object(Z.a)(),{relativeStart:c,relativeEnd:d,absoluteStart:m,absoluteEnd:p,lastUpdated:b}=Object(ot.a)(),{data:g,status:E}=Object(J.b)((()=>{var t;if(e&&m&&p)return null===(t=Object(dt.a)("infra_logs"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:m,end:p},relativeTime:{start:c,end:d},...e})}),[e,c,d,m,p,s,b]);if(null===(t=u.infra_logs)||void 0===t||!t.hasData)return null;const y=Ye.a.utc(m).valueOf(),f=Ye.a.utc(p).valueOf(),v=Object(nt.niceTimeFormatter)([y,f]),{appLink:x,stats:h,series:k}=g||{},T=function(e){if(!e)return{};const t=Object(j.euiPaletteColorBlind)({rotations:Math.ceil(Object.keys(e).length/10)});return Object.keys(e).reduce(((e,a,i)=>(e[a]=t[i],e)),{})}(k),S=E===J.a.LOADING;return n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.logs.title",{defaultMessage:"Log Events"}),appLink:{href:x,label:i.i18n.translate("xpack.observability.overview.logs.appLink",{defaultMessage:"Show log stream"})},hasError:E===J.a.FAILURE},n.a.createElement(j.EuiTitle,{size:"xxs"},n.a.createElement("h4",null,i.i18n.translate("xpack.observability.overview.logs.subtitle",{defaultMessage:"Logs rate per minute"}))),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiFlexGroup,null,!h||Object(w.isEmpty)(h)?n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{isLoading:S})):Object.keys(h).map((e=>{const t=h[e];return n.a.createElement(j.EuiFlexItem,{grow:!1,key:e},n.a.createElement(Et,{title:xt(t),description:t.label,isLoading:S,color:T[e]}))}))),n.a.createElement(pt,{isInitialLoad:S&&!g},n.a.createElement(nt.Settings,{onBrushEnd:e=>ft({x:e.x,history:a}),theme:r,showLegend:!0,legendPosition:nt.Position.Right,xDomain:{min:y,max:f},showLegendExtra:!0}),k&&Object.keys(k).map((e=>{const t=k[e],a=t.coordinates.map((e=>({...e,g:t.label})));return n.a.createElement(l.Fragment,{key:e},n.a.createElement(nt.BarSeries,{id:e,xScaleType:nt.ScaleType.Time,yScaleType:nt.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],stackAccessors:["x"],splitSeriesAccessors:["g"],data:a,color:T[e]}),n.a.createElement(nt.Axis,{id:"x-axis",position:nt.Position.Bottom,showOverlappingTicks:!1,showOverlappingLabels:!1,tickFormat:v}),n.a.createElement(nt.Axis,{id:"y-axis",gridLine:{visible:!0},position:nt.Position.Left,tickFormat:e=>st()(e).format("0a")}))}))))}function kt({name:e,id:t,timerange:a}){const i=`../../app/metrics/link-to/host-detail/${t}?from=${a.from}&to=${a.to}`;return n.a.createElement(n.a.Fragment,null,n.a.createElement("a",{href:i},e))}const Tt=3600,St=86400;var Ft=a(44);function wt({id:e,formatter:t,value:a,timeseries:i,color:r}){var s,o;const u=Object(l.useContext)(Ie.ThemeContext),c=u&&u.darkMode||!1,d=[Ft.EUI_SPARKLINE_THEME_PARTIAL,c?Ft.EUI_CHARTS_THEME_DARK.theme:Ft.EUI_CHARTS_THEME_LIGHT.theme],m=null!==(s=null===(o=d[1].colors)||void 0===o?void 0:o.vizColors)&&void 0!==s?s:[];return a?n.a.createElement(j.EuiFlexGroup,{gutterSize:"m",responsive:!1},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(nt.Chart,{size:{height:18,width:40}},n.a.createElement(nt.Settings,{theme:d,showLegend:!1,tooltip:"none"}),n.a.createElement(nt.AreaSeries,{id:e,data:i,xAccessor:"timestamp",yAccessors:[e],color:m[r]||"#006BB4"}))),n.a.createElement(j.EuiFlexItem,{grow:!1,style:{whiteSpace:"nowrap"}},t(a))):n.a.createElement(j.EuiTextColor,{color:"subdued"},n.a.createElement(j.EuiIcon,{type:"visLine"})," N/A")}const jt=e=>null===e?"":st()(e).format("0[.0]%"),Ot=e=>null===e?"":st()(e).format("0[.0]"),Ct=e=>null===e?"":st()(e).format("0b")+"/s";function Mt({bucketSize:e}){var t,a;const{forceUpdate:r,hasDataMap:s}=Object(Z.a)(),{relativeStart:o,relativeEnd:u,absoluteStart:c,absoluteEnd:d,lastUpdated:m}=Object(ot.a)(),[p,b]=Object(l.useState)("asc"),[g,E]=Object(l.useState)("uptime"),[y,f]=Object(l.useState)(null),{data:v,status:x}=Object(J.b)((()=>{var t;if(e&&c&&d)return null===(t=Object(dt.a)("infra_metrics"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:c,end:d},relativeTime:{start:o,end:u},...e})}),[e,o,u,c,d,r,m]),h=Object(l.useCallback)((({sort:e})=>{if(e){const{field:t,direction:a}=e;E(t),b(a),v&&(async()=>{const e=await v.sort(t,a);f(e||null)})()}}),[v,E,b]);if(null===(t=s.infra_metrics)||void 0===t||!t.hasData)return null;const k=x===J.a.LOADING,T=x===J.a.LOADING;if(k||T)return n.a.createElement("pre",null,"Loading");if(!v)return n.a.createElement("pre",null,"No Data");const S=[{field:"uptime",name:i.i18n.translate("xpack.observability.overview.metrics.colunms.uptime",{defaultMessage:"Uptime"}),sortable:!0,width:"80px",render:e=>{return null==e?"N/A":(t=e/1e3)<60?`${Math.floor(t)}s`:t<Tt?`${Math.floor(t/60)}m ${Math.floor(t%60)}s`:t<St?`${Math.floor(t/Tt)}h ${Math.floor(t%Tt/60)}m`:`${Math.floor(t/St)}d ${Math.floor(t%St/Tt)}h`;var t}},{field:"name",name:i.i18n.translate("xpack.observability.overview.metrics.colunms.hostname",{defaultMessage:"Hostname"}),sortable:!0,truncateText:!0,isExpander:!0,textOnly:!0,render:(e,t)=>n.a.createElement(kt,{id:t.id,name:e,timerange:{from:c,to:d}})},{field:"cpu",name:i.i18n.translate("xpack.observability.overview.metrics.colunms.cpu",{defaultMessage:"CPU %"}),sortable:!0,render:(e,t)=>n.a.createElement(wt,{id:"cpu",value:e,formatter:jt,timeseries:t.timeseries,color:7})},{field:"load",name:i.i18n.translate("xpack.observability.overview.metrics.colunms.load15",{defaultMessage:"Load 15"}),sortable:!0,render:(e,t)=>n.a.createElement(wt,{id:"load",value:e,formatter:Ot,timeseries:t.timeseries,color:1})},{field:"rx",name:"RX",sortable:!0,render:(e,t)=>n.a.createElement(wt,{id:"rx",value:e,formatter:Ct,timeseries:t.timeseries,color:0})},{field:"tx",name:"TX",sortable:!0,render:(e,t)=>n.a.createElement(wt,{id:"tx",value:e,formatter:Ct,timeseries:t.timeseries,color:3})}],F={sort:{field:g,direction:p}},w=y||v,{appLink:O}=v||{};return n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.metrics.title",{defaultMessage:"Hosts"}),appLink:{href:O,label:i.i18n.translate("xpack.observability.overview.metrics.appLink",{defaultMessage:"Show inventory"})},hasError:x===J.a.FAILURE},n.a.createElement(j.EuiBasicTable,{onChange:h,sorting:F,items:null!==(a=null==w?void 0:w.series)&&void 0!==a?a:[],columns:S}))}function It({bucketSize:e}){var t;const a=Object(l.useContext)(Ie.ThemeContext),r=Object(mt.a)(),s=Object(o.useHistory)(),{forceUpdate:u,hasDataMap:c}=Object(Z.a)(),{relativeStart:d,relativeEnd:m,absoluteStart:p,absoluteEnd:b,lastUpdated:g}=Object(ot.a)(),{data:E,status:y}=Object(J.b)((()=>{var t;if(e&&p&&b)return null===(t=Object(dt.a)("synthetics"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:p,end:b},relativeTime:{start:d,end:m},...e})}),[e,d,m,p,b,u,g]);if(null===(t=c.synthetics)||void 0===t||!t.hasData)return null;const f=Ye.a.utc(p).valueOf(),v=Ye.a.utc(b).valueOf(),x=Object(nt.niceTimeFormatter)([f,v]),h=y===J.a.LOADING,{appLink:k,stats:T,series:S}=E||{},F=a.eui.euiColorVis2,w=a.eui.euiColorMediumShade;return n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.uptime.title",{defaultMessage:"Monitors"}),appLink:{href:k,label:i.i18n.translate("xpack.observability.overview.uptime.appLink",{defaultMessage:"Show monitors"})},hasError:y===J.a.FAILURE},n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{title:st()(null==T?void 0:T.monitors.value).format("0a"),description:i.i18n.translate("xpack.observability.overview.uptime.monitors",{defaultMessage:"Monitors"}),isLoading:h})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{title:st()(null==T?void 0:T.up.value).format("0a"),description:i.i18n.translate("xpack.observability.overview.uptime.up",{defaultMessage:"Up"}),isLoading:h,color:w})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Et,{title:st()(null==T?void 0:T.down.value).format("0a"),description:i.i18n.translate("xpack.observability.overview.uptime.down",{defaultMessage:"Down"}),isLoading:h,color:F}))),n.a.createElement(pt,{isInitialLoad:h&&!E},n.a.createElement(nt.Settings,{onBrushEnd:e=>ft({x:e.x,history:s}),theme:r,showLegend:!1,legendPosition:nt.Position.Right,xDomain:{min:f,max:v}}),n.a.createElement(Lt,{id:"down",label:i.i18n.translate("xpack.observability.overview.uptime.chart.down",{defaultMessage:"Down"}),series:null==S?void 0:S.down,tickFormatter:x,color:F}),n.a.createElement(Lt,{id:"up",label:i.i18n.translate("xpack.observability.overview.uptime.chart.up",{defaultMessage:"Up"}),series:null==S?void 0:S.up,tickFormatter:x,color:w})))}function Lt({id:e,label:t,series:a,color:i,tickFormatter:l}){if(!a)return null;const r=a.coordinates.map((e=>({...e,g:t})));return n.a.createElement(n.a.Fragment,null,n.a.createElement(nt.BarSeries,{id:e,xScaleType:nt.ScaleType.Time,yScaleType:nt.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],color:i,stackAccessors:["x"],splitSeriesAccessors:["g"],data:r}),n.a.createElement(nt.Axis,{id:"x-axis",position:nt.Position.Bottom,showOverlappingTicks:!1,showOverlappingLabels:!1,tickFormat:l}),n.a.createElement(nt.Axis,{id:"y-axis",gridLine:{visible:!0},position:nt.Position.Left,tickFormat:e=>st()(e).format("0a")}))}var At=a(138),Rt=a(57),zt=a(8);function Dt({bucketSize:e}){const{forceUpdate:t,hasDataMap:a}=Object(Z.a)(),{core:l,plugins:r}=Object(S.a)(),{relativeStart:s,relativeEnd:o,absoluteStart:u,absoluteEnd:c,lastUpdated:d}=Object(ot.a)(),m=a.ux,p=null==m?void 0:m.serviceName,b=Object(Rt.a)(l,r),g=[{name:Pt,time:{from:s,to:o},reportDefinitions:{[zt.j]:["ALL_VALUES"]},breakdown:zt.j,dataType:"ux",selectedMetricField:zt.l}],{data:E,status:y}=Object(J.b)((()=>{var t;if(p&&e&&u&&c)return null===(t=Object(dt.a)("ux"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:u,end:c},relativeTime:{start:s,end:o},serviceName:p,...e})}),[e,s,o,u,c,t,p,d]);if(null==m||!m.hasData)return null;const f=y===J.a.LOADING,{appLink:v,coreWebVitals:x}=E||{};return n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.ux.title",{defaultMessage:"User Experience"}),appLink:{href:v,label:i.i18n.translate("xpack.observability.overview.ux.appLink",{defaultMessage:"Show dashboard"})},hasError:y===J.a.FAILURE},n.a.createElement("div",{style:{height:320}},n.a.createElement(b,{attributes:g,reportType:"data-distribution",title:Pt,withActions:!1})),n.a.createElement(At.default,{data:x,loading:f,displayServiceName:!0,serviceName:p}))}const Pt=i.i18n.translate("xpack.observability.overview.ux.pageLoadDistribution.title",{defaultMessage:"Page load distribution"});function _t({bucketSize:e}){return n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(ht,{bucketSize:e})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Mt,{bucketSize:e})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(vt,{bucketSize:e})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(It,{bucketSize:e})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Dt,{bucketSize:e}))))}const Bt="DISMISS_GUIDED_SETUP_PROGRESS";function Nt(){const e=window.localStorage.getItem(Bt),[t,a]=Object(l.useState)(JSON.parse(e||"false"));return{isGuidedSetupProgressDismissed:t,dismissGuidedSetupProgress:Object(l.useCallback)((()=>{window.localStorage.setItem(Bt,"true"),a(!0)}),[])}}function Gt({onViewDetailsClick:e,onDismissClick:t}){const{hasDataMap:a,isAllRequestsComplete:i}=Object(Z.a)(),r=Object(Ve.d)({app:"observability-overview"}),{isGuidedSetupProgressDismissed:s,dismissGuidedSetupProgress:o}=Nt(),[u,c]=Object(l.useState)(0);Object(l.useEffect)((()=>{const e=Object.keys(a);if(i){const t=Object(w.reduce)(a,((e,t)=>null!=t&&t.hasData?e+1:e),0)/e.length*100;c(isFinite(t)?t:0)}}),[i,a]);const d=Object(l.useCallback)((()=>{o(),t&&t(),r({metric:"guided_setup_progress_dismiss"})}),[o,r,t]);return s?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiPanel,{color:"primary","data-test-subj":"status-progress"},n.a.createElement(j.EuiProgress,{color:"primary",value:u,max:100,size:"m"}),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiTitle,{size:"xxs"},n.a.createElement("h2",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.progressBarTitle",defaultMessage:"Guided setup for Observability"}))),n.a.createElement(j.EuiText,{size:"xs",color:"subdued"},n.a.createElement("p",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.progressBarDescription",defaultMessage:"Track your progress towards adding observability integrations and features."})))),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiButtonEmpty,{size:"s",onClick:d},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.progressBarDismiss",defaultMessage:"Dismiss"}))),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiButton,{size:"s",onClick:()=>{e(),r({metric:"guided_setup_progress_view_details"})}},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.progressBarViewDetails",defaultMessage:"View details"}))))))),n.a.createElement(j.EuiSpacer,null))}function Vt({id:e,title:t,modules:a,addLink:i,addTitle:r,goToAppTitle:s,goToAppLink:o}){const{application:u}=Object(h.a)().services,c=Object(Ve.d)({app:"observability-overview"}),d=Object(l.useCallback)((()=>{c({metric:`guided_setup_add_integrations_${e}`}),u.navigateToUrl(i)}),[i,u,c,e]);return n.a.createElement(j.EuiPanel,{color:"plain",hasBorder:!0},n.a.createElement(j.EuiFlexGroup,{justifyContent:"spaceBetween"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement("div",null,n.a.createElement(j.EuiIcon,{type:"checkInCircleFilled",color:"success",className:"eui-displayInline eui-alignMiddle",style:{marginRight:8}}),n.a.createElement(j.EuiTitle,{size:"xs",className:"eui-displayInline eui-alignMiddle"},n.a.createElement("h2",null,t)))),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiButtonEmpty,{size:"s",iconType:"plusInCircle",flush:"right",onClick:d},r))),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.dataAvailable",defaultMessage:"Data is available."}))),n.a.createElement(j.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",style:{marginTop:8},role:"list"},a.map((e=>n.a.createElement(j.EuiFlexItem,{role:"listitem",key:e.name},n.a.createElement(j.EuiBadge,{color:e.hasData?"success":"hollow",iconType:"check",iconSide:"left"},e.name))))),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiButton,{color:"primary",href:o},s))))}function Ut({id:e,title:t,description:a,learnMoreLink:i,addTitle:r,addLink:s}){const{application:o}=Object(h.a)().services,u=Object(Ve.d)({app:"observability-overview"}),c=Object(l.useCallback)((()=>{u({metric:`guided_setup_add_data_${e}`}),o.navigateToUrl(s)}),[e,u,o,s]);return n.a.createElement(j.EuiPanel,{color:"warning",hasBorder:!0},n.a.createElement(j.EuiFlexGroup,{justifyContent:"spaceBetween"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement("div",null,n.a.createElement(j.EuiIcon,{type:"minusInCircleFilled",color:"warning",className:"eui-displayInline eui-alignMiddle",style:{marginRight:8}}),n.a.createElement(j.EuiTitle,{size:"xs",className:"eui-displayInline eui-alignMiddle"},n.a.createElement("h2",null,t))))),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiText,{size:"s"},a))),n.a.createElement(j.EuiFlexGroup,{alignItems:"center"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiButton,{color:"primary",onClick:c,fill:!0},r)),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiLink,{color:"primary",href:i,target:"_blank"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.learnMoreButton",defaultMessage:"Learn more"})))))}const $t=(e,t)=>e.weight-t.weight;function qt({boxes:e}){const t=e.filter((e=>e.hasData)).sort($t),a=e.filter((e=>!e.hasData)).sort($t);return n.a.createElement(j.EuiFlexGroup,{direction:"column"},a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiTitle,{size:"xs"},n.a.createElement("h2",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.recommendedSteps",defaultMessage:"Recommended next steps"})))),a.map((e=>n.a.createElement(j.EuiFlexItem,{key:e.id,"data-test-id":`box-${e.id}`},n.a.createElement(Ut,e))))),a.length>0&&t.length>0&&n.a.createElement(j.EuiHorizontalRule,null),t.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiTitle,{size:"xs"},n.a.createElement("h2",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.status.dataAvailableTitle",defaultMessage:"Data available for"})))),t.map((e=>n.a.createElement(j.EuiFlexItem,{key:e.id,"data-test-subj":`box-${e.id}`},n.a.createElement(Vt,e))))))}function Ht(){const{http:e,docLinks:t}=Object(d.useKibana)().services,{hasDataMap:a}=Object(Z.a)(),l=((e,t)=>[{id:"infra_logs",title:i.i18n.translate("xpack.observability.statusVisualization.logs.title",{defaultMessage:"Logs"}),description:i.i18n.translate("xpack.observability.statusVisualization.logs.description",{defaultMessage:"Fast, easy, and scalable centralized log monitoring with out-of-the-box support for common data sources."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.logs.link",{defaultMessage:"Add integrations"}),addLink:e.basePath.prepend("/app/integrations/browse?q=logs"),learnMoreLink:t.links.observability.monitorLogs,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.logs.goToAppTitle",{defaultMessage:"Show log stream"}),goToAppLink:e.basePath.prepend("/app/logs/stream"),weight:1},{id:"apm",title:i.i18n.translate("xpack.observability.statusVisualization.apm.title",{defaultMessage:"APM"}),description:i.i18n.translate("xpack.observability.statusVisualization.apm.description",{defaultMessage:"Get deeper visibility into your applications with extensive support for popular languages, OpenTelemetry, and distributed tracing."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.apm.link",{defaultMessage:"Add data"}),addLink:e.basePath.prepend("/app/home#/tutorial/apm"),learnMoreLink:t.links.apm.overview,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.apm.goToAppTitle",{defaultMessage:"Show services inventory"}),goToAppLink:e.basePath.prepend("/app/apm/services"),weight:3},{id:"infra_metrics",title:i.i18n.translate("xpack.observability.statusVisualization.metrics.title",{defaultMessage:"Infrastructure"}),description:i.i18n.translate("xpack.observability.statusVisualization.metrics.description",{defaultMessage:"Stream, visualize, and analyze your infrastructure metrics."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.metrics.link",{defaultMessage:"Add integrations"}),addLink:e.basePath.prepend("/app/integrations/browse?q=metrics"),learnMoreLink:t.links.observability.analyzeMetrics,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.metrics.goToAppTitle",{defaultMessage:"Show inventory"}),goToAppLink:e.basePath.prepend("/app/metrics/inventory"),weight:2},{id:"synthetics",title:i.i18n.translate("xpack.observability.statusVisualization.uptime.title",{defaultMessage:"Uptime"}),description:i.i18n.translate("xpack.observability.statusVisualization.uptime.description",{defaultMessage:"Proactively monitor the availability and functionality of user journeys."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.uptime.link",{defaultMessage:"Add monitors"}),addLink:e.basePath.prepend("/app/home#/tutorial/uptimeMonitors"),learnMoreLink:t.links.observability.monitorUptimeSynthetics,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.uptime.goToAppTitle",{defaultMessage:"Show monitors "}),goToAppLink:e.basePath.prepend("/app/uptime"),weight:4},{id:"ux",title:i.i18n.translate("xpack.observability.statusVisualization.ux.title",{defaultMessage:"User Experience"}),description:i.i18n.translate("xpack.observability.statusVisualization.ux.description",{defaultMessage:"Collect, measure, and analyze performance data that reflects real-world user experiences."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.ux.link",{defaultMessage:"Add data"}),addLink:e.basePath.prepend("/app/home#/tutorial/apm"),learnMoreLink:t.links.observability.userExperience,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.ux.goToAppTitle",{defaultMessage:"Show dashboard"}),goToAppLink:e.basePath.prepend("/app/ux"),weight:5},{id:"alert",title:i.i18n.translate("xpack.observability.statusVisualization.alert.title",{defaultMessage:"Alerting"}),description:i.i18n.translate("xpack.observability.statusVisualization.alert.description",{defaultMessage:"Detect complex conditions in Observability and trigger actions when those conditions are met."}),addTitle:i.i18n.translate("xpack.observability.statusVisualization.alert.link",{defaultMessage:"Create rules"}),addLink:e.basePath.prepend("/app/management/insightsAndAlerting/triggersActions/rules"),learnMoreLink:t.links.observability.createAlerts,goToAppTitle:i.i18n.translate("xpack.observability.statusVisualization.alert.goToAppTitle",{defaultMessage:"Show alerts"}),goToAppLink:e.basePath.prepend("/app/observability/alerts"),weight:6}])(e,t),r=l.map((e=>{var t,i;return{...e,hasData:null!==(t=null===(i=a[e.id])||void 0===i?void 0:i.hasData)&&void 0!==t&&t,modules:[]}}));return n.a.createElement(qt,{boxes:r})}const Kt=["logs","infrastructure","apm","uptime"];function Wt({routeParams:e}){var t,a;const r=Object(F.useUiTracker)({app:"observability-overview"});Object(F.useTrackPageview)({app:"observability-overview",path:"overview"}),Object(F.useTrackPageview)({app:"observability-overview",path:"overview",delay:15e3}),Object(W.a)([{text:i.i18n.translate("xpack.observability.breadcrumbs.overviewLinkText",{defaultMessage:"Overview"})}]);const[s,o]=Object(l.useState)(!1),u=Y(),{cases:c,docLinks:p,http:b,application:{capabilities:g}}=Object(d.useKibana)().services,{ObservabilityPageTemplate:E,config:y}=Object(S.a)(),{relativeStart:f,relativeEnd:v,absoluteStart:h,absoluteEnd:k}=Object(ot.a)(),{data:T}=Object(J.b)((()=>async function({http:e}){try{return await e.get("https://feeds.elastic.co/observability-solution/v8.0.0.json")}catch(e){return console.error("Error while fetching news feed",e),{items:[]}}}({http:b})),[b]),{hasAnyData:w,isAllRequestsComplete:O}=Object(Z.a)(),C=Object(l.useRef)(),[I,A]=Object(l.useState)(!1),R=Object(l.useCallback)((()=>A(!1)),[]),{isGuidedSetupProgressDismissed:z}=Nt(),D=Object(l.useMemo)((()=>function({start:e,end:t}){if(e&&t)return function({start:e,end:t,minInterval:a}){const i=Ye.a.duration(t-e,"ms"),l=Math.max(at.near(100,i).asSeconds(),1),n=`${l}s`,r=a&&a.match(/^([\d]+)([shmdwMy]|ms)$/),s=r?Number(r[1])*(o=r[2],lt[o]):0;var o;return l<s?{bucketSize:s,intervalString:a}:{bucketSize:l,intervalString:n}}({start:e,end:t,minInterval:"60s"})}({start:h,end:k})),[h,k]),P=Object(l.useCallback)((e=>{C.current=e}),[]),_=Object(l.useCallback)((()=>{z&&r({metric:"guided_setup_view_details_after_dismiss"}),R(),o(!0)}),[r,z,R]),B=Object(l.useCallback)((()=>C.current&&C.current()),[]),N=c.ui.getCasesContext(),G=Object(H.a)();if(Object(l.useEffect)((()=>{!0===w&&Kt.forEach((e=>{!1===g[e].show&&r({metric:`oblt_disabled_feature_${"infrastructure"===e?"metrics":e}`})}))}),[g,w,r]),void 0===w)return n.a.createElement(ne,null);const V=!0===w||!1===O&&void 0,U=te({hasData:V,basePath:b.basePath,docsLink:p.links.observability.guide}),$=y.unsafe.alertingExperience.enabled?M.b.observability.alerts:M.b.management.rules;return n.a.createElement(E,{noDataConfig:U,pageHeader:V?{children:n.a.createElement(Jt,{showTour:I,onTourDismiss:R,handleGuidedSetupClick:_,onTimeRangeRefresh:B})}:void 0},V&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ie,null),n.a.createElement(Gt,{onViewDetailsClick:()=>o(!0),onDismissClick:()=>A(!0)}),n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(ct,{title:i.i18n.translate("xpack.observability.overview.alerts.title",{defaultMessage:"Alerts"}),hasError:!1,appLink:{href:$,label:i.i18n.translate("xpack.observability.overview.alerts.appLink",{defaultMessage:"Show alerts"})},showExperimentalBadge:!0},n.a.createElement(N,{owner:[x.observabilityFeatureId],userCanCrud:null!==(t=null==G?void 0:G.crud)&&void 0!==t&&t,features:{alerts:{sync:!1}}},n.a.createElement(se.a,{setRefetch:P,rangeFrom:f,rangeTo:v,indexNames:u,itemsPerPage:10,stateStorageKey:"xpack.observability.overview.alert.tableState",storage:new m.Storage(window.localStorage)})))),n.a.createElement(j.EuiFlexItem,null,w&&n.a.createElement(_t,{bucketSize:D}),n.a.createElement(qe,null)),n.a.createElement(j.EuiSpacer,{size:"s"})),n.a.createElement(j.EuiHorizontalRule,null),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,{grow:4},!(null==T||null===(a=T.items)||void 0===a||!a.length)&&n.a.createElement(He,{items:T.items.slice(0,3)})),n.a.createElement(j.EuiFlexItem,{grow:2},n.a.createElement(Je,null)))))),s&&n.a.createElement(j.EuiFlyout,{size:"s",ownFocus:!0,onClose:()=>o(!1),"aria-labelledby":"statusVisualizationFlyoutTitle"},n.a.createElement(j.EuiFlyoutHeader,{hasBorder:!0},n.a.createElement(j.EuiTitle,{size:"m"},n.a.createElement("h2",{id:"statusVisualizationFlyoutTitle"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.overview.statusVisualizationFlyoutTitle",defaultMessage:"Guided setup"}))),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiText,{size:"s"},n.a.createElement("p",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.overview.statusVisualizationFlyoutDescription",defaultMessage:"Track your progress towards adding observability integrations and features."})))),n.a.createElement(j.EuiFlyoutBody,null,n.a.createElement(Ht,null))))}function Jt({showTour:e=!1,onTourDismiss:t,handleGuidedSetupClick:a,onTimeRangeRefresh:r}){const{relativeStart:s,relativeEnd:o,refreshInterval:u,refreshPaused:c}=Object(ot.a)(),d=Object(l.useRef)();return n.a.createElement(j.EuiFlexGroup,{wrap:!0,gutterSize:"s",justifyContent:"flexEnd"},n.a.createElement(j.EuiFlexItem,{grow:1},n.a.createElement(j.EuiTitle,null,n.a.createElement("h1",{className:"eui-textNoWrap"},Qt))),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Qe.DatePicker,{rangeFrom:s,rangeTo:o,refreshInterval:u,refreshPaused:c,onTimeRangeRefresh:r})),n.a.createElement(j.EuiFlexItem,{grow:!1,style:{alignItems:"flex-end"}},n.a.createElement(j.EuiButton,{buttonRef:d,color:"text",iconType:"wrench",onClick:a},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.overview.guidedSetupButton",defaultMessage:"Guided setup"})),e?n.a.createElement(j.EuiTourStep,{anchor:()=>d.current,isStepOpen:!0,title:i.i18n.translate("xpack.observability.overview.guidedSetupTourTitle",{defaultMessage:"Guided setup is always available"}),content:n.a.createElement(j.EuiText,{size:"s"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.overview.guidedSetupTourContent",defaultMessage:"If you're ever in doubt you can always access the integration status and view next steps by clicking on this action."})),step:1,stepsTotal:1,maxWidth:400,onFinish:t,footerAction:n.a.createElement(j.EuiButtonEmpty,{color:"text",flush:"right",size:"xs",onClick:t},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.overview.guidedSetupTourDismissButton",defaultMessage:"Dismiss"}))}):null))}const Qt=i.i18n.translate("xpack.observability.overview.pageTitle",{defaultMessage:"Overview"}),Xt=new E.Type("JSON",E.any.is,((e,t)=>y.either.chain(E.string.validate(e,t),(a=>{try{return E.success(JSON.parse(a))}catch(a){return E.failure(e,t)}}))),(e=>JSON.stringify(e)));var Yt=a(127),Zt=a(83);const ea={lastResponse:[],status:[]},ta=Object(m.createStateContainer)(ea,{setLastResponse:e=>t=>{const a=t;return t.forEach((t=>{e.lastResponse.includes(t)?a.filter((e=>e!==t)):a.concat(t)})),{...e,lastResponse:a}},setStatus:e=>t=>{const a=t;return t.forEach((t=>{e.status.includes(t)?a.filter((e=>e!==t)):a.concat(t)})),{...e,status:a}}}),{Provider:aa,useContainer:ia}=Object(m.createStateContainerReactHelpers)();function la(){const e=ia();!function(e){const t=Object(o.useHistory)();Object(l.useEffect)((()=>{const a=Object(m.createKbnUrlStateStorage)({history:t,useHash:!1,useHashQuery:!1}),{start:i,stop:l}=function(e,t){return Object(m.syncState)({storageKey:"_a",stateContainer:{...e,set:t=>{e.set({...ea,...t})}},stateStorage:t})}(e,a);return i(),function(e,t){const a=t.get("_a");if(a){const t={...ea,...a};e.set(t)}else e.set(ea);t.set("_a",e.get())}(e,a),l}),[e,t])}(e);const{setLastResponse:t,setStatus:a}=e.transitions,{lastResponse:i,status:n}=Object(m.useContainerSelector)(e,(e=>e));return{lastResponse:i,status:n,setLastResponse:t,setStatus:a}}const na=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusLicenseError",{defaultMessage:"License Error"}),ra=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusOk",{defaultMessage:"Ok"}),sa=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusActive",{defaultMessage:"Active"}),oa=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusError",{defaultMessage:"Error"}),ua=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusPending",{defaultMessage:"Pending"}),ca=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusUnknown",{defaultMessage:"Unknown"}),da=i.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusWarning",{defaultMessage:"warning"}),ma=i.i18n.translate("xpack.observability.rules.rulesTable.columns.lastResponseTitle",{defaultMessage:"Last response"}),pa=i.i18n.translate("xpack.observability.rules.rulesTable.columns.lastRunTitle",{defaultMessage:"Last run"}),ba=i.i18n.translate("xpack.observability.rules.rulesTable.columns.nameTitle",{defaultMessage:"Rule"}),ga=i.i18n.translate("xpack.observability.rules.rulesTable.columns.statusTitle",{defaultMessage:"Status"}),Ea=i.i18n.translate("xpack.observability.rules.rulesTable.columns.actionsTitle",{defaultMessage:"Actions"}),ya=i.i18n.translate("xpack.observability.rules.rulesTable.columns.editAriaLabel",{defaultMessage:"Edit"}),fa=i.i18n.translate("xpack.observability.rules.rulesTable.columns.editButtonTooltip",{defaultMessage:"Edit"}),va=i.i18n.translate("xpack.observability.rules.rulesTable.columns.deleteButtonTooltip",{defaultMessage:"Delete"}),xa=i.i18n.translate("xpack.observability.rules.rulesTable.columns.deleteAriaLabel",{defaultMessage:"Delete"}),ha=i.i18n.translate("xpack.observability.rulesTitle",{defaultMessage:"Rules"}),ka=i.i18n.translate("xpack.observability.breadcrumbs.rulesLinkText",{defaultMessage:"Rules"}),Ta=i.i18n.translate("xpack.observability.rules.loadError",{defaultMessage:"Unable to load rules"}),Sa=i.i18n.translate("xpack.observability.rulesList.unableToLoadRuleTags",{defaultMessage:"Unable to load rule tags"}),Fa=i.i18n.translate("xpack.observability.rules.rulesTable.singleTitle",{defaultMessage:"rule"}),wa=i.i18n.translate("xpack.observability.rules.rulesTable.pluralTitle",{defaultMessage:"rules"}),ja=i.i18n.translate("xpack.observability.rules.searchPlaceholderTitle",{defaultMessage:"Search"}),Oa=(i.i18n.translate("xpack.observability.rules.rulesTable.changeStatusAriaLabel",{defaultMessage:"Change status"}),(e,t,a)=>i.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:a}})),Ca=i.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});function Ma({columns:e,rules:t,page:a,totalItemCount:i,onPageChange:r,sort:s,onSortChange:o,isLoading:u}){const c=Object(l.useCallback)((({page:e,sort:t})=>{e&&r(e),t&&o(t)}),[r,o]);return n.a.createElement("section",null,n.a.createElement(j.EuiSpacer,{size:"xs"}),n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiSpacer,{size:"xs"}),n.a.createElement(j.EuiBasicTable,{loading:u,items:t,itemId:"id",columns:e,"data-test-subj":"rulesList",pagination:{pageIndex:a.index,pageSize:a.size,totalItemCount:i},sorting:{sort:s},onChange:c})))}var Ia=a(114);function La({name:e,rule:t}){const{http:a}=Object(h.a)().services,i=a.basePath.prepend(Ia.a.observability.ruleDetails(t.id)),l=n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"xs"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiFlexGroup,{gutterSize:"xs"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiLink,{title:e,href:i},e)))),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiText,{color:"subdued",size:"xs"},t.ruleType)));return n.a.createElement(n.a.Fragment,null,l)}function Aa(e){switch(e){case"active":return"success";case"error":return"danger";case"ok":return"primary";case"pending":return"accent";default:return"subdued"}}const Ra={ok:ra,active:sa,error:oa,pending:ua,unknown:ca,warning:da},za=["logs","uptime","infrastructure","apm"];function Da(e,t){var a,i;return null!==(a=null==t||null===(i=t.authorizedConsumers[e.consumer])||void 0===i?void 0:i.all)&&void 0!==a&&a}function Pa(e,t,a){return e.map(((e,i)=>{var l,n,r;return{...e,index:i,actionsCount:e.actions.length,ruleType:null!==(l=null===(n=t.get(e.ruleTypeId))||void 0===n?void 0:n.name)&&void 0!==l?l:e.ruleTypeId,isEditable:Da(e,t.get(e.ruleTypeId))&&(a||!a&&!e.actions.length),enabledInLicense:!(null===(r=t.get(e.ruleTypeId))||void 0===r||!r.enabledInLicense)}}))}const _a=({selectedStatuses:e,onChange:t})=>{const[a,i]=Object(l.useState)(e),[r,s]=Object(l.useState)(!1);return Object(l.useEffect)((()=>{t&&t(a)}),[a,t]),Object(l.useEffect)((()=>{i(e)}),[e]),n.a.createElement(j.EuiFilterGroup,null,n.a.createElement(j.EuiPopover,{isOpen:r,closePopover:()=>s(!1),button:n.a.createElement(j.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:a.length>0,numActiveFilters:a.length,numFilters:a.length,onClick:()=>s(!r),"data-test-subj":"ruleStatusFilterButton"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.ruleLastResponseFilterLabel",defaultMessage:"Last response"}))},n.a.createElement("div",{className:"euiFilterSelect__items"},[...Zt.RuleExecutionStatusValues].sort().map((e=>{const t=Aa(e);return n.a.createElement(j.EuiFilterSelectItem,{key:e,style:{textTransform:"capitalize"},onClick:()=>{const t=a.includes(e);i(t?a.filter((t=>t!==e)):a.concat(e))},checked:a.includes(e)?"on":void 0,"data-test-subj":`ruleStatus${e}FilerOption`},n.a.createElement(j.EuiHealth,{color:t},Ra[e]))})))))};function Ba({options:e,onChange:t}){const[a,i]=Object(l.useState)([]),[r,s]=Object(l.useState)(!1);return Object(l.useEffect)((()=>{t&&t(a)}),[a]),n.a.createElement(j.EuiFilterGroup,null,n.a.createElement(j.EuiPopover,{isOpen:r,closePopover:()=>s(!1),button:n.a.createElement(j.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:a.length>0,numActiveFilters:a.length,numFilters:a.length,onClick:()=>s(!r),"data-test-subj":"ruleTypeFilterButton"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.typeFilterLabel",defaultMessage:"Type"}))},n.a.createElement("div",{className:"euiFilterSelect__items"},e.map(((e,t)=>n.a.createElement(l.Fragment,{key:`group${t}`},n.a.createElement(j.EuiTitle,{"data-test-subj":`ruleType${t}Group`,size:"xxs"},n.a.createElement("h3",null,e.groupName)),e.subOptions.map(((e,t)=>n.a.createElement(j.EuiFilterSelectItem,{key:t,onClick:()=>{const t=a.includes(e.value);i(t?a.filter((t=>t!==e.value)):a.concat(e.value))},checked:a.includes(e.value)?"on":void 0,"data-test-subj":`ruleType${e.value}FilterOption`},e.name)))))))))}function Na({licenseType:e,ruleTypeId:t,onConfirm:a,onCancel:l}){const r=Object(w.capitalize)(e);return n.a.createElement(j.EuiConfirmModal,{title:i.i18n.translate("xpack.observability.rules.manageLicense.manageLicenseTitle",{defaultMessage:"{licenseRequired} license required",values:{licenseRequired:r}}),onCancel:l,onConfirm:a,confirmButtonText:i.i18n.translate("xpack.observability.rules.manageLicense.manageLicenseConfirmButtonText",{defaultMessage:"Manage license"}),cancelButtonText:i.i18n.translate("xpack.observability.rules.manageLicense.manageLicenseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"manageLicenseModal"},n.a.createElement("p",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.manageLicense.manageLicenseMessage",defaultMessage:"Rule type {ruleTypeId} is disabled because it requires a {licenseRequired} license. Continue to License Management to view upgrade options.",values:{ruleTypeId:t,licenseRequired:r}})))}function Ga({executionStatus:e,item:t,licenseType:a}){var i,r;const{http:s}=Object(h.a)().services,[o,u]=Object(l.useState)(null),c=Aa(e.status),d="error"===e.status?`Error: ${null==e||null===(i=e.error)||void 0===i?void 0:i.message}`:null,m=(null===(r=e.error)||void 0===r?void 0:r.reason)===Zt.RuleExecutionStatusErrorReasons.License,p=m?na:Ra[e.status],b=n.a.createElement(j.EuiHealth,{"data-test-subj":`ruleStatus-${e.status}`,color:c},p),g=d?n.a.createElement(j.EuiToolTip,{"data-test-subj":"ruleStatus-error-tooltip",position:"top",content:d},b):b;return n.a.createElement(j.EuiFlexGroup,{gutterSize:"none"},n.a.createElement(j.EuiFlexItem,null,g),m&&n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiButtonEmpty,{size:"xs","data-test-subj":"ruleStatus-error-license-fix",onClick:()=>u({licenseType:a,ruleTypeId:t.ruleTypeId})},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.rulesTable.fixLicenseLink",defaultMessage:"Fix"}))),o&&n.a.createElement(Na,{licenseType:o.licenseType,ruleTypeId:o.ruleTypeId,onConfirm:()=>{window.open(`${s.basePath.get()}/app/management/stack/license_management`,"_blank"),u(null)},onCancel:()=>u(null)}))}function Va({date:e}){return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"none"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiText,{color:"subdued",size:"xs"},Ye()(e).fromNow()))))}function Ua({currentRule:e,onSave:t}){const{triggersActionsUi:a}=Object(h.a)().services,[i,r]=Object(l.useState)(!1);Object(l.useEffect)((()=>{r(!0)}),[e]);const s=Object(l.useMemo)((()=>a.getEditAlertFlyout({initialRule:e,onClose:()=>{r(!1)},onSave:t})),[e,r,a,t]);return n.a.createElement(n.a.Fragment,null,i&&s)}function $a({idsToDelete:e,apiDeleteCall:t,onDeleted:a,onCancel:r,onErrors:s,singleTitle:o,multipleTitle:u,setIsLoadingState:c}){const[d,m]=Object(l.useState)(!1);Object(l.useEffect)((()=>{m(e.length>0)}),[e]);const{http:p,notifications:{toasts:b}}=Object(h.a)().services,g=e.length;return d?n.a.createElement(j.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:Oa(g,o,u),onCancel:()=>{m(!1),r()},onConfirm:async()=>{m(!1),c(!0);const{successes:l,errors:n}=await t({ids:e,http:p});c(!1);const r=l.length,d=n.length;r>0&&b.addSuccess(((e,t,a)=>i.i18n.translate("xpack.observability.rules.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:a}}))(r,o,u)),d>0&&(b.addDanger(((e,t,a)=>i.i18n.translate("xpack.observability.rules.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:a}}))(d,o,u)),await s()),await a(l)},cancelButtonText:Ca,confirmButtonText:Oa(g,o,u)},((e,t,a)=>i.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You can't recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:a}}))(g,o,u)):null}function qa({onCTAClicked:e,documentationLink:t}){return n.a.createElement(j.EuiPageTemplate,{template:"centeredContent",pageContentProps:{paddingSize:"none",role:null}},n.a.createElement(j.EuiEmptyPrompt,{color:"plain",hasBorder:!0,"data-test-subj":"createFirstRuleEmptyPrompt",title:n.a.createElement("h2",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.emptyPrompt.emptyTitle",defaultMessage:"Create your first Rule"})),body:n.a.createElement("p",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.noDataPrompt.noDataDesc",defaultMessage:"Rules allow you to receive alerts and automate custom actions when specific conditions are met."})),actions:[n.a.createElement(j.EuiButton,{iconType:"plusInCircle","data-test-subj":"createFirstRuleButton",key:"create-action",fill:!0,onClick:e},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.emptyPrompt.emptyButton",defaultMessage:"Create Rule"})),n.a.createElement(j.EuiButtonEmpty,{color:"primary"},n.a.createElement(j.EuiLink,{"data-test-subj":"documentationLink",href:t,target:"_blank"},"Documentation"))]}))}function Ha(){return n.a.createElement(j.EuiPageTemplate,{template:"centeredContent","data-test-subj":"noPermissionPrompt",pageContentProps:{paddingSize:"none",role:null}},n.a.createElement(j.EuiEmptyPrompt,{"data-test-subj":"noPermissionPrompt",color:"plain",hasBorder:!0,iconType:"securityApp",title:n.a.createElement("h1",null,n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.noPermissionToCreateTitle",defaultMessage:"No permissions to create rules"})),body:n.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))}))}function Ka({size:e}){return n.a.createElement(j.EuiFlexGroup,{"data-test-subj":"centerJustifiedSpinner",justifyContent:"center"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiLoadingSpinner,{size:e||"xl"})))}function Wa(){const{ObservabilityPageTemplate:e,kibanaFeatures:t}=Object(S.a)(),{http:a,docLinks:r,triggersActionsUi:s,application:{capabilities:o},notifications:{toasts:u}}=Object(h.a)().services,c=r.links.observability.createAlerts,d=s.ruleTypeRegistry,m=(e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute})(o),[p,b]=Object(l.useState)({index:0,size:25}),[g,E]=Object(l.useState)({field:"name",direction:"asc"}),[y,f]=Object(l.useState)(),[v,x]=Object(l.useState)(),[k,T]=Object(l.useState)([]),[F,O]=Object(l.useState)([]),{lastResponse:C,setLastResponse:M}=la(),{status:I,setStatus:A}=la(),[R,z]=Object(l.useState)(null),[D,P]=Object(l.useState)([]),[_,B]=Object(l.useState)(!1),[N,G]=Object(l.useState)(-1),V=e=>!!d.has(e)&&!d.get(e).requiresAppContext,{rulesState:U,setRulesState:$,reload:H,noData:J,initialLoad:Q,tagsState:X}=function({searchText:e,ruleLastResponseFilter:t,ruleStatusesFilter:a,typesFilter:i,tagsFilter:n,setPage:r,page:s,sort:o}){const{http:u}=Object(h.a)().services,{observabilityRuleTypeRegistry:c}=Object(S.a)(),[d,m]=Object(l.useState)({isLoading:!1,data:[],error:null,totalItemCount:0}),[p,b]=Object(l.useState)(!0),[g,E]=Object(l.useState)(!0),[y,f]=Object(l.useState)({data:[],error:null}),v=Object(l.useCallback)((async()=>{try{const e=await Object(q.loadRuleTags)({http:u});null!=e&&e.ruleTags&&f({data:e.ruleTags,error:null})}catch(e){f((e=>({...e,error:Sa})))}}),[u]),x=Object(l.useCallback)((async()=>{m((e=>({...e,isLoading:!0})));try{var l;const d=await Object(q.loadRules)({http:u,page:s,searchText:e,typesFilter:i.length>0?i:c.list(),tagsFilter:n,ruleExecutionStatusesFilter:t,ruleStatusesFilter:a,sort:o});await v(),m((e=>({...e,isLoading:!1,data:d.data,totalItemCount:d.total}))),(null===(l=d.data)||void 0===l||!l.length)&&s.index>0&&r({...s,index:0});const p=!(Object(w.isEmpty)(e)&&Object(w.isEmpty)(t)&&Object(w.isEmpty)(i)&&Object(w.isEmpty)(n)&&Object(w.isEmpty)(a));b(0===d.data.length&&!p)}catch(e){m((e=>({...e,isLoading:!1,error:Ta})))}E(!1)}),[u,s,e,i,c,n,t,a,o,v,r]);return Object(l.useEffect)((()=>{x()}),[x]),{rulesState:d,reload:x,setRulesState:m,noData:p,initialLoad:g,tagsState:y}}({searchText:v,ruleLastResponseFilter:C,ruleStatusesFilter:I,typesFilter:F,tagsFilter:k,page:p,setPage:b,sort:g}),{data:Y,totalItemCount:Z,error:ee}=U,{data:te,error:ae}=X,{ruleTypeIndex:ie,ruleTypes:le}=Object(q.useLoadRuleTypes)({filteredSolutions:za}),ne=[...le.values()],re=ne.some((e=>{var t;return null===(t=e.authorizedConsumers[Zt.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all}));Object(W.a)([{text:i.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:a.basePath.prepend("/app/observability/alerts")},{text:ka}]),Object(l.useEffect)((()=>{ae&&u.addDanger({title:ae}),ee&&u.addDanger({title:ee})}),[ae,ee,u]);const se=Object(l.useMemo)((()=>s.getAddAlertFlyout({consumer:Zt.ALERTS_FEATURE_ID,onClose:()=>{B(!1),H()},filteredSolutions:za})),[]),oe=Object(l.useCallback)((e=>{A(e)}),[A]),ue=Object(l.useCallback)((e=>{M(e)}),[M]);return n.a.createElement(e,{pageHeader:{pageTitle:n.a.createElement(n.a.Fragment,null,ha," ",n.a.createElement(K.a,null)),rightSideItems:[re&&n.a.createElement(j.EuiButton,{iconType:"plusInCircle",key:"create-alert","data-test-subj":"createRuleButton",fill:!0,onClick:()=>B(!0)},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.addRuleButtonLabel",defaultMessage:"Create rule"})),n.a.createElement(j.EuiButtonEmpty,{href:c,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.docsLinkText",defaultMessage:"Documentation"}))]}},n.a.createElement($a,{onDeleted:async()=>{P([]),H()},onErrors:async()=>{H(),P([])},onCancel:()=>{P([])},apiDeleteCall:q.deleteRules,idsToDelete:D,singleTitle:Fa,multipleTitle:wa,setIsLoadingState:e=>{$({...U,isLoading:e})}}),J&&!U.isLoading?re?n.a.createElement(qa,{documentationLink:c,onCTAClicked:()=>B(!0)}):n.a.createElement(Ha,null):Q?n.a.createElement(Ka,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFieldSearch,{fullWidth:!0,isClearable:!0,"data-test-subj":"ruleSearchField",onChange:e=>{f(e.target.value),""===e.target.value&&x(e.target.value)},onKeyUp:e=>{13===e.keyCode&&x(y)},placeholder:ja})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(Ba,{key:"type-filter",onChange:e=>O(e),options:Object(w.sortBy)(Object.entries(ne.reduce(((e,t)=>{const a=t.producer;return(e[a]=e[a]||[]).push({value:t.id,name:t.name}),e}),{}))).map((([e,a])=>{var i,l,n;return{groupName:null!==(l=e,i=null==t||null===(n=t.find((e=>e.id===l)))||void 0===n?void 0:n.name)&&void 0!==i?i:Object(w.capitalize)(e),subOptions:a.sort(((e,t)=>e.name.localeCompare(t.name)))}}))})),n.a.createElement(j.EuiFlexItem,{grow:!1},s.getRuleTagFilter({tags:te,selectedTags:k,onChange:e=>T(e)})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(_a,{key:"rule-lastResponse-filter",selectedStatuses:C,onChange:ue})),n.a.createElement(j.EuiFlexItem,{grow:!1},s.getRuleStatusFilter({selectedStatuses:I,onChange:oe})),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiButton,{"data-test-subj":"refreshRulesButton",iconType:"refresh",onClick:H,name:"refresh",color:"primary"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.refreshRulesButtonLabel",defaultMessage:"Refresh"})))),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiText,{size:"s",color:"subdued","data-test-subj":"totalAlertsCount"},n.a.createElement(L.FormattedMessage,{id:"xpack.observability.rules.totalItemsCountDescription",defaultMessage:"Showing: {pageSize} of {totalItemCount} Rules",values:{totalItemCount:Z,pageSize:Y.length}})))),n.a.createElement(j.EuiHorizontalRule,{margin:"xs"}),n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(Ma,{columns:[{field:"name",name:ba,sortable:!0,truncateText:!0,width:"30%","data-test-subj":"rulesTableCell-name",render:(e,t)=>n.a.createElement(La,{name:e,rule:t})},{field:"tags",name:"",sortable:!1,width:"50px","data-test-subj":"rulesTableCell-tagsPopover",render:(e,t)=>e.length>0?s.getRuleTagBadge({isOpen:N===t.index,tags:e,onClick:()=>G(t.index),onClose:()=>G(-1)}):null},{field:"executionStatus.lastExecutionDate",name:pa,sortable:!0,render:e=>n.a.createElement(Va,{date:e})},{field:"executionStatus.status",name:ma,sortable:!0,truncateText:!1,width:"120px","data-test-subj":"rulesTableCell-status",render:(e,t)=>{var a;return n.a.createElement(Ga,{executionStatus:t.executionStatus,item:t,licenseType:null===(a=ie.get(t.ruleTypeId))||void 0===a?void 0:a.minimumLicenseRequired})}},{field:"enabled",name:ga,sortable:!0,"data-test-subj":"rulesTableCell-ContextStatus",render:(e,t)=>s.getRuleStatusDropdown({rule:t,enableRule:async()=>await Object(q.enableRule)({http:a,id:t.id}),disableRule:async()=>await Object(q.disableRule)({http:a,id:t.id}),onRuleChanged:()=>H(),isEditable:t.isEditable&&V(t.ruleTypeId),snoozeRule:async e=>{await Object(q.snoozeRule)({http:a,id:t.id,snoozeEndTime:e})},unsnoozeRule:async()=>await Object(q.unsnoozeRule)({http:a,id:t.id})})},{name:Ea,width:"10%",render:e=>n.a.createElement(j.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1,className:"ruleSidebarItem"},n.a.createElement(j.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarEditAction"},n.a.createElement(j.EuiButtonIcon,{isDisabled:!(e.isEditable&&V(e.ruleTypeId)),color:"primary",title:fa,className:"ruleSidebarItem__action","data-test-subj":"editActionHoverButton",onClick:()=>{z(e)},iconType:"pencil","aria-label":ya})),n.a.createElement(j.EuiFlexItem,{grow:!1,"data-test-subj":"ruleSidebarDeleteAction"},n.a.createElement(j.EuiButtonIcon,{isDisabled:!e.isEditable,color:"danger",title:va,className:"ruleSidebarItem__action","data-test-subj":"deleteActionHoverButton",onClick:()=>P([e.id]),iconType:"trash","aria-label":xa})))))}],rules:Pa(Y,ie,m),isLoading:U.isLoading,page:p,totalItemCount:Z,onPageChange:e=>b(e),sort:g,onSortChange:e=>{E(e)}})))),R&&n.a.createElement(Ua,{onSave:H,currentRule:R}),_&&se)}function Ja(){return n.a.createElement(aa,{value:ta},n.a.createElement(Wa,null))}const Qa=e=>i.i18n.translate("xpack.observability.ruleDetails.ruleLoadError",{defaultMessage:"Unable to load rule. Reason: {message}",values:{message:e}}),Xa=(i.i18n.translate("xpack.observability.ruleDetails.tagsTitle",{defaultMessage:"Tags"}),i.i18n.translate("xpack.observability.ruleDetails.lastUpdatedMessage",{defaultMessage:"Last updated"})),Ya=i.i18n.translate("xpack.observability.ruleDetails.byWord",{defaultMessage:"by"}),Za=i.i18n.translate("xpack.observability.ruleDetails.onWord",{defaultMessage:"on"}),ei=i.i18n.translate("xpack.observability.ruleDetails.createdWord",{defaultMessage:"Created"});function ti({rule:e}){const{triggersActionsUi:t}=Object(h.a)().services,[a,i]=Object(l.useState)(!1);return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiFlexGroup,{alignItems:"center"},n.a.createElement(j.EuiFlexItem,{grow:!1,"data-test-subj":"ruleName"},e.name),n.a.createElement(K.a,null)),n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiSpacer,{size:"xs"}),n.a.createElement(j.EuiText,{size:"xs"},n.a.createElement(j.EuiBadge,{color:Aa(e.executionStatus.status)},e.executionStatus.status.charAt(0).toUpperCase()+e.executionStatus.status.slice(1))),n.a.createElement(j.EuiSpacer,{size:"s"})),n.a.createElement(j.EuiFlexGroup,{alignItems:"baseline"},n.a.createElement(j.EuiFlexItem,{component:"span",grow:!1},n.a.createElement(j.EuiText,{color:"subdued",size:"xs"},n.a.createElement("b",null,Xa)," ",Ya," ",e.updatedBy," ",Za," ",Ye()(e.updatedAt).format("ll"),"  ",n.a.createElement("b",null,ei)," ",Ya," ",e.createdBy," ",Za," ",Ye()(e.createdAt).format("ll"))),e.tags.length>0&&t.getRuleTagBadge({isOpen:a,tags:e.tags,onClick:()=>i((t=>e.tags.length>0&&!t)),onClose:()=>i(!1)})))}function ai({children:e}){return n.a.createElement(j.EuiTitle,{size:"xxs"},n.a.createElement(j.EuiFlexItem,{style:{whiteSpace:"nowrap"},grow:1},e))}function ii({itemValue:e,extraSpace:t=!0,...a}){return n.a.createElement(j.EuiFlexItem,Me()({grow:t?3:1},a),n.a.createElement(j.EuiText,{size:"s"},e))}function li({ruleActions:e,actionTypeRegistry:t}){const{http:a,notifications:{toasts:r}}=Object(h.a)().services,{isLoadingActions:s,allActions:o,errorActions:u}=function({http:e}){const[t,a]=Object(l.useState)({isLoadingActions:!0,allActions:[],errorActions:void 0}),n=Object(l.useCallback)((async()=>{try{const t=await Object(q.loadAllActions)({http:e});a((e=>({...e,isLoadingActions:!1,allActions:t})))}catch(e){a((t=>{return{...t,isLoadingActions:!1,errorActions:(a=e instanceof Error?e.message:"string"==typeof e?e:"",i.i18n.translate("xpack.observability.ruleDetails.connectorsLoadError",{defaultMessage:"Unable to load rule actions connectors. Reason: {message}",values:{message:a}}))};var a}))}}),[e]);return Object(l.useEffect)((()=>{n()}),[n]),{...t,reloadRuleActions:n}}({http:a});if(Object(l.useEffect)((()=>{u&&r.addDanger({title:u})}),[u,r]),e&&e.length<=0)return n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiText,{size:"s"},i.i18n.translate("xpack.observability.ruleDetails.noActions",{defaultMessage:"No actions"})));function c(e){const a=t.list().find((t=>t.id===e));return"string"==typeof(null==a?void 0:a.iconClass)?null==a?void 0:a.iconClass:Object(q.suspendedComponentWithProps)(null==a?void 0:a.iconClass)}const d=Object(w.intersectionBy)(o,e,"actionTypeId");return s?n.a.createElement(j.EuiLoadingSpinner,{size:"s"}):n.a.createElement(j.EuiFlexGroup,{direction:"column"},d.map((({actionTypeId:e,name:t})=>{var a;return n.a.createElement(n.a.Fragment,{key:e},n.a.createElement(j.EuiFlexGroup,{alignItems:"center",gutterSize:"s",component:"span"},n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiIcon,{size:"m",type:null!==(a=c(e))&&void 0!==a?a:"apps"})),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiText,{"data-test-subj":`actionConnectorName-${t}`,size:"s"},t))),n.a.createElement(j.EuiSpacer,{size:"s"}))})))}function ni({http:e,ruleId:t}){const{notifications:{toasts:a}}=Object(h.a)().services,[n,r]=Object(l.useState)({isLoadingExecutionLog:!0,executionLog:{total:0,data:[],totalErrors:0,errors:[]},errorExecutionLog:void 0}),s=Object(l.useCallback)((async()=>{try{const a=(new Date).toISOString(),i=await Object(q.loadExecutionLogAggregations)({id:t,dateStart:Ye()(a).subtract(24,"h").toISOString(),dateEnd:a,http:e});r((e=>({...e,isLoadingExecutionLog:!1,executionLog:i})))}catch(e){a.addDanger({title:e}),r((t=>{return{...t,isLoadingExecutionLog:!1,errorExecutionLog:(a=e instanceof Error?e.message:"string"==typeof e?e:"",i.i18n.translate("xpack.observability.ruleDetails.executionLogError",{defaultMessage:"Unable to load rule execution log. Reason: {message}",values:{message:a}}))};var a}))}}),[e,t,a]);return Object(l.useEffect)((()=>{s()}),[s]),{...n,reloadExecutionLogs:ni}}const ri=e=>{const t=e.match(/(^\d*)([s|m|h|d])/);if(!t||t.length<3)return e;const a=+t[1],i=t[2];return Object(x.formatDurationFromTimeUnitChar)(a,i)};function si(){var e;const{http:t,triggersActionsUi:{alertsTableConfigurationRegistry:a,ruleTypeRegistry:r,getRuleStatusDropdown:s,getEditAlertFlyout:u,actionTypeRegistry:c,getRuleEventLogList:d,getAlertsStateTable:m},application:{capabilities:p,navigateToUrl:b},notifications:{toasts:g}}=Object(h.a)().services,{ruleId:E}=Object(o.useParams)(),{ObservabilityPageTemplate:y}=Object(S.a)(),{isRuleLoading:f,rule:v,errorRule:k,reloadRule:T}=function({ruleId:e,http:t}){const[a,i]=Object(l.useState)({isRuleLoading:!0,rule:void 0,errorRule:void 0}),n=Object(l.useCallback)((async()=>{try{const a=await Object(q.loadRule)({http:t,ruleId:e});i((e=>({...e,isRuleLoading:!1,rule:a})))}catch(e){i((t=>({...t,isRuleLoading:!1,errorRule:Qa(e instanceof Error?e.message:"string"==typeof e?e:"")})))}}),[e,t]);return Object(l.useEffect)((()=>{n()}),[n]),{...a,reloadRule:n}}({ruleId:E,http:t}),{isLoadingExecutionLog:F,executionLog:w}=ni({http:t,ruleId:E}),{ruleTypes:O,ruleTypeIndex:C}=Object(q.useLoadRuleTypes)({filteredSolutions:za}),[M,I]=Object(l.useState)(""),[L,A]=Object(l.useState)(),[R,z]=Object(l.useState)([]),[D,P]=Object(l.useState)(!1),{isLoadingLast24hAlerts:_,last24hAlerts:B}=function({http:e,features:t,ruleId:a}){const[i,n]=Object(l.useState)({isLoadingLast24hAlerts:!0,last24hAlerts:0,errorLast24hAlerts:void 0}),r=Object(l.useRef)(!1),s=Object(l.useRef)(new AbortController),o=Object(l.useCallback)((async()=>{r.current=!1,s.current.abort(),s.current=new AbortController;try{if(!t)return;const{index:i}=await async function({http:e,features:t}){return{index:(await e.get("/internal/rac/alerts/index",{query:{features:t}})).index_name[0]}}({http:e,features:t}),{error:l,alertsCount:o}=await async function({http:e,index:t,ruleId:a,signal:i}){try{return{error:null,alertsCount:(await e.post("/internal/rac/alerts/find",{signal:i,body:JSON.stringify({index:t,query:{bool:{must:[{term:{"kibana.alert.rule.uuid":a}},{range:{"@timestamp":{gte:"now-24h",lt:"now"}}}]}},aggs:{alerts_count:{cardinality:{field:"kibana.alert.uuid"}}}})})).aggregations.alerts_count.value}}catch(e){return{error:e,alertsCount:0}}}({http:e,index:i,ruleId:a,signal:s.current.signal});if(l)throw l;r.current||n((e=>({...e,last24hAlerts:o,isLoadingLast24hAlerts:!1})))}catch(e){r.current||"AbortError"!==e.name&&n((t=>({...t,isLoadingLast24hAlerts:!1,errorLast24hAlerts:Qa(e instanceof Error?e.message:"string"==typeof e?e:"")})))}}),[e,t,a]);return Object(l.useEffect)((()=>{o()}),[o]),i}({http:t,features:M,ruleId:E}),[N,G]=Object(l.useState)(!1),[V,U]=Object(l.useState)(!1),$=Object(l.useRef)([]);Object(l.useEffect)((()=>{(async()=>{$.current=await Object(q.getNotifyWhenOptions)()})()}),[]);const H=Object(l.useCallback)((()=>U(!1)),[]),K=Object(l.useCallback)((()=>U(!0)),[]),J=Object(l.useCallback)((()=>{U(!1),v&&z([v.id])}),[v]),Q=Object(l.useCallback)((()=>{U(!1),G(!0)}),[]);Object(l.useEffect)((()=>{if(O.length&&v){const e=O.find((e=>e.id===v.ruleTypeId));A(e),v.consumer===Zt.ALERTS_FEATURE_ID&&e&&e.producer?I(e.producer):I(v.consumer)}}),[v,O]),Object(W.a)([{text:i.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:t.basePath.prepend(Ia.a.observability.alerts)},{href:t.basePath.prepend(Ia.a.observability.rules),text:ka},{text:v&&v.name}]);const X=(e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute})(p),Y=v&&function(e,t){var a,i;return null!==(a=null==t||null===(i=t.authorizedConsumers[e.consumer])||void 0===i?void 0:i.all)&&void 0!==a&&a}(v,L)&&(X||!X&&0===v.actions.length),Z=Y&&!!r.has(v.ruleTypeId)&&!r.get(v.ruleTypeId).requiresAppContext,ee=()=>{const e=null!=v&&v.params.criteria?(null==v?void 0:v.params.criteria).length:0;return n.a.createElement(n.a.Fragment,null,e," ",i.i18n.translate("xpack.observability.ruleDetails.conditions",{defaultMessage:"condition{s}",values:{s:e>1?"s":""}}))},te={alertsTableConfigurationRegistry:a,configurationId:x.observabilityFeatureId,id:"case-details-alerts-o11y",flyoutState:q.AlertsTableFlyoutState.external,featureIds:[M],query:{bool:{filter:[{term:{"kibana.alert.rule.uuid":E}}]}},showExpandToDetails:!1},ae=[{id:"rule_event_log_list",name:i.i18n.translate("xpack.observability.ruleDetails.rule.eventLogTabText",{defaultMessage:"Execution history"}),"data-test-subj":"eventLogListTab",content:d({rule:v})},{id:"rule_alert_list",name:i.i18n.translate("xpack.observability.ruleDetails.rule.alertsTabText",{defaultMessage:"Alerts"}),"data-test-subj":"ruleAlertListTab",content:n.a.createElement(n.a.Fragment,null,n.a.createElement(j.EuiSpacer,{size:"m"}),m(te))}];if(D||f)return n.a.createElement(Ka,null);if(!v||k)return n.a.createElement(j.EuiPanel,null,n.a.createElement(j.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:n.a.createElement("h2",null,i.i18n.translate("xpack.observability.ruleDetails.errorPromptTitle",{defaultMessage:"Unable to load rule details"})),body:n.a.createElement("p",null,i.i18n.translate("xpack.observability.ruleDetails.errorPromptBody",{defaultMessage:"There was an error loading the rule details."}))}));const ie=()=>s({rule:v,enableRule:async()=>await Object(q.enableRule)({http:t,id:v.id}),disableRule:async()=>await Object(q.disableRule)({http:t,id:v.id}),onRuleChanged:()=>T(),isEditable:Z,snoozeRule:async e=>{await Object(q.snoozeRule)({http:t,id:v.id,snoozeEndTime:e})},unsnoozeRule:async()=>await Object(q.unsnoozeRule)({http:t,id:v.id})});return n.a.createElement(y,{"data-test-subj":"ruleDetails",pageHeader:{pageTitle:n.a.createElement(ti,{rule:v}),bottomBorder:!1,rightSideItems:Z?[n.a.createElement(j.EuiFlexGroup,{direction:"rowReverse",alignItems:"center"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiPopover,{id:"contextRuleEditMenu",isOpen:V,closePopover:H,button:n.a.createElement(j.EuiButtonIcon,{display:"base",size:"m",iconType:"boxesHorizontal","aria-label":"More",onClick:K,"data-test-subj":"moreButton"})},n.a.createElement(j.EuiFlexGroup,{direction:"column",alignItems:"flexStart"},n.a.createElement(j.EuiButtonEmpty,{"data-test-subj":"editRuleButton",size:"s",iconType:"pencil",onClick:Q},n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiText,{size:"s"},i.i18n.translate("xpack.observability.ruleDetails.editRule",{defaultMessage:"Edit rule"}))),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiButtonEmpty,{size:"s",iconType:"trash",color:"danger",onClick:J,"data-test-subj":"deleteRuleButton"},n.a.createElement(j.EuiText,{size:"s"},i.i18n.translate("xpack.observability.ruleDetails.deleteRule",{defaultMessage:"Delete rule"}))),n.a.createElement(j.EuiSpacer,{size:"s"})))),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiTitle,{size:"xxs"},n.a.createElement(j.EuiFlexItem,null,i.i18n.translate("xpack.observability.ruleDetails.triggreAction.status",{defaultMessage:"Status"}))),ie()))]:[]}},n.a.createElement(j.EuiFlexGroup,{wrap:!0,gutterSize:"m"},n.a.createElement(j.EuiFlexItem,{"data-test-subj":"ruleSummaryRuleStatus",grow:1},n.a.createElement(j.EuiPanel,{color:"subdued",hasBorder:!1,paddingSize:"m"},n.a.createElement(j.EuiFlexGroup,{direction:"column",gutterSize:"xs"},n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.lastRun",{defaultMessage:"Last Run"})),n.a.createElement(ii,{extraSpace:!1,itemValue:Ye()(v.executionStatus.lastExecutionDate).fromNow()})),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.ruleIs",{defaultMessage:"Rule is"})),n.a.createElement(j.EuiFlexItem,null,ie())),n.a.createElement(j.EuiHorizontalRule,{margin:"s"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.alerts",{defaultMessage:"Alerts"})),_?n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiLoadingSpinner,{size:"s"})):n.a.createElement(ii,{extraSpace:!1,itemValue:`\n                    ${String(B)} ${i.i18n.translate("xpack.observability.ruleDetails.last24h",{defaultMessage:"(last 24 h)"})}`})),n.a.createElement(j.EuiSpacer,{size:"s"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.execution",{defaultMessage:"Executions"})),F?n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiLoadingSpinner,{size:"s"})):n.a.createElement(ii,{extraSpace:!1,itemValue:`\n                        ${String(w.total)} ${i.i18n.translate("xpack.observability.ruleDetails.last24h",{defaultMessage:"(last 24 h)"})}`}))))),n.a.createElement(j.EuiFlexItem,{"data-test-subj":"ruleSummaryRuleDefinition",grow:3},n.a.createElement(j.EuiPanel,{color:"subdued",hasBorder:!1,paddingSize:"m"},n.a.createElement(j.EuiFlexGroup,{justifyContent:"spaceBetween"},n.a.createElement(j.EuiTitle,{size:"s"},n.a.createElement(j.EuiFlexItem,{grow:!1},i.i18n.translate("xpack.observability.ruleDetails.definition",{defaultMessage:"Definition"}))),Z&&n.a.createElement(j.EuiFlexItem,{grow:!1},n.a.createElement(j.EuiButtonEmpty,{iconType:"pencil",onClick:()=>G(!0)}))),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,{alignItems:"baseline"},n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.ruleType",{defaultMessage:"Rule type"})),n.a.createElement(ii,{"data-test-subj":"ruleSummaryRuleType",itemValue:(null===(e=C.get(v.ruleTypeId))||void 0===e?void 0:e.name)||v.ruleTypeId})),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,{alignItems:"flexStart",responsive:!1},n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.description",{defaultMessage:"Description"})),n.a.createElement(ii,{itemValue:r.get(v.ruleTypeId).description})),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.conditionsTitle",{defaultMessage:"Conditions"})),n.a.createElement(j.EuiFlexItem,{grow:3},n.a.createElement(j.EuiFlexGroup,{alignItems:"center"},Z?n.a.createElement(j.EuiButtonEmpty,{onClick:()=>G(!0)},n.a.createElement(j.EuiText,{size:"s"},ee())):n.a.createElement(j.EuiText,{size:"s"},ee()))))),n.a.createElement(j.EuiFlexItem,null,n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.runsEvery",{defaultMessage:"Runs every"})),n.a.createElement(ii,{itemValue:ri(v.schedule.interval)})),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,null,n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.notifyWhen",{defaultMessage:"Notify"})),n.a.createElement(ii,{itemValue:String((null===(le=$.current.find((e=>e.value===(null==v?void 0:v.notifyWhen))))||void 0===le?void 0:le.inputDisplay)||v.notifyWhen)})),n.a.createElement(j.EuiSpacer,{size:"m"}),n.a.createElement(j.EuiFlexGroup,{alignItems:"baseline"},n.a.createElement(ai,null,i.i18n.translate("xpack.observability.ruleDetails.actions",{defaultMessage:"Actions"})),n.a.createElement(j.EuiFlexItem,{grow:3},n.a.createElement(li,{ruleActions:v.actions,actionTypeRegistry:c})))))))),n.a.createElement(j.EuiSpacer,{size:"l"}),n.a.createElement(j.EuiTabbedContent,{"data-test-subj":"ruleDetailsTabbedContent",tabs:ae}),N&&u({initialRule:v,onClose:()=>{G(!1)},onSave:T}),n.a.createElement($a,{onDeleted:()=>{z([]),b(t.basePath.prepend(Ia.a.observability.rules))},onErrors:()=>{z([]),b(t.basePath.prepend(Ia.a.observability.rules))},onCancel:()=>z([]),apiDeleteCall:q.deleteRules,idsToDelete:R,singleTitle:v.name,multipleTitle:v.name,setIsLoadingState:()=>P(!0)}),k&&g.addDanger({title:k}));var le}const oi={"/":{handler:()=>n.a.createElement(Ge,null),params:{},exact:!0},"/landing":{handler:()=>n.a.createElement(Ue,null),params:{},exact:!0},"/overview":{handler:({query:e})=>n.a.createElement(Wt,{routeParams:{query:e}}),params:{query:E.partial({rangeFrom:E.string,rangeTo:E.string,refreshPaused:Xt.pipe(E.boolean),refreshInterval:Xt.pipe(E.number),alpha:Xt.pipe(E.boolean)})},exact:!0},[x.casesPath]:{handler:()=>n.a.createElement(v.TrackApplicationView,{viewId:M.a.cases},n.a.createElement(Ne,null)),params:{},exact:!1},"/alerts":{handler:()=>n.a.createElement(v.TrackApplicationView,{viewId:M.a.alerts},n.a.createElement(he,null)),params:{},exact:!0},"/exploratory-view/":{handler:()=>n.a.createElement(Yt.a,null),params:{query:E.partial({rangeFrom:E.string,rangeTo:E.string,refreshPaused:Xt.pipe(E.boolean),refreshInterval:Xt.pipe(E.number)})},exact:!0},"/alerts/rules":{handler:()=>n.a.createElement(v.TrackApplicationView,{viewId:M.a.rules},n.a.createElement(Ja,null)),params:{},exact:!0},"/alerts/rules/:ruleId":{handler:()=>n.a.createElement(si,null),params:{},exact:!0}};function ui(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.Switch,null,Object.keys(oi).map((e=>{const t=e,{handler:a,exact:i}=oi[t];return n.a.createElement(o.Route,{key:t,path:t,exact:i,component:()=>{const e=function(e){const t=Object(o.useLocation)(),a=Object(o.useParams)(),i=function(e){const t=new URLSearchParams(e.search),a={};return t.forEach(((e,t)=>{a[t]=e})),a}(t),{query:l,path:n}=oi[e].params,r={queryRt:l?E.exact(l):E.strict({}),pathRt:n?E.exact(n):E.strict({})},s=r.queryRt.decode(i),u=r.pathRt.decode(a);return Object(y.isLeft)(s)&&console.error(f.PathReporter.report(s)[0]),Object(y.isLeft)(u)&&console.error(f.PathReporter.report(u)[0]),{query:Object(y.isLeft)(s)?{}:s.right,path:Object(y.isLeft)(u)?{}:u.right}}(t);return a(e)}})}))))}const ci=({config:e,core:t,plugins:a,appMountParameters:l,observabilityRuleTypeRegistry:r,ObservabilityPageTemplate:E,kibanaFeatures:y,usageCollection:f})=>{var v;const{element:x,history:h,theme$:k}=l,T=t.i18n,S=t.uiSettings.get("theme:darkMode");t.chrome.setHelpExtension({appName:i.i18n.translate("xpack.observability.feedbackMenu.appName",{defaultMessage:"Observability"}),links:[{linkType:"discuss",href:"https://ela.st/observability-discuss"}]}),x.classList.add(u.APP_WRAPPER_CLASS);const F=null!==(v=null==f?void 0:f.components.ApplicationUsageTrackingProvider)&&void 0!==v?v:n.a.Fragment;return s.a.render(n.a.createElement(F,null,n.a.createElement(d.KibanaThemeProvider,{theme$:k},n.a.createElement(d.KibanaContextProvider,{services:{...t,...a,storage:new m.Storage(localStorage)}},n.a.createElement(g.a.Provider,{value:{appMountParameters:l,config:e,core:t,plugins:a,observabilityRuleTypeRegistry:r,ObservabilityPageTemplate:E,kibanaFeatures:y}},n.a.createElement(o.Router,{history:h},n.a.createElement(c.EuiThemeProvider,{darkMode:S},n.a.createElement(T.Context,null,n.a.createElement(d.RedirectAppLinks,{application:t.application,className:u.APP_WRAPPER_CLASS},n.a.createElement(p.b,null,n.a.createElement(b.b,null,n.a.createElement(ui,null))))))))))),x),()=>{s.a.unmountComponentAtNode(x)}}}}]);