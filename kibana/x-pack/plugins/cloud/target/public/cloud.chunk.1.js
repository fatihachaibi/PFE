/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloud_bundle_jsonpfunction=window.cloud_bundle_jsonpfunction||[]).push([[1],[,,,,,,,,,,,,,,,,,function(t,n,e){t.exports=e(9)(9)},function(t,n,e){t.exports=e(9)(2567)},function(t,n,e){t.exports=e(9)(6)},function(t,n,e){t.exports=e(9)(13)},function(t,n,e){t.exports=e(9)(15)},function(t,n,e){t.exports=e(9)(45)},,function(t,n,e){"use strict";e.r(n),e.d(n,"FullStoryShipper",(function(){return I}));var i=e(18),o=e.n(i),r=e(19),s=e.n(r),c=e(20),l=e.n(c),a=e(21),u=e.n(a),f=e(4),d=e.n(f),p=e(22),y=e.n(p),v=e(17),g=e.n(v),h=e(15),w=e.n(h),_=["uid","displayName","email","acctId","website","pageName"];function b(t){return Object.fromEntries(Object.entries(t).map((function(t){var n=g()(t,2),e=n[0],i=n[1];return Array.isArray(i)?[e,i.filter((function(t){return void 0!==t}))]:[e,i]})).filter((function(t){var n=g()(t,2)[1];return void 0!==n&&(!Array.isArray(n)||n.length>0)})).map((function(t){var n=g()(t,2),e=n[0],i=n[1];if(_.includes(e))return[e,i];if(function(t){return"object"===y()(t)&&null!==t&&!Array.isArray(t)&&!m(t)}(i))return[e,b(i)];var o=function(t){var n,e=Array.isArray(t),i=e?t[0]:t;switch(y()(i)){case"string":n=w()(i,w.a.ISO_8601,!0).isValid()?"date":"str";break;case"number":n=Number.isInteger(i)?"int":"real";break;case"boolean":n="bool";break;case"object":if(m(i)){n="date";break}default:throw new Error("Unsupported type: ".concat(y()(i)))}return e?"".concat(n,"s"):n}(i);return[o?"".concat(e,"_").concat(o):e,i]})))}function m(t){return t instanceof Date}var S=["eventTypesAllowlist"],A=["userId","isElasticCloudUser"],I=function(){function t(n,e){l()(this,t),d()(this,"fullStoryApi",void 0),d()(this,"lastUserId",void 0),d()(this,"eventTypesAllowlist",void 0),this.initContext=e;var i=n.eventTypesAllowlist,o=s()(n,S);this.fullStoryApi=function(t){var n,e,i,o,r,s,c,l,a=t.scriptUrl,u=void 0===a?"edge.fullstory.com/s/fs.js":a,f=t.fullStoryOrgId,d=t.host,p=void 0===d?"fullstory.com":d,y=t.namespace,v=void 0===y?"FS":y,g=t.debug,h=void 0!==g&&g;window._fs_debug=h,window._fs_host=p,window._fs_script=u,window._fs_org=f,window._fs_namespace=v,n=window,e=document,i=window._fs_namespace,o="script",r="user",i in n?n.console&&n.console.log&&n.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((c=n[i]=function(t,n,e){c.q?c.q.push([t,n,e]):c._api(t,n,e)}).q=[],(s=e.createElement(o)).async=1,s.crossOrigin="anonymous",s.src=_fs_script,(l=e.getElementsByTagName(o)[0]).parentNode.insertBefore(s,l),c.identify=function(t,n,e){c(r,{uid:t},e),n&&c(r,n,e)},c.setUserVars=function(t,n){c(r,t,n)},c.event=function(t,n,e){c("event",{n:t,p:n},e)},c.anonymize=function(){c.identify(!1)},c.shutdown=function(){c("rec",!1)},c.restart=function(){c("rec",!0)},c.log=function(t,n){c("log",[t,n])},c.consent=function(t){c("consent",!arguments.length||t)},c.identifyAccount=function(t,n){s="account",(n=n||{}).acctId=t,c(s,n)},c.clearUserCookie=function(){},c.setVars=function(t,n){c("setVars",[t,n])},c._w={},l="XMLHttpRequest",c._w[l]=n[l],l="fetch",c._w[l]=n[l],n[l]&&(n[l]=function(){return c._w[l].apply(this,arguments)}),c._v="1.3.0");var w=window[v];if(!w)throw new Error("FullStory snippet failed to load. Check browser logs for more information.");return w}(o),this.eventTypesAllowlist=i}return u()(t,[{key:"extendContext",value:function(t){this.initContext.logger.debug("Received context ".concat(JSON.stringify(t)));var n,e,i,r,c,l,a=t.userId,u=t.isElasticCloudUser,f=s()(t,A);a&&a!==this.lastUserId&&(this.initContext.logger.debug("Calling FS.identify with userId ".concat(a)),this.fullStoryApi.identify(a),this.lastUserId=a),"boolean"==typeof u&&(this.initContext.logger.debug("Calling FS.setUserVars with isElasticCloudUser ".concat(u)),this.fullStoryApi.setUserVars(b({isElasticCloudUser:u}))),Object.keys(f).length&&(f.applicationId&&(f.app_id=f.applicationId),f.entityId&&(f.ent_id=f.entityId),f.cloudId&&(f.org_id=f.cloudId),this.initContext.logger.debug("Calling FS.setVars with context ".concat(JSON.stringify(f))),this.fullStoryApi.setVars("page",o()(o()({},b(f)),f.version?(e=(n=f.version).split("."),r=(i=g()(e,3))[0],c=i[1],l=i[2],{version_str:n,version_major_int:parseInt(r,10),version_minor_int:parseInt(c,10),version_patch_int:parseInt(l,10)}):{})))}},{key:"optIn",value:function(t){this.initContext.logger.debug("Setting FS to optIn ".concat(t)),this.fullStoryApi.consent(t),t?this.fullStoryApi.restart():this.fullStoryApi.shutdown()}},{key:"reportEvents",value:function(t){var n=this;this.initContext.logger.debug("Reporting ".concat(t.length," events to FS")),t.filter((function(t){var e,i;return null===(e=null===(i=n.eventTypesAllowlist)||void 0===i?void 0:i.includes(t.event_type))||void 0===e||e})).forEach((function(t){n.fullStoryApi.event(t.event_type,b(t.properties))}))}},{key:"shutdown",value:function(){}}]),t}();d()(I,"shipperName","FullStory")}]]);