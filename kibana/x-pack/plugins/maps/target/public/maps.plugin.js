/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,c=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={2:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"maps.chunk."+e+".js"}(e);var u=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=a;i(i.s=53)}([function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.d(t,"fb",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"T",(function(){return c})),n.d(t,"eb",(function(){return d})),n.d(t,"M",(function(){return f})),n.d(t,"R",(function(){return p})),n.d(t,"G",(function(){return g})),n.d(t,"S",(function(){return m})),n.d(t,"Q",(function(){return h})),n.d(t,"L",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"nb",(function(){return _})),n.d(t,"mb",(function(){return y})),n.d(t,"pb",(function(){return E})),n.d(t,"W",(function(){return O})),n.d(t,"Jb",(function(){return S})),n.d(t,"Ib",(function(){return T})),n.d(t,"ab",(function(){return A})),n.d(t,"yb",(function(){return L})),n.d(t,"F",(function(){return I})),n.d(t,"V",(function(){return C})),n.d(t,"jb",(function(){return x})),n.d(t,"H",(function(){return M})),n.d(t,"vb",(function(){return N})),n.d(t,"xb",(function(){return P})),n.d(t,"wb",(function(){return w})),n.d(t,"ub",(function(){return R})),n.d(t,"kb",(function(){return j})),n.d(t,"gb",(function(){return D})),n.d(t,"p",(function(){return k})),n.d(t,"Gb",(function(){return F})),n.d(t,"v",(function(){return B})),n.d(t,"u",(function(){return U})),n.d(t,"t",(function(){return G})),n.d(t,"E",(function(){return V})),n.d(t,"ib",(function(){return q})),n.d(t,"B",(function(){return z})),n.d(t,"C",(function(){return $})),n.d(t,"D",(function(){return H})),n.d(t,"K",(function(){return Y})),n.d(t,"rb",(function(){return W})),n.d(t,"cb",(function(){return J})),n.d(t,"Y",(function(){return Z})),n.d(t,"A",(function(){return Q})),n.d(t,"y",(function(){return K})),n.d(t,"z",(function(){return X})),n.d(t,"a",(function(){return ee})),n.d(t,"b",(function(){return te})),n.d(t,"sb",(function(){return ne})),n.d(t,"N",(function(){return re})),n.d(t,"J",(function(){return ie})),n.d(t,"I",(function(){return oe})),n.d(t,"Cb",(function(){return ae})),n.d(t,"w",(function(){return se})),n.d(t,"k",(function(){return ue})),n.d(t,"l",(function(){return ce})),n.d(t,"Ab",(function(){return le})),n.d(t,"Z",(function(){return de})),n.d(t,"j",(function(){return fe})),n.d(t,"h",(function(){return pe})),n.d(t,"qb",(function(){return ge})),n.d(t,"Bb",(function(){return me})),n.d(t,"X",(function(){return he})),n.d(t,"s",(function(){return be})),n.d(t,"q",(function(){return ve})),n.d(t,"r",(function(){return _e})),n.d(t,"n",(function(){return ye})),n.d(t,"m",(function(){return Ee})),n.d(t,"db",(function(){return Oe})),n.d(t,"O",(function(){return Se})),n.d(t,"P",(function(){return Te})),n.d(t,"Eb",(function(){return Ae})),n.d(t,"tb",(function(){return Le})),n.d(t,"lb",(function(){return Ie})),n.d(t,"zb",(function(){return Ce})),n.d(t,"U",(function(){return xe})),n.d(t,"bb",(function(){return Me})),n.d(t,"Db",(function(){return Ne})),n.d(t,"hb",(function(){return Pe})),n.d(t,"o",(function(){return we})),n.d(t,"x",(function(){return Re})),n.d(t,"ob",(function(){return je})),n.d(t,"g",(function(){return De})),n.d(t,"Hb",(function(){return ke})),n.d(t,"Fb",(function(){return Fe}));var r=n(2);const i="map",o="maps",a="gisApp",s="logoKibana",u=r.i18n.translate("xpack.maps.visTypeAlias.title",{defaultMessage:"Maps"}),c="initialLayers",l=`app/${o}`,d="map",f=`api/${o}`,p=`${f}/indexSettings`,g=`${f}/fonts`,m=`${f}/docSource`,h=`/${f}/feature`,b=`/${f}/getMatchingIndexes`,v=`/${f}/checkIsDrawingIndex`,_="mvt/getTile",y="mvt/getGridTile",E="openLayerWizard",O="__kbn_is_centroid_feature__";function S(e){return`/${l}${T(e)}`}function T(e){return e?`/${d}/${e}`:`/${d}`}let A,L,I;!function(e){e.RASTER_TILE="RASTER_TILE",e.GEOJSON_VECTOR="GEOJSON_VECTOR",e.EMS_VECTOR_TILE="EMS_VECTOR_TILE",e.HEATMAP="HEATMAP",e.BLENDED_VECTOR="BLENDED_VECTOR",e.MVT_VECTOR="MVT_VECTOR"}(A||(A={})),function(e){e.EMS_TMS="EMS_TMS",e.EMS_FILE="EMS_FILE",e.ES_GEO_GRID="ES_GEO_GRID",e.ES_GEO_LINE="ES_GEO_LINE",e.ES_SEARCH="ES_SEARCH",e.ES_PEW_PEW="ES_PEW_PEW",e.ES_TERM_SOURCE="ES_TERM_SOURCE",e.EMS_XYZ="EMS_XYZ",e.WMS="WMS",e.KIBANA_TILEMAP="KIBANA_TILEMAP",e.GEOJSON_FILE="GEOJSON_FILE",e.MVT_SINGLE_LAYER="MVT_SINGLE_LAYER",e.TABLE_SOURCE="TABLE_SOURCE"}(L||(L={})),function(e){e.SOURCE="source",e.JOIN="join"}(I||(I={}));const C="__kbnjoin__",x="meta",M="formatters",N="source",P=`${N}_${x}`,w=`${N}_${M}`,R=`${N}_bounds`,j=0,D=24,k=5,F=2,B=1e4,U=100,G=65535,V="__kbn_isvisibleduetojoin__",q="_";let z;!function(e){e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape"}(z||(z={}));const $=["geo_point","geo_shape"];let H,Y;!function(e){e.INTERSECTS="INTERSECTS",e.DISJOINT="DISJOINT",e.WITHIN="WITHIN"}(H||(H={})),function(e){e.POINT="Point",e.MULTI_POINT="MultiPoint",e.LINE_STRING="LineString",e.MULTI_LINE_STRING="MultiLineString",e.POLYGON="Polygon",e.MULTI_POLYGON="MultiPolygon",e.GEOMETRY_COLLECTION="GeometryCollection"}(Y||(Y={}));const W=0,J=0,Z=1,Q={type:"FeatureCollection",features:[]};let K,X;!function(e){e.DRAW_SHAPES="DRAW_SHAPES",e.DRAW_POINTS="DRAW_POINTS",e.DRAW_FILTERS="DRAW_FILTERS",e.NONE="NONE"}(K||(K={})),function(e){e.BOUNDS="BOUNDS",e.DISTANCE="DISTANCE",e.POLYGON="POLYGON",e.POINT="POINT",e.LINE="LINE",e.SIMPLE_SELECT="SIMPLE_SELECT",e.DELETE="DELETE",e.WAIT="WAIT"}(X||(X={}));const ee="_of_";let te,ne,re;!function(e){e.AVG="avg",e.COUNT="count",e.MAX="max",e.MIN="min",e.SUM="sum",e.TERMS="terms",e.PERCENTILE="percentile",e.UNIQUE_COUNT="cardinality"}(te||(te={})),function(e){e.HEATMAP="heatmap",e.POINT="point",e.GRID="grid",e.HEX="hex"}(ne||(ne={})),function(e){e.COARSE="COARSE",e.FINE="FINE",e.MOST_FINE="MOST_FINE",e.SUPER_FINE="SUPER_FINE"}(re||(re={}));const ie="gridSplit",oe="gridCentroid",ae="__percentage",se=50,ue=r.i18n.translate("xpack.maps.aggs.defaultCountLabel",{defaultMessage:"count"}),ce="doc_count";let le,de,fe;!function(e){e.STATIC="STATIC",e.DYNAMIC="DYNAMIC"}(le||(le={})),function(e){e.VECTOR="VECTOR",e.HEATMAP="HEATMAP",e.TILE="TILE"}(de||(de={})),function(e){e.CATEGORICAL="CATEGORICAL",e.ORDINAL="ORDINAL"}(fe||(fe={}));const pe=["string","ip","boolean"],ge=["number","date"];let me,he;!function(e){e.CIRCLE="circle",e.ICON="icon"}(me||(me={})),function(e){e.NONE="NONE",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE"}(he||(he={}));const be="marker",ve=.25,_e=.25,ye=64,Ee="__kbn__custom_icon_sdf__",Oe=16,Se=Oe/2;let Te,Ae,Le,Ie;!function(e){e.CUSTOM="CUSTOM",e.MAKI="MAKI"}(Te||(Te={})),function(e){e.SYMBOLIZE_AS="symbolizeAs",e.FILL_COLOR="fillColor",e.LINE_COLOR="lineColor",e.LINE_WIDTH="lineWidth",e.ICON="icon",e.ICON_SIZE="iconSize",e.ICON_ORIENTATION="iconOrientation",e.LABEL_TEXT="labelText",e.LABEL_COLOR="labelColor",e.LABEL_SIZE="labelSize",e.LABEL_BORDER_COLOR="labelBorderColor",e.LABEL_BORDER_SIZE="labelBorderSize"}(Ae||(Ae={})),function(e){e.LIMIT="LIMIT",e.CLUSTERS="CLUSTERS",e.TOP_HITS="TOP_HITS",e.MVT="MVT"}(Le||(Le={})),function(e){e.STRING="String",e.NUMBER="Number"}(Ie||(Ie={}));const Ce="SPATIAL_FILTERS_LAYER_ID";let xe,Me,Ne,Pe,we;!function(e){e.LAST_SAVED_LOCATION="LAST_SAVED_LOCATION",e.FIXED_LOCATION="FIXED_LOCATION",e.BROWSER_LOCATION="BROWSER_LOCATION",e.AUTO_FIT_TO_BOUNDS="AUTO_FIT_TO_BOUNDS"}(xe||(xe={})),function(e){e.ELASTICSEARCH="ELASTICSEARCH",e.REFERENCE="REFERENCE",e.SOLUTIONS="SOLUTIONS"}(Me||(Me={})),function(e){e.POINT="POINT",e.LINE="LINE",e.POLYGON="POLYGON"}(Ne||(Ne={})),function(e){e.GET="get",e.FEATURE_STATE="feature-state"}(Pe||(Pe={})),function(e){e.INTERPOLATE="INTERPOLATE",e.PERCENTILES="PERCENTILES"}(we||(we={}));const Re=[50,75,90,95,99],je="none",De="autoselect",ke="world_countries";let Fe;!function(e){e.CHOROPLETH="choropleth",e.GEO_FILE="uploadGeoFile",e.NEW_VECTOR="newVectorLayer",e.OBSERVABILITY="observabilityLayer",e.SECURITY="securityLayer",e.EMS_BOUNDARIES="emsBoundaries",e.EMS_BASEMAP="emsBaseMap",e.CLUSTERS="clusters",e.HEATMAP="heatmap",e.GEO_LINE="geoLine",e.POINT_2_POINT="point2Point",e.ES_DOCUMENT="esDocument",e.ES_TOP_HITS="esTopHits",e.KIBANA_BASEMAP="kibanaBasemap",e.MVT_VECTOR="mvtVector",e.WMS_LAYER="wmsLayer",e.TMS_LAYER="tmsLayer"}(Fe||(Fe={}))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(10)(2567)},function(e,t,n){e.exports=n(10)(2)},function(e,t,n){e.exports=n(10)(23)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){"use strict";let r,i,o,a;function s(e,t){r=e,i=t,o=t.mapsEms,a=o.createEMSSettings()}n.d(t,"Z",(function(){return s})),n.d(t,"X",(function(){return c})),n.d(t,"w",(function(){return l})),n.d(t,"r",(function(){return d})),n.d(t,"p",(function(){return f})),n.d(t,"t",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"u",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"T",(function(){return b})),n.d(t,"x",(function(){return v})),n.d(t,"s",(function(){return _})),n.d(t,"I",(function(){return y})),n.d(t,"q",(function(){return E})),n.d(t,"n",(function(){return O})),n.d(t,"Q",(function(){return S})),n.d(t,"R",(function(){return T})),n.d(t,"G",(function(){return A})),n.d(t,"e",(function(){return L})),n.d(t,"i",(function(){return I})),n.d(t,"z",(function(){return C})),n.d(t,"V",(function(){return x})),n.d(t,"j",(function(){return M})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return P})),n.d(t,"S",(function(){return w})),n.d(t,"d",(function(){return R})),n.d(t,"D",(function(){return j})),n.d(t,"f",(function(){return D})),n.d(t,"J",(function(){return k})),n.d(t,"l",(function(){return F})),n.d(t,"B",(function(){return B})),n.d(t,"C",(function(){return U})),n.d(t,"H",(function(){return G})),n.d(t,"E",(function(){return V})),n.d(t,"K",(function(){return q})),n.d(t,"N",(function(){return z})),n.d(t,"O",(function(){return $})),n.d(t,"U",(function(){return H})),n.d(t,"a",(function(){return Y})),n.d(t,"W",(function(){return W})),n.d(t,"Y",(function(){return Z})),n.d(t,"y",(function(){return Q})),n.d(t,"M",(function(){return K})),n.d(t,"F",(function(){return X})),n.d(t,"A",(function(){return ee})),n.d(t,"k",(function(){return te})),n.d(t,"m",(function(){return ne})),n.d(t,"P",(function(){return re})),n.d(t,"L",(function(){return ie})),n.d(t,"v",(function(){return oe})),n.d(t,"c",(function(){return ae}));let u=!1;function c(e){u=e}const l=()=>u,d=()=>i.fileUpload.IndexNameFormComponent,f=()=>i.fileUpload.FileUploadComponent,p=()=>i.data.indexPatterns,g=()=>i.unifiedSearch.autocomplete,m=()=>i.inspector,h=()=>i.fileUpload,b=()=>r.uiSettings,v=()=>b().get("theme:darkMode",!1),_=()=>i.unifiedSearch.ui.IndexPatternSelect,y=()=>i.unifiedSearch.ui.SearchBar,E=()=>r.http,O=()=>r.executionContext,S=()=>i.data.query.timefilter.timefilter,T=()=>r.notifications.toasts,A=()=>r.savedObjects.client,L=()=>r.chrome,I=()=>r.application.capabilities.dev_tools,C=()=>r.application.capabilities.maps,x=()=>r.application.capabilities.visualize,M=()=>r.docLinks,N=()=>r.overlays,P=()=>i.data,w=()=>i.uiActions,R=()=>r,j=()=>i.navigation,D=()=>r.i18n,k=()=>i.data.search,F=()=>i.embeddable,B=()=>r.application.navigateToApp,U=()=>r.application.navigateToUrl,G=()=>i.savedObjectsTagging,V=()=>i.presentationUtil.ContextProvider,q=()=>i.security,z=()=>i.spaces,$=()=>r.theme,H=()=>i.usageCollection,Y=()=>r.application,W=()=>!!i.screenshotMode&&i.screenshotMode.isScreenshotMode();let J;const Z=e=>J=e,Q=()=>J,K=()=>Q().showMapsInspectorAdapter,X=()=>Q().preserveDrawingBuffer,ee=()=>o,te=()=>a,ne=()=>o.config.emsTileLayerId,re=()=>o.config.tilemap?o.config.tilemap:{},ie=()=>i.share,oe=()=>i.dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables;async function ae(){const e=i.charts?await i.charts.palettes.getPalettes():null;if(!e)return null;const t=e.get("default"),n={syncColors:!0};return e=>{const r=[{name:e,rankAtDepth:0,totalSeriesAtDepth:1}];return t.getCategoricalColor(r,n)||"#3d3d3d"}}},function(e,t,n){"use strict";let r;async function i(){return void 0!==r||(r=new Promise((async(e,t)=>{try{const{MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:o,createSecurityLayerDescriptors:a,createTileMapLayerDescriptor:s,createRegionMapLayerDescriptor:u,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d}=await Promise.all([n.e(0),n.e(3)]).then(n.bind(null,75));e({MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:o,createSecurityLayerDescriptors:a,createTileMapLayerDescriptor:s,createRegionMapLayerDescriptor:u,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d})}catch(e){t(e)}}))),r}n.d(t,"a",(function(){return i}))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(21),o=n(6);const a=()=>Object(o.jsx)(i.EuiDelayRender,null,Object(o.jsx)(i.EuiLoadingContent,{lines:3}));function s({getLazyComponent:e,lazyComponentProps:t}){const n=e();return Object(o.jsx)(i.EuiErrorBoundary,null,Object(o.jsx)(r.Suspense,{fallback:Object(o.jsx)(a,null)},Object(o.jsx)(n,t)))}},function(e,t,n){e.exports=n(10)(9)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));const r="tile_map_vis",i="tile_map";let o;!function(e){e.ScaledCircleMarkers="Scaled Circle Markers",e.Heatmap="Heatmap"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r="region_map_vis",i="region_map"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f}));var r=n(2),i=n(1);function o(){return r.i18n.translate("xpack.maps.appTitle",{defaultMessage:"Maps"})}function a(){return r.i18n.translate("xpack.maps.embeddableDisplayName",{defaultMessage:"map"})}function s(){return r.i18n.translate("xpack.maps.source.dataSourceLabel",{defaultMessage:"Data source"})}function u(){return r.i18n.translate("xpack.maps.source.urlLabel",{defaultMessage:"Url"})}function c(e){switch(e){case i.D.INTERSECTS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.intersectsLabel",{defaultMessage:"intersects"});case i.D.DISJOINT:return r.i18n.translate("xpack.maps.common.esSpatialRelation.disjointLabel",{defaultMessage:"disjoint"});case i.D.WITHIN:return r.i18n.translate("xpack.maps.common.esSpatialRelation.withinLabel",{defaultMessage:"within"});case i.D.CONTAINS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.containsLabel",{defaultMessage:"contains"});default:return e}}function l(){return r.i18n.translate("xpack.maps.dataView.label",{defaultMessage:"Data view"})}function d(){return r.i18n.translate("xpack.maps.dataView.selectPlacholder",{defaultMessage:"Select data view"})}function f(e){return r.i18n.translate("xpack.maps.dataView.notFoundMessage",{defaultMessage:"Unable to find data view '{id}'",values:{id:e}})}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";function r({attributes:e,references:t=[]}){if(!e.layerListJSON)return{attributes:e,references:t};const n=[];let r=[];try{r=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return r.forEach(((e,t)=>{if(e.sourceDescriptor&&"indexPatternId"in e.sourceDescriptor){const r=e.sourceDescriptor,i=`layer_${t}_source_index_pattern`;n.push({name:i,type:"index-pattern",id:r.indexPatternId}),delete r.indexPatternId,r.indexPatternRefName=i}if("joins"in e){const r=e;(r.joins?r.joins:[]).forEach(((e,r)=>{if("indexPatternId"in e.right){const i=e.right,o=`layer_${t}_join_${r}_index_pattern`;n.push({name:o,type:"index-pattern",id:i.indexPatternId}),delete i.indexPatternId,i.indexPatternRefName=o}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(r)},references:t.concat(n)}}function i(e,t){const n=t.find((({name:t})=>t===e));if(!n)throw new Error(`Could not find reference "${e}"`);return n}function o({attributes:e,references:t}){if(!e.layerListJSON)return{attributes:e};let n=[];try{n=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return n.forEach((e=>{if(e.sourceDescriptor&&"indexPatternRefName"in e.sourceDescriptor){const n=e.sourceDescriptor,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}if("joins"in e){const n=e;(n.joins?n.joins:[]).forEach((e=>{if("indexPatternRefName"in e.right){const n=e.right,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(n)}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){e.exports=n(10)(45)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}b(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,a,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function g(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=h(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return g(this,e,!0)},s.prototype.rawListeners=function(e){return g(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),o=n(18),a=n(38),s=n(16),u=n(11),c=n(6);const l=i.i18n.translate("xpack.maps.regionMapMap.vis.title",{defaultMessage:"Region Map"}),d={name:s.b,title:l,icon:"visMapRegion",description:i.i18n.translate("xpack.maps.regionMap.vis.description",{defaultMessage:"Show metrics on a thematic map."}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(u.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(10).then(n.bind(null,495)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(o.buildExpressionFunction)("regionmap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(a.a)(e)})});return Object(o.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),o=n(18),a=n(39),s=n(15),u=n(11),c=n(6);const l=i.i18n.translate("xpack.maps.tileMap.vis.title",{defaultMessage:"Coordinate Map"}),d={name:s.c,title:l,icon:"visMapCoordinate",description:i.i18n.translate("xpack.maps.tileMap.vis.description",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(u.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(11).then(n.bind(null,497)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapType:s.a.ScaledCircleMarkers,mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(o.buildExpressionFunction)("tilemap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(a.a)(e)})});return Object(o.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){var r=n(51),i=n(52);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return b}));var r=n(1);let i;!function(e){e.GEO_LINE_AGG="GEO_LINE_AGG",e.GEO_SHAPE_AGGS_GEO_TILE="GEO_SHAPE_AGGS_GEO_TILE",e.ON_PREM_EMS="ON_PREM_EMS"}(i||(i={}));const o={[i.GEO_LINE_AGG]:{name:"geo_line aggregation",license:"gold"},[i.GEO_SHAPE_AGGS_GEO_TILE]:{name:"geo_tile aggregation on geo_shape field-type",license:"gold"},[i.ON_PREM_EMS]:{name:"layer from local Elastic Maps Server",license:"enterprise"}};let a,s=!1;const u=()=>a,c=()=>s;let l,d;const f=new Promise((e=>{d=e})),p=async()=>{await f};async function g(e){m(await e.refresh()),l=e,l.license$.subscribe(m),d(void 0)}function m(e){const t=e.check(r.e,"gold");s="valid"===t.state,a=e.uid}function h(e){for(const t of Object.values(i))e.featureUsage.register(o[t].name,o[t].license)}function b(e){l?l.featureUsage.notifyUsage(o[i[e]].name):console.error("May not call notifyLicensedFeatureUsage before plugin start")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return R}));var r={};n.r(r),n.d(r,"buildNode",(function(){return B})),n.d(r,"toElasticsearchQuery",(function(){return U}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return G})),n.d(i,"buildNode",(function(){return z})),n.d(i,"test",(function(){return $})),n.d(i,"toElasticsearchQuery",(function(){return H})),n.d(i,"toQueryStringQuery",(function(){return Y})),n.d(i,"hasLeadingWildcard",(function(){return W}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return te})),n.d(o,"toElasticsearchQuery",(function(){return ne}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return re})),n.d(a,"toElasticsearchQuery",(function(){return ie}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return oe})),n.d(s,"toElasticsearchQuery",(function(){return ae}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return se})),n.d(u,"toElasticsearchQuery",(function(){return ue}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return ce})),n.d(c,"toElasticsearchQuery",(function(){return le}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return de})),n.d(l,"toElasticsearchQuery",(function(){return fe}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return pe})),n.d(d,"toElasticsearchQuery",(function(){return ge}));var f={};n.r(f),n.d(f,"buildNode",(function(){return he})),n.d(f,"buildNodeWithArgumentNodes",(function(){return be})),n.d(f,"toElasticsearchQuery",(function(){return ve}));var p,g,m=n(4),h=n.n(m),b=n(3),v=n.n(b),_=n(0),y=n.n(_),E=function(e,t,n){var r,i,o=Object(_.omit)(e,n);return t.index&&(o.index=null===(r=e.meta)||void 0===r?void 0:r.index),t.negate&&(o.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(o.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(o.alias=null===(i=e.meta)||void 0===i?void 0:i.alias),o},O=function(e,t,n){return Object(_.map)(e,(function(e){return E(e,t,n)}))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r={},i=["$$hashKey","meta"];return(r=Object(_.defaults)(n||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||i.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(_.isEqual)(O(e,r,i),O(t,r,i)):!Array.isArray(e)&&!Array.isArray(t)&&Object(_.isEqual)(E(e,r,i),E(t,r,i))},T=(n(20),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),A=function(e,t,n){var r=T(e,t);return e.scripted?{meta:{index:n.id,field:e.name},query:{script:L(e,t)}}:{meta:{index:n.id},query:{match_phrase:h()({},e.name,r)}}},L=function(e,t){var n=T(e,t);return{script:{source:I(e),lang:e.lang,params:{value:n}}}},I=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var C=function(e,t,n){var r,i=n.id,o=p.PHRASES,a=e.name;return r=e.scripted?t.map((function(t){return{script:L(e,t)}})):t.map((function(t){return{match_phrase:h()({},e.name,t)}})),{meta:{index:i,type:o,key:a,params:t},query:{bool:{should:r,minimum_should_match:1}}}},x={gt:">",gte:">=",lte:"<=",lt:"<"},M={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},N={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},P=function(e,t){var n=Object(_.mapValues)(Object(_.pickBy)(t,(function(e,t){return t in x})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(_.map)(n,(function(t,n){return"("+e.script+")"+Object(_.get)(x,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?N:M,o=Object(_.reduce)(n,(function(e,t,n){return e.concat(Object(_.get)(i,n))}),[]).join(" "),a=Object(_.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(o).concat(a)}return{script:{source:r,params:n,lang:e.lang}}},w=function(e,t){return{meta:{index:t.id},query:{exists:{field:e.name}}}},R=function(e){return e.$state&&e.$state.store===g.GLOBAL_STATE},j=n(5),D=n.n(j),k=n(12),F=n.n(k);function B(e){return{type:"literal",value:e}}function U(e){return e.value}var G="@kuery-wildcard@";function V(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function z(e){return e.includes(G)?{type:"wildcard",value:e}:Se(e)}function $(e,t){var n=e.value.split(G).map(V).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function H(e){return e.value.split(G).join("*")}function Y(e){return e.value.split(G).map(q).join("*")}function W(e){var t=e.value;return t.startsWith(G)&&t.replace(G,"").length>0}function J(e,t){if(!t)return[];if("literal"===e.type){var n=U(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return $(e,t.name)})):void 0}var Z=n(40),Q=n.n(Z);function K(e){var t=Q.a.tz.guess();return"Browser"===e?t:e}function X(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function ee(e,t,n){var r=v()(v()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=J(r,t).reduce((function(e,t){var r=X(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(D()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(D()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(D()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(_.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(_.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?Se(e):B(e),i="string"==typeof t?Se(t):B(t),o=B(n);return{arguments:[r,i,o]}}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,3),o=i[0],a=i[1],s=i[2],u="wildcard"===a.type&&a.value===G,c="wildcard"===o.type&&o.value===G,l=u&&c;if(l)return{match_all:{}};var d=ee(o,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(_.isUndefined)(a)?a:Te(a),p=s.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===a.type?{query_string:{query:Y(a)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?J(d,t):[];if(g&&0===g.length&&g.push({name:Te(d),scripted:!1,type:""}),u&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var m=g.reduce((function(e,t){var i=function(e){var n=X(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(u)return[].concat(D()(e),[i({exists:{field:t.name}})]);if("wildcard"===a.type)return[].concat(D()(e),[i({query_string:{fields:[t.name],query:Y(a)}})]);if("date"===t.type){var o=n.dateFormatTZ?{time_zone:K(n.dateFormatTZ)}:{};return[].concat(D()(e),[i({range:h()({},t.name,v()({gte:f,lte:f},o))})])}var s="phrase"===p?"match_phrase":"match";return[].concat(D()(e),[i(h()({},s,h()({},t.name,f)))])}if(!u)return[].concat(D()(e),[{script:v()({},L(t,f))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function re(e){return{arguments:e}}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,o=e.arguments||[],a=i?"must":"filter";return{bool:h()({},a,o.map((function(e){return Te(e,t,n,r)})))}}function oe(e){return{arguments:e}}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Te(e,t,n,r)})),minimum_should_match:1}}}function se(e){return{arguments:[e]}}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,1),o=i[0];return{bool:{must_not:Te(o,t,n,r)}}}function ce(e,t,n){return{arguments:[Se(e),t,_e.literal.buildNode(n)]}}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,3),o=i[0],a=i[1],s=i[2],u=ee(o,t,null!=r&&r.nested?r.nested.path:void 0),c=t?J(u,t):[];c&&0===c.length&&c.push({name:Te(u),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var n=X(e);return"wildcard"!==u.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=h()({},a,Te(s));if(e.scripted)return{script:P(e,i)};if("date"===e.type){var o=n.dateFormatTZ?{time_zone:K(n.dateFormatTZ)}:{};return t({range:h()({},e.name,v()(v()({},i),o))})}return t({range:h()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function de(e){return{arguments:[B(e)]}}function fe(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,1),o=i[0],a=v()(v()({},o),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(o.value):o.value}),s=U(a),u=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===s}));if(null!=u&&u.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:s}}}function pe(e,t){return{arguments:["string"==typeof e?Se(e):B(e),t]}}function ge(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=F()(e.arguments,2),a=o[0],s=o[1],u=Te(a),c=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(u):u;return{nested:{path:c,query:Te(s,t,r,v()(v()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var me={is:o,and:a,or:s,not:u,range:c,exists:l,nested:d};function he(e){var t=me[e];if(y.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return v()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function be(e,t){if(y.a.isUndefined(me[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function ve(e,t,n,r){return me[e.function].toElasticsearchQuery(e,t,n,r)}var _e={function:f,literal:r,wildcard:i},ye=(n(41),n(42),n(43),n(44),n(47),n(48),n(2)),Ee=(ye.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),ye.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),ye.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),ye.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),ye.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"}),Error,n(45)),Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ee.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,v()(v()({},t),{},{helpers:{nodeTypes:_e}}))},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oe(e,v()(v()({},t),{},{startRule:"Literal"}),Ee.parse)},Te=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!_e[t.type])return e(_e.function.buildNode("and",[]),n);var o=_e[t.type];return o.toElasticsearchQuery(t,n,r,i)};Object(_.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));const r=[];function i(e){r.push({checkVisibility:async()=>!0,getIsDisabled:async()=>!1,isBeta:!1,...e})}function o(e){if(e.order<100)throw new Error("layerWizard.order should be greater than or equal to '100'");i(e)}async function a(){const e=r.map((async e=>({...e,isVisible:await e.checkVisibility(),isDisabled:await e.getIsDisabled()})));return(await Promise.all(e)).filter((({isVisible:e})=>e)).sort(((e,t)=>e.order-t.order))}function s(e){return r.find((t=>t.id===e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return map_adapter_MapAdapter})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return vector_tile_adapter_VectorTileAdapter})),n.d(t,"d",(function(){return p}));var r=n(4),i=n.n(r),o=n(22);class map_adapter_MapAdapter extends o.EventEmitter{constructor(...e){super(...e),i()(this,"stats",void 0),i()(this,"style",void 0)}setMapState({stats:e,style:t}){this.stats=e,this.style=t,this._onChange()}getMapState(){return{stats:this.stats,style:this.style}}_onChange(){this.emit("change")}}var a=n(7),s=n(2),u=n(11),c=n(6);const l=()=>Object(a.lazy)((()=>n.e(13).then(n.bind(null,502)))),d={title:s.i18n.translate("xpack.maps.inspector.mapDetailsViewTitle",{defaultMessage:"Map details"}),order:30,help:s.i18n.translate("xpack.maps.inspector.mapDetailsViewHelpText",{defaultMessage:"View the map state"}),shouldShow:e=>Boolean(e.map),component:e=>Object(c.jsx)(u.a,{getLazyComponent:l,lazyComponentProps:e})};class vector_tile_adapter_VectorTileAdapter extends o.EventEmitter{constructor(...e){super(...e),i()(this,"_layers",{}),i()(this,"_tiles",[])}addLayer(e,t,n){this._layers[e]={label:t,tileUrl:n},this._onChange()}removeLayer(e){delete this._layers[e],this._onChange()}setTiles(e){this._tiles=e,this._onChange()}getLayerOptions(){return Object.keys(this._layers).map((e=>({value:e,label:this._layers[e].label})))}getTileRequests(e){if(!this._layers[e])return[];const{tileUrl:t}=this._layers[e];return this._tiles.map((n=>({layerId:e,tileUrl:t,...n})))}_onChange(){this.emit("change")}}const f=()=>Object(a.lazy)((()=>n.e(7).then(n.bind(null,500)))),p={title:s.i18n.translate("xpack.maps.inspector.vectorTileViewTitle",{defaultMessage:"Vector tiles"}),order:10,help:s.i18n.translate("xpack.maps.inspector.vectorTileViewHelpText",{defaultMessage:"View the vector tile search requests used to collect the data"}),shouldShow:e=>Boolean(e.vectorTiles),component:e=>Object(c.jsx)(u.a,{getLazyComponent:f,lazyComponentProps:e})}},function(e,t,n){e.exports=n(10)(3)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));const r=[];function i(e){if(r.some((({type:t})=>e.type===t)))throw new Error(`Unable to register source type ${e.type}. ${e.type} has already been registered`);r.push(e)}function o(e){return r.find((t=>t.type===e))}},function(e,t){e.exports=__kbnSharedDeps__.RisonNode},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(0),i=n.n(r);const o="__kbn__feature_id__";let a=0;function s(){const e=a<Number.MAX_SAFE_INTEGER?a:0;return a=e+1,e}function u(e){const t=[];for(let n=0;n<e.features.length;n++){const e=s();t.push(e)}const n=i.a.shuffle(t),r=[];for(let t=0;t<e.features.length;t++){const i=n[t],a=e.features[t];r.push({type:"Feature",geometry:a.geometry,properties:{[o]:null==a.id?i:a.id,...a.properties},id:i})}return{type:"FeatureCollection",features:r}}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(24);function i(e,t){if("string"==typeof e)return e;const n=t.split(".");return 2===n.length?n[1]:void 0}function o(e){var t,n,o,a,s,u;const c={label:e.title?e.title:r.b,emsLayerId:e.params.selectedLayer.isEMS?i(e.params.selectedLayer.id,e.params.selectedLayer.layerId):void 0,leftFieldName:e.params.selectedLayer.isEMS?e.params.selectedJoinField.name:void 0,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,indexPatternTitle:null===(n=e.data.indexPattern)||void 0===n?void 0:n.title,metricAgg:"count"},l=null===(o=e.data)||void 0===o||null===(a=o.aggs)||void 0===a?void 0:a.byType("buckets");var d;null!=l&&l.length&&"terms"===l[0].type.dslName&&(c.termsFieldName=null===(d=l[0].getField())||void 0===d?void 0:d.name,c.termsSize=l[0].getParam("size"));const f=null===(s=e.data)||void 0===s||null===(u=s.aggs)||void 0===u?void 0:u.byType("metrics");var p;return null!=f&&f.length&&(c.metricAgg=f[0].type.dslName,c.metricFieldName=null===(p=f[0].getField())||void 0===p?void 0:p.name),c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(33),i=n(25);function o(e){var t,n,o,a,s;const u={label:e.title?e.title:i.b,mapType:e.params.mapType,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,metricAgg:"count"},c=null===(n=e.data)||void 0===n||null===(o=n.aggs)||void 0===o?void 0:o.byType("buckets");var l;if(null!=c&&c.length&&"geohash_grid"===c[0].type.dslName)u.geoFieldName=null===(l=c[0].getField())||void 0===l?void 0:l.name;else if(e.data.indexPattern){const t=e.data.indexPattern.fields.find((e=>!r.indexPatterns.isNestedField(e)&&e.aggregatable&&"geo_point"===e.type));t&&(u.geoFieldName=t.name)}const d=null===(a=e.data)||void 0===a||null===(s=a.aggs)||void 0===s?void 0:s.byType("metrics");var f;return null!=d&&d.length&&(u.metricAgg=d[0].type.dslName,u.metricFieldName=null===(f=d[0].getField())||void 0===f?void 0:f.name),u}},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){e.exports=n(10)(15)},function(e,t,n){e.exports=n(10)(13)},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){e.exports=n(10)(18)},function(e,t,n){"use strict";function r(e,t,n,i){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,r.prototype),o.expected=t,o.found=n,o.location=i,o.name="SyntaxError",o}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source+":"+o.line+":"+o.column;if(r){var s=this.location.end,u=i("",o.line.toString().length),c=r[o.line-1],l=o.line===s.line?s.column:c.length+1;t+="\n --\x3e "+a+"\n"+u+" |\n"+o.line+" | "+c+"\n"+u+" | "+i("",o.column-1)+i("",l-o.column,"^")}else t+="\n at "+a}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(a);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},o=(t=void 0!==t?t:{}).grammarSource,a={start:de,Literal:Te},s=de,u='"',c="\\",l="@kuery-cursor@",d=/^[\\"]/,f=/^[^"]/,p=/^[\\():<>"*{}]/,g=/^[0-9a-f]/i,m=/^[ \t\r\n\xA0]/,h=oe("(",!1),b=oe(")",!1),v=oe(":",!1),_=oe("{",!1),y=oe("}",!1),E=se("fieldName"),O=se("value"),S=se("OR"),T=oe("or",!0),A=se("AND"),L=oe("and",!0),I=se("NOT"),C=oe("not",!0),x=se("literal"),M=oe('"',!1),N=oe("\\",!1),P=ae(["\\",'"'],!1,!1),w=ae(['"'],!0,!1),R={type:"any"},j=oe("*",!1),D=oe("\\t",!1),k=oe("\\r",!1),F=oe("\\n",!1),B=ae(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),U=oe("u",!1),G=ae([["0","9"],["a","f"]],!1,!0),V=oe("<=",!1),q=oe(">=",!1),z=oe("<",!1),$=oe(">",!1),H=se("whitespace"),Y=ae([" ","\t","\r","\n",""],!1,!1),W=oe("@kuery-cursor@",!1),J=function(e,t){return t},Z=function(e,t){return t},Q=function(){return De},K=function(t,n,r){const{start:i,end:o}=ce(ee,X);return{type:"cursor",start:i.offset,end:o.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(ee,X).replace(n,"")}},X=0,ee=0,te=[{line:1,column:1}],ne=0,re=[],ie=0;if("startRule"in t){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=a[t.startRule]}function oe(e,t){return{type:"literal",text:e,ignoreCase:t}}function ae(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function se(e){return{type:"other",description:e}}function ue(t){var n,r=te[t];if(r)return r;for(n=t-1;!te[n];)n--;for(r={line:(r=te[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return te[t]=r,r}function ce(e,t){var n=ue(e),r=ue(t);return{source:o,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function le(e){X<ne||(X>ne&&(ne=X,re=[]),re.push(e))}function de(){var e,t,n,r,o,a;for(e=X,t=[],n=Re();n!==i;)t.push(n),n=Re();return(n=fe())===i&&(n=null),(r=xe())!==i?(ee=e,o=n,e="cursor"===(a=r).type?{...a,suggestionTypes:["conjunction"]}:null!==o?o:Be.function.buildNode("is","*","*")):(X=e,e=i),e}function fe(){var e,t,n,r,o;if(e=X,(t=pe())!==i){if(n=[],r=X,Ee()!==i&&(o=pe())!==i?(ee=r,r=J(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Ee()!==i&&(o=pe())!==i?(ee=r,r=J(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return De&&n.find((e=>"cursor"===e.type))||Ue("or",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=pe()),e}function pe(){var e,t,n,r,o;if(e=X,(t=ge())!==i){if(n=[],r=X,Oe()!==i&&(o=ge())!==i?(ee=r,r=J(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(o=ge())!==i?(ee=r,r=J(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return De&&n.find((e=>"cursor"===e.type))||Ue("and",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ge()),e}function ge(){var e,t,n;return e=X,Se()!==i&&(t=me())!==i?(ee=e,e="cursor"===(n=t).type?n:Ue("not",[n])):(X=e,e=i),e===i&&(e=me()),e}function me(){var t,n,r,o,a,s,u,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(h)),n!==i){for(r=[],o=Re();o!==i;)r.push(o),o=Re();(o=fe())!==i&&(a=xe())!==i?(41===e.charCodeAt(X)?(s=")",X++):(s=i,0===ie&&le(b)),s!==i?(ee=t,u=o,t="cursor"===(c=a).type?{...c,suggestionTypes:["conjunction"]}:u):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=function(){var t,n,r,o,a,s,u,c,l,d;if(t=X,(n=he())!==i){for(r=[],o=Re();o!==i;)r.push(o),o=Re();if(58===e.charCodeAt(X)?(o=":",X++):(o=i,0===ie&&le(v)),o!==i){for(a=[],s=Re();s!==i;)a.push(s),s=Re();if(123===e.charCodeAt(X)?(s="{",X++):(s=i,0===ie&&le(_)),s!==i){for(u=[],c=Re();c!==i;)u.push(c),c=Re();(c=fe())!==i&&(l=xe())!==i?(125===e.charCodeAt(X)?(d="}",X++):(d=i,0===ie&&le(y)),d!==i?(ee=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ue("nested",[e,t])}(n,c,l)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i}else X=t,t=i}else X=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,n,r,o,a,s,u,c,l;if(t=X,(n=he())!==i){for(r=[],o=Re();o!==i;)r.push(o),o=Re();if(o=function(){var t,n;return t=X,"<="===e.substr(X,2)?(n="<=",X+=2):(n=i,0===ie&&le(V)),n!==i&&(ee=t,n="lte"),(t=n)===i&&(t=X,">="===e.substr(X,2)?(n=">=",X+=2):(n=i,0===ie&&le(q)),n!==i&&(ee=t,n="gte"),(t=n)===i&&(t=X,60===e.charCodeAt(X)?(n="<",X++):(n=i,0===ie&&le(z)),n!==i&&(ee=t,n="lt"),(t=n)===i&&(t=X,62===e.charCodeAt(X)?(n=">",X++):(n=i,0===ie&&le($)),n!==i&&(ee=t,n="gt"),t=n))),t}(),o!==i){for(a=[],s=Re();s!==i;)a.push(s),s=Re();(s=Te())!==i?(ee=t,u=n,c=o,t="cursor"===(l=s).type?{...l,suggestionTypes:["conjunction"]}:Ue("range",[u,c,l])):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var t,n,r,o,a,s,u,c;if(t=X,(n=he())!==i){for(r=[],o=Re();o!==i;)r.push(o),o=Re();if(58===e.charCodeAt(X)?(o=":",X++):(o=i,0===ie&&le(v)),o!==i){for(a=[],s=Re();s!==i;)a.push(s),s=Re();(s=be())!==i?(ee=t,u=n,t="cursor"===(c=s).type?{...c,fieldName:u.value,suggestionTypes:["value","conjunction"]}:c(u)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=X,(t=ye())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ge(null))}(t)),t}())),t}()),t}()),t}function he(){var e;return ie++,e=Te(),ie--,e===i&&0===ie&&le(E),e}function be(){var t,n,r,o,a,s,u,c;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&le(h)),n!==i){for(r=[],o=Re();o!==i;)r.push(o),o=Re();o=function(){var e,t,n,r,o;if(e=X,(t=ve())!==i){if(n=[],r=X,Ee()!==i&&(o=ve())!==i?(ee=r,r=Z(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Ee()!==i&&(o=ve())!==i?(ee=r,r=Z(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=De&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("or",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ve()),e}(),o!==i&&(a=xe())!==i?(41===e.charCodeAt(X)?(s=")",X++):(s=i,0===ie&&le(b)),s!==i?(ee=t,u=o,t="cursor"===(c=a).type?{...c,suggestionTypes:["conjunction"]}:u):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=ye()),t}function ve(){var e,t,n,r,o;if(e=X,(t=_e())!==i){if(n=[],r=X,Oe()!==i&&(o=_e())!==i?(ee=r,r=Z(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,Oe()!==i&&(o=_e())!==i?(ee=r,r=Z(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=De&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ue("and",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=_e()),e}function _e(){var e,t,n;return e=X,Se()!==i&&(t=be())!==i?(ee=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ue("not",[n(e)])):(X=e,e=i),e===i&&(e=be()),e}function ye(){var e,t;return ie++,e=X,(t=Ae())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=Ge(!0);return n=>Ue("is",[n,e,t])}(t)),(e=t)===i&&(e=X,(t=Ie())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!Fe&&"wildcard"===e.type&&Be.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new r("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:ce(ee,X))}();const t=Ge(!1);return n=>Ue("is",[n,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&le(O)),e}function Ee(){var t,n,r,o,a;if(ie++,t=X,n=[],(r=Re())!==i)for(;r!==i;)n.push(r),r=Re();else n=i;if(n!==i)if("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(T)),r!==i){if(o=[],(a=Re())!==i)for(;a!==i;)o.push(a),a=Re();else o=i;o!==i?t=n=[n,r,o]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(S)),t}function Oe(){var t,n,r,o,a;if(ie++,t=X,n=[],(r=Re())!==i)for(;r!==i;)n.push(r),r=Re();else n=i;if(n!==i)if("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(L)),r!==i){if(o=[],(a=Re())!==i)for(;a!==i;)o.push(a),a=Re();else o=i;o!==i?t=n=[n,r,o]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(A)),t}function Se(){var t,n,r,o;if(ie++,t=X,"not"===e.substr(X,3).toLowerCase()?(n=e.substr(X,3),X+=3):(n=i,0===ie&&le(C)),n!==i){if(r=[],(o=Re())!==i)for(;o!==i;)r.push(o),o=Re();else r=i;r!==i?t=n=[n,r]:(X=t,t=i)}else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&le(I)),t}function Te(){var e;return ie++,(e=Ae())===i&&(e=Ie()),ie--,e===i&&0===ie&&le(x),e}function Ae(){var t,n,r,o,a,s,c;if(t=X,ee=X,(n=(n=Q())?void 0:i)!==i)if(34===e.charCodeAt(X)?(r=u,X++):(r=i,0===ie&&le(M)),r!==i){for(o=[],a=Le();a!==i;)o.push(a),a=Le();if((a=je())!==i){for(s=[],c=Le();c!==i;)s.push(c),c=Le();34===e.charCodeAt(X)?(c=u,X++):(c=i,0===ie&&le(M)),c!==i?(ee=t,t=K(o,a,s)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;else X=t,t=i;if(t===i)if(t=X,34===e.charCodeAt(X)?(n=u,X++):(n=i,0===ie&&le(M)),n!==i){for(r=[],o=Le();o!==i;)r.push(o),o=Le();34===e.charCodeAt(X)?(o=u,X++):(o=i,0===ie&&le(M)),o!==i?(ee=t,t=Ge(r.join(""))):(X=t,t=i)}else X=t,t=i;return t}function Le(){var t,n,r;return(t=Me())===i&&(t=Pe())===i&&(t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(N)),n!==i?(d.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(P)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t===i&&(t=X,n=X,ie++,r=je(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(f.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&le(w)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i))),t}function Ie(){var e,t,n,r,o,a;if(e=X,ee=X,(t=(t=Q())?void 0:i)!==i){for(n=[],r=Ce();r!==i;)n.push(r),r=Ce();if((r=je())!==i){for(o=[],a=Ce();a!==i;)o.push(a),a=Ce();ee=e,e=K(n,r,o)}else X=e,e=i}else X=e,e=i;if(e===i){if(e=X,t=[],(n=Ce())!==i)for(;n!==i;)t.push(n),n=Ce();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?Ge(null):"true"===t?Ge(!0):"false"===t?Ge(!1):e.includes(qe)?Ve(t):Ge(t)}(t)),e=t}return e}function Ce(){var t,n,r,o,a;return(t=Me())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(N)),n!==i&&(r=Ne())!==i?(ee=t,t=r):(X=t,t=i),t}(),t===i&&(t=Pe())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(N)),n!==i?("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&le(T)),r===i&&("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(L)),r===i&&("not"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&le(C)))),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}(),t===i&&(t=function(){var t,n;return t=X,42===e.charCodeAt(X)?(n="*",X++):(n=i,0===ie&&le(j)),n!==i&&(ee=t,n=qe),n}(),t===i&&(t=X,n=X,ie++,r=Ne(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(r=X,ie++,o=function(){var e;return(e=Ee())===i&&(e=Oe())===i&&(e=Se()),e}(),ie--,o===i?r=void 0:(X=r,r=i),r!==i?(o=X,ie++,a=je(),ie--,a===i?o=void 0:(X=o,o=i),o!==i?(e.length>X?(a=e.charAt(X),X++):(a=i,0===ie&&le(R)),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i))))),t}function xe(){var e,t,n,r,o,a;if(e=X,ee=X,(t=(t=Q())?void 0:i)!==i){for(n=[],r=Re();r!==i;)n.push(r),r=Re();if((r=je())!==i){for(o=[],a=Re();a!==i;)o.push(a),a=Re();ee=e,e=K(n,r,o)}else X=e,e=i}else X=e,e=i;if(e===i)for(e=[],t=Re();t!==i;)e.push(t),t=Re();return e}function Me(){var t,n;return t=X,"\\t"===e.substr(X,2)?(n="\\t",X+=2):(n=i,0===ie&&le(D)),n!==i&&(ee=t,n="\t"),(t=n)===i&&(t=X,"\\r"===e.substr(X,2)?(n="\\r",X+=2):(n=i,0===ie&&le(k)),n!==i&&(ee=t,n="\r"),(t=n)===i&&(t=X,"\\n"===e.substr(X,2)?(n="\\n",X+=2):(n=i,0===ie&&le(F)),n!==i&&(ee=t,n="\n"),t=n)),t}function Ne(){var t;return p.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(B)),t}function Pe(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=c,X++):(n=i,0===ie&&le(N)),n!==i?(r=function(){var t,n,r,o,a,s,u,c,l;return t=X,117===e.charCodeAt(X)?(n="u",X++):(n=i,0===ie&&le(U)),n!==i?(r=X,o=X,(a=we())!==i&&(s=we())!==i&&(u=we())!==i&&(c=we())!==i?o=a=[a,s,u,c]:(X=o,o=i),(r=o!==i?e.substring(r,X):o)!==i?(ee=t,l=r,t=String.fromCharCode(parseInt(l,16))):(X=t,t=i)):(X=t,t=i),t}(),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}function we(){var t;return g.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(G)),t}function Re(){var t;return ie++,m.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&le(Y)),ie--,t===i&&0===ie&&le(H),t}function je(){var t,n;return t=X,ee=X,(Q()?void 0:i)!==i?(e.substr(X,14)===l?(n=l,X+=14):(n=i,0===ie&&le(W)),n!==i?(ee=t,t=ke):(X=t,t=i)):(X=t,t=i),t}const{parseCursor:De,cursorSymbol:ke,allowLeadingWildcards:Fe=!0,helpers:{nodeTypes:Be}}=t,Ue=Be.function.buildNodeWithArgumentNodes,Ge=Be.literal.buildNode,Ve=Be.wildcard.buildNode,{wildcardSymbol:qe}=Be.wildcard;if((n=s())!==i&&X===e.length)return n;throw n!==i&&X<e.length&&le({type:"end"}),ze=re,$e=ne<e.length?e.charAt(ne):null,He=ne<e.length?ce(ne,ne+1):ce(ne,ne),new r(r.buildMessage(ze,$e),ze,$e,He);var ze,$e,He}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.c}));var r=n(30)},function(e,t,n){e.exports=n(10)(2564)},function(e,t,n){e.exports=n(10)(2572)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.r(t);var r=n(1);n.d(t,"AGG_TYPE",(function(){return r.b})),n.d(t,"APP_ID",(function(){return r.e})),n.d(t,"COLOR_MAP_TYPE",(function(){return r.j})),n.d(t,"DECIMAL_DEGREES_PRECISION",(function(){return r.p})),n.d(t,"ES_GEO_FIELD_TYPE",(function(){return r.B})),n.d(t,"FIELD_ORIGIN",(function(){return r.F})),n.d(t,"INITIAL_LOCATION",(function(){return r.U})),n.d(t,"LABEL_BORDER_SIZES",(function(){return r.X})),n.d(t,"LAYER_TYPE",(function(){return r.ab})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return r.fb})),n.d(t,"SCALING_TYPES",(function(){return r.tb})),n.d(t,"SOURCE_TYPES",(function(){return r.yb})),n.d(t,"STYLE_TYPE",(function(){return r.Ab})),n.d(t,"SYMBOLIZE_AS_TYPES",(function(){return r.Bb})),n.d(t,"LAYER_WIZARD_CATEGORY",(function(){return r.bb})),n.d(t,"MAX_ZOOM",(function(){return r.gb})),n.d(t,"MIN_ZOOM",(function(){return r.kb})),n.d(t,"VECTOR_SHAPE_TYPE",(function(){return r.Db})),n.d(t,"VECTOR_STYLES",(function(){return r.Eb}))},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){n(54),__kbnBundles__.define("plugin/maps/public",n,55),__kbnBundles__.define("plugin/maps/common",n,50)},function(e,t,n){n.p=window.__kbnPublicPath__.maps},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return ne})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return x.fb})),n.d(t,"MAPS_APP_LOCATOR",(function(){return N})),n.d(t,"GEOJSON_FEATURE_ID_PROPERTY_NAME",(function(){return te.a}));var r=n(4),i=n.n(r),o=n(7),a=n.n(o),s=n(37),u=n(14),c=n(23),l=n(24),d=n(2),f=n(16);const p=()=>({name:"regionmap",type:"render",help:d.i18n.translate("xpack.maps.regionMap.function.help",{defaultMessage:"Regionmap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:f.a,value:{visType:f.b,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})});var g=n(13),m=n.n(g),h=n(11),b=n(6);const v=()=>Object(o.lazy)((()=>n.e(8).then(n.bind(null,496)))),_={name:f.a,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},o)=>{o.onDestroy((()=>{Object(g.unmountComponentAtNode)(e)}));const a={onInitialRenderComplete:()=>{o.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(g.render)(Object(b.jsx)(h.a,{getLazyComponent:v,lazyComponentProps:a}),e)}};var y=n(25),E=n(15);const O=()=>({name:"tilemap",type:"render",help:d.i18n.translate("xpack.maps.tileMap.function.help",{defaultMessage:"Tilemap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:E.b,value:{visType:E.c,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})}),S=()=>Object(o.lazy)((()=>n.e(9).then(n.bind(null,498)))),T={name:E.b,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},o)=>{o.onDestroy((()=>{Object(g.unmountComponentAtNode)(e)}));const a={onInitialRenderComplete:()=>{o.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(g.render)(Object(b.jsx)(h.a,{getLazyComponent:S,lazyComponentProps:a}),e)}};var A=n(35),L=n.n(A),I=n(28),C=n(29),x=n(1),M=n(9);const N="MAPS_APP_LOCATOR";class locators_MapsAppLocatorDefinition{constructor(e){i()(this,"id",N),i()(this,"getLocation",(async e=>{const{mapId:t,filters:n,query:r,refreshInterval:i,timeRange:o,initialLayers:a,hash:s}=e,u=null!=s?s:this.deps.useHash,c={},l={};r&&(c.query=r),n&&n.length&&(c.filters=null==n?void 0:n.filter((e=>!Object(I.g)(e)))),o&&(l.time=o),n&&n.length&&(l.filters=null==n?void 0:n.filter((e=>Object(I.g)(e)))),i&&(l.refreshInterval=i);let d=`/map#/${t||""}`;if(d=Object(C.setStateToKbnUrl)("_g",l,{useHash:u},d),d=Object(C.setStateToKbnUrl)("_a",c,{useHash:u},d),a&&a.length){const e=L.a.encode_array(a);d=`${d}&${x.T}=${encodeURIComponent(e)}`}return{app:x.e,path:d,state:{}}})),this.deps=e}}class locators_MapsAppTileMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_TILE_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:o,metricAgg:a,metricFieldName:s,filters:u,query:c,timeRange:l,hash:d=!0}=e,f=[],p=(await Object(M.a)()).createTileMapLayerDescriptor({label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:o,metricAgg:a,metricFieldName:s});return p&&f.push(p),await this.deps.locator.getLocation({initialLayers:f,filters:u,query:c,timeRange:l,hash:d})})),this.deps=e}}class locators_MapsAppRegionMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_REGION_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:o,colorSchema:a,indexPatternId:s,indexPatternTitle:u,metricAgg:c,metricFieldName:l,filters:d,query:f,timeRange:p,hash:g=!0}=e,m=[],h=(await Object(M.a)()).createRegionMapLayerDescriptor({label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:o,colorSchema:a,indexPatternId:s,indexPatternTitle:u,metricAgg:c,metricFieldName:l});return h&&m.push(h),await this.deps.locator.getLocation({initialLayers:m,filters:d,query:f,timeRange:p,hash:g})})),this.deps=e}}var P=n(27),w=n(34),R=n(46);const j={createSecurityLayerDescriptors:async(e,t)=>(await Object(M.a)()).createSecurityLayerDescriptors(e,t),createBasemapLayerDescriptor:async()=>(await Object(M.a)()).createBasemapLayerDescriptor(),createESSearchSourceLayerDescriptor:async e=>(await Object(M.a)()).createESSearchSourceLayerDescriptor(e)};async function D(e){const t=await Object(M.a)();return await t.suggestEMSTermJoinConfig(e)}var k=n(17),F=n(19);const B=e=>{const t=e;if(!("attributes"in t)||void 0===t.attributes)return{state:e,references:[]};const{attributes:n,references:r}=Object(F.a)({attributes:t.attributes});return{state:{...e,attributes:n},references:r}},U=(e,t)=>{const n=e;if(!("attributes"in n)||void 0===n.attributes)return n;try{const{attributes:e}=Object(F.a)({attributes:n.attributes}),{attributes:r}=Object(F.b)({attributes:e,references:t});return{...n,attributes:r}}catch(e){return n}};class map_embeddable_factory_MapEmbeddableFactory{constructor(){i()(this,"type",x.fb),i()(this,"savedObjectMetaData",{name:d.i18n.translate("xpack.maps.mapSavedObjectLabel",{defaultMessage:"Map"}),type:x.fb,getIconForSavedObject:()=>x.c}),i()(this,"createFromSavedObject",(async(e,t,n)=>(t.savedObjectId||(t.savedObjectId=e),this.create(t,n)))),i()(this,"create",(async(e,t)=>{const{MapEmbeddable:n}=await Object(M.a)();return new n({editable:await this.isEditable()},e,t)})),i()(this,"inject",U),i()(this,"extract",B)}async isEditable(){const{getMapsCapabilities:e}=await Object(M.a)();return e().save}canCreateNew(){return!1}getDisplayName(){return Object(k.g)()}}const G="FILTER_BY_MAP_EXTENT",V=Object(u.createAction)({id:G,type:G,order:20,getDisplayName:({embeddable:e})=>e.getInput().filterByMapExtent?d.i18n.translate("xpack.maps.filterByMapExtentMenuItem.disableDisplayName",{defaultMessage:"Disable filter by map extent"}):d.i18n.translate("xpack.maps.filterByMapExtentMenuItem.enableDisplayName",{defaultMessage:"Enable filter by map extent"}),getIconType:()=>"filter",isCompatible:async({embeddable:e})=>e.type===x.fb&&e.getInput().viewMode===c.ViewMode.EDIT&&!e.getInput().disableTriggers,execute:async({embeddable:e})=>{e.updateInput({filterByMapExtent:!e.getInput().filterByMapExtent})}});var q=n(26),z=n.n(q),$=n(8);const H=Object(u.createAction)({id:u.ACTION_VISUALIZE_GEO_FIELD,type:u.ACTION_VISUALIZE_GEO_FIELD,getDisplayName:()=>d.i18n.translate("xpack.maps.discover.visualizeFieldLabel",{defaultMessage:"Visualize in Maps"}),isCompatible:async()=>!!Object($.V)().show,getHref:async e=>{const{app:t,path:n}=await Y(e);return Object($.d)().application.getUrlForApp(t,{path:n,absolute:!1})},execute:async e=>{const{app:t,path:n,state:r}=await Y(e),i=Object($.U)();null==i||i.reportUiCounter(x.e,"visualize_geo_field",e.originatingApp?e.originatingApp:"unknownOriginatingApp"),Object($.d)().application.navigateToApp(t,{path:n,state:r})}}),Y=async e=>{var t;const n=await Object($.t)().get(e.indexPatternId),r=(null==e||null===(t=e.contextualFields)||void 0===t?void 0:t.length)&&"_source"!==(null==e?void 0:e.contextualFields[0]),i=[{id:z()(),visible:!0,type:x.ab.MVT_VECTOR,sourceDescriptor:{id:z()(),type:x.yb.ES_SEARCH,tooltipProperties:r?e.contextualFields:[],label:n.title,indexPatternId:e.indexPatternId,geoField:e.fieldName,scalingType:x.tb.MVT}}],o=Object($.L)().url.locators.get(N);return await o.getLocation({filters:Object($.h)().query.filterManager.getFilters(),query:Object($.h)().query.queryString.getQuery(),initialLayers:i,timeRange:Object($.h)().query.timefilter.timefilter.getTime()})},W={id:x.e,title:Object(k.a)(),subtitle:d.i18n.translate("xpack.maps.featureCatalogue.mapsSubtitle",{defaultMessage:"Plot geographic data."}),description:d.i18n.translate("xpack.maps.feature.appDescription",{defaultMessage:"Explore geospatial data from Elasticsearch and the Elastic Maps Service."}),icon:x.c,path:"/app/maps",showOnHomePage:!1,category:"data",solutionId:"kibana",order:400};var J=n(31),Z=n(49),Q=n(32),K=n.n(Q);const X="lens_choropleth_chart_renderer",ee=()=>({name:"lens_choropleth_chart",type:"render",help:"A choropleth chart. Metrics are joined to vector features to compare values across political boundaries",args:{title:{types:["string"],help:""},description:{types:["string"],help:""},layerId:{types:["string"],help:""},emsField:{types:["string"],help:"Elastic Map Service boundaries layer field provides the vector feature join key"},emsLayerId:{types:["string"],help:"Elastic Map Service boundaries layer id that provides vector features"},regionAccessor:{types:["string"],help:"Bucket accessor identifies the region key column"},valueAccessor:{types:["string"],help:"Value accessor identifies the value column"}},inputTypes:["datatable"],fn(e,t,n){var r;if(null!=n&&null!==(r=n.inspectorAdapters)&&void 0!==r&&r.tables){n.inspectorAdapters.tables.reset(),n.inspectorAdapters.tables.allowCsvExport=!0;const r=Object(Z.prepareLogTable)(e,[[t.valueAccessor?[t.valueAccessor]:void 0,d.i18n.translate("xpack.maps.logDatatable.value",{defaultMessage:"Value"})],[t.regionAccessor?[t.regionAccessor]:void 0,d.i18n.translate("xpack.maps.logDatatable.region",{defaultMessage:"Region key"})]],!0);n.inspectorAdapters.tables.logDatatable("default",r)}return{type:"render",as:X,value:{data:e,args:t}}}});class plugin_MapsPlugin{constructor(e){i()(this,"_initializerContext",void 0),this._initializerContext=e}setup(e,t){var r,i;Object(P.e)(t.licensing);const o=this._initializerContext.config.get();Object($.Y)({...o,preserveDrawingBuffer:!(null===(r=t.screenshotMode)||void 0===r||!r.isScreenshotMode())||o.preserveDrawingBuffer});const u=t.share.url.locators.create(new locators_MapsAppLocatorDefinition({useHash:e.uiSettings.get("state:storeInSessionStorage")}));return t.share.url.locators.create(new locators_MapsAppTileMapLocatorDefinition({locator:u})),t.share.url.locators.create(new locators_MapsAppRegionMapLocatorDefinition({locator:u})),t.inspector.registerView(J.d),t.inspector.registerView(J.b),t.home&&t.home.featureCatalogue.register(W),t.visualizations.registerAlias(function(e){e.hideTypes(["region_map","tile_map"]);const t=d.i18n.translate("xpack.maps.visTypeAlias.description",{defaultMessage:"Create and style maps with multiple layers and indices."});return{aliasApp:x.e,aliasPath:`/${x.eb}`,name:x.e,title:x.f,description:t,icon:x.c,stage:"production",appExtensions:{visualizations:{docTypes:[x.fb],searchFields:["title^3"],toListItem(e){const{id:t,type:n,updatedAt:r,attributes:i}=e,{title:o,description:a}=i;return{id:t,title:o,description:a,updatedAt:r,editUrl:Object(x.Ib)(t),editApp:x.e,icon:x.c,stage:"production",savedObjectType:n,typeTitle:x.f}}}}}}(t.visualizations)),t.embeddable.registerEmbeddableFactory(x.fb,new map_embeddable_factory_MapEmbeddableFactory),e.application.register({id:x.e,title:Object(k.a)(),order:4e3,icon:`plugins/${x.e}/icon.svg`,euiIconType:x.d,category:s.DEFAULT_APP_CATEGORIES.kibana,async mount(e){var n,r;const i=null!==(n=null===(r=t.usageCollection)||void 0===r?void 0:r.components.ApplicationUsageTrackingProvider)&&void 0!==n?n:a.a.Fragment,{renderApp:o}=await Object(M.a)();return o(e,i)}}),c=e,f=t.expressions,g=t.lens,f.registerRenderer((()=>function(e){return{name:X,displayName:"Choropleth chart",help:"Choropleth chart renderer",validate:()=>{},reuseDomNode:!0,render:async(t,r,i)=>{const[o,a]=await e.getStartServices(),{ChoroplethChart:s}=await Promise.all([n.e(0),n.e(12)]).then(n.bind(null,503)),{getEmsFileLayers:u}=await n.e(1).then(n.bind(null,80)),c=a.embeddable.getEmbeddableFactory("map");if(!c)return;let l=[];try{l=await u()}catch(e){}m.a.render(Object(b.jsx)(s,K()({},r,{formatFactory:a.fieldFormats.deserialize,uiSettings:o.uiSettings,emsFileLayers:l,mapEmbeddableFactory:c})),t,(()=>{i.done()})),i.onDestroy((()=>m.a.unmountComponentAtNode(t)))}}}(c))),f.registerFunction(ee),g.registerVisualization((async()=>{const[e,t]=await c.getStartServices(),{getEmsFileLayers:r}=await n.e(1).then(n.bind(null,80)),{getVisualization:i}=await n.e(6).then(n.bind(null,501));let o=[];try{o=await r()}catch(e){}return i({theme:e.theme,emsFileLayers:o,paletteService:await t.charts.palettes.getPalettes()})})),t.expressions.registerFunction(p),t.expressions.registerRenderer(_),t.visualizations.createBaseVisualization(l.a),t.expressions.registerFunction(O),t.expressions.registerRenderer(T),t.visualizations.createBaseVisualization(y.a),Object($.X)(!(null===(i=t.cloud)||void 0===i||!i.isCloudEnabled)),{registerLayerWizard:R.b,registerSource:w.b};var c,f,g}start(e,t){return Object(P.f)(t.licensing),Object($.Z)(e,t),e.application.capabilities.maps.show&&t.uiActions.addTriggerAction(u.VISUALIZE_GEO_FIELD_TRIGGER,H),t.uiActions.addTriggerAction(c.CONTEXT_MENU_TRIGGER,V),e.application.capabilities.maps.save||t.visualizations.unRegisterAlias(x.e),{createLayerDescriptors:j,suggestEMSTermJoinConfig:D}}}var te=n(36);const ne=e=>new plugin_MapsPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/inspector/common/adapters/request");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/lens/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);