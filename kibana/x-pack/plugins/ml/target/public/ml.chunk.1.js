/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[1],{118:function(e,t,r){"use strict";r.d(t,"c",(function(){return x})),r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return y}));var a=r(8),n=r(24),i=r.n(n),l=r(32),o=r.n(l);const{duration:s}=i.a;var c=r(28),u=r(26),d=r(46),p=r(49);const m=o.a.unitsDesc,h=m.indexOf("w"),f=function(){const e=[[s(500,"ms"),s(100,"ms")],[s(5,"second"),s(1,"second")],[s(10,"second"),s(5,"second")],[s(15,"second"),s(10,"second")],[s(30,"second"),s(15,"second")],[s(1,"minute"),s(30,"second")],[s(5,"minute"),s(1,"minute")],[s(10,"minute"),s(5,"minute")],[s(15,"minute"),s(10,"minute")],[s(30,"minute"),s(10,"minute")],[s(1,"hour"),s(30,"minute")],[s(2,"hour"),s(1,"hour")],[s(4,"hour"),s(2,"hour")],[s(6,"hour"),s(4,"hour")],[s(8,"hour"),s(6,"hour")],[s(12,"hour"),s(8,"hour")],[s(24,"hour"),s(12,"hour")],[s(2,"d"),s(1,"d")],[s(4,"d"),s(2,"d")],[s(1,"week"),s(4,"d")],[s(1,"month"),s(1,"week")],[s(1,"year"),s(1,"month")],[1/0,s(1,"year")]].slice(0).reverse();function t(e,t,r){return function(a,n){const l=function(a,n){const l=n/a;let o;for(let a=0;a<e.length;a++){const n=e[a],i=t(n[0],n[1],l);if(null==i){if(!r)continue;if(o)return o;break}if(!r)return i;o=i}const s=Math.max(Math.floor(l),1);return i.a.duration(s,"ms")}(a,n);if(l)return i.a.duration(l._data)}}return{near:t(e,(function(e,t,r){if(e>r){if(e===1/0)return t;const a=e.asMilliseconds(),n=t.asMilliseconds();return Math.abs(a-r)<=Math.abs(n)?e:t}}),!0),lessThan:t(e,(function(e,t,r){if(t<r)return e!==1/0?e:t})),atLeast:t(e,(function(e,t,r){if(t<=r)return t}))}}();function x(){const e=Object(u.m)();return new b({[d.UI_SETTINGS.HISTOGRAM_MAX_BARS]:e.get(d.UI_SETTINGS.HISTOGRAM_MAX_BARS),[d.UI_SETTINGS.HISTOGRAM_BAR_TARGET]:e.get(d.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:e.get("dateFormat"),"dateFormat:scaled":e.get("dateFormat:scaled")})}function b(e){this._timeBucketsConfig=e,this.barTarget=this._timeBucketsConfig[d.UI_SETTINGS.HISTOGRAM_BAR_TARGET],this.maxBars=this._timeBucketsConfig[d.UI_SETTINGS.HISTOGRAM_MAX_BARS]}function v(e,t){const r=function(e){for(let t=0;t<m.length;t++){const r=m[t],a=e.as(r);if(a>=1&&Math.floor(a)===a){if(t<=h)continue;return{value:a,unit:r,expression:a+r}}}const t=e.as("ms");return{value:t,unit:"ms",expression:t+"ms"}}(e);e.esValue=r.value,e.esUnit=r.unit,e.expression=r.expression,e.overflow=t>e&&i.a.duration(e-t);const a=i.a.normalizeUnits(r.unit);return 1===r.value?e.description=a:e.description=`${r.value} ${a}s`,e}function g(e){return e&&"isValid"in e&&e.isValid()}function y(e,t,r=!1){const a=t.asMilliseconds(),n=Math.floor(e.min.valueOf()/a)*a;let l=Math.ceil(e.max.valueOf()/a)*a;return!1===r&&(l-=1),{min:i()(n),max:i()(l)}}b.prototype.setBarTarget=function(e){this.barTarget=e},b.prototype.setMaxBars=function(e){this.maxBars=e},b.prototype.setBounds=function(e){if(!e)return this.clearBounds();let t;t=Object(a.isPlainObject)(e)?[e.min,e.max]:Array.isArray(e)?e:[];const r=Object(a.sortBy)(t.map(Object(a.ary)(i.a,1)),Number);if(2!==r.length||!r.every(g))throw this.clearBounds(),new Error("invalid bounds set: "+e);if(this._lb=r.shift(),this._ub=r.pop(),this.getDuration().asSeconds()<0)throw new TypeError("Intervals must be positive")},b.prototype.clearBounds=function(){this._lb=this._ub=null},b.prototype.hasBounds=function(){return g(this._ub)&&g(this._lb)},b.prototype.getBounds=function(){if(this.hasBounds())return{min:this._lb,max:this._ub}},b.prototype.getDuration=function(){if(this.hasBounds())return i.a.duration(this._ub-this._lb,"ms")},b.prototype.setInterval=function(e){this.originalInterval=e;let t=e;if(t&&"auto"!==t){if(Object(a.isString)(t)&&(e=t,t=Object(c.a)(t),0==+t&&(t=null)),!i.a.isDuration(t))throw new TypeError('"'+e+'" is not a valid interval.');this._i=t}else this._i="auto"},b.prototype.getInterval=function(){const e=this,t=e.getDuration();return v(function(r){if(!e.hasBounds())return r;const n=e.maxBars;let i;return t/r>n?(i=f.lessThan(n,t),+i==+r?r:(v(r,t),Object(a.assign)(i,{preScaled:r,scale:r/i,scaled:!0}))):r}(function(){const r=e._i;return i.a.isDuration(r)?r:f.near(e.barTarget,t)}()),t)},b.prototype.getIntervalToNearestMultiple=function(e){const t=this.getInterval(),r=t.asSeconds(),a=r%e;if(0===a)return t;let n=a>e/2?r+e-a:r-a;n=0===n?e:n;const l=i.a.duration(n,"seconds");v(l,this.getDuration());const o=t.preScaled;return void 0!==o&&o<l&&(l.preScaled=o,l.scale=o/l,l.scaled=!0),l},b.prototype.getScaledDateFormat=function(){const e=this.getInterval(),t=this._timeBucketsConfig["dateFormat:scaled"];for(let r=t.length-1;r>=0;r--){const a=t[r];if(!a[0]||e>=i.a.duration(a[0]))return a[1]}return this._timeBucketsConfig.dateFormat},b.prototype.getScaledDateFormatter=function(){return new(Object(u.e)().getType(p.FIELD_FORMAT_IDS.DATE))({pattern:this.getScaledDateFormat()},this._timeBucketsConfig)}},135:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return l}));var a=r(24),n=r.n(a);function i(e,t,r,a){return Array.isArray(e)?1===e.length?l(e[0],t,r,a):`[${e.map((e=>l(e,t,void 0,a)))}]`:l(e,t,r,a)}function l(e,t,r,a){if(null==e)return"";if("time_of_week"===t){const t=void 0!==a&&void 0!==a.timestamp?new Date(a.timestamp):new Date,r=n()(t).unix()%n.a.duration(1,"week").asSeconds(),i=n.a.duration(r,"seconds"),l=n.a.utc(t).subtract(i).startOf("day").add(e,"s");return n()(l.valueOf()).format("ddd HH:mm")}if("time_of_day"===t){const t=void 0!==a&&void 0!==a.timestamp?new Date(a.timestamp):new Date,r=n.a.utc(t).startOf("day").add(e,"s");return n()(r.valueOf()).format("HH:mm")}if(void 0!==r)return r.convert(e,"text");{const t=Math.abs(e);if(t>=1e4||t===Math.floor(t))return void 0!==r?r.convert(e,"text"):Number(e.toFixed(0));if(t>=10)return Number(e.toFixed(1));{let t;return t=e>0?Math.pow(10,3-Math.floor(Math.log(e)/Math.LN10)-1):Math.pow(10,3-Math.floor(Math.log(-1*e)/Math.LN10)-1),Math.round(e*t)/t}}}},141:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(5),n=r.n(a),i=r(83),l=r(98),o=r(87);const s=new class FieldFormatService{constructor(){n()(this,"indexPatternIdsByJob",{}),n()(this,"formatsByJob",{})}async populateFormats(e){(await Promise.all(e.map((async e=>{const t=o.a.getJob(e);return{jobId:e,dataViewId:await Object(l.d)(t.datafeed_config.indices.join(","))}})))).forEach((({jobId:e,dataViewId:t})=>{null!==t&&(this.indexPatternIdsByJob[e]=t)}));const t=e.map((e=>Promise.all([this.getFormatsForJob(e)])));try{return(await Promise.all(t)).forEach(((t,r)=>{this.formatsByJob[e[r]]=t[0]})),this.formatsByJob}catch(e){return console.log("Error populating field formats:",e),{formats:{},error:e}}}getFieldFormat(e,t){if(this.formatsByJob.hasOwnProperty(e))return this.formatsByJob[e][t]}getFieldFormatFromIndexPattern(e,t,r){let a;if("cardinality"!==r){const r=e.fields.getByName(t);void 0!==r&&(a=e.getFormatterForField(r))}return a}getFormatsForJob(e){return new Promise(((t,r)=>{const a=o.a.getJob(e).analysis_config.detectors||[],n=[],s=this.indexPatternIdsByJob[e];void 0!==s?Object(l.c)(s).then((e=>{const r=e.fields;a.forEach((t=>{const a=Object(i.p)(t.function);if(void 0!==t.field_name&&"cardinality"!==a){const a=r.getByName(t.field_name);void 0!==a&&(n[t.detector_index]=e.getFormatterForField(a))}})),t(n)})).catch((e=>{r(e)})):t(n)}))}}},145:function(e,t,r){"use strict";r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return g})),r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return O}));var a=r(17),n=r(2),i=r(44),l=r(43),o=r(7),s=r(90),c=r(18),u=r(13);const d=n.i18n.translate("xpack.ml.controls.selectSeverity.warningLabel",{defaultMessage:"warning"}),p=n.i18n.translate("xpack.ml.controls.selectSeverity.minorLabel",{defaultMessage:"minor"}),m=n.i18n.translate("xpack.ml.controls.selectSeverity.majorLabel",{defaultMessage:"major"}),h=n.i18n.translate("xpack.ml.controls.selectSeverity.criticalLabel",{defaultMessage:"critical"}),f={[d]:c.ANOMALY_THRESHOLD.LOW,[p]:c.ANOMALY_THRESHOLD.MINOR,[m]:c.ANOMALY_THRESHOLD.MAJOR,[h]:c.ANOMALY_THRESHOLD.CRITICAL},x=[{val:c.ANOMALY_THRESHOLD.LOW,display:d,color:Object(o.j)(c.ANOMALY_THRESHOLD.LOW)},{val:c.ANOMALY_THRESHOLD.MINOR,display:p,color:Object(o.j)(c.ANOMALY_THRESHOLD.MINOR)},{val:c.ANOMALY_THRESHOLD.MAJOR,display:m,color:Object(o.j)(c.ANOMALY_THRESHOLD.MAJOR)},{val:c.ANOMALY_THRESHOLD.CRITICAL,display:h,color:Object(o.j)(c.ANOMALY_THRESHOLD.CRITICAL)}];function b(e){let t=x.find((t=>t.val===e));return void 0===t&&(t=x[0]),t}const v=x[0],g=()=>Object(s.b)("mlSelectSeverity",v),y=({classNames:e}={classNames:""})=>{const[t,r]=g();return Object(u.jsx)(O,{severity:t,onChange:r})},O=({classNames:e="",severity:t,onChange:r,compressed:o})=>{const s=Object(a.useMemo)((()=>x.map((({color:e,display:t,val:r})=>({value:t,inputDisplay:Object(u.jsx)(a.Fragment,null,Object(u.jsx)(l.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t)),dropdownDisplay:Object(u.jsx)(a.Fragment,null,Object(u.jsx)(l.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t),Object(u.jsx)(l.EuiSpacer,{size:"xs"}),Object(u.jsx)(l.EuiText,{size:"xs",color:"subdued"},Object(u.jsx)("p",{className:"euiTextColor--subdued"},Object(u.jsx)(i.FormattedMessage,{id:"xpack.ml.controls.selectSeverity.scoreDetailsDescription",defaultMessage:"score {value} and above",values:{value:r}}))))})))),[]);return Object(u.jsx)(l.EuiSuperSelect,{prepend:n.i18n.translate("xpack.ml.explorer.severityThresholdLabel",{defaultMessage:"Severity"}),id:"severityThreshold","data-test-subj":"mlAnomalySeverityThresholdControls",className:e,hasDividers:!0,options:s,valueOfSelected:t.display,onChange:e=>{r(b(f[e]))},compressed:!0})}},170:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a=e=>t=>{t.currentTarget.blur(),e()}},179:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"a",(function(){return m})),r.d(t,"c",(function(){return h})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return x})),r.d(t,"g",(function(){return b})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return g})),r.d(t,"n",(function(){return y})),r.d(t,"o",(function(){return O})),r.d(t,"l",(function(){return j})),r.d(t,"j",(function(){return I})),r.d(t,"k",(function(){return w})),r.d(t,"m",(function(){return E}));var a=r(116),n=r.n(a),i=r(103),l=r(15),o=r(24),s=r.n(o),c=r(94),u=r(0);const d=7,p=5,m=10,h=100;function f(e=[],t){let r=1/0,a=-1/0;e.forEach((e=>{let t=e.value;const n=Array.isArray(e.actual)?e.actual[0]:e.actual,i=Array.isArray(e.typical)?e.typical[0]:e.typical;null===t&&void 0!==e.anomalyScore&&void 0!==e.actual&&(t=n),void 0!==e.anomalyScore&&void 0!==n?(r=Math.min(r,t,n,i),a=Math.max(a,t,n,i)):(r=Math.min(r,t),a=Math.max(a,t))}));const n={max:a,min:r};if(n.max===n.min){const e=.05*n.max;n.max+=e,n.min-=e}return"count"===t&&n.min<0&&(n.min=0),n}function x(e,t,r,a=1.5){const n=e.reduce(((t,r,a)=>{const n=e[a-1],i=e[a+1];return(void 0===n||n&&null===n.value)&&null!==r.value&&(void 0===i||i&&null===i.value)&&t.push(r),t}),[]),i=(t.select(".values-dots").empty()?t.append("g").classed("values-dots",!0):t.select(".values-dots")).selectAll("circle").data(n);i.enter().append("circle").attr("r",a),i.attr("cx",r.x()).attr("cy",r.y()),i.exit().remove()}function b(e,t){if(void 0===e||void 0===e.selectAll)throw new Error("Missing selection parameter");e.selectAll(".tick text").text((function(){const e=n.a.select(this.parentNode),r=e.node().getBBox().width,a=n.a.transform(e.attr("transform")).translate[0];if(a-r/2>=0&&a+r/2<=t)return this.textContent;e.remove()}))}function v(e){let t=c.b.SINGLE_METRIC;if("lat_long"===e.functionDescription||void 0!==e.mapData)return c.b.GEO_MAP;if("rare"===e.functionDescription&&!1===e.entityFields.some((e=>"over"===e.fieldType))?t=c.b.EVENT_DISTRIBUTION:"rare"!==e.functionDescription&&e.entityFields.some((e=>"over"===e.fieldType))&&null!==e.metricFunction&&(t=c.b.POPULATION_DISTRIBUTION),(t===c.b.EVENT_DISTRIBUTION||t===c.b.POPULATION_DISTRIBUTION)&&void 0!==e.datafeedConfig&&void 0!==e.datafeedConfig.script_fields){const r=Object.keys(e.datafeedConfig.script_fields),a=e.entityFields.map((e=>e.fieldName));e.metricFieldName&&a.push(e.metricFieldName),!0==(void 0!==a.find((e=>r.includes(e))))&&(t=c.b.SINGLE_METRIC)}return t}async function g(e,t,r){const a=r.getActiveBounds(),n=a.min.toISOString(),i=a.max.toISOString(),l=s()(t.plotEarliest).toISOString(),o=s()(t.plotLatest).toISOString();let c;return t.entityFields.length>0&&(c={},t.entityFields.forEach((e=>{c[e.fieldName]=e.fieldValue}))),await e.getUrl({page:u.b.SINGLE_METRIC_VIEWER,pageState:{jobIds:[t.jobId],refreshInterval:{display:"Off",pause:!0,value:0},timeRange:{from:n,to:i,mode:"absolute"},zoom:{from:l,to:o},detectorIndex:t.detectorIndex,entities:c,query:{query_string:{analyze_wildcard:!0,query:"*"}}}},{absolute:!0})}function y(e){return void 0!==e.multiBucketImpact&&e.multiBucketImpact>=l.a.MEDIUM}function O(e){return void 0!==e.multiBucketImpact&&e.multiBucketImpact>=l.a.LOW}function j(e,t){return e/(1.75*Object(i.a)(s()().format(t),!1))}const k="next",T="previous";function I(e,t,r,a){if(t<=0)throw Error("tickInterval must be larger than 0.");const n=[e];function i(e,l){let o,s;switch(l){case T:o=e-t,s=o>=r;break;case k:o=e+t,s=o<=a}s&&(n.push(o),i(o,l))}return i(e,T),i(e,k),n.sort(),n}function w({detectorLabel:e,entityFields:t}){return e.length+t.map((e=>`${e.fieldName} ${e.fieldValue}`)).join(" ").length>60}function E(e,t,r,a){function i(e){return function(t){switch(e){case T:return t-r;case k:return t+r}}}function l(t,r){const o=function(t){const r=i(t),a=function(t){const i=e.selectAll(".tick").filter((e=>e===t));if(0===i.length||0===i[0].length)return!1;const l=n.a.selectAll(i[0]),o=l.select("text").node();if(null===o)return a(r(t));const s=o.getBBox().width,c=function(e){const t=/translate\(\s*([^\s,)]+)([ ,]([^\s,)]+))?\)/.exec(e);return Array.isArray(t)&&t.length>=2?Number(t[1]):NaN}(l.attr("transform"));return{tick:l,ts:t,xMinOffset:c-(s/2+15),xMaxOffset:c+(s/2+15)}};return a}(r),s=o(t);if(!1===s)return;const c=o(i(r)(t));!1!==c&&(c.xMinOffset<0||c.xMaxOffset>a||c.xMaxOffset>s.xMinOffset&&r===T||c.xMinOffset<s.xMaxOffset&&r===k?(c.tick.select("text").remove(),c.tick.select("line").classed("ml-tick-emphasis",!1),l(s.ts,r)):l(c.ts,r))}e.selectAll("g.tick").select("line").classed("ml-tick-emphasis",!0),l(t,T),l(t,k)}},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(2),n=r(26);function i(e,t,r,i){let l="",o=`ml-job-${t}`;switch(e){case"explorer":l=a.i18n.translate("xpack.ml.anomalyExplorerPageLabel",{defaultMessage:"Anomaly Explorer"});break;case"timeseriesexplorer":l=a.i18n.translate("xpack.ml.singleMetricViewerPageLabel",{defaultMessage:"Single Metric Viewer"});break;case"jobs/new_job/datavisualizer":l=a.i18n.translate("xpack.ml.dataVisualizerPageLabel",{defaultMessage:"Data Visualizer"}),o=`ml-datavisualizer-${t}`;break;default:return void console.error("addItemToRecentlyAccessed - No page specified")}(null!=i?i:Object(n.h)()).add(r,`ML - ${t} - ${l}`,o)}},251:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(17),n=r.n(a),i=r(43),l=r(13);const o=({height:e,label:t})=>(e=e?+e:100,Object(l.jsx)("div",{className:"ml-loading-indicator",style:{height:`${e}px`},"data-test-subj":"mlLoadingIndicator"},Object(l.jsx)(i.EuiLoadingChart,{size:"xl",mono:!0}),t&&Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(i.EuiSpacer,{size:"s"}),Object(l.jsx)("div",null,t))))},252:function(e,t,r){"use strict";r(253);var a=r(254);r.d(t,"a",(function(){return a.b}))},375:function(e,t,r){"use strict";r.d(t,"a",(function(){return ae})),r(662);var a=r(17),n=r.n(a),i=r(130),l=r(43),o=r(179),s=r(2),c=r(116),u=r.n(c),d=r(68),p=r.n(d),m=r(24),h=r.n(m),f=r(88),x=r(135),b=r(7),v=r(251),g=r(141),y=r(94);const O="rgba(0, 0, 0, 0)";var j=r(13);class explorer_chart_distribution_ExplorerChartDistribution extends n.a.Component{componentDidMount(){this.renderChart()}componentDidUpdate(){this.renderChart()}renderChart(){const{tooManyBuckets:e,tooltipService:t,timeBuckets:r,showSelectedInterval:a,onPointerUpdate:n,chartTheme:i,cursor:l}=this.props,c=this.rootNode,d=this.props.seriesConfig,m=this.props.severity;if(void 0===d||!1===Array.isArray(d.chartData))return;const v=g.a.getFieldFormat(d.jobId,d.detectorIndex);let j=0;const k=170,T=Object(o.h)(d),I={top:10,right:0,bottom:30,left:0};T===y.b.POPULATION_DISTRIBUTION&&(I.left=60);let w,E=null,_=null,S=null;const M=T===y.b.EVENT_DISTRIBUTION?"entity":"value";let A=d.chartData.find((e=>void 0!==e.anomalyScore));A=A&&A.entity;var N;N=function({chartData:e,functionDescription:t}){const r=p()(".ml-explorer-chart"),a=u.a.select(c).select(".content-wrapper");a.select("svg").remove();const n=r.width(),i=k+I.top+I.bottom,l=a.append("svg").classed("ml-explorer-chart-svg",!0).attr("width",n).attr("height",i),s=u.a.nest().key((e=>e.entity)).entries(e).sort(((e,t)=>t.values.length-e.values.length)).filter(((e,t)=>T!==y.b.EVENT_DISTRIBUTION||t<30||e.key===A)).map((e=>e.key));if(e=e.filter((e=>s.includes(e.entity))),T===y.b.POPULATION_DISTRIBUTION){const r=e.filter((e=>e.entity===A)),{min:a,max:n}=Object(o.e)(r,t);e=e.filter((e=>e.value<=n)),_=u.a.scale.linear().range([k,0]).domain([a<0?a:0,n]).nice()}else{if(T!==y.b.EVENT_DISTRIBUTION)throw`chartType '${T}' not supported`;{const e=5;_=u.a.scale.ordinal().rangePoints([e,k-e]).domain(s)}}const m=u.a.svg.axis().scale(_).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);let h=0;const f=l.append("g").attr("class","temp-axis-label tick"),x=T===y.b.POPULATION_DISTRIBUTION?_.ticks():s;return f.selectAll("text.temp.axis").data(x).enter().append("text").text((e=>void 0!==v?v.convert(e,"text"):T===y.b.POPULATION_DISTRIBUTION?_.tickFormat()(e):e)).each((function(){h=Math.max(this.getBBox().width+m.tickPadding(),h)})).remove(),u.a.select(".temp-axis-label").remove(),(T===y.b.POPULATION_DISTRIBUTION||T===y.b.EVENT_DISTRIBUTION&&s.length<=10)&&(I.left=Math.max(h,40)),j=n-I.left-I.right,E=u.a.time.scale().range([0,j]).domain([d.plotEarliest,d.plotLatest]),S=u.a.svg.line().x((e=>E(e.date))).y((e=>_(e[M]))).defined((e=>null!==e.value)),w=l.append("g").attr("class","line-chart").attr("transform","translate("+I.left+","+I.top+")"),e}(d),w.append("rect").attr("x",0).attr("y",0).attr("height",k).attr("width",j).style("stroke","#cccccc").style("fill","none").style("stroke-width",1),function(){const t={min:h()(d.plotEarliest),max:h()(d.plotLatest)};r.setBounds(t),r.setInterval("auto");const a=r.getScaledDateFormat(),n=Math.max(d.selectedEarliest,d.plotEarliest),i=d.selectedLatest-d.selectedEarliest+1,l=u.a.svg.axis().scale(E).orient("bottom").innerTickSize(-170).outerTickSize(0).tickPadding(10).tickFormat((e=>h()(e).format(a))),s=!0===e||i>=d.plotLatest-d.plotEarliest;if(!1===s){const e=Object(o.j)(n,i,d.plotEarliest,d.plotLatest);l.tickValues(e)}else l.ticks(Object(o.l)(j,a));const c=u.a.svg.axis().scale(_).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);void 0!==v&&c.tickFormat((e=>v.convert(e,"text")));const p=w.append("g"),m=p.append("g").attr("class","x axis").attr("transform","translate(0,170)").call(l);p.append("g").attr("class","y axis").call(c),T===y.b.EVENT_DISTRIBUTION&&p.select(".y").selectAll("text").each((function(e){u.a.select(this).classed("ml-explorer-chart-axis-emphasis",e===A)})),!1===s&&Object(o.m)(m,n,i,j)}(),function(){if(!1===a)return;const e=Math.max(d.selectedEarliest,d.plotEarliest),t=Math.min(d.selectedLatest,d.plotLatest),r=E(t)-E(e);w.append("rect").attr("class","selected-interval").attr("x",E(new Date(e))+2).attr("y",2).attr("rx",3).attr("ry",3).attr("width",r-4).attr("height",166)}(),function(e){var t,r,a;e.append("rect").attr("x",0).attr("y",0).attr("height",k).attr("width",j).on("mouseout",(function(){n({chartId:"ml-anomaly-chart-metric",scale:"time",smHorizontalValue:null,smVerticalValue:null,type:"Out",unit:void 0})})).on("mousemove",(function(){const e=u.a.mouse(this);n({chartId:"ml-anomaly-chart-metric",scale:"time",smHorizontalValue:null,smVerticalValue:null,type:"Over",unit:void 0,x:1e3*h()(E.invert(e[0])).unix()})})).style("fill",O);const o=l&&"Over"===l.type&&l.x>=d.plotEarliest&&l.x<=d.plotLatest?[l.x]:[],s=e.append("g").attr("class","ml-anomaly-chart-cursor").selectAll(".ml-anomaly-chart-cursor-line").data(o);s.enter().append("path").attr("class","ml-anomaly-chart-cursor-line").attr("d",(e=>{const t=E(e);return`M${t},170 ${t},0`})).style("stroke",`${null!==(t=i.crosshair.line.stroke)&&void 0!==t?t:"black"}`).style("stroke-width",`${null!==(r=i.crosshair.line.strokeWidth)&&void 0!==r?r:"1"}px`).style("stroke-dasharray",null!==(a=i.crosshair.line.dash)&&void 0!==a?a:"4,4"),s.exit().remove()}(w),function(e,t,r,a=1.5){const n=(t.select(".values-dots").empty()?t.append("g").classed("values-dots",!0):t.select(".values-dots")).selectAll("circle").data(e);n.enter().append("circle").classed("values-dots-circle",!0).classed("values-dots-circle-blur",(e=>e.entity!==A)).attr("r",(e=>e.entity===A?1.5*a:a)),n.attr("cx",r.x()).attr("cy",r.y()),n.exit().remove()}(N,w,S),function(e){const r=w.append("g").attr("class","chart-markers").selectAll(".metric-value").data(e.filter((e=>null!==e.value)));r.exit().remove(),r.enter().append("circle").attr("r",7).on("mouseover",(function(e){!function(e,r){const a=[{label:Object(f.c)(e.date)}],n=d.detectorLabel;if(void 0!==e.entity&&a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.entityLabel",{defaultMessage:"entity"}),value:e.entity,seriesIdentifier:{key:n},valueAccessor:"entity"}),void 0!==e.anomalyScore){const t=parseInt(e.anomalyScore),r=Object(b.g)(t);a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.anomalyScoreLabel",{defaultMessage:"anomaly score"}),value:r,color:Object(b.j)(t),seriesIdentifier:{key:n},valueAccessor:"anomaly_score"}),T!==y.b.EVENT_DISTRIBUTION&&(a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.valueLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"value"}),void 0!==e.numberOfCauses&&1!==e.numberOfCauses||a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.typicalLabel",{defaultMessage:"typical"}),value:Object(x.b)(e.typical,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"typical"}),void 0!==e.byFieldName&&void 0!==e.numberOfCauses&&a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.unusualByFieldValuesLabel",{defaultMessage:"{ numberOfCauses, plural, one {# unusual {byFieldName} value} other {#{plusSign} unusual {byFieldName} values}}",values:{numberOfCauses:e.numberOfCauses,byFieldName:e.byFieldName,plusSign:e.numberOfCauses<10?"":"+"}}),seriesIdentifier:{key:n},valueAccessor:"numberOfCauses"}))}else T!==y.b.EVENT_DISTRIBUTION&&a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.valueWithoutAnomalyScoreLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"value"});void 0!==e.scheduledEvents&&e.scheduledEvents.forEach(((t,r)=>{a.push({label:s.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.scheduledEventsLabel",{defaultMessage:"scheduled event{counter}",values:{counter:e.scheduledEvents.length>1?` #${r+1}`:""}}),value:t,seriesIdentifier:{key:n},valueAccessor:`scheduled_events_${r+1}`})})),t.show(a,r,{x:21,y:14})}(e,this)})).on("mouseout",(()=>t.hide())),r.attr("cx",(e=>E(e.date))).attr("cy",(e=>_(e[M]))).attr("class",(e=>{let t="metric-value";return void 0!==e.anomalyScore&&Number(e.anomalyScore)>=m&&(t+=" anomaly-marker ",t+=Object(b.l)(e.anomalyScore).id),t}));const a=w.select(".chart-markers").selectAll(".scheduled-event-marker").data(e.filter((e=>void 0!==e.scheduledEvents)));a.exit().remove(),a.enter().append("rect").attr("width",14).attr("height",5).attr("class","scheduled-event-marker").attr("rx",1).attr("ry",1),a.attr("x",(e=>E(e.date)-7)).attr("y",(e=>_(e[M])-2.5))}(N)}shouldComponentUpdate(){return!0}setRef(e){this.rootNode=e}render(){const{seriesConfig:e}=this.props;if(void 0===e)return null;const t=e.loading;return Object(j.jsx)("div",{className:"ml-explorer-chart",ref:this.setRef.bind(this)},t&&Object(j.jsx)(v.a,{height:215}),!t&&Object(j.jsx)("div",{className:"content-wrapper"}))}}const k="ml-explorer-chart-content-wrapper";class explorer_chart_single_metric_ExplorerChartSingleMetric extends n.a.Component{componentDidMount(){this.renderChart()}componentDidUpdate(){this.renderChart()}renderChart(){const{tooManyBuckets:e,tooltipService:t,timeBuckets:r,showSelectedInterval:a,onPointerUpdate:n,chartTheme:i,cursor:l}=this.props,c=this.rootNode,d=this.props.seriesConfig,m=this.props.severity;if(void 0===d||!1===Array.isArray(d.chartData))return;const v=g.a.getFieldFormat(d.jobId,d.detectorIndex);let y=0;const j=170,T={top:10,right:0,bottom:30,left:60};let I,w=null,E=null,_=null;var S;function M(e,r){const a=[{label:Object(f.c)(e.date)}],n=d.detectorLabel;if(void 0!==e.anomalyScore){const t=parseInt(e.anomalyScore);a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.anomalyScoreLabel",{defaultMessage:"anomaly score"}),value:Object(b.g)(t),color:Object(b.j)(t),seriesIdentifier:{key:n},valueAccessor:"anomaly_score"}),!0===Object(o.o)(e)&&a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.multiBucketImpactLabel",{defaultMessage:"multi-bucket impact"}),value:Object(b.h)(e.multiBucketImpact),seriesIdentifier:{key:n},valueAccessor:"multi_bucket_impact"}),void 0!==e.actual&&"rare"!==d.functionDescription?(a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.actualLabel",{defaultMessage:"actual"}),value:Object(x.b)(e.actual,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"actual"}),a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.typicalLabel",{defaultMessage:"typical"}),value:Object(x.b)(e.typical,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"typical"})):(a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.valueLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"value"}),void 0!==e.byFieldName&&void 0!==e.numberOfCauses&&a.push({label:s.i18n.translate("xpack.ml.explorer.distributionChart.unusualByFieldValuesLabel",{defaultMessage:"{ numberOfCauses, plural, one {# unusual {byFieldName} value} other {#{plusSign} unusual {byFieldName} values}}",values:{numberOfCauses:e.numberOfCauses,byFieldName:e.byFieldName,plusSign:e.numberOfCauses<10?"":"+"}}),seriesIdentifier:{key:n},valueAccessor:"numberOfCauses"}))}else a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.valueWithoutAnomalyScoreLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,d.functionDescription,v),seriesIdentifier:{key:n},valueAccessor:"value"});void 0!==e.scheduledEvents&&a.push({label:s.i18n.translate("xpack.ml.explorer.singleMetricChart.scheduledEventsLabel",{defaultMessage:"Scheduled events"}),value:e.scheduledEvents,seriesIdentifier:{key:n},valueAccessor:"scheduledEvents"}),t.show(a,r,{x:3*o.b,y:2*o.b})}!function(e){const t=p()(".ml-explorer-chart"),r=u.a.select(c).select(`.${k}`);r.select("svg").remove();const a=t.width(),n=j+T.top+T.bottom,i=r.append("svg").classed("ml-explorer-chart-svg",!0).attr("width",a).attr("height",n);E=u.a.scale.linear().range([j,0]).domain([e.min,e.max]).nice();const l=u.a.svg.axis().scale(E).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);let o=0;i.append("g").attr("class","temp-axis-label tick").selectAll("text.temp.axis").data(E.ticks()).enter().append("text").text((e=>void 0!==v?v.convert(e,"text"):E.tickFormat()(e))).each((function(){o=Math.max(this.getBBox().width+l.tickPadding(),o)})).remove(),u.a.select(".temp-axis-label").remove(),T.left=Math.max(o,40),y=a-T.left-T.right,w=u.a.time.scale().range([0,y]).domain([d.plotEarliest,d.plotLatest]),_=u.a.svg.line().x((e=>w(e.date))).y((e=>E(e.value))).defined((e=>null!==e.value)),I=i.append("g").attr("class","line-chart").attr("transform","translate("+T.left+","+T.top+")")}(d.chartLimits),S=d.chartData,I.append("rect").attr("x",0).attr("y",0).attr("height",j).attr("width",y).style("stroke","#cccccc").style("fill","none").style("stroke-width",1),function(){const t={min:h()(d.plotEarliest),max:h()(d.plotLatest)};r.setBounds(t),r.setInterval("auto");const a=r.getScaledDateFormat(),n=Math.max(d.selectedEarliest,d.plotEarliest),i=d.selectedLatest-d.selectedEarliest+1,l=u.a.svg.axis().scale(w).orient("bottom").innerTickSize(-170).outerTickSize(0).tickPadding(10).tickFormat((e=>h()(e).format(a))),s=!0===e||i>=d.plotLatest-d.plotEarliest;if(!1===s){const e=Object(o.j)(n,i,d.plotEarliest,d.plotLatest);l.tickValues(e)}else l.ticks(Object(o.l)(y,a));const c=u.a.svg.axis().scale(E).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);void 0!==v&&c.tickFormat((e=>v.convert(e,"text")));const p=I.append("g"),m=p.append("g").attr("class","x axis").attr("transform","translate(0,170)").call(l);p.append("g").attr("class","y axis").call(c),!1===s&&Object(o.m)(m,n,i,y)}(),function(){if(!1===a)return;const e=Math.max(d.selectedEarliest,d.plotEarliest),t=Math.min(d.selectedLatest,d.plotLatest),r=w(t)-w(e);I.append("rect").attr("class","selected-interval").attr("x",w(new Date(e))+2).attr("y",2).attr("rx",3).attr("ry",3).attr("width",r-4).attr("height",166)}(),function(e){var t,r,a;e.append("rect").attr("x",0).attr("y",0).attr("height",j).attr("width",y).on("mouseout",(function(){n({chartId:"ml-anomaly-chart-metric",scale:"time",smHorizontalValue:null,smVerticalValue:null,type:"Out",unit:void 0})})).on("mousemove",(function(){const e=u.a.mouse(this);n&&n({chartId:"ml-anomaly-chart-metric",scale:"time",smHorizontalValue:null,smVerticalValue:null,type:"Over",unit:void 0,x:1e3*h()(w.invert(e[0])).unix()})})).style("fill",O);const o=l&&"Over"===l.type&&l.x>=d.plotEarliest&&l.x<=d.plotLatest?[l.x]:[],s=e.append("g").attr("class","ml-anomaly-chart-cursor").selectAll(".ml-anomaly-chart-cursor-line").data(o);s.enter().append("path").attr("class","ml-anomaly-chart-cursor-line").attr("d",(e=>{const t=w(e);return`M${t},170 ${t},0`})).style("stroke",`${null!==(t=i.crosshair.line.stroke)&&void 0!==t?t:"black"}`).style("stroke-width",`${null!==(r=i.crosshair.line.strokeWidth)&&void 0!==r?r:"1"}px`).style("stroke-dasharray",null!==(a=i.crosshair.line.dash)&&void 0!==a?a:"4,4"),s.exit().remove()}(I),function(e){I.append("path").attr("class","values-line").attr("d",_(e))}(S),Object(o.f)(S,I,_),function(e){const r=I.append("g").attr("class","chart-markers").selectAll(".metric-value").data(e.filter((e=>(null!==e.value||"number"==typeof e.anomalyScore)&&!Object(o.n)(e))));r.exit().remove(),r.enter().append("circle").attr("r",o.b).on("mouseover",(function(e){M(e,this)})).on("mouseout",(()=>t.hide()));const a=e=>void 0!==e.anomalyScore&&Number(e.anomalyScore)>=m;r.attr("cx",(e=>w(e.date))).attr("cy",(e=>E(e.value))).attr("class",(e=>{let t="metric-value";return a(e)&&(t+=` anomaly-marker ${Object(b.l)(e.anomalyScore).id}`),t}));const n=I.select(".chart-markers").selectAll(".multi-bucket").data(e.filter((e=>a(e)&&!0===Object(o.n)(e))));n.exit().remove(),n.enter().append("path").attr("d",u.a.svg.symbol().size(o.c).type("cross")).attr("transform",(e=>`translate(${w(e.date)}, ${E(e.value)})`)).attr("class",(e=>`anomaly-marker multi-bucket ${Object(b.l)(e.anomalyScore).id}`)).on("mouseover",(function(e){M(e,this)})).on("mouseout",(()=>t.hide()));const i=I.select(".chart-markers").selectAll(".scheduled-event-marker").data(e.filter((e=>void 0!==e.scheduledEvents)));i.exit().remove(),i.enter().append("rect").attr("width",2*o.b).attr("height",o.d).attr("class","scheduled-event-marker").attr("rx",1).attr("ry",1),i.attr("x",(e=>w(e.date)-o.b)).attr("y",(e=>E(e.value)-o.d/2))}(S)}shouldComponentUpdate(){return!0}setRef(e){this.rootNode=e}render(){const{seriesConfig:e}=this.props;if(void 0===e)return null;const t=e.loading;return Object(j.jsx)("div",{className:"ml-explorer-chart",ref:this.setRef.bind(this)},t&&Object(j.jsx)(v.a,{height:215}),!t&&Object(j.jsx)("div",{className:k}))}}function T({entity:e}){return Object(j.jsx)("span",{className:"ml-explorer-chart-label-badge"},Object(j.jsx)(l.EuiBadge,{color:"hollow",className:"ml-reset-font-weight"},e.fieldName," ",Object(j.jsx)("strong",null,e.fieldValue)))}r(667),r(672);const I={[y.b.EVENT_DISTRIBUTION]:s.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartEventDistributionDescription",{defaultMessage:"The gray dots depict the approximate distribution of occurrences over time for a sample of {byFieldValuesParam} with more frequent event types at the top and rarer ones at the bottom.",values:{byFieldValuesParam:"by_field_values"}}),[y.b.POPULATION_DISTRIBUTION]:s.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartPopulationDistributionDescription",{defaultMessage:"The gray dots depict the approximate distribution of values over time for a sample of {overFieldValuesParam}.",values:{overFieldValuesParam:"over_field_values"}})};function w({toolTipData:e}){return Object(j.jsx)("dl",{className:"mlDescriptionList"},e.map((({title:e,description:t})=>Object(j.jsx)(n.a.Fragment,{key:`${e} ${t}`},Object(j.jsx)("dt",{className:"mlDescriptionList__title"},e),Object(j.jsx)("dd",{className:"mlDescriptionList__description"},t)))))}const E=({jobId:e,aggregationInterval:t,chartFunction:r,chartType:a,entityFields:i=[]})=>{const o=I[a],c=[{title:s.i18n.translate("xpack.ml.explorer.charts.infoTooltip.jobIdTitle",{defaultMessage:"job ID"}),description:e},{title:s.i18n.translate("xpack.ml.explorer.charts.infoTooltip.aggregationIntervalTitle",{defaultMessage:"aggregation interval"}),description:t},{title:s.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartFunctionTitle",{defaultMessage:"chart function"}),description:r}];return i.forEach((e=>{c.push({title:e.fieldName,description:e.fieldValue})})),Object(j.jsx)("div",{className:"ml-explorer-chart-info-tooltip"},Object(j.jsx)(w,{toolTipData:c}),o&&Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(l.EuiSpacer,{size:"s"}),Object(j.jsx)("div",{className:"ml-explorer-chart-description"},o)))};var _=r(44),S=r(170);r(677);const M=({onFilter:e,influencerFieldName:t,influencerFieldValue:r})=>Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(l.EuiToolTip,{content:Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.entityFilter.addFilterTooltip",defaultMessage:"Add filter"})},Object(j.jsx)(l.EuiButtonIcon,{size:"s",className:"filter-button",onClick:Object(S.a)((()=>{e({influencerFieldName:t,influencerFieldValue:r,action:b.a.ADD})})),iconType:"plusInCircle","aria-label":s.i18n.translate("xpack.ml.entityFilter.addFilterAriaLabel",{defaultMessage:"Add filter for {influencerFieldName} {influencerFieldValue}",values:{influencerFieldName:t,influencerFieldValue:r}})})),Object(j.jsx)(l.EuiToolTip,{content:Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.entityFilter.removeFilterTooltip",defaultMessage:"Remove filter"})},Object(j.jsx)(l.EuiButtonIcon,{size:"s",className:"filter-button",onClick:Object(S.a)((()=>{e({influencerFieldName:t,influencerFieldValue:r,action:b.a.REMOVE})})),iconType:"minusInCircle","aria-label":s.i18n.translate("xpack.ml.entityFilter.removeFilterAriaLabel",{defaultMessage:"Remove filter for {influencerFieldName} {influencerFieldValue}",values:{influencerFieldName:t,influencerFieldValue:r}})})));function A({detectorLabel:e,entityFields:t,infoTooltip:r,wrapLabel:i=!1,onSelectEntity:o}){const s=!0===i||0===t.length||0===e.length?Object(j.jsx)(n.a.Fragment,null," "):Object(j.jsx)(n.a.Fragment,null," – "),c=Object(a.useCallback)((({influencerFieldName:e,influencerFieldValue:t,action:r})=>o(e,t,r)),[o]),u=t.map((e=>{const t=`${r.chartFunction}-${e.fieldName}-${e.fieldType}-${e.fieldValue}`;return Object(j.jsx)(a.Fragment,{key:`badge-wrapper-${t}`},Object(j.jsx)(T,{entity:e}),void 0!==o&&Object(j.jsx)(M,{onFilter:c,influencerFieldName:e.fieldName,influencerFieldValue:e.fieldValue}))})),d=Object(j.jsx)("span",{className:"ml-explorer-chart-info-icon"},Object(j.jsx)(l.EuiIconTip,{className:"ml-explorer-chart-eui-icon-tip",content:Object(j.jsx)(E,r),position:"top",size:"s"}));return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)("span",{className:"ml-explorer-chart-label"},Object(j.jsx)("span",{className:"ml-explorer-chart-label-detector"},e,s),i&&d,!i&&Object(j.jsx)(n.a.Fragment,null,u," ",d)),i&&Object(j.jsx)("span",{className:"ml-explorer-chart-label-badges"},u))}var N=r(112),F=r(252),L=r(45),C=r(75),D=r(96),B=r(162),R=r(50),V=r(63);const P=({errorMessagesByType:e})=>{if(!e||0===Object.keys(e).length)return null;const t=Object.keys(e).map((t=>Object(j.jsx)(l.EuiCallOut,{color:"warning",size:"s",key:t},Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.explorerCharts.errorCallOutMessage",defaultMessage:"You can't view anomaly charts for {jobs} because {reason}.",values:{jobs:[...e[t]].join(", "),reason:t}}))));return Object(j.jsx)(n.a.Fragment,null,t,Object(j.jsx)(l.EuiSpacer,{size:"m"}))};var z=r(194),U=r(18);function H(e,t){const r=[];for(let n=0;n<e.length;n++){var a;const i=e[n],l=i.geo_results||(null==i?void 0:i.causes)&&(null==i||null===(a=i.causes[0])||void 0===a?void 0:a.geo_results),o=l&&l[t];if(void 0!==o){const e=o.split(",").map((e=>Number(e))).reverse();r.push({type:"Feature",geometry:{type:"Point",coordinates:e},properties:{record_score:Math.floor(i.record_score),[t]:e.map((e=>e.toFixed(2)))}})}}return r}const $=e=>({id:"anomalies_typical_layer",label:"Typical",sourceDescriptor:{id:"b7486535-171b-4d3b-bb2e-33c1a0a2854e",type:"GEOJSON_FILE",__featureCollection:{features:H(e,"typical_point"),type:"FeatureCollection"}},visible:!0,style:{type:"VECTOR",properties:{fillColor:{type:"STATIC",options:{color:"#98A2B2"}},lineColor:{type:"STATIC",options:{color:"#fff"}},lineWidth:{type:"STATIC",options:{size:2}},iconSize:{type:"STATIC",options:{size:6}}}},type:R.LAYER_TYPE.GEOJSON_VECTOR});var G=r(391);function Y({seriesConfig:e}){const[t,r]=Object(a.useState)([]);return Object(a.useEffect)((()=>{var t;e.mapData&&e.mapData.length>0&&r([(t=e.mapData,{id:"anomalies_actual_layer",label:"Actual",sourceDescriptor:{id:"b7486535-171b-4d3b-bb2e-33c1a0a2854d",type:"GEOJSON_FILE",__fields:[{name:"record_score",type:"number"}],__featureCollection:{features:H(t,"actual_point"),type:"FeatureCollection"}},visible:!0,style:{type:"VECTOR",properties:{fillColor:{type:R.STYLE_TYPE.DYNAMIC,options:{customColorRamp:U.SEVERITY_COLOR_RAMP,field:{name:"record_score",origin:R.FIELD_ORIGIN.SOURCE},useCustomColorRamp:!0}},lineColor:{type:"STATIC",options:{color:"#fff"}},lineWidth:{type:"STATIC",options:{size:2}},iconSize:{type:"STATIC",options:{size:6}}}},type:R.LAYER_TYPE.GEOJSON_VECTOR}),$(e.mapData)])}),[e]),Object(j.jsx)("div",{"data-test-subj":"xpack.ml.explorer.embeddedMap",style:{width:"100%",height:300}},Object(j.jsx)(G.a,{layerList:t}))}var J=r(72),W=r(47),q=r(89),X=r.n(q);const K=s.i18n.translate("xpack.ml.explorer.charts.tooManyBucketsDescription",{defaultMessage:"This selection contains too many buckets to be displayed. You should shorten the time range of the view or narrow the selection in the timeline."}),Q=s.i18n.translate("xpack.ml.explorer.charts.openInSingleMetricViewerButtonLabel",{defaultMessage:"Open in Single Metric Viewer"}),Z=s.i18n.translate("xpack.ml.explorer.charts.mapsPluginMissingMessage",{defaultMessage:"maps or embeddable start plugin not found"}),ee=s.i18n.translate("xpack.ml.explorer.charts.openInMapsPluginMessage",{defaultMessage:"Open in Maps"});function te(e){const{jobId:t,detectorLabel:r,entityFields:a}=e;return`${t}_${r}_${a.map((e=>`${e.fieldName}/${e.fieldValue}`)).join(",")}`}function re({series:e,severity:t,tooManyBuckets:r,wrapLabel:s,mlLocator:c,timeBuckets:u,timefilter:d,onSelectEntity:p,recentlyAccessed:m,tooManyBucketsCalloutMsg:h,showSelectedInterval:f,chartsService:x}){var b;const[v,g]=Object(a.useState)(""),[O,k]=Object(a.useState)(""),{services:{data:T,share:I,application:{navigateToApp:w}}}=Object(C.b)(),E=Object(a.useCallback)((async()=>{const{queryString:t,query:r}=function(e){var t;const r=null===(t=e.entityFields)||void 0===t?void 0:t.map((({fieldName:e,fieldValue:t})=>`${Object(i.d)(e)}:${Object(i.d)(t)}`)).join(" or ");return{query:{language:N.c.KUERY,query:r},queryString:r}}(e),a=Object(B.c)(e.jobId),n=I.url.locators.get(V.MAPS_APP_LOCATOR);return await n.getLocation({initialLayers:a,timeRange:T.query.timefilter.timefilter.getTime(),...void 0!==t?{query:r}:{}})}),[null==e?void 0:e.jobId]);Object(a.useEffect)((()=>{let t=!1;return(async()=>{if(!t&&e.functionDescription!==D.b.LAT_LONG)try{const t=await Object(o.i)(c,e,d);g(t)}catch(e){g("")}})(),()=>{t=!0}}),[c,e]),Object(a.useEffect)((function(){let t=!1;if(e&&Object(o.h)(e)===y.b.GEO_MAP){const e=async()=>{try{const e=await E();t||k(null==e?void 0:e.path)}catch(e){console.error(e),k("")}};e().catch(console.error)}return()=>{t=!0}}),[e]);const S=Object(a.useRef)(null),M=x.theme.useChartsTheme(),L=Object(J.useActiveCursor)(x.activeCursor,S,{isDateHistogram:!0}),P=null===(b=X()(x.activeCursor.activeCursor$))||void 0===b?void 0:b.cursor,U=Object(a.useCallback)((()=>{m&&Object(z.a)("timeseriesexplorer",e.jobId,v,m)}),[v,m]),{detectorLabel:H,entityFields:$}=e,G=Object(o.h)(e);let q=Object(j.jsx)(n.a.Fragment,null,H);if(G===y.b.EVENT_DISTRIBUTION){const t=e.entityFields.find((e=>"by"===e.fieldType));void 0!==t&&(q=Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.explorer.charts.detectorLabel",defaultMessage:'{detectorLabel}{br}y-axis event distribution split by "{fieldName}"',values:{detectorLabel:H,br:Object(j.jsx)("br",null),fieldName:t.fieldName}})),s=!0)}return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)("div",{style:{width:0,height:0}},Object(j.jsx)(W.Chart,{ref:S},Object(j.jsx)(W.Settings,{noResults:Object(j.jsx)("div",null)}))),Object(j.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)(A,{detectorLabel:q,entityFields:$,infoTooltip:{...e.infoTooltip,chartType:G},wrapLabel:s,onSelectEntity:p})),Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)("div",{className:"ml-explorer-chart-icons"},r&&Object(j.jsx)("span",{className:"ml-explorer-chart-icon"},Object(j.jsx)(l.EuiIconTip,{content:null!=h?h:K,position:"top",size:"s",type:"alert",color:"warning"})),v&&Object(j.jsx)(l.EuiToolTip,{position:"top",content:Q},Object(j.jsx)(l.EuiButtonEmpty,{iconSide:"right",iconType:"visLine",size:"xs",href:v,onClick:U},Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.explorer.charts.viewLabel",defaultMessage:"View"}))),G===y.b.GEO_MAP&&O?Object(j.jsx)(l.EuiToolTip,{position:"top",content:ee},Object(j.jsx)(l.EuiButtonEmpty,{iconSide:"right",iconType:"logoMaps",size:"xs",onClick:async()=>{await w(R.APP_ID,{path:O})}},Object(j.jsx)(_.FormattedMessage,{id:"xpack.ml.explorer.charts.viewInMapsLabel",defaultMessage:"View"}))):null))),G===y.b.GEO_MAP?Object(j.jsx)(F.a,null,(t=>Object(j.jsx)(Y,{seriesConfig:e,tooltipService:t}))):G===y.b.EVENT_DISTRIBUTION||G===y.b.POPULATION_DISTRIBUTION?Object(j.jsx)(F.a,null,(a=>Object(j.jsx)(explorer_chart_distribution_ExplorerChartDistribution,{timeBuckets:u,tooManyBuckets:r,seriesConfig:e,severity:t,tooltipService:a,showSelectedInterval:f,onPointerUpdate:L,chartTheme:M,cursor:P}))):G===y.b.SINGLE_METRIC?Object(j.jsx)(F.a,null,(a=>Object(j.jsx)(explorer_chart_single_metric_ExplorerChartSingleMetric,{timeBuckets:u,tooManyBuckets:r,seriesConfig:e,severity:t,tooltipService:a,showSelectedInterval:f,onPointerUpdate:L,chartTheme:M,cursor:P}))):void 0)}const ae=Object(L.withKibana)((({chartsPerRow:e,seriesToPlot:t,severity:r,tooManyBuckets:a,kibana:i,errorMessages:s,mlLocator:c,timeBuckets:u,timefilter:d,onSelectEntity:p,tooManyBucketsCalloutMsg:m,showSelectedInterval:h,chartsService:f})=>{const{services:{chrome:{recentlyAccessed:x},embeddable:b,maps:v}}=i;let g;b&&v||(g=[],t.forEach((e=>{"lat_long"===e.functionDescription?void 0===s[Z]?s[Z]=new Set([e.jobId]):s[Z].add(e.jobId):g.push(e)})));const y=void 0!==g?g:t,O=1===e?"calc(100% - 20px)":"auto",k=1===e?0:e,T=y.some((e=>Object(o.k)(e)));return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(P,{errorMessagesByType:s}),Object(j.jsx)(l.EuiFlexGrid,{columns:k,"data-test-subj":"mlExplorerChartsContainer"},y.length>0&&y.map((e=>Object(j.jsx)(l.EuiFlexItem,{key:te(e),className:"ml-explorer-chart-container",style:{minWidth:O}},Object(j.jsx)(re,{series:e,severity:r,tooManyBuckets:a,wrapLabel:T,mlLocator:c,timeBuckets:u,timefilter:d,onSelectEntity:p,recentlyAccessed:x,tooManyBucketsCalloutMsg:m,showSelectedInterval:h,chartsService:f}))))))}))},391:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(17),n=r(43),i=r(50),l=r(51),o=r(75),s=r(13);function c({layerList:e,mapEmbeddableInput:t,renderTooltipContent:r}){const[c,u]=Object(a.useState)(),d=Object(a.useRef)(null),p=Object(a.useRef)(),{services:{embeddable:m,maps:h}}=Object(o.b)(),f=m?m.getEmbeddableFactory(i.MAP_SAVED_OBJECT_TYPE):void 0;return Object(a.useEffect)((()=>{!async function(){c&&!Object(l.isErrorEmbeddable)(c)&&Array.isArray(e)&&Array.isArray(p.current)&&c.setLayerList([...p.current,...e])}()}),[c,e]),Object(a.useEffect)((()=>{!async function(){if(!f)return void console.error("Map embeddable not found.");const e={id:Object(n.htmlIdGenerator)()(),attributes:{title:""},filters:[],hidePanelTitles:!0,viewMode:l.ViewMode.VIEW,isLayerTOCOpen:!1,hideFilterActions:!0,mapSettings:{disableInteractive:!1,hideToolbarOverlay:!1,hideLayerControl:!1,hideViewControl:!1,initialLocation:i.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS,autoFitToDataBounds:!0}},t=await f.create(e);if(t&&!Object(l.isErrorEmbeddable)(t)){const e=h?await h.createLayerDescriptors.createBasemapLayerDescriptor():null;e&&(p.current=[e],await t.setLayerList(p.current))}u(t)}()}),[]),Object(a.useEffect)((()=>{c&&!Object(l.isErrorEmbeddable)(c)&&void 0!==t&&c.updateInput(t)}),[c,t]),Object(a.useEffect)((()=>{c&&!Object(l.isErrorEmbeddable)(c)&&void 0!==r&&c.setRenderTooltipContent(r)}),[c,r]),Object(a.useEffect)((()=>{d.current&&c&&c.render(d.current)}),[c,d]),m?h?Object(s.jsx)("div",{"data-test-subj":"mlEmbeddedMapContent",className:"mlEmbeddedMapContent",ref:d}):(console.error("Maps start plugin not found"),null):(console.error("Embeddable start plugin not found"),null)}},662:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(663);case"v8light":return r(665)}},663:function(e,t,r){var a=r(80),n=r(664);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},664:function(e,t,r){(t=r(81)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#1D1E24;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#98A2B3;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#98A2B3;fill:#343741;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#343741;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#98A2B3}.ml-explorer-chart-container .axis .tick line{stroke:#343741;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#36A2EF;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#36A2EF;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#535966}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#36A2EF;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#535966}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#36A2EF}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},665:function(e,t,r){var a=r(80),n=r(666);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},666:function(e,t,r){(t=r(81)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#fff;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#69707D;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#69707D;fill:#D3DAE6;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#D3DAE6;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#69707D}.ml-explorer-chart-container .axis .tick line{stroke:#D3DAE6;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#07C;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#07C;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#98A2B3}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#07C;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#98A2B3}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#07C}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},667:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(668);case"v8light":return r(670)}},668:function(e,t,r){var a=r(80),n=r(669);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},669:function(e,t,r){(t=r(81)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},670:function(e,t,r){var a=r(80),n=r(671);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},671:function(e,t,r){(t=r(81)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},672:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(673);case"v8light":return r(675)}},673:function(e,t,r){var a=r(80),n=r(674);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},674:function(e,t,r){(t=r(81)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},675:function(e,t,r){var a=r(80),n=r(676);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},676:function(e,t,r){(t=r(81)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},677:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(678);case"v8light":return r(680)}},678:function(e,t,r){var a=r(80),n=r(679);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},679:function(e,t,r){(t=r(81)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},680:function(e,t,r){var a=r(80),n=r(681);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},681:function(e,t,r){(t=r(81)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},98:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"h",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return m})),r.d(t,"i",(function(){return h})),r.d(t,"g",(function(){return f}));var a=r(2),n=r(26);let i=[],l=null;async function o(e){l=e}function s(){return Object(n.i)().find({type:"search",perPage:1e4}).then((e=>(i=e.savedObjects,i)))}async function c(){if(null===l)throw new Error("Data views are not initialized!");return(await l.getIdsWithTitle()).map((({title:e})=>e))}async function u(e){var t;if(null===l)throw new Error("Data views are not initialized!");const r=(await l.find(e)).find((({title:t})=>t===e));return r?null!==(t=r.id)&&void 0!==t?t:r.title:null}function d(e){if(null===l)throw new Error("Data views are not initialized!");return e?l.get(e):l.create({})}async function p(e){var t;const r={savedSearch:null,dataView:null};if(void 0===e)return r;const a=await async function(e){const t=Object(n.i)(),r=await t.get("search",e);return void 0===r.error?r:null}(e);if(null===a)return r;const i=null===(t=a.references.find((e=>"index-pattern"===e.type)))||void 0===t?void 0:t.id;return r.dataView=await d(i),r.savedSearch=a,r}function m(e){const t=e.attributes.kibanaSavedObjectMeta;return JSON.parse(t.searchSourceJSON)}function h(e,t=!1){return!!e.isTimeBased()||(t&&Object(n.l)().addWarning({title:a.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationTitle",{defaultMessage:"The data view {dataViewName} is not based on a time series",values:{dataViewName:e.title}}),text:a.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationDescription",{defaultMessage:"Anomaly detection only runs over time-based indices"})}),!1)}function f(e){return e.includes(":")}}}]);