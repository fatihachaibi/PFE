/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[18],{135:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"a",(function(){return u}));var r=e(24),i=e.n(r);function o(t,n,e,r){return Array.isArray(t)?1===t.length?u(t[0],n,e,r):`[${t.map((t=>u(t,n,void 0,r)))}]`:u(t,n,e,r)}function u(t,n,e,r){if(null==t)return"";if("time_of_week"===n){const n=void 0!==r&&void 0!==r.timestamp?new Date(r.timestamp):new Date,e=i()(n).unix()%i.a.duration(1,"week").asSeconds(),o=i.a.duration(e,"seconds"),u=i.a.utc(n).subtract(o).startOf("day").add(t,"s");return i()(u.valueOf()).format("ddd HH:mm")}if("time_of_day"===n){const n=void 0!==r&&void 0!==r.timestamp?new Date(r.timestamp):new Date,e=i.a.utc(n).startOf("day").add(t,"s");return i()(e.valueOf()).format("HH:mm")}if(void 0!==e)return e.convert(t,"text");{const n=Math.abs(t);if(n>=1e4||n===Math.floor(n))return void 0!==e?e.convert(t,"text"):Number(t.toFixed(0));if(n>=10)return Number(t.toFixed(1));{let n;return n=t>0?Math.pow(10,3-Math.floor(Math.log(t)/Math.LN10)-1):Math.pow(10,3-Math.floor(Math.log(-1*t)/Math.LN10)-1),Math.round(t*n)/n}}}},141:function(t,n,e){"use strict";e.d(n,"a",(function(){return d}));var r=e(5),i=e.n(r),o=e(83),u=e(98),a=e(87);const d=new class FieldFormatService{constructor(){i()(this,"indexPatternIdsByJob",{}),i()(this,"formatsByJob",{})}async populateFormats(t){(await Promise.all(t.map((async t=>{const n=a.a.getJob(t);return{jobId:t,dataViewId:await Object(u.d)(n.datafeed_config.indices.join(","))}})))).forEach((({jobId:t,dataViewId:n})=>{null!==n&&(this.indexPatternIdsByJob[t]=n)}));const n=t.map((t=>Promise.all([this.getFormatsForJob(t)])));try{return(await Promise.all(n)).forEach(((n,e)=>{this.formatsByJob[t[e]]=n[0]})),this.formatsByJob}catch(t){return console.log("Error populating field formats:",t),{formats:{},error:t}}}getFieldFormat(t,n){if(this.formatsByJob.hasOwnProperty(t))return this.formatsByJob[t][n]}getFieldFormatFromIndexPattern(t,n,e){let r;if("cardinality"!==e){const e=t.fields.getByName(n);void 0!==e&&(r=t.getFormatterForField(e))}return r}getFormatsForJob(t){return new Promise(((n,e)=>{const r=a.a.getJob(t).analysis_config.detectors||[],i=[],d=this.indexPatternIdsByJob[t];void 0!==d?Object(u.c)(d).then((t=>{const e=t.fields;r.forEach((n=>{const r=Object(o.p)(n.function);if(void 0!==n.field_name&&"cardinality"!==r){const r=e.getByName(n.field_name);void 0!==r&&(i[n.detector_index]=t.getFormatterForField(r))}})),n(i)})).catch((t=>{e(t)})):n(i)}))}}},705:function(t,n,e){"use strict";e.r(n),e.d(n,"ANOMALY_SEVERITY",(function(){return r.b})),e.d(n,"ANOMALY_THRESHOLD",(function(){return r.c})),e.d(n,"SEVERITY_COLORS",(function(){return r.g})),e.d(n,"SEVERITY_COLOR_RAMP",(function(){return r.h})),e.d(n,"ANOMALY_RESULT_TYPE",(function(){return r.a})),e.d(n,"PARTITION_FIELDS",(function(){return r.e})),e.d(n,"JOB_ID",(function(){return r.d})),e.d(n,"PARTITION_FIELD_VALUE",(function(){return r.f})),e.d(n,"apmUserMlCapabilities",(function(){return i.b})),e.d(n,"userMlCapabilities",(function(){return i.f})),e.d(n,"adminMlCapabilities",(function(){return i.a})),e.d(n,"basicLicenseMlCapabilities",(function(){return i.c})),e.d(n,"getDefaultCapabilities",(function(){return i.d})),e.d(n,"getPluginPrivileges",(function(){return i.e})),e.d(n,"isCombinedJobWithStats",(function(){return o})),e.d(n,"isGeneralJobOverride",(function(){return u})),e.d(n,"ENTITY_FIELD_TYPE",(function(){return a.b})),e.d(n,"ENTITY_FIELD_OPERATIONS",(function(){return a.a})),e.d(n,"isCategorizationAnomaly",(function(){return a.m})),e.d(n,"getFormattedSeverityScore",(function(){return a.g})),e.d(n,"getSeverity",(function(){return a.i})),e.d(n,"getSeverityType",(function(){return a.k})),e.d(n,"getSeverityWithLow",(function(){return a.l})),e.d(n,"getSeverityColor",(function(){return a.j})),e.d(n,"getMultiBucketImpactLabel",(function(){return a.h})),e.d(n,"getEntityFieldName",(function(){return a.e})),e.d(n,"getEntityFieldValue",(function(){return a.f})),e.d(n,"getEntityFieldList",(function(){return a.d})),e.d(n,"showActualForFunction",(function(){return a.o})),e.d(n,"showTypicalForFunction",(function(){return a.p})),e.d(n,"isRuleSupported",(function(){return a.n})),e.d(n,"aggregationTypeTransform",(function(){return a.c})),e.d(n,"MLRequestFailure",(function(){return d.a})),e.d(n,"extractErrorMessage",(function(){return d.b})),e.d(n,"extractErrorProperties",(function(){return d.c})),e.d(n,"isBoomError",(function(){return d.d})),e.d(n,"isErrorString",(function(){return d.e})),e.d(n,"isEsErrorBody",(function(){return d.f})),e.d(n,"isMLResponseError",(function(){return d.g})),e.d(n,"maxLengthValidator",(function(){return c.b})),e.d(n,"patternValidator",(function(){return c.e})),e.d(n,"composeValidators",(function(){return c.a})),e.d(n,"requiredValidator",(function(){return c.f})),e.d(n,"memoryInputValidator",(function(){return c.c})),e.d(n,"timeIntervalInputValidator",(function(){return c.g})),e.d(n,"numberValidator",(function(){return c.d})),e.d(n,"formatHumanReadableDate",(function(){return s.b})),e.d(n,"formatHumanReadableDateTime",(function(){return s.c})),e.d(n,"formatHumanReadableDateTimeSeconds",(function(){return s.d})),e.d(n,"validateTimeRange",(function(){return s.f})),e.d(n,"createAbsoluteTimeRange",(function(){return s.a})),e.d(n,"timeFormatter",(function(){return s.e})),e.d(n,"getMetricChangeDescription",(function(){return f.a})),e.d(n,"getDataGridSchemasFromFieldTypes",(function(){return l.e})),e.d(n,"getDataGridSchemaFromESFieldType",(function(){return l.c})),e.d(n,"getDataGridSchemaFromKibanaFieldType",(function(){return l.d})),e.d(n,"getFieldsFromKibanaIndexPattern",(function(){return l.g})),e.d(n,"getCombinedRuntimeMappings",(function(){return l.b})),e.d(n,"multiColumnSortFactory",(function(){return l.j})),e.d(n,"getNestedOrEscapedVal",(function(){return l.h})),e.d(n,"showDataGridColumnChartErrorMessageToast",(function(){return l.k})),e.d(n,"useRenderCellValue",(function(){return l.m})),e.d(n,"getProcessedFields",(function(){return l.i})),e.d(n,"getFieldType",(function(){return l.f})),e.d(n,"useDataGrid",(function(){return l.l})),e.d(n,"DataGrid",(function(){return l.a})),e.d(n,"getAnalysisType",(function(){return m.h})),e.d(n,"getDependentVar",(function(){return m.k})),e.d(n,"getPredictionFieldName",(function(){return m.o})),e.d(n,"getDefaultTrainingFilterQuery",(function(){return m.j})),e.d(n,"isOutlierAnalysis",(function(){return m.r})),e.d(n,"refreshAnalyticsList$",(function(){return m.u})),e.d(n,"useRefreshAnalyticsList",(function(){return m.w})),e.d(n,"REFRESH_ANALYTICS_LIST_STATE",(function(){return m.e})),e.d(n,"OUTLIER_ANALYSIS_METHOD",(function(){return m.d})),e.d(n,"getValuesFromResponse",(function(){return m.q})),e.d(n,"loadEvalData",(function(){return m.t})),e.d(n,"loadDocsCount",(function(){return m.s})),e.d(n,"getPredictedFieldName",(function(){return m.n})),e.d(n,"INDEX_STATUS",(function(){return m.b})),e.d(n,"SEARCH_SIZE",(function(){return m.f})),e.d(n,"defaultSearchQuery",(function(){return m.g})),e.d(n,"ANALYSIS_CONFIG_TYPE",(function(){return m.a})),e.d(n,"getDefaultFieldsFromJobCaps",(function(){return m.i})),e.d(n,"sortExplorationResultsFields",(function(){return m.v})),e.d(n,"MAX_COLUMNS",(function(){return m.c})),e.d(n,"getIndexData",(function(){return m.l})),e.d(n,"getIndexFields",(function(){return m.m})),e.d(n,"getScatterplotMatrixLegendType",(function(){return m.p})),e.d(n,"useResultsViewConfig",(function(){return m.x}));var r=e(1),i=e(34);function o(t){return"string"==typeof t.job_id}function u(t){return void 0===t.job_id}var a=e(7),d=e(27),c=e(20),s=e(88),f=e(220),l=e(125),m=e(84)},98:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e.d(n,"h",(function(){return d})),e.d(n,"e",(function(){return c})),e.d(n,"d",(function(){return s})),e.d(n,"c",(function(){return f})),e.d(n,"b",(function(){return l})),e.d(n,"f",(function(){return m})),e.d(n,"i",(function(){return g})),e.d(n,"g",(function(){return b}));var r=e(2),i=e(26);let o=[],u=null;async function a(t){u=t}function d(){return Object(i.i)().find({type:"search",perPage:1e4}).then((t=>(o=t.savedObjects,o)))}async function c(){if(null===u)throw new Error("Data views are not initialized!");return(await u.getIdsWithTitle()).map((({title:t})=>t))}async function s(t){var n;if(null===u)throw new Error("Data views are not initialized!");const e=(await u.find(t)).find((({title:n})=>n===t));return e?null!==(n=e.id)&&void 0!==n?n:e.title:null}function f(t){if(null===u)throw new Error("Data views are not initialized!");return t?u.get(t):u.create({})}async function l(t){var n;const e={savedSearch:null,dataView:null};if(void 0===t)return e;const r=await async function(t){const n=Object(i.i)(),e=await n.get("search",t);return void 0===e.error?e:null}(t);if(null===r)return e;const o=null===(n=r.references.find((t=>"index-pattern"===t.type)))||void 0===n?void 0:n.id;return e.dataView=await f(o),e.savedSearch=r,e}function m(t){const n=t.attributes.kibanaSavedObjectMeta;return JSON.parse(n.searchSourceJSON)}function g(t,n=!1){return!!t.isTimeBased()||(n&&Object(i.l)().addWarning({title:r.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationTitle",{defaultMessage:"The data view {dataViewName} is not based on a time series",values:{dataViewName:t.title}}),text:r.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationDescription",{defaultMessage:"Anomaly detection only runs over time-based indices"})}),!1)}function b(t){return t.includes(":")}}}]);