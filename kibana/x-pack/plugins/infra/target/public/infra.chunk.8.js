/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[8],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2),i=a.n(n);const r=(()=>{const e=[];return class extends i.a.Component{componentDidMount(){this.setState((()=>({index:e.push("")-1})),(()=>{this.pushTitle(this.getTitle(this.props.title)),this.updateDocumentTitle()}))}componentDidUpdate(){this.pushTitle(this.getTitle(this.props.title)),this.updateDocumentTitle()}componentWillUnmount(){this.removeTitle(),this.updateDocumentTitle()}render(){return null}getTitle(t){return"function"==typeof t?t(e[this.state.index-1]):t}pushTitle(t){e[this.state.index]=t}removeTitle(){e.pop()}updateDocumentTitle(){const t=(e[e.length-1]||"")+" - Kibana";t!==document.title&&(document.title=t)}}})()},104:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(16),i=a(2),r=a.n(i),s=a(90);const l=()=>r.a.createElement(s.a,{"data-test-subj":"sourceLoadingPage",message:r.a.createElement(n.FormattedMessage,{id:"xpack.infra.sourceLoadingPage.loadingDataSourcesMessage",defaultMessage:"Loading data sources"})})},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(12),i=a(101),r=a(2),s=a.n(r),l=a(15);const o=({children:e,isLoading:t,loadingChildren:a,...n})=>s.a.createElement(u,n,e,t?s.a.createElement(c,null,a):null),c=({children:e})=>s.a.createElement(d,null,e||s.a.createElement(n.EuiLoadingSpinner,{size:"xl"})),u=l.euiStyled.div`
  position: relative;
`,d=l.euiStyled.div`
  align-items: center;
  background-color: ${e=>Object(i.transparentize)(.3,e.theme.eui.euiColorEmptyShade)};
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
  z-index: ${e=>e.theme.eui.euiZLevel1};
`},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);const i=e=>{const[t,a]=Object(n.useState)(e),i=Object(n.useCallback)((()=>a(!1)),[]),r=Object(n.useCallback)((()=>a(!0)),[]),s=Object(n.useCallback)((()=>a((e=>!e))),[]);return Object(n.useMemo)((()=>({hide:i,isVisible:t,show:r,toggle:s})),[i,t,r,s])}},152:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a(12),i=a(1),r=a(16),s=a(2),l=a.n(s),o=a(140),c=a(141),u=a(207);const d=({availableDatasets:e,datasetFilter:t,isDisabled:a,onChangeDatasetFilter:i})=>{const{isVisible:o,hide:u,show:d}=Object(c.a)(!1),f=Object(s.useCallback)((e=>{const t=e.filter((({checked:e})=>"on"===e)).map((({label:e})=>e));i(0===t.length?{type:"includeAll"}:{type:"includeSome",datasets:t})}),[i]),p=Object(s.useMemo)((()=>e.map((({dataset:e,warnings:a})=>({label:e,append:a.length>0?l.a.createElement(m,{warnings:a}):null,checked:"includeSome"===t.type&&t.datasets.includes(e)?"on":void 0})))),[e,t]),g=l.a.createElement(n.EuiFilterButton,{disabled:a,isSelected:o,onClick:d,iconType:"arrowDown"},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indexDatasetFilterIncludeAllButtonLabel",defaultMessage:"{includeType, select, includeAll {All datasets} includeSome {{includedDatasetCount, plural, one {# dataset} other {# datasets}}}}",values:{includeType:t.type,includedDatasetCount:"includeSome"===t.type?t.datasets.length:0}}));return l.a.createElement(n.EuiFilterGroup,null,l.a.createElement(n.EuiPopover,{button:g,closePopover:u,isOpen:o,panelPaddingSize:"none"},l.a.createElement(n.EuiSelectable,{onChange:f,options:p,searchable:!0},((e,t)=>l.a.createElement("div",null,l.a.createElement(n.EuiPopoverTitle,null,t),e)))))},m=({warnings:e})=>{const t=e.flatMap((e=>"categoryQualityWarning"===e.type?e.reasons.map((e=>l.a.createElement(u.a,{key:e.type,reason:e}))):[]));return l.a.createElement(n.EuiIconTip,{content:t,type:"alert",color:"warning"})},f=({index:e,isDisabled:t,onChangeDatasetFilter:a,onChangeIsSelected:i,previousQualityWarnings:o})=>{const c=Object(s.useCallback)((t=>{i(e.name,t.currentTarget.checked)}),[e.name,i]),u=Object(s.useCallback)((t=>a(e.name,t)),[e.name,a]),m=Object(s.useMemo)((()=>"valid"===e.validity?e.availableDatasets.map((e=>({dataset:e,warnings:o.filter((({dataset:t})=>t===e))}))):[]),[e,o]),f=Object(s.useMemo)((()=>o.filter((({dataset:e})=>""===e))),[o]),g=Object(s.useMemo)((()=>f.length>0||m.some((({warnings:e})=>e.length>0))),[f,m]),E="valid"===e.validity&&e.isSelected;return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.EuiCheckbox,{key:e.name,id:e.name,label:l.a.createElement(l.a.Fragment,null,e.name,"valid"===e.validity&&g?l.a.createElement(n.EuiIconTip,{content:l.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.analsysisSetup.indexQualityWarningTooltipMessage",defaultMessage:"While analyzing the log messages from these indices we've detected some problems which might indicate a reduced quality of the results. Consider excluding these indices or problematic datasets from the analysis."}),type:"alert",color:"warning"}):null),onChange:c,checked:E,disabled:t||"invalid"===e.validity}),l.a.createElement(l.a.Fragment,null,"invalid"===e.validity?l.a.createElement(n.EuiText,{size:"xs",color:"textSubduedColor"},p(e.errors)):"valid"===e.validity?l.a.createElement(d,{availableDatasets:m,datasetFilter:e.datasetFilter,isDisabled:!E||t,onChangeDatasetFilter:u}):null),l.a.createElement(n.EuiSpacer,{size:"l"}))},p=e=>e.map((e=>{switch(e.error){case"INDEX_NOT_FOUND":return l.a.createElement("p",{key:`${e.error}-${e.index}`},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionIndexNotFound",defaultMessage:"No indices match the pattern {index}",values:{index:l.a.createElement(n.EuiCode,null,e.index)}}));case"FIELD_NOT_FOUND":return l.a.createElement("p",{key:`${e.error}-${e.index}-${e.field}`},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionNoTimestampField",defaultMessage:"At least one index matching {index} lacks a required field {field}.",values:{index:l.a.createElement(n.EuiCode,null,e.index),field:l.a.createElement(n.EuiCode,null,e.field)}}));case"FIELD_NOT_VALID":return l.a.createElement("p",{key:`${e.error}-${e.index}-${e.field}`},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionTimestampNotValid",defaultMessage:"At least one index matching {index} has a field called {field} without the correct type.",values:{index:l.a.createElement(n.EuiCode,null,e.index),field:l.a.createElement(n.EuiCode,null,e.field)}}));default:return""}})),g=({disabled:e=!1,indices:t,isValidating:a,onChangeSelectedIndices:i,previousQualityWarnings:c=[],validationErrors:u=[]})=>{const d=Object(s.useCallback)(((e,a)=>{i(t.map((t=>t.name===e?{...t,isSelected:a}:t)))}),[t,i]),m=Object(s.useCallback)(((e,a)=>{i(t.map((t=>t.name===e?{...t,datasetFilter:a}:t)))}),[t,i]),p=u.length>0;return l.a.createElement(n.EuiFlexGroup,{direction:"column"},l.a.createElement(n.EuiFlexItem,null,l.a.createElement(n.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionTitle",defaultMessage:"Choose indices"}))),l.a.createElement(n.EuiText,{size:"s",color:"subdued"},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionDescription",defaultMessage:"By default, Machine Learning analyzes log messages in all log indices configured for the source. You can choose to only analyze a subset of the index names. Every selected index name must match at least one index with log entries. You can also choose to only include a certain subset of datasets. Note that the dataset filter applies to all selected indices."}))),l.a.createElement(n.EuiFlexItem,null,l.a.createElement(o.a,{isLoading:a},l.a.createElement(n.EuiFormRow,{fullWidth:!0,isInvalid:p,label:E,labelType:"legend"},l.a.createElement(l.a.Fragment,null,t.map((t=>l.a.createElement(f,{index:t,isDisabled:e,key:t.name,onChangeIsSelected:d,onChangeDatasetFilter:m,previousQualityWarnings:c}))))))))},E=i.i18n.translate("xpack.infra.analysisSetup.indicesSelectionLabel",{defaultMessage:"Indices"});var h=a(49),b=a.n(h),y=a(208);const v=i.i18n.translate("xpack.infra.analysisSetup.startTimeLabel",{defaultMessage:"Start time"}),M=i.i18n.translate("xpack.infra.analysisSetup.endTimeLabel",{defaultMessage:"End time"}),x=i.i18n.translate("xpack.infra.analysisSetup.startTimeDefaultDescription",{defaultMessage:"Start of log indices"}),k=i.i18n.translate("xpack.infra.analysisSetup.endTimeDefaultDescription",{defaultMessage:"Indefinitely"});function S(e){if(e)return e.valueOf()}const T=({disabled:e=!1,setStartTime:t,setEndTime:a,startTime:i,endTime:o,validationErrors:c=[]})=>{const[u]=Object(s.useState)((()=>b()())),d=!o||b()(o).isSame(u,"day"),m=Object(s.useMemo)((()=>i?b()(i):void 0),[i]),f=Object(s.useMemo)((()=>o?b()(o):void 0),[o]),p=Object(s.useMemo)((()=>C(c)),[c]),g=Object(s.useMemo)((()=>F(c)),[c]);return l.a.createElement(n.EuiFlexGroup,{direction:"column"},l.a.createElement(n.EuiFlexItem,null,l.a.createElement(n.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.timeRangeTitle",defaultMessage:"Choose a time range"}))),l.a.createElement(n.EuiText,{size:"s",color:"subdued"},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.timeRangeDescription",defaultMessage:"By default, Machine Learning analyzes log messages in your log indices no older than four weeks, and continues indefinitely. You can specify a different date to begin, to end, or both."}))),l.a.createElement(n.EuiFlexItem,null,l.a.createElement(n.EuiFormRow,{error:p,fullWidth:!0,isInvalid:p.length>0,label:v},l.a.createElement(n.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(n.EuiFormControlLayout,{clear:i&&!e?{onClick:()=>t(void 0)}:void 0,isDisabled:e},l.a.createElement(y.a,{disabled:e,showTimeSelect:!0,selected:m,onChange:e=>t(S(e)),placeholder:x,maxDate:u})))),l.a.createElement(n.EuiFormRow,{error:g,fullWidth:!0,isInvalid:g.length>0,label:M},l.a.createElement(n.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(n.EuiFormControlLayout,{clear:o&&!e?{onClick:()=>a(void 0)}:void 0,isDisabled:e},l.a.createElement(y.a,{disabled:e,showTimeSelect:!0,selected:f,onChange:e=>a(S(e)),placeholder:k,openToDate:u,minDate:m,minTime:d?u:b()().hour(0).minutes(0),maxTime:b()().hour(23).minutes(59)}))))))},C=e=>e.flatMap((e=>"INVALID_TIME_RANGE"===e.error?[i.i18n.translate("xpack.infra.analysisSetup.startTimeBeforeEndTimeErrorMessage",{defaultMessage:"The start time must be before the end time."})]:[])),F=e=>e.flatMap((e=>"INVALID_TIME_RANGE"===e.error?[i.i18n.translate("xpack.infra.analysisSetup.endTimeAfterStartTimeErrorMessage",{defaultMessage:"The end time must be after the start time."})]:[]));var j=a(0),O=a(85);const w=j.strict({error:j.literal("INVALID_TIME_RANGE")}),_=e=>({title:I,children:l.a.createElement(D,e)}),D=({setStartTime:e,setEndTime:t,startTime:a,endTime:i,isValidating:r,validatedIndices:o,setupStatus:c,setValidatedIndices:u,validationErrors:d=[],previousQualityWarnings:m=[]})=>{const f=Object(s.useMemo)((()=>!L.includes(c.type)),[c]),[p,E,h]=Object(s.useMemo)((()=>P(d)),[d]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.EuiForm,null,l.a.createElement(T,{disabled:f,setStartTime:e,setEndTime:t,startTime:a,endTime:i,validationErrors:E}),l.a.createElement(n.EuiSpacer,{size:"xl"}),l.a.createElement(g,{disabled:f,indices:o,isValidating:r,onChangeSelectedIndices:u,previousQualityWarnings:m,validationErrors:p}),l.a.createElement(N,{errors:h})))},L=["required","failed","skipped"],R=i.i18n.translate("xpack.infra.analysisSetup.steps.initialConfigurationStep.errorCalloutTitle",{defaultMessage:"Your index configuration is not valid"}),I=i.i18n.translate("xpack.infra.analysisSetup.configurationStepTitle",{defaultMessage:"Configuration"}),N=({errors:e})=>0===e.length?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(n.EuiCallOut,{color:"danger",iconType:"alert",title:R},l.a.createElement("ul",null,e.map(((e,t)=>l.a.createElement("li",{key:t},A(e)))))),l.a.createElement(n.EuiSpacer,null)),A=e=>{switch(e.error){case"NETWORK_ERROR":return l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionNetworkError",defaultMessage:"We couldn't load your index configuration"});case"TOO_FEW_SELECTED_INDICES":return l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.indicesSelectionTooFewSelectedIndicesDescription",defaultMessage:"Select at least one index name."});default:return""}},P=e=>e.reduce((([e,t,a],n)=>O.v.is(n)?[[...e,n],t,a]:w.is(n)?[e,[...t,n],a]:[e,t,[...a,n]]),[[],[],[]])},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(12),i=a(1),r=a(16),s=a(2),l=a.n(s);const o=({isDisabled:e,onClick:t})=>l.a.createElement(n.EuiButton,{isDisabled:e,fill:!0,onClick:t},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.createMlJobButton",defaultMessage:"Create ML job"})),c=({isDisabled:e,onClick:t})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.deleteAnalysisResultsWarning",defaultMessage:"This removes previously detected anomalies.",tagName:"p"}),l.a.createElement(n.EuiButton,{isDisabled:e,fill:!0,onClick:t},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.recreateMlJobButton",defaultMessage:"Recreate ML jobs"}))),u=e=>({title:f,children:l.a.createElement(d,e),status:"pending"===e.setupStatus.type?"incomplete":"failed"===e.setupStatus.type?"danger":"succeeded"===e.setupStatus.type?"complete":void 0}),d=({cleanUpAndSetUp:e,errorMessages:t,isConfigurationValid:a,setUp:i,setupStatus:s,viewResults:u})=>l.a.createElement(n.EuiText,{size:"s"},"pending"===s.type?l.a.createElement(n.EuiFlexGroup,{alignItems:"center"},l.a.createElement(n.EuiFlexItem,{grow:!1},l.a.createElement(n.EuiLoadingSpinner,{size:"xl"})),l.a.createElement(n.EuiFlexItem,{grow:!1},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.steps.setupProcess.loadingText",defaultMessage:"Creating ML job..."}))):"failed"===s.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.steps.setupProcess.failureText",defaultMessage:"Something went wrong creating the necessary ML jobs. Please ensure all selected log indices exist."}),l.a.createElement(n.EuiSpacer,null),s.reasons.map(((e,t)=>l.a.createElement(n.EuiCallOut,{key:t,color:"danger",iconType:"alert",title:m},l.a.createElement(n.EuiCode,{transparentBackground:!0},e)))),l.a.createElement(n.EuiSpacer,null),l.a.createElement(n.EuiButton,{fill:!0,onClick:e},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.steps.setupProcess.tryAgainButton",defaultMessage:"Try again"}))):"succeeded"===s.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.steps.setupProcess.successText",defaultMessage:"The ML jobs have been set up successfully"}),l.a.createElement(n.EuiSpacer,null),l.a.createElement(n.EuiButton,{fill:!0,onClick:u},l.a.createElement(r.FormattedMessage,{id:"xpack.infra.analysisSetup.steps.setupProcess.viewResultsButton",defaultMessage:"View results"}))):"required"===s.type?l.a.createElement(o,{isDisabled:!a,onClick:i}):l.a.createElement(c,{isDisabled:!a,onClick:e})),m=i.i18n.translate("xpack.infra.analysisSetup.steps.setupProcess.errorCalloutTitle",{defaultMessage:"An error occurred"}),f=i.i18n.translate("xpack.infra.analysisSetup.actionStepTitle",{defaultMessage:"Create ML job"})},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(12),i=a(2),r=a.n(i),s=a(192);const l=({children:e,hasSetupCapabilities:t,onRecreateMlJob:a,title:i})=>r.a.createElement(n.EuiCallOut,{color:"warning",iconType:"alert",title:i},e,r.a.createElement(s.b,{color:"warning",hasSetupCapabilities:t,onClick:a}))},161:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s}));var n=a(1);const i=n.i18n.translate("xpack.infra.logs.analysis.missingMlPrivilegesTitle",{defaultMessage:"Additional Machine Learning privileges required"}),r=n.i18n.translate("xpack.infra.logs.analysis.missingMlResultsPrivilegesDescription",{defaultMessage:"This feature makes use of Machine Learning jobs, which require at least the read permission for the Machine Learning app in order to access their status and results."}),s=n.i18n.translate("xpack.infra.logs.analysis.missingMlSetupPrivilegesDescription",{defaultMessage:"This feature makes use of Machine Learning jobs, which require all permissions for the Machine Learning app in order to be set up."})},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(12),i=a(2),r=a.n(i),s=a(53),l=a(69);const o=({anomalyScore:e})=>{const t=Object(i.useMemo)((()=>c(e)),[e]);return r.a.createElement(n.EuiHealth,{color:t},Object(s.getFormattedSeverityScore)(e))},c=e=>{const t=Object(l.m)(e);return null!=t&&t in l.a?l.a[t]:"subdued"}},171:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(215),i=a.n(n),r=a(13);const s=()=>{const e=Object(r.b)(),t=i()(e.services.spaces.getActiveSpace);return t.loading?{isLoading:!0,error:void 0,space:void 0}:t.error?{isLoading:!1,error:t.error,space:void 0}:{isLoading:!1,error:void 0,space:t.value}}},172:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=a(2),r=n.__importDefault(a(263));t.default=function(e,t){void 0===t&&(t=200);var a=i.useState(e),n=a[0],s=a[1],l=i.useRef(),o=i.useRef(null),c=i.useRef(0);return i.useEffect((function(){if(l.current)o.current=e,c.current=!0;else{s(e);var a=function(){c.current?(c.current=!1,s(o.current),l.current=setTimeout(a,t)):l.current=void 0};l.current=setTimeout(a,t)}}),[e]),r.default((function(){l.current&&clearTimeout(l.current)})),n}},173:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a(28);const i="infra-container-element",r=(e,t)=>{e.classList.add(n.APP_WRAPPER_CLASS),t&&e.setAttribute("data-test-subj",t)}},185:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return E})),a.d(t,"a",(function(){return y})),a(152),a(153);var n=a(12),i=a(2),r=a.n(i),s=a(15),l=a(161),o=a(29),c=a.n(o),u=a(16),d=a(30),m=a(13);const f=e=>{var t,a,i;const{services:{application:{capabilities:s}}}=Object(m.b)(),l=null!==(t=null==s||null===(a=s.management)||void 0===a||null===(i=a.security)||void 0===i?void 0:i.users)&&void 0!==t&&t,o=Object(d.useLinkProps)({app:"management",pathname:"/security/users"});return l?r.a.createElement(n.EuiButton,c()({color:"primary",fill:!0},o,e),r.a.createElement(u.FormattedMessage,{id:"xpack.infra.logs.analysis.userManagementButtonLabel",defaultMessage:"Manage users"})):null},p=()=>r.a.createElement(g,{title:r.a.createElement("h2",null,l.a),body:r.a.createElement("p",null,l.b),actions:r.a.createElement(f,null)}),g=Object(s.euiStyled)(n.EuiEmptyPrompt)`
  align-self: center;
`,E=()=>r.a.createElement(h,{title:r.a.createElement("h2",null,l.a),body:r.a.createElement("p",null,l.c),actions:r.a.createElement(f,null)}),h=Object(s.euiStyled)(n.EuiEmptyPrompt)`
  align-self: center;
`;var b=a(1);Object(s.euiStyled)(n.EuiEmptyPrompt)`
  align-self: center;
`;const y=({retry:e})=>r.a.createElement(v,{title:r.a.createElement("h2",null,r.a.createElement(u.FormattedMessage,{id:"xpack.infra.logs.analysis.setupStatusUnknownTitle",defaultMessage:"We couldn't determine the status of your ML jobs."})),actions:r.a.createElement(n.EuiButton,{onClick:()=>e(),color:"primary",fill:!0},b.i18n.translate("xpack.infra.logs.analysis.setupStatusTryAgainButton",{defaultMessage:"Try again"}))}),v=Object(s.euiStyled)(n.EuiEmptyPrompt)`
  align-self: center;
`},190:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return y}));var n=a(29),i=a.n(n),r=a(2),s=a.n(r),l=a(1),o=a(12),c=a(16),u=a(9),d=a(0),m=a(62),f=a(68),p=a(17),g=a(90),E=a(127);const h=l.i18n.translate("xpack.infra.ml.splash.loadingMessage",{defaultMessage:"Checking license..."}),b=e=>s.a.createElement(E.a,i()({},e,{isEmptyState:!0}),s.a.createElement(y,null)),y=()=>{const{services:e}=Object(u.useKibana)(),{loadState:t,isTrialAvailable:a,checkTrialAvailability:n}=function(){const{services:e}=Object(u.useKibana)(),[t,a]=Object(r.useState)(!1),[n,i]=Object(f.c)({createPromise:async()=>{const t=await e.http.get(`${m.API_BASE_PATH}/start_trial`);return Object(p.b)(d.boolean)(t)},onResolve:e=>{a(e)},onReject:t=>{e.notifications.toasts.addDanger(l.i18n.translate("xpack.infra.trialStatus.trialStatusNetworkErrorMessage",{defaultMessage:"We could not determine if the trial license is available"}))}},[e]);return{loadState:n.state,isTrialAvailable:t,checkTrialAvailability:i}}();if(Object(r.useEffect)((()=>{n()}),[n]),"pending"===t)return s.a.createElement(g.b,{message:h});let i,E,b;return a&&"resolved"===t?(i=s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.startTrialTitle",defaultMessage:"To access anomaly detection, start a free trial"}),E=s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.startTrialDescription",defaultMessage:"Our free trial includes machine learning features, which enable you to detect anomalies in your logs."}),b=s.a.createElement(o.EuiButton,{fullWidth:!1,fill:!0,href:e.http.basePath.prepend("/app/management/stack/license_management")},s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.startTrialCta",defaultMessage:"Start trial"}))):(i=s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.updateSubscriptionTitle",defaultMessage:"To access anomaly detection, upgrade to a Platinum Subscription"}),E=s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.updateSubscriptionDescription",defaultMessage:"You must have a Platinum Subscription to use machine learning features."}),b=s.a.createElement(o.EuiButton,{fullWidth:!1,fill:!0,href:"https://www.elastic.co/subscriptions"},s.a.createElement(c.FormattedMessage,{id:"xpack.infra.ml.splash.updateSubscriptionCta",defaultMessage:"Upgrade subscription"}))),s.a.createElement(o.EuiEmptyPrompt,{iconType:"visLine",title:s.a.createElement("h2",null,i),body:s.a.createElement(o.EuiText,null,s.a.createElement("p",null,E)),actions:b})}},192:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(29),i=a.n(n),r=a(12),s=a(16),l=a(2),o=a.n(l),c=a(161);const u=e=>o.a.createElement(r.EuiToolTip,i()({},e,{content:c.c,title:c.a})),d=({hasSetupCapabilities:e=!0,children:t,...a})=>{const n=o.a.createElement(r.EuiButton,i()({isDisabled:!e},a),null!=t?t:o.a.createElement(s.FormattedMessage,{id:"xpack.infra.logs.analysis.createJobButtonLabel",defaultMessage:"Create ML jobs"}));return e?n:o.a.createElement(u,{position:"bottom",delay:"regular"},n)},m=({children:e,...t})=>o.a.createElement(d,t,null!=e?e:o.a.createElement(s.FormattedMessage,{id:"xpack.infra.logs.analysis.recreateJobButtonLabel",defaultMessage:"Recreate ML job"}))},193:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(233);case"v8light":return a(235)}},194:function(e,t,a){"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),r=[];function s(e){for(var t=-1,a=0;a<r.length;a++)if(r[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],i=0;i<e.length;i++){var l=e[i],o=t.base?l[0]+t.base:l[0],c=a[o]||0,u="".concat(o," ").concat(c);a[o]=c+1;var d=s(u),m={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(r[d].references++,r[d].updater(m)):r.push({identifier:u,updater:g(m,t),references:1}),n.push(u)}return n}function o(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,a,n){var i=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function m(e,t,a){var n=a.css,i=a.media,r=a.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,p=0;function g(e,t){var a,n,i;if(t.singleton){var r=p++;a=f||(f=o(t)),n=d.bind(null,a,r,!1),i=d.bind(null,a,r,!0)}else a=o(t),n=m.bind(null,a,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var i=s(a[n]);r[i].references--}for(var o=l(e,t),c=0;c<a.length;c++){var u=s(a[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}a=o}}}},195:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,i,r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var l=(a=s,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),o=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([l]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var l=0;l<e.length;l++){var o=[].concat(e[l]);n&&i[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},196:function(e,t,a){"use strict";a.d(t,"a",(function(){return NotFoundPage}));var n=a(16),i=a(2),r=a.n(i);class NotFoundPage extends r.a.PureComponent{render(){return r.a.createElement("div",{"data-test-subj":"infraNotFoundPage"},r.a.createElement(n.FormattedMessage,{id:"xpack.infra.notFoundPage.noContentFoundErrorTitle",defaultMessage:"No content found"}))}}},203:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2),i=a(9);const r=({feedbackLink:e,appName:t})=>{const a=Object(i.useKibana)().services.chrome;return Object(n.useEffect)((()=>null==a?void 0:a.setHelpExtension({appName:t,links:[{linkType:"discuss",href:e}]})),[e,t,a]),null}},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(2),i=a(1),r=a(9);const s=(e=!1)=>{const t=Object(r.useKibana)().services.chrome;return Object(n.useEffect)((()=>{null==t||t.setBadge(e?{text:i.i18n.translate("xpack.infra.header.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:i.i18n.translate("xpack.infra.header.badge.readOnly.tooltip",{defaultMessage:"Unable to change source configuration"}),iconType:"glasses"}:void 0)}),[t,e]),null}},205:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(29),i=a.n(n),r=a(2),s=a.n(r),l=a(51);const o=({from:e,to:t,...a})=>s.a.createElement(l.Route,{path:e,render:({location:n})=>n?s.a.createElement(l.Redirect,i()({},a,{from:e,to:"string"==typeof t?{...n,pathname:t}:{...n,...t}})):null})},206:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(2),i=a(30),r=a(83),s=a(13);const l=(e,t,a)=>{const{services:{chrome:l}}=Object(s.b)(),o=Object(i.useLinkProps)({app:"observability-overview"}),c=Object(i.useLinkProps)({app:e});Object(n.useEffect)((()=>{var e;null==l||null===(e=l.setBreadcrumbs)||void 0===e||e.call(l,[{...o,text:r.g},{...c,text:t},...a])}),[c,t,l,a,o])}},207:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return g}));var n=a(12),i=a(1),r=a(16),s=a(23),l=a(2),o=a.n(l),c=a(15),u=a(69),d=a(160);const m=({hasSetupCapabilities:e,onRecreateMlJob:t,qualityWarnings:a})=>{const[i]=Object(l.useState)(Object(n.htmlIdGenerator)()()),c=Object(s.groupBy)(a,"jobId");return o.a.createElement(o.a.Fragment,null,Object.entries(c).map((([a,s])=>o.a.createElement(d.a,{hasSetupCapabilities:e,key:`quality-warnings-callout-${a}`,onRecreateMlJob:t,title:p},o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.categoryQualityWarningCalloutMessage",defaultMessage:"While analyzing the log messages we've detected some problems which might indicate a reduced quality of the categorization results. Consider excluding the respective datasets from the analysis.",tagName:"p"}),o.a.createElement(n.EuiAccordion,{id:i,buttonContent:o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.categoryQualityWarningDetailsAccordionButtonLabel",defaultMessage:"Details"}),paddingSize:"m"},o.a.createElement(n.EuiDescriptionList,null,s.flatMap((e=>o.a.createElement(l.Fragment,{key:`item-${Object(u.j)(e.dataset)}`},o.a.createElement(n.EuiDescriptionListTitle,{"data-test-subj":`title-${e.dataset}`},Object(u.j)(e.dataset)),e.reasons.map((t=>o.a.createElement(f,{key:`description-${t.type}-${e.dataset}`,"data-test-subj":`description-${t.type}-${e.dataset}`},o.a.createElement(g,{reason:t}))))))))),o.a.createElement(n.EuiSpacer,{size:"l"})))))},f=Object(c.euiStyled)(n.EuiDescriptionListDescription)`
  display: list-item;
  list-style-type: disc;
  margin-left: ${e=>e.theme.eui.paddingSizes.m};
`,p=i.i18n.translate("xpack.infra.logs.logEntryCategories.categoryQUalityWarningCalloutTitle",{defaultMessage:"Quality warning"}),g=({reason:e})=>{switch(e.type){case"singleCategory":return o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.singleCategoryWarningReasonDescription",defaultMessage:"The analysis couldn't extract more than a single category from the log messages."});case"manyRareCategories":return o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.manyRareCategoriesWarningReasonDescription",defaultMessage:"{rareCategoriesRatio, number, percent} of the categories only rarely have messages assigned to them.",values:{rareCategoriesRatio:e.rareCategoriesRatio}});case"manyCategories":return o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.manyCategoriesWarningReasonDescription",defaultMessage:"The ratio of categories per analyzed document is very high with {categoriesDocumentRatio, number }.",values:{categoriesDocumentRatio:e.categoriesDocumentRatio.toFixed(2)}});case"noFrequentCategories":return o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.noFrequentCategoryWarningReasonDescription",defaultMessage:"None of the extracted categories frequently have messages assigned to them."});case"manyDeadCategories":return o.a.createElement(r.FormattedMessage,{id:"xpack.infra.logs.logEntryCategories.manyDeadCategoriesWarningReasonDescription",defaultMessage:"{deadCategoriesRatio, number, percent} of the categories won't have new messages assigned to them because they are overshadowed by less specific categories.",values:{deadCategoriesRatio:e.deadCategoriesRatio}})}}},208:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(29),i=a.n(n),r=a(12),s=a(2),l=a.n(s),o=a(15);const c=Object(o.euiStyled)((({className:e,inputClassName:t,...a})=>l.a.createElement(r.EuiDatePicker,i()({},a,{className:t,popperClassName:e}))))`
  z-index: 3 !important;
`},209:function(e,t,a){"use strict";var n=a(232);a.d(t,"a",(function(){return n.LogStream}))},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=a(2),r=n.__importDefault(a(256));t.default=function(e,t){void 0===t&&(t=[]);var a=r.default(e,t,{loading:!0}),n=a[0],s=a[1];return i.useEffect((function(){s()}),[s]),n}},233:function(e,t,a){var n=a(194),i=a(234);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},234:function(e,t,a){(t=a(195)(!1)).push([e.i,"",""]),e.exports=t},235:function(e,t,a){var n=a(194),i=a(236);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},236:function(e,t,a){(t=a(195)(!1)).push([e.i,"",""]),e.exports=t},256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=a(2),r=n.__importDefault(a(138));t.default=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a={loading:!1});var s=i.useRef(0),l=r.default(),o=i.useState(a),c=o[0],u=o[1],d=i.useCallback((function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=++s.current;return u((function(e){return n.__assign(n.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return l()&&i===s.current&&u({value:e,loading:!1}),e}),(function(e){return l()&&i===s.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}},263:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=a(2),r=n.__importDefault(a(136));t.default=function(e){var t=i.useRef(e);t.current=e,r.default((function(){return function(){return t.current()}}))}},83:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"i",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(1);const i=n.i18n.translate("xpack.infra.header.observabilityTitle",{defaultMessage:"Observability"}),r=n.i18n.translate("xpack.infra.header.logsTitle",{defaultMessage:"Logs"}),s=n.i18n.translate("xpack.infra.logs.index.streamTabTitle",{defaultMessage:"Stream"}),l=n.i18n.translate("xpack.infra.logs.index.anomaliesTabTitle",{defaultMessage:"Anomalies"}),o=n.i18n.translate("xpack.infra.logs.index.logCategoriesBetaBadgeTitle",{defaultMessage:"Categories"}),c=n.i18n.translate("xpack.infra.logs.index.settingsTabTitle",{defaultMessage:"Settings"}),u=n.i18n.translate("xpack.infra.header.infrastructureTitle",{defaultMessage:"Metrics"}),d=n.i18n.translate("xpack.infra.metrics.inventoryPageTitle",{defaultMessage:"Inventory"}),m=n.i18n.translate("xpack.infra.metrics.metricsExplorerTitle",{defaultMessage:"Metrics Explorer"})},97:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return g})),a.d(t,"h",(function(){return E}));const n=e=>["started","starting","finished","stopped","failed"].includes(e);let i,r;!function(e){e.CRITICAL="critical",e.MAJOR="major",e.MINOR="minor",e.WARNING="warning",e.LOW="low",e.UNKNOWN="unknown"}(i||(i={})),function(e){e[e.CRITICAL=75]="CRITICAL",e[e.MAJOR=50]="MAJOR",e[e.MINOR=25]="MINOR",e[e.WARNING=3]="WARNING",e[e.LOW=0]="LOW"}(r||(r={}));var s=a(0);const l=9e5,o="event.dataset",c=(e,t)=>`kibana-metrics-ui-${e}-${t}-`,u=(e,t,a)=>`${c(e,t)}${a}`,d=(e,t,a)=>`datafeed-${u(e,t,a)}`,m=s.union([s.strict({type:s.literal("includeAll")}),s.strict({type:s.literal("includeSome"),datasets:s.array(s.string)})]),f=s.partial({indexPattern:s.string,timestampField:s.string,bucketSpan:s.number,datasetFilter:m}),p=s.partial({job_revision:s.number,metrics_source_config:f}),g=(s.keyof({hosts_memory_usage:null,hosts_network_in:null,hosts_network_out:null}),["hosts_memory_usage","hosts_network_in","hosts_network_out"]),E=(s.keyof({k8s_memory_usage:null,k8s_network_in:null,k8s_network_out:null}),["k8s_memory_usage","k8s_network_in","k8s_network_out"])}}]);