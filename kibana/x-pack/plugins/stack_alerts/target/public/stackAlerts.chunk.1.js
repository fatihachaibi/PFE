/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.stackAlerts_bundle_jsonpfunction=window.stackAlerts_bundle_jsonpfunction||[]).push([[1],Array(27).concat([function(e,t,n){e.exports=n(9)(2567)},function(e,t,n){"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var d=a(c),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:c,updater:b(f,t),references:1}),r.push(c)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,g=0;function b(e,t){var n,r,i;if(t.singleton){var o=g++;n=p||(p=u(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=u(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(e,t),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){e.exports=n(9)(9)},function(e,t,n){e.exports=n(9)(3)},,function(e,t,n){e.exports=n(9)(23)},,function(e,t,n){e.exports=n(9)(45)},function(e,t,n){"use strict";function r(e,t,n,i){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,r.prototype),o.expected=t,o.found=n,o.location=i,o.name="SyntaxError",o}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source+":"+o.line+":"+o.column;if(r){var s=this.location.end,u=i("",o.line.toString().length),l=r[o.line-1],c=o.line===s.line?s.column:l.length+1;t+="\n --\x3e "+a+"\n"+u+" |\n"+o.line+" | "+l+"\n"+u+" | "+i("",o.column-1)+i("",c-o.column,"^")}else t+="\n at "+a}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(a);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},o=(t=void 0!==t?t:{}).grammarSource,a={start:de,Literal:we},s=de,u='"',l="\\",c="@kuery-cursor@",d=/^[\\"]/,f=/^[^"]/,p=/^[\\():<>"*{}]/,g=/^[0-9a-f]/i,b=/^[ \t\r\n\xA0]/,h=oe("(",!1),x=oe(")",!1),v=oe(":",!1),m=oe("{",!1),y=oe("}",!1),j=se("fieldName"),k=se("value"),F=se("OR"),w=oe("or",!0),O=se("AND"),_=oe("and",!0),I=se("NOT"),S=oe("not",!0),C=se("literal"),E=oe('"',!1),A=oe("\\",!1),P=ae(["\\",'"'],!1,!1),T=ae(['"'],!0,!1),B={type:"any"},N=oe("*",!1),M=oe("\\t",!1),L=oe("\\r",!1),R=oe("\\n",!1),G=ae(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),D=oe("u",!1),q=ae([["0","9"],["a","f"]],!1,!0),z=oe("<=",!1),Q=oe(">=",!1),W=oe("<",!1),U=oe(">",!1),$=se("whitespace"),H=ae([" ","\t","\r","\n","Â "],!1,!1),V=oe("@kuery-cursor@",!1),K=function(e,t){return t},Z=function(e,t){return t},J=function(){return Me},Y=function(t,n,r){const{start:i,end:o}=le(ee,X);return{type:"cursor",start:i.offset,end:o.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(ee,X).replace(n,"")}},X=0,ee=0,te=[{line:1,column:1}],ne=0,re=[],ie=0;if("startRule"in t){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=a[t.startRule]}function oe(e,t){return{type:"literal",text:e,ignoreCase:t}}function ae(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function se(e){return{type:"other",description:e}}function ue(t){var n,r=te[t];if(r)return r;for(n=t-1;!te[n];)n--;for(r={line:(r=te[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return te[t]=r,r}function le(e,t){var n=ue(e),r=ue(t);return{source:o,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function ce(e){X<ne||(X>ne&&(ne=X,re=[]),re.push(e))}function de(){var e,t,n,r,o,a;for(e=X,t=[],n=Be();n!==i;)t.push(n),n=Be();return(n=fe())===i&&(n=null),(r=Ce())!==i?(ee=e,o=n,e="cursor"===(a=r).type?{...a,suggestionTypes:["conjunction"]}:null!==o?o:Ge.function.buildNode("is","*","*")):(X=e,e=i),e}function fe(){var e,t,n,r,o;if(e=X,(t=pe())!==i){if(n=[],r=X,je()!==i&&(o=pe())!==i?(ee=r,r=K(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,je()!==i&&(o=pe())!==i?(ee=r,r=K(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Me&&n.find((e=>"cursor"===e.type))||De("or",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=pe()),e}function pe(){var e,t,n,r,o;if(e=X,(t=ge())!==i){if(n=[],r=X,ke()!==i&&(o=ge())!==i?(ee=r,r=K(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,ke()!==i&&(o=ge())!==i?(ee=r,r=K(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t];return Me&&n.find((e=>"cursor"===e.type))||De("and",n)}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ge()),e}function ge(){var e,t,n;return e=X,Fe()!==i&&(t=be())!==i?(ee=e,e="cursor"===(n=t).type?n:De("not",[n])):(X=e,e=i),e===i&&(e=be()),e}function be(){var t,n,r,o,a,s,u,l;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&ce(h)),n!==i){for(r=[],o=Be();o!==i;)r.push(o),o=Be();(o=fe())!==i&&(a=Ce())!==i?(41===e.charCodeAt(X)?(s=")",X++):(s=i,0===ie&&ce(x)),s!==i?(ee=t,u=o,t="cursor"===(l=a).type?{...l,suggestionTypes:["conjunction"]}:u):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=function(){var t,n,r,o,a,s,u,l,c,d;if(t=X,(n=he())!==i){for(r=[],o=Be();o!==i;)r.push(o),o=Be();if(58===e.charCodeAt(X)?(o=":",X++):(o=i,0===ie&&ce(v)),o!==i){for(a=[],s=Be();s!==i;)a.push(s),s=Be();if(123===e.charCodeAt(X)?(s="{",X++):(s=i,0===ie&&ce(m)),s!==i){for(u=[],l=Be();l!==i;)u.push(l),l=Be();(l=fe())!==i&&(c=Ce())!==i?(125===e.charCodeAt(X)?(d="}",X++):(d=i,0===ie&&ce(y)),d!==i?(ee=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:De("nested",[e,t])}(n,l,c)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i}else X=t,t=i}else X=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,n,r,o,a,s,u,l,c;if(t=X,(n=he())!==i){for(r=[],o=Be();o!==i;)r.push(o),o=Be();if(o=function(){var t,n;return t=X,"<="===e.substr(X,2)?(n="<=",X+=2):(n=i,0===ie&&ce(z)),n!==i&&(ee=t,n="lte"),(t=n)===i&&(t=X,">="===e.substr(X,2)?(n=">=",X+=2):(n=i,0===ie&&ce(Q)),n!==i&&(ee=t,n="gte"),(t=n)===i&&(t=X,60===e.charCodeAt(X)?(n="<",X++):(n=i,0===ie&&ce(W)),n!==i&&(ee=t,n="lt"),(t=n)===i&&(t=X,62===e.charCodeAt(X)?(n=">",X++):(n=i,0===ie&&ce(U)),n!==i&&(ee=t,n="gt"),t=n))),t}(),o!==i){for(a=[],s=Be();s!==i;)a.push(s),s=Be();(s=we())!==i?(ee=t,u=n,l=o,t="cursor"===(c=s).type?{...c,suggestionTypes:["conjunction"]}:De("range",[u,l,c])):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var t,n,r,o,a,s,u,l;if(t=X,(n=he())!==i){for(r=[],o=Be();o!==i;)r.push(o),o=Be();if(58===e.charCodeAt(X)?(o=":",X++):(o=i,0===ie&&ce(v)),o!==i){for(a=[],s=Be();s!==i;)a.push(s),s=Be();(s=xe())!==i?(ee=t,u=n,t="cursor"===(l=s).type?{...l,fieldName:u.value,suggestionTypes:["value","conjunction"]}:l(u)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=X,(t=ye())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(qe(null))}(t)),t}())),t}()),t}()),t}function he(){var e;return ie++,e=we(),ie--,e===i&&0===ie&&ce(j),e}function xe(){var t,n,r,o,a,s,u,l;if(t=X,40===e.charCodeAt(X)?(n="(",X++):(n=i,0===ie&&ce(h)),n!==i){for(r=[],o=Be();o!==i;)r.push(o),o=Be();o=function(){var e,t,n,r,o;if(e=X,(t=ve())!==i){if(n=[],r=X,je()!==i&&(o=ve())!==i?(ee=r,r=Z(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,je()!==i&&(o=ve())!==i?(ee=r,r=Z(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=Me&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>De("or",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=ve()),e}(),o!==i&&(a=Ce())!==i?(41===e.charCodeAt(X)?(s=")",X++):(s=i,0===ie&&ce(x)),s!==i?(ee=t,u=o,t="cursor"===(l=a).type?{...l,suggestionTypes:["conjunction"]}:u):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t===i&&(t=ye()),t}function ve(){var e,t,n,r,o;if(e=X,(t=me())!==i){if(n=[],r=X,ke()!==i&&(o=me())!==i?(ee=r,r=Z(0,o)):(X=r,r=i),r!==i)for(;r!==i;)n.push(r),r=X,ke()!==i&&(o=me())!==i?(ee=r,r=Z(0,o)):(X=r,r=i);else n=i;n!==i?(ee=e,e=function(e,t){const n=[e,...t],r=Me&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>De("and",n.map((t=>t(e))))}(t,n)):(X=e,e=i)}else X=e,e=i;return e===i&&(e=me()),e}function me(){var e,t,n;return e=X,Fe()!==i&&(t=xe())!==i?(ee=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>De("not",[n(e)])):(X=e,e=i),e===i&&(e=xe()),e}function ye(){var e,t;return ie++,e=X,(t=Oe())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=qe(!0);return n=>De("is",[n,e,t])}(t)),(e=t)===i&&(e=X,(t=Ie())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!Re&&"wildcard"===e.type&&Ge.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new r("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:le(ee,X))}();const t=qe(!1);return n=>De("is",[n,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&ce(k)),e}function je(){var t,n,r,o,a;if(ie++,t=X,n=[],(r=Be())!==i)for(;r!==i;)n.push(r),r=Be();else n=i;if(n!==i)if("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&ce(w)),r!==i){if(o=[],(a=Be())!==i)for(;a!==i;)o.push(a),a=Be();else o=i;o!==i?t=n=[n,r,o]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(F)),t}function ke(){var t,n,r,o,a;if(ie++,t=X,n=[],(r=Be())!==i)for(;r!==i;)n.push(r),r=Be();else n=i;if(n!==i)if("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&ce(_)),r!==i){if(o=[],(a=Be())!==i)for(;a!==i;)o.push(a),a=Be();else o=i;o!==i?t=n=[n,r,o]:(X=t,t=i)}else X=t,t=i;else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(O)),t}function Fe(){var t,n,r,o;if(ie++,t=X,"not"===e.substr(X,3).toLowerCase()?(n=e.substr(X,3),X+=3):(n=i,0===ie&&ce(S)),n!==i){if(r=[],(o=Be())!==i)for(;o!==i;)r.push(o),o=Be();else r=i;r!==i?t=n=[n,r]:(X=t,t=i)}else X=t,t=i;return ie--,t===i&&(n=i,0===ie&&ce(I)),t}function we(){var e;return ie++,(e=Oe())===i&&(e=Ie()),ie--,e===i&&0===ie&&ce(C),e}function Oe(){var t,n,r,o,a,s,l;if(t=X,ee=X,(n=(n=J())?void 0:i)!==i)if(34===e.charCodeAt(X)?(r=u,X++):(r=i,0===ie&&ce(E)),r!==i){for(o=[],a=_e();a!==i;)o.push(a),a=_e();if((a=Ne())!==i){for(s=[],l=_e();l!==i;)s.push(l),l=_e();34===e.charCodeAt(X)?(l=u,X++):(l=i,0===ie&&ce(E)),l!==i?(ee=t,t=Y(o,a,s)):(X=t,t=i)}else X=t,t=i}else X=t,t=i;else X=t,t=i;if(t===i)if(t=X,34===e.charCodeAt(X)?(n=u,X++):(n=i,0===ie&&ce(E)),n!==i){for(r=[],o=_e();o!==i;)r.push(o),o=_e();34===e.charCodeAt(X)?(o=u,X++):(o=i,0===ie&&ce(E)),o!==i?(ee=t,t=qe(r.join(""))):(X=t,t=i)}else X=t,t=i;return t}function _e(){var t,n,r;return(t=Ee())===i&&(t=Pe())===i&&(t=X,92===e.charCodeAt(X)?(n=l,X++):(n=i,0===ie&&ce(A)),n!==i?(d.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&ce(P)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t===i&&(t=X,n=X,ie++,r=Ne(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(f.test(e.charAt(X))?(r=e.charAt(X),X++):(r=i,0===ie&&ce(T)),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i))),t}function Ie(){var e,t,n,r,o,a;if(e=X,ee=X,(t=(t=J())?void 0:i)!==i){for(n=[],r=Se();r!==i;)n.push(r),r=Se();if((r=Ne())!==i){for(o=[],a=Se();a!==i;)o.push(a),a=Se();ee=e,e=Y(n,r,o)}else X=e,e=i}else X=e,e=i;if(e===i){if(e=X,t=[],(n=Se())!==i)for(;n!==i;)t.push(n),n=Se();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?qe(null):"true"===t?qe(!0):"false"===t?qe(!1):e.includes(Qe)?ze(t):qe(t)}(t)),e=t}return e}function Se(){var t,n,r,o,a;return(t=Ee())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=l,X++):(n=i,0===ie&&ce(A)),n!==i&&(r=Ae())!==i?(ee=t,t=r):(X=t,t=i),t}(),t===i&&(t=Pe())===i&&(t=function(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=l,X++):(n=i,0===ie&&ce(A)),n!==i?("or"===e.substr(X,2).toLowerCase()?(r=e.substr(X,2),X+=2):(r=i,0===ie&&ce(w)),r===i&&("and"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&ce(_)),r===i&&("not"===e.substr(X,3).toLowerCase()?(r=e.substr(X,3),X+=3):(r=i,0===ie&&ce(S)))),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}(),t===i&&(t=function(){var t,n;return t=X,42===e.charCodeAt(X)?(n="*",X++):(n=i,0===ie&&ce(N)),n!==i&&(ee=t,n=Qe),n}(),t===i&&(t=X,n=X,ie++,r=Ae(),ie--,r===i?n=void 0:(X=n,n=i),n!==i?(r=X,ie++,o=function(){var e;return(e=je())===i&&(e=ke())===i&&(e=Fe()),e}(),ie--,o===i?r=void 0:(X=r,r=i),r!==i?(o=X,ie++,a=Ne(),ie--,a===i?o=void 0:(X=o,o=i),o!==i?(e.length>X?(a=e.charAt(X),X++):(a=i,0===ie&&ce(B)),a!==i?(ee=t,t=a):(X=t,t=i)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i))))),t}function Ce(){var e,t,n,r,o,a;if(e=X,ee=X,(t=(t=J())?void 0:i)!==i){for(n=[],r=Be();r!==i;)n.push(r),r=Be();if((r=Ne())!==i){for(o=[],a=Be();a!==i;)o.push(a),a=Be();ee=e,e=Y(n,r,o)}else X=e,e=i}else X=e,e=i;if(e===i)for(e=[],t=Be();t!==i;)e.push(t),t=Be();return e}function Ee(){var t,n;return t=X,"\\t"===e.substr(X,2)?(n="\\t",X+=2):(n=i,0===ie&&ce(M)),n!==i&&(ee=t,n="\t"),(t=n)===i&&(t=X,"\\r"===e.substr(X,2)?(n="\\r",X+=2):(n=i,0===ie&&ce(L)),n!==i&&(ee=t,n="\r"),(t=n)===i&&(t=X,"\\n"===e.substr(X,2)?(n="\\n",X+=2):(n=i,0===ie&&ce(R)),n!==i&&(ee=t,n="\n"),t=n)),t}function Ae(){var t;return p.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(G)),t}function Pe(){var t,n,r;return t=X,92===e.charCodeAt(X)?(n=l,X++):(n=i,0===ie&&ce(A)),n!==i?(r=function(){var t,n,r,o,a,s,u,l,c;return t=X,117===e.charCodeAt(X)?(n="u",X++):(n=i,0===ie&&ce(D)),n!==i?(r=X,o=X,(a=Te())!==i&&(s=Te())!==i&&(u=Te())!==i&&(l=Te())!==i?o=a=[a,s,u,l]:(X=o,o=i),(r=o!==i?e.substring(r,X):o)!==i?(ee=t,c=r,t=String.fromCharCode(parseInt(c,16))):(X=t,t=i)):(X=t,t=i),t}(),r!==i?(ee=t,t=r):(X=t,t=i)):(X=t,t=i),t}function Te(){var t;return g.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(q)),t}function Be(){var t;return ie++,b.test(e.charAt(X))?(t=e.charAt(X),X++):(t=i,0===ie&&ce(H)),ie--,t===i&&0===ie&&ce($),t}function Ne(){var t,n;return t=X,ee=X,(J()?void 0:i)!==i?(e.substr(X,14)===c?(n=c,X+=14):(n=i,0===ie&&ce(V)),n!==i?(ee=t,t=Le):(X=t,t=i)):(X=t,t=i),t}const{parseCursor:Me,cursorSymbol:Le,allowLeadingWildcards:Re=!0,helpers:{nodeTypes:Ge}}=t,De=Ge.function.buildNodeWithArgumentNodes,qe=Ge.literal.buildNode,ze=Ge.wildcard.buildNode,{wildcardSymbol:Qe}=Ge.wildcard;if((n=s())!==i&&X===e.length)return n;throw n!==i&&X<e.length&&ce({type:"end"}),We=re,Ue=ne<e.length?e.charAt(ne):null,$e=ne<e.length?le(ne,ne+1):le(ne,ne),new r(r.buildMessage(We,Ue),We,Ue,$e);var We,Ue,$e}}},function(e,t,n){e.exports=n(9)(6)},,,function(e,t,n){e.exports=n(9)(15)},function(e,t,n){e.exports=n(9)(13)},function(e,t,n){e.exports=n(9)(4)},function(e,t,n){e.exports=n(9)(18)},function(e,t,n){e.exports=n(9)(2564)},function(e,t,n){e.exports=n(9)(2572)},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(47);case"v8light":return n(49)}},function(e,t,n){var r=n(28),i=n(48);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){(t=n(29)(!1)).push([e.i,".kbnFieldButton{font-size:14px;font-size:1rem;line-height:1.71429rem;border-radius:6px;margin-bottom:4px;display:flex;align-items:center;transition:box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1),background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.kbnFieldButton:focus-within,.kbnFieldButton-isActive{outline:2px solid currentColor}.kbnFieldButton:focus-within:focus-visible,.kbnFieldButton-isActive:focus-visible{outline-style:auto}.kbnFieldButton:focus-within:not(:focus-visible),.kbnFieldButton-isActive:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#25262E}.kbnFieldButton--isDraggable:hover,.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1);border-radius:6px;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:hover,.kbnFieldButton--isDraggable .kbnFieldButton__button:focus{cursor:grab}.kbnFieldButton__button{flex-grow:1;text-align:left;padding:8px;display:flex;align-items:flex-start;line-height:normal}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldIcon,.kbnFieldButton--small .kbnFieldButton__fieldAction{margin-right:4px}\n",""]),e.exports=t},function(e,t,n){var r=n(28),i=n(50);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){(t=n(29)(!1)).push([e.i,".kbnFieldButton{font-size:14px;font-size:1rem;line-height:1.71429rem;border-radius:6px;margin-bottom:4px;display:flex;align-items:center;transition:box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1),background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.kbnFieldButton:focus-within,.kbnFieldButton-isActive{outline:2px solid currentColor}.kbnFieldButton:focus-within:focus-visible,.kbnFieldButton-isActive:focus-visible{outline-style:auto}.kbnFieldButton:focus-within:not(:focus-visible),.kbnFieldButton-isActive:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#fff}.kbnFieldButton--isDraggable:hover,.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04);border-radius:6px;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:hover,.kbnFieldButton--isDraggable .kbnFieldButton__button:focus{cursor:grab}.kbnFieldButton__button{flex-grow:1;text-align:left;padding:8px;display:flex;align-items:flex-start;line-height:normal}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldIcon,.kbnFieldButton--small .kbnFieldButton__fieldAction{margin-right:4px}\n",""]),e.exports=t},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"GeoContainmentAlertTypeExpression",(function(){return at})),n.d(t,"default",(function(){return at}));var r={};n.r(r),n.d(r,"buildNode",(function(){return L})),n.d(r,"toElasticsearchQuery",(function(){return R}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return G})),n.d(i,"buildNode",(function(){return z})),n.d(i,"test",(function(){return Q})),n.d(i,"toElasticsearchQuery",(function(){return W})),n.d(i,"toQueryStringQuery",(function(){return U})),n.d(i,"hasLeadingWildcard",(function(){return $}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return X})),n.d(o,"toElasticsearchQuery",(function(){return ee}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return te})),n.d(a,"toElasticsearchQuery",(function(){return ne}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return re})),n.d(s,"toElasticsearchQuery",(function(){return ie}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return oe})),n.d(u,"toElasticsearchQuery",(function(){return ae}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return se})),n.d(l,"toElasticsearchQuery",(function(){return ue}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return le})),n.d(c,"toElasticsearchQuery",(function(){return ce}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return de})),n.d(d,"toElasticsearchQuery",(function(){return fe}));var f={};n.r(f),n.d(f,"buildNode",(function(){return ge})),n.d(f,"buildNodeWithArgumentNodes",(function(){return be})),n.d(f,"toElasticsearchQuery",(function(){return he}));var p,g,b=n(2),h=n.n(b),x=n(14),v=n(15),m=n(0),y=n(4),j=n.n(y),k=n(27),F=n.n(k),w=n(3),O=n.n(w),_=(n(35),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),I=function(e,t){var n=_(e,t);return{script:{source:S(e),lang:e.lang,params:{value:n}}}},S=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var C={gt:">",gte:">=",lte:"<=",lt:"<"},E={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},A={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},P=function(e,t){var n=Object(w.mapValues)(Object(w.pickBy)(t,(function(e,t){return t in C})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(w.map)(n,(function(t,n){return"("+e.script+")"+Object(w.get)(C,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?A:E,o=Object(w.reduce)(n,(function(e,t,n){return e.concat(Object(w.get)(i,n))}),[]).join(" "),a=Object(w.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(o).concat(a)}return{script:{source:r,params:n,lang:e.lang}}},T=n(33),B=n.n(T),N=n(30),M=n.n(N);function L(e){return{type:"literal",value:e}}function R(e){return e.value}var G="@kuery-wildcard@";function D(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function z(e){return e.includes(G)?{type:"wildcard",value:e}:Ne(e)}function Q(e,t){var n=e.value.split(G).map(D).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function W(e){return e.value.split(G).join("*")}function U(e){return e.value.split(G).map(q).join("*")}function $(e){var t=e.value;return t.startsWith(G)&&t.replace(G,"").length>0}function H(e,t){if(!t)return[];if("literal"===e.type){var n=R(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Q(e,t.name)})):void 0}var V=n(18),K=n.n(V);function Z(e){var t=K.a.tz.guess();return"Browser"===e?t:e}function J(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function Y(e,t,n){var r=F()(F()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=H(r,t).reduce((function(e,t){var r=J(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(B()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(B()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(B()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(w.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(w.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?Ne(e):L(e),i="string"==typeof t?Ne(t):L(t),o=L(n);return{arguments:[r,i,o]}}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=M()(e.arguments,3),o=i[0],a=i[1],s=i[2],u="wildcard"===a.type&&a.value===G,l="wildcard"===o.type&&o.value===G,c=u&&l;if(c)return{match_all:{}};var d=Y(o,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(w.isUndefined)(a)?a:Me(a),p=s.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===a.type?{query_string:{query:U(a)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?H(d,t):[];if(g&&0===g.length&&g.push({name:Me(d),scripted:!1,type:""}),u&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var b=g.reduce((function(e,t){var i=function(e){var n=J(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(u)return[].concat(B()(e),[i({exists:{field:t.name}})]);if("wildcard"===a.type)return[].concat(B()(e),[i({query_string:{fields:[t.name],query:U(a)}})]);if("date"===t.type){var o=n.dateFormatTZ?{time_zone:Z(n.dateFormatTZ)}:{};return[].concat(B()(e),[i({range:j()({},t.name,F()({gte:f,lte:f},o))})])}var s="phrase"===p?"match_phrase":"match";return[].concat(B()(e),[i(j()({},s,j()({},t.name,f)))])}if(!u)return[].concat(B()(e),[{script:F()({},I(t,f))}])}),[]);return{bool:{should:b||[],minimum_should_match:1}}}function te(e){return{arguments:e}}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,o=e.arguments||[],a=i?"must":"filter";return{bool:j()({},a,o.map((function(e){return Me(e,t,n,r)})))}}function re(e){return{arguments:e}}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Me(e,t,n,r)})),minimum_should_match:1}}}function oe(e){return{arguments:[e]}}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=M()(e.arguments,1),o=i[0];return{bool:{must_not:Me(o,t,n,r)}}}function se(e,t,n){return{arguments:[Ne(e),t,xe.literal.buildNode(n)]}}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=M()(e.arguments,3),o=i[0],a=i[1],s=i[2],u=Y(o,t,null!=r&&r.nested?r.nested.path:void 0),l=t?H(u,t):[];l&&0===l.length&&l.push({name:Me(u),scripted:!1,type:""});var c=l.map((function(e){var t=function(t){var n=J(e);return"wildcard"!==u.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=j()({},a,Me(s));if(e.scripted)return{script:P(e,i)};if("date"===e.type){var o=n.dateFormatTZ?{time_zone:Z(n.dateFormatTZ)}:{};return t({range:j()({},e.name,F()(F()({},i),o))})}return t({range:j()({},e.name,i)})}));return{bool:{should:c,minimum_should_match:1}}}function le(e){return{arguments:[L(e)]}}function ce(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=M()(e.arguments,1),o=i[0],a=F()(F()({},o),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(o.value):o.value}),s=R(a),u=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===s}));if(null!=u&&u.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:s}}}function de(e,t){return{arguments:["string"==typeof e?Ne(e):L(e),t]}}function fe(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=M()(e.arguments,2),a=o[0],s=o[1],u=Me(a),l=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(u):u;return{nested:{path:l,query:Me(s,t,r,F()(F()({},i),{},{nested:{path:l}})),score_mode:"none"}}}var pe={is:o,and:a,or:s,not:u,range:l,exists:c,nested:d};function ge(e){var t=pe[e];if(O.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return F()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function be(e,t){if(O.a.isUndefined(pe[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function he(e,t,n,r){return pe[e.function].toElasticsearchQuery(e,t,n,r)}var xe={function:f,literal:r,wildcard:i},ve=n(40),me=n.n(ve),ye=n(41),je=n.n(ye),ke=n(42),Fe=n.n(ke),we=n(43),Oe=n.n(we),_e=n(44),Ie=n.n(_e),Se=n(45),Ce=n.n(Se),Ee=m.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Ae={fieldName:m.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:m.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:m.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:m.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Pe=function(e){Oe()(n,e);var t=Ie()(n);function n(e,r){var i;je()(this,n);var o=e.message;if(e.expected){var a=e.expected.map((function(e){var t,n="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Ae[n]||n})),s=Object(w.uniq)(a).filter((function(e){return void 0!==e})).sort().join(", ");o=m.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:s,foundInput:e.found?'"'.concat(e.found,'"'):Ee}})}var u=[o,r,Object(w.repeat)("-",e.location.start.offset)+"^"].join("\n");return i=t.call(this,u),j()(Fe()(i),"shortMessage",void 0),i.name="KQLSyntaxError",i.shortMessage=o,i}return me()(n)}(Ce()(Error)),Te=n(36),Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Te.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,F()(F()({},t),{},{helpers:{nodeTypes:xe}}))},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be(e,F()(F()({},t),{},{startRule:"Literal"}),Te.parse)},Me=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!xe[t.type])return e(xe.function.buildNode("and",[]),n);var o=xe[t.type];return o.toElasticsearchQuery(t,n,r,i)};Object(w.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var Le=n(16),Re=n(5);const Ge=["geo_point"],De=["geo_shape"];var qe=n(13);class geo_index_pattern_select_GeoIndexPatternSelect extends b.Component{constructor(...e){super(...e),j()(this,"_isMounted",!1),j()(this,"state",{doesIndexPatternHaveGeoField:!1,noIndexPatternsExist:!1}),j()(this,"_loadIndexPattern",(async e=>{if(!e||0===e.length||!this.props.indexPatternService)return;let t;try{t=await this.props.indexPatternService.get(e)}catch(e){return}return this._isMounted&&t.id===e?(this.setState({doesIndexPatternHaveGeoField:t.fields.some((e=>this.props.includedGeoTypes.includes(e.type)))}),t):void 0})),j()(this,"_onIndexPatternSelect",(async e=>{const t=await this._loadIndexPattern(e);t&&this.props.onChange(t)})),j()(this,"_onNoIndexPatterns",(()=>{this.setState({noIndexPatternsExist:!0})}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.props.value&&this._loadIndexPattern(this.props.value)}_renderNoIndexPatternWarning(){return this.state.noIndexPatternsExist?Object(qe.jsx)(h.a.Fragment,null,Object(qe.jsx)(x.EuiCallOut,{title:m.i18n.translate("xpack.stackAlerts.geoContainment.noIndexPattern.messageTitle",{defaultMessage:"Couldn't find any data views"}),color:"warning"},Object(qe.jsx)("p",null,Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.doThisPrefixDescription",defaultMessage:"You'll need to "}),Object(qe.jsx)(x.EuiLink,{href:this.props.http.basePath.prepend("/app/management/kibana/dataViews")},Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.doThisLinkTextDescription",defaultMessage:"Create a data view."}))),Object(qe.jsx)("p",null,Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.hintDescription",defaultMessage:"Don't have any data? "}),Object(qe.jsx)(x.EuiLink,{href:this.props.http.basePath.prepend("/app/home#/tutorial_directory/sampleData")},Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.noIndexPattern.getStartedLinkText",defaultMessage:"Get started with some sample data sets."})))),Object(qe.jsx)(x.EuiSpacer,{size:"s"})):null}render(){const e=this.props.IndexPatternSelectComponent,t=!!this.props.value&&!this.state.doesIndexPatternHaveGeoField,n=t?m.i18n.translate("xpack.stackAlerts.geoContainment.noGeoFieldInIndexPattern.message",{defaultMessage:"Data view does not contain any allowed geospatial fields. Must have one of type {geoFields}.",values:{geoFields:this.props.includedGeoTypes.join(", ")}}):"";return Object(qe.jsx)(h.a.Fragment,null,this._renderNoIndexPatternWarning(),Object(qe.jsx)(x.EuiFormRow,{label:m.i18n.translate("xpack.stackAlerts.geoContainment.indexPatternSelectLabel",{defaultMessage:"Data view"}),isInvalid:t,error:n},e?Object(qe.jsx)(e,{isInvalid:t,isDisabled:this.state.noIndexPatternsExist,indexPatternId:this.props.value,onChange:this._onIndexPatternSelect,placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.indexPatternSelectPlaceholder",{defaultMessage:"Select data view"}),fieldTypes:this.props.includedGeoTypes,onNoIndexPatterns:this._onNoIndexPatterns,isClearable:!1}):Object(qe.jsx)("div",null)))}}var ze=n(31),Qe=n.n(ze),We=n(37),Ue=n.n(We),$e=n(19),He=n.n($e),Ve=["type","label","size","scripted","className"],Ke={iconType:"questionInCircle",color:"gray"},Ze={boolean:{iconType:"tokenBoolean"},conflict:{iconType:"alert",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function Je(e){var t=e.type,n=e.label,r=e.size,i=void 0===r?"s":r,o=e.scripted,a=e.className,s=Ue()(e,Ve),u=Ze[t]||Ke;return Object(qe.jsx)(x.EuiToken,Qe()({},u,{className:He()("kbnFieldIcon",a),"aria-label":n||t,title:n||t,size:i,fill:o?"dark":void 0},s))}n(46);function Ye(e){return e?e.map((e=>({value:e,label:e.name}))).sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase()))):[]}function Xe({placeholder:e,value:t,onChange:n,fields:r}){const i=[];if(t&&r){const e=r.find((e=>e.name===t));e&&i.push({value:e,label:t})}return Object(qe.jsx)(x.EuiComboBox,{singleSelection:!0,options:Ye(r),selectedOptions:i,onChange:e=>{n(O.a.get(e,"0.value.name"))},isDisabled:!r,renderOption:function(e,t,n){return Object(qe.jsx)(x.EuiFlexGroup,{className:n,gutterSize:"s",alignItems:"center"},Object(qe.jsx)(x.EuiFlexItem,{grow:null},Object(qe.jsx)(Je,{type:e.value.type,fill:"none"})),Object(qe.jsx)(x.EuiFlexItem,null,Object(qe.jsx)(x.EuiHighlight,{search:t},e.label)))},isClearable:!1,placeholder:e,compressed:!0})}Object.keys({s:"kbnFieldButton--small",m:null});const et=({popoverContent:e,expressionDescription:t,defaultValue:n,value:r,isInvalid:i})=>{const[o,a]=Object(b.useState)(!1);return Object(qe.jsx)(x.EuiPopover,{id:"popoverForExpression",button:Object(qe.jsx)(x.EuiExpression,{display:"columns","data-test-subj":"selectIndexExpression",description:t,value:r||n,isActive:o,onClick:()=>a(!0),isInvalid:i}),isOpen:o,closePopover:()=>a(!1),ownFocus:!0,anchorPosition:"downLeft",zIndex:8e3,display:"block"},Object(qe.jsx)("div",{style:{width:"450px"}},Object(qe.jsx)(x.EuiPopoverTitle,null,Object(qe.jsx)(x.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(qe.jsx)(x.EuiFlexItem,null,t),Object(qe.jsx)(x.EuiFlexItem,{grow:!1},Object(qe.jsx)(x.EuiButtonIcon,{"data-test-subj":"closePopover",iconType:"cross",color:"danger","aria-label":m.i18n.translate("xpack.stackAlerts.geoContainment.ui.expressionPopover.closePopoverLabel",{defaultMessage:"Close"}),onClick:()=>a(!1)})))),e))},tt=({setAlertParamsDate:e,setAlertParamsGeoField:t,errors:n,setIndexPattern:r,indexPattern:i,isInvalid:o,dateField:a,geoField:s,data:u,unifiedSearch:l})=>{const{http:c}=Object(Re.useKibana)().services,d=l.ui&&l.ui.IndexPatternSelect||null,f=(e=>{const t=Object(b.useRef)();return Object(b.useEffect)((()=>{t.current=e})),t.current})(i),p=Object(b.useRef)({dateFields:[],geoFields:[]});Object(b.useEffect)((()=>{f!==i&&(p.current.geoFields=i.fields&&i.fields.length&&i.fields.filter((e=>Ge.includes(e.type)))||[],p.current.geoFields.length&&t(p.current.geoFields[0].name),p.current.dateFields=i.fields&&i.fields.length&&i.fields.filter((e=>"date"===e.type))||[],p.current.dateFields.length&&e(p.current.dateFields[0].name))}),[i,f,e,t]);const g=Object(qe.jsx)(b.Fragment,null,Object(qe.jsx)(x.EuiFormRow,{id:"geoIndexPatternSelect",fullWidth:!0,error:n.index},Object(qe.jsx)(geo_index_pattern_select_GeoIndexPatternSelect,{onChange:e=>{e&&r(e)},value:i.id,IndexPatternSelectComponent:d,indexPatternService:u.indexPatterns,http:c,includedGeoTypes:Ge})),Object(qe.jsx)(x.EuiFormRow,{id:"containmentTimeField",fullWidth:!0,label:Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.timeFieldLabel",defaultMessage:"Time field"})},Object(qe.jsx)(Xe,{placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.selectTimeLabel",{defaultMessage:"Select time field"}),value:a,onChange:t=>t&&e(t),fields:p.current.dateFields})),Object(qe.jsx)(x.EuiFormRow,{id:"geoField",fullWidth:!0,label:m.i18n.translate("xpack.stackAlerts.geoContainment.geofieldLabel",{defaultMessage:"Geospatial field"})},Object(qe.jsx)(Xe,{placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.selectGeoLabel",{defaultMessage:"Select geo field"}),value:s,onChange:e=>e&&t(e),fields:p.current.geoFields})));return Object(qe.jsx)(et,{isInvalid:o,value:i.title,defaultValue:m.i18n.translate("xpack.stackAlerts.geoContainment.entityIndexSelect",{defaultMessage:"Select a data view and geo point field"}),popoverContent:g,expressionDescription:m.i18n.translate("xpack.stackAlerts.geoContainment.entityIndexLabel",{defaultMessage:"index"})})},nt=["string","number","ip"],rt=({errors:e,entity:t,setAlertParamsEntity:n,indexFields:r,isInvalid:i})=>{const o=(e=>{const t=Object(b.useRef)();return Object(b.useEffect)((()=>{t.current=e})),t.current})(r),a=Object(b.useRef)({indexFields:[]});Object(b.useEffect)((()=>{O.a.isEqual(o,r)||(a.current.indexFields=function(e){return e.filter((e=>{const t=nt.includes(e.type),n=e.name.startsWith("_"),r=!!e.aggregatable;return t&&r&&!n}))}(r),!t&&a.current.indexFields.length&&n(a.current.indexFields[0].name))}),[r,o,n,t]);const s=Object(qe.jsx)(x.EuiFormRow,{id:"entitySelect",fullWidth:!0,error:e.index},Object(qe.jsx)(Xe,{placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.topHitsSplitFieldSelectPlaceholder",{defaultMessage:"Select entity field"}),value:t,onChange:e=>e&&n(e),fields:a.current.indexFields}));return Object(qe.jsx)(et,{isInvalid:i,value:t,defaultValue:"Select entity field",popoverContent:s,expressionDescription:m.i18n.translate("xpack.stackAlerts.geoContainment.entityByLabel",{defaultMessage:"by"})})},it=({ruleParams:e,errors:t,boundaryIndexPattern:n,boundaryNameField:r,setBoundaryIndexPattern:i,setBoundaryGeoField:o,setBoundaryNameField:a,data:s,unifiedSearch:u})=>{const l=["string","number","ip"],{http:c}=Object(Re.useKibana)().services,d=u.ui&&u.ui.IndexPatternSelect||null,{boundaryGeoField:f}=e,p={name:"<nothing selected>",type:"string"},g=(e=>{const t=Object(b.useRef)();return Object(b.useEffect)((()=>{t.current=e})),t.current})(n),h=Object(b.useRef)({geoFields:[],boundaryNameFields:[]});Object(b.useEffect)((()=>{var e;g!==n&&(h.current.geoFields=n.fields&&n.fields.length&&n.fields.filter((e=>De.includes(e.type)))||[],h.current.geoFields.length&&o(h.current.geoFields[0].name),h.current.boundaryNameFields=[...(null!==(e=n.fields)&&void 0!==e?e:[]).filter((e=>l.includes(e.type)&&!e.name.startsWith("_")&&!e.name.endsWith("keyword"))),p],h.current.boundaryNameFields.length&&a(h.current.boundaryNameFields[0].name))}),[l,n,p,g,o,a]);const v=Object(qe.jsx)(b.Fragment,null,Object(qe.jsx)(x.EuiFormRow,{id:"geoIndexPatternSelect",fullWidth:!0,error:t.index},Object(qe.jsx)(geo_index_pattern_select_GeoIndexPatternSelect,{onChange:e=>{e&&i(e)},value:n.id,IndexPatternSelectComponent:d,indexPatternService:s.indexPatterns,http:c,includedGeoTypes:De})),Object(qe.jsx)(x.EuiFormRow,{id:"geoField",fullWidth:!0,label:m.i18n.translate("xpack.stackAlerts.geoContainment.geofieldLabel",{defaultMessage:"Geospatial field"})},Object(qe.jsx)(Xe,{placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.selectLabel",{defaultMessage:"Select geo field"}),value:f,onChange:o,fields:h.current.geoFields})),Object(qe.jsx)(x.EuiFormRow,{id:"boundaryNameFieldSelect",fullWidth:!0,label:m.i18n.translate("xpack.stackAlerts.geoContainment.boundaryNameSelectLabel",{defaultMessage:"Human-readable boundary name (optional)"})},Object(qe.jsx)(Xe,{placeholder:m.i18n.translate("xpack.stackAlerts.geoContainment.boundaryNameSelect",{defaultMessage:"Select boundary name"}),value:r||null,onChange:e=>{a(e===p.name?void 0:e)},fields:h.current.boundaryNameFields})));return Object(qe.jsx)(et,{defaultValue:"Select a data view and geo shape field",value:n.title,popoverContent:v,expressionDescription:m.i18n.translate("xpack.stackAlerts.geoContainment.indexLabel",{defaultMessage:"index"})})};function ot(e){try{"kuery"===e.language?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{Be(e,t,Te.parse)}catch(t){throw"SyntaxError"===t.name?new Pe(t,e):t}}(e.query):function(e){Object(w.isString)(e)&&e.trim()}(e.query)}catch(e){return!1}return!0}const at=({ruleParams:e,ruleInterval:t,setRuleParams:n,setRuleProperty:r,errors:i,data:o,unifiedSearch:a})=>{const{index:s,indexId:u,indexQuery:l,geoField:c,entity:d,dateField:f,boundaryType:p,boundaryIndexTitle:g,boundaryIndexId:h,boundaryIndexQuery:y,boundaryGeoField:j,boundaryNameField:k}=e,[F,w]=Object(b.useState)({id:"",title:""}),O=e=>{e&&(w(e),e.title&&n("index",e.title),e.id&&n("indexId",e.id))},[_,I]=Object(b.useState)(l||{query:"",language:"kuery"}),[S,C]=Object(b.useState)({id:"",title:""}),E=e=>{e&&(C(e),e.title&&n("boundaryIndexTitle",e.title),e.id&&n("boundaryIndexId",e.id))},[A,P]=Object(b.useState)(y||{query:"",language:"kuery"});return m.i18n.translate("xpack.stackAlerts.geoContainment.fixErrorInExpressionBelowValidationMessage",{defaultMessage:"Expression contains errors."}),Object(b.useEffect)((()=>{(async()=>{if(r("params",{...e,index:null!=s?s:"",indexId:null!=u?u:"",entity:null!=d?d:"",dateField:null!=f?f:"",boundaryType:null!=p?p:"entireIndex",geoField:null!=c?c:"",boundaryIndexTitle:null!=g?g:"",boundaryIndexId:null!=h?h:"",boundaryGeoField:null!=j?j:"",boundaryNameField:null!=k?k:""}),o.indexPatterns){if(u){const e=await o.indexPatterns.get(u);O(e)}if(h){const e=await o.indexPatterns.get(h);E(e)}}})()}),[]),Object(qe.jsx)(b.Fragment,null,null,Object(qe.jsx)(x.EuiSpacer,{size:"l"}),Object(qe.jsx)(x.EuiTitle,{size:"xs"},Object(qe.jsx)("h5",null,Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.selectEntity",defaultMessage:"Select entity"}))),Object(qe.jsx)(x.EuiSpacer,{size:"s"}),Object(qe.jsx)(tt,{dateField:f,geoField:c,errors:i,setAlertParamsDate:e=>n("dateField",e),setAlertParamsGeoField:e=>n("geoField",e),setRuleProperty:r,setIndexPattern:O,indexPattern:F,isInvalid:!u||!f||!c,data:o,unifiedSearch:a}),Object(qe.jsx)(rt,{errors:i,entity:d,setAlertParamsEntity:e=>n("entity",e),indexFields:F.fields,isInvalid:!!(u&&f&&c)&&!d}),Object(qe.jsx)(x.EuiSpacer,{size:"s"}),Object(qe.jsx)(x.EuiFlexItem,null,Object(qe.jsx)(Le.QueryStringInput,{disableAutoFocus:!0,bubbleSubmitEvent:!0,indexPatterns:F?[F]:[],query:_,onChange:e=>{e.language&&(ot(e)&&n("indexQuery",e),I(e))}})),Object(qe.jsx)(x.EuiSpacer,{size:"l"}),Object(qe.jsx)(x.EuiTitle,{size:"xs"},Object(qe.jsx)("h5",null,Object(qe.jsx)(v.FormattedMessage,{id:"xpack.stackAlerts.geoContainment.selectBoundaryIndex",defaultMessage:"Select boundary"}))),Object(qe.jsx)(x.EuiSpacer,{size:"s"}),Object(qe.jsx)(it,{ruleParams:e,errors:i,boundaryIndexPattern:S,setBoundaryIndexPattern:E,setBoundaryGeoField:e=>e&&n("boundaryGeoField",e),setBoundaryNameField:e=>n("boundaryNameField",e||""),boundaryNameField:k,data:o,unifiedSearch:a}),Object(qe.jsx)(x.EuiSpacer,{size:"s"}),Object(qe.jsx)(x.EuiFlexItem,null,Object(qe.jsx)(Le.QueryStringInput,{disableAutoFocus:!0,bubbleSubmitEvent:!0,indexPatterns:S?[S]:[],query:A,onChange:e=>{e.language&&(ot(e)&&n("boundaryIndexQuery",e),P(e))}})),Object(qe.jsx)(x.EuiSpacer,{size:"l"}))}}])]);