/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[8],{129:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(28),i=a(1),r=n.__importDefault(a(230)),s=a(166);t.default=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var a=r.default({width:s.isClient?window.innerWidth:e,height:s.isClient?window.innerHeight:t}),n=a[0],o=a[1];return i.useEffect((function(){if(s.isClient){var e=function(){o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),n}},166:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(28).__importDefault(a(233));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},167:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useState(null),i=a[0],r=a[1];return n.useEffect((function(){if(e.current&&"function"==typeof IntersectionObserver){var a=new IntersectionObserver((function(e){r(e[0])}),t);return a.observe(e.current),function(){r(null),a.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),i}},168:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},169:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},227:function(e,t,a){"use strict";var n=a(228),i=a(229);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=y(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),d=["%","/","?",";","#"].concat(u),m=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=a(12);function y(e,t,a){if(e&&i.isObject(e)&&e instanceof r)return e;var n=new r;return n.parse(e,t,a),n}r.prototype.parse=function(e,t,a){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(o);if(y=y.trim(),!a&&1===e.split("#").length){var v=l.exec(y);if(v)return this.path=y,this.href=y,this.pathname=v[1],v[2]?(this.search=v[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(y);if(x){var S=(x=x[0]).toLowerCase();this.protocol=S,y=y.substr(x.length)}if(a||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===y.substr(0,2);!k||x&&f[x]||(y=y.substr(2),this.slashes=!0)}if(!f[x]&&(k||x&&!b[x])){for(var M,w,O=-1,j=0;j<m.length;j++)-1!==(I=y.indexOf(m[j]))&&(-1===O||I<O)&&(O=I);for(-1!==(w=-1===O?y.lastIndexOf("@"):y.lastIndexOf("@",O))&&(M=y.slice(0,w),y=y.slice(w+1),this.auth=decodeURIComponent(M)),O=-1,j=0;j<d.length;j++){var I;-1!==(I=y.indexOf(d[j]))&&(-1===O||I<O)&&(O=I)}-1===O&&(O=y.length),this.host=y.slice(0,O),y=y.slice(O),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var T=this.hostname.split(/\./),F=(j=0,T.length);j<F;j++){var L=T[j];if(L&&!L.match(p)){for(var A="",P=0,D=L.length;P<D;P++)L.charCodeAt(P)>127?A+="x":A+=L[P];if(!A.match(p)){var R=T.slice(0,j),N=T.slice(j+1),z=L.match(g);z&&(R.push(z[1]),N.unshift(z[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=n.toASCII(this.hostname));var _=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+_,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!h[S])for(j=0,F=u.length;j<F;j++){var U=u[j];if(-1!==y.indexOf(U)){var H=encodeURIComponent(U);H===U&&(H=escape(U)),y=y.split(U).join(H)}}var $=y.indexOf("#");-1!==$&&(this.hash=y.substr($),y=y.slice(0,$));var G=y.indexOf("?");if(-1!==G?(this.search=y.substr(G),this.query=y.substr(G+1),t&&(this.query=E.parse(this.query)),y=y.slice(0,G)):t&&(this.search="",this.query={}),y&&(this.pathname=y),b[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){_=this.pathname||"";var q=this.search||"";this.path=_+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=E.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==r?(r="//"+(r||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),t+r+(a=a.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+n},r.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(i.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var a=new r,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];a[o]=this[o]}if(a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(a[u]=e[u])}return b[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(e.protocol&&e.protocol!==a.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),m=0;m<d.length;m++){var p=d[m];a[p]=e[p]}return a.href=a.format(),a}if(a.protocol=e.protocol,e.host||f[e.protocol])a.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),a.pathname=g.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var h=a.pathname||"",E=a.search||"";a.path=h+E}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var y=a.pathname&&"/"===a.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=v||y||a.host&&e.pathname,S=x,k=a.pathname&&a.pathname.split("/")||[],M=(g=e.pathname&&e.pathname.split("/")||[],a.protocol&&!b[a.protocol]);if(M&&(a.hostname="",a.port=null,a.host&&(""===k[0]?k[0]=a.host:k.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),x=x&&(""===g[0]||""===k[0])),v)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,k=g;else if(g.length)k||(k=[]),k.pop(),k=k.concat(g),a.search=e.search,a.query=e.query;else if(!i.isNullOrUndefined(e.search))return M&&(a.hostname=a.host=k.shift(),(C=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=C.shift(),a.host=a.hostname=C.shift())),a.search=e.search,a.query=e.query,i.isNull(a.pathname)&&i.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a;if(!k.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var w=k.slice(-1)[0],O=(a.host||e.host||k.length>1)&&("."===w||".."===w)||""===w,j=0,I=k.length;I>=0;I--)"."===(w=k[I])?k.splice(I,1):".."===w?(k.splice(I,1),j++):j&&(k.splice(I,1),j--);if(!x&&!S)for(;j--;j)k.unshift("..");!x||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),O&&"/"!==k.join("/").substr(-1)&&k.push("");var C,T=""===k[0]||k[0]&&"/"===k[0].charAt(0);return M&&(a.hostname=a.host=T?"":k.length?k.shift():"",(C=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=C.shift(),a.host=a.hostname=C.shift())),(x=x||a.host&&k.length)&&!T&&k.unshift(""),k.length?a.pathname=k.join("/"):(a.pathname=null,a.path=null),i.isNull(a.pathname)&&i.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},r.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},228:function(e,t,a){e.exports=a(10)(2556)},229:function(e,t,a){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},230:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(28),i=a(1),r=n.__importDefault(a(231));t.default=function(e){var t=i.useRef(0),a=i.useState(e),n=a[0],s=a[1],o=i.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){s(e)}))}),[]);return r.default((function(){cancelAnimationFrame(t.current)})),[n,o]}},231:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(28),i=a(1),r=n.__importDefault(a(232));t.default=function(e){var t=i.useRef(e);t.current=e,r.default((function(){return function(){return t.current()}}))}},232:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){n.useEffect(e,[])}},233:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,i,r;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(i=n;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,r[i]))return!1;for(i=n;0!=i--;){var s=r[i];if(!("_owner"===s&&t.$$typeof||e(t[s],a[s])))return!1}return!0}return t!=t&&a!=a}},235:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(54),i=a(156),r=a(236),s=a(157),o=a(238);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(n),u=l(i),d=l(r),m=l(s),p=l(o);function g(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var h={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:g,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:g,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}},f=function(e){function t(t){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,u.default(a)}return d.default(t,e),t}(m.default(Error)),b=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function E(e,t){var a,n=e.pop();return t.push(n.f.apply(n,(a=[]).concat.apply(a,t.splice(-n.argCount)))),n.precedence}function y(e){return e.split("").reverse().join("")}var v=/--[\S]*/g;function x(e){return e.charAt(0).toUpperCase()+e.slice(1)}var S=["Top","Right","Bottom","Left"];function k(e,t){if(!e)return t.toLowerCase();var a=e.split("-");if(a.length>1)return a.splice(1,0,t),a.reduce((function(e,t){return""+e+x(t)}));var n=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===n?""+e+t:n}function M(e,t){for(var a={},n=0;n<t.length;n+=1)(t[n]||0===t[n])&&(a[k(e,S[n])]=t[n]);return a}function w(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i=a[0],r=a[1],s=void 0===r?i:r,o=a[2],l=void 0===o?i:o,c=a[3],u=void 0===c?s:c,d=[i,s,l,u];return M(e,d)}function O(e,t){return e.substr(-t.length)===t}var j=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function I(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var a=e.match(j);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),a?[parseFloat(e),a[2]]:[e,void 0]):a?parseFloat(e):e}var C=function(e){return function(t,a){void 0===a&&(a="16px");var n=t,i=a;if("string"==typeof t){if(!O(t,"px"))throw new f(69,e,t);n=I(t)}if("string"==typeof a){if(!O(a,"px"))throw new f(70,e,a);i=I(a)}if("string"==typeof n)throw new f(71,t,e);if("string"==typeof i)throw new f(72,a,e);return""+n/i+e}},T=C("em"),F=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function L(e){if("string"!=typeof e)return[e,""];var t=e.match(F);return t?[parseFloat(e),t[2]]:[e,void 0]}var A={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4},P=C("rem");function D(e,t,a,n){void 0===a&&(a="320px"),void 0===n&&(n="1200px");var i=L(e),r=i[0],s=i[1],o=L(t),l=o[0],c=o[1],u=L(a),d=u[0],m=u[1],p=L(n),g=p[0],h=p[1];if("number"!=typeof d||"number"!=typeof g||!m||!h||m!==h)throw new f(47);if("number"!=typeof r||"number"!=typeof l||s!==c)throw new f(48);if(s!==m||c!==h)throw new f(75);var b=(r-l)/(d-g);return"calc("+(l-b*g).toFixed(2)+(s||"")+" + "+(100*b).toFixed(2)+"vw)"}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var N,z,_=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,B={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function U(e,t){return t?' format("'+B[e]+'")':""}function H(e,t,a,n){var i=[];return t&&i.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&i.push(function(e,t,a){return function(e){return!!e.replace(/\s+/g," ").match(_)}(e)?'url("'+e+'")'+U(t[0],a):t.map((function(t){return'url("'+e+"."+t+'")'+U(t,a)})).join(", ")}(e,a,n)),i.join(", ")}function $(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function G(e){for(var t="",a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];for(var r=0;r<e.length;r+=1)if(t+=e[r],r===n.length-1&&n[r]){var s=n.filter((function(e){return!!e}));s.length>1?(t=t.slice(0,-1),t+=", "+n[r]):1===s.length&&(t+=""+n[r])}else n[r]&&(t+=n[r]+" ");return t.trim()}var q={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"},W=function(e,t,a){var n=""+a[0]+(a[1]||""),i=""+a[0]/2+(a[1]||""),r=""+t[0]+(t[1]||""),s=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+i+" "+r+" "+i;case"topLeft":return n+" "+r+" 0 0";case"left":return s+" "+n+" "+s+" 0";case"bottomLeft":return n+" 0 0 "+r;case"bottom":return r+" "+i+" 0 "+i;case"bottomRight":return"0 0 "+n+" "+r;case"right":return s+" 0 "+s+" "+n;default:return"0 "+n+" "+r+" 0"}};function V(e){return Math.round(255*e)}function K(e,t,a){return V(e)+","+V(t)+","+V(a)}function J(e,t,a,n){if(void 0===n&&(n=K),0===t)return n(a,a,a);var i=(e%360+360)%360/60,r=(1-Math.abs(2*a-1))*t,s=r*(1-Math.abs(i%2-1)),o=0,l=0,c=0;i>=0&&i<1?(o=r,l=s):i>=1&&i<2?(o=s,l=r):i>=2&&i<3?(l=r,c=s):i>=3&&i<4?(l=s,c=r):i>=4&&i<5?(o=s,c=r):i>=5&&i<6&&(o=r,c=s);var u=a-r/2;return n(o+u,l+u,c+u)}var Y={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=/^#[a-fA-F0-9]{6}$/,X=/^#[a-fA-F0-9]{8}$/,Q=/^#[a-fA-F0-9]{3}$/,ee=/^#[a-fA-F0-9]{4}$/,te=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,ae=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ne=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ie=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function re(e){if("string"!=typeof e)throw new f(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Y[t]?"#"+Y[t]:e}(e);if(t.match(Z))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(X)){var a=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:a}}if(t.match(Q))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(ee)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var i=te.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var r=ae.exec(t.substring(0,50));if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10),alpha:parseFloat(""+r[4])};var s=ne.exec(t);if(s){var o="rgb("+J(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",l=te.exec(o);if(!l)throw new f(4,t,o);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var c=ie.exec(t.substring(0,50));if(c){var u="rgb("+J(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=te.exec(u);if(!d)throw new f(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new f(5)}function se(e){return function(e){var t,a=e.red/255,n=e.green/255,i=e.blue/255,r=Math.max(a,n,i),s=Math.min(a,n,i),o=(r+s)/2;if(r===s)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var l=r-s,c=o>.5?l/(2-r-s):l/(r+s);switch(r){case a:t=(n-i)/l+(n<i?6:0);break;case n:t=(i-a)/l+2;break;default:t=(a-n)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:o,alpha:e.alpha}:{hue:t,saturation:c,lightness:o}}(re(e))}var oe=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function le(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function ce(e){return le(Math.round(255*e))}function ue(e,t,a){return oe("#"+ce(e)+ce(t)+ce(a))}function de(e,t,a){return J(e,t,a,ue)}function me(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return de(e,t,a);if("object"==typeof e&&void 0===t&&void 0===a)return de(e.hue,e.saturation,e.lightness);throw new f(1)}function pe(e,t,a,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?de(e,t,a):"rgba("+J(e,t,a)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?de(e.hue,e.saturation,e.lightness):"rgba("+J(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new f(2)}function ge(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return oe("#"+le(e)+le(t)+le(a));if("object"==typeof e&&void 0===t&&void 0===a)return oe("#"+le(e.red)+le(e.green)+le(e.blue));throw new f(6)}function he(e,t,a,n){if("string"==typeof e&&"number"==typeof t){var i=re(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?ge(e,t,a):"rgba("+e+","+t+","+a+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?ge(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new f(7)}function fe(e){if("object"!=typeof e)throw new f(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return he(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return ge(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return pe(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return me(e);throw new f(8)}function be(e,t,a){return function(){var n=a.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):be(e,t,n)}}function Ee(e){return be(e,e.length,[])}function ye(e,t){if("transparent"===t)return t;var a=se(t);return fe(c.default({},a,{hue:a.hue+parseFloat(e)}))}var ve=Ee(ye);function xe(e,t,a){return Math.max(e,Math.min(t,a))}function Se(e,t){if("transparent"===t)return t;var a=se(t);return fe(c.default({},a,{lightness:xe(0,1,a.lightness-parseFloat(e))}))}var ke=Ee(Se);function Me(e,t){if("transparent"===t)return t;var a=se(t);return fe(c.default({},a,{saturation:xe(0,1,a.saturation-parseFloat(e))}))}var we=Ee(Me);function Oe(e){if("transparent"===e)return 0;var t=re(e),a=Object.keys(t).map((function(e){var a=t[e]/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)})),n=a[0],i=a[1],r=a[2];return parseFloat((.2126*n+.7152*i+.0722*r).toFixed(3))}function je(e,t){var a=Oe(e),n=Oe(t);return parseFloat((a>n?(a+.05)/(n+.05):(n+.05)/(a+.05)).toFixed(2))}function Ie(e,t){if("transparent"===t)return t;var a=se(t);return fe(c.default({},a,{lightness:xe(0,1,a.lightness+parseFloat(e))}))}var Ce=Ee(Ie);function Te(e,t,a){if("transparent"===t)return a;if("transparent"===a)return t;if(0===e)return a;var n=re(t),i=c.default({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),r=re(a),s=c.default({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),o=i.alpha-s.alpha,l=2*parseFloat(e)-1,u=((l*o==-1?l:l+o)/(1+l*o)+1)/2,d=1-u;return he({red:Math.floor(i.red*u+s.red*d),green:Math.floor(i.green*u+s.green*d),blue:Math.floor(i.blue*u+s.blue*d),alpha:i.alpha*(parseFloat(e)/1)+s.alpha*(1-parseFloat(e)/1)})}var Fe=Ee(Te);function Le(e,t){if("transparent"===t)return t;var a=re(t),n="number"==typeof a.alpha?a.alpha:1;return he(c.default({},a,{alpha:xe(0,1,(100*n+100*parseFloat(e))/100)}))}var Ae=Ee(Le),Pe="#000",De="#fff";function Re(e,t){if("transparent"===t)return t;var a=se(t);return fe(c.default({},a,{saturation:xe(0,1,a.saturation+parseFloat(e))}))}var Ne=Ee(Re);function ze(e,t){return"transparent"===t?t:fe(c.default({},se(t),{hue:parseFloat(e)}))}var _e=Ee(ze);function Be(e,t){return"transparent"===t?t:fe(c.default({},se(t),{lightness:parseFloat(e)}))}var Ue=Ee(Be);function He(e,t){return"transparent"===t?t:fe(c.default({},se(t),{saturation:parseFloat(e)}))}var $e=Ee(He);function Ge(e,t){return"transparent"===t?t:Fe(parseFloat(e),"rgb(0, 0, 0)",t)}var qe=Ee(Ge);function We(e,t){return"transparent"===t?t:Fe(parseFloat(e),"rgb(255, 255, 255)",t)}var Ve=Ee(We);function Ke(e,t){if("transparent"===t)return t;var a=re(t),n="number"==typeof a.alpha?a.alpha:1;return he(c.default({},a,{alpha:xe(0,1,+(100*n-100*parseFloat(e)).toFixed(2)/100)}))}var Je=Ee(Ke),Ye=["top","right","bottom","left"];function Ze(e,t){return e(t?":"+t:"")}function Xe(e,t,a){if(!t)throw new f(67);if(0===e.length)return Ze(t,null);for(var n=[],i=0;i<e.length;i+=1){if(a&&a.indexOf(e[i])<0)throw new f(68);n.push(Ze(t,e[i]))}return n.join(",")}var Qe=[void 0,null,"active","focus","hover"];function et(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var tt=["absolute","fixed","relative","static","sticky"],at=[void 0,null,"active","focus","hover"];function nt(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=ve,t.animation=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=Array.isArray(t[0]);if(!n&&t.length>8)throw new f(64);var i=t.map((function(e){if(n&&!Array.isArray(e)||!n&&Array.isArray(e))throw new f(65);if(Array.isArray(e)&&e.length>8)throw new f(66);return Array.isArray(e)?e.join(" "):e})).join(", ");return{animation:i}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{background:t.join(", ")}},t.between=D,t.border=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i;return"string"==typeof e&&Ye.indexOf(e)>=0?((i={})["border"+x(e)+"Width"]=a[0],i["border"+x(e)+"Style"]=a[1],i["border"+x(e)+"Color"]=a[2],i):(a.unshift(e),{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var a,n,i=x(e);if(!t&&0!==t)throw new f(62);if("Top"===i||"Bottom"===i)return(a={})["border"+i+"RightRadius"]=t,a["border"+i+"LeftRadius"]=t,a;if("Left"===i||"Right"===i)return(n={})["borderTop"+i+"Radius"]=t,n["borderBottom"+i+"Radius"]=t,n;throw new f(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Xe(t,et,Qe)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=se(e);return fe(c.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(v)){if(t)return e;throw new f(73)}var a;if("undefined"!=typeof document&&null!==document.documentElement&&(a=getComputedStyle(document.documentElement).getPropertyValue(e)),a)return a.trim();throw new f(74)},t.darken=ke,t.desaturate=we,t.directionalProperty=w,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=T,t.fluidRange=function(e,t,a){if(void 0===t&&(t="320px"),void 0===a&&(a="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new f(49);if(Array.isArray(e)){for(var n,i={},r={},s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=s()).done;){var o,l,u=n.value;if(!u.prop||!u.fromSize||!u.toSize)throw new f(50);r[u.prop]=u.fromSize,i["@media (min-width: "+t+")"]=c.default({},i["@media (min-width: "+t+")"],((o={})[u.prop]=D(u.fromSize,u.toSize,t,a),o)),i["@media (min-width: "+a+")"]=c.default({},i["@media (min-width: "+a+")"],((l={})[u.prop]=u.toSize,l))}return c.default({},r,i)}var d,m,p;if(!e.prop||!e.fromSize||!e.toSize)throw new f(51);return(p={})[e.prop]=e.fromSize,p["@media (min-width: "+t+")"]=((d={})[e.prop]=D(e.fromSize,e.toSize,t,a),d),p["@media (min-width: "+a+")"]=((m={})[e.prop]=e.toSize,m),p},t.fontFace=function(e){var t=e.fontFamily,a=e.fontFilePath,n=e.fontStretch,i=e.fontStyle,r=e.fontVariant,s=e.fontWeight,o=e.fileFormats,l=void 0===o?["eot","woff2","woff","ttf","svg"]:o,c=e.formatHint,u=void 0!==c&&c,d=e.localFonts,m=e.unicodeRange,p=e.fontDisplay,g=e.fontVariationSettings,h=e.fontFeatureSettings;if(!t)throw new f(55);if(!a&&!d)throw new f(52);if(d&&!Array.isArray(d))throw new f(53);if(!Array.isArray(l))throw new f(54);var b={"@font-face":{fontFamily:t,src:H(a,d,l,u),unicodeRange:m,fontStretch:n,fontStyle:i,fontVariant:r,fontWeight:s,fontDisplay:p,fontVariationSettings:g,fontFeatureSettings:h}};return JSON.parse(JSON.stringify(b))},t.getContrast=je,t.getLuminance=Oe,t.getValueAndUnit=L,t.grayscale=function(e){return"transparent"===e?e:fe(c.default({},se(e),{saturation:0}))},t.hiDPI=$,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=me,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?pe({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):me({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new f(45)},t.hsla=pe,t.invert=function(e){if("transparent"===e)return e;var t=re(e);return fe(c.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=Ce,t.linearGradient=function(e){var t=e.colorStops,a=e.fallback,n=e.toDirection,i=void 0===n?"":n;if(!t||t.length<2)throw new f(56);return{backgroundColor:a||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:G(N||(N=p.default(["linear-gradient(","",")"])),i,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var a=y(e),n=a.match(b);if(n&&!n.every((function(e){return e===n[0]})))throw new f(41);return""+function(e,t){var a,n=function(e){var t={};return t.symbols=e?c.default({},h.symbols,e.symbols):c.default({},h.symbols),t}(t),i=[n.symbols["("].prefix],r=[],s=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(n.symbols).map((function(e){return n.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");s.lastIndex=0;var o=!1;do{var l=(a=s.exec(e))||[")",void 0],u=l[0],d=l[1],m=n.symbols[u],p=m&&!m.prefix&&!m.func,g=!m||!m.postfix&&!m.infix;if(d||(o?g:p))throw new f(37,a?a.index:e.length,e);if(o){var b=m.postfix||m.infix;do{var y=i[i.length-1];if((b.precedence-y.precedence||y.rightToLeft)>0)break}while(E(i,r));o="postfix"===b.notation,")"!==b.symbol&&(i.push(b),o&&E(i,r))}else if(m){if(i.push(m.prefix||m.func),m.func&&(!(a=s.exec(e))||"("!==a[0]))throw new f(38,a?a.index:e.length,e)}else r.push(+u),o=!0}while(a&&i.length);if(i.length)throw new f(39,a?a.index:e.length,e);if(a)throw new f(40,a?a.index:e.length,e);return r.pop()}(y(a.replace(b,"")),t)+(n?y(n[0]):"")},t.meetsContrastGuidelines=function(e,t){var a=je(e,t);return{AA:a>=4.5,AALarge:a>=3,AAA:a>=7,AAALarge:a>=4.5}},t.mix=Fe,t.modularScale=function(e,t,a){if(void 0===t&&(t="1em"),void 0===a&&(a=1.333),"number"!=typeof e)throw new f(42);if("string"==typeof a&&!A[a])throw new f(43);var n="string"==typeof t?L(t):[t,""],i=n[0],r=n[1],s="string"==typeof a?A[a]:a;if("string"==typeof i)throw new f(44,t);return""+i*Math.pow(s,e)+(r||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=Ae,t.padding=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return w.apply(void 0,["padding"].concat(t))},t.parseToHsl=se,t.parseToRgb=re,t.position=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return tt.indexOf(e)>=0&&e?c.default({},w.apply(void 0,[""].concat(a)),{position:e}):w.apply(void 0,["",e].concat(a))},t.radialGradient=function(e){var t=e.colorStops,a=e.extent,n=void 0===a?"":a,i=e.fallback,r=e.position,s=void 0===r?"":r,o=e.shape,l=void 0===o?"":o;if(!t||t.length<2)throw new f(57);return{backgroundColor:i||t[0].split(" ")[0],backgroundImage:G(z||(z=p.default(["radial-gradient(","","","",")"])),s,l,n,t.join(", "))}},t.readableColor=function(e,t,a,n){void 0===t&&(t=Pe),void 0===a&&(a=De),void 0===n&&(n=!0);var i=Oe(e)>.179,r=i?t:a;return!n||je(e,r)>=4.5?r:i?Pe:De},t.rem=P,t.retinaImage=function(e,t,a,n,i){var r;if(void 0===a&&(a="png"),void 0===i&&(i="_2x"),!e)throw new f(58);var s=a.replace(/^\./,""),o=n?n+"."+s:""+e+i+"."+s;return(r={backgroundImage:"url("+e+"."+s+")"})[$()]=c.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),r},t.rgb=ge,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?he({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):ge({red:e.red,green:e.green,blue:e.blue});throw new f(46)},t.rgba=he,t.saturate=Ne,t.setHue=_e,t.setLightness=Ue,t.setSaturation=$e,t.shade=qe,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=I,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Xe(t,nt,at)},t.timingFunctions=function(e){return q[e]},t.tint=Ve,t.toColorString=fe,t.transitions=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(Array.isArray(t[0])&&2===t.length){var n=t[1];if("string"!=typeof n)throw new f(61);var i=t[0].map((function(e){return e+" "+n})).join(", ");return{transition:i}}return{transition:t.join(", ")}},t.transparentize=Je,t.triangle=function(e){var t=e.pointingDirection,a=e.height,n=e.width,i=e.foregroundColor,r=e.backgroundColor,s=void 0===r?"transparent":r,o=L(n),l=L(a);if(isNaN(l[0])||isNaN(o[0]))throw new f(60);return c.default({width:"0",height:"0",borderColor:s},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new f(59)}}(t,i),{borderStyle:"solid",borderWidth:W(t,l,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},236:function(e,t,a){var n=a(237);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},237:function(e,t,a){e.exports=a(10)(990)},238:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),e.raw=t,e},e.exports.__esModule=!0,e.exports.default=e.exports},239:function(e,t,a){var n=a(240),i=a(241),r=i;r.v1=n,r.v4=i,e.exports=r},240:function(e,t,a){var n,i,r=a(168),s=a(169),o=0,l=0;e.exports=function(e,t,a){var c=t&&a||0,u=t||[],d=(e=e||{}).node||n,m=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==m){var p=r();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==m&&(m=i=16383&(p[6]<<8|p[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,f=g-o+(h-l)/1e4;if(f<0&&void 0===e.clockseq&&(m=m+1&16383),(f<0||g>o)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=g,l=h,i=m;var b=(1e4*(268435455&(g+=122192928e5))+h)%4294967296;u[c++]=b>>>24&255,u[c++]=b>>>16&255,u[c++]=b>>>8&255,u[c++]=255&b;var E=g/4294967296*1e4&268435455;u[c++]=E>>>8&255,u[c++]=255&E,u[c++]=E>>>24&15|16,u[c++]=E>>>16&255,u[c++]=m>>>8|128,u[c++]=255&m;for(var y=0;y<6;++y)u[c+y]=d[y];return t||s(u)}},241:function(e,t,a){var n=a(168),i=a(169);e.exports=function(e,t,a){var r=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[r+o]=s[o];return t||i(s)}},243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),i=a(166),r=function(){};t.default=function(e,t,a){if(!i.isClient)return[t,r,r];if(!e)throw new Error("useLocalStorage key may not be falsy");var s=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,o=n.useState((function(){try{var n=a?a.raw?String:a.serializer:JSON.stringify,i=localStorage.getItem(e);return null!==i?s(i):(t&&localStorage.setItem(e,n(t)),t)}catch(e){return t}})),l=o[0],c=o[1],u=n.useCallback((function(t){try{var n="function"==typeof t?t(l):t;if(void 0===n)return;var i;i=a?a.raw?"string"==typeof n?n:JSON.stringify(n):a.serializer?a.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,i),c(s(i))}catch(e){}}),[e,c]),d=n.useCallback((function(){try{localStorage.removeItem(e),c(void 0)}catch(e){}}),[e,c]);return[l,u,d]}},248:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return vp}));var n=a(1),i=a.n(n),r=a(30),s=a.n(r),o=a(0),l=a(45),c=a(44),u=a(24),d=a(20),m=a(11),p=a(23),g=a(26),h=a(9),f=a(50),b=a(49),E=a(54),y=a.n(E),v=a(21),x=a(89);const{AUTOREFRESH_INTERVAL:S,AUTOREFRESH_IS_PAUSED:k,DATE_RANGE_START:M,DATE_RANGE_END:w,FOCUS_CONNECTOR_FIELD:O}=l.e,j=(e,t=!1)=>(t&&(delete e.absoluteDateRangeStart,delete e.absoluteDateRangeEnd,Object.keys(e).forEach((t=>{const a=e[t];null!=a&&""!==a||delete e[t],"dateRangeStart"===t&&a===M&&delete e[t],"dateRangeEnd"===t&&a===w&&delete e[t],"autorefreshIsPaused"===t&&a===k&&delete e[t],"autorefreshInterval"===t&&a===S&&delete e[t],"focusConnectorField"===t&&a===O&&delete e[t]}))),`?${Object(x.stringify)(e,{sort:!1})}`);var I=a(47),C=a(4);const T=e=>{var t,a,i,r,s,l;const c=Object(I.i)()[0](),u=Object(p.useKibana)(),d=null===(t=u.services.chrome)||void 0===t?void 0:t.setBreadcrumbs,m=null!==(a=null===(i=u.services.application)||void 0===i?void 0:i.getUrlForApp(C.a.ID))&&void 0!==a?a:"",g=null!==(r=null===(s=u.services.application)||void 0===s?void 0:s.getUrlForApp("observability-overview"))&&void 0!==r?r:"",h=null===(l=u.services.application)||void 0===l?void 0:l.navigateToUrl;Object(n.useEffect)((()=>{var t,a;d&&d((t=((e,t,a)=>{if(a){const t={...a};delete t.statusFilter;const n=j(t,!0);e+="?"===n?"":n}return[{text:o.i18n.translate("xpack.synthetics.breadcrumbs.observabilityText",{defaultMessage:"Observability"}),href:t},{text:o.i18n.translate("xpack.synthetics.breadcrumbs.legacyOverviewBreadcrumbText",{defaultMessage:"Uptime"}),href:e}]})(m,g,c).concat(e),a=h,t.map((e=>({...e,...e.href?{onClick:t=>{a&&e.href&&(t.preventDefault(),a(e.href))}}:{}})))))}),[m,g,e,h,c,d])},F=()=>{Object(h.useTrackPageview)({app:"uptime",path:"mapping-error"}),Object(h.useTrackPageview)({app:"uptime",path:"mapping-error",delay:15e3});const e=Object(p.useKibana)().services.docLinks;return T([{text:o.i18n.translate("xpack.synthetics.mappingErrorRoute.breadcrumb",{defaultMessage:"Mapping error"})}]),i.a.createElement(d.EuiEmptyPrompt,{"data-test-subj":"xpack.synthetics.mappingsErrorPage",iconColor:"danger",iconType:"cross",title:i.a.createElement(d.EuiTitle,null,i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.title",defaultMessage:"Heartbeat mappings missing"}))),body:i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.bodyMessage",defaultMessage:"Incorrect mappings detected! Perhaps you forgot to run the heartbeat {setup} command?",values:{setup:i.a.createElement(d.EuiCode,null,"setup")}})),e&&i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.bodyDocsLink",defaultMessage:"You can learn how to troubleshoot this issue in the {docsLink}.",values:{docsLink:i.a.createElement(d.EuiLink,{href:`${e.ELASTIC_WEBSITE_URL}guide/en/observability/${e.DOC_LINK_VERSION}/troubleshoot-uptime-mapping-issues.html`,target:"_blank"},"docs")}})))})};var L=a(2),A=a(46);const P=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationTitle",{defaultMessage:"Job successfully created"}),D=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationText",{defaultMessage:"The analysis is now running for response duration chart. It might take a while before results are added to the response times graph."}),R=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedLazyNotificationText",{defaultMessage:"The analysis is waiting for an ML node to become available. It might take a while before results are added to the response times graph."}),N=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreationFailedNotificationTitle",{defaultMessage:"Job creation failed"}),z=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreationFailedNotificationText",{defaultMessage:"Your current license may not allow for creating machine learning jobs, or this job may already exist."}),_=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionNotificationTitle",{defaultMessage:"Job deleted"}),B=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionSuccessNotificationText",{defaultMessage:"Job is successfully deleted"}),U=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionConfirmLabel",{defaultMessage:"Delete anomaly detection job?"}),H=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationText.viewJobLinkText",{defaultMessage:"View job"}),$=o.i18n.translate("xpack.synthetics.ml.durationChart.exploreInMlApp",{defaultMessage:"Explore in ML App"}),G=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enableAnomalyDetectionTitle",{defaultMessage:"Enable anomaly detection"}),q=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.anomalyDetectionTitle",{defaultMessage:"Anomaly detection"}),W=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.disableAnomalyDetectionTitle",{defaultMessage:"Disable anomaly detection"}),V=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enableAnomalyAlert",{defaultMessage:"Enable anomaly alert"}),K=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.noPermissionsTooltip",{defaultMessage:"You need read-write access to Uptime to create anomaly alerts."}),J=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.disableAnomalyAlert",{defaultMessage:"Disable anomaly alert"}),Y=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageAnomalyDetectionTitle",{defaultMessage:"Manage anomaly detection"}),Z=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription.mlJobsPageLinkText",{defaultMessage:"Machine Learning jobs management page"}),X=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription.noteText",{defaultMessage:"Note: It might take a few minutes for the job to begin calculating results."}),Q=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.createNewJobButtonLabel",{defaultMessage:"Create new job"}),ee=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.cancelLabel",{defaultMessage:"Cancel"}),te=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.createMLJobDescription",{defaultMessage:"Here you can create a machine learning job to calculate anomaly scores on\n    response durations for Uptime Monitor. Once enabled, the monitor duration chart on the details page\n    will show the expected bounds and annotate the graph with anomalies. You can also potentially\n     identify periods of increased latency across geographical regions."}),ae=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.startTrial",{defaultMessage:"Start free 14-day trial"}),ne=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.startTrialDesc",{defaultMessage:"In order to access duration anomaly detection, you have to be subscribed to an Elastic Platinum license."}),ie=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enable_or_manage_job",{defaultMessage:"You can enable anomaly detection job or if job is already there you can manage the job or alert."}),re=o.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.add_job_permissions_needed",{defaultMessage:"Permissions needed"});var se=a(227),oe=a.n(se),le=a(38),ce=a.n(le),ue=a(108);const de=({basePath:e,monitorId:t,dateRange:a})=>{const n={ml:{jobIds:[Object(ue.b)(t)]},refreshInterval:{pause:!0,value:0},time:a},i={mlExplorerFilter:{filterActive:!0,filteredFields:["monitor.id",t]},mlExplorerSwimlane:{viewByFieldName:"observer.geo.name"}};return oe.a.format({pathname:e+"/app/ml",hash:`/explorer?_g=${ce.a.encode(n)}`+(t?`&_a=${ce.a.encode(i)}`:"")})},me=({basePath:e,monitorId:t,dateRange:a,children:n})=>{const r=de({basePath:e,monitorId:t,dateRange:a});return i.a.createElement(d.EuiButtonEmpty,{children:n,size:"s",href:r,target:"_blank"})};var pe=a(61);const ge=({onConfirm:e,onCancel:t})=>i.a.createElement(d.EuiConfirmModal,{title:J,onCancel:t,onConfirm:e,cancelButtonText:"Cancel",confirmButtonText:"Delete",buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"uptimeMLAlertDeleteConfirmModel"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.confirmAlertDeleteMessage",defaultMessage:"Are you sure you want to delete the alert for anomalies?"}))),he=({alertFlyoutVisible:e,initialAlert:t,setAlertFlyoutVisibility:a})=>{const{triggersActionsUi:r}=Object(p.useKibana)().services,s=Object(n.useMemo)((()=>r.getEditAlertFlyout({initialRule:t,onClose:()=>{a(!1)}})),[t,a,r]);return i.a.createElement(i.a.Fragment,null,e&&s)},fe=({hasMLJob:e,onEnableJob:t,onJobDelete:a})=>{var r,s,o;const l=Object(p.useKibana)(),[u,m]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),{basePath:E}=Object(n.useContext)(f.c),y=Object(c.useSelector)(A.c),v=Object(c.useSelector)(A.j),x=Object(c.useSelector)(pe.m),{loading:S}=Object(c.useSelector)(A.f),{loading:k}=Object(c.useSelector)(A.n),{dateRangeStart:M,dateRangeEnd:w}=Object(I.e)(),O=Object(I.f)(),j=Object(c.useDispatch)(),C=(()=>{const{lastRefresh:e}=Object(n.useContext)(f.a),t=Object(c.useDispatch)(),a=Object(I.f)(),{data:i}=Object(c.useSelector)(pe.c),r=Object(c.useSelector)(A.y);return Object(n.useEffect)((()=>{t(pe.i.get({monitorId:a}))}),[a,e,t,r]),i})(),[T,F]=Object(n.useState)(!1),P=v||S||x||k,D=e?q:G,R=i.a.createElement(d.EuiButton,{"data-test-subj":e?"uptimeManageMLJobBtn":"uptimeEnableAnomalyBtn",onClick:e?()=>m(!u):t,disabled:e&&!y,isLoading:P,size:"s","aria-label":ie},P?"":D),N=null!==(r=null===(s=l.services.application)||void 0===s||null===(o=s.capabilities.uptime)||void 0===o?void 0:o.save)&&void 0!==r&&r,z=[{id:0,title:Y,items:[{name:$,icon:i.a.createElement(d.EuiIcon,{type:"dataVisualizer",size:"m"}),href:de({basePath:E,monitorId:O,dateRange:{from:M,to:w}})},...C?[{name:"Anomaly alert",icon:"bell","data-test-subj":"uptimeManageAnomalyAlertBtn",panel:1}]:[{name:V,"data-test-subj":"uptimeEnableAnomalyAlertBtn",icon:"bell",disabled:!N,toolTipContent:N?null:K,onClick:()=>{j(Object(b.O)(L.b.DURATION_ANOMALY)),j(Object(b.P)(!0)),m(!1)}}],{name:W,"data-test-subj":"uptimeDeleteMLJobBtn",icon:i.a.createElement(d.EuiIcon,{type:"trash",size:"m"}),onClick:()=>{m(!1),a()}}]},{id:1,title:"Anomaly alert",items:[{name:"Edit","data-test-subj":"uptimeEditAnomalyAlertBtn",onClick:()=>{h(!0),m(!1)}},{name:"Disable","data-test-subj":"uptimeDisableAnomalyAlertBtn",onClick:()=>{F(!0)}}]}],_=Object(n.useCallback)((()=>{h(!1),j(pe.i.get({monitorId:O}))}),[j,O]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopover,{button:R,isOpen:u,closePopover:()=>m(!1),panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,panels:z,"data-test-subj":"uptimeManageMLContextMenu"})),T&&i.a.createElement(ge,{onConfirm:()=>{j(pe.g.get({alertId:null==C?void 0:C.id})),F(!1)},onCancel:()=>{F(!1)}}),g&&i.a.createElement(he,{initialAlert:C,alertFlyoutVisible:g,setAlertFlyoutVisibility:_}))};var be=a(22),Ee=a.n(be),ye=a(79),ve=a(73),xe=a(103);const Se=({content:e,dataTestSubj:t,isDisabled:a,isActive:n,value:r,withNext:s})=>{const[o,l]=Object(I.i)(),{statusFilter:c}=o();return i.a.createElement(d.EuiFilterButton,{"data-test-subj":t,hasActiveFilters:n,isDisabled:a,onClick:()=>{l({statusFilter:c===r?"":r,pagination:""})},withNext:s},e)},ke=o.i18n.translate("xpack.synthetics.monitorList.table.url.name",{defaultMessage:"Url"}),Me=o.i18n.translate("xpack.synthetics.monitorList.table.tags.name",{defaultMessage:"Tags"}),we=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.upLabel",{defaultMessage:"Up"}),Oe=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.downLabel",{defaultMessage:"Down"}),je=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.completeLabel",{defaultMessage:"Complete"}),Ie=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.failedLabel",{defaultMessage:"Failed"}),Ce=o.i18n.translate("xpack.synthetics.seconds.label",{defaultMessage:"seconds"}),Te=o.i18n.translate("xpack.synthetics.seconds.shortForm.label",{defaultMessage:"sec"}),Fe=o.i18n.translate("xpack.synthetics.millisecond.abbreviation.label",{defaultMessage:"ms"}),Le=()=>{const{statusFilter:e}=Object(I.e)();return i.a.createElement(d.EuiFilterGroup,null,i.a.createElement(Se,{content:o.i18n.translate("xpack.synthetics.filterBar.filterAllLabel",{defaultMessage:"All"}),dataTestSubj:"xpack.synthetics.filterBar.filterStatusAll",value:"",withNext:!0,isActive:""===e}),i.a.createElement(Se,{content:we,dataTestSubj:"xpack.synthetics.filterBar.filterStatusUp",value:"up",withNext:!0,isActive:"up"===e}),i.a.createElement(Se,{content:Oe,dataTestSubj:"xpack.synthetics.filterBar.filterStatusDown",value:"down",withNext:!1,isActive:"down"===e}))};var Ae=a(25),Pe=a(104),De=a(70);const Re=({onChange:e})=>{const t=Object(De.b)(),{filtersList:a}=Object(xe.b)();return t?i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",wrap:!0},a.map((({field:a,selectedItems:n,excludedItems:r,label:s})=>[...n.map((o=>i.a.createElement(d.EuiFlexItem,{key:a+o,grow:!1},i.a.createElement(h.FilterValueLabel,{dataView:t,removeFilter:()=>{e(a,n.filter((e=>e!==o)),r)},invertFilter:t=>{e(a,n.filter((e=>e!==o)),[...r,o])},field:a,value:o,negate:!1,label:s})))),...r.map((o=>i.a.createElement(d.EuiFlexItem,{key:a+o,grow:!1},i.a.createElement(h.FilterValueLabel,{dataView:t,removeFilter:()=>{e(a,n,r.filter((e=>e!==o)))},invertFilter:t=>{e(a,[...n,o],r.filter((e=>e!==o)))},field:a,value:o,negate:!0,label:s}))))]))):null};var Ne=a(98);const ze=Ee()(d.EuiFilterGroup).withConfig({displayName:"Container",componentId:"sc-1tzq2lo-0"})(["margin-bottom:10px;"]),_e=()=>{const[e,t]=Object(n.useState)({fieldName:"",values:[],notValues:[]});Object(Pe.b)(e.fieldName,e.values,e.notValues);const{dateRangeStart:a,dateRangeEnd:r}=Object(I.e)(),{inspectorAdapters:s}=Object(h.useInspectorContext)(),{filtersList:o}=Object(xe.b)(),l=Object(De.b)(),c=Object(n.useCallback)(((e,a,n)=>{t({fieldName:e,values:a,notValues:n})}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,null,l&&o.map((({field:e,label:t,selectedItems:n,excludedItems:o})=>i.a.createElement(h.FieldValueSuggestions,{key:e,compressed:!1,dataViewTitle:l.title,sourceField:e,label:t,selectedValue:n,excludedValue:o,onChange:(t,a)=>c(e,null!=t?t:[],null!=a?a:[]),asCombobox:!1,asFilterButton:!0,forceOpen:!1,filters:[{exists:{field:"summary"}},Ne.b],cardinalityField:"monitor.id",time:{from:a,to:r},inspector:{adapter:s.requests,title:"get"+Object(Ae.capitalize)(t)+"FilterValues"}})))),i.a.createElement(Re,{onChange:c}))},Be=()=>i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.pingList.checkHistoryTitle",defaultMessage:"History"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Le,null)),i.a.createElement(d.EuiFlexItem,{grow:!1,style:{maxWidth:"135px"}},i.a.createElement(_e,null)));var Ue=a(6),He=a.n(Ue);const $e=o.i18n.translate("xpack.synthetics.pingList.statusColumnLabel",{defaultMessage:"Status"}),Ge=o.i18n.translate("xpack.synthetics.pingList.responseCodeColumnLabel",{defaultMessage:"Response code"}),qe=(o.i18n.translate("xpack.synthetics.pingList.errorTypeColumnLabel",{defaultMessage:"Error type"}),o.i18n.translate("xpack.synthetics.pingList.errorColumnLabel",{defaultMessage:"Error"})),We=o.i18n.translate("xpack.synthetics.pingList.locationNameColumnLabel",{defaultMessage:"Location"}),Ve=o.i18n.translate("xpack.synthetics.pingList.timestampColumnLabel",{defaultMessage:"Timestamp"}),Ke=({pingStatus:e,item:t})=>{const{colors:{dangerBehindText:a}}=Object(n.useContext)(f.g),r=He()(t.timestamp);let s="";return s=He()().diff(r,"d")>1?r.format("ll LTS"):r.format("LTS"),i.a.createElement("div",{"data-test-subj":`xpack.synthetics.pingList.ping-${t.docId}`},i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:e===l.y.UP?"success":a},(c=e,t.monitor.type===l.s.BROWSER?"up"===c?je:Ie:"up"===c?we:Oe)),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.pingList.recencyMessage",{values:{fromNow:s},defaultMessage:"Checked {fromNow}",description:"A string used to inform our users how long ago Heartbeat pinged the selected host."})));var c},Je=({location:e})=>e?i.a.createElement(d.EuiText,null,e):i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-observer-options.html",target:"_blank"},o.i18n.translate("xpack.synthetics.locationName.helpLinkAnnotation",{defaultMessage:"Add location",description:"Text that instructs the user to navigate to our docs to add a geographic location to their data"}));var Ye=a(167),Ze=a.n(Ye),Xe=a(52);const Qe=o.i18n.translate("xpack.synthetics.synthetics.prevStepButton.airaLabel",{defaultMessage:"Previous step"}),et=o.i18n.translate("xpack.synthetics.synthetics.nextStepButton.ariaLabel",{defaultMessage:"Next step"}),tt=o.i18n.translate("xpack.synthetics.synthetics.imageLoadingSpinner.ariaLabel",{defaultMessage:"An animated spinner indicating the image is loading"}),at=o.i18n.translate("xpack.synthetics.synthetics.thumbnail.fullSize.alt",{defaultMessage:"A larger version of the screenshot for this journey step's thumbnail."}),nt=Object(g.euiStyled)(d.EuiText)`
  display: flex;
  align-items: center;
  width: 120px;
  height: 67.5px;
  justify-content: center;
  text-align: center;
  border: 1px solid ${e=>e.theme.eui.euiColorLightShade};
`,it=()=>i.a.createElement(nt,{"data-test-subj":"pingTimestampNoImageAvailable"},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.noImageMessage",defaultMessage:"No image available"}))),rt=Object(g.euiStyled)(d.EuiText)`
  display: flex;
  align-items: center;
  width: 120px;
  height: 65.5px;
  justify-content: center;
  text-align: center;
  border: 1px solid ${e=>e.theme.eui.euiColorLightShade};
`,st=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiProgress,{size:"xs"}),i.a.createElement(rt,{"data-test-subj":"pingTimestampSpinner","aria-label":tt},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.loadingImageMessage",defaultMessage:"Loading"})))),ot=({imageCaption:e,isLoading:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,t?i.a.createElement(st,null):i.a.createElement(it,null)),i.a.createElement(d.EuiFlexItem,null,e));var lt=a(129),ct=a.n(lt),ut=a(92),dt=a.n(ut);function mt(e=50){const{width:t}=ct()(),[a,i]=Object(n.useState)(t),r=Object(n.useCallback)((e=>gt(a,e)),[a]),s=Object(n.useCallback)((e=>ht(a,e)),[a]),o=Object(n.useCallback)(((e,t)=>function(e,t,a){return gt(e,t)&&ht(e,a)}(a,e,t)),[a]);return dt()((()=>{i(t)}),e,[t]),{up:r,down:s,between:o,debouncedWidth:a}}function pt(e){switch(e){case"xxxl":return 2e3;case"xxl":case"xl":return 1599;case"l":return d.BREAKPOINTS.l;case"m":return d.BREAKPOINTS.m;case"s":return d.BREAKPOINTS.s}return d.BREAKPOINTS.xs}function gt(e,t){return e>=pt(t)}function ht(e,t){return e<pt(t)}const ft=({captionContent:e,imgRef:t,imgSrc:a,maxSteps:r,setStepNumber:s,stepNumber:o,isLoading:l,label:c,onVisible:u})=>{const{euiTheme:m}=Object(d.useEuiTheme)(),p=mt();Object(n.useEffect)((()=>(u(!0),()=>{u(!1)})),[]);const g=p.down("m");return i.a.createElement(bt,{onClick:e=>{e.stopPropagation()}},i.a.createElement("div",{className:"stepArrowsFullScreen"},(a||t)&&i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(vt,{disabled:1===o,onClick:e=>{s(o-1),e.preventDefault()},iconType:"arrowLeft","aria-label":Qe,isLoading:l,$_css:g?0:"auto"},Qe)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Et,null,e)),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(xt,{disabled:o===r,onClick:e=>{s(o+1),e.stopPropagation()},iconType:"arrowRight",iconSide:"right","aria-label":et,isLoading:l,$_css2:g?0:"auto"},et))),i.a.createElement(yt,{className:"eui-textNoWrap",size:"s",$_css3:m.size.xs},c)))},bt=g.euiStyled.div`
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  display: inline-block;
  width: 100%;
  text-decoration: none;
`,Et=Object(g.euiStyled)(d.EuiText)((e=>({color:e.theme.eui.euiTextColor})));var yt=Ee()(Et).withConfig({displayName:"_StyledSecondaryText",componentId:"sc-1m82dva-0"})((e=>({padding:e.$_css3}))),vt=Ee()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-1m82dva-1"})((e=>({marginLeft:e.$_css}))),xt=Ee()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty2",componentId:"sc-1m82dva-2"})((e=>({marginRight:e.$_css2}))),St=a(136);const kt=Ee()(d.EuiImage).withConfig({displayName:"StepImage",componentId:"sc-109flbr-0"})(["&&&{display:flex;figure.euiImage-isFullScreen{display:flex;div.stepArrowsFullScreen{display:flex;}}}"]),Mt=({captionContent:e,imageCaption:t,imageData:a})=>a?i.a.createElement(kt,{allowFullScreen:!0,alt:e,caption:t,"data-test-subj":"pingTimestampImage",hasShadow:!0,url:a,size:"s",className:"syntheticsStepImage"}):i.a.createElement(st,null),wt=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:r})=>(Object(St.a)(n,r,a),i.a.createElement(Mt,{captionContent:e,imageCaption:t,imageData:a})),Ot=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,imgSrc:r,setImageData:s})=>r?i.a.createElement(Mt,{captionContent:e,imageCaption:t,imageData:a}):n?i.a.createElement(wt,{captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:s}):null,jt=({captionContent:e,imageCaption:t,imgRef:a,imgSrc:n,isImagePopoverOpen:r})=>{const[s,o]=i.a.useState(n||void 0);i.a.useEffect((()=>{n&&n!==s&&o(n)}),[n,s]);const l=i.a.useCallback((e=>o(e)),[o]);return i.a.createElement(d.EuiPopover,{anchorPosition:"leftDown",button:i.a.createElement(Ot,{captionContent:e,imageCaption:t,imgRef:a,imgSrc:n,setImageData:l,imageData:s}),isOpen:r,closePopover:()=>{}},s?i.a.createElement(d.EuiImage,{alt:at,url:s,style:{height:360,width:640,objectFit:"contain"}}):i.a.createElement(st,null))},It=Ee.a.div.withConfig({displayName:"StepDiv",componentId:"sc-1o8o6cn-0"})(["figure.euiImage{div.stepArrowsFullScreen{display:none;}}"]),Ct=({label:e,checkGroup:t,stepStatus:a,allStepsLoaded:r,initialStepNo:s=1})=>{const[c,m]=Object(n.useState)(s),[p,g]=Object(n.useState)(!1),[b,E]=Object(n.useState)([]),y=i.a.useRef(null),{basePath:v}=Object(n.useContext)(f.c),x=`${v}/internal/uptime/journey/screenshot/${t}/${c}`,S=Ze()(y,{root:null,rootMargin:"0px",threshold:1}),[k,M]=Object(n.useState)(void 0),{data:w,loading:O}=(({stepStatus:e,hasImage:t,hasIntersected:a,imgPath:i})=>{const r=Object(u.useRouteMatch)(l.o),s=Object(u.useRouteMatch)(l.p),[o,c]=Object(n.useState)(0),d="skipped"===e,{data:m,loading:p}=Object(h.useFetcher)((()=>d?new Promise((e=>e(null))):a&&!t?Object(ve.e)(i):void 0),[a,i,d,o]);return Object(n.useEffect)((()=>{p||t||!(null!=r&&r.isExact||null!=s&&s.isExact)||d||setTimeout((()=>{c((e=>e<20?e+1:e))}),5e3)}),[t,p,null==r?void 0:r.isExact,null==s?void 0:s.isExact,d]),{data:m,loading:p}})({hasImage:Boolean(b[c-1])||Boolean(k),hasIntersected:Boolean(S&&1===S.intersectionRatio),stepStatus:a,imgPath:x});let j;var I;Object(n.useEffect)((()=>{Object(Xe.A)(w)?M(w):Object(Xe.z)(w)&&E((e=>[...e,null==w?void 0:w.src]))}),[w]),Object(Xe.z)(w)&&(j=null!==(I=null==b?void 0:b[c-1])&&void 0!==I?I:w.src);const C=((e,t)=>o.i18n.translate("xpack.synthetics.synthetics.pingTimestamp.captionContent",{defaultMessage:"Step: {stepNumber} of {totalSteps}",values:{stepNumber:e,totalSteps:t}}))(c,null==w?void 0:w.maxSteps),[T,F]=Object(n.useState)(0),L=i.a.createElement(ft,{captionContent:C,imgSrc:j,imgRef:k,maxSteps:null==w?void 0:w.maxSteps,setStepNumber:m,stepNumber:c,isLoading:Boolean(O),label:e,onVisible:e=>F((t=>e?t+1:t-1))});return Object(n.useEffect)((()=>{1===T&&c!==s&&m(s)}),[T,s,c]),i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(It,{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),ref:y},(j||k)&&i.a.createElement(jt,{captionContent:C,imageCaption:L,imgSrc:j,imgRef:k,isImagePopoverOpen:p}),!j&&!k&&i.a.createElement(ot,{imageCaption:L,isLoading:O||!r}))),e&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{className:"eui-textNoWrap"},e)))};var Tt=a(59);function Ft({testRunId:e,serviceError:t,errors:a,locations:i}){const[r,s]=Object(n.useState)([]),[o,l]=Object(n.useState)(null);Object(n.useEffect)((()=>{s([]),l(null)}),[e]),Object(n.useEffect)((()=>{(r.length||a.length)&&s(a)}),[a]),Object(n.useEffect)((()=>{(null==o?void 0:o.message)!==(null==t?void 0:t.message)&&l(t)}),[t]);const c=Object(n.useMemo)((()=>i.reduce(((e,t)=>({...e,[t.id]:t})),{})),[i]),u=i.length-(null!=r?r:[]).filter((({locationId:e})=>!!e)).length,d=!!o||(null==r?void 0:r.length)&&(null==r?void 0:r.length)===i.length,m=Object(n.useMemo)((()=>d?[{name:"Error",message:Dt,title:Lt}]:(null==r?void 0:r.length)>0?r.map((({locationId:e})=>c[e])).filter((e=>!!e)).map((e=>({name:"Error",message:Pt(e.label),title:At}))):[]),[c,r,d]);return{expectPings:u,hasBlockingError:d,blockingErrorMessage:d?Dt:null,errorMessages:m}}const Lt=o.i18n.translate("xpack.synthetics.testRun.pushErrorLabel",{defaultMessage:"Push error"}),At=o.i18n.translate("xpack.synthetics.testRun.runErrorLabel",{defaultMessage:"Error running test"}),Pt=e=>o.i18n.translate("xpack.synthetics.testRun.runErrorLocation",{defaultMessage:"Failed to run monitor on location {locationName}.",values:{locationName:e}}),Dt=o.i18n.translate("xpack.synthetics.testRun.pushError",{defaultMessage:"Failed to push the monitor to service."}),Rt=e=>{let t=Date.parse(e);return isNaN(t)&&(t=parseInt(e,10)),He()(t)};function Nt(e){return parseInt(e.number,10)*function(e){switch(e){case Xe.r.SECONDS:return 1e3;case Xe.r.MINUTES:return 6e4;default:throw new Error(`Unit ${e} is not supported`)}}(e.unit)}function zt(e,t=!0){const{refreshApp:a}=Object(n.useContext)(f.a),[i,r]=Object(n.useState)(Date.now()),[s]=Object(n.useState)((()=>setInterval((()=>{t&&a(),r(Date.now())}),null!=e?e:5e3)));return Object(n.useEffect)((()=>()=>{clearInterval(s)}),[s]),{refreshTimer:s,lastRefresh:i}}const _t=({configId:e,expectSummaryDocs:t,testRunId:a})=>{const{refreshTimer:i,lastRefresh:r}=zt(2e3,!1),{data:s,loading:o}=Object(h.useEsSearch)(Object(h.createEsParams)({index:l.A,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{term:{config_id:e}},{exists:{field:"summary"}},...a?[{term:{test_run_id:a}}]:[]]}}},size:1e3}),[e,r],{name:"TestRunData"}),c=Object(n.useRef)({checksum:"",time:Date.now()});return Object(n.useMemo)((()=>{var e;const a=null!==(e=null==s?void 0:s.hits.hits)&&void 0!==e?e:[],n=a.map((({_id:e})=>e)).reduce(((e,t)=>e+t),"");return n!==c.current.checksum&&(c.current.checksum=n,c.current.time=Date.now()),a.length>0?(a.length>=t&&clearInterval(i),{data:s,loading:o,summaryDocs:a.map((e=>{var t;return{...e._source,timestamp:null===(t=e._source)||void 0===t?void 0:t["@timestamp"],docId:e._id}})),lastUpdated:c.current.time}):{data:s,loading:o,summaryDocs:null,lastUpdated:c.current.time}}),[t,s,o,i])};var Bt=a(65);function Ut({checkGroupId:e,title:t,summaryDocs:a,journeyStarted:i,isCompleted:r}){var s,l;const{basePath:c}=Object(Bt.c)();let u=0;a&&a.length>0&&a.forEach((e=>{var t,a;u+=null!==(t=null===(a=e.monitor.duration)||void 0===a?void 0:a.us)&&void 0!==t?t:0}));const m=null==a?void 0:a[0];return n.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiTitle,{size:"xs"},n.createElement("h3",null,null!=t?t:$t))),n.createElement(d.EuiFlexItem,{grow:!0},r?n.createElement(d.EuiFlexGroup,{alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiBadge,{color:(null==m||null===(s=m.summary)||void 0===s?void 0:s.down)>0?"danger":"success"},(null==m||null===(l=m.summary)||void 0===l?void 0:l.down)>0?qt:Gt)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.timeTaken",{defaultMessage:"Took {timeTaken}",values:{timeTaken:vn(u)}})))):n.createElement(d.EuiFlexGroup,{alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiBadge,{style:{width:100},color:i?"primary":"warning"},i?Wt:Ht)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiLoadingSpinner,null)))),e&&n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiLink,{href:`${c}/app/uptime/journey/${e}/steps`,target:"_blank"},Vt)))}const Ht=o.i18n.translate("xpack.synthetics.monitorManagement.pending",{defaultMessage:"PENDING"}),$t=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),Gt=o.i18n.translate("xpack.synthetics.monitorManagement.completed",{defaultMessage:"COMPLETED"}),qt=o.i18n.translate("xpack.synthetics.monitorManagement.failed",{defaultMessage:"FAILED"}),Wt=o.i18n.translate("xpack.synthetics.monitorManagement.inProgress",{defaultMessage:"IN PROGRESS"}),Vt=o.i18n.translate("xpack.synthetics.monitorManagement.viewTestRunDetails",{defaultMessage:"View test result details"}),Kt=({monitorId:e,testRunId:t,duration:a,schedule:r,expectPings:s,isUpdating:o,updateMonitorStatus:l,stopProgressTrack:c})=>{const{summaryDocs:u,data:m,lastUpdated:p}=_t({configId:e,testRunId:t,expectSummaryDocs:s}),g=Object(n.useRef)(Date.now()),[h,f]=Object(n.useState)(Date.now());Object(n.useEffect)((()=>{null!=u&&u.length&&l()}),[l,u]),Object(n.useEffect)((()=>{f(Date.now()-g.current);const e=Date.now()-p,t=a/1e3;e>=Nt(r)-t&&c()}),[m,p,a,r,c]);const b=1e3*h;return o||b>a?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Wt),i.a.createElement(d.EuiProgress,{size:"xs"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Wt),i.a.createElement(d.EuiProgress,{value:b,max:a,size:"xs"}))},Jt=o.i18n.translate("xpack.synthetics.stepList.stepName",{defaultMessage:"Step name"}),Yt=o.i18n.translate("xpack.synthetics.stepList.collapseRow",{defaultMessage:"Collapse"}),Zt=o.i18n.translate("xpack.synthetics.stepList.expandRow",{defaultMessage:"Expand"});function Xt(e,t){switch(t){case"succeeded":return e.success;case"failed":return e.dangerBehindText;default:return"default"}}const Qt=({status:e,stepNo:t,isMobile:a})=>{const r=Object(n.useContext)(f.g);return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},!a&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{className:"eui-textNoWrap"},i.a.createElement("strong",null,t,"."))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiBadge,{color:Xt(r.colors,e)},function(e){switch(e){case"succeeded":return o.i18n.translate("xpack.synthetics.synthetics.statusBadge.succeededMessage",{defaultMessage:"Succeeded"});case"failed":return o.i18n.translate("xpack.synthetics.synthetics.statusBadge.failedMessage",{defaultMessage:"Failed"});case"skipped":return o.i18n.translate("xpack.synthetics.synthetics.statusBadge.skippedMessage",{defaultMessage:"Skipped"});default:return null}}(e))))},ea=({to:e,children:t})=>{const a=Object(u.useHistory)(),n={href:a.createHref({pathname:e}),onClick:t=>{(e=>e.defaultPrevented||(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(e)||!(e=>0===e.button)(e)||(e=>{const t=e.target.getAttribute("target");return!!t&&"_self"!==t})(e))(t)||(t.preventDefault(),a.push(e))}};return i.a.cloneElement(t,n)},ta=({to:e,...t})=>i.a.createElement(ea,{to:e},i.a.createElement(d.EuiLink,t)),aa=({to:e,...t})=>i.a.createElement(ea,{to:e},i.a.createElement(d.EuiButtonEmpty,t)),na=({children:e,checkGroupId:t,stepIndex:a})=>{const n=`/journey/${t}/step/${a}`;return i.a.createElement(aa,{"data-test-subj":"step-detail-link",to:n},e)},ia=o.i18n.translate("xpack.synthetics.pingList.synthetics.performanceBreakDown",{defaultMessage:"View performance breakdown"}),ra=({step:e,compactView:t,allStepsLoaded:a})=>{var n,r,s,o,l;return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Ct,{checkGroup:e.monitor.check_group,initialStepNo:null===(n=e.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.index,stepStatus:null===(s=e.synthetics.payload)||void 0===s?void 0:s.status,allStepsLoaded:a})),i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:80}},i.a.createElement(d.EuiText,{size:t?"s":"m"},null===(o=e.synthetics)||void 0===o||null===(l=o.step)||void 0===l?void 0:l.name)))},sa=({buttonContent:e,children:t,id:a,language:n,overflowHeight:r,initialIsOpen:s=!1})=>t&&a?i.a.createElement(d.EuiAccordion,{id:a,buttonContent:e,initialIsOpen:s},i.a.createElement(d.EuiCodeBlock,{isCopyable:!0,overflowHeight:r,language:n},t)):null,oa=Ee()(d.EuiImage).withConfig({displayName:"StepImage",componentId:"sc-1k8ildl-0"})(["&&&{figcaption{display:none;}objectFit:'cover',objectPosition:'center top',}"]),la=({stepIndex:e,stepName:t,url:a})=>a?i.a.createElement(oa,{allowFullScreen:!0,alt:t?o.i18n.translate("xpack.synthetics.synthetics.screenshotDisplay.altText",{defaultMessage:'Screenshot for step with name "{stepName}"',values:{stepName:t}}):o.i18n.translate("xpack.synthetics.synthetics.screenshotDisplay.altTextWithoutName",{defaultMessage:"Screenshot"}),caption:`Step:${e} ${t}`,hasShadow:!0,url:a}):i.a.createElement(d.EuiLoadingSpinner,{size:"l"}),ca=({stepIndex:e,stepName:t,url:a,imgRef:n,setUrl:r})=>(Object(I.d)(n,r,a),a?i.a.createElement(la,{stepIndex:e,stepName:t,url:a}):i.a.createElement(d.EuiLoadingSpinner,{size:"l"})),ua=({checkGroup:e,isFullScreenshot:t,isScreenshotRef:a,stepIndex:r,stepName:s,lazyLoad:o=!0})=>{var l,c;const u=Object(n.useRef)(null),{colors:{lightestShade:m}}=Object(n.useContext)(f.g),{basePath:p}=Object(n.useContext)(f.c),g=Ze()(u,{root:null,rootMargin:"0px",threshold:1}),{lastRefresh:b}=Object(n.useContext)(f.a),[E,y]=Object(n.useState)(!1),x=null==g?void 0:g.isIntersecting;Object(n.useEffect)((()=>{!1===E&&!0===x&&y(!0)}),[E,x,y]);const S=p+`/internal/uptime/journey/screenshot/${e}/${r}`,[k,M]=Object(n.useState)(t?S:void 0),{data:w}=Object(h.useFetcher)((()=>{if(a)return Object(ve.e)(S)}),[p,e,S,r,a,b]),O=Object(n.useMemo)((()=>{if(Object(Xe.A)(w)){const{height:e,width:t}=w.ref.screenshotRef.screenshot_ref;return{height:e,width:t}}}),[w]),j=E||!o;return i.a.createElement("div",{ref:u,style:{backgroundColor:m,maxWidth:Math.min(640,null!==(l=null==O?void 0:O.width)&&void 0!==l?l:Number.MAX_VALUE),maxHeight:null!==(c=null==O?void 0:O.height)&&void 0!==c?c:void 0}},j&&t&&i.a.createElement(la,{stepName:s,stepIndex:r,url:k}),j&&a&&Object(Xe.A)(w)&&i.a.createElement(ca,{imgRef:w,stepName:s,stepIndex:r,setUrl:M,url:k}),!t&&!a&&i.a.createElement(d.EuiFlexGroup,{alignItems:"center",direction:"column",style:{paddingTop:"32px"},"data-test-subj":"stepScreenshotImageUnavailable"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiIcon,{color:"subdued",size:"xxl",type:"image"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.noImageMessage",defaultMessage:"No image available"}))))))},da=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.paddingSizes.xs};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
`,ma=({lastSuccessfulCheck:e})=>{var t;return i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.successfulLink",defaultMessage:"Screenshot from {link}",values:{link:i.a.createElement(ta,{to:`/journey/${null==e||null===(t=e.monitor)||void 0===t?void 0:t.check_group}/steps`,className:"eui-displayInlineBlock"},i.a.createElement(da,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.success",defaultMessage:"last successful check"})))}}))},pa=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.paddingSizes.xs};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
  color: ${({theme:e})=>e.eui.euiColorDarkShade};
`,ga=({step:e})=>{var t,a,n,r,s,o,l,c,u,m,p,g,f,b,E,y,x,S;const k="succeeded"===(null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.status),{data:M}=Object(h.useFetcher)((()=>{var t,a,n,i;if(!k)return Object(ve.c)({timestamp:e["@timestamp"],monitorId:e.monitor.id,stepIndex:null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,location:null===(n=e.observer)||void 0===n||null===(i=n.geo)||void 0===i?void 0:i.name})}),[e._id,e["@timestamp"]]),w=M;return i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(pa,null,"succeeded"!==(null===(n=e.synthetics)||void 0===n||null===(r=n.payload)||void 0===r?void 0:r.status)?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.notSucceeded",defaultMessage:"Screenshot for {status} check",values:{status:null===(s=e.synthetics)||void 0===s||null===(o=s.payload)||void 0===o?void 0:o.status}}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.not",defaultMessage:"Screenshot"})),i.a.createElement(ua,{checkGroup:e.monitor.check_group,isScreenshotRef:Boolean(null===(l=e.synthetics)||void 0===l?void 0:l.isScreenshotRef),isFullScreenshot:Boolean(null===(c=e.synthetics)||void 0===c?void 0:c.isFullScreenshot),stepIndex:null===(u=e.synthetics)||void 0===u||null===(m=u.step)||void 0===m?void 0:m.index,stepName:null===(p=e.synthetics)||void 0===p||null===(g=p.step)||void 0===g?void 0:g.name,lazyLoad:!1}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(pa,null,Za(He()(e["@timestamp"])))),!k&&(null==w?void 0:w.monitor)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(ma,{lastSuccessfulCheck:w}),i.a.createElement(ua,{checkGroup:w.monitor.check_group,isScreenshotRef:Boolean(null===(f=w.synthetics)||void 0===f?void 0:f.isScreenshotRef),isFullScreenshot:Boolean(null===(b=w.synthetics)||void 0===b?void 0:b.isFullScreenshot),stepIndex:null===(E=e.synthetics)||void 0===E||null===(y=E.step)||void 0===y?void 0:y.index,stepName:null===(x=e.synthetics)||void 0===x||null===(S=x.step)||void 0===S?void 0:S.name,lazyLoad:!1}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(pa,null,Za(He()(w.timestamp)))))},ha=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.paddingSizes.xs};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
  color: ${({theme:e})=>e.eui.euiColorDarkShade};
`,fa=g.euiStyled.div`
  font-weight: bold;
  font-size:${({theme:e})=>e.eui.euiFontSizeM};
  margin-bottom: ${e=>e.theme.eui.paddingSizes.m};
`,ba=g.euiStyled.div`
  padding: '8px';
  max-width: 1000px;
  width: 100%;
`,Ea=({loading:e,step:t,index:a,browserConsoles:n})=>{var r,s,l,c,u,m,p,g,h,f,b,E,y,v,x,S;const k="succeeded"===(null===(r=t.synthetics)||void 0===r||null===(s=r.payload)||void 0===s?void 0:s.status);return i.a.createElement(ba,null,e?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),(null===(l=t.synthetics)||void 0===l||null===(c=l.error)||void 0===c?void 0:c.message)&&i.a.createElement(d.EuiText,null,i.a.createElement(ha,null,o.i18n.translate("xpack.synthetics.synthetics.executedStep.errorHeading",{defaultMessage:"Error message"})),i.a.createElement(fa,null,null===(u=t.synthetics)||void 0===u||null===(m=u.error)||void 0===m?void 0:m.message)),i.a.createElement(d.EuiSpacer,null),i.a.createElement(sa,{id:(null===(p=t.synthetics)||void 0===p||null===(g=p.step)||void 0===g?void 0:g.name)+String(a),buttonContent:o.i18n.translate("xpack.synthetics.synthetics.executedStep.scriptHeading.label",{defaultMessage:"Script executed at this step"}),overflowHeight:360,language:"javascript",initialIsOpen:!k},null===(h=t.synthetics)||void 0===h||null===(f=h.payload)||void 0===f?void 0:f.source),i.a.createElement(d.EuiSpacer,null),i.a.createElement(sa,{id:(null===(b=t.synthetics)||void 0===b||null===(E=b.step)||void 0===E?void 0:E.name)+String(a),buttonContent:o.i18n.translate("xpack.synthetics.synthetics.executedStep.consoleOutput.label",{defaultMessage:"Console output"}),overflowHeight:360,language:"javascript",initialIsOpen:!k},null==n?void 0:n.join("\n")),i.a.createElement(d.EuiSpacer,null),i.a.createElement(ga,{step:t}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(sa,{id:`${null===(y=t.synthetics)||void 0===y||null===(v=y.step)||void 0===v?void 0:v.name}_stack`,buttonContent:o.i18n.translate("xpack.synthetics.synthetics.executedStep.stackTrace",{defaultMessage:"Stack trace"}),language:"html",overflowHeight:360,initialIsOpen:!k},null===(x=t.synthetics)||void 0===x||null===(S=x.error)||void 0===S?void 0:S.stack)))};function ya(e){return t=>{var a,n;return(null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)===e}}var va=a(105);const xa=e=>{const t=e["@timestamp"],{lt:a,gte:n}=e.monitor.timespan,i=48*He()(a).diff(He()(n),"millisecond");return{to:t,from:He()(t).subtract(i,"millisecond").toISOString()}};function Sa({title:e,field:t,step:a}){var n,r,s,o,l,u;const{observability:m}=Object(va.c)(),g=Object(c.useSelector)(A.A),f=m.ExploratoryViewEmbeddable,b=null===(n=Object(p.useKibana)().services.http)||void 0===n||null===(r=n.basePath)||void 0===r?void 0:r.get(),E=[{name:`${e}(${null===(s=a.synthetics.step)||void 0===s?void 0:s.name})`,selectedMetricField:t,time:xa(a),seriesType:"area",dataType:"synthetics",reportDefinitions:{"monitor.name":[a.monitor.name],"synthetics.step.name.keyword":[null===(o=a.synthetics.step)||void 0===o?void 0:o.name]},operationType:"last_value"}],y=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:E},b);return i.a.createElement(Ma,null,i.a.createElement(f,{title:e,appendTitle:i.a.createElement(d.EuiButton,{iconType:"visArea",href:y,target:"_blank",size:"s"},ka),reportType:"kpi-over-time",attributes:E,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},legendIsVisible:!1,dataTypesIndexPatterns:null!==(l=g.settings)&&void 0!==l&&l.heartbeatIndices?{synthetics:null===(u=g.settings)||void 0===u?void 0:u.heartbeatIndices}:void 0,withActions:!1}))}const ka=o.i18n.translate("xpack.synthetics.synthetics.markers.explore",{defaultMessage:"Explore"}),Ma=g.euiStyled.div`
  height: 200px;
  width: 400px;
  &&& {
    .expExpressionRenderer__expression {
      padding-bottom: 0 !important;
    }
  }
`;function wa(e,t){return(e/1e6).toFixed(t||0)}function Oa(e){return(e/1e3).toFixed(0)}const ja=({step:e,durationPopoverOpenIndex:t,setDurationPopoverOpenIndex:a,showStepDurationTrend:i=!0,compactView:r=!1})=>{var s,l,c;const u=Object(n.useMemo)((()=>{var t;return o.i18n.translate("xpack.synthetics.synthetics.step.duration",{defaultMessage:"{value} seconds",values:{value:wa(null===(t=e.synthetics.step)||void 0===t?void 0:t.duration.us,1)}})}),[null===(s=e.synthetics.step)||void 0===s?void 0:s.duration.us]),m=Object(n.useMemo)((()=>n.createElement(Sa,{step:e,field:"synthetics.step.duration.us",title:Ia})),[e]);if("skipped"===(null===(l=e.synthetics.step)||void 0===l?void 0:l.status))return n.createElement("span",null,"--");if(!i)return n.createElement(d.EuiText,null,u);const p=n.createElement(d.EuiButtonEmpty,{onMouseEnter:()=>{var t,n;return a(null!==(t=null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==t?t:null)},iconType:r?void 0:"visArea"},u);return n.createElement(d.EuiPopover,{onClick:e=>e.stopPropagation(),isOpen:t===(null===(c=e.synthetics.step)||void 0===c?void 0:c.index),button:p,closePopover:()=>a(null),zIndex:100,ownFocus:!1},m)},Ia=o.i18n.translate("xpack.synthetics.synthetics.step.durationTrend",{defaultMessage:"Step duration trend"});function Ca(e){var t;return"step/end"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)}function Ta(e,t){var a,n,i,r;return"succeeded"===(null===(a=t.synthetics)||void 0===a||null===(n=a.payload)||void 0===n?void 0:n.status)?(e.succeeded+=1,e):"skipped"===(null===(i=t.synthetics)||void 0===i||null===(r=i.payload)||void 0===r?void 0:r.status)?(e.skipped+=1,e):(e.failed+=1,e)}Ee.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-1mvrg6o-0"})(["margin-right:16px;"]);const Fa=({data:e,error:t,loading:a,allStepsLoaded:r,showStepDurationTrend:s=!0,compactView:l=!1})=>{const c=e.filter(Ca),{expandedRows:m,toggleExpand:p}=(({loading:e,steps:t,allSteps:a})=>{const[r,s]=Object(n.useState)({}),{checkGroupId:o}=Object(u.useParams)(),l=Object(n.useCallback)((e=>a.filter((t=>{var a,n,i;return"journey/browserconsole"===(null===(a=t.synthetics)||void 0===a?void 0:a.type)&&(null===(n=t.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.index)===e})).map((e=>{var t,a;return null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.text}))),[a]);return Object(n.useEffect)((()=>{const a={};for(const s of Object.keys(r).map((e=>Number(e)))){const r=t.find(ya(s+1));var n,o;r&&(a[s]=i.a.createElement(Ea,{step:r,browserConsoles:l(s),index:null===(n=r.synthetics)||void 0===n||null===(o=n.step)||void 0===o?void 0:o.index,loading:e}))}s(a)}),[o,e]),{expandedRows:r,toggleExpand:({journeyStep:t})=>{var a,n;const o=(null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)-1;var c,u;r[o]?(delete r[o],s({...r})):s({...r,[o]:i.a.createElement(Ea,{step:t,browserConsoles:l(o+1),index:null===(c=t.synthetics)||void 0===c||null===(u=c.step)||void 0===u?void 0:u.index,loading:e})})}}})({steps:c,allSteps:e,loading:a}),[g,h]=Object(n.useState)(null),{basePath:f}=Object(Bt.c)(),b=[{field:"synthetics.payload.status",name:$e,render:(e,t)=>{var a,n;return i.a.createElement(Qt,{status:e,stepNo:null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index})},mobileOptions:{render:e=>{var t,a,n,r;return i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Qt,{isMobile:!0,status:null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.status,stepNo:null===(n=e.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.index}))},width:"20%",header:$e,enlarge:!1}},{align:"left",field:"timestamp",name:Jt,render:(e,t)=>i.a.createElement(ra,{step:t,compactView:l,allStepsLoaded:r}),mobileOptions:{render:e=>{var t,a,n,r;return i.a.createElement(d.EuiText,null,i.a.createElement("strong",null,null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,". ",null===(n=e.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.name))},header:"Step",enlarge:!0}},{name:"Step duration",render:e=>i.a.createElement(ja,{step:e,durationPopoverOpenIndex:g,setDurationPopoverOpenIndex:h,showStepDurationTrend:s,compactView:l}),mobileOptions:{header:o.i18n.translate("xpack.synthetics.pingList.stepDurationHeader",{defaultMessage:"Step duration"}),show:!0}},{align:"left",field:"timestamp",name:"",mobileOptions:{show:!1},render:(e,t)=>{var a,n,r,s;return l?i.a.createElement(d.EuiButtonIcon,{href:`${f}/app/uptime/journey/${t.monitor.check_group}/step/${null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index}`,target:"_blank",iconType:"visArea"}):i.a.createElement(na,{checkGroupId:t.monitor.check_group,stepIndex:null===(r=t.synthetics)||void 0===r||null===(s=r.step)||void 0===s?void 0:s.index},ia)}},{width:"40px",align:d.RIGHT_ALIGNMENT,isExpander:!0,render:e=>i.a.createElement(d.EuiButtonIcon,{"data-test-subj":"uptimeStepListExpandBtn",onClick:()=>p({journeyStep:e}),"aria-label":m[e._id]?Yt:Zt,iconType:m[e._id]?"arrowUp":"arrowDown"})}];return i.a.createElement(i.a.Fragment,null,!l&&i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,function(e,t){if(t)return o.i18n.translate("xpack.synthetics.synthetics.journey.loadingSteps",{defaultMessage:"Loading steps ..."});const a=e.succeeded+e.failed+e.skipped;return e.failed+e.skipped===a?o.i18n.translate("xpack.synthetics.synthetics.journey.allFailedMessage",{defaultMessage:"{total} Steps - all failed or skipped",values:{total:a}}):e.succeeded===a?o.i18n.translate("xpack.synthetics.synthetics.journey.allSucceededMessage",{defaultMessage:"{total} Steps - all succeeded",values:{total:a}}):o.i18n.translate("xpack.synthetics.synthetics.journey.partialSuccessMessage",{defaultMessage:"{total} Steps - {succeeded} succeeded",values:{succeeded:e.succeeded,total:a}})}(c.reduce(Ta,{failed:0,skipped:0,succeeded:0}),a))),i.a.createElement(d.EuiBasicTable,{compressed:l,loading:a,columns:b,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:c,itemIdToExpandedRowMap:m,noItemsMessage:a?o.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):o.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",rowProps:e=>{const{monitor:t}=e;return{"data-test-subj":`row-${t.check_group}`,onClick:t=>{const a=t.target;"IMG"===a.tagName||"BUTTON"===a.tagName||"CANVAS"===a.tagName||a.classList.contains("euiButtonEmpty__text")||a.classList.contains("euiIcon")||p({journeyStep:e})}}}}))},La=({configId:e,testRunId:t,skipDetails:a=!1,refresh:i=!0,expectSummaryDocs:r})=>{const{refreshTimer:s,lastRefresh:o}=zt(5e3,i),[c,u]=Object(n.useState)((()=>new Array(r).fill({checkGroupId:"",journeyStarted:!1,steps:[],stepsLoading:!1,completedSteps:0}).map(((e,t)=>({...e,checkGroupId:`placeholder-check-group-${t}`}))))),d=Object(n.useRef)({checksum:"",time:Date.now()}),{data:m,loading:p}=(({configId:e,testRunId:t,lastRefresh:a})=>Object(h.useEsSearch)(Object(h.createEsParams)({index:l.A,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{term:{config_id:e}},{terms:{"synthetics.type":["heartbeat/summary","journey/start"]}},...t?[{term:{test_run_id:t}}]:[]]}}},size:1e3}),[e,a],{name:"TestRunData"}))({configId:e,testRunId:t,lastRefresh:o});Object(n.useEffect)((()=>{const e=null==m?void 0:m.hits.hits;if(e&&e.length>0){const t=(null!=e?e:[]).map((({_source:e})=>e)),a=t.filter((e=>{var t,a;return"journey/start"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)||"heartbeat/summary"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)})).reduce(((e,t)=>({...e,[t.monitor.check_group]:{checkGroupId:t.monitor.check_group,journeyStarted:!0,journeyDoc:t,summaryDoc:null,steps:[],stepsLoading:!1,completedSteps:0}})),{});t.forEach((e=>{var t;"heartbeat/summary"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)&&(a[e.monitor.check_group].summaryDoc=e)}));const n=Object.values(a);n.filter((e=>!!e.summaryDoc)).length>=r&&clearInterval(s),y(n)}}),[r,m,s]);const g=c.map((({checkGroupId:e})=>e)),f=g.reduce(((e,t)=>e+t),""),{loading:b}=Object(h.useFetcher)((()=>g.length&&!a?(u((e=>e.map((e=>({...e,stepsLoading:!0}))))),Promise.all(g.map((e=>Object(ve.a)({checkGroup:e}).then((e=>(E(e.checkGroup,{steps:e.steps,completedSteps:e.steps.filter(Ca).length}),e))).finally((()=>{E(e,{stepsLoading:!1})})))))):Promise.resolve(null)),[f,u,o]);Object(n.useEffect)((()=>{const e=function(e){return e.reduce(((e,t)=>{var a,n,i,r,s;return null!==(a=null!==(n=e+(null==t||null===(i=t.journeyDoc)||void 0===i?void 0:i._id))&&void 0!==n?n:""+(null==t||null===(r=t.summaryDoc)||void 0===r?void 0:r._id))&&void 0!==a?a:""+(null!==(s=null==t?void 0:t.steps)&&void 0!==s?s:[]).reduce(((e,{_id:t})=>e+t),"")}),"")}(c);f!==d.current.checksum&&(d.current.checksum=e,d.current.time=Date.now())}),[c,f]);const E=(e,t)=>{u((a=>a.map((a=>e!==a.checkGroupId?a:Aa(a,t)))))},y=e=>{const t=c.filter((e=>e.checkGroupId.startsWith("placeholder-check-group"))),a=e.length<r?[...e,...t.slice(-1*(r-e.length))]:e;u((e=>{const t=a.map((({checkGroupId:e})=>e)),n=a.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{}),i=e.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{});return t.map((e=>Aa(i[e],n[e])))}))};return{data:m,summariesLoading:p,stepLoadingInProgress:b,expectedSummariesLoaded:c.filter((({summaryDoc:e})=>!!e)).length>=r,checkGroupResults:c,lastUpdated:d.current.time}};function Aa(e,t){var a,n,i,r,s;const o=t.completedSteps?Math.max(null!==(a=null==e?void 0:e.completedSteps)&&void 0!==a?a:0,null!==(n=t.completedSteps)&&void 0!==n?n:0):null!==(i=null==e?void 0:e.completedSteps)&&void 0!==i?i:0;let l=null!==(r=t.steps)&&void 0!==r?r:[];return 0===l.length&&(null!==(s=null==e?void 0:e.steps)&&void 0!==s?s:[]).length>0&&(l=e.steps),{...null!=e?e:{},...t,steps:l,completedSteps:o}}const Pa=({configId:e,testRunId:t,duration:a,schedule:r,isUpdating:s,expectPings:o,updateMonitorStatus:l,stopProgressTrack:c})=>{const{data:u,checkGroupResults:m,lastUpdated:p,expectedSummariesLoaded:g}=La({configId:e,testRunId:t,refresh:!1,skipDetails:!0,expectSummaryDocs:o}),h=m.some((e=>e.journeyStarted)),[f,b]=Object(n.useState)(0),E=Object(n.useRef)(Date.now());return Object(n.useEffect)((()=>{g&&l()}),[l,g]),Object(n.useEffect)((()=>{b(1e3*(Date.now()-E.current));const e=Date.now()-p,t=a/1e3;e>=Nt(r)-t&&c()}),[u,m,p,a,r,c]),h&&(s||f>a)?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Wt),i.a.createElement(d.EuiProgress,{size:"xs"})):i.a.createElement(i.a.Fragment,null,h?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Wt),i.a.createElement(d.EuiProgress,{value:f,max:a,size:"xs"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ht),i.a.createElement(d.EuiProgress,{size:"xs"})))};var Da=a(91);const Ra=({monitorId:e,configId:t,testRunId:a,duration:r,monitorType:s,schedule:o,expectPings:l,stopProgressTrack:u})=>{const{updateMonitorStatus:d,isUpdating:m}=(({testRunId:e,monitorId:t})=>{const a=Object(c.useDispatch)(),i=Object(c.useSelector)(Da.a);return{updateMonitorStatus:Object(n.useCallback)((()=>{e&&(a(b.L.get({dateRangeStart:"now-10m",dateRangeEnd:"now",filters:JSON.stringify({bool:{should:[{match_phrase:{test_run_id:e}}],minimum_should_match:1}}),pageSize:1})),a(Object(b.U)(t)))}),[a,t,e]),isUpdating:i.includes(t)}})({testRunId:a,monitorId:e}),p=Object(c.useSelector)(Da.c);return Object(n.useEffect)((()=>{p.includes(e)&&u()}),[m,e,p,u]),"browser"===s?i.a.createElement(Pa,{configId:t,testRunId:a,duration:r,schedule:o,expectPings:l,isUpdating:m,updateMonitorStatus:d,stopProgressTrack:u}):i.a.createElement(Kt,{monitorId:e,testRunId:a,duration:r,schedule:o,expectPings:l,isUpdating:m,updateMonitorStatus:d,stopProgressTrack:u})};var Na=a(128);const za=({configId:e,checkGroup:t,timestamp:a,title:n,summaryMessage:r,hideTitle:s=!1})=>{const o=[{field:"@timestamp",name:_a,sortable:!0,render:e=>Object(d.formatDate)(e,"dateTime")},{field:"synthetics.payload.message",name:"Message",render:e=>i.a.createElement(d.EuiHighlight,{search:e.includes("SyntaxError:")?"SyntaxError:":"ReferenceError:"},e)}],{items:l,loading:u}=(({configId:e,checkGroup:t})=>{var a;const{settings:n}=Object(c.useSelector)(A.A),{data:i,loading:r}=Object(h.useEsSearch)(Object(h.createEsParams)({index:e||t?null==n?void 0:n.heartbeatIndices:"",body:{size:1e3,query:{bool:{filter:[{term:{"synthetics.type":"stderr"}},...e?[{term:{config_id:e}}]:[],...t?[{term:{"monitor.check_group":t}}]:[]]}}}}),[null==n?void 0:n.heartbeatIndices],{name:"getStdErrLogs"});return{items:null!==(a=null==i?void 0:i.hits.hits.map((e=>({...e._source,id:e._id}))))&&void 0!==a?a:[],loading:r}})({configId:e,checkGroup:t}),{discover:m,observability:g}=Object(p.useKibana)().services,{settings:f}=Object(c.useSelector)(A.A),{data:b}=Object(h.useFetcher)((async()=>{if(null!=f&&f.heartbeatIndices){var e;const n=await g.getAppDataView("synthetics",null==f?void 0:f.heartbeatIndices);return null===(e=m.locator)||void 0===e?void 0:e.getUrl({query:{language:"kuery",query:`monitor.check_group: ${t}`},indexPatternId:null==n?void 0:n.id,columns:["synthetics.payload.message","error.message"],timeRange:a?{from:He()(a).subtract(10,"minutes").toISOString(),to:He()(a).add(5,"minutes").toISOString()}:void 0})}return""}),[t,a]);return i.a.createElement(i.a.Fragment,null,!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,null!=n?n:Ha))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiLink,null,i.a.createElement(d.EuiButtonEmpty,{href:b,iconType:"discoverApp",isDisabled:!b},Ua)))),i.a.createElement(d.EuiCallOut,{title:Ba,color:"danger",iconType:"alert"},i.a.createElement("p",null,r))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiInMemoryTable,{items:l,columns:o,tableLayout:"auto",loading:u,search:{box:{incremental:!0}},itemId:"id",executeQueryOptions:{defaultFields:["@timestamp","synthetics.payload.message"]}}))},_a=o.i18n.translate("xpack.synthetics.monitorList.timestamp",{defaultMessage:"Timestamp"}),Ba=o.i18n.translate("xpack.synthetics.monitorList.errorSummary",{defaultMessage:"Error summary"}),Ua=o.i18n.translate("xpack.synthetics.monitorList.viewInDiscover",{defaultMessage:"View in discover"}),Ha=o.i18n.translate("xpack.synthetics.monitorList.testRunLogs",{defaultMessage:"Test run logs"}),$a=({checkGroup:e,button:t,isOpen:a,setIsOpen:n,summaryMessage:r})=>i.a.createElement(d.EuiPopover,{isOpen:a,closePopover:()=>n(!1),button:t},i.a.createElement(Ga,null,i.a.createElement(za,{checkGroup:e,title:qa,summaryMessage:r}))),Ga=Ee.a.div.withConfig({displayName:"Container",componentId:"sc-1truv2e-0"})(["width:650px;height:400px;overflow:scroll;"]),qa=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.logs",{defaultMessage:"Error logs"}),Wa=({errorSummary:e})=>{var t,a,r,s;const[o,l]=Object(n.useState)(!1),c="browser"===e.monitor.type?Va(null===(t=e.error)||void 0===t?void 0:t.message):null===(a=e.error)||void 0===a?void 0:a.message;return i.a.createElement($a,{isOpen:o,setIsOpen:l,checkGroup:null===(r=e.monitor)||void 0===r?void 0:r.check_group,summaryMessage:null===(s=e.error)||void 0===s?void 0:s.message,button:i.a.createElement(d.EuiToolTip,{content:c},i.a.createElement(d.EuiButtonIcon,{"aria-label":c,iconType:"alert",onClick:()=>l(!0),color:"danger"}))})},Va=e=>o.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.message",{defaultMessage:"{message}. Click for more details.",values:{message:e}}),Ka=(o.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.logs",{defaultMessage:"Error logs"}),({status:e,checkGroup:t,summaryError:a,monitorType:r})=>{const{colors:{dangerBehindText:s}}=Object(n.useContext)(f.g),[o,c]=Object(n.useState)(!1);if(e===l.y.UP)return i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:"success"},Ya(e));const u="browser"!==r?null==a?void 0:a.message:Va(null==a?void 0:a.message),m=i.a.createElement(d.EuiToolTip,{content:u},i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:s,onClick:()=>c(!0),onClickAriaLabel:u},Ya(e)));return"browser"!==r?m:i.a.createElement($a,{isOpen:o,setIsOpen:c,checkGroup:t,button:m,summaryMessage:null==a?void 0:a.message})}),Ja=Ee()(d.EuiFlexGroup).withConfig({displayName:"StatusColumnFlexG",componentId:"sc-1evxa0e-0"})(["@media (max-width:574px){min-width:230px;}"]),Ya=e=>{switch(e){case l.y.UP:return we;case l.y.DOWN:return Oe;default:return null}},Za=(e,t=!1)=>{if(t){var a;const t=null!==(a=He.a.locale())&&void 0!==a?a:"en";let n;return He.a.locale(l.x)===l.x||He.a.defineLocale(l.x,l.w),n="string"==typeof e?Rt(e).fromNow():e.fromNow(),He.a.locale(t),n}return He()().diff(e,"d")>=1?e.format("ll LTS"):e.format("LTS")},Xa=({monitorType:e,configId:t,monitorId:a,status:r,duration:s,checkGroup:u,summaryError:m,summaryPings:p=[],timestamp:g})=>{var h,f,E,y;const v=Rt(g),{statusMessage:x,locTooltip:S}=((e,t)=>{const a=new Set,n=new Set;e.forEach((e=>{var t,i,r;const s=null!==(t=null==e||null===(i=e.observer)||void 0===i||null===(r=i.geo)||void 0===r?void 0:r.name)&&void 0!==t?t:l.C;e.monitor.status===l.y.UP?a.add(s):e.monitor.status===l.y.DOWN&&n.add(s)}));const r=a.size>0?o.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.tooltip.up",{defaultMessage:"Up in {locs}",values:{locs:[...a].join(", ")}}):"",s=n.size>0?o.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.tooltip.down",{defaultMessage:"Down in {locs}",values:{locs:[...n].join(", ")}}):"",c=new Set([...a].filter((e=>!n.has(e)))),u=c.size+n.size;let m="";return m=t===l.y.DOWN?`${n.size}/${u}`:`${c.size}/${u}`,u>1?{statusMessage:o.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.multiple",{defaultMessage:"in {noLoc} locations",values:{noLoc:m}}),locTooltip:i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,r),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,s))}:{statusMessage:o.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage",{defaultMessage:"in {noLoc} location",values:{noLoc:m}}),locTooltip:r+s}})(p,r),k=Object(c.useDispatch)(),M=Object(n.useCallback)((()=>{t&&k(Object(b.c)(t))}),[t,k]),w=Object(c.useSelector)(Da.c),O=Object(c.useSelector)(Object(Na.b)(t)),{expectPings:j,errorMessages:I,hasBlockingError:C}=Ft({testRunId:null!==(h=null==O?void 0:O.monitorId)&&void 0!==h?h:"",serviceError:null!==(f=null==O?void 0:O.fetchError)&&void 0!==f?f:null,locations:null!==(E=null==O?void 0:O.locations)&&void 0!==E?E:[],errors:null!==(y=null==O?void 0:O.errors)&&void 0!==y?y:[]});return Object(n.useEffect)((()=>{I.forEach((({name:e,message:t,title:a})=>{Tt.a.toasts.addError({name:e,message:t},{title:a})})),C&&M()}),[I,C,M]),i.a.createElement("div",null,i.a.createElement(Ja,{alignItems:"center",gutterSize:"xs",wrap:!1,responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{flexBasis:40}},O&&t&&null!=O&&O.testRunId?i.a.createElement(Ra,{monitorId:a,configId:t,testRunId:null==O?void 0:O.testRunId,monitorType:e,duration:null!=s?s:0,schedule:O.schedule,expectPings:j,stopProgressTrack:M}):i.a.createElement(Ka,{status:r,checkGroup:u,summaryError:m,monitorType:e}))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement(d.EuiToolTip,{content:i.a.createElement(d.EuiText,{color:"ghost",size:"xs"},S)},i.a.createElement(en,{size:"xs",color:"subdued",className:"eui-textNoWrap"},x,",")),i.a.createElement(d.EuiToolTip,{content:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,{color:"text",size:"xs"},i.a.createElement("strong",null," ",v.fromNow())),i.a.createElement(d.EuiHorizontalRule,{margin:"xs"}),i.a.createElement(d.EuiText,{color:"ghost",size:"xs"},v.toLocaleString()))},a&&null!=w&&w.includes(a)?i.a.createElement(d.EuiHighlight,{highlightAll:!0,search:Qa(v)},Qa(v)):i.a.createElement(d.EuiText,{size:"xs",color:"subdued",className:"eui-textNoWrap"},Qa(v)))))},Qa=e=>o.i18n.translate("xpack.synthetics.monitorList.statusColumn.checkedTimestamp",{defaultMessage:"Checked {timestamp}",values:{timestamp:Za(e)}}),en=Object(g.euiStyled)(d.EuiText)`
  padding-right: ${e=>e.theme.eui.paddingSizes.xs};
`,tn=Ee.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-8btbs3-0"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;"]),an=({errorType:e,ping:t})=>{var a;return e?i.a.createElement(tn,null,e,":",null===(a=t.error)||void 0===a?void 0:a.message):i.a.createElement(i.a.Fragment,null,"--")},nn=({checkGroup:e,failedSteps:t})=>{var a,n,r,s,o;const l=null==t||null===(a=t.steps)||void 0===a?void 0:a.find((t=>!!e&&t.monitor.check_group===e));return l?i.a.createElement("div",null,null===(n=l.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.index,". ",null===(s=l.synthetics)||void 0===s||null===(o=s.step)||void 0===o?void 0:o.name):i.a.createElement(i.a.Fragment,null,"--")},rn=Ee.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-z4cbdq-0"})(["margin-right:16px;"]),sn=({statusCode:e})=>i.a.createElement(rn,null,e?i.a.createElement(d.EuiBadge,{"data-test-subj":"pingResponseCode"},e):"--");var on=a(39);const ln=()=>{const e=i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-heartbeat-options.html#monitor-http-response",target:"_blank"},o.i18n.translate("xpack.synthetics.pingList.drawer.body.docsLink",{defaultMessage:"docs",description:"Docs link to set response body"}));return i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.pingList.expandedRow.response_body.notRecorded",defaultMessage:"Body not recorded. Read our {docsLink} for more information on recording response bodies.",values:{docsLink:e}}))},cn=Ee()(d.EuiListGroup).withConfig({displayName:"ListGroup",componentId:"sc-1alw120-0"})(["&&&{a{padding-left:0;}}"]),un=({monitorStatus:e,showTitle:t})=>{var a,n,r,s;const l=null==e||null===(a=e.url)||void 0===a?void 0:a.full,c=null==e||null===(n=e.http)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.redirects,u=[{label:l,href:l,iconType:"globe",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s",alwaysShow:!0,"aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."})}}];(null!=c?c:[]).forEach((e=>{u.push({label:e,href:e,iconType:"sortDown",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s","aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."}),alwaysShow:!0}})}));const m=t?d.EuiPanel:"div";return c?i.a.createElement(m,{"data-test-subj":"uptimeMonitorPingListRedirectInfo"},t&&i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.monitorList.redirects.title",{defaultMessage:"Redirects"}))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,null,o.i18n.translate("xpack.synthetics.monitorList.redirects.description",{defaultMessage:"Heartbeat followed {number} redirects while executing ping.",values:{number:null!==(s=null==c?void 0:c.length)&&void 0!==s?s:0}})),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(cn,{gutterSize:"none",listItems:u})):null},dn=({headers:e})=>{const t=Object.keys(e).sort().map((t=>({title:t,description:e[t]})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiAccordion,{id:"responseHeaderAccord",buttonContent:i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.pingList.headers.title",{defaultMessage:"Response headers"})))},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiDescriptionList,{titleProps:{style:{width:"30%",paddingLeft:30}},compressed:!0,type:"responsiveColumn",listItems:t})))},mn=({body:e})=>{const t=e.content_bytes||0,a=e.bytes||0,n=[t>0&&t<a?o.i18n.translate("xpack.synthetics.pingList.expandedRow.truncated",{defaultMessage:"Showing first {contentBytes} bytes.",values:{contentBytes:t}}):null,a>0?o.i18n.translate("xpack.synthetics.pingList.expandedRow.bodySize",{defaultMessage:"Body size is {bodyBytes}.",values:{bodyBytes:Object(on.formatNumber)(a,"0b")}}):null].filter((e=>e)).join(" ");return i.a.createElement(d.EuiText,null,n)},pn=({content:e})=>e?i.a.createElement(d.EuiCodeBlock,{overflowHeight:250},e):null,gn=({ping:e})=>{var t,a,n,r,s,l,c,u;const m=[];if(e.error&&m.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.error",{defaultMessage:"Error"}),description:i.a.createElement(d.EuiText,null,e.error.message)}),null!==(t=e.http)&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&a.body){const t=e.http.response.body;m.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.response_body",{defaultMessage:"Response Body"}),description:i.a.createElement(i.a.Fragment,null,i.a.createElement(mn,{body:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),t.content?i.a.createElement(pn,{content:t.content||""}):i.a.createElement(ln,null))})}return i.a.createElement(d.EuiFlexGroup,{direction:"column"},(null==e||null===(n=e.http)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.redirects)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(un,{monitorStatus:e,showTitle:!0})),(null==e||null===(s=e.http)||void 0===s||null===(l=s.response)||void 0===l?void 0:l.headers)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(dn,{headers:null==e||null===(c=e.http)||void 0===c||null===(u=c.response)||void 0===u?void 0:u.headers})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiCallOut,{color:null!=e&&e.error?"danger":"primary"},i.a.createElement(d.EuiDescriptionList,{listItems:m}))))};function hn(e){var t,a,n,i;const r=!!e.error,s=null!==(t=null===(a=e.http)||void 0===a||null===(n=a.response)||void 0===n||null===(i=n.body)||void 0===i?void 0:i.bytes)&&void 0!==t&&t,o="browser"===e.monitor.type;return r||s||o}const fn=({item:e,expandedRows:t,setExpandedRows:a})=>i.a.createElement(d.EuiButtonIcon,{"data-test-subj":"uptimePingListExpandBtn",onClick:()=>((e,t,a)=>{if(t[e.docId])return delete t[e.docId],void a({...t});a({...t,[e.docId]:i.a.createElement(gn,{ping:e})})})(e,t,a),isDisabled:!hn(e),"aria-label":t[e.docId]?o.i18n.translate("xpack.synthetics.pingList.collapseRow",{defaultMessage:"Collapse"}):o.i18n.translate("xpack.synthetics.pingList.expandRow",{defaultMessage:"Expand"}),iconType:t[e.docId]?"arrowUp":"arrowDown"});var bn=a(78);function En({loading:e,error:t,pings:a,pagination:r,onChange:s,failedSteps:m}){var p;const g=Object(u.useHistory)(),[h,f]=Object(n.useState)({}),E=JSON.stringify(Object.keys(h).filter((e=>!a.some((({docId:t})=>t===e))))),y=Object(c.useDispatch)(),v=Object(n.useCallback)((e=>y(Object(bn.d)(e))),[y]);Object(n.useEffect)((()=>()=>{y(Object(b.a)())}),[y]),Object(n.useEffect)((()=>{const e=JSON.parse(E);e.length&&(e.forEach((e=>{delete h[e]})),f(h))}),[E,h]);const x=a.filter((e=>Object.keys(h).some((t=>e.docId===t)))).map((({monitor:{check_group:e}})=>e)),S=JSON.stringify(x);Object(n.useEffect)((()=>{v(JSON.parse(S))}),[v,S]);const k=a.reduce(((e,t)=>{var a,n;return e||!(null===(a=t.http)||void 0===a||null===(n=a.response)||void 0===n||!n.status_code)}),!1),M=a.reduce(((e,t)=>{var a;return e||!(null===(a=t.error)||void 0===a||!a.type)}),!1),w=null==a||null===(p=a[0])||void 0===p?void 0:p.monitor.type,O=[{field:"monitor.status",name:$e,render:(e,t)=>i.a.createElement(Ke,{pingStatus:e,item:t})},{align:"left",field:"observer.geo.name",name:We,render:e=>i.a.createElement(Je,{location:e})},...w===l.s.BROWSER?[{align:"left",field:"timestamp",name:Ve,render:(e,t)=>i.a.createElement(Ct,{checkGroup:t.monitor.check_group,label:Za(He()(e))})}]:[],...w!==l.s.BROWSER?[{align:"right",dataType:"number",field:"monitor.ip",name:o.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})}]:[],{align:"center",field:"monitor.duration.us",name:o.i18n.translate("xpack.synthetics.pingList.durationMsColumnLabel",{defaultMessage:"Duration"}),render:e=>e?vn(e):i.a.createElement("span",{"data-test-subj":"ping-list-duration-unavailable-tool-tip"},"--")},...M?[{field:"error.type",name:qe,width:"30%",render:(e,t)=>i.a.createElement(an,{ping:t,errorType:e})}]:[],...w===l.s.BROWSER?[{field:"monitor.status",align:"left",name:o.i18n.translate("xpack.synthetics.pingList.columns.failedStep",{defaultMessage:"Failed step"}),render:(e,t)=>{var a;return i.a.createElement(nn,{checkGroup:null===(a=t.monitor)||void 0===a?void 0:a.check_group,failedSteps:m})}}]:[],...k?[{field:"http.response.status_code",align:"right",name:i.a.createElement(yn,null,Ge),render:e=>i.a.createElement(sn,{statusCode:e})}]:[],...w!==l.s.BROWSER?[{align:"right",width:"24px",isExpander:!0,render:e=>i.a.createElement(fn,{item:e,expandedRows:h,setExpandedRows:f})}]:[]];return i.a.createElement(d.EuiBasicTable,{loading:e,columns:O,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:a,itemId:"docId",itemIdToExpandedRowMap:h,pagination:r,noItemsMessage:e?o.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):o.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",rowProps:e=>{if(w!==l.s.BROWSER)return{};const{monitor:t}=e;return{height:"85px","data-test-subj":`row-${t.check_group}`,onClick:e=>{const a=e.target;"IMG"!==a.tagName&&"path"!==a.tagName&&g.push(`/journey/${t.check_group}/steps`)}}},onChange:s})}const yn=Ee.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-6125xd-0"})(["margin-right:16px;"]),vn=e=>{if(e<1e6)return o.i18n.translate("xpack.synthetics.pingList.durationMsColumnFormatting",{values:{millis:Object(ye.a)(e)},defaultMessage:"{millis} ms"});const t=(e/1e6).toFixed(0);return"1"===t?o.i18n.translate("xpack.synthetics.pingist.durationSecondsColumnFormatting.singular",{values:{seconds:t},defaultMessage:"{seconds} second"}):o.i18n.translate("xpack.synthetics.pingist.durationSecondsColumnFormatting",{values:{seconds:t},defaultMessage:"{seconds} seconds"})},xn=()=>{const[e,t]=Object(n.useState)(10),[a,r]=Object(n.useState)(0),{error:s,loading:o,pings:u,total:m,failedSteps:p}=(({pageSize:e,pageIndex:t})=>{const{error:a,loading:i,pingList:{pings:r,total:s}}=Object(c.useSelector)(A.C),{lastRefresh:o}=Object(n.useContext)(f.a),{dateRangeStart:u,dateRangeEnd:d}=Object(n.useContext)(f.c),{statusFilter:m}=Object(I.e)(),p=Object(xe.b)(),g=Object(c.useDispatch)(),E=Object(I.f)(),y=Object(n.useCallback)((e=>g(Object(b.B)(e))),[g]),v=JSON.stringify(p.selectedLocations),x=JSON.stringify(p.excludedLocations);Object(n.useEffect)((()=>{y({monitorId:E,dateRange:{from:u,to:d},excludedLocations:x,locations:v,index:t,size:e,status:"all"!==m?m:""})}),[u,d,y,E,o,t,e,m,v,x]);const{data:S}=Object(h.useFetcher)((()=>{if((null==r?void 0:r.length)>0&&r.find((e=>e.monitor.type===l.s.BROWSER)))return Object(ve.b)({checkGroups:r.map((e=>e.monitor.check_group))})}),[r]);return{error:a,loading:i,pings:r,total:s,failedSteps:S}})({pageSize:e,pageIndex:a}),g={initialPageSize:10,pageIndex:a,pageSize:e,pageSizeOptions:[10,25,50,100],totalItemCount:m};return i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(Be,null),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(En,{onChange:e=>{t(e.page.size),r(e.page.index)},error:s,pings:u,loading:o,pagination:g,failedSteps:p}))},Sn=Ee.a.div.withConfig({displayName:"BadgeItem",componentId:"sc-1wkv7wd-0"})(["white-space:nowrap;display:inline-block;@media (max-width:1042px){display:inline-block;margin-right:16px;}"]),kn=({color:e,label:t,status:a})=>i.a.createElement(Sn,null,i.a.createElement(d.EuiBadge,{color:a===l.y.DOWN?"danger":"success"},t)),Mn=(o.i18n.translate("xpack.synthetics.monitorStatusBar.healthStatusMessageAriaLabel",{defaultMessage:"Monitor status"}),o.i18n.translate("xpack.synthetics.monitorStatusBar.type.label",{defaultMessage:"Type"})),wn=o.i18n.translate("xpack.synthetics.monitorStatusBar.type.ariaLabel",{defaultMessage:"Monitor type"}),On=o.i18n.translate("xpack.synthetics.monitorStatusBar.monitorUrlLinkAriaLabel",{defaultMessage:"Monitor URL link"}),jn=(o.i18n.translate("xpack.synthetics.monitorStatusBar.durationTextAriaLabel",{defaultMessage:"Monitor duration in milliseconds"}),o.i18n.translate("xpack.synthetics.monitorStatusBar.timestampFromNowTextAriaLabel",{defaultMessage:"Time since last check"}),o.i18n.translate("xpack.synthetics.monitorStatusBar.loadingMessage",{defaultMessage:"Loading…"}),o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.id",{defaultMessage:"Monitor ID"})),In=o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availability",{defaultMessage:"Overall availability"}),Cn=o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom",{defaultMessage:"Monitoring from"}),Tn=(o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom.listToMap",{defaultMessage:"Change to map view to check availability by location."}),o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom.MapToList",{defaultMessage:"Change to list view to check availability by location."}),o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.location",{defaultMessage:"Location"})),Fn=o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.availability",{defaultMessage:"Availability"}),Ln=o.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.lastCheck",{defaultMessage:"Last check"}),An=e=>(Math.round(100*e)/100).toFixed(2),Pn=({allLocations:e})=>{const[t,a]=Object(n.useState)(0),r=[{field:"label",name:Tn,truncateText:!0,render:(e,t)=>i.a.createElement(kn,t)},{field:"availability",name:Fn,align:"right",render:e=>i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.availabilityLabelText",defaultMessage:"{value} %",values:{value:An(e)},description:"A percentage value, like 23.5%"}))},{name:Ln,field:"timestamp",align:"right"}],s={pageIndex:t,pageSize:5,totalItemCount:e.length,showPerPageOptions:!1},o=e.length>5?{pagination:s}:{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiBasicTable,y()({responsive:!1,compressed:!0,columns:r,items:e.slice(5*t,5*t+5),onChange:({page:e})=>{var t;a(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0)}},o)))},Dn=Ee.a.div.withConfig({displayName:"TagContainer",componentId:"sc-st7itr-0"})(["max-height:246px;overflow:hidden;"]),Rn=({locations:e})=>{var t;const{colors:{gray:a,danger:r}}=Object(n.useContext)(f.g),s=[],o=null!==(t=He.a.locale())&&void 0!==t?t:"en";return He.a.locale(l.x)===l.x||He.a.defineLocale(l.x,l.w),e.forEach((e=>{s.push({label:e.geo.name,timestamp:Za(He()(new Date(e.timestamp).valueOf())),color:0===e.summary.down?a:r,availability:e.up_history/(e.up_history+e.down_history)*100,status:0===e.summary.down?"up":"down"})})),He.a.locale(o),s.sort(((e,t)=>e.label>t.label?1:t.label>e.label?-1:0)),0===s.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(Dn,null,i.a.createElement(Pn,{allLocations:s})))},Nn=Ee()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemTags",componentId:"sc-1co80xp-0"})(["width:350px;@media (max-width:1042px){width:100%;}"]),zn=({monitorLocations:e})=>i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"none",style:{flexGrow:0}},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,Cn)))),i.a.createElement(d.EuiFlexGroup,{wrap:!0,gutterSize:"none",justifyContent:"flexEnd"},i.a.createElement(Nn,{grow:!0},i.a.createElement(Rn,{locations:(null==e?void 0:e.locations)||[]})))),_n=({locations:e})=>{const t=[],a=[];e&&e.forEach((e=>{0===e.summary.down?t.push(e.geo.name):a.push(e.geo.name)}));let n="",r="";return 0===a.length?(n=`${e.length}`,r="Up"):a.length>0&&(r="Down",n=`${a.length}/${e.length}`,a.length===e.length&&(n=`${e.length}`)),i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,e.length<=1?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.locations.oneLocStatus",values:{status:r,loc:n},defaultMessage:"{status} in {loc} location"}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.locations.upStatus",values:{status:r,loc:n},defaultMessage:"{status} in {loc} locations"})))},Bn=Ee.a.span.withConfig({displayName:"RedirectBtn",componentId:"sc-hhkn2c-0"})(["cursor:pointer;"]),Un=({monitorStatus:e})=>{var t,a,r;const s=null==e||null===(t=e.http)||void 0===t||null===(a=t.response)||void 0===a?void 0:a.redirects,[l,c]=Object(n.useState)(!1),u=i.a.createElement(Qn,null,i.a.createElement(Bn,{className:"euiLink euiLink--primary",onClick:()=>c(!l),"data-test-subj":"uptimeMonitorRedirectInfo"},o.i18n.translate("xpack.synthetics.monitorList.redirects.title.number",{defaultMessage:"{number}",values:{number:null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0}})));return s?i.a.createElement(i.a.Fragment,null,i.a.createElement(Xn,null,"Redirects"),i.a.createElement(d.EuiPopover,{button:u,isOpen:l,anchorPosition:"downLeft",closePopover:()=>c(!1)},i.a.createElement(un,{monitorStatus:e}))):null},Hn=({children:e,monitorId:t,linkParameters:a})=>i.a.createElement(d.EuiLink,null,i.a.createElement(u.Link,{"data-test-subj":`monitor-page-link-${t}`,to:a?`/monitor/${btoa(t)}/${a}`:`/monitor/${btoa(t)}`},e)),$n=e=>{let t;try{t=new Map(JSON.parse(e))}catch{t=new Map}return t},Gn={browser:"Browser",http:"HTTP Ping",tcp:"TCP Ping",icmp:"ICMP Ping"},qn=({summary:e})=>{var t;const a=Object(I.e)(),r=j(a,!0),s=$n(a.filters),[l,c]=Object(n.useState)(null!==(t=s.get("monitor.type"))&&void 0!==t?t:[]),u=Object(n.useMemo)((()=>{var e;return null!==(e=$n(a.excludedFilters).get("monitor.type"))&&void 0!==e?e:[]}),[a.excludedFilters]);Object(Pe.b)("monitor.type",l,u);const m=o.i18n.translate("xpack.synthetics.monitorList.monitorType.filter",{defaultMessage:"Filter all monitors with type {type}",values:{type:e.state.monitor.type}});return i.a.createElement("div",null,i.a.createElement(Hn,{monitorId:e.monitor_id,linkParameters:r},e.state.monitor.name?e.state.monitor.name:`Unnamed - ${e.monitor_id}`),i.a.createElement("div",null,i.a.createElement(d.EuiButtonEmpty,{color:"text",title:m,onClick:()=>{c([e.state.monitor.type])},size:"xs",flush:"left",style:{border:"none"}},i.a.createElement(d.EuiText,{size:"xs"},Gn[e.state.monitor.type]))))},Wn=o.i18n.translate("xpack.synthetics.monitorList.enableDownAlert",{defaultMessage:"Enable status alerts"}),Vn=o.i18n.translate("xpack.synthetics.monitorList.disableDownAlert",{defaultMessage:"Disable status alerts"}),Kn=o.i18n.translate("xpack.synthetics.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),Jn=o.i18n.translate("xpack.synthetics.monitorList.locations.expand",{defaultMessage:"Click to view remaining locations"}),Yn=e=>o.i18n.translate("xpack.synthetics.monitorList.tags.filter",{defaultMessage:"Filter all monitors with tag {tag}",values:{tag:e}}),Zn=({ping:e,summary:t})=>{var a;const r=Object(u.useHistory)(),{services:{docLinks:s}}=Object(p.useKibana)(),[o,c]=Object(n.useState)(5);let m;m=t?(e=>{let t=new Set;return e.state.summaryPings.forEach((e=>{var a;t=new Set([...t,...null!==(a=null==e?void 0:e.tags)&&void 0!==a?a:[]])})),[...t]})(t):(e=>{var t;return null!==(t=null==e?void 0:e.tags)&&void 0!==t?t:[]})(e);const g=m.slice(0,o),{absoluteDateRangeStart:h,absoluteDateRangeEnd:f,...b}=Object(I.e)(),E=$n(b.filters),[y,v]=Object(n.useState)(null!==(a=E.get("tags"))&&void 0!==a?a:[]),x=Object(n.useMemo)((()=>{var e;return null!==(e=$n(b.excludedFilters).get("tags"))&&void 0!==e?e:[]}),[b.excludedFilters]);return Object(Pe.b)("tags",y,x),0===m.length?t?null:i.a.createElement(d.EuiLink,{href:(null==s?void 0:s.links.heartbeat.base)+"/monitor-options.html#monitor-tags",target:"_blank"},"Set tags"):i.a.createElement(d.EuiBadgeGroup,null,g.map((e=>t?i.a.createElement(d.EuiBadge,{key:e,title:Yn(e),onClick:()=>{v([e])},onClickAriaLabel:Yn(e),color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e):i.a.createElement(d.EuiBadge,{key:e,color:"hollow",className:"eui-textTruncate",style:{maxWidth:120},href:r.createHref({pathname:l.t,search:`filters=[["tags",["${e}"]]]`})},e))),m.length>o&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{c(m.length)},onClickAriaLabel:Kn},"+",m.length-5))},Xn=Ee()(d.EuiDescriptionListTitle).withConfig({displayName:"MonListTitle",componentId:"sc-7ova2m-0"})(["&&&{width:30%;max-width:250px;}"]),Qn=Ee()(d.EuiDescriptionListDescription).withConfig({displayName:"MonListDescription",componentId:"sc-7ova2m-1"})(["&&&{width:70%;overflow-wrap:anywhere;}"]),ei=()=>{var e,t,a,r;const{monitorId:s,monitorStatus:l,monitorLocations:u={}}=(()=>{const{lastRefresh:e}=Object(n.useContext)(f.a),{dateRangeStart:t,dateRangeEnd:a}=Object(I.e)(),i=Object(c.useDispatch)(),r=Object(I.f)(),s=Object(c.useSelector)(A.u),o=Object(c.useSelector)((e=>Object(A.s)(e,r)));return Object(n.useEffect)((()=>{i(Object(b.u)({dateStart:t,dateEnd:a,monitorId:r}))}),[r,t,a,e,i]),{monitorStatus:s,monitorLocations:o,monitorId:r}})(),{locations:m,up_history:p,down_history:g}=u,h=null!==(e=null==l||null===(t=l.url)||void 0===t?void 0:t.full)&&void 0!==e?e:"",E=0===p&&0===g||!p?0:p/(p+g)*100;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(_n,{locations:null!=m?m:[]})),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiDescriptionList,{type:"column",compressed:!0,textStyle:"reverse"},i.a.createElement(Xn,null,In),i.a.createElement(Qn,{"data-test-subj":"uptimeOverallAvailability"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.availabilityLabelText",defaultMessage:"{value} %",values:{value:An(E)},description:"A percentage value, like 23.5 %"})),i.a.createElement(Xn,null,ke),i.a.createElement(Qn,{"data-test-subj":"monitor-page-url"},h?i.a.createElement(d.EuiLink,{"aria-label":On,href:h,target:"_blank",external:!0},h):"--"),i.a.createElement(Xn,null,jn),i.a.createElement(Qn,{"data-test-subj":"monitor-page-title"},s),(null==l||null===(a=l.monitor)||void 0===a?void 0:a.type)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Xn,{"aria-label":wn},Mn),i.a.createElement(Qn,{"data-test-subj":"monitor-page-type"},(e=>{switch(e){case"http":return o.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.http",{defaultMessage:"HTTP"});case"tcp":return o.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.tcp",{defaultMessage:"TCP"});case"icmp":return o.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.icmp",{defaultMessage:"ICMP"});case"browser":return o.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.browser",{defaultMessage:"Browser"});default:return""}})(null==l||null===(r=l.monitor)||void 0===r?void 0:r.type))),i.a.createElement(Xn,null,Me),i.a.createElement(Qn,null,i.a.createElement(Zn,{ping:l})),i.a.createElement(xi,{tls:null==l?void 0:l.tls}),i.a.createElement(Un,{monitorStatus:l})))},ti=o.i18n.translate("xpack.synthetics.certs.ok",{defaultMessage:"OK"}),ai=o.i18n.translate("xpack.synthetics.certs.expired",{defaultMessage:"Expired"}),ni=o.i18n.translate("xpack.synthetics.certs.expireSoon",{defaultMessage:"Expires soon"}),ii=o.i18n.translate("xpack.synthetics.certs.expires",{defaultMessage:"Expires"}),ri=o.i18n.translate("xpack.synthetics.certs.searchCerts",{defaultMessage:"Search certificates"}),si=o.i18n.translate("xpack.synthetics.certs.list.status",{defaultMessage:"Status"}),oi=o.i18n.translate("xpack.synthetics.certs.list.status.old",{defaultMessage:"Too old"}),li=o.i18n.translate("xpack.synthetics.certs.list.commonName",{defaultMessage:"Common name"}),ci=o.i18n.translate("xpack.synthetics.certs.list.monitors",{defaultMessage:"Monitors"}),ui=o.i18n.translate("xpack.synthetics.certs.list.issuedBy",{defaultMessage:"Issued by"}),di=o.i18n.translate("xpack.synthetics.certs.list.validUntil",{defaultMessage:"Valid until"}),mi=o.i18n.translate("xpack.synthetics.certs.list.ageCol",{defaultMessage:"Age"}),pi=o.i18n.translate("xpack.synthetics.certs.list.days",{defaultMessage:"days"}),gi=o.i18n.translate("xpack.synthetics.certs.list.expirationDate",{defaultMessage:"Fingerprints"}),hi=o.i18n.translate("xpack.synthetics.certs.list.copyFingerprint",{defaultMessage:"Click to copy fingerprint value"}),fi=o.i18n.translate("xpack.synthetics.certs.list.empty",{defaultMessage:"No Certificates found. Note: Certificates are only visible for Heartbeat 7.8+"}),bi=o.i18n.translate("xpack.synthetics.certificates.loading",{defaultMessage:"Loading certificates ..."}),Ei=Ee.a.span.withConfig({displayName:"Span",componentId:"sc-8mgabz-0"})(["margin-left:5px;vertical-align:middle;"]),yi=Ee.a.h4.withConfig({displayName:"H4Text",componentId:"sc-8mgabz-1"})(["&&&{margin:0 0 0 4px;display:inline-block;color:inherit;}"]),vi=({expiry:e,boldStyle:t=!1})=>{const a=null==e?void 0:e.not_after,n=Object(I.c)(a),r=He()(a).fromNow(),s=({color:e,text:n})=>i.a.createElement(d.EuiToolTip,{content:He()(a).format("L LT")},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(d.EuiIcon,{color:e,type:"lock",size:"s"}),t?i.a.createElement(yi,null,n," ",r):i.a.createElement(Ei,null,n," ",r)));return n===l.c.EXPIRING_SOON?i.a.createElement(s,{color:"warning",text:ni}):n===l.c.EXPIRED?i.a.createElement(s,{color:"danger",text:ai}):n?i.a.createElement(s,{color:"success",text:ii}):i.a.createElement("span",null,"--")},xi=({tls:e})=>{var t;let a=null;return null!=e&&null!==(t=e.server)&&void 0!==t&&t.x509?a=e.server.x509:null!=e&&e.certificate_not_valid_after&&null!=e&&e.certificate_not_valid_before&&(a={not_after:e.certificate_not_valid_after,not_before:e.certificate_not_valid_before}),a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Xn,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.sslCertificate.title",defaultMessage:"TLS Certificate"})),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Qn,null,i.a.createElement(u.Link,{to:l.b,className:"eui-displayInline"},i.a.createElement(vi,{expiry:a,boldStyle:!0})))):null},Si=Ee()(d.EuiFlexItem).withConfig({displayName:"WrapFlexItem",componentId:"sc-1y7x8xy-0"})(["&&&{@media (max-width:800px){flex-basis:100%;}}"]),ki=({monitorLocations:e})=>{const{refreshApp:t}=Object(n.useContext)(f.a),[a]=Object(n.useState)(document.visibilityState),r=()=>{"visible"===document.visibilityState&&"hidden"===a&&t()};return Object(n.useEffect)((()=>(document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)})),[]),i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{gutterSize:"l",wrap:!0,responsive:!0},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(ei,null)),i.a.createElement(Si,{grow:1},i.a.createElement(zn,{monitorLocations:e}))))};var Mi=a(102);const wi=({monitorId:e})=>{const{lastRefresh:t}=Object(n.useContext)(f.a),{dateRangeStart:a,dateRangeEnd:r}=Object(I.e)(),s=Object(c.useDispatch)(),o=Object(c.useSelector)((t=>Object(A.s)(t,e)));return Object(n.useEffect)((()=>{s(Object(Mi.b)({dateStart:a,dateEnd:r,monitorId:e}))}),[e,a,r,t,s]),i.a.createElement(ki,{monitorLocations:o})};var Oi=a(27);const ji=Ee()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemReducedMargin",componentId:"sc-1ixaody-0"})(["&&{margin-left:0px;margin-right:0px;}"]),Ii=Ee()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemAlignRight",componentId:"sc-1ixaody-1"})(["text-align:right;"]),Ci=({color:e,content:t,message:a,"data-test-subj":n})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"l",responsive:!1},i.a.createElement(ji,{component:"span",grow:!1},i.a.createElement(d.EuiHealth,{color:e})),i.a.createElement(ji,{component:"span",grow:!1,"data-test-subj":`${n}.label`},a),i.a.createElement(Ii,{component:"span","data-test-subj":n},t)),Ti=Ee.a.div.withConfig({displayName:"LegendContainer",componentId:"sc-m43izv-0"})(["max-width:150px;min-width:100px;@media (max-width:767px){min-width:0px;max-width:100px;}"]),Fi=({down:e,up:t})=>{const{colors:{gray:a,danger:r}}=Object(n.useContext)(f.g);return i.a.createElement(Ti,null,i.a.createElement(Ci,{color:r,content:e,message:Oe,"data-test-subj":"xpack.synthetics.snapshot.donutChart.down"}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Ci,{color:a,content:t,message:we,"data-test-subj":"xpack.synthetics.snapshot.donutChart.up"}))},Li=Ee()(d.EuiIcon).withConfig({displayName:"GreenCheckIcon",componentId:"sc-vlg6n7-0"})(["height:42px;width:42px;color:#017d73;top:51px;left:51px;position:absolute;"]),Ai={chartMargins:{top:0,bottom:0,left:0,right:0},partition:{linkLabel:{maximumSection:1/0},idealFontSizeJump:1.1,outerSizeRatio:.9,emptySizeRatio:.4,circlePadding:4}},Pi=({height:e,down:t,up:a})=>{var r;const{colors:{danger:s,gray:l},chartTheme:c}=Object(n.useContext)(f.g);return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{position:"relative"}},i.a.createElement(Oi.Chart,{size:e,"aria-label":o.i18n.translate("xpack.synthetics.snapshot.donutChart.ariaLabel",{defaultMessage:"Pie chart showing the current status. {down} of {total} monitors are down.",values:{down:t,total:a+t}})},i.a.createElement(Oi.Settings,{theme:[Ai,null!==(r=c.theme)&&void 0!==r?r:{}],baseTheme:c.baseTheme}),i.a.createElement(Oi.Partition,{id:"spec_1",data:[{value:t,label:"Down"},{value:a,label:"Up"}],layout:Oi.PartitionLayout.sunburst,valueAccessor:e=>e.value,layers:[{groupByRollup:e=>e.label,nodeLabel:e=>e,shape:{fillColor:e=>"Down"===e.dataName?s:l}}]})),0===t&&i.a.createElement(Li,{className:"greenCheckIcon",type:"checkInCircleFilled"})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Fi,{down:t,up:a})))},Di=({monitorType:e,lines:t})=>i.a.createElement(i.a.Fragment,null,t.map((({name:t,line:a})=>i.a.createElement(Oi.LineSeries,{curve:Oi.CurveType.CURVE_MONOTONE_X,data:a.map((({x:e,y:t})=>[e,t||null])),id:`loc-avg-${t}`,key:`loc-line-${t}`,name:t,xAccessor:0,xScaleType:Oi.ScaleType.Time,yAccessors:[1],yScaleType:Oi.ScaleType.Linear,fit:Oi.Fit.Linear,timeZone:"local",tickFormat:t=>"browser"===e?`${wa(t)} ${Te}`:`${Oa(t)} ${Fe}`})))),Ri=({loading:e=!1,height:t="100%",children:a,...n})=>{const r=!0===e?.3:1;return i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement("div",y()({style:{height:t,opacity:r,transition:"opacity 0.2s"}},n),a),!0===e&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceAround",alignItems:"center",style:{height:t,marginTop:`-${t}`,marginBottom:0}},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingChart,{size:"xl"}))))},Ni=({title:e,body:t})=>i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement(d.EuiTitle,null,i.a.createElement("h5",null,e)),body:i.a.createElement("p",null,t)});var zi=a(31);const _i=Ee.a.div.withConfig({displayName:"Header",componentId:"sc-qqof22-0"})(["font-weight:bold;padding-left:4px;"]),Bi=Ee.a.div.withConfig({displayName:"RecordSeverity",componentId:"sc-qqof22-1"})(["font-weight:bold;border-left:4px solid ",";padding-left:2px;"],(e=>e.color)),Ui=Ee.a.div.withConfig({displayName:"TimeDiv",componentId:"sc-qqof22-2"})(["font-weight:500;border-bottom:1px solid gray;padding-bottom:2px;"]),Hi=({details:e})=>{const t=JSON.parse(e);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ui,null,He()(t.time).format("lll")),i.a.createElement(_i,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.charts.mlAnnotation.header",defaultMessage:"Score: {score}",values:{score:t.score.toFixed(2)}})),i.a.createElement(Bi,{color:t.color},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.charts.mlAnnotation.severity",defaultMessage:"Severity: {severity}",values:{severity:(a=t.severity,a.charAt(0).toUpperCase()+a.slice(1))}})));var a},$i=({anomalies:e,hiddenLegends:t})=>{const a=new Map;Object.keys(zi.ANOMALY_SEVERITY).forEach((e=>{a.set(e.toLowerCase(),{rect:[],color:""})})),null!=e&&e.anomalies&&e.anomalies.forEach((e=>{var n,i;let r=null!==(n=null===(i=e.source["observer.geo.name"])||void 0===i?void 0:i[0])&&void 0!==n?n:"N/A";if(""===r&&(r="N/A"),t.length&&t.includes(`loc-avg-${r}`))return;const s=Object(zi.getSeverityType)(e.severity),o={time:e.source.timestamp,score:e.severity,severity:s,color:Object(zi.getSeverityColor)(e.severity)},l={coordinates:{x0:He()(e.source.timestamp).valueOf(),x1:He()(e.source.timestamp).add(e.source.bucket_span,"s").valueOf()},details:JSON.stringify(o)};a.get(s).rect.push(l),a.get(s).color=Object(zi.getSeverityColor)(e.severity)}));const n=e=>i.a.createElement(Hi,{details:e||""});return i.a.createElement(i.a.Fragment,null,Array.from(a).map((([e,t])=>{return t.rect.length>0?i.a.createElement(Oi.RectAnnotation,{dataValues:t.rect,key:e,id:e,style:(a=t.color,{fill:a,opacity:1,strokeWidth:2,stroke:a}),renderTooltip:n}):null;var a})))},Gi=({locationDurationLines:e,anomalies:t,loading:a})=>{var r;const s=e.length>0,[l,u]=Object(I.i)(),{absoluteDateRangeStart:d,absoluteDateRangeEnd:m}=l(),[p,g]=Object(n.useState)([]),{chartTheme:h}=Object(n.useContext)(f.g),b=Object(c.useSelector)(A.u);return i.a.createElement(Ri,{"aria-label":o.i18n.translate("xpack.synthetics.monitorCharts.durationChart.wrapper.label",{defaultMessage:"A chart displaying the monitor's ping duration, grouped by location."}),height:ur,loading:a},s&&"string"==typeof(null==b||null===(r=b.monitor)||void 0===r?void 0:r.type)?i.a.createElement(Oi.Chart,null,i.a.createElement(Oi.Settings,y()({xDomain:{min:d,max:m},showLegend:!0,showLegendExtra:!0,legendPosition:Oi.Position.Right,onBrushEnd:({x:e})=>{if(!e)return;const[t,a]=e;u({dateRangeStart:He()(t).toISOString(),dateRangeEnd:He()(a).toISOString()})},onLegendItemClick:([e])=>{e&&g((t=>t.includes(e.specId)?[...t.filter((t=>t!==e.specId))]:[...t,e.specId]))}},h)),i.a.createElement(Oi.Axis,{id:"bottom",position:Oi.Position.Bottom,showOverlappingTicks:!0,tickFormat:Object(Oi.timeFormatter)(Object(ye.b)(d,m))}),i.a.createElement(Oi.Axis,{domain:{min:0,max:NaN,fit:!1},id:"left",position:Oi.Position.Left,tickFormat:e=>(e=>{const t=Number(e);return isNaN(t)||null===e?"N/A":t.toFixed()})(e),title:o.i18n.translate("xpack.synthetics.monitorCharts.durationChart.leftAxis.title",{defaultMessage:"Duration in {unit}",values:{unit:"browser"===b.monitor.type?Ce:Fe}}),labelFormat:e=>"browser"===(null==b?void 0:b.monitor.type)?`${wa(e)}`:`${Oa(e)}`}),i.a.createElement(Di,{lines:e,monitorType:b.monitor.type}),i.a.createElement($i,{anomalies:t,hiddenLegends:p})):i.a.createElement(Ni,{body:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.durationChart.emptyPrompt.description",defaultMessage:"This monitor has never been {emphasizedText} during the selected time range.",values:{emphasizedText:i.a.createElement("strong",null,"up")}}),title:o.i18n.translate("xpack.synthetics.durationChart.emptyPrompt.title",{defaultMessage:"No duration data available"})}))},qi=(e,t)=>{const a=e[0].x;return{dateRangeStart:He()(a).toISOString(),dateRangeEnd:He()(a).add(t,"ms").toISOString()}},Wi=({histogramSeries:e,minInterval:t})=>{const{colors:{danger:a},chartTheme:r}=Object(n.useContext)(f.g),[s,l]=Object(I.i)(),{absoluteDateRangeStart:c,absoluteDateRangeEnd:u}=s();return Object(ye.k)(e)?i.a.createElement("div",{style:{height:50,width:"100%",maxWidth:"1200px",marginRight:15}},i.a.createElement(Oi.Chart,null,i.a.createElement(Oi.Settings,y()({xDomain:{minInterval:t,min:c,max:u},onBrushEnd:({x:e})=>{if(!e)return;const[t,a]=e;l({dateRangeStart:He()(t).toISOString(),dateRangeEnd:He()(a).toISOString()})},onElementClick:([e])=>{l(qi(e,t))}},r)),i.a.createElement(Oi.Axis,{hide:!0,id:"bottom",position:Oi.Position.Bottom,tickFormat:Object(Oi.timeFormatter)(Object(ye.b)(c,u))}),i.a.createElement(Oi.BarSeries,{id:"downSeries",color:a,data:(e||[]).map((({timestamp:e,down:t})=>[e,t])),name:o.i18n.translate("xpack.synthetics.monitorList.downLineSeries.downLabel",{defaultMessage:"Down checks"}),timeZone:"local",xAccessor:0,xScaleType:Oi.ScaleType.Time,yAccessors:[1],yScaleType:Oi.ScaleType.Linear}))):i.a.createElement(d.EuiToolTip,{position:"top",content:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.noDownHistory",defaultMessage:"This monitor has never been {emphasizedText} during the selected time range.",values:{emphasizedText:i.a.createElement("strong",null,"down")}})},i.a.createElement(d.EuiText,{color:"success"},"--"))};var Vi=a(40),Ki=a.n(Vi);const Ji=({absoluteStartDate:e,absoluteEndDate:t,data:a,loading:r=!1,height:s})=>{var l,u;const{colors:{danger:m,gray:p},chartTheme:g}=Object(n.useContext)(f.g),b=Object(I.f)(),E=Object(c.useSelector)(A.u),{basePath:x}=Object(Bt.c)(),[S,k]=Object(I.i)(),{dateRangeStart:M,dateRangeEnd:w}=S();let O;if(null!=a&&null!==(l=a.histogram)&&void 0!==l&&l.length){const{histogram:n,minInterval:l}=a,c=({x:e})=>{if(!e)return;const[t,a]=e;k({dateRangeStart:He()(t).toISOString(),dateRangeEnd:He()(a).toISOString()})},u=([e])=>{k(qi(e,l))},d=[];n.forEach((({x:e,upCount:t,downCount:a})=>{d.push({x:e,y:null!=a?a:0,type:Oe},{x:e,y:null!=t?t:0,type:we})})),O=i.a.createElement(Ri,{height:s,loading:r,"aria-label":o.i18n.translate("xpack.synthetics.snapshotHistogram.description",{defaultMessage:"Bar Chart showing uptime status over time from {startTime} to {endTime}.",values:{startTime:He()(new Date(e).valueOf()).fromNow(),endTime:He()(new Date(t).valueOf()).fromNow()}})},i.a.createElement(Oi.Chart,null,i.a.createElement(Oi.Settings,y()({xDomain:{minInterval:l,min:e,max:t},showLegend:!1,onBrushEnd:c,onElementClick:u},g)),i.a.createElement(Oi.Axis,{id:o.i18n.translate("xpack.synthetics.snapshotHistogram.xAxisId",{defaultMessage:"Ping X Axis"}),position:Oi.Position.Bottom,showOverlappingTicks:!1,tickFormat:Object(Oi.timeFormatter)(Object(ye.b)(e,t))}),i.a.createElement(Oi.Axis,{id:o.i18n.translate("xpack.synthetics.snapshotHistogram.yAxisId",{defaultMessage:"Ping Y Axis"}),position:"left",tickFormat:e=>Ki()(e).format("0"),labelFormat:e=>Ki()(e).format("0a"),title:o.i18n.translate("xpack.synthetics.snapshotHistogram.yAxis.title",{defaultMessage:"Pings",description:"The label on the y-axis of a chart that displays the number of times Heartbeat has pinged a set of services/websites."})}),i.a.createElement(Oi.BarSeries,{color:[m,p],data:d,id:Oe,name:o.i18n.translate("xpack.synthetics.snapshotHistogram.series.pings",{defaultMessage:"Monitor Pings"}),stackAccessors:["x"],splitSeriesAccessors:["type"],timeZone:"local",xAccessor:"x",xScaleType:Oi.ScaleType.Time,yAccessors:["y"],yScaleType:Oi.ScaleType.Linear})))}else O=i.a.createElement(Ni,{title:o.i18n.translate("xpack.synthetics.snapshot.noDataTitle",{defaultMessage:"No ping data available"}),body:o.i18n.translate("xpack.synthetics.snapshot.noDataDescription",{defaultMessage:"There are no pings in the selected time range."})});return Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{name:`${b}-pings`,dataType:"synthetics",selectedMetricField:"summary.up",time:{from:M,to:w},reportDefinitions:{"monitor.name":b&&null!=E&&null!==(u=E.monitor)&&void 0!==u&&u.name?[E.monitor.name]:["ALL_VALUES"]}}]},x),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.snapshot.pingsOverTimeTitle",defaultMessage:"Pings over time"})))),!1),O)},Yi=Ee.a.div.withConfig({displayName:"ResponsiveWrapper",componentId:"sc-1vhsat0-0"})(["margin-left:120px;@media (max-width:950px){margin-left:48px;}@media (max-width:767px){margin-left:12px;margin-top:40px;}"]);var Zi=a(164);function Xi(){const e=Object(c.useSelector)(A.d),{search:t}=Object(u.useLocation)(),a=!!e||!function(e){const t=Object(Zi.a)(e);return!!t.filters||!!t.search}(t);return Object(n.useCallback)((e=>{a&&e()}),[a])}const Qi=(er=({height:e})=>{const{query:t,absoluteDateRangeStart:a,absoluteDateRangeEnd:r,dateRangeStart:s,dateRangeEnd:o}=Object(I.e)(),l=Xi(),u=Object(c.useDispatch)(),d=Object(I.f)(),{lastRefresh:m}=Object(n.useContext)(f.a),p=Object(c.useSelector)(A.d),{loading:g,pingHistogram:h}=Object(c.useSelector)(A.B);return Object(n.useEffect)((()=>{d?u(b.A.get({monitorId:d,dateStart:s,dateEnd:o,query:t,filters:p})):l((()=>u(b.A.get({monitorId:d,dateStart:s,dateEnd:o,query:t,filters:p}))))}),[l,s,o,d,m,p,u,t]),i.a.createElement(Ji,{data:h,absoluteStartDate:a,absoluteEndDate:r,height:e,loading:g})},({isResponsive:e,...t})=>e?i.a.createElement(Yi,{"data-test-subj":"uptimeWithResponsiveWrapper--wrapper"},i.a.createElement(er,t)):i.a.createElement(d.EuiPanel,{paddingSize:"m",hasBorder:!0,"data-test-subj":"uptimeWithResponsiveWrapper--panel"},i.a.createElement(er,t)));var er;const tr=()=>{const{basePath:e}=Object(n.useContext)(f.c),t=Object(c.useDispatch)();return Object(n.useEffect)((()=>{t(b.n.get())}),[t]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{"data-test-subj":"uptimeMLLicenseInfo",className:"license-info-trial",title:ae,color:"primary",iconType:"help"},i.a.createElement("p",null,ne),i.a.createElement(d.EuiButton,{color:"primary",href:e+"/app/management/stack/license_management/home"},ae)),i.a.createElement(d.EuiSpacer,null))};function ar({isCreatingJob:e,onClickCreate:t,onClose:a,canCreateMLJob:r}){const{basePath:s}=Object(n.useContext)(f.c),o=Object(c.useSelector)(A.e);return i.a.createElement(d.EuiFlyout,{onClose:a,size:"s","data-test-subj":"uptimeMLFlyout"},i.a.createElement(d.EuiFlyoutHeader,null,i.a.createElement(d.EuiTitle,null,i.a.createElement("h2",null,G)),i.a.createElement(d.EuiSpacer,{size:"s"})),i.a.createElement(d.EuiFlyoutBody,null,!o&&i.a.createElement(tr,null),i.a.createElement(d.EuiText,null,i.a.createElement("p",null,te),i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription",defaultMessage:"Once a job is created, you can manage it and see more details in the {mlJobsPageLink}.",values:{mlJobsPageLink:i.a.createElement(d.EuiLink,{href:s+"/app/ml"},Z)}})),i.a.createElement("p",null,i.a.createElement("em",null,X))),i.a.createElement(d.EuiSpacer,null),!r&&i.a.createElement(d.EuiCallOut,{title:re,color:"primary",iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.ml.enableAnomalyDetectionPanel.insufficient_permissions_add_job",defaultMessage:"You must have the Kibana privileges for Machine Learning to use this feature."})))),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:()=>a(),disabled:e||!1},ee)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{"data-test-subj":"uptimeMLCreateJobBtn",onClick:()=>t(),fill:!0,isLoading:e,disabled:e||!o||!r},Q)))))}var nr=a(68);const ir=(e,t,a,n,r,s,o)=>{n?Tt.a.toasts.addSuccess({title:Object(p.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeMLJobSuccessfullyCreated"},P),{theme$:s}),text:Object(p.toMountPoint)(i.a.createElement("p",null,r?R:D,i.a.createElement(me,{monitorId:e,basePath:t,dateRange:a},H)),{theme$:s})},{toastLifeTimeMs:1e4}):Tt.a.toasts.addError(o,{title:N,toastMessage:z,toastLifeTimeMs:1e4})},rr=({onClose:e})=>{const t=Object(p.useKibana)(),a=Object(c.useDispatch)(),{data:r,error:s}=Object(c.useSelector)(A.g),o=Object(c.useSelector)(A.j),{settings:l}=Object(c.useSelector)(A.A);Object(n.useEffect)((()=>{a(Object(nr.a)({}))}),[a]);const u=(null==l?void 0:l.heartbeatIndices)||"",{basePath:d}=Object(n.useContext)(f.c),{refreshApp:m}=Object(n.useContext)(f.a),g=Object(I.f)(),h=Object(c.useSelector)(A.b)&&""!==u,E=u?()=>a(b.d.get({monitorId:g,heartbeatIndices:u})):()=>null,{data:y}=Object(c.useSelector)(A.f),v=!(null==y||!y.jobsExist),[x,S]=Object(n.useState)(!1),{dateRangeStart:k,dateRangeEnd:M}=Object(I.e)();return Object(n.useEffect)((()=>{if(x&&!o){var n,i,l,c,u;if(r)ir(g,d,{to:M,from:k},!0,r.awaitingNodeAssignment,null===(n=t.services.theme)||void 0===n?void 0:n.theme$),a(b.m.get({monitorId:g})),m(),null!==(i=null===(l=t.services.application)||void 0===l||null===(c=l.capabilities.uptime)||void 0===c?void 0:c.save)&&void 0!==i&&i&&(a(Object(b.O)(L.b.DURATION_ANOMALY)),a(Object(b.P)(!0)));else ir(g,d,{to:M,from:k},!1,!1,null===(u=t.services.theme)||void 0===u?void 0:u.theme$,s);S(!1),e()}}),[r,e,x,s,o,g,a,d]),Object(n.useEffect)((()=>{v&&!o&&!r&&u&&(S(!0),a(b.d.get({monitorId:g,heartbeatIndices:u})))}),[a,v,u,g,r]),v?null:i.a.createElement(ar,{canCreateMLJob:!!h,isCreatingJob:o,onClickCreate:()=>{S(!0),E()},onClose:e})},sr=({loading:e,onConfirm:t,onCancel:a})=>i.a.createElement(d.EuiConfirmModal,{title:U,onCancel:a,onConfirm:t,cancelButtonText:"Cancel",confirmButtonText:"Delete",buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"uptimeMLJobDeleteConfirmModel"},e?i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.deleteMessage",defaultMessage:"Deleting jobs..."}),")"):i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.confirmDeleteMessage",defaultMessage:"Are you sure you want to delete this job?"})),e?i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}):i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.deleteJobWarning",defaultMessage:"Deleting a job can be time consuming. It will be deleted in the background and data may not disappear instantly."}))),or=()=>{const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)(!1),{lastRefresh:s,refreshApp:o}=Object(n.useContext)(f.a),{notifications:l}=Object(p.useKibana)(),u=Object(I.f)(),d=Object(c.useDispatch)(),m=Object(c.useSelector)(A.e),g=Object(c.useSelector)(A.l),{data:h}=Object(c.useSelector)(A.k),{data:E}=Object(c.useSelector)(A.f),y=!(null==E||!E.jobsExist||!E.jobs.find((e=>e.id===Object(ue.b)(u))));return Object(n.useEffect)((()=>{m&&d(b.m.get({monitorId:u}))}),[d,m,u,s]),Object(n.useEffect)((()=>{var e;return a&&null!=h&&null!==(e=h[Object(ue.b)(u)])&&void 0!==e&&e.deleted&&(r(!1),l.toasts.success({title:i.a.createElement("p",{"data-test-subj":"uptimeMLJobSuccessfullyDeleted"},_),body:i.a.createElement("p",null,B),toastLifeTimeMs:3e3}),d(Object(b.N)()),o()),()=>{d(Object(b.N)())}}),[g,a,h,u,o,l.toasts,d]),i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,{hasMLJob:y,onEnableJob:()=>{t(!0)},onJobDelete:()=>{r(!0)}}),e&&i.a.createElement(rr,{onClose:()=>{t(!1)}}),a&&i.a.createElement(sr,{onConfirm:()=>d(b.e.get({monitorId:u})),loading:g,onCancel:()=>{r(!1)}}))},lr=({locationDurationLines:e,anomalies:t,loading:a,hasMLJob:n})=>{var r,s;return i.a.createElement(d.EuiPanel,{paddingSize:"m",hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,n?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorCharts.monitorDuration.titleLabelWithAnomaly",defaultMessage:"Monitor duration (Anomalies: {noOfAnomalies})",values:{noOfAnomalies:null!==(r=null==t||null===(s=t.anomalies)||void 0===s?void 0:s.length)&&void 0!==r?r:0}}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorCharts.monitorDuration.titleLabel",defaultMessage:"Monitor duration"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(or,null))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Gi,{locationDurationLines:e,loading:a,anomalies:t}))},cr=({monitorId:e})=>{var t;const{dateRangeStart:a,dateRangeEnd:r,absoluteDateRangeStart:s,absoluteDateRangeEnd:o}=Object(I.e)(),{durationLines:l,loading:u}=Object(c.useSelector)(A.z),d=Object(c.useSelector)(A.e),{data:m,loading:p}=Object(c.useSelector)(A.f),g=!(null==m||!m.jobsExist||!m.jobs.find((t=>t.id===Object(ue.b)(e)))),E=Object(c.useSelector)(A.a),y=Object(c.useDispatch)(),{lastRefresh:v}=Object(n.useContext)(f.a),{basePath:x}=Object(Bt.c)(),S=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{name:`${e}-response-duration`,time:{from:a,to:r},reportDefinitions:{"monitor.id":[e]},breakdown:"observer.geo.name",operationType:"average",dataType:"synthetics"}]},x);return Object(n.useEffect)((()=>{if(d&&g){const t={listOfMonitorIds:[e],dateStart:s,dateEnd:o};y(b.l.get(t))}}),[a,r,y,v,e,d,g]),Object(n.useEffect)((()=>{const t={monitorId:e,dateStart:a,dateEnd:r};y(Object(b.o)(t))}),[a,r,y,v,e]),Object(n.useEffect)((()=>{y(b.n.get())}),[y]),i.a.createElement(lr,{anomalies:E,hasMLJob:g,loading:u||p,exploratoryViewLink:S,locationDurationLines:null!==(t=null==l?void 0:l.locationDurationLines)&&void 0!==t?t:[]})},ur="248px",dr=({monitorId:e})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(cr,{monitorId:e})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Qi,{height:ur,isResponsive:!1}))),mr=()=>{const e=Object(c.useDispatch)();Object(n.useEffect)((()=>{e(pe.j.get())}),[e])},pr=()=>{const e=Object(c.useDispatch)();mr(),Object(n.useEffect)((()=>{e(Object(nr.a)())}),[e]);const t=Object(I.f)();return Object(n.useEffect)((()=>{e(Object(b.T)(t)),e(pe.k.get())}),[t,e]),Object(h.useTrackPageview)({app:"uptime",path:"monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"monitor",delay:15e3}),i.a.createElement(i.a.Fragment,null,i.a.createElement(wi,{monitorId:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(dr,{monitorId:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(xn,null))},gr=({details:e,activeStep:t,performanceBreakDownView:a=!1})=>{var n,i,r,s,l;const c=null!==(n=null===(i=Object(p.useKibana)().services.application)||void 0===i?void 0:i.getUrlForApp(C.a.ID))&&void 0!==n?n:"";T([...null!=t&&t.monitor?[{text:(null==t||null===(r=t.monitor)||void 0===r?void 0:r.name)||(null==t?void 0:t.monitor.id),href:`${c}/monitor/${btoa(null==t?void 0:t.monitor.id)}`}]:[],...null!=e&&null!==(s=e.journey)&&void 0!==s&&null!==(l=s.monitor)&&void 0!==l&&l.check_group?[{text:Za(He()(null==e?void 0:e.timestamp)),href:`${c}/journey/${e.journey.monitor.check_group}/steps`}]:[],...a?[{text:o.i18n.translate("xpack.synthetics.synthetics.performanceBreakDown.label",{defaultMessage:"Performance breakdown"})}]:[]])};var hr=a(127);let fr,br;!function(e){e.Blocked="blocked",e.Dns="dns",e.Connect="connect",e.Ssl="ssl",e.Send="send",e.Wait="wait",e.Receive="receive"}(fr||(fr={})),function(e){e.Status="status",e.ResourceSize="resourceSize",e.TransferSize="transferSize",e.CertificateIssuer="certificateIssuer",e.CertificateIssueDate="certificateIssueDate",e.CertificateExpiryDate="certificateExpiryDate",e.CertificateSubject="certificateSubject",e.IP="ip",e.MimeType="mimeType",e.RequestStart="requestStart"}(br||(br={}));const Er={[fr.Blocked]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.blocked",{defaultMessage:"Queued / Blocked"}),[fr.Dns]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.dns",{defaultMessage:"DNS"}),[fr.Connect]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.connect",{defaultMessage:"Connecting"}),[fr.Ssl]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.ssl",{defaultMessage:"TLS"}),[fr.Send]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.send",{defaultMessage:"Sending request"}),[fr.Wait]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.wait",{defaultMessage:"Waiting (TTFB)"}),[fr.Receive]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.receive",{defaultMessage:"Content downloading"})},yr={[br.Status]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.status",{defaultMessage:"Status"}),[br.MimeType]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.contentType",{defaultMessage:"Content type"}),[br.RequestStart]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.requestStart",{defaultMessage:"Request start"}),[br.ResourceSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.resourceSize",{defaultMessage:"Resource size"}),[br.TransferSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.transferSize",{defaultMessage:"Transfer size"}),[br.CertificateIssuer]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssuer",{defaultMessage:"Issuer"}),[br.CertificateIssueDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssueDate",{defaultMessage:"Valid from"}),[br.CertificateExpiryDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateExpiryDate",{defaultMessage:"Valid until"}),[br.CertificateSubject]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateSubject",{defaultMessage:"Common name"}),[br.IP]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.ip",{defaultMessage:"IP"})},vr=[fr.Blocked,fr.Dns,fr.Connect,fr.Ssl,fr.Send,fr.Wait,fr.Receive];let xr;br.MimeType,fr.Dns,fr.Connect,fr.Ssl,fr.Wait,fr.Receive,function(e){e.Html="html",e.Script="script",e.Stylesheet="stylesheet",e.Media="media",e.Font="font",e.XHR="xhr",e.Other="other"}(xr||(xr={}));const Sr={[xr.Html]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.html",{defaultMessage:"HTML"}),[xr.Script]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.script",{defaultMessage:"JS"}),[xr.Stylesheet]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.stylesheet",{defaultMessage:"CSS"}),[xr.Media]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.media",{defaultMessage:"Media"}),[xr.Font]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.font",{defaultMessage:"Font"}),[xr.XHR]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.xhr",{defaultMessage:"XHR"}),[xr.Other]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.other",{defaultMessage:"Other"})},kr={"text/html":xr.Html,"application/javascript":xr.Script,"text/javascript":xr.Script,"text/css":xr.Stylesheet,"image/apng":xr.Media,"image/bmp":xr.Media,"image/gif":xr.Media,"image/x-icon":xr.Media,"image/jpeg":xr.Media,"image/png":xr.Media,"image/svg+xml":xr.Media,"image/tiff":xr.Media,"image/webp":xr.Media,"audio/wave":xr.Media,"audio/wav":xr.Media,"audio/x-wav":xr.Media,"audio/x-pn-wav":xr.Media,"audio/webm":xr.Media,"video/webm":xr.Media,"video/mp4":xr.Media,"audio/ogg":xr.Media,"video/ogg":xr.Media,"application/ogg":xr.Media,"font/otf":xr.Font,"font/ttf":xr.Font,"font/woff":xr.Font,"font/woff2":xr.Font,"application/x-font-opentype":xr.Font,"application/font-woff":xr.Font,"application/font-woff2":xr.Font,"application/vnd.ms-fontobject":xr.Font,"application/font-sfnt":xr.Font,"application/json":xr.XHR},Mr=(e,t=3)=>Number(e).toFixed(t),wr=({value:e,timing:t,mimeType:a})=>{let n=Er[t];return t===fr.Receive&&a&&(n+=` (${Sr[kr[a]]||a})`),`${n}: ${Mr(e)}ms`},Or=(e,t,a=[])=>{var n;if(!t&&0===(null==a?void 0:a.length))return!0;const i=!t||(null===(n=e.url)||void 0===n?void 0:n.includes(t)),r=!(a.length>0)||a.includes(kr[e.mimeType]);return!(!i||!r)},jr=({value:e,postFix:t})=>{if(void 0===e||-1===e)return;let a=Mr(e);return t&&(a=`${a} ${t}`),a},Ir=(e,t)=>t&&e&&t>0?e-t:e,Cr=e=>{if(void 0!==e)return Object.keys(e).map((t=>({name:t,value:`${e[t]}`})))},Tr=({item:e,index:t,requestStart:a})=>{const{certificates:n,ip:i,mimeType:r,requestHeaders:s,responseHeaders:o,url:l,resourceSize:c,transferSize:u,status:d}=e,{dns:m,connect:p,ssl:g,wait:h,receive:f,total:b}=e.timings||{},E=f&&f>0?f:b;return{x:t,url:l,requestHeaders:Cr(s),responseHeaders:Cr(o),certificates:n?[{name:yr[br.CertificateIssuer],value:n.issuer},{name:yr[br.CertificateIssueDate],value:n.validFrom?He()(n.validFrom).format("L LT"):void 0},{name:yr[br.CertificateExpiryDate],value:n.validTo?He()(n.validTo).format("L LT"):void 0},{name:yr[br.CertificateSubject],value:n.subjectName}]:void 0,details:[{name:yr[br.Status],value:d?`${d}`:void 0},{name:yr[br.MimeType],value:r},{name:yr[br.RequestStart],value:jr({value:a,postFix:"ms"})},{name:Er[fr.Dns],value:jr({value:m,postFix:"ms"})},{name:Er[fr.Connect],value:jr({value:Ir(p,g),postFix:"ms"})},{name:Er[fr.Ssl],value:jr({value:g,postFix:"ms"})},{name:Er[fr.Wait],value:jr({value:h,postFix:"ms"})},{name:Er[fr.Receive],value:jr({value:E,postFix:"ms"})},{name:yr[br.ResourceSize],value:jr({value:c?c/1e3:void 0,postFix:"KB"})},{name:yr[br.TransferSize],value:jr({value:u?u/1e3:void 0,postFix:"KB"})},{name:yr[br.IP],value:i}]}},Fr=Object(d.euiPaletteColorBlind)({rotations:2}),Lr=Object.values(fr).reduce(((e,t)=>{switch(t){case fr.Blocked:e[t]=Fr[16];break;case fr.Dns:e[t]=Fr[0];break;case fr.Connect:e[t]=Fr[7];break;case fr.Ssl:e[t]=Fr[17];break;case fr.Send:e[t]=Fr[2];break;case fr.Wait:e[t]=Fr[11];break;case fr.Receive:e[t]=Fr[0]}return e}),{}),Ar=Object.values(xr).reduce(((e,t)=>{switch(t){case xr.Html:e[t]=Fr[19];break;case xr.Script:e[t]=Fr[3];break;case xr.Stylesheet:e[t]=Fr[4];break;case xr.Media:e[t]=Fr[5];break;case xr.Font:e[t]=Fr[8];break;case xr.XHR:case xr.Other:e[t]=Fr[9]}return e}),{}),Pr={...Lr,...Ar},Dr=(e,t)=>isNaN(e)?t:`${e}. ${t}`,Rr=Object(n.createContext)({}),Nr=({children:e,data:t,markerItems:a,onElementClick:n,onProjectionClick:r,onSidebarClick:s,showOnlyHighlightedNetworkRequests:o,sidebarItems:l,legendItems:c,metadata:u,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:g,activeStep:h})=>i.a.createElement(Rr.Provider,{value:{data:t,activeStep:h,markerItems:a,showOnlyHighlightedNetworkRequests:o,sidebarItems:l,legendItems:c,metadata:u,onElementClick:n,onProjectionClick:r,onSidebarClick:s,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:g}},e),zr=()=>Object(n.useContext)(Rr);var _r=a(235);const Br=24,Ur=g.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(_r.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Hr=Object(g.euiStyled)(Ur)`
  height: ${e=>e.height?`${e.height}`:"auto"};
  overflow-y: ${e=>e.height?"scroll":"visible"};
  overflow-x: hidden;
`,$r=Object(g.euiStyled)(Ur)`
  position: sticky;
  top: 0;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  overflow-y: scroll;
  overflow-x: hidden;
`,Gr=Object(g.euiStyled)(d.EuiFlexItem)`
  margin-left: -16px;
`,qr=Object(g.euiStyled)(d.EuiFlexGroup)`
`,Wr=Object(g.euiStyled)(d.EuiPanel)`
  height: 100%;
  border-radius: 0 !important;
  border: none;
`,Vr=g.euiStyled.div`
  && {
    padding: 16px;
    z-index: ${e=>e.theme.eui.euiZLevel5};
    border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  }
`,Kr=g.euiStyled.div`
  height: ${Br}px;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  height: 100%;
  &&& {
    .echAnnotation__icon {
      top: 8px;
    }
  }
`,Jr=Object(g.euiStyled)(d.EuiFlexItem)`
  z-index: ${e=>e.theme.eui.euiZLevel5};
  min-width: 0;
`,Yr=g.euiStyled.div`
  height: ${e=>`${e.height}px`};
  overflow-y: hidden;
  overflow-x: hidden;
`,Zr=Object(g.euiStyled)(d.EuiPanel)`
  border: 0;
  height: 100%;
`,Xr=Object(g.euiStyled)(d.EuiFlexGroup)`
  height: 100%;
`,Qr=Object(g.euiStyled)(d.EuiFlexItem)`
  min-width: 0;
  padding-right: ${e=>e.theme.eui.paddingSizes.s};
  justify-content: space-around;
`,es=Object(g.euiStyled)(d.EuiFlexItem)`
  opacity: ${e=>e.isHighlighted?1:.4};
  height: 100%;
  .euiButtonEmpty {
    height: ${Br}px;
    font-size:${({theme:e})=>e.eui.euiFontSizeM};
  }
`,ts=g.euiStyled.div`
  width: 100%;
  height: ${e=>`${e.height+Br+4}px`};
  margin-top: -${28}px;
  z-index: ${e=>Math.round(e.theme.eui.euiZLevel3/(e.chartIndex+1))};
`,as=g.euiStyled.div`
  position: sticky;
  bottom: 0;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.paddingSizes.xs};
  font-size: ${e=>e.theme.eui.euiFontSizeXS};
  box-shadow: 0px -1px 4px 0px ${e=>e.theme.eui.euiColorLightShade};
`,ns=g.euiStyled.div`
  margin-top: 16px;
  max-width: 90vw;
`,is=Object(g.euiStyled)(ns)`
  background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  border-radius: ${e=>e.theme.eui.euiBorderRadius};
  color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.paddingSizes.s};
  .euiToolTip__arrow {
    background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  }
`,rs=Object(g.euiStyled)(d.EuiText)`
  line-height: 28px;
  padding: 0 ${e=>e.theme.eui.paddingSizes.m};
  border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  z-index: ${e=>e.theme.eui.euiZLevel5};
`,ss=g.euiStyled.div`
    position: relative;
`,os=({items:e,render:t})=>{const{onSidebarClick:a}=zr(),r=Object(n.useMemo)((()=>a),[a]);return i.a.createElement(Jr,{grow:2},i.a.createElement(Yr,{height:e.length*Br,"data-test-subj":"wfSidebarContainer"},i.a.createElement(Zr,{paddingSize:"none",hasBorder:!1,hasShadow:!1},i.a.createElement(Xr,{direction:"column",gutterSize:"none",responsive:!1},e.map(((e,a)=>i.a.createElement(Qr,{key:a},t(e,a,r))))))))},ls=Object(g.euiStyled)(d.EuiFlexItem)`
  margin-right: ${e=>e.theme.eui.paddingSizes.m};
  max-width: 7%;
  min-width: 160px;
`,cs=({items:e,render:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",wrap:!0},e.map(((e,a)=>i.a.createElement(ls,{key:a},t(e,a)))));var us=a(33);const ds=()=>{const[e]=Object(p.useUiSetting$)("theme:darkMode");return Object(n.useMemo)((()=>e?us.EUI_CHARTS_THEME_DARK.theme:us.EUI_CHARTS_THEME_LIGHT.theme),[e])},ms=Object(g.euiStyled)(d.EuiText)`
  font-weight: bold;
`,ps=Object(g.euiStyled)(d.EuiHorizontalRule)`
  background-color: ${e=>e.theme.eui.euiColorDarkShade};
`,gs=({text:e,url:t})=>{const{data:a,renderTooltipItem:n,sidebarItems:r}=zr(),s=a.filter((e=>{var a;return e.x===(null==r||null===(a=r.find((e=>e.url===t)))||void 0===a?void 0:a.index)&&e.config.tooltipProps&&e.config.showTooltip}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ms,null,e),i.a.createElement(ps,{margin:"none"}),i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.map(((e,t)=>i.a.createElement(d.EuiFlexItem,{key:t},n(e.config.tooltipProps))))))};function hs({title:e,field:t}){const{activeStep:a}=zr();return a?i.a.createElement(Sa,{field:t,title:e,step:a}):null}function fs({field:e,label:t}){const[a,r]=Object(n.useState)(!1);return e?i.a.createElement(d.EuiPopover,{isOpen:a,closePopover:()=>r(!1),anchorPosition:"downLeft",panelStyle:{paddingBottom:0,paddingLeft:4},zIndex:100,button:i.a.createElement(d.EuiButtonIcon,{"aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.openEmbeddableButton.label",{defaultMessage:"Use this icon button to show metrics for this annotation marker."}),iconType:"dot",iconSize:"l",color:"text",onClick:()=>r((e=>!e))})},i.a.createElement(hs,{title:t,field:e})):i.a.createElement(d.EuiIcon,{"aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.noFieldIcon.label",{defaultMessage:"An icon indicating that this marker has no field associated with it"}),type:"dot",size:"l"})}function bs(){const{markerItems:e}=zr(),t=Object(h.useTheme)(),a=Object(n.useMemo)((()=>(null!=e?e:[]).reduce(((e,t)=>{var a;return e.set(t.offset,[...null!==(a=e.get(t.offset))&&void 0!==a?a:[],t]),e}),new Map)),[e]),r=Object(n.useMemo)((()=>Array.from(a.entries()).map((([e,a])=>{var n,i,r;let s=(null!=a?a:[]).map((({id:e})=>e)).filter(((e,t,a)=>a.indexOf(e)===t));s.length>1&&(s=s.filter((e=>"layoutShift"!==e)));const o=s.map((e=>{var a,n;return null!==(a=null===(n=Es(e,t))||void 0===n?void 0:n.label)&&void 0!==a?a:e})).join(" / "),l=s[0],c=Es(l,t);return{id:l,offset:e,label:o,field:null!==(n=null==c?void 0:c.field)&&void 0!==n?n:"",color:null!==(i=null==c?void 0:c.color)&&void 0!==i?i:t.eui.euiColorMediumShade,strokeWidth:null!==(r=null==c?void 0:c.strokeWidth)&&void 0!==r?r:1}}))),[a,t]);return e?i.a.createElement(ys,null,r.map((({id:e,offset:t,label:a,field:n,color:r,strokeWidth:s})=>{const l=`${e}-${t}`;return i.a.createElement(Oi.LineAnnotation,{key:l,id:l,domainType:Oi.AnnotationDomainType.YDomain,dataValues:[{dataValue:t,details:a,header:o.i18n.translate("xpack.synthetics.synthetics.waterfall.offsetUnit",{defaultMessage:"{offset} ms",values:{offset:t}})}],marker:i.a.createElement(fs,{field:n,label:a}),style:{line:{strokeWidth:s,stroke:r,opacity:1}}})}))):null}function Es(e,t){switch(e){case"domContentLoaded":return{label:Ms,color:t.eui.euiColorVis0,field:"browser.experience.dcl.us",strokeWidth:2};case"firstContentfulPaint":return{label:vs,color:t.eui.euiColorVis1,field:"browser.experience.fcp.us",strokeWidth:2};case"largestContentfulPaint":return{label:xs,color:t.eui.euiColorVis2,field:"browser.experience.lcp.us",strokeWidth:2};case"layoutShift":return{label:Ss,color:t.eui.euiColorVis6,field:"",strokeWidth:1};case"loadEvent":return{label:ks,color:t.eui.euiColorVis9,field:"browser.experience.load.us",strokeWidth:2}}}const ys=g.euiStyled.span`
  &&& {
    > .echAnnotation__icon {
      top: 8px;
    }
  }
`,vs=o.i18n.translate("xpack.synthetics.synthetics.waterfall.fcpLabel",{defaultMessage:"First contentful paint"}),xs=o.i18n.translate("xpack.synthetics.synthetics.waterfall.lcpLabel",{defaultMessage:"Largest contentful paint"}),Ss=o.i18n.translate("xpack.synthetics.synthetics.waterfall.layoutShiftLabel",{defaultMessage:"Layout shift"}),ks=o.i18n.translate("xpack.synthetics.synthetics.waterfall.loadEventLabel",{defaultMessage:"Load event"}),Ms=o.i18n.translate("xpack.synthetics.synthetics.waterfall.domContentLabel",{defaultMessage:"DOM Content Loaded"}),ws=e=>{var t;const{data:a,sidebarItems:r}=zr();return Object(n.useMemo)((()=>{const t=null==r?void 0:r.find((t=>{var a;return t.index===(null===(a=e.header)||void 0===a?void 0:a.value)}));return a.filter((t=>{var a;return t.x===(null===(a=e.header)||void 0===a?void 0:a.value)&&t.config.showTooltip&&t.config.tooltipProps})).length?i.a.createElement(is,null,t&&i.a.createElement(gs,{text:Dr(t.index+1,t.url),url:t.url})):null}),[a,r,null===(t=e.header)||void 0===t?void 0:t.value])},Os=({chartData:e,tickFormat:t,domain:a,barStyleAccessor:r,index:s})=>{var o;const l=ds(),{onElementClick:c,onProjectionClick:u}=zr(),d=Object(n.useMemo)((()=>c),[c]),m=Object(n.useMemo)((()=>u),[u]),p=Object(n.useCallback)(t,[t]);return i.a.createElement(ts,{height:(g=e,24*new Set(g.map((e=>e.x))).size),chartIndex:s,"data-test-subj":"wfDataOnlyBarChart"},i.a.createElement(Oi.Chart,{className:"data-chart"},i.a.createElement(Oi.Settings,{showLegend:!1,rotation:90,tooltip:{boundary:null!==(o=document.getElementById("app-fixed-viewport"))&&void 0!==o?o:void 0,customTooltip:ws},theme:l,onProjectionClick:m,onElementClick:d}),i.a.createElement(Oi.Axis,{"aria-hidden":!0,id:"time",position:Oi.Position.Top,tickFormat:p,domain:a,showGridLines:!0,style:{axisLine:{visible:!1}}}),i.a.createElement(Oi.BarSeries,{id:"waterfallItems",xScaleType:Oi.ScaleType.Ordinal,yScaleType:Oi.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:r,data:e}),i.a.createElement(bs,null)));var g},js=({tickFormat:e,domain:t,barStyleAccessor:a})=>{const n=ds();return i.a.createElement(Kr,null,i.a.createElement(Oi.Chart,{className:"axis-only-chart","data-test-subj":"axisOnlyChart"},i.a.createElement(Oi.Settings,{showLegend:!1,rotation:90,tooltip:{type:Oi.TooltipType.None},theme:n}),i.a.createElement(Oi.Axis,{id:"time",position:Oi.Position.Top,tickFormat:e,domain:t,showGridLines:!0}),i.a.createElement(Oi.BarSeries,{"aria-hidden":!0,id:"waterfallItems",xScaleType:Oi.ScaleType.Ordinal,yScaleType:Oi.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:a,data:[{x:0,y0:0,y1:1}]}),i.a.createElement(bs,null)))},Is=({totalNetworkRequests:e,fetchedNetworkRequests:t,highlightedNetworkRequests:a,showHighlightedNetworkRequests:n})=>i.a.createElement(rs,{size:"xs",color:"subdued"},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage",defaultMessage:"{numNetworkRequests} network requests",values:{numNetworkRequests:e>t?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage.first",defaultMessage:"First {count}",values:{count:`${t}/${e}`}}):e}})," ",n&&a>=0&&i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsHighlightedMessage",defaultMessage:"({numHighlightedRequests} match the filter)",values:{numHighlightedRequests:a}})),e>t&&i.a.createElement(d.EuiIconTip,{type:"iInCircle",content:o.i18n.translate("xpack.synthetics.synthetics.waterfall.requestsTotalMessage.info",{defaultMessage:"Waterfall view only shows up to 1000 requests"})})),Cs=({tickFormat:e,domain:t,barStyleAccessor:a,renderSidebarItem:r,renderLegendItem:s,renderFilter:o,renderFlyout:l,maxHeight:c="800px",fullHeight:u=!1})=>{const{data:m,showOnlyHighlightedNetworkRequests:p,sidebarItems:g,legendItems:h,totalNetworkRequests:f,highlightedNetworkRequests:b,fetchedNetworkRequests:E}=zr(),{width:y}=ct()(),v=Object(n.useRef)(null),x=Object(n.useRef)(null),[S,k]=Object(n.useState)(c),M=!(!g||!r),w=!!(h&&h.length>0&&s);Object(n.useEffect)((()=>{if(u&&v.current&&x.current){const e=v.current.getBoundingClientRect().top,t=x.current.getBoundingClientRect().height;k(`calc(100vh - ${e+33+t}px)`)}}),[v,u,x,y]);const O=(({data:e})=>{const[t,a]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=[];if((null==e?void 0:e.length)>0){let a=0;const n=new Set;let i;e.forEach((e=>{150===n.size&&e.x>i&&(a++,n.clear()),n.add(e.x),i=e.x,t[a]?t[a].push(e):t.push([e])}))}a(t)}),[e]),t})({data:m});return i.a.createElement(ss,null,i.a.createElement($r,null,i.a.createElement(qr,{gutterSize:"none",responsive:!1},M&&i.a.createElement(Jr,{grow:2},i.a.createElement(Wr,{paddingSize:"none",hasShadow:!1}),i.a.createElement(Is,{totalNetworkRequests:f,highlightedNetworkRequests:b,fetchedNetworkRequests:E,showHighlightedNetworkRequests:p}),o&&i.a.createElement(Vr,null,o())),i.a.createElement(Gr,{grow:!M||8,"data-test-subj":"axisOnlyWrapper"},i.a.createElement(js,{domain:t,barStyleAccessor:a,tickFormat:e})))),i.a.createElement(Hr,{height:S,"data-test-subj":"waterfallOuterContainer",ref:v},i.a.createElement(d.EuiFlexGroup,{gutterSize:"none",responsive:!1},M&&i.a.createElement(os,{items:g,render:r}),i.a.createElement(Gr,{grow:!M||8,"data-test-subj":"dataOnlyWrapper"},O.map(((n,r)=>i.a.createElement(Os,{index:r,key:r,chartData:n,domain:t,barStyleAccessor:a,tickFormat:e})))))),w&&i.a.createElement(as,{ref:x},i.a.createElement(cs,{items:h,render:s})),l&&l())},Ts=g.euiStyled.span`
  position: relative;
  display: inline-flex;
  align-items: center;
  .euiToolTipAnchor {
    min-width: 0;
  }
`,Fs=g.euiStyled.span`
  overflow: hidden;
  display: flex;
  align-items: center;
`,Ls=Object(g.euiStyled)(d.EuiText)`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  margin-right: ${e=>e.theme.eui.euiSizeXS};
  line-height: ${Br}px;
  text-align: right;
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
`,As=g.euiStyled.span`
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  line-height: ${Br}px;
  text-align: left;
`,Ps=g.euiStyled.span`
  flex-shrink: 0;
  line-height: ${Br}px;
  text-align: left;
`,Ds=Object(g.euiStyled)(d.EuiButtonEmpty)`
  &&& {
    border: none;

    .euiButtonContent {
      display: inline-block;
      padding: 0;
    }
  }
`,Rs=Object(g.euiStyled)(d.EuiIcon)`
  margin-right: ${e=>e.theme.eui.euiSizeXS};
`,Ns=({index:e,ariaLabel:t,text:a,onClick:r,setButtonRef:s,url:l,highestIndex:c})=>{const u=a.startsWith("https://"),m=a.replace(/https:\/\/www.|http:\/\/www.|http:\/\/|https:\/\//,""),p=Object(n.useMemo)((()=>((e="")=>{const t=e.split(""),a=t.length-12>0?t.length-12:null,n=a?t.splice(a):[];return{first:t.join(""),last:n.join("")}})(m)),[m]);return i.a.createElement(Ts,{"aria-label":t,"data-test-subj":"middleTruncatedTextContainer"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",{"data-test-subj":"middleTruncatedTextSROnly"},a)),i.a.createElement(is,{as:d.EuiToolTip,content:i.a.createElement(gs,{text:Dr(e,a),url:l}),"data-test-subj":"middleTruncatedTextToolTip",delay:"long",position:"top"},i.a.createElement(i.a.Fragment,null,r?i.a.createElement(Ds,{onClick:r,"data-test-subj":`middleTruncatedTextButton${e}`,buttonRef:s,flush:"left"},i.a.createElement(Fs,null,i.a.createElement(Ls,{color:"subdued",size:"s",style:{minWidth:String(c).length+1+"ch"}},e+"."),u&&i.a.createElement(Rs,{type:"lock",size:"s",color:"success","aria-label":o.i18n.translate("xpack.synthetics.waterfallChart.sidebar.url.https",{defaultMessage:"https"})}),i.a.createElement(As,null,p.first),i.a.createElement(Ps,null,p.last))):i.a.createElement(Fs,{"aria-hidden":!0},i.a.createElement(As,null,e,". ",p.first),i.a.createElement(Ps,null,p.last)))),i.a.createElement("span",null,i.a.createElement(d.EuiLink,{href:l,external:!0,target:"_blank"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.resource.externalLink",defaultMessage:"Open resource in new tab"}))))))},zs=o.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.placeholder",{defaultMessage:"Filter network requests"}),_s=o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.filterScreenreaderLabel",{defaultMessage:"Filter by"}),Bs=o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.removeFilterScreenReaderLabel",{defaultMessage:"Remove filter by"}),Us=o.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.popover",{defaultMessage:"Click to open waterfall filters"}),Hs=o.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.collapseRequestsLabel",{defaultMessage:"Collapse to only show matching requests"}),$s=o.i18n.translate("xpack.synthetics.synthetics.waterfall.sidebar.filterMatchesScreenReaderLabel",{defaultMessage:"Resource matches filter"}),Gs=[{label:Sr[xr.XHR],mimeType:xr.XHR},{label:Sr[xr.Html],mimeType:xr.Html},{label:Sr[xr.Script],mimeType:xr.Script},{label:Sr[xr.Stylesheet],mimeType:xr.Stylesheet},{label:Sr[xr.Font],mimeType:xr.Font},{label:Sr[xr.Media],mimeType:xr.Media}],qs=({query:e,setQuery:t,activeFilters:a,setActiveFilters:r,onlyHighlighted:s,setOnlyHighlighted:o})=>{const[l,c]=Object(n.useState)(e),[u,m]=Object(n.useState)(!1),p=Object(h.useUiTracker)({app:"uptime"});return dt()((()=>{t(l)}),250,[l]),Object(n.useEffect)((()=>{e||a.length>0||o(!1)}),[a.length,o,e]),Object(n.useEffect)((()=>{e&&p({metric:"waterfall_filter_input_changed",metricType:h.METRIC_TYPE.CLICK})}),[e,p]),Object(n.useEffect)((()=>{s&&p({metric:"waterfall_filter_collapse_checked",metricType:h.METRIC_TYPE.CLICK})}),[s,p]),Object(n.useEffect)((()=>{a.length>0&&p({metric:"waterfall_filters_applied_changed",metricType:h.METRIC_TYPE.CLICK})}),[a,p]),i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFieldSearch,{fullWidth:!0,"aria-label":zs,placeholder:zs,onChange:e=>{c(e.target.value)},value:l})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonIcon,{"aria-label":Us,iconType:"filter",onClick:()=>m((e=>!e)),color:a.length>0?"primary":"text",isSelected:a.length>0}),isOpen:u,closePopover:()=>m(!1),anchorPosition:"rightCenter"},i.a.createElement(d.EuiFilterGroup,null,Gs.map((({label:e,mimeType:t})=>i.a.createElement(d.EuiFilterButton,{hasActiveFilters:a.includes(t),onClick:()=>{return e=t,void r((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},key:e,withNext:!0,"aria-label":`${a.includes(t)?Bs:_s} ${e}`},e)))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiCheckbox,{compressed:!0,disabled:!(e||a.length>0),id:"onlyHighlighted",label:Hs,checked:s,onChange:e=>{o(e.target.checked)}}))))},Ws=Ee()(d.EuiText).withConfig({displayName:"StyledText",componentId:"sc-xlte7y-0"})(["width:100%;"]);class waterfall_flyout_table_TableWithoutHeader extends d.EuiBasicTable{renderTableHead(){return i.a.createElement(i.a.Fragment,null)}}const Vs=e=>{const{rows:t,title:a}=e,r=Object(n.useMemo)((()=>[{field:"name",name:"",sortable:!1,render:(e,t)=>i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("strong",null,t.name))},{field:"value",name:"",sortable:!1,render:(e,t)=>{var a;return i.a.createElement(Ws,{size:"xs",textAlign:"right"},null!==(a=t.value)&&void 0!==a?a:"--")}}]),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,null,i.a.createElement("h4",null,a)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(waterfall_flyout_table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsive:!1,columns:r,items:t}))},Ks=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.details",{defaultMessage:"Details"}),Js=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.certificates",{defaultMessage:"Certificate headers"}),Ys=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.requestHeaders",{defaultMessage:"Request headers"}),Zs=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.responseHeaders",{defaultMessage:"Response headers"}),Xs=Ee()(d.EuiFlyout).withConfig({displayName:"FlyoutContainer",componentId:"sc-15jwikd-0"})(["z-index:",";"],(e=>e.theme.eui.euiZLevel5)),Qs=({flyoutData:e,isFlyoutVisible:t,onFlyoutClose:a})=>{const r=Object(n.useRef)(null),s=Object(h.useUiTracker)({app:"uptime"});if(Object(n.useEffect)((()=>{var a;t&&e&&r.current&&(null===(a=r.current)||void 0===a||a.focus())}),[e,t,r]),!e||!t)return null;const{x:o,url:l,details:c,certificates:u,requestHeaders:m,responseHeaders:p}=e;return s({metric:"waterfall_flyout",metricType:h.METRIC_TYPE.CLICK}),i.a.createElement("div",{"tab-index":-1,ref:r,"data-test-subj":"waterfallFlyout","aria-labelledby":"flyoutTitle"},i.a.createElement(Xs,{size:"s",onClose:a},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",{id:"flyoutTitle"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ns,{index:o+1,text:l,url:l,ariaLabel:l,highestIndex:o+1}))))),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(Vs,{rows:c,title:Ks}),!!m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Vs,{rows:m,title:Ys})),!!p&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Vs,{rows:p,title:Zs})),!!u&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Vs,{rows:u,title:Js})))))},eo=({item:e,highestIndex:t,renderFilterScreenReaderText:a,onClick:r})=>{const[s,o]=Object(n.useState)(),{status:l,offsetIndex:c,index:u,isHighlighted:m,url:p}=e,g=Object(n.useMemo)((()=>{if(r)return()=>r({buttonRef:s,networkItemIndex:u})}),[s,u,r]),h=Object(n.useCallback)((e=>o(e)),[o]),f=e.url,b=`${m&&a?`${$s} `:""}${f}`;return i.a.createElement(es,{isHighlighted:m,"data-test-subj":m?"sideBarHighlightedItem":"sideBarDimmedItem"},l&&((E=l)>=400&&E<=499||E>=500&&E<=599||301===E||307===E||308===E)?i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Ns,{index:c,text:f,url:p,ariaLabel:b,onClick:g,setButtonRef:h,highestIndex:t})),i.a.createElement(d.EuiFlexItem,{component:"span",grow:!1},i.a.createElement(d.EuiBadge,{color:"danger"},l))):i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Ns,{index:c,text:f,url:p,ariaLabel:b,onClick:g,setButtonRef:h,highestIndex:t}))));var E},to=e=>i.a.createElement(d.EuiHealth,{color:e.colour,className:"eui-textNoWrap"},e.name),ao=({data:e,total:t,markerItems:a,activeStep:r})=>{const[s,o]=Object(n.useState)(""),[l,c]=Object(n.useState)([]),[u,m]=Object(n.useState)(!1),[p]=Object(n.useState)(e),g=l.length>0,{series:f,domain:b,metadata:E,totalHighlightedRequests:y}=Object(n.useMemo)((()=>((e,t=!1,a,n)=>{const i=e=>e.requestSentTime;let r=1/0;e.forEach((e=>r=Math.min(r,i(e))));const s=[],o=[];let l=0;e.forEach(((e,t)=>{const c=(e=>{const t=e&&kr[e]?kr[e]:xr.Other;return Pr[t]})(e.mimeType);let u=i(e)-r;o.push(Tr({item:e,index:t,requestStart:u}));const d=Or(e,a,n);if(d&&l++,!e.timings)return void s.push({x:t,y0:0,y:0,config:{isHighlighted:d,showTooltip:!1}});let m=!1;if(vr.forEach((a=>{const n=((e,t)=>{if(e)return t===fr.Connect?Ir(e.connect,e.ssl):e[t]})(e.timings,a);if(n&&n>=0){m=!0;const i=a===fr.Receive?c:Pr[a],r=u+n;s.push({x:t,y0:u,y:r,config:{id:t,colour:i,isHighlighted:d,showTooltip:!0,tooltipProps:{value:wr({value:r-u,timing:a,mimeType:e.mimeType}),colour:i}}}),u=r}})),!m){const a=e.timings.total,n=-1!==a;s.push({x:t,y0:n?u:0,y:n?u+e.timings.total:0,config:{isHighlighted:d,colour:n?c:"",showTooltip:n,tooltipProps:n?{value:wr({value:a,timing:fr.Receive,mimeType:e.mimeType}),colour:c}:void 0}})}}));const c=s.map((e=>e.y)),u={min:0,max:Math.max(...c)};let d=s;return t&&(d=s.filter((e=>e.config.isHighlighted))),{series:d,domain:u,metadata:o,totalHighlightedRequests:l}})(p,u,s,l)),[p,s,l,u]),v=Object(n.useMemo)((()=>((e,t,a,n)=>{const i=e.map(((e,t)=>{const i=Or(e,a,n),r=t+1,{url:s,status:o,method:l}=e;return{url:s,status:o,method:l,isHighlighted:i,offsetIndex:r,index:t}}));return t?i.filter((e=>e.isHighlighted)):i})(p,u,s,l)),[p,s,l,u]),x=Object(n.useMemo)((()=>(()=>{let e=[];Object.values(fr).forEach((t=>{t!==fr.Receive&&(e=[...e,{name:Er[t],colour:Lr[t]}])}));let t=[];return Object.values(xr).forEach((e=>{t=[...t,{name:Sr[e],colour:Ar[e]}]})),[...e,...t]})()),[]),{flyoutData:S,onBarClick:k,onProjectionClick:M,onSidebarClick:w,isFlyoutVisible:O,onFlyoutClose:j}=(e=>{const[t,a]=Object(n.useState)(!1),[i,r]=Object(n.useState)(void 0),[s,o]=Object(n.useState)(),l=Object(n.useCallback)((e=>{r(e),a(!0)}),[a,r]),c=Object(n.useCallback)((()=>{var e;a(!1),null==s||null===(e=s.current)||void 0===e||e.focus()}),[s,a]);return{flyoutData:i,onBarClick:Object(n.useCallback)((([t])=>{a(!1);const{datum:n}=t[0],i=e[n.config.id];l(i)}),[e,l]),onProjectionClick:Object(n.useCallback)((t=>{a(!1);const{x:n}=t;if("number"==typeof n&&n>=0){const t=e[n];l(t)}}),[e,l]),onSidebarClick:Object(n.useCallback)((({buttonRef:n,networkItemIndex:i})=>{if(t&&n===s)a(!1);else{const t=e[i];o(n),l(t)}}),[s,l,t,e,a]),isFlyoutVisible:t,onFlyoutClose:c}})(E),I=Object(n.useCallback)((()=>i.a.createElement(qs,{query:s,setQuery:o,activeFilters:l,setActiveFilters:c,onlyHighlighted:u,setOnlyHighlighted:m})),[l,c,u,m,s,o]),C=Object(n.useCallback)((()=>i.a.createElement(Qs,{flyoutData:S,onFlyoutClose:j,isFlyoutVisible:O})),[S,O,j]),T=Math.max(...f.map((e=>e.x))),F=Object(n.useCallback)((e=>i.a.createElement(eo,{item:e,renderFilterScreenReaderText:g&&!u,onClick:w,highestIndex:T})),[g,u,w,T]);return Object(h.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:h.METRIC_TYPE.COUNT}),Object(h.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:h.METRIC_TYPE.COUNT,delay:15e3}),i.a.createElement(Nr,{activeStep:r,markerItems:a,totalNetworkRequests:t,fetchedNetworkRequests:p.length,highlightedNetworkRequests:y,data:f,onElementClick:Object(n.useCallback)(k,[k]),onProjectionClick:Object(n.useCallback)(M,[M]),onSidebarClick:w,showOnlyHighlightedNetworkRequests:u,sidebarItems:v,legendItems:x,metadata:E,renderTooltipItem:Object(n.useCallback)((e=>i.a.createElement(d.EuiHealth,{color:String(null==e?void 0:e.colour)},null==e?void 0:e.value)),[])},i.a.createElement(Cs,{tickFormat:Object(n.useCallback)((e=>`${Number(e).toFixed(0)} ms`),[]),domain:b,barStyleAccessor:Object(n.useCallback)((({datum:e})=>{var t,a;return null!==(t=e.config)&&void 0!==t&&t.isHighlighted?e.config.colour:{rect:{fill:null===(a=e.config)||void 0===a?void 0:a.colour,opacity:"0.1"}}}),[]),renderSidebarItem:F,renderLegendItem:to,renderFlyout:C,renderFilter:I,fullHeight:!0}))},no="browser.relative_trace.type",io="browser.relative_trace.name",ro="browser.relative_trace.start.us",so="navigationStart",oo=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfallNoData",{defaultMessage:"No waterfall data could be found for this step"}),lo=({checkGroup:e,stepIndex:t,activeStep:a})=>{var r,s;const l=Object(c.useDispatch)();Object(n.useEffect)((()=>{e&&t&&l(Object(hr.a)({checkGroup:e,stepIndex:t}))}),[l,t,e]);const u=null===(r=Object(c.useSelector)(A.v)[null!=e?e:""])||void 0===r?void 0:r[t],m=u&&!u.loading,p=null==u?void 0:u.isWaterfallSupported,g=(null==u||null===(s=u.events)||void 0===s?void 0:s.length)>0,{metrics:f}=(({checkGroup:e,hasNavigationRequest:t,stepIndex:a})=>{const{settings:n}=Object(c.useSelector)(A.A),i=(null==n?void 0:n.heartbeatIndices)||"",{data:r,loading:s}=Object(h.useEsSearch)(t?Object(h.createEsParams)({index:i,body:{query:{bool:{filter:[{term:{"synthetics.step.index":a}},{term:{"monitor.check_group":e}},{term:{"synthetics.type":"step/metrics"}}]}},fields:["browser.*"],size:1e3,_source:!1}}):{},[i,e,t],{name:"getWaterfallStepMetrics"});if(!t)return{metrics:[],loading:!1};const o=[];if(r&&t){const e=r.hits.hits;let t=0,a=!1;e.forEach((({fields:e})=>{var n;if("mark"===(null===(n=e[no])||void 0===n?void 0:n[0])){const{[io]:n,[ro]:i}=e;(null==n?void 0:n[0])===so&&(t=null==i?void 0:i[0],a=!0)}})),a&&e.forEach((({fields:e})=>{var a;if("mark"===(null===(a=e[no])||void 0===a?void 0:a[0])){const{[io]:a,[ro]:n}=e;(null==a?void 0:a[0])!==so&&o.push({id:null==a?void 0:a[0],offset:((null==n?void 0:n[0])-t)/1e3})}}))}return{metrics:o,loading:s}})({checkGroup:e,stepIndex:t,hasNavigationRequest:null==u?void 0:u.hasNavigationRequest});return i.a.createElement(i.a.Fragment,null,!m&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingChart,{size:"xl","aria-label":o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfall.loading",{defaultMessage:"Waterfall chart loading"})}))),m&&!g&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{textAlign:"center"},i.a.createElement("p",null,oo)))),m&&g&&p&&i.a.createElement(ao,{data:(b=u.events,b.sort(((e,t)=>e.requestSentTime-t.requestSentTime))),markerItems:f,total:u.total,activeStep:a}),m&&g&&!p&&i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.title",defaultMessage:"Waterfall chart unavailable"}),color:"warning",iconType:"help"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.description",defaultMessage:"The waterfall chart cannot be shown. You may be using an older version of the Synthetic Agent. Please check the version and consider upgrading."})));var b},co=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.noData",{defaultMessage:"No data could be found for this step"}),uo=({checkGroup:e,stepIndex:t})=>{const{activeStep:a,journey:n}=fo();return gr({details:null==n?void 0:n.details,activeStep:a,performanceBreakDownView:!0}),i.a.createElement(i.a.Fragment,null,(!n||n.loading)&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}))),n&&!a&&!n.loading&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{textAlign:"center"},i.a.createElement("p",null,co)))),n&&a&&!n.loading&&i.a.createElement(lo,{checkGroup:e,stepIndex:t,activeStep:a}))},mo=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousCheckButtonText",{defaultMessage:"Previous check"}),po=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextCheckButtonText",{defaultMessage:"Next check"}),go=({previousCheckGroup:e,dateFormat:t,handleNextRun:a,handlePreviousRun:n,checkTimestamp:r,nextCheckGroup:s})=>i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:n,disabled:!e,iconType:"arrowLeft","aria-label":mo},mo)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},He()(r).format(t))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:a,disabled:!s,iconType:"arrowRight",iconSide:"right","aria-label":po},po))),ho=({stepIndex:e,totalSteps:t,handleNextStep:a,handlePreviousStep:n,hasNextStep:r,hasPreviousStep:s})=>i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:n,disabled:!s,iconType:"arrowLeft"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:e,totalSteps:t}}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:a,disabled:!r,iconType:"arrowRight"}))))),fo=()=>{var e,t,a,i,r;const s=Object(u.useHistory)(),o=Object(c.useDispatch)(),{checkGroupId:l,stepIndex:d}=Object(u.useParams)();Object(n.useEffect)((()=>{l&&o(Object(bn.a)({checkGroup:l,syntheticEventTypes:["step/end"]}))}),[o,l]);const m=Number(d),p=null!==(e=Object(c.useSelector)(A.m)[l])&&void 0!==e?e:null,g=Object(n.useMemo)((()=>{var e;return{hasPreviousStep:m>1,activeStep:null==p||null===(e=p.steps)||void 0===e?void 0:e.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===m})),hasNextStep:!!(p&&p.steps&&m<p.steps.length)}}),[p,m]),h=Object(n.useCallback)((()=>{s.push(`/journey/${l}/step/${m+1}`)}),[s,l,m]),f=Object(n.useCallback)((()=>{s.push(`/journey/${l}/step/${m-1}`)}),[s,l,m]),b=Object(n.useCallback)((()=>{var e,t;s.push(`/journey/${null==p||null===(e=p.details)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.checkGroup}/step/1`)}),[s,null==p||null===(t=p.details)||void 0===t||null===(a=t.next)||void 0===a?void 0:a.checkGroup]),E=Object(n.useCallback)((()=>{var e,t;s.push(`/journey/${null==p||null===(e=p.details)||void 0===e||null===(t=e.previous)||void 0===t?void 0:t.checkGroup}/step/1`)}),[s,null==p||null===(i=p.details)||void 0===i||null===(r=i.previous)||void 0===r?void 0:r.checkGroup]);return{checkGroup:l,journey:p,stepIndex:m,...g,handleNextStep:h,handlePreviousStep:f,handleNextRun:b,handlePreviousRun:E}},bo=()=>{var e,t;const{activeStep:a,journey:n}=fo();return i.a.createElement(i.a.Fragment,null,n&&a&&(null===(e=a.synthetics)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.name))},Eo=()=>{var e,t,a,n,r;const[s]=Object(p.useUiSetting$)("dateFormat"),{journey:o,handleNextRun:l,handlePreviousRun:c}=fo();return o?i.a.createElement(go,{dateFormat:s,handleNextRun:l,handlePreviousRun:c,nextCheckGroup:null===(e=o.details)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.checkGroup,previousCheckGroup:null===(a=o.details)||void 0===a||null===(n=a.previous)||void 0===n?void 0:n.checkGroup,checkTimestamp:null===(r=o.details)||void 0===r?void 0:r.timestamp}):null},yo=()=>{var e,t,a;const{activeStep:n,hasPreviousStep:r,hasNextStep:s,handleNextStep:o,handlePreviousStep:l,journey:c,stepIndex:u}=fo();return c&&n?i.a.createElement(ho,{stepName:null!==(e=null===(t=n.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.name)&&void 0!==e?e:"",stepIndex:u,totalSteps:c.steps.length,hasPreviousStep:r,hasNextStep:s,handlePreviousStep:l,handleNextStep:o}):null},vo=()=>{mr();const{checkGroupId:e,stepIndex:t}=Object(u.useParams)();Object(h.useTrackPageview)({app:"uptime",path:"stepDetail"}),Object(h.useTrackPageview)({app:"uptime",path:"stepDetail",delay:15e3});const a=Object(c.useDispatch)();return Object(n.useEffect)((()=>{a(Object(nr.a)())}),[a]),i.a.createElement(uo,{checkGroup:e,stepIndex:Number(t)})},xo=({onChange:e,loading:t,formFields:a,fieldErrors:n,isDisabled:r})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.indicesSectionTitle",defaultMessage:"Indices"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesTitle",defaultMessage:"Uptime indices"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesDescription",defaultMessage:"Index pattern for matching indices that contain Heartbeat data"})},i.a.createElement(d.EuiFormRow,{describedByIds:["heartbeatIndices"],error:null==n?void 0:n.heartbeatIndices,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,l.i.heartbeatIndices)}}),isInvalid:!(null==n||!n.heartbeatIndices),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesLabel",defaultMessage:"Heartbeat indices"})},i.a.createElement(d.EuiFieldText,{"data-test-subj":"heartbeat-indices-input-"+(t?"loading":"loaded"),fullWidth:!0,disabled:r,isLoading:t,value:(null==a?void 0:a.heartbeatIndices)||"",onChange:t=>e({heartbeatIndices:t.currentTarget.value})})))),So={ageInputAriaLabel:o.i18n.translate("xpack.synthetics.sourceConfiguration.ageLimitThresholdInput.ariaLabel",{defaultMessage:"An input that controls the maximum number of days for which a TLS certificate may be valid before Kibana will show a warning."}),expirationInputAriaLabel:o.i18n.translate("xpack.synthetics.sourceConfiguration.certificateExpirationThresholdInput.ariaLabel",{defaultMessage:"An input that controls the minimum number of days remaining for TLS certificate expiration before Kibana will show a warning."})},ko={inputPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.selectConnector",{defaultMessage:"Please select one or more connectors"}),emailPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.emailConnectorPlaceHolder",{defaultMessage:"To: Email for email connector"})},Mo=({loading:e,onChange:t,formFields:a,fieldErrors:n,isDisabled:r})=>{var s,o;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.certificationSectionTitle",defaultMessage:"Certificate Expiration"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.expirationThreshold",defaultMessage:"Expiration/Age Thresholds"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.certificateThresholdDescription",defaultMessage:"Change the threshold for displaying and alerting on certificate errors. Note: this will affect any configured alerts."})},i.a.createElement(d.EuiFormRow,{describedByIds:["errorState"],error:null==n?void 0:n.expirationThresholdError,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.expirationThresholdDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,l.i.certExpirationThreshold)}}),isInvalid:!(null==n||!n.expirationThresholdError),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.errorStateLabel",defaultMessage:"Expiration threshold"})},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiFieldText,{"aria-label":So.expirationInputAriaLabel,"data-test-subj":"expiration-threshold-input-"+(e?"loading":"loaded"),fullWidth:!0,disabled:r,isInvalid:!(null==n||!n.expirationThresholdError),isLoading:e,value:null!==(s=null==a?void 0:a.certExpirationThreshold)&&void 0!==s?s:"",onChange:e=>t({certExpirationThreshold:Number(e.target.value)||void 0})})),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageLimit.units.days",defaultMessage:"Days"}))))),i.a.createElement(d.EuiFormRow,{describedByIds:["warningState"],error:null==n?void 0:n.ageThresholdError,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageThresholdDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,l.i.certAgeThreshold)}}),isInvalid:!(null==n||!n.ageThresholdError),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.warningStateLabel",defaultMessage:"Age limit"})},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiFieldText,{"aria-label":So.ageInputAriaLabel,"data-test-subj":"age-threshold-input-"+(e?"loading":"loaded"),fullWidth:!0,disabled:r,isInvalid:!(null==n||!n.ageThresholdError),isLoading:e,value:null!==(o=null==a?void 0:a.certAgeThreshold)&&void 0!==o?o:"",onChange:({target:{value:e}})=>t({certAgeThreshold:Number(e)||void 0})})),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageLimit.units.days",defaultMessage:"Days"})))))))},wo=o.i18n.translate("xpack.synthetics.certificates.refresh",{defaultMessage:"Refresh"}),Oo={breadcrumbText:o.i18n.translate("xpack.synthetics.settingsBreadcrumbText",{defaultMessage:"Settings"}),editNoticeTitle:o.i18n.translate("xpack.synthetics.settings.cannotEditTitle",{defaultMessage:"You do not have permission to edit settings."}),editNoticeText:o.i18n.translate("xpack.synthetics.settings.cannotEditText",{defaultMessage:"Your user currently has 'Read' permissions for the Uptime app. Enable a permissions-level of 'All' to edit these settings."}),mustBeNumber:o.i18n.translate("xpack.synthetics.settings.blankNumberField.error",{defaultMessage:"Must be a number."})},jo=o.i18n.translate("xpack.synthetics.settings.blank.error",{defaultMessage:"May not be blank."}),Io=o.i18n.translate("xpack.synthetics.settings.noSpace.error",{defaultMessage:"Index names must not contain space"});var Co=a(3),To=a(175);const Fo=[".slack",".pagerduty",".server-log",".index",".teams",".servicenow",".jira",".webhook",".email"],Lo=({focusInput:e,isDisabled:t})=>{const[a,r]=Object(n.useState)(!1),{services:{application:s,triggersActionsUi:{getAddConnectorFlyout:o}}}=Object(p.useKibana)(),l=!(null==s||!s.capabilities.actions.save),u=Object(c.useDispatch)(),{data:m}=Object(h.useFetcher)((()=>Object(To.c)()),[]),g=Object(n.useMemo)((()=>o({consumer:"uptime",onClose:()=>{u(pe.j.get()),r(!1),e()},actionTypes:(null!=m?m:[]).filter((e=>Fo.includes(e.id)))})),[m]);return i.a.createElement(i.a.Fragment,null,a?g:null,i.a.createElement(d.EuiButtonEmpty,{"data-test-subj":"createConnectorButton",onClick:()=>r(!0),size:"s",isDisabled:t||!l},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.alerts.settings.addConnector",defaultMessage:"Add connector"})))};function Ao({errors:e,value:t,isLoading:a,isDisabled:n,onChange:r,connectors:s}){var o,l,u;const{actionTypeRegistry:m}=Object(p.useKibana)().services.triggersActionsUi,{data:g=[]}=Object(c.useSelector)(pe.d);if(null==g||!g.find((e=>(null==s?void 0:s.includes(e.id))&&".email"===e.actionTypeId)))return null;const h=m.get(".email").actionParamsFields;return i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors.defaultEmail",defaultMessage:"Default email"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description.defaultEmail",defaultMessage:"Email settings required for selected email alert connectors."})},i.a.createElement(h,{actionParams:{to:null!==(o=null==t?void 0:t.to)&&void 0!==o?o:[],cc:null!==(l=null==t?void 0:t.cc)&&void 0!==l?l:[],bcc:null!==(u=null==t?void 0:t.bcc)&&void 0!==u?u:[]},errors:null!=e?e:{},editAction:(e,a,n)=>((e,a)=>{r({defaultEmail:{...t,[e]:a}})})(e,a),showEmailSubjectAndMessage:!1,index:1,isLoading:a,isDisabled:n}))}const Po=Ee.a.span.withConfig({displayName:"ConnectorSpan",componentId:"sc-b5k0g4-0"})([".euiIcon{margin-right:5px;}> img{width:16px;height:20px;}"]),Do=({onChange:e,loading:t,formFields:a,fieldErrors:r,isDisabled:s})=>{const{services:{triggersActionsUi:{actionTypeRegistry:o}}}=Object(p.useKibana)(),{focusConnectorField:l}=Object(I.e)(),u=Object(I.i)()[1],m=Object(n.useRef)(null);mr(),Object(n.useEffect)((()=>{l&&m.current&&!t&&m.current.focus()}),[l,m,t]);const{data:g=[]}=Object(c.useSelector)(pe.d),[h,f]=Object(n.useState)(void 0),b=(null!=g?g:[]).filter((e=>Fo.includes(e.actionTypeId))).map((e=>({value:e.id,label:e.name,"data-test-subj":e.name})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertDefaults",defaultMessage:"Alert defaults"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors",defaultMessage:"Alert Connectors"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description",defaultMessage:"Default connectors to be used to send an alert."})},i.a.createElement(Ro,{describedByIds:["defaultConnectors"],error:h,fullWidth:!0,isInvalid:!!h,label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors",defaultMessage:"Default connectors"}),labelAppend:i.a.createElement(Lo,{isDisabled:s,focusInput:Object(n.useCallback)((()=>{m.current&&m.current.focus()}),[])})},i.a.createElement(d.EuiComboBox,{placeholder:ko.inputPlaceHolder,options:b,selectedOptions:b.filter((e=>{var t;return null==a||null===(t=a.defaultConnectors)||void 0===t?void 0:t.includes(e.value)})),inputRef:e=>{m.current=e},onSearchChange:(e,t)=>{f(0===e.length||t?void 0:`"${e}" is not a valid option`)},onBlur:()=>{if(m.current){const{value:e}=m.current;f(0===e.length?void 0:`"${e}" is not a valid option`)}m.current&&!t&&l&&u({focusConnectorField:void 0})},isLoading:t,isDisabled:s,onChange:t=>{e({defaultConnectors:t.map((e=>(null==g?void 0:g.find((t=>t.id===e.value))).id))})},"data-test-subj":"default-connectors-input-"+(t?"loading":"loaded"),renderOption:e=>{var t;const{label:a,value:n}=e,{actionTypeId:r}=null!==(t=null==g?void 0:g.find((e=>e.id===n)))&&void 0!==t?t:{};return i.a.createElement(Po,null,i.a.createElement(d.EuiIcon,{type:o.get(r).iconClass}),i.a.createElement("span",null,a))}}))),i.a.createElement(Ao,{value:null==a?void 0:a.defaultEmail,connectors:null==a?void 0:a.defaultConnectors,onChange:e,isLoading:t,isDisabled:s,errors:null==r?void 0:r.invalidEmail}),i.a.createElement(d.EuiSpacer,null))},Ro=Ee()(d.EuiFormRow).withConfig({displayName:"RowWrapper",componentId:"sc-b5k0g4-1"})(["&&& > .euiFormRow__labelWrapper{align-items:baseline;}"]);var No,zo=(No=function(e,t){return No=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},No(e,t)},function(e,t){function a(){this.constructor=e}No(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),_o=function(){var e,t,a={},n=Object.assign(document.createElement("div"),{setPortalProps:function(e){a=e},getInitialPortalProps:function(){return a},mount:function(a,i){i!==t&&(n.unmount(),a.replaceChild(n,i),e=a,t=i)},unmount:function(a){a&&a!==t||e&&t&&(e.replaceChild(t,n),e=void 0,t=void 0)}});return n},Bo=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return zo(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return r.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),i)},t}(n.PureComponent),Uo=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return zo(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent);const Ho=({isFormDisabled:e,isFormDirty:t,isFormValid:a,onApply:n,onCancel:r,errors:s})=>{const{heartbeatIndices:o,invalidEmail:l,expirationThresholdError:c,ageThresholdError:u}=null!=s?s:{},{to:m,cc:p,bcc:g}=null!=l?l:{};return i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement($o,null,o||m||p||g||c||u)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross","data-test-subj":"discardSettingsButton",isDisabled:!t||e,onClick:()=>{r()}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.discardSettingsButtonLabel",defaultMessage:"Cancel"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{size:"s","data-test-subj":"apply-settings-button",onClick:n,color:"primary",isDisabled:!t||!a||e,fill:!0},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.applySettingsButtonLabel",defaultMessage:"Apply changes"}))))},$o=Object(g.euiStyled)(d.EuiText)`
    box-shadow: -4px 0 ${e=>e.theme.eui.euiColorWarning};
    padding-left: 8px;
`,Go=()=>i.a.createElement("div",null,i.a.createElement(Uo,{node:Wo})),qo=e=>i.a.createElement(Bo,{node:Wo},i.a.createElement(Ho,e)),Wo=_o(),Vo=(e,t)=>{if(!e||0===e.length)return;if(!t||!t.to)return{to:Ko};const a=0===t.to.length?Ko:Jo(t.to),n=Jo(t.cc),i=Jo(t.bcc);return a||n||i?{to:a,cc:n,bcc:i}:void 0},Ko=o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.requiredEmail",{defaultMessage:"To email is required for email connector"}),Jo=e=>{if(!e)return;const t=e.find((e=>!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)));return t?o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.invalidEmail",{defaultMessage:"{val} is not a valid email.",values:{val:t}}):void 0},Yo=e=>void 0===e||isNaN(e)?Oo.mustBeNumber:e<=0?Co.f:e%1?Co.e:void 0,Zo=()=>{var e,t;const a=Object(c.useSelector)(A.A);T([{text:Oo.breadcrumbText}]);const r=Object(c.useDispatch)();Object(n.useEffect)((()=>{r(Object(nr.a)())}),[r]);const[s,o]=Object(n.useState)(a.settings?{...a.settings}:null);!a.loadError&&null===s&&a.settings&&o(Object.assign({},{...a.settings}));const{errors:l,isFormDirty:u}=(e=>{const t=Object(c.useSelector)(A.A),a=((e,t)=>{return(null==t?void 0:t.certAgeThreshold)!==(null==e?void 0:e.certAgeThreshold)||(null==t?void 0:t.certExpirationThreshold)!==(null==e?void 0:e.certExpirationThreshold)||(null==t?void 0:t.heartbeatIndices)!==(null==e?void 0:e.heartbeatIndices)||(a=null==t?void 0:t.defaultEmail,n=null==e?void 0:e.defaultEmail,!Object(Ae.isEqual)((null!==(i=null==a?void 0:a.to)&&void 0!==i?i:[]).sort(),(null!==(r=null==n?void 0:n.to)&&void 0!==r?r:[]).sort())||!Object(Ae.isEqual)((null!==(s=null==a?void 0:a.cc)&&void 0!==s?s:[]).sort(),(null!==(o=null==n?void 0:n.cc)&&void 0!==o?o:[]).sort())||!Object(Ae.isEqual)((null!==(l=null==a?void 0:a.bcc)&&void 0!==l?l:[]).sort(),(null!==(c=null==n?void 0:n.bcc)&&void 0!==c?c:[]).sort())||void 0)||JSON.stringify(null==t?void 0:t.defaultConnectors)!==JSON.stringify(null==e?void 0:e.defaultConnectors);var a,n,i,r,s,o,l,c})(e,t.settings),{data:n=[]}=Object(c.useSelector)(pe.d),i=null==n?void 0:n.find((t=>{var a;return(null==e||null===(a=e.defaultConnectors)||void 0===a?void 0:a.includes(t.id))&&".email"===t.actionTypeId}));if(e){const{certAgeThreshold:t,certExpirationThreshold:n,heartbeatIndices:r}=e,s=(null!=r&&r.includes(" ")?Io:"")||(null!=r&&r.match(/^\S+$/)?"":jo),o=Yo(t);return{isFormDirty:a,errors:{heartbeatIndices:s,expirationThresholdError:Yo(n),ageThresholdError:o,invalidEmail:i?Vo(e.defaultConnectors,e.defaultEmail):void 0}}}return{isFormDirty:a,errors:null}})(s),m=!(l&&Object.values(l).find((e=>!!e))),g=Object(n.useCallback)((e=>{s&&o({...s,...e})}),[s]),h=!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.configureSettings)||!1,f=a.loading||!h,b=h?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:Oo.editNoticeTitle},Oo.editNoticeText),i.a.createElement(d.EuiSpacer,{size:"s"}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},b)),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement("div",{id:"settings-form"},i.a.createElement(d.EuiForm,null,i.a.createElement(xo,{loading:a.loading,onChange:g,formFields:s,fieldErrors:l,isDisabled:f}),i.a.createElement(Do,{loading:a.loading,formFields:s,onChange:g,fieldErrors:l,isDisabled:f}),i.a.createElement(Mo,{loading:a.loading,onChange:g,formFields:s,fieldErrors:l,isDisabled:f}))))),i.a.createElement(qo,{onApply:e=>{e.preventDefault(),s&&r(Object(nr.d)(s))},isFormDirty:u,isFormDisabled:f,isFormValid:m,onCancel:()=>o(a.settings?{...a.settings}:null),errors:l}))},Xo=()=>{const e=Object(u.useHistory)();return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,null,i.a.createElement(d.EuiEmptyPrompt,{iconType:"faceNeutral",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{defaultMessage:"Page not found",id:"xpack.synthetics.emptyStateError.notFoundPage"}))),body:i.a.createElement(d.EuiButton,{href:e.createHref({pathname:"/"})},i.a.createElement(v.FormattedMessage,{defaultMessage:"Back to home",id:"xpack.synthetics.notFountPage.homeLinkText"}))}))))};var Qo=a(51);const el=({loading:e,loadingTitle:t,error:a,errorTitle:n,errorBody:r,children:s})=>i.a.createElement(i.a.Fragment,null,e||a?null:s,a&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"xxl"}),i.a.createElement(d.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:i.a.createElement("h2",null,n),body:i.a.createElement("p",null,r)})):null,e?i.a.createElement(d.EuiEmptyPrompt,{color:"subdued",icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,t),"data-test-subj":"uptimeLoader"}):null);var tl=a(239),al=a(130),nl=a(41);const il=/^[0-9]*$/g,rl=/[^\:]+:[0-9]{1,5}$/g;function sl(e){return Object.keys(e).some((e=>!!e&&/[\s]/g.test(e)))}const ol={[Xe.b.NAME]:({[Xe.b.NAME]:e})=>!e||"string"!=typeof e,[Xe.b.SCHEDULE]:({[Xe.b.SCHEDULE]:e})=>{const{number:t,unit:a}=e,n=parseFloat(t);return!n||!a||n<1},[Xe.b.TIMEOUT]:({[Xe.b.MONITOR_TYPE]:e,[Xe.b.TIMEOUT]:t,[Xe.b.SCHEDULE]:a})=>{const{number:n,unit:i}=a;return e!==Xe.f.BROWSER&&(!t||parseFloat(t)<0||(({scheduleNumber:e,scheduleUnit:t,timeout:a})=>{let n;switch(t){case Xe.r.SECONDS:n=parseFloat(e);break;case Xe.r.MINUTES:n=60*parseFloat(e);break;default:n=parseFloat(e)}return parseFloat(a)>n})({timeout:t,scheduleNumber:n,scheduleUnit:i}))},[Xe.b.LOCATIONS]:({[Xe.b.LOCATIONS]:e})=>!Array.isArray(e)||e.length<1||e.some(Xe.B),[Xe.b.NAMESPACE]:({[Xe.b.NAMESPACE]:e})=>{const{error:t="",valid:a}=Object(nl.isValidNamespace)(null!=e?e:"");return!a&&t}},ll={[Xe.b.RESPONSE_STATUS_CHECK]:({[Xe.b.RESPONSE_STATUS_CHECK]:e})=>{const t=e;return!!t.length&&t.some((e=>!`${e}`.match(il)))},[Xe.b.RESPONSE_HEADERS_CHECK]:({[Xe.b.RESPONSE_HEADERS_CHECK]:e})=>sl(e),[Xe.b.REQUEST_HEADERS_CHECK]:({[Xe.b.REQUEST_HEADERS_CHECK]:e})=>sl(e),[Xe.b.MAX_REDIRECTS]:({[Xe.b.MAX_REDIRECTS]:e})=>!!e&&!`${e}`.match(il)||parseFloat(e)<0,[Xe.b.URLS]:({[Xe.b.URLS]:e})=>!e,...ol},cl={[Xe.b.HOSTS]:({[Xe.b.HOSTS]:e})=>!e||!`${e}`.match(rl),...ol},ul={[Xe.b.HOSTS]:({[Xe.b.HOSTS]:e})=>!e,[Xe.b.WAIT]:({[Xe.b.WAIT]:e})=>!!e&&!il.test(`${e}`)&&parseFloat(e)<0,...ol},dl=(e,t)=>{if(void 0===e||""===e)return!1;const a=parseFloat(e);return isNaN(a)||(t?a<0:a<=0)},ml={...ol,[Xe.b.SOURCE_ZIP_URL]:({[Xe.b.SOURCE_ZIP_URL]:e,[Xe.b.SOURCE_INLINE]:t})=>!e&&!t,[Xe.b.SOURCE_INLINE]:({[Xe.b.SOURCE_ZIP_URL]:e,[Xe.b.SOURCE_INLINE]:t})=>!e&&!t,[Xe.b.DOWNLOAD_SPEED]:({[Xe.b.DOWNLOAD_SPEED]:e})=>dl(e),[Xe.b.UPLOAD_SPEED]:({[Xe.b.UPLOAD_SPEED]:e})=>dl(e),[Xe.b.LATENCY]:({[Xe.b.LATENCY]:e})=>dl(e,!0)},pl={[Xe.f.HTTP]:ll,[Xe.f.TCP]:cl,[Xe.f.ICMP]:ul,[Xe.f.BROWSER]:ml},gl=_o(),hl=_o();var fl=a(56);const bl=({monitor:e,isValid:t,onSave:a,onTestNow:r,testRun:s,isTestRunInProgress:m})=>{var g;const{monitorId:b}=Object(u.useParams)(),{basePath:E}=Object(n.useContext)(f.c),{locations:y}=Object(c.useSelector)(A.t),[v,x]=Object(n.useState)(!1),[S,k]=Object(n.useState)(!1),[M,w]=Object(n.useState)(!1),[O,j]=Object(n.useState)(void 0),I=e[Xe.b.MONITOR_SOURCE_TYPE]===Xe.v.PROJECT,{data:C,status:T}=Object(h.useFetcher)((()=>{if(S&&t)return Object(fl.v)({monitor:e,id:b})}),[e,b,t,S]),F=C&&"attributes"in C&&(null===(g=C.attributes.errors)||void 0===g?void 0:g.length)>0,L=T===h.FETCH_STATUS.LOADING,P=Object(n.useCallback)((()=>{a&&a(),k(!0),x(!0)}),[a]);return Object(n.useEffect)((()=>{S&&(t?(T!==h.FETCH_STATUS.FAILURE&&T!==h.FETCH_STATUS.SUCCESS||k(!1),T===h.FETCH_STATUS.FAILURE?Tt.a.toasts.addDanger({title:jl,toastLifeTimeMs:3e3}):T!==h.FETCH_STATUS.SUCCESS||F||L?F&&!L&&(((e,t,a)=>{Object.values(e).forEach((e=>{var n;const{status:r,reason:s}=e.error||{};a.addWarning({title:o.i18n.translate("xpack.synthetics.monitorManagement.service.error.title",{defaultMessage:"Unable to sync monitor config"}),text:Object(p.toMountPoint)(i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorManagement.service.error.message",{defaultMessage:"Your monitor was saved, but there was a problem syncing the configuration for {location}. We will automatically try again later. If this problem continues, your monitors will stop running in {location}. Please contact Support for assistance.",values:{location:null==t||null===(n=t.find((t=>(null==t?void 0:t.id)===e.locationId)))||void 0===n?void 0:n.label}})),r||s?i.a.createElement("p",null,r?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.status",{defaultMessage:"Status: {status}. ",values:{status:r}}):null,s?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.reason",{defaultMessage:"Reason: {reason}.",values:{reason:s}}):null):null)),toastLifeTimeMs:3e4})}))})(C.attributes.errors,y,Tt.a.toasts),w(!0)):(Tt.a.toasts.addSuccess({title:b?Ol:wl,toastLifeTimeMs:3e3}),w(!0))):k(!1))}),[C,T,S,t,b,F,y,L]),M?i.a.createElement(u.Redirect,{to:l.q+"/all"}):i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{color:"ghost",size:"s",href:`${E}/app/uptime/${l.q}/all`},yl)),I?null:i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(El,null,!t&&v&&Ml)),r&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPopover,{repositionOnScroll:!0,initialFocus:!1,button:i.a.createElement(Cl,{fill:!0,size:"s",color:"success",iconType:"play",disabled:!t||m,"data-test-subj":"monitorTestNowRunBtn",onClick:()=>r(),onMouseEnter:()=>{j(!0)},onMouseLeave:()=>{j(!1)}},s?kl:Sl),isOpen:O},i.a.createElement(d.EuiText,{style:{width:260,outline:"none"}},i.a.createElement("p",null,Il)))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{color:"primary",fill:!0,size:"s",iconType:"check",onClick:P,isLoading:S,disabled:v&&!t},b?xl:vl)))))},El=Object(g.euiStyled)(d.EuiText)`
    box-shadow: -4px 0 ${e=>e.theme.eui.euiColorWarning};
    padding-left: 8px;
`,yl=o.i18n.translate("xpack.synthetics.monitorManagement.discardLabel",{defaultMessage:"Cancel"}),vl=o.i18n.translate("xpack.synthetics.monitorManagement.saveMonitorLabel",{defaultMessage:"Save monitor"}),xl=o.i18n.translate("xpack.synthetics.monitorManagement.updateMonitorLabel",{defaultMessage:"Update monitor"}),Sl=o.i18n.translate("xpack.synthetics.monitorManagement.runTest",{defaultMessage:"Run test"}),kl=o.i18n.translate("xpack.synthetics.monitorManagement.reRunTest",{defaultMessage:"Re-run test"}),Ml=o.i18n.translate("xpack.synthetics.monitorManagement.validationError",{defaultMessage:"Your monitor has errors. Please fix them before saving."}),wl=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),Ol=o.i18n.translate("xpack.synthetics.monitorManagement.monitorEditedSuccessMessage",{defaultMessage:"Monitor updated successfully."}),jl=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),Il=o.i18n.translate("xpack.synthetics.testRun.description",{defaultMessage:"Test your monitor and verify the results before saving"});var Cl=Ee()(d.EuiButton).withConfig({displayName:"_StyledEuiButton",componentId:"sc-1tejvei-0"})({width:"100%"});const Tl=e=>i.a.createElement(Bo,{node:gl},i.a.createElement(bl,e));var Fl=a(132);const Ll=({selectedLocations:e,setLocations:t,isInvalid:a,onBlur:r,readOnly:s=!1})=>{const[o,l]=Object(n.useState)(null),[u,m]=Object(n.useState)({}),{locations:p}=Object(c.useSelector)(A.t),g=null!=o?o:a?Al:null;return Object(n.useEffect)((()=>{const t=e.reduce(((e,t)=>(e[t.id]=!0,e)),{});m(t)}),[e]),i.a.createElement(d.EuiFormRow,{label:Pl,error:g,isInvalid:null!==g},i.a.createElement(d.EuiCheckboxGroup,{options:p.map((e=>{const t=e.status!==Xe.j.GA?i.a.createElement(d.EuiBadge,{color:"warning"},"Tech Preview"):null,a=i.a.createElement(d.EuiText,{size:"s","data-test-subj":`syntheticsServiceLocationText--${e.id}`},e.label," ",t);return{...e,label:a,"data-test-subj":`syntheticsServiceLocation--${e.id}`}})),idToSelectedMap:u,onChange:e=>(e=>{const a=!u[e],n=p.find((t=>t.id===e));t(a?e=>n?[...e,{id:n.id,isServiceManaged:n.isServiceManaged}]:e:t=>[...t].filter((t=>t.id!==e))),l(null)})(e),onBlur:()=>null==r?void 0:r(),disabled:s}))},Al=o.i18n.translate("xpack.synthetics.monitorManagement.serviceLocationsValidationError",{defaultMessage:"At least one service location must be specified"}),Pl=o.i18n.translate("xpack.synthetics.monitorManagement.monitorLocationsLabel",{defaultMessage:"Monitor locations"}),Dl="synthetics-monitor",Rl=({validate:e,onFieldBlur:t,readOnly:a})=>{var r,s;const{name:o,setName:l,locations:c=[],setLocations:m}=Object(Qo.A)(),g=!!e&&!(null===(r=e[Xe.b.NAME])||void 0===r||!r.call(e,{[Xe.b.NAME]:o})),f=!!e&&!(null===(s=e[Xe.b.LOCATIONS])||void 0===s||!s.call(e,{[Xe.b.LOCATIONS]:c})),[b,E]=Object(n.useState)(o),{validName:y,nameAlreadyExists:x}=(({search:e=""})=>{const[t,a]=Object(n.useState)([]),{monitorId:i}=Object(u.useParams)(),{savedObjects:r}=Object(p.useKibana)().services,{data:s}=Object(h.useFetcher)((()=>null==r?void 0:r.client.find({type:Dl,perPage:0,aggs:{monitorNames:{terms:{field:"synthetics-monitor.attributes.name.keyword",size:1e4}}}})),[]);Object(n.useEffect)((()=>{if(null!=s&&s.aggregations){var t;const n=null===(t=s.aggregations)||void 0===t?void 0:t.monitorNames.buckets.map((({key:e})=>e.toLowerCase()));i&&n.includes(e.toLowerCase())?a(n.filter((t=>t!==e.toLowerCase()))):a(n)}}),[s,i]);const o=Boolean(e&&t&&t.length>0&&(null==t?void 0:t.includes(e.trim().toLowerCase())));return{nameAlreadyExists:o,validName:o?"":e}})({search:b});return Object(n.useEffect)((()=>{l(y)}),[l,y]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorNameFieldLabel",defaultMessage:"Monitor name"}),fullWidth:!1,isInvalid:g||x,error:x?Nl:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorNameFieldError",defaultMessage:"Monitor name is required"})},i.a.createElement(d.EuiFieldText,{autoFocus:!0,defaultValue:o,required:!0,isInvalid:g||x,fullWidth:!0,name:"name",onChange:e=>E(e.target.value),onBlur:()=>null==t?void 0:t(Xe.b.NAME),"data-test-subj":"monitorManagementMonitorName",readOnly:a})),i.a.createElement(Ll,{setLocations:m,selectedLocations:c,isInvalid:f,onBlur:()=>null==t?void 0:t(Xe.b.LOCATIONS),readOnly:a}))},Nl=o.i18n.translate("xpack.synthetics.monitorManagement.duplicateNameError",{defaultMessage:"Monitor name already exists."});var zl=a(75);const _l=Object(n.memo)((({validate:e,minColumnWidth:t,onFieldBlur:a})=>{var n,r,s,o;const{namespace:l,setNamespace:c}=Object(Qo.A)(),u=null===(n=e[Xe.b.NAMESPACE])||void 0===n?void 0:n.call(e,{[Xe.b.NAMESPACE]:l}),m=!!u,{services:g}=Object(p.useKibana)();return i.a.createElement(zl.a,{minColumnWidth:t,title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.dataStreamConfiguration.title",defaultMessage:"Data stream settings"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.dataStreamConfiguration.description",defaultMessage:"Configure additional Data Stream options."}),"data-test-subj":"monitorAdvancedFieldsSection"},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFormRow,{isInvalid:m,error:u,label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.monitorNamespaceFieldLabel",defaultMessage:"Namespace"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.namespaceHelpLabel",defaultMessage:"Change the default namespace. This setting changes the name of the monitor's data stream. {learnMore}.",values:{learnMore:i.a.createElement(d.EuiLink,{target:"_blank",href:null===(r=g.docLinks)||void 0===r||null===(s=r.links)||void 0===s||null===(o=s.fleet)||void 0===o?void 0:o.datastreamsNamingScheme,external:!0},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.namespaceHelpLearnMoreLabel",defaultMessage:"Learn More"}))}})},i.a.createElement(d.EuiFieldText,{defaultValue:l,onChange:e=>c(e.target.value),required:!0,isInvalid:m,fullWidth:!0,name:"namespace",onBlur:()=>null==a?void 0:a(Xe.b.NAMESPACE)})))}));var Bl=a(170),Ul=a(93),Hl=a(106),$l=a(171),Gl=a(66);const ql=()=>{},Wl=({minColumnWidth:e})=>{const{fields:t}=Object(Qo.w)(),{fields:a}=Object(Qo.v)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.readOnly.callout.title",defaultMessage:"Read only"}),iconType:"document"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.readOnly.callout.content",defaultMessage:"This monitor was added from an external project. Configuration is read only."}))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(zl.a,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSectionTitle",defaultMessage:"Monitor settings"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSectionDescription",defaultMessage:"Configure your monitor with the following options."}),"data-test-subj":"monitorSettingsSection",minColumnWidth:e},i.a.createElement(Rl,{readOnly:!0}),i.a.createElement(Bl.a,{fields:t,onChange:ql,onBlur:ql,readOnly:!0}),i.a.createElement(d.EuiFormRow,{id:"syntheticsFleetScheduleField--number syntheticsFleetScheduleField--unit",label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.monitorInterval",defaultMessage:"Frequency"}),error:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.monitorInterval.error",defaultMessage:"Monitor frequency is required"})},i.a.createElement(Ul.a,{onBlur:ql,onChange:ql,number:t[Xe.b.SCHEDULE].number,unit:t[Xe.b.SCHEDULE].unit,readOnly:!0})),i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.tags.label",defaultMessage:"Tags"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.tags.helpText",defaultMessage:"A list of tags that will be sent with the monitor event. Press enter to add a new tag. Displayed in Uptime and enables searching by tag."}),labelAppend:i.a.createElement(Gl.a,null)},i.a.createElement(Hl.a,{selectedOptions:t[Xe.b.TAGS],onChange:ql,onBlur:ql,"data-test-subj":"syntheticsTags",readOnly:!0}))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiAccordion,{id:"syntheticsIntegrationBrowserAdvancedOptions",buttonContent:"Advanced Browser options","data-test-subj":"syntheticsBrowserAdvancedFieldsAccordion"},i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(zl.a,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.title",defaultMessage:"Synthetics agent options"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.description",defaultMessage:"Provide fine-tuned configuration for the synthetics agent."}),minColumnWidth:e},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.screenshots.label",defaultMessage:"Screenshot options"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.screenshots.helpText",defaultMessage:"Set this option to manage the screenshots captured by the synthetics agent."})},i.a.createElement(d.EuiFieldText,{value:a[Xe.b.SCREENSHOTS],onChange:ql,"data-test-subj":"syntheticsBrowserScreenshots",readOnly:!0}))),i.a.createElement($l.a,{minColumnWidth:e,readOnly:!0})))},Vl="360px",Kl=({isFormSubmitted:e=!1})=>{const{monitorType:t,sourceType:a}=Object(Qo.A)(),[r,s]=Object(n.useState)({}),o=Object(n.useMemo)((()=>{const a={...pl[t]};return e||Object.keys(a).map((e=>{r[e]||(a[e]=void 0)})),a}),[e,t,r]),l=e=>{s((t=>({...t,[e]:!0})))};return i.a.createElement(d.EuiForm,{id:"syntheticsServiceCreateMonitorForm",component:"form"},a===Xe.v.PROJECT?i.a.createElement(Wl,{minColumnWidth:Vl}):i.a.createElement(Fl.a,{minColumnWidth:Vl,validate:o,dataStreams:[Xe.f.HTTP,Xe.f.TCP,Xe.f.ICMP,Xe.f.BROWSER],appendAdvancedFields:i.a.createElement(_l,{validate:o,minColumnWidth:Vl,onFieldBlur:l}),onFieldBlur:l},i.a.createElement(Rl,{validate:o,onFieldBlur:l})))},Jl=({monitorId:e,isMonitorSaved:t,expectPings:a,onDone:i})=>{const{summariesLoading:r,expectedSummariesLoaded:s,stepLoadingInProgress:o,checkGroupResults:l}=La({configId:e,expectSummaryDocs:a});return Object(n.useEffect)((()=>{s&&i()}),[i,s]),n.createElement(n.Fragment,null,l.map((e=>{var a,i,c,u;const{checkGroupId:m,journeyStarted:p,summaryDoc:g,stepsLoading:h,steps:f,completedSteps:b}=e,E=!r&&p&&g&&h,y=g&&!r&&!o&&0===f.length;return n.createElement(Yl,{key:"accordion-"+m,id:"accordion-"+m,element:"fieldset",className:"euiAccordionForm",buttonClassName:"euiAccordionForm__button",buttonContent:Zl(e),paddingSize:"s","data-test-subj":"expandResults",initialIsOpen:1===l.length},E&&n.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiText,null,Ql)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiLoadingSpinner,{size:"s"}))),y&&n.createElement(d.EuiText,{color:"danger"},null!==(a=null==g||null===(i=g.error)||void 0===i?void 0:i.message)&&void 0!==a?a:Xl),y&&(null==g||null===(c=g.error)||void 0===c||null===(u=c.message)||void 0===u?void 0:u.includes("journey did not finish executing"))&&n.createElement(za,{checkGroup:g.monitor.check_group,hideTitle:!0}),b>0&&n.createElement(Fa,{data:f,compactView:!0,showStepDurationTrend:t,loading:Boolean(o),allStepsLoaded:s,error:void 0}))})))},Yl=Ee()(d.EuiAccordion).withConfig({displayName:"AccordionWrapper",componentId:"sc-16kfbkc-0"})([".euiAccordion__buttonContent{width:100%;}"]);function Zl({journeyDoc:e,summaryDoc:t,checkGroupId:a,journeyStarted:i,completedSteps:r}){var s,l;return n.createElement("div",null,n.createElement(Ut,{title:null==e||null===(s=e.observer)||void 0===s||null===(l=s.geo)||void 0===l?void 0:l.name,summaryDocs:t?[t]:[],checkGroupId:a,journeyStarted:i,isCompleted:Boolean(t)}),n.createElement(d.EuiText,{size:"s"},n.createElement("p",null,n.createElement(d.EuiText,{color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=r?r:0}})))))}const Xl=o.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),Ql=o.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."});function ec({monitorId:e,expectPings:t,onDone:a}){const[r,s]=Object(n.useState)([]),{summaryDocs:o,loading:l}=_t({configId:e,expectSummaryDocs:t});return Object(n.useEffect)((()=>{o&&(s((e=>{const t=e.reduce(((e,t)=>({...e,[t.docId]:t})),{});return o.map((e=>{var a;return{...e,...null!==(a=t[e.docId])&&void 0!==a?a:{}}}))})),o.length>=t&&a())}),[t,o,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ut,{summaryDocs:r,isCompleted:Boolean(o&&o.length>=t)}),o&&i.a.createElement(En,{pings:r,loading:l}))}const tc=({monitorId:e,monitor:t,isMonitorSaved:a,expectPings:i,onDone:r})=>"browser"===t.type?n.createElement(Jl,{monitorId:e,expectPings:i,isMonitorSaved:a,onDone:r}):n.createElement(ec,{monitorId:e,expectPings:i,onDone:r});function ac({testRun:e,isMonitorSaved:t,onDone:a}){var r,s;const[o,l]=Object(n.useState)(null),{data:c,loading:u}=Object(h.useFetcher)((()=>e?Object(fl.t)({monitor:e.monitor,id:e.id}).then((e=>(l(null),e))).catch((e=>l(e))):new Promise((e=>e(null)))),[e]),m=null==c?void 0:c.errors,{hasBlockingError:p,blockingErrorMessage:g,expectPings:f,errorMessages:b}=Ft({testRunId:null!==(r=null==e?void 0:e.id)&&void 0!==r?r:"",serviceError:o,errors:null!=m?m:[],locations:null!==(s=null==e?void 0:e.monitor.locations)&&void 0!==s?s:[]});return Object(n.useEffect)((()=>{b.forEach((({name:e,message:t,title:a})=>{Tt.a.toasts.addError({name:e,message:t},{title:a})}))}),[b]),Object(n.useEffect)((()=>{u||e&&!p||a()}),[e,p,u,a]),e?i.a.createElement(d.EuiPanel,{color:"subdued",hasBorder:!0},u&&i.a.createElement(d.EuiCallOut,{color:"primary"},nc," ",i.a.createElement(d.EuiLoadingSpinner,null)),p&&!u&&i.a.createElement(d.EuiCallOut,{title:g,color:"danger",iconType:"alert"})||null,e&&!p&&!u&&i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{key:e.id},i.a.createElement(tc,{monitorId:e.id,monitor:e.monitor,isMonitorSaved:t,expectPings:f,onDone:a}))),i.a.createElement(d.EuiSpacer,{size:"xs"})):null}const nc=o.i18n.translate("xpack.synthetics.testRun.pushing.description",{defaultMessage:"Pushing the monitor to service..."});var ic=a(60);const rc=({isEdit:e=!1})=>{const{monitorType:t}=Object(Qo.A)(),a=Object(al.a)(),{isValid:r,config:s}=(({monitorType:e,defaultConfig:t,config:a,validate:i})=>{const[r,s]=Object(n.useState)(!1),o=Object(n.useRef)(t);return Object(n.useEffect)((()=>{const t=Object.keys(a),n=Object.keys(i[e]),r=t.some((e=>a[e]!==o.current[e])),l=!!a.name&&!n.find((t=>{var n,r;return null===(n=i[e])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.call(n,a)}));r&&(o.current=a,s(l))}),[a,o,i,e]),{config:a,isValid:r}})({monitorType:t,validate:pl,config:a[t],defaultConfig:ic.d[t]}),[o,l]=Object(n.useState)(!1),[c,u]=Object(n.useState)(),[m,p]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>{p(!1)}),[p]),b=Object(n.useCallback)((()=>{f(),h(!1)}),[f,h]),E=g&&s&&i.a.createElement(d.EuiFlyout,{type:"push",size:"m",paddingSize:"m",maxWidth:"44%","aria-labelledby":sc,onClose:b},i.a.createElement(d.EuiFlyoutHeader,null,i.a.createElement(d.EuiSpacer,{size:"xl"})),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(ac,{testRun:c,isMonitorSaved:e,onDone:f})),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiButtonEmpty,{iconType:"cross",onClick:b,flush:"left"},oc)));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Kl,{isFormSubmitted:o}),E,i.a.createElement(Tl,{monitor:a[t],isValid:r,onTestNow:()=>{s&&(u({id:Object(tl.v4)(),monitor:s}),p(!0),h(!0))},testRun:c,isTestRunInProgress:m,onSave:()=>{l(!0)}}))},sc=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),oc=o.i18n.translate("xpack.synthetics.monitorManagement.closeButtonLabel",{defaultMessage:"Close"});function lc(){const e=Object(c.useDispatch)(),{error:{serviceLocations:t},loading:{serviceLocations:a},locations:i,throttling:r}=Object(c.useSelector)(A.t);return Object(n.useEffect)((()=>{i.length||e(Object(b.E)())}),[e,i]),{throttling:r,locations:i,error:t,loading:a}}const cc=({isAddMonitor:e,isEditMonitor:t,monitorId:a}={})=>{var n,i;const r=null!==(n=null===(i=Object(p.useKibana)().services.application)||void 0===i?void 0:i.getUrlForApp(C.a.ID))&&void 0!==n?n:"";T([{text:uc,href:e||t?`${r}/${l.q}/all`:void 0},...e?[{text:dc}]:[],...t?[{text:mc}]:[]])},uc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorManagementCrumb",{defaultMessage:"Monitor Management"}),dc=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorCrumb",{defaultMessage:"Add monitor"}),mc=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorCrumb",{defaultMessage:"Edit monitor"}),pc=()=>{Object(h.useTrackPageview)({app:"uptime",path:"add-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"add-monitor",delay:15e3});const{error:e,loading:t,locations:a,throttling:n}=lc();return cc({isAddMonitor:!0}),i.a.createElement(el,{error:Boolean(e)||a&&0===a.length,loading:t,loadingTitle:gc,errorTitle:hc,errorBody:fc},i.a.createElement(Qo.i,{policyDefaultValues:{throttling:n,runsOnService:!0,isZipUrlSourceEnabled:!1,allowedScheduleUnits:[Xe.r.MINUTES]}},i.a.createElement(rc,{isEdit:!1})))},gc=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLoadingLabel",{defaultMessage:"Loading Monitor Management"}),hc=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLoadingError",{defaultMessage:"Error loading Monitor Management"}),fc=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorServiceLocationsLoadingError",{defaultMessage:"Service locations were not able to be loaded. Please try again later."}),bc=({monitor:e,throttling:t})=>{Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor",delay:15e3});const{enableTLS:a,enableZipUrlTLS:r,fullConfig:s,monitorTypeConfig:o,monitorType:l,tlsConfig:c}=Object(n.useMemo)((()=>{let t=!1,a=!1;return(()=>{const n=e[Xe.b.MONITOR_TYPE],i={[Xe.b.TLS_CERTIFICATE_AUTHORITIES]:e[Xe.b.TLS_CERTIFICATE_AUTHORITIES],[Xe.b.TLS_CERTIFICATE]:e[Xe.b.TLS_CERTIFICATE],[Xe.b.TLS_KEY]:e[Xe.b.TLS_KEY],[Xe.b.TLS_KEY_PASSPHRASE]:e[Xe.b.TLS_KEY_PASSPHRASE],[Xe.b.TLS_VERIFICATION_MODE]:e[Xe.b.TLS_VERIFICATION_MODE],[Xe.b.TLS_VERSION]:e[Xe.b.TLS_VERSION]};return t=Boolean(e[Xe.b.TLS_VERIFICATION_MODE]),a=Boolean(e[Xe.b.ZIP_URL_TLS_VERIFICATION_MODE]),{fullConfig:{[n]:e},monitorTypeConfig:e,tlsConfig:i,monitorType:n,enableTLS:t,enableZipUrlTLS:a}})()}),[e]);return i.a.createElement(Qo.i,{policyDefaultValues:{throttling:t,defaultIsTLSEnabled:a,defaultIsZipUrlTLSEnabled:r,defaultMonitorType:l,defaultName:(null==o?void 0:o[Xe.b.NAME])||"",defaultNamespace:(null==o?void 0:o[Xe.b.NAMESPACE])||ic.h,defaultLocations:o[Xe.b.LOCATIONS],isEditable:!0,isZipUrlSourceEnabled:!1,allowedScheduleUnits:[Xe.r.MINUTES],runsOnService:!0,sourceType:e[Xe.b.MONITOR_SOURCE_TYPE]||Xe.v.UI},httpDefaultValues:s[Xe.f.HTTP],tcpDefaultValues:s[Xe.f.TCP],icmpDefaultValues:s[Xe.f.ICMP],browserDefaultValues:s[Xe.f.BROWSER],tlsDefaultValues:c},i.a.createElement(rc,{isEdit:!0}))},Ec=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorLoadingLabel",{defaultMessage:"Loading monitor"}),yc=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError",{defaultMessage:"Error loading Monitor Management"}),vc=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorError",{defaultMessage:"Service locations were not able to be loaded. Please try again later."}),xc=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorErrorBody",{defaultMessage:"Monitor configuration was not able to be loaded. Please try again later."}),Sc=()=>{Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor",delay:15e3}),cc({isEditMonitor:!0});const{monitorId:e}=Object(u.useParams)(),{data:t,status:a}=Object(h.useFetcher)((()=>Object(fl.s)({id:e})),[e]),n=null==t?void 0:t.attributes,{error:r,loading:s,throttling:o}=lc();return i.a.createElement(el,{loading:a===h.FETCH_STATUS.LOADING||s,loadingTitle:Ec,error:a===h.FETCH_STATUS.FAILURE||Boolean(r),errorTitle:yc,errorBody:r?vc:xc},n&&i.a.createElement(bc,{monitor:n,throttling:o}))},kc=()=>{const[e,t]=Object(n.useState)(!1),{list:a,locations:r}=Object(c.useSelector)(A.t),s=a.syncErrors;return s&&s.length>0&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.title",defaultMessage:"Monitors failed to sync with the Synthetics service"}),color:"warning",iconType:"alert"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.content",defaultMessage:"There was a problem syncing your monitors for one or more locations:"})),i.a.createElement("ul",null,Object.values(null!=s?s:{}).map((e=>{var t,a,n,s,o;return i.a.createElement("li",{key:e.locationId},`${null===(t=r.find((t=>t.id===e.locationId)))||void 0===t?void 0:t.label} - ${wc}: ${null!==(a=null===(n=e.error)||void 0===n?void 0:n.status)&&void 0!==a?a:Oc}; ${Mc}: ${null!==(s=null===(o=e.error)||void 0===o?void 0:o.reason)&&void 0!==s?s:Oc}`)}))),i.a.createElement(d.EuiButton,{onClick:()=>t(!0),color:"warning"},jc)),i.a.createElement(d.EuiSpacer,{size:"m"})):null},Mc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.reasonLabel",{defaultMessage:"Reason"}),wc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.statusLabel",{defaultMessage:"Status"}),Oc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.notAvailable",{defaultMessage:"Not available"}),jc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.dismissLabel",{defaultMessage:"Dismiss"});var Ic=a(77);const Cc={"name.keyword":"monitor.name","urls.keyword":"url.full","type.keyword":"monitor.type","@timestamp":"@timestamp"},Tc=()=>[{exists:{field:"summary"}},{exists:{field:"error"}},{bool:{minimum_should_match:1,should:[{match_phrase:{"error.message":"journey did not finish executing"}},{match_phrase:{"error.message":"ReferenceError:"}}]}},{range:{"monitor.timespan":{lte:He()().toISOString(),gte:He()().subtract(5,"minutes").toISOString()}}},Ne.b];const Fc=({invalidTotal:e,onUpdate:t,onPageStateChange:a})=>{const[r,s]=Object(n.useState)("all"),{refreshApp:o}=Object(Ic.c)(),l=Object(u.useHistory)(),{type:c}=Object(u.useParams)();Object(n.useEffect)((()=>{s(c),a({pageIndex:1,pageSize:10,sortOrder:"asc",sortField:`${Xe.b.NAME}.keyword`})}),[c,a]);const m=[{id:"all",name:Pc,content:i.a.createElement(n.Fragment,null),href:l.createHref({pathname:"/manage-monitors/all"}),disabled:!1},{id:"invalid",name:Ac,append:i.a.createElement(d.EuiNotificationBadge,{className:"eui-alignCenter",size:"m",color:0===e?"subdued":"accent"},e),href:l.createHref({pathname:"/manage-monitors/invalid"}),content:i.a.createElement(n.Fragment,null),disabled:0===e}];return i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTabs,null,m.map(((e,t)=>i.a.createElement(d.EuiTab,{key:t,href:e.href,onClick:()=>{return t=e.id,void s(t);var t},isSelected:e.id===r,disabled:e.disabled,append:e.append},e.name))))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{size:"s",iconType:"refresh","aria-label":Lc,onClick:()=>{t(),o()}},Lc)))},Lc=o.i18n.translate("xpack.synthetics.monitorList.refresh",{defaultMessage:"Refresh"}),Ac=o.i18n.translate("xpack.synthetics.monitorList.invalidMonitors",{defaultMessage:"Invalid monitors"}),Pc=o.i18n.translate("xpack.synthetics.monitorList.allMonitors",{defaultMessage:"All monitors"}),Dc=o.i18n.translate("xpack.synthetics.monitorList.statusColumnLabel",{defaultMessage:"Status"}),Rc=o.i18n.translate("xpack.synthetics.monitorList.nameColumnLabel",{defaultMessage:"Name"}),Nc=o.i18n.translate("xpack.synthetics.monitorList.monitorHistoryColumnLabel",{defaultMessage:"Downtime history"}),zc=o.i18n.translate("xpack.synthetics.monitorList.tlsColumnLabel",{defaultMessage:"TLS Certificate"}),_c=e=>o.i18n.translate("xpack.synthetics.monitorList.expandDrawerButton.ariaLabel",{defaultMessage:"Expand row for monitor with ID {id}",description:"The user can click a button on this table and expand further details.",values:{id:e}}),Bc=o.i18n.translate("xpack.synthetics.monitorList.noItemForSelectedFiltersMessage",{defaultMessage:"No monitors found for selected filter criteria",description:"This message is show if there are no monitors in the table and some filter or search criteria exists"}),Uc=o.i18n.translate("xpack.synthetics.monitorList.loading",{defaultMessage:"Loading...",description:"Shown when the monitor list is waiting for a server response"}),Hc=o.i18n.translate("xpack.synthetics.monitorList.noItemMessage",{defaultMessage:"No uptime monitors found",description:"This message is shown if the monitors table is rendered but has no items."}),$c=(o.i18n.translate("xpack.synthetics.monitorList.anomalyColumn.label",{defaultMessage:"Response Anomaly Score"}),o.i18n.translate("xpack.synthetics.monitorList.statusAlert.label",{defaultMessage:"Status alert"})),Gc=o.i18n.translate("xpack.synthetics.monitorList.testNow.label",{defaultMessage:"Test now"}),qc=({id:e,name:t,onUpdate:a,isDisabled:r})=>{const[s,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),{status:u}=Object(h.useFetcher)((()=>{if(s)return Object(fl.a)({id:e})}),[e,s]);Object(n.useEffect)((()=>{u!==h.FETCH_STATUS.SUCCESS&&u!==h.FETCH_STATUS.FAILURE||o(!1),u===h.FETCH_STATUS.FAILURE?Tt.a.toasts.addDanger({title:Object(p.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorFailure"},Zc))},{toastLifeTimeMs:3e3}):u===h.FETCH_STATUS.SUCCESS&&(a(),Tt.a.toasts.addSuccess({title:Object(p.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorSuccess"},Yc))},{toastLifeTimeMs:3e3}))}),[o,a,u]);const m=i.a.createElement(d.EuiConfirmModal,{title:`${Jc} ${t}`,onCancel:()=>c(!1),onConfirm:()=>{o(!0),c(!1)},cancelButtonText:Kc,confirmButtonText:Vc,buttonColor:"danger",defaultFocusedButton:"confirm"},i.a.createElement("p",null,Wc));return i.a.createElement(i.a.Fragment,null,u===h.FETCH_STATUS.LOADING?i.a.createElement(d.EuiLoadingSpinner,{size:"m","aria-label":Xc}):i.a.createElement(d.EuiButtonIcon,{isDisabled:r,iconType:"trash",onClick:()=>{c(!0)},"aria-label":Jc,"data-test-subj":"monitorManagementDeleteMonitor"}),l&&m)},Wc=o.i18n.translate("xpack.synthetics.monitorManagement.confirmDescriptionLabel",{defaultMessage:"This action will delete the monitor but keep any data collected. This action cannot be undone."}),Vc=o.i18n.translate("xpack.synthetics.monitorManagement.yesLabel",{defaultMessage:"Delete"}),Kc=o.i18n.translate("xpack.synthetics.monitorManagement.noLabel",{defaultMessage:"Cancel"}),Jc=o.i18n.translate("xpack.synthetics.monitorManagement.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),Yc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorDeleteSuccessMessage",{defaultMessage:"Monitor deleted successfully."}),Zc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorDeleteFailureMessage",{defaultMessage:"Monitor was unable to be deleted. Please try again later."}),Xc=o.i18n.translate("xpack.synthetics.monitorManagement.monitorDeleteLoadingMessage",{defaultMessage:"Deleting monitor..."}),Qc=({id:e,name:t,onUpdate:a,isDisabled:r,errorSummaries:s,monitors:l})=>{const{basePath:c}=Object(n.useContext)(f.c);let u=null==s?void 0:s.find((t=>t.config_id===e));const m=l.find((t=>t.id===e)),p=(null==m?void 0:m.attributes)[Xe.b.MONITOR_SOURCE_TYPE]===Xe.v.PROJECT;return u&&m&&(He()(m.updated_at).isBefore(He()(u.timestamp))||(u=void 0)),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonIcon,{isDisabled:r,iconType:"pencil",href:`${c}/app/uptime/edit-monitor/${e}`,"aria-label":eu,"data-test-subj":"monitorManagementEditMonitor"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:p?o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.enabled.tooltip",{defaultMessage:"This monitor was added from an external project. To delete the monitor, remove it from the project and push the configuration again."}):""},i.a.createElement(qc,{onUpdate:a,name:t,id:e,isDisabled:r||p}))),u&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Wa,{errorSummary:u})))},eu=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorLabel",{defaultMessage:"Edit monitor"}),tu=({id:e,monitor:t,onUpdate:a,isDisabled:r})=>{const[s,o]=Object(n.useState)(null),{notifications:l}=Object(p.useKibana)(),{status:c}=Object(h.useFetcher)((()=>{if(null!==s)return Object(fl.v)({id:e,monitor:{...t,[Xe.b.ENABLED]:s}})}),[s]);Object(n.useEffect)((()=>{c===h.FETCH_STATUS.FAILURE?(l.toasts.danger({title:i.a.createElement("p",{"data-test-subj":"uptimeMonitorEnabledUpdateFailure"},su(t[Xe.b.NAME])),toastLifeTimeMs:3e3}),o(null)):c===h.FETCH_STATUS.SUCCESS&&(l.toasts.success({title:i.a.createElement("p",{"data-test-subj":"uptimeMonitorEnabledUpdateSuccess"},s?iu(t[Xe.b.NAME]):ru(t[Xe.b.NAME])),toastLifeTimeMs:3e3}),a())}),[c]);const u=null!=s?s:t[Xe.b.ENABLED],m=c===h.FETCH_STATUS.LOADING;return i.a.createElement(ou,{"aria-busy":m},i.a.createElement(d.EuiSwitch,{checked:u,disabled:m||r,showLabel:!1,label:u?nu:au,title:u?nu:au,"data-test-subj":"syntheticsIsMonitorEnabled",onChange:e=>{const t=e.target.checked;o(t)}}),m?i.a.createElement(lu,{size:"xs",color:"primary",$_css:-4}):null)},au=o.i18n.translate("xpack.synthetics.monitorManagement.enableMonitorLabel",{defaultMessage:"Enable monitor"}),nu=o.i18n.translate("xpack.synthetics.monitorManagement.disableMonitorLabel",{defaultMessage:"Disable monitor"}),iu=e=>o.i18n.translate("xpack.synthetics.monitorManagement.monitorEnabledSuccessMessage",{defaultMessage:"Monitor {name} enabled successfully.",values:{name:e}}),ru=e=>o.i18n.translate("xpack.synthetics.monitorManagement.monitorDisabledSuccessMessage",{defaultMessage:"Monitor {name} disabled successfully.",values:{name:e}}),su=e=>o.i18n.translate("xpack.synthetics.monitorManagement.monitorEnabledUpdateFailureMessage",{defaultMessage:"Unable to update monitor {name}.",values:{name:e}});var ou=Ee()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-p8iq6w-0"})({position:"relative"}),lu=Ee()(d.EuiProgress).withConfig({displayName:"_StyledEuiProgress",componentId:"sc-p8iq6w-1"})((e=>({position:"absolute",left:0,bottom:e.$_css,width:"100%",height:2})));const cu=({locations:e})=>{const{locations:t}=lc(),[a,r]=Object(n.useState)(3),s=e.slice(0,a);return i.a.createElement(uu,null,s.map((e=>{var a;return i.a.createElement(du,{key:e.id,color:"hollow",className:"eui-textTruncate"},`${null===(a=t.find((t=>t.id===e.id)))||void 0===a?void 0:a.label}`)})),e.length>a&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{r(e.length)},onClickAriaLabel:Jn},"+",e.length-3))};var uu=Ee()(d.EuiBadgeGroup).withConfig({displayName:"_StyledEuiBadgeGroup",componentId:"sc-ofu3fe-0"})({width:"100%"}),du=Ee()(d.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-ofu3fe-1"})({display:"flex",maxWidth:120});const mu=({apiKey:e,loading:t,setLoadAPIKey:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),!e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiButton,{fill:!0,fullWidth:!0,isLoading:t,color:"primary",onClick:()=>{a(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyGenerate"},t?fu:gu),i.a.createElement(d.EuiSpacer,{size:"s"})),e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:hu,iconType:"iInCircle",size:"s"}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("strong",null,pu)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m",whiteSpace:"pre"},e))),pu=o.i18n.translate("xpack.synthetics.monitorManagement.apiKey.label",{defaultMessage:"API key"}),gu=o.i18n.translate("xpack.synthetics.monitorManagement.getApiKey.label",{defaultMessage:"Generate API key"}),hu=o.i18n.translate("xpack.synthetics.monitorManagement.apiKeyWarning.label",{defaultMessage:"This API key will only be shown once. Please keep a copy for your own records."}),fu=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.loading",{defaultMessage:"Generating API key"});function bu(){const e=Object(c.useDispatch)(),{loading:{enablement:t},error:{enablement:a},enablement:i,list:{total:r}}=Object(c.useSelector)(A.t);return Object(n.useEffect)((()=>{i||e(Object(b.H)())}),[e,i]),{enablement:{areApiKeysEnabled:null==i?void 0:i.areApiKeysEnabled,canManageApiKeys:null==i?void 0:i.canManageApiKeys,canEnable:null==i?void 0:i.canEnable,isEnabled:null==i?void 0:i.isEnabled},error:a,loading:t,totalMonitors:r,enableSynthetics:Object(n.useCallback)((()=>e(Object(b.i)())),[e]),disableSynthetics:Object(n.useCallback)((()=>e(Object(b.f)())),[e])}}const Eu="https://www.elastic.co/guide/en/observability/current/synthetic-run-tests.html",yu=()=>{var e,t;const{enablement:{canManageApiKeys:a}}=bu(),[r,s]=Object(n.useState)(void 0),[o,l]=Object(n.useState)(!1),[c,u]=Object(n.useState)(!1),{data:m,loading:g}=Object(h.useFetcher)((async()=>c?Object(fl.n)():null),[c]);Object(n.useEffect)((()=>{s(null==m?void 0:m.apiKey.encoded)}),[m]);const f=!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save);return i.a.createElement(d.EuiPopover,{isOpen:o,id:"managementSettingsPopover",button:i.a.createElement(d.EuiButtonEmpty,{onClick:()=>{o||l(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyPopoverTrigger"},vu),closePopover:()=>{s(void 0),u(!1),l(!1)},style:{margin:"auto"}},i.a.createElement("div",{style:{maxWidth:350}},f&&a?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopoverTitle,null,Su),i.a.createElement(d.EuiText,{size:"s"},ku," ",i.a.createElement(d.EuiLink,{href:Eu,external:!0,target:"_blank"},xu)),i.a.createElement(mu,{loading:g,setLoadAPIKey:u,apiKey:r})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopoverTitle,null,Su),i.a.createElement(d.EuiText,{size:"s"},Mu," ",i.a.createElement(d.EuiLink,{href:Eu,external:!0,target:"_blank"},xu)))))},vu=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.label",{defaultMessage:"API Keys"}),xu=o.i18n.translate("xpack.synthetics.monitorManagement.learnMore.label",{defaultMessage:"Learn more"}),Su=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.generate",{defaultMessage:"Generate API Key"}),ku=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline."}),Mu=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyReducedPermissions.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline. To generate an API key, you must have permissions to manage API keys and Uptime write access. Please contact your administrator."}),wu=()=>i.a.createElement(Bo,{node:hl},i.a.createElement(yu,null)),Ou=({tags:e})=>{const[t,a]=Object(n.useState)(5),r=e.slice(0,t);return i.a.createElement(ju,null,r.map((e=>i.a.createElement(Iu,{key:e,color:"hollow",className:"eui-textTruncate"},e))),e.length>t&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{a(e.length)},onClickAriaLabel:Kn},"+",e.length-5))};var ju=Ee()(d.EuiBadgeGroup).withConfig({displayName:"_StyledEuiBadgeGroup",componentId:"sc-3ul5o2-0"})({width:"100%"}),Iu=Ee()(d.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-3ul5o2-1"})({display:"flex",maxWidth:120});const Cu=({pageState:{pageIndex:e,pageSize:t,sortField:a,sortOrder:r},monitorList:{list:s,error:{monitorList:l},loading:{monitorList:c}},onPageStateChange:u,onUpdate:m,errorSummaries:g})=>{var h,b;const{basePath:E}=Object(n.useContext)(f.c),y=mt().up("xl"),{total:v}=s,x=Object(n.useMemo)((()=>s.monitors.map((e=>({...e.attributes,id:e.id})))),[s.monitors]),S=Object(n.useCallback)((({page:e={index:0,size:10},sort:t={field:Xe.b.NAME,direction:"asc"}})=>{const{index:a,size:n}=e,{field:i,direction:r}=t;u({pageIndex:a+1,pageSize:n,sortField:`${i}.keyword`,sortOrder:r})}),[u]),k={pageIndex:e-1,pageSize:t,totalItemCount:v||0,pageSizeOptions:[5,10,25,50,100]},M={sort:{field:a.replace(".keyword",""),direction:r}},w=!(null===(h=Object(p.useKibana)().services)||void 0===h||null===(b=h.application)||void 0===b||!b.capabilities.uptime.save),O=[{align:"left",field:Xe.b.NAME,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.monitorName",{defaultMessage:"Monitor name"}),sortable:!0,render:(e,t)=>i.a.createElement(d.EuiLink,{href:`${E}/app/uptime/monitor/${btoa(t[Xe.b.CUSTOM_HEARTBEAT_ID]||t.id)}`},e)},{align:"left",field:Xe.b.MONITOR_TYPE,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.monitorType",{defaultMessage:"Monitor type"}),sortable:!0},{align:"left",field:Xe.b.TAGS,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.tags",{defaultMessage:"Tags"}),render:e=>e?i.a.createElement(Ou,{tags:e}):null},{align:"left",field:Xe.b.LOCATIONS,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.locations",{defaultMessage:"Locations"}),render:e=>e?i.a.createElement(cu,{locations:e}):null},{align:"left",field:Xe.b.SCHEDULE,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.schedule",{defaultMessage:"Frequency (min)"}),render:e=>null==e?void 0:e.number},{align:"left",field:Xe.b.URLS,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.URL",{defaultMessage:"URL"}),sortable:!0,render:(e,{hosts:t})=>e||t,truncateText:!0,textOnly:!0},{align:"left",field:Xe.b.ENABLED,name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.enabled",{defaultMessage:"Enabled"}),render:(e,t)=>i.a.createElement(tu,{id:t.id,monitor:t,isDisabled:!w,onUpdate:m})},{align:"left",name:o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.actions",{defaultMessage:"Actions"}),render:e=>i.a.createElement(Qc,{id:e.id,name:e[Xe.b.NAME],isDisabled:!w,onUpdate:m,errorSummaries:g,monitors:s.monitors})}];return i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(wu,null),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiBasicTable,{"aria-label":o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.title",{defaultMessage:"Monitor Management list"}),error:null==l?void 0:l.message,loading:c,isExpandable:!0,hasActions:!0,itemId:"monitor_id",items:x,columns:O,tableLayout:y?"auto":"fixed",pagination:k,sorting:M,onChange:S,noItemsMessage:c?Uc:Hc}))},Tu=({pageState:e,onPageStateChange:t,onUpdate:a,errorSummaries:n})=>{const r=Object(c.useSelector)(A.t);return i.a.createElement(Cu,{pageState:e,monitorList:r,onPageStateChange:t,onUpdate:a,errorSummaries:n})},Fu=({loading:e,pageState:t,onPageStateChange:a,onUpdate:n,errorSummaries:r,invalidTotal:s,monitorSavedObjects:o})=>{var l;const{pageSize:u,pageIndex:d}=t,m=(d-1)*u,p=Object(c.useSelector)(A.t);return i.a.createElement(Cu,{pageState:t,monitorList:{list:{monitors:null!==(l=null==o?void 0:o.slice(m,m+u))&&void 0!==l?l:[],page:t.pageIndex,perPage:t.pageSize,total:null!=s?s:0,syncErrors:null},enablement:null,error:{monitorList:null,serviceLocations:null,enablement:null},loading:{monitorList:e,serviceLocations:!1,enablement:!1},locations:p.locations,syntheticsService:p.syntheticsService,throttling:Xe.e},onPageStateChange:a,onUpdate:n,errorSummaries:r})},Lu=({isEnabled:e,pageState:t,dispatchPageAction:a})=>{var r;const s=Object(n.useCallback)((e=>{a({type:"update",payload:e})}),[a]),o=Object(n.useCallback)((()=>{a({type:"refresh"})}),[a]);Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors"}),Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors",delay:15e3});const d=Object(c.useSelector)(A.t),{type:m}=Object(u.useParams)(),{errorSummaries:g,loading:f,count:b}=function({onlyInvalidMonitors:e,sortField:t="@timestamp",sortOrder:a="desc"}){const i=Object(c.useSelector)(A.t),{lastRefresh:r}=Object(Ic.c)(),s=i.list.monitors.map((e=>e.id)).length>0||e,{data:o,loading:u}=Object(h.useEsSearch)({index:s?l.A:"",body:{size:1e3,query:{bool:{filter:Tc()}},collapse:{field:"config_id"},sort:[{[Cc[t]]:a}]}},[i,r,s,t,a],{name:"getInvalidMonitors"}),{count:d,loading:m}=function(){const e=Object(c.useSelector)(A.t),{lastRefresh:t}=Object(Ic.c)(),{data:a,loading:i}=Object(h.useEsSearch)({index:l.A,body:{size:0,query:{bool:{filter:Tc()}},aggs:{total:{cardinality:{field:"config_id"}}}}},[e,t],{name:"getInvalidMonitorsCount"});return Object(n.useMemo)((()=>{var e;const t=null==a||null===(e=a.aggregations)||void 0===e?void 0:e.total.value;return{loading:i,count:t}}),[a,i])}();return Object(n.useMemo)((()=>{const e=null==o?void 0:o.hits.hits.map((({_source:e})=>({...e,timestamp:e["@timestamp"]})));return{loading:u||m,errorSummaries:e,count:d}}),[d,m,o,u])}({onlyInvalidMonitors:"invalid"===m,sortField:t.sortField,sortOrder:t.sortOrder}),{data:E,loading:y}=(e=>{const{savedObjects:t}=Object(p.useKibana)().services,a=(null!=e?e:[]).map((e=>({id:e.config_id,type:Dl})));return Object(h.useFetcher)((async()=>{if(a.length>0){const n=await(null==t?void 0:t.client.bulkResolve(a));if(n){const{resolved_objects:t}=n;return t.filter((t=>{if(t.saved_object.updatedAt){const a=null==e?void 0:e.find((e=>e.config_id===t.saved_object.id));if(a)return He()(t.saved_object.updatedAt).isBefore(He()(a.timestamp))}return!Boolean(t.saved_object.error)})).map((({saved_object:e})=>({...e,updated_at:e.updatedAt})))}}}),[e])})(g);return e||0!==d.list.total?i.a.createElement(i.a.Fragment,null,i.a.createElement(kc,null),i.a.createElement(Fc,{invalidTotal:null!==(r=null==E?void 0:E.length)&&void 0!==r?r:0,onUpdate:o,onPageStateChange:s}),"all"===m?i.a.createElement(Tu,{pageState:t,monitorList:d,onPageStateChange:s,onUpdate:o,errorSummaries:g}):i.a.createElement(Fu,{pageState:t,monitorSavedObjects:E,onPageStateChange:s,onUpdate:o,errorSummaries:g,invalidTotal:null!=b?b:0,loading:Boolean(f)||Boolean(y)})):null},Au=(o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnabledFailure",{defaultMessage:"Monitor Management was not able to be enabled. Please contact support."}),o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledFailure",{defaultMessage:"Monitor Management was not able to be disabled. Please contact support."}),o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableSuccess",{defaultMessage:"Monitor Management enabled successfully."})),Pu=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledSuccess",{defaultMessage:"Monitor Management disabled successfully."}),Du=({focusButton:e})=>{const{error:t,enablement:a,enableSynthetics:r,loading:s}=bu(),[o,l]=Object(n.useState)(!1),{isEnabled:c,canEnable:u}=a,m=Object(n.useRef)(null);return Object(n.useEffect)((()=>{o&&c?(l(!1),Tt.a.toasts.addSuccess({title:Au,toastLifeTimeMs:3e3})):o&&t&&(l(!1),Tt.a.toasts.addSuccess({title:Pu,toastLifeTimeMs:3e3}))}),[c,o,t]),Object(n.useEffect)((()=>{var t;e&&(null===(t=m.current)||void 0===t||t.focus())}),[e]),c||s?null:i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,u?Ru:Nu),body:i.a.createElement("p",null,u?zu:_u),actions:u?i.a.createElement(d.EuiButton,{color:"primary",fill:!0,onClick:()=>{r(),l(!0)},"data-test-subj":"syntheticsEnableButton",buttonRef:m},Bu):null,footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,Hu)),i.a.createElement(d.EuiLink,{href:"https://docs.google.com/document/d/1hkzFibu9LggPWXQqfbAd0mMlV75wCME7_BebXlEH-oI",target:"_blank"},Uu))})},Ru=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.enabled.title",{defaultMessage:"Enable Monitor Management"}),Nu=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabled.title",{defaultMessage:"Monitor Management is disabled"}),zu=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement",{defaultMessage:"Enable Monitor Management to run lightweight and real-browser monitors from hosted testing locations around the world. Enabling Monitor Management will generate an API key to allow the Synthetics Service to write back to your Elasticsearch cluster."}),_u=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabledDescription",{defaultMessage:"Monitor Management is currently disabled. Monitor Management allows you to run lightweight and real-browser monitors from hosted testing locations around the world. To enable Monitor Management, please contact an administrator."}),Bu=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.title",{defaultMessage:"Enable"}),Uu=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.doc",{defaultMessage:"Read the docs"}),Hu=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.learnMore",{defaultMessage:"Want to learn more?"});var $u=a(81);const Gu=(e,t)=>{switch(t.type){case"update":return{...e,...t.payload};case"refresh":return{...e};default:throw new Error(`Action "${null==t?void 0:t.type}" not recognizable`)}},qu=()=>{Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors"}),Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors",delay:15e3}),cc();const[e,t]=Object(n.useState)(!1),{error:a,enablement:r,loading:s,enableSynthetics:o}=bu(),{loading:l}=lc(),{list:m}=Object(c.useSelector)(A.t),{isEnabled:p}=r,g=Object(n.useRef)(p);Object(n.useEffect)((()=>{p||!0!==g.current||t(!0),g.current=Boolean(p)}),[p]);const{pageState:f,dispatchPageAction:E}=function(){const e=Object(c.useDispatch)(),[t,a]=Object(n.useReducer)(Gu,{pageIndex:1,pageSize:10,sortOrder:"asc",sortField:`${$u.a.NAME}.keyword`}),{pageIndex:i,pageSize:r,sortField:s,sortOrder:o}=t,{type:l}=Object(u.useParams)();return Object(n.useEffect)((()=>{"all"===l&&e(Object(b.x)({page:i,perPage:r,sortOrder:o,sortField:s}))}),[e,i,r,s,o,l,t]),{pageState:t,dispatchPageAction:a,viewType:l}}(),y=void 0!==p&&0===m.total;return i.a.createElement(i.a.Fragment,null,i.a.createElement(el,{loading:s||l,error:Boolean(a),loadingTitle:Wu,errorTitle:yc,errorBody:Zu},!p&&m.total&&m.total>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:Ku,color:"warning",iconType:"help"},i.a.createElement("p",null,Yu),r.canEnable?i.a.createElement(d.EuiButton,{fill:!0,color:"primary",onClick:()=>{o()}},Xu):i.a.createElement("p",null,Ju," ",i.a.createElement(d.EuiLink,{href:"#",target:"_blank"},Vu))),i.a.createElement(d.EuiSpacer,{size:"s"})):null,i.a.createElement(Lu,{isEnabled:p,pageState:f,dispatchPageAction:E})),y&&i.a.createElement(Du,{focusButton:e}))},Wu=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel",{defaultMessage:"Loading Monitor Management"}),Vu=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.callout.learnMore",{defaultMessage:"Learn more."}),Ku=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled",{defaultMessage:"Monitor Management is disabled"}),Ju=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled.adminContact",{defaultMessage:"Please contact your administrator to enable Monitor Management."}),Yu=o.i18n.translate("xpack.synthetics.monitorManagement.callout.description.disabled",{defaultMessage:"Monitor Management is currently disabled. To run your monitors on Elastic managed Synthetics service, enable Monitor Management. Your existing monitors are paused."}),Zu=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError.description",{defaultMessage:"Monitor Management settings could not be loaded. Please contact Support."}),Xu=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.management",{defaultMessage:"Enable Monitor Management"}),Qu=()=>i.a.createElement("div",null,i.a.createElement(Uo,{node:gl})),ed=()=>i.a.createElement("div",null,i.a.createElement(Uo,{node:hl})),td=({monitors:e})=>i.a.createElement("span",null,e.map(((e,t)=>i.a.createElement("span",{key:e.id},t>0&&", ",i.a.createElement(d.EuiToolTip,{content:e.url},i.a.createElement(Hn,{monitorId:e.id,linkParameters:""},e.name||e.id)))))),ad=Ee()("div").withConfig({displayName:"WrapFieldSearch",componentId:"sc-mus48d-0"})(["max-width:700px;"]),nd=({setSearch:e})=>{const[t,a]=Object(n.useState)("");return dt()((()=>{e(t)}),350,[t]),i.a.createElement(ad,null,i.a.createElement(d.EuiFieldSearch,{"data-test-subj":"uptimeCertSearch",placeholder:ri,onChange:e=>{a(e.target.value)},isClearable:!0,"aria-label":ri,fullWidth:!0}))},id=Ee()(d.EuiText).withConfig({displayName:"DateText",componentId:"sc-e5uaji-0"})(["display:inline-block;margin-left:5px;"]),rd=({cert:e})=>{const t=Object(I.c)(null==e?void 0:e.not_after,null==e?void 0:e.not_before),a=Object(c.useSelector)(A.A),n=He()(null==e?void 0:e.not_after).fromNow();if(t===l.c.EXPIRING_SOON)return i.a.createElement(d.EuiHealth,{color:"warning"},i.a.createElement("span",null,ni,"  ",i.a.createElement(id,{color:"subdued",size:"xs"},n)));if(t===l.c.EXPIRED)return i.a.createElement(d.EuiHealth,{color:"danger"},i.a.createElement("span",null,ai,"  ",i.a.createElement(id,{color:"subdued",size:"xs"},n)));if(t===l.c.TOO_OLD){var r;const t=null===(r=a.settings)||void 0===r?void 0:r.certAgeThreshold,n=He()(null==e?void 0:e.not_before).add(t,"days").fromNow();return i.a.createElement(d.EuiHealth,{color:"danger"},i.a.createElement("span",null,oi,i.a.createElement(id,{color:"subdued",size:"xs"},n)))}const s=He()(null==e?void 0:e.not_after).fromNow(!0);return i.a.createElement(d.EuiHealth,{color:"success"},i.a.createElement("span",null,ti,"  ",i.a.createElement(id,{color:"subdued",size:"xs"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.certs.status.ok.label",defaultMessage:" for {okRelativeDate}",description:'Denotes an amount of time for which a cert is valid. Example: "OK for 2 days"',values:{okRelativeDate:s}}))))},sd=Ee()(d.EuiButtonEmpty).withConfig({displayName:"EmptyButton",componentId:"sc-10h8575-0"})([".euiButtonEmpty__content{padding-right:0px;}"]),od=Ee.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-10h8575-1"})(["margin-right:8px;"]),ld=({cert:e})=>{var t,a,n,r;const s=({text:e,val:t})=>i.a.createElement(od,{"data-test-subj":t,className:"eui-textNoWrap"},i.a.createElement(d.EuiToolTip,{content:t},i.a.createElement(sd,null,e," ")),i.a.createElement(d.EuiCopy,{textToCopy:null!=t?t:""},(e=>i.a.createElement(d.EuiButtonIcon,{"aria-label":hi,onClick:e,iconType:"copy",title:hi}))));return i.a.createElement("span",null,i.a.createElement(s,{text:"SHA 1",val:null!==(t=null==e||null===(a=e.sha1)||void 0===a?void 0:a.toUpperCase())&&void 0!==t?t:""}),i.a.createElement(s,{text:"SHA 256",val:null!==(n=null==e||null===(r=e.sha256)||void 0===r?void 0:r.toUpperCase())&&void 0!==n?n:""}))},cd=({page:e,certificates:t,sort:a,onChange:n})=>{var r,s;const o={pageIndex:e.index,pageSize:e.size,totalItemCount:null!==(r=null==t?void 0:t.total)&&void 0!==r?r:0,pageSizeOptions:[10,25,50,100],showPerPageOptions:!0},l=[{field:"not_after",name:si,sortable:!0,render:(e,t)=>i.a.createElement(rd,{cert:t})},{name:li,field:"common_name",sortable:!0},{name:ci,field:"monitors",render:e=>i.a.createElement(td,{monitors:e})},{name:ui,field:"issuer",sortable:!0},{name:di,field:"not_after",sortable:!0,render:e=>He()(e).format("L LT")},{name:mi,field:"not_before",sortable:!0,render:e=>He()().diff(He()(e),"days")+" "+pi},{name:gi,field:"sha256",render:(e,t)=>i.a.createElement(ld,{cert:t})}];return i.a.createElement(d.EuiBasicTable,{loading:t.loading,columns:l,items:null!==(s=null==t?void 0:t.certs)&&void 0!==s?s:[],pagination:o,onChange:e=>{n(e.page,e.sort)},sorting:{sort:{field:a.field,direction:a.direction}},noItemsMessage:t.loading?bi:i.a.createElement("span",{"data-test-subj":"uptimeCertsEmptyMessage"},fi)})};var ud;!function(e){e.issuer="tls.server.x509.issuer.common_name",e.not_after="tls.server.x509.not_after",e.not_before="tls.server.x509.not_before",e.common_name="tls.server.x509.subject.common_name"}(ud||(ud={}));const dd=e=>{var t,a,n,i,r;return{certs:null===(t=e.hits)||void 0===t||null===(a=t.hits)||void 0===a?void 0:a.map((e=>{var t,a,n,i,r,s,o,l,c;const u=null===(t=e._source.tls)||void 0===t?void 0:t.server,d=null==u||null===(a=u.x509)||void 0===a?void 0:a.not_after,m=null==u||null===(n=u.x509)||void 0===n?void 0:n.not_before,p=null==u||null===(i=u.x509)||void 0===i||null===(r=i.issuer)||void 0===r?void 0:r.common_name,g=null==u||null===(s=u.x509)||void 0===s||null===(o=s.subject)||void 0===o?void 0:o.common_name,h=null==u||null===(l=u.hash)||void 0===l?void 0:l.sha1,f=null==u||null===(c=u.hash)||void 0===c?void 0:c.sha256;return{monitors:e.inner_hits.monitors.hits.hits.map((e=>{var t;const a=e._source;return{name:null==a?void 0:a.monitor.name,id:null==a?void 0:a.monitor.id,url:null==a||null===(t=a.url)||void 0===t?void 0:t.full}})),issuer:p,sha1:h,sha256:f,not_after:d,not_before:m,common_name:g}})),total:null!==(n=null===(i=e.aggregations)||void 0===i||null===(r=i.total)||void 0===r?void 0:r.value)&&void 0!==n?n:0}};var md=a(126);const pd="xpack.uptime.certList.pageSize",gd=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem(pd))&&void 0!==e?e:"",10);return isNaN(t)?10:t},hd=()=>{Object(h.useTrackPageview)({app:"uptime",path:"certificates"}),Object(h.useTrackPageview)({app:"uptime",path:"certificates",delay:15e3}),T([{text:"Certificates"}]);const[e,t]=Object(n.useState)({index:0,size:gd()}),[a,r]=Object(n.useState)({field:"not_after",direction:"asc"}),[s,o]=Object(n.useState)(""),l=Object(c.useDispatch)();Object(n.useEffect)((()=>{l(Object(nr.a)())}),[l]);const u=(({pageIndex:e,size:t=20,search:a,sortBy:i="not_after",direction:r="asc"})=>{var s,o;const l=Object(c.useSelector)(A.A),{lastRefresh:u}=Object(n.useContext)(f.a),d=(({pageIndex:e,search:t,notValidBefore:a,notValidAfter:n,size:i=20,to:r="now",from:s="now-5m",sortBy:o="not_after",direction:l="asc"})=>({from:e*i,size:i,sort:[{[ud[o]]:{order:l}}],query:{bool:{...t?{minimum_should_match:1,should:[{multi_match:{query:escape(t),type:"phrase_prefix",fields:["monitor.id.text","monitor.name.text","url.full.text","tls.server.x509.subject.common_name.text","tls.server.x509.issuer.common_name.text"]}}]}:{},filter:[{exists:{field:"tls.server.hash.sha256"}},{range:{"monitor.timespan":{gte:s,lte:r}}},{bool:{minimum_should_match:1,should:[...a?[{range:{"tls.certificate_not_valid_before":{lte:a}}}]:[],...n?[{range:{"tls.certificate_not_valid_after":{lte:n}}}]:[]]}}]}},_source:["monitor.id","monitor.name","tls.server.x509.issuer.common_name","tls.server.x509.subject.common_name","tls.server.hash.sha1","tls.server.hash.sha256","tls.server.x509.not_after","tls.server.x509.not_before"],collapse:{field:"tls.server.hash.sha256",inner_hits:{_source:{includes:["monitor.id","monitor.name","url.full"]},collapse:{field:"monitor.id"},name:"monitors",sort:[{"monitor.id":"asc"}]}},aggs:{total:{cardinality:{field:"tls.server.hash.sha256"}}}}))({pageIndex:e,size:t,search:a,sortBy:i,direction:r,to:"now",from:"now-5m"}),m=Object(h.createEsParams)({index:null===(s=l.settings)||void 0===s?void 0:s.heartbeatIndices,body:d}),{data:p,loading:g}=Object(h.useEsSearch)(m,[null===(o=l.settings)||void 0===o?void 0:o.heartbeatIndices,t,e,u,a,i,r],{name:"getTLSCertificates"});return p?{...dd(p),loading:g}:{certs:[],total:0,loading:g}})({search:s,size:e.size,pageIndex:e.index,sortBy:a.field,direction:a.direction});return Object(n.useEffect)((()=>{l(Object(md.c)({total:u.total}))}),[u.total,l]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(nd,{setSearch:o}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(cd,{page:e,onChange:(e,a)=>{t(e),r(a),localStorage.setItem(pd,e.size.toString())},sort:a,certificates:u}))},fd=Ee()(d.EuiButtonIcon).withConfig({displayName:"OverviewPageLinkButtonIcon",componentId:"sc-1g1o1qg-0"})(["margin-top:12px;"]),bd=({dataTestSubj:e,direction:t,pagination:a})=>{const[,n]=Object(I.i)(),r="prev"===t?"arrowLeft":"arrowRight",s="next"===t?o.i18n.translate("xpack.synthetics.overviewPageLink.next.ariaLabel",{defaultMessage:"Next page of results"}):o.i18n.translate("xpack.synthetics.overviewPageLink.prev.ariaLabel",{defaultMessage:"Prev page of results"}),l=o.i18n.translate("xpack.synthetics.overviewPageLink.disabled.ariaLabel",{defaultMessage:"A disabled pagination button indicating that there cannot be any further navigation in the monitors list."});return i.a.createElement(fd,{color:"text",onClick:()=>{n({pagination:a})},"data-test-subj":e,iconType:r,"aria-label":a?s:l,isDisabled:!a})},Ed=({setIsOpen:e,size:t})=>i.a.createElement(d.EuiButtonEmpty,{color:"text","data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.popoverOpen",iconType:"arrowDown",iconSide:"right",onClick:()=>e(!0)},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.pageSizePopoverButtonText",defaultMessage:"Rows per page: {size}",values:{size:t}})),yd=[{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem10",key:"10 rows",numRows:10},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem25",key:"25 rows",numRows:25},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem50",key:"50 rows",numRows:50},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem100",key:"100 rows",numRows:100}],vd=({size:e,setSize:t})=>{const[,a]=Object(I.i)();return Object(n.useEffect)((()=>{localStorage.setItem("xpack.uptime.monitorList.pageSize",e.toString())}),[e]),i.a.createElement(xd,{size:e,setSize:t,setUrlParams:a})},xd=({size:e,setSize:t,setUrlParams:a})=>{const[r,s]=Object(n.useState)(!1);return i.a.createElement(d.EuiPopover,{button:i.a.createElement(Ed,{setIsOpen:e=>s(e),size:e}),isOpen:r,closePopover:()=>s(!1),anchorPosition:"upLeft"},i.a.createElement(d.EuiContextMenuPanel,{items:yd.map((({"data-test-subj":n,key:r,numRows:o})=>i.a.createElement(d.EuiContextMenuItem,{"data-test-subj":n,key:r,icon:e===o?"check":"empty",onClick:()=>{t(o),a({pagination:void 0}),s(!1)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.pageSizeSelect.numRowsItemMessage",defaultMessage:"{numRows} rows",values:{numRows:o}}))))}))},Sd=({error:e,monitorId:t,timestamp:a})=>{const n=Object(I.e)();n.statusFilter="down";const r=j(n,!0),s=a?He()(new Date(a).valueOf()).fromNow():"";return i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,o.i18n.translate("xpack.synthetics.monitorList.mostRecentError.title",{defaultMessage:"Most recent error ({timestamp})",values:{timestamp:s},description:"Most Recent Error title in Monitor List Expanded row"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(Hn,{monitorId:t,linkParameters:r},null==e?void 0:e.message)))},kd=({location:e,textSize:t})=>e?i.a.createElement(d.EuiText,{size:t||"s",grow:!1},e):i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-observer-options.html",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorList.geoName.helpLinkAnnotation",{defaultMessage:"Add location",description:"Text that instructs the user to navigate to our docs to add a geographic location to their data"})),Md=({locationNames:e,status:t})=>{const a=t===l.y.UP?"success":"danger";let n=[...e];e.has(l.C)&&(n=n.filter((e=>e!==l.C)),n.push(l.C));const r=n.join(", ");return i.a.createElement("span",null,i.a.createElement(d.EuiBadge,{color:a},Ya(t)),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement("span",{"aria-label":o.i18n.translate("xpack.synthetics.monitorList.drawer.statusRowLocationList",{defaultMessage:'A list of locations with "{status}" status when last checked.',values:{status:t}})},r||"--"),i.a.createElement(d.EuiSpacer,{size:"xs"}))},wd=({summaryPings:e})=>{const t=new Set,a=new Set;e.forEach((e=>{var n,i,r;const s=null!==(n=null===(i=e.observer)||void 0===i||null===(r=i.geo)||void 0===r?void 0:r.name)&&void 0!==n?n:l.C;e.monitor.status===l.y.UP?t.add(s):e.monitor.status===l.y.DOWN&&a.add(s)}));const n=new Set([...t].filter((e=>!a.has(e))));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{style:{maxWidth:1e3}},a.size>0&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Md,{locationNames:a,status:l.y.DOWN})),n.size>0&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Md,{locationNames:n,status:l.y.UP}))),(a.has(l.C)||t.has(l.C))&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiCallOut,{color:"warning"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.drawer.missingLocation",defaultMessage:"Some heartbeat instances do not have a location defined. {link} to your heartbeat configuration.",values:{link:i.a.createElement(kd,null)}})),i.a.createElement(d.EuiSpacer,{size:"s"})))},Od=({ariaLabel:e,href:t,iconType:a,message:n,tooltipContent:r})=>void 0===t?i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:o.i18n.translate("xpack.synthetics.integrationLink.missingDataMessage",{defaultMessage:"Required data for this integration was not found."})},i.a.createElement(d.EuiIcon,{type:a}))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{color:"subdued"},n))):i.a.createElement(d.EuiLink,{"aria-label":e,href:t},i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:r,position:"top"},i.a.createElement(d.EuiIcon,{type:a}))),i.a.createElement(d.EuiFlexItem,null,n))),jd=({summary:e})=>{const{basePath:t,dateRangeStart:a,dateRangeEnd:r,isApmAvailable:s,isInfraAvailable:l,isLogsAvailable:c}=Object(n.useContext)(f.c),{domain:u,podUid:m,containerId:p,ip:g}=(e=>{var t,a,n,i,r,s,o,l,c;const u=null!==(t=null===(a=e.state.url)||void 0===a?void 0:a.domain)&&void 0!==t?t:"",d=null===(n=e.state.summaryPings)||void 0===n?void 0:n[0];return{domain:u,podUid:null!==(i=null==d||null===(r=d.kubernetes)||void 0===r||null===(s=r.pod)||void 0===s?void 0:s.uid)&&void 0!==i?i:void 0,containerId:null!==(o=null==d||null===(l=d.container)||void 0===l?void 0:l.id)&&void 0!==o?o:void 0,ip:null!==(c=null==d?void 0:d.monitor.ip)&&void 0!==c?c:void 0}})(e);return s||l||c?i.a.createElement(d.EuiFlexGroup,{direction:"column"},s?i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.apmIntegrationAction.description",{defaultMessage:"Search APM for this monitor",description:"This value is shown to users when they hover over an icon that will take them to the APM app."}),href:Object(ye.f)(e,t,a,r),iconType:"apmApp",message:o.i18n.translate("xpack.synthetics.apmIntegrationAction.text",{defaultMessage:"Show APM Data",description:"A message explaining that when the user clicks the associated link, it will navigate to the APM app"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.observabilityIntegrationsColumn.apmIntegrationLink.tooltip",{defaultMessage:'Click here to check APM for the domain "{domain}" or explicitly defined "service name".',description:"A messsage shown in a tooltip explaining that the nested anchor tag will navigate to the APM app and search for the given URL domain or explicitly defined service name.",values:{domain:u}})})):null,l?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.ariaLabel",{defaultMessage:"Check Infrastructure UI for this montor's ip address",description:"This value is shown as the aria label value for screen readers."}),href:Object(ye.d)(e,t),iconType:"metricsApp",message:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.message",{defaultMessage:"Show host metrics",description:"A message explaining that this link will take the user to the Infrastructure UI, filtered for this monitor's IP Address"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.tooltip",{defaultMessage:'Check Infrastructure UI for the IP "{ip}"',values:{ip:Array.isArray(g)?g[0]:g}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.description",{defaultMessage:"Check Infrastructure UI for this monitor's pod UID",description:"This value is shown as the aria label value for screen readers."}),href:Object(ye.e)(e,t),iconType:"metricsApp",message:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.message",{defaultMessage:"Show pod metrics",description:"A message explaining that this link will take the user to the Infrastructure UI filtered for the monitor Pod UID."}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.tooltip",{defaultMessage:'Check Infrastructure UI for pod UID "{podUid}".',values:{podUid:m}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.docker.description",{defaultMessage:"Check Infrastructure UI for this monitor's container ID"}),href:Object(ye.c)(e,t),iconType:"metricsApp",message:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.container.message",{defaultMessage:"Show container metrics"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.docker.tooltip",{defaultMessage:'Check Infrastructure UI for container ID "{containerId}"',values:{containerId:p}})}))):null,c?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.description",{defaultMessage:"Check Logging UI for this monitor's ip address",description:"This value is shown as the aria label for screen readers."}),href:Object(ye.h)(e,t),iconType:"logsApp",message:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.message",{defaultMessage:"Show host logs",description:"A message explaining that this link will take the user to the Infrastructure UI filtered for the monitor's IP Address"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.tooltip",{defaultMessage:'Check Logging UI for the IP "{ip}"',values:{ip:Array.isArray(g)?g[0]:g}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.ariaLabel",{defaultMessage:"Show pod logs"}),href:Object(ye.i)(e,t),iconType:"logsApp",message:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.message",{defaultMessage:"Show pod logs"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.tooltip",{defaultMessage:'Check for logs for pod UID "{podUid}"',values:{podUid:m}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Od,{ariaLabel:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.id",{defaultMessage:"Show container logs"}),href:Object(ye.g)(e,t),iconType:"logsApp",message:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.message",{defaultMessage:"Show container logs"}),tooltipContent:o.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.tooltip",{defaultMessage:'Check Logging UI for container ID "{containerId}"',values:{containerId:p}})}))):null):i.a.createElement(v.FormattedMessage,{defaultMessage:"No integrated applications available",description:"This message is shown when no applications that Uptime links to are enabled in the current space",id:"xpack.synthetics.monitorList.integrationGroup.emptyMessage"})},Id=Object(c.connect)((e=>({popoverState:Object(A.i)(e)})),(e=>({togglePopoverIsVisible:t=>e(Object(b.W)(t))})))((({summary:e,popoverState:t,togglePopoverIsVisible:a})=>{var n,r;const s=`${e.monitor_id}_popover`,l=null==e||null===(n=e.state)||void 0===n||null===(r=n.url)||void 0===r?void 0:r.full,c=!!t&&t.open&&t.id===s;return i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButton,{"aria-label":o.i18n.translate("xpack.synthetics.monitorList.observabilityIntegrationsColumn.popoverIconButton.ariaLabel",{defaultMessage:"Opens integrations popover for monitor with url {monitorUrl}",description:"A message explaining that this button opens a popover with links to other apps for a given monitor",values:{monitorUrl:l}}),"data-test-subj":`xpack.synthetics.monitorList.actionsPopover.${e.monitor_id}`,onClick:()=>a({id:s,open:!0}),iconType:"arrowDown",iconSide:"right"},o.i18n.translate("xpack.synthetics.monitorList.observabilityInvestigateColumn.popoverIconButton.label",{defaultMessage:"Investigate"})),closePopover:()=>a({id:s,open:!1}),id:s,isOpen:c},i.a.createElement(jd,{summary:e}))}));var Cd=a(162);const Td=Ee()(d.EuiListGroup).withConfig({displayName:"LinkGroupList",componentId:"sc-19op1rf-0"})(["&&&{a{padding-left:0;padding-top:0;}}"]),Fd=({monitorAlerts:e,loading:t})=>{const{basePath:a}=Object(n.useContext)(f.c),r=[];return(null!=e?e:[]).forEach(((e,t)=>{r.push({size:"s",label:e.name,href:Object(Cd.a)(e.id,a),"data-test-subj":"uptimeMonitorListDrawerAlert"+t})})),i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,o.i18n.translate("xpack.synthetics.monitorList.enabledAlerts.title",{defaultMessage:"Enabled rules",description:"Rules enabled for this monitor"})),i.a.createElement(d.EuiDescriptionListDescription,null,0===r.length&&!t&&i.a.createElement(d.EuiCallOut,{size:"s",title:o.i18n.translate("xpack.synthetics.monitorList.enabledAlerts.noAlert",{defaultMessage:"No rules are enabled for this monitor."})}),t?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(Td,{listItems:r,flush:!0})))},Ld=({monitorUrl:e})=>i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,o.i18n.translate("xpack.synthetics.monitorList.drawer.url",{defaultMessage:"Url"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiLink,{href:e,target:"_blank",external:!0},e))),Ad=({summary:e})=>i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,o.i18n.translate("xpack.synthetics.monitorList.drawer.mostRecentRun",{defaultMessage:"Most recent test run"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiText,{size:"s"},He()(e.state.timestamp).format("LLL").toString()))),Pd=Ee.a.div.withConfig({displayName:"ContainerDiv",componentId:"sc-gtt4so-0"})(["padding:10px;width:100%;"]);function Dd({summary:e,monitorDetails:t,loading:a}){var n,r;const s=(null==e||null===(n=e.state)||void 0===n||null===(r=n.url)||void 0===r?void 0:r.full)||"";return e&&e.state.summaryPings?i.a.createElement(Pd,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiFlexGroup,{style:{maxWidth:1e3}},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ld,{monitorUrl:s})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ad,{summary:e})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Id,{summary:e}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(wd,{summaryPings:e.state.summaryPings}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Fd,{loading:a,monitorAlerts:null==t?void 0:t.alerts}),i.a.createElement(d.EuiSpacer,{size:"s"}),t&&t.error&&i.a.createElement(Sd,{error:t.error,monitorId:e.monitor_id,timestamp:t.timestamp})):null}const Rd=({summary:e})=>{var t;const{lastRefresh:a}=Object(n.useContext)(f.a),r=null==e?void 0:e.monitor_id,{dateRangeStart:s,dateRangeEnd:o}=Object(I.e)(),l=Object(c.useSelector)((t=>Object(A.p)(t,e))),u=Object(c.useSelector)(A.o),d=Object(c.useDispatch)(),{data:m,loading:p}=Object(c.useSelector)(pe.b),g=(null!==(t=null==m?void 0:m.data)&&void 0!==t?t:[]).find((e=>e.params.search.includes(r)));return Object(n.useEffect)((()=>{d(Mi.a.get({dateStart:s,dateEnd:o,monitorId:r}))}),[s,o,r,d,g,a]),i.a.createElement(Dd,{monitorDetails:l,summary:e,loading:u||p})},Nd=Ee()(d.EuiFlexGroup).withConfig({displayName:"FlexGroupContainer",componentId:"sc-b7nvcs-0"})(["position:relative;"]),zd=()=>i.a.createElement(Nd,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h5",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.monitoringStatusTitle",defaultMessage:"Monitors"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Le,null))),_d=({showPopover:e=!1,showHelpText:t=!1,showLabel:a=!1})=>{const[r,s]=Object(n.useState)(!1);return i.a.createElement(d.EuiPopover,{button:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFormRow,{helpText:t?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.defineConnector.description",defaultMessage:"Define a default connector in {link} to enable monitor status alerts.",values:{link:i.a.createElement(ta,{to:l.v+"?focusConnectorField=true","data-test-subj":"uptimeSettingsLink",target:"_blank"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.defineConnector.settingsLink",defaultMessage:"Settings"}))}}):void 0},i.a.createElement(d.EuiSwitch,{id:"defineAlertSettingsSwitch",label:Wn,showLabel:a,"aria-label":Wn,onChange:e?()=>s((e=>!e)):()=>{},checked:!1,compressed:!0,disabled:!e,"data-test-subj":"uptimeDisplayDefineConnector"}))),isOpen:!!e&&r,closePopover:()=>s(!1)},i.a.createElement(d.EuiText,{style:{width:"350px"},"data-test-subj":"uptimeSettingsDefineConnector"},i.a.createElement(ta,{to:l.v+"?focusConnectorField=true","data-test-subj":"uptimeSettingsLink"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.defineConnector.popover.defaultLink",defaultMessage:"Define a default connector"}))," ",i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.defineConnector.popover.description",defaultMessage:"to receive status alerts."})))},Bd=({monitorId:e,selectedMonitor:t})=>{var a,r,s;const[o,m]=Object(n.useState)(!1),{settings:p}=Object(c.useSelector)(A.A),g=Object(u.useRouteMatch)(l.r),h=Object(c.useDispatch)(),{data:f}=Object(c.useSelector)(pe.d),{data:b,loading:E}=Object(c.useSelector)(pe.b),{data:y}=Object(c.useSelector)(pe.l),{data:v,error:x}=Object(c.useSelector)(pe.n),S=null==v?void 0:v.params.search.includes(e);let k=(null!==(a=null==b?void 0:b.data)&&void 0!==a?a:[]).find((t=>t.params.search.includes(e)));S&&(k=v),y===(null===(r=k)||void 0===r?void 0:r.id)&&(k=void 0);const M=(null!=f?f:[]).filter((e=>{var t;return null==p||null===(t=p.defaultConnectors)||void 0===t?void 0:t.includes(e.id)}));Object(n.useEffect)((()=>{m(!1)}),[k,y,x]);const w=(null!==(s=null==p?void 0:p.defaultConnectors)&&void 0!==s?s:[]).length>0,O=o||E&&!b,j=k?Vn:Wn;return w||k?i.a.createElement("div",{className:"eui-displayInlineBlock",style:{marginRight:10}},i.a.createElement(d.EuiToolTip,{content:j},i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSwitch,{id:"enableDisableAlertSwitch",compressed:!g,disabled:O,label:j,showLabel:!!g,"aria-label":j,onChange:()=>{k?k&&(h(pe.f.get({alertId:k.id})),m(!0)):(h(pe.e.get({defaultActions:M,monitorId:e,selectedMonitor:t,defaultEmail:null==p?void 0:p.defaultEmail})),m(!0))},checked:!!k,"data-test-subj":k?"uptimeDisableSimpleDownAlert"+e:"uptimeEnableSimpleDownAlert"+e})," ",O&&i.a.createElement(d.EuiLoadingSpinner,{className:"eui-alignMiddle"})))):i.a.createElement(_d,{showPopover:!g,showHelpText:!!g,showLabel:!!g})};var Ud=a(29),Hd=a.n(Ud);const $d=(e,t={})=>{var a;const n=Hd.a.parse(e,t);return(null!==(a=null==n?void 0:n.valueOf())&&void 0!==a?a:0)>Date.now()?Hd.a.parse("now"):n},Gd=({monitorId:e,configId:t})=>{const a=Object(c.useDispatch)(),n=Object(c.useSelector)(Object(Na.b)(t));if(!t)return i.a.createElement(d.EuiToolTip,{content:Wd},i.a.createElement(i.a.Fragment,null,"--"));const r=n&&n.status===Na.a.LOADING,s=!n||n.status===Na.a.COMPLETED;return r?i.a.createElement(d.EuiLoadingSpinner,{size:"s"}):i.a.createElement(d.EuiToolTip,{content:n?Kd:Vd},i.a.createElement(d.EuiButtonIcon,{iconType:"play",onClick:()=>{a(b.V.get(t))},isDisabled:!s,"aria-label":qd}))},qd=o.i18n.translate("xpack.synthetics.monitorList.testNow.AriaLabel",{defaultMessage:"CLick to run test now"}),Wd=o.i18n.translate("xpack.synthetics.monitorList.testNow.available",{defaultMessage:"Test now is only available for monitors added via Monitor Management."}),Vd=o.i18n.translate("xpack.synthetics.monitorList.testNow.label",{defaultMessage:"Test now"}),Kd=o.i18n.translate("xpack.synthetics.monitorList.testNow.scheduled",{defaultMessage:"Test is already scheduled"}),Jd=()=>{var e;const[t,a]=Object(n.useState)(!1),{pingHistogram:r}=Object(c.useSelector)(A.B),s=Object(I.i)()[1],o=null!==(e=null==r?void 0:r.histogram)&&void 0!==e?e:[],l=null==o?void 0:o[Math.floor(o.length/2)].x,u=null==o?void 0:o[0].x;return i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonEmpty,{onClick:()=>a((e=>!e))},Zd),isOpen:t,closePopover:()=>a(!1),anchorPosition:"upCenter"},i.a.createElement(d.EuiPopoverTitle,null,Xd),i.a.createElement("div",{style:{width:"300px"}},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.noMessage.troubleshoot",defaultMessage:"Try using an absolute date range. If monitors appears afterwards, there may be an issue with the system clock where Heartbeat or Kibana is installed."})))),i.a.createElement(d.EuiPopoverFooter,null,i.a.createElement(d.EuiButton,{fullWidth:!0,iconType:"calendar",size:"s",onClick:()=>{l&&u&&s({dateRangeStart:new Date(u).toISOString(),dateRangeEnd:new Date(l).toISOString()})}},Yd)))},Yd=o.i18n.translate("xpack.synthetics.monitorList.troubleshoot.tryDateRange",{defaultMessage:"Apply absolute date range"}),Zd=o.i18n.translate("xpack.synthetics.monitorList.troubleshoot.whereAreMyMonitors",{defaultMessage:"Where are my monitors?"}),Xd=o.i18n.translate("xpack.synthetics.monitorList.troubleshoot.systemClockOutOfSync",{defaultMessage:"System clock may be out of sync"}),Qd=({loading:e,filters:t})=>{const{statusFilter:a}=Object(I.e)(),{pingHistogram:n}=Object(c.useSelector)(A.B),r=(null==n?void 0:n.histogram)&&n.histogram.length>0&&!a?i.a.createElement(Jd,null):null;return e?i.a.createElement(i.a.Fragment,null," ",Uc):t?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},Bc),i.a.createElement(d.EuiFlexItem,{grow:!1},r))):i.a.createElement(i.a.Fragment,null,Hc,r)},em=({filters:e,refreshedMonitorIds:t=[],monitorList:{list:a,error:r,loading:s},pageSize:l,setPageSize:u})=>{var m,p,g,b;const[E,y]=Object(n.useState)([]),{width:v}=ct()(),[x,S]=Object(n.useState)(!1);dt()((()=>{var e;S(["m","l"].includes(null!==(e=Object(d.getBreakpoint)(v))&&void 0!==e?e:""))}),50,[v]);const k=null!==(m=a.summaries)&&void 0!==m?m:[],{histogramsById:M,minInterval:w}=(({items:e})=>{var t,a;const{dateRangeStart:i,dateRangeEnd:r}=Object(I.e)(),{lastRefresh:s}=Object(n.useContext)(f.a),{settings:o}=Object(c.useSelector)(A.A),l=(null!=e?e:[]).map((({monitor_id:e})=>e)),{queryParams:u,minInterval:d}=((e,t,a,n)=>{const i=((e,t,a)=>{const n=$d(e),i=$d(t,{roundUp:!0});if(void 0===n)throw Error("Invalid dateRangeStart value");if(void 0===i)throw Error("Invalid dateRangeEnd value");const r=Math.round((i.valueOf()-n.valueOf())/12);return r>0?r:1})(e,t);return{queryParams:{index:n,body:{size:0,query:{bool:{filter:[{range:{"summary.down":{gt:0}}},{terms:{"monitor.id":a}},{range:{"@timestamp":{gte:e,lte:t}}}]}},aggs:{histogram:{date_histogram:{field:"@timestamp",fixed_interval:i+"ms"},aggs:{by_id:{terms:{field:"monitor.id",size:Math.max(a.length,1)},aggs:{totalDown:{sum:{field:"summary.down"}}}}}}}}},minInterval:i}})(i,r,l,(null==o?void 0:o.heartbeatIndices)||""),{data:m,loading:p}=Object(h.useEsSearch)(u,[JSON.stringify(l),s],{name:"getMonitorDownHistory"}),g=(null!==(t=null==m||null===(a=m.aggregations)||void 0===a?void 0:a.histogram.buckets)&&void 0!==t?t:[]).map((e=>{const t={};return e.by_id.buckets.forEach((e=>{t[e.key]=e.totalDown.value})),{byId:t,timestamp:e.key}})),b={};return l.forEach((e=>{const t=[];g.forEach((({byId:a,timestamp:n})=>{t.push({timestamp:n,up:void 0,down:a[e]})})),b[e]={points:t}})),{histogramsById:b,loading:p,minInterval:d}})({items:k}),O=null!==(p=a.nextPagePagination)&&void 0!==p?p:"",j=null!==(g=a.prevPagePagination)&&void 0!==g?g:"",C=e=>{E.includes(e)?y(E.filter((t=>t!==e))):y([...E,e])},T=[{align:"left",field:"state.summary.status",name:Dc,mobileOptions:{fullWidth:!0},render:(e,{monitor_id:t,state:{timestamp:a,summaryPings:n,monitor:{type:r,duration:s,checkGroup:o},error:l},configId:c})=>i.a.createElement(Xa,{configId:c,status:e,timestamp:a,summaryPings:null!=n?n:[],monitorType:r,duration:null==s?void 0:s.us,monitorId:t,checkGroup:o,summaryError:l})},{align:"left",field:"state.monitor.name",name:Rc,mobileOptions:{fullWidth:!0},render:(e,t)=>i.a.createElement(qn,{summary:t}),sortable:!0},{align:"left",field:"state.url.full",name:ke,width:"30%",render:e=>i.a.createElement(d.EuiLink,{href:e,target:"_blank",color:"text",external:!0},e)},{align:"left",field:"state.monitor.name",name:Me,width:"12%",render:(e,t)=>i.a.createElement(Zn,{summary:t})},{align:"left",field:"state.tls.server.x509",name:zc,render:e=>i.a.createElement(vi,{expiry:e})},...x?[]:[{align:"left",field:"monitor_id",name:Nc,mobileOptions:{show:!1},render:e=>{var t;return i.a.createElement(Wi,{histogramSeries:null==M||null===(t=M[e])||void 0===t?void 0:t.points,minInterval:w})}}],{align:"center",field:"",name:$c,width:"100px",render:e=>i.a.createElement(Bd,{monitorId:e.monitor_id,selectedMonitor:e.state.summaryPings[0]})},{align:"center",field:"",name:Gc,width:"100px",render:e=>i.a.createElement(Gd,{monitorId:e.monitor_id,configId:e.configId})},...x?[]:[{align:"right",field:"monitor_id",name:"",sortable:!0,isExpander:!0,width:"40px",render:e=>i.a.createElement(d.EuiButtonIcon,{"aria-label":_c(e),"data-test-subj":`xpack.synthetics.monitorList.${e}.expandMonitorDetail`,iconType:E.includes(e)?"arrowUp":"arrowDown",onClick:()=>C(e)})}]];return i.a.createElement(tm,{hasBorder:!0},i.a.createElement(zd,null),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiBasicTable,{"aria-label":(F=k.length,o.i18n.translate("xpack.synthetics.monitorList.table.description",{defaultMessage:"Monitor Status table with columns for Status, Name, URL, IP, Downtime History and Integrations. The table is currently displaying {length} items.",values:{length:F}})),error:(null==r||null===(b=r.body)||void 0===b?void 0:b.message)||(null==r?void 0:r.message),loading:s,isExpandable:!0,hasActions:!0,itemId:"monitor_id",itemIdToExpandedRowMap:E.reduce(((e,t)=>({...e,[t]:i.a.createElement(Rd,{summary:k.find((({monitor_id:e})=>e===t))})})),{}),items:k,noItemsMessage:i.a.createElement(Qd,{loading:s,filters:e}),columns:T,tableLayout:"auto",rowProps:x?({monitor_id:e})=>({onClick:()=>C(e),"aria-label":_c(e)}):({monitor_id:e})=>({className:t.includes(e)?"refresh-row":void 0})}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(vd,{size:l,setSize:u})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(bd,{dataTestSubj:"xpack.synthetics.monitorList.prevButton",direction:"prev",pagination:j})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(bd,{dataTestSubj:"xpack.synthetics.monitorList.nextButton",direction:"next",pagination:O}))))));var F},tm=Object(g.euiStyled)(d.EuiPanel)`
  &&&  {
  .refresh-row{
    background-color: #f0f4fb;
    -webkit-transition: background-color 3000ms linear;
    -ms-transition: background-color 3000ms linear;
    transition: background-color 3000ms linear;
    }
  }
`;function am(e,t){return-1!==e.indexOf(t)}const nm=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem("xpack.uptime.monitorList.pageSize"))&&void 0!==e?e:"",10);return isNaN(t)?10:t},im=e=>{const t=Object(c.useSelector)(A.d),a=Xi(),[r,s]=Object(n.useState)(nm),o=Object(c.useDispatch)(),[d]=Object(I.i)(),{dateRangeStart:m,dateRangeEnd:p,pagination:g,statusFilter:h,query:E}=d(),{lastRefresh:v}=Object(n.useContext)(f.a),x=Object(c.useSelector)(Da.c),S=Object(c.useSelector)(A.r);return function(e){const t=Object(u.useHistory)();Object(n.useEffect)((()=>{(function(e){if(!e||!e.body||"Bad Request"!==e.body.error||!e.body.message)return!1;const{message:t}=e.body;return am(t,"search_phase_execution_exception")||am(t,"Please use a keyword field instead.")||am(t,"set fielddata=true")})(e)&&t.push(l.l)}),[e,t])}(S.error),Object(n.useEffect)((()=>{a((()=>o(Object(b.r)({dateRangeStart:m,dateRangeEnd:p,filters:t,pageSize:r,pagination:g,statusFilter:h,query:E}))))}),[o,m,p,t,a,v,r,g,h,E]),Object(n.useEffect)((()=>{o(pe.k.get())}),[o]),Object(n.useEffect)((()=>{o(pe.j.get())}),[o]),Object(n.useEffect)((()=>{x&&x.forEach((e=>{setTimeout((()=>{o(Object(b.b)(e))}),5e3)}))}),[o,x]),i.a.createElement(em,y()({},e,{monitorList:S,pageSize:r,setPageSize:s,refreshedMonitorIds:x}))},rm=({total:e})=>{const t=1===e?o.i18n.translate("xpack.synthetics.snapshot.monitor",{defaultMessage:"Monitor"}):o.i18n.translate("xpack.synthetics.snapshot.monitors",{defaultMessage:"Monitors"});return i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,e," ",t))},sm=({height:e})=>{const{count:t,loading:a}=(()=>{const{dateRangeStart:e,dateRangeEnd:t,query:a}=Object(I.e)(),{lastRefresh:i}=Object(n.useContext)(f.a),r=Object(c.useSelector)(A.d),{data:s,loading:o}=Object(h.useFetcher)((()=>Object(fl.q)({query:a,dateRangeStart:e,dateRangeEnd:t,filters:r})),[e,t,r,i,a]);return{count:s||{total:0,up:0,down:0},loading:o}})();return i.a.createElement(Ri,{loading:a,height:e},i.a.createElement(rm,{total:t.total}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(Pi,{up:t.up,down:t.down,height:144}))},om="160px",lm=({})=>i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{gutterSize:"l"},i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(sm,{height:om})),i.a.createElement(d.EuiFlexItem,{grow:10},i.a.createElement(Qi,{height:om,isResponsive:!0}))));var cm=a(174);const um=Ee()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemStyled",componentId:"sc-1qo5ouv-0"})(["&&{min-width:800px;@media only screen and (max-width:1128px){min-width:500px;}@media only screen and (max-width:630px){min-width:initial;}}"]),dm=()=>(Object(h.useTrackPageview)({app:"uptime",path:"overview"}),Object(h.useTrackPageview)({app:"uptime",path:"overview",delay:15e3}),T([{text:Km}]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",wrap:!0,responsive:!1},i.a.createElement(cm.a,null),i.a.createElement(um,{grow:!0},i.a.createElement(_e,null))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(lm,null),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(im,null))),mm=()=>{var e,t;const{checkGroupId:a}=Object(u.useParams)(),i=Object(c.useDispatch)();Object(n.useEffect)((()=>{i(Object(bn.a)({checkGroup:a}))}),[a,i]);const r=Object(c.useSelector)((e=>e.journeys[a]));return{checkGroup:a,steps:null!==(e=null==r?void 0:r.steps)&&void 0!==e?e:[],details:null==r?void 0:r.details,loading:null!==(t=null==r?void 0:r.loading)&&void 0!==t&&t,error:null==r?void 0:r.error}},pm=({timestamp:e,details:t})=>{const a=Object(u.useHistory)(),{down:n}=mt(),r=n("s");return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"none"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{size:r?"xs":"m",iconType:"arrowLeft",isDisabled:!(null!=t&&t.previous),onClick:()=>{var e;a.push(`/journey/${null==t||null===(e=t.previous)||void 0===e?void 0:e.checkGroup}/steps`)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepList.previousCheck",defaultMessage:"Previous check"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:r?"xs":"m",className:"eui-textNoWrap"},Za(He()(e)))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{size:r?"xs":"m",iconType:"arrowRight",iconSide:"right",isDisabled:!(null!=t&&t.next),onClick:()=>{var e;a.push(`/journey/${null==t||null===(e=t.next)||void 0===e?void 0:e.checkGroup}/steps`)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepList.nextCheck",defaultMessage:"Next check"}))))},gm=({checkGroup:e})=>i.a.createElement(d.EuiEmptyPrompt,{iconType:"cross",title:i.a.createElement("h2",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.title",defaultMessage:"There are no steps for this journey"})),body:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.heading",defaultMessage:"This journey did not contain any steps."})),!!e&&i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.checkGroupField",defaultMessage:"The journey's check group is {codeBlock}.",values:{codeBlock:i.a.createElement("code",null,e)}})),i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.footer",defaultMessage:"There is no further information to display."})))}),hm=()=>{var e,t;const{details:a}=mm();return i.a.createElement(i.a.Fragment,null,(null==a||null===(e=a.journey)||void 0===e?void 0:e.monitor.name)||(null==a||null===(t=a.journey)||void 0===t?void 0:t.monitor.id))},fm=()=>{const{details:e}=mm();return e?i.a.createElement(pm,{timestamp:e.timestamp,details:e}):null},bm=()=>{mr(),Object(h.useTrackPageview)({app:"uptime",path:"syntheticCheckSteps"}),Object(h.useTrackPageview)({app:"uptime",path:"syntheticCheckSteps",delay:15e3});const{error:e,loading:t,steps:a,details:n,checkGroup:r}=mm();return gr({details:n,activeStep:null==n?void 0:n.journey}),i.a.createElement(i.a.Fragment,null,i.a.createElement(Fa,{data:a,loading:t,allStepsLoaded:!t,error:e}),(!a||0===a.length)&&!t&&i.a.createElement(gm,{checkGroup:r}))},Em=()=>{var e;const t=Object(I.f)(),a=Object(c.useSelector)(A.u),n=null==a||null===(e=a.monitor)||void 0===e?void 0:e.type,r="browser"===n;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{wrap:!1,"data-test-subj":"monitorTitle"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},i.a.createElement(Bd,{monitorId:t,selectedMonitor:a}))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFlexGroup,{wrap:!1,gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},r&&n&&i.a.createElement(d.EuiBadge,{color:"hollow"},(e=>{switch(e){case"http":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.http",defaultMessage:"HTTP ping"});case"tcp":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.tcp",defaultMessage:"TCP ping"});case"icmp":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.icmp",defaultMessage:"ICMP ping"});case"browser":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.browser",defaultMessage:"Browser"});default:return""}})(n)," ",i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.disclaimer.description",defaultMessage:"(BETA)"}))),r&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/what-is/synthetic-monitoring",target:"_blank"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.disclaimer.link",defaultMessage:"See more"}))))))},ym=()=>{var e;const t=Object(I.f)(),a=Object(c.useSelector)(A.u),n=(null==a||null===(e=a.monitor)||void 0===e?void 0:e.name)||((e,t)=>{var a;return/^auto-(icmp|http|tcp|browser)-0X[A-F0-9]{16}.*/.test(e)&&(null==t||null===(a=t.url)||void 0===a?void 0:a.full)||e})(t,a);return T([{text:n}]),i.a.createElement("span",{className:"eui-textNoWrap"},n)},vm=()=>{const[e,t]=Object(I.i)(),{commonlyUsedRanges:a}=Object(n.useContext)(f.c),{refreshApp:r}=Object(n.useContext)(f.a),{data:s}=Object(n.useContext)(f.e),o=null==s?void 0:s.query.timefilter.timefilter.getTime(),{autorefreshInterval:c,autorefreshIsPaused:u,dateRangeStart:m,dateRangeEnd:p}=e();Object(n.useEffect)((()=>{const{from:e,to:a}=null!=o?o:{};!((e,t)=>{const{DATE_RANGE_START:a,DATE_RANGE_END:n}=l.e;return e===a&&t===n})(m,p)||e===m&&a===p?e===m&&a===p||null==s||s.query.timefilter.timefilter.setTime({from:m,to:p}):t({dateRangeStart:e,dateRangeEnd:a})}),[]);const g=a?a.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))):l.e.COMMONLY_USED_DATE_RANGES;return i.a.createElement(d.EuiSuperDatePicker,{start:m,end:p,commonlyUsedRanges:g,isPaused:u,refreshInterval:c,onTimeChange:({start:e,end:a})=>{var n,i;null!=s&&null!==(n=s.query)&&void 0!==n&&null!==(i=n.timefilter)&&void 0!==i&&i.timefilter&&(null==s||s.query.timefilter.timefilter.setTime({from:e,to:a})),t({dateRangeStart:e,dateRangeEnd:a}),r()},onRefresh:r,onRefreshChange:({isPaused:e,refreshInterval:a})=>{t({autorefreshInterval:void 0===a?c:a,autorefreshIsPaused:e})}})},xm=()=>{const{refreshApp:e}=Object(n.useContext)(f.a);return i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1,"data-test-subj":"certificatesRefreshButton"},i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiHideFor,{sizes:["xs"]},i.a.createElement(d.EuiButton,{fill:!0,iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"},wo)),i.a.createElement(d.EuiShowFor,{sizes:["xs"]},i.a.createElement(d.EuiButtonEmpty,{iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"})))))},Sm=()=>{const e=Object(c.useSelector)(md.b);return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.certificates.heading",defaultMessage:"TLS Certificates ({total})",values:{total:i.a.createElement("span",{"data-test-subj":"uptimeCertTotal"},null!=e?e:0)}})},km="xpack.uptime.syntheticsCallout.display",Mm=()=>{const[e,t]=Object(n.useState)((()=>{let e=localStorage.getItem(km);return null===e&&(localStorage.setItem(km,"true"),e="true"),"true"===e})());return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:o.i18n.translate("xpack.synthetics.overview.pageHeader.syntheticsCallout.title",{defaultMessage:"Elastic Synthetics"}),iconType:"beaker"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.overview.pageHeader.syntheticsCallout.content",defaultMessage:"Uptime is now previewing support for scripted multi-step availability checks. This means you can interact with elements of a webpage and check the availability of an entire journey (such as making a purchase or signing into a system) instead of just a simple single page up/down check. Please click below to read more and, if you'd like to be one of the first to use these capabilities, you can download our preview synthetics agent and view your synthetic checks in Uptime."})),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{href:"https://www.elastic.co/what-is/synthetic-monitoring"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.overview.pageHeader.syntheticsCallout.announcementLink",defaultMessage:"Read announcement"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{"data-test-subj":"uptimeDismissSyntheticsCallout",onClick:()=>{e&&(localStorage.setItem(km,"false"),t(!1))}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.overview.pageHeader.syntheticsCallout.dismissButtonText",defaultMessage:"Dismiss"})))))):null},wm=()=>i.a.createElement(d.EuiEmptyPrompt,{body:i.a.createElement(n.Fragment,null,i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiTitle,{size:"l"},i.a.createElement("h2",null,o.i18n.translate("xpack.synthetics.emptyState.loadingMessage",{defaultMessage:"Loading…"}))))}),Om=({errors:e})=>{const t=e.find((e=>e.message&&e.message.includes("unauthorized")));return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiEmptyPrompt,{iconType:"securityApp",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},t?i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.emptyStateError.notAuthorized",{defaultMessage:"You are not authorized to view Uptime data, please contact your system administrator."})):i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.emptyStateError.title",{defaultMessage:"Error"}))),body:i.a.createElement(n.Fragment,null,!t&&e.map((e=>{var t,a;return i.a.createElement("p",{key:(null===(t=e.body)||void 0===t?void 0:t.message)||e.message},(null===(a=e.body)||void 0===a?void 0:a.message)||e.message)})))}))))};var jm=a(165);const Im=({path:e,pageHeader:t,children:a,...r})=>{const{services:{observability:s}}=Object(p.useKibana)(),{down:u}=mt(),d=u("s"),m=s.navigation.PageTemplate,g=Object(n.useMemo)((()=>Ee()(m).withConfig({componentId:"sc-1dru911-0"})([".euiPageHeaderContent > .euiFlexGroup{flex-wrap:wrap;}",""],(e=>e.isMobile?"\n  .euiPageHeaderContent > .euiFlexGroup > .euiFlexItem {\n    align-items: center;\n  }\n":""))),[m]),b=function(){const{basePath:e}=Object(n.useContext)(f.c),{services:{docLinks:t}}=Object(p.useKibana)(),{data:a}=Object(c.useSelector)(A.h);if(a&&!a.indexExists)return{solution:o.i18n.translate("xpack.synthetics.noDataConfig.solutionName",{defaultMessage:"Observability"}),actions:{beats:{title:o.i18n.translate("xpack.synthetics.noDataConfig.beatsCard.title",{defaultMessage:"Add monitors with Heartbeat"}),description:o.i18n.translate("xpack.synthetics.noDataConfig.beatsCard.description",{defaultMessage:"Proactively monitor the availability of your sites and services. Receive alerts and resolve issues faster to optimize your users experience."}),href:e+"/app/home#/tutorial/uptimeMonitors"}},docsLink:t.links.observability.guide}}(),{loading:E,error:v,data:x}=Object(jm.a)(),{inspectorAdapters:S}=Object(h.useInspectorContext)();if(Object(n.useEffect)((()=>{S.requests.reset()}),[S.requests]),v)return i.a.createElement(Om,{errors:[v]});const k=e===l.t||e===l.b,M=E&&k&&!x;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,y()({isMobile:d,pageHeader:t,"data-test-subj":b?"data-missing":void 0,noDataConfig:k&&!E?b:void 0},r),M&&i.a.createElement(wm,null),i.a.createElement("div",{style:{visibility:M?"hidden":"initial"},"data-test-subj":b?"data-missing":void 0},a)))};var Cm=a(58);const Tm=()=>{const e=Object(c.useDispatch)();return Object(n.useEffect)((()=>{e(b.K.get())}),[e]),Object(c.useSelector)(A.F)},Fm=()=>{var e,t;const a=Object(u.useHistory)(),[r,s]=Object(n.useState)(!1),[o,c]=Object(n.useState)(!1),{error:m,loading:g,enablement:h,disableSynthetics:f,enableSynthetics:b,totalMonitors:E}=bu(),{isEnabled:y,canEnable:v,areApiKeysEnabled:x}=h||{};Object(n.useEffect)((()=>{r&&y?(s(!1),Tt.a.toasts.addSuccess({title:Rm,toastLifeTimeMs:3e3})):o&&!y?(c(!1),Tt.a.toasts.addSuccess({title:Nm,toastLifeTimeMs:3e3})):r&&m?(s(!1),Tt.a.toasts.addDanger({title:Pm,toastLifeTimeMs:3e3})):o&&m&&Tt.a.toasts.addDanger({title:Dm,toastLifeTimeMs:3e3})}),[y,r,o,m]);const S=()=>y?v:y?void 0:v&&(E||0)>0,{isAllowed:k,loading:M}=Tm(),w=M||g,O=!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save);return i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1},S()&&!w&&i.a.createElement(d.EuiToolTip,{content:y?y?Bm:x?"":Um:_m},i.a.createElement(d.EuiSwitch,{checked:Boolean(y),label:Am,disabled:w||!x,onChange:()=>{y?(c(!0),f()):(s(!0),b())},"data-test-subj":"syntheticsEnableSwitch"})),S()&&w&&i.a.createElement(d.EuiSwitch,{checked:Boolean(y),label:Am,disabled:!0,onChange:()=>{}})),i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1},i.a.createElement(d.EuiToolTip,{content:y||v?"":zm},i.a.createElement(d.EuiButton,{isLoading:w,fill:!0,isDisabled:!O||!y||!k,iconType:"plus","data-test-subj":"syntheticsAddMonitorBtn",href:a.createHref({pathname:l.o})},Lm))))},Lm=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLabel",{defaultMessage:"Add monitor"}),Am=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel",{defaultMessage:"Enable"}),Pm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnabledFailure",{defaultMessage:"Monitor Management was not able to be enabled. Please contact support."}),Dm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledFailure",{defaultMessage:"Monitor Management was not able to be disabled. Please contact support."}),Rm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableSuccess",{defaultMessage:"Monitor Management enabled successfully."}),Nm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledSuccess",{defaultMessage:"Monitor Management disabled successfully."}),zm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabled",{defaultMessage:"Monitor Management is currently disabled. Please contact an administrator to enable Monitor Management."}),_m=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableToolTip",{defaultMessage:"Enable Monitor Management to create lightweight and real-browser monitors from locations around the world."}),Bm=o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisableToolTip",{defaultMessage:"Disabling Monitor Management will immediately stop the execution of monitors in all test locations and prevent the creation of new monitors."}),Um=o.i18n.translate("xpack.synthetics.monitorManagement.apiKeysDisabledToolTip",{defaultMessage:"API Keys are disabled for this cluster. Monitor Management requires the use of API keys to write back to your Elasticsearch cluster. To enable API keys, please contact an administrator."}),Hm=({children:e})=>{const{isAllowed:t,signupUrl:a,loading:n}=Tm();return!1===t?i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,Gm),body:i.a.createElement("p",null,Wm),actions:[i.a.createElement(d.EuiButton,{color:"primary",fill:!0,isDisabled:!a,href:null!=a?a:void 0},$m)]}):i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(d.EuiEmptyPrompt,{icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,qm)}),i.a.createElement("div",{style:{visibility:n?"hidden":"initial"}},e))},$m=o.i18n.translate("xpack.synthetics.monitorManagement.requestAccess",{defaultMessage:"Request access"}),Gm=o.i18n.translate("xpack.synthetics.monitorManagement.label",{defaultMessage:"Monitor Management"}),qm=o.i18n.translate("xpack.synthetics.monitorManagement.loading.label",{defaultMessage:"Loading Monitor Management"}),Wm=o.i18n.translate("xpack.synthetics.monitorManagement.publicBetaDescription",{defaultMessage:"We've got a brand new app on the way. In the meantime, we're excited to give you early access to our globally managed testing infrastructure. This will allow you to upload synthetic monitors using our new point and click script recorder and manage your monitors with a new UI."}),Vm=o.i18n.translate("xpack.synthetics.routes.legacyBaseTitle",{defaultMessage:"Uptime - Kibana"}),Km=o.i18n.translate("xpack.synthetics.overview.heading",{defaultMessage:"Monitors"}),Jm=({path:e,title:t,telemetryId:a})=>(Object(I.h)(a),Object(n.useEffect)((()=>{document.title=t}),[e,t]),null),Ym=()=>{const e=[{title:o.i18n.translate("xpack.synthetics.monitorRoute.title",{defaultMessage:"Monitor | {baseTitle}",values:{baseTitle:Vm}}),path:l.r,component:pr,dataTestSubj:"uptimeMonitorPage",telemetryId:I.a.Monitor,pageHeader:{children:i.a.createElement(Em,null),pageTitle:i.a.createElement(ym,null),rightSideItems:[i.a.createElement(vm,null)]}},{title:o.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:Vm}}),path:l.v,component:Zo,dataTestSubj:"uptimeSettingsPage",telemetryId:I.a.Settings,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.settings.heading",defaultMessage:"Uptime settings"})},bottomBar:i.a.createElement(Go,null),bottomBarProps:{paddingSize:"m"}},{title:o.i18n.translate("xpack.synthetics.certificatesRoute.title",{defaultMessage:"Certificates | {baseTitle}",values:{baseTitle:Vm}}),path:l.b,component:hd,dataTestSubj:"uptimeCertificatesPage",telemetryId:I.a.Certificates,pageHeader:{pageTitle:i.a.createElement(Sm,null),rightSideItems:[i.a.createElement(xm,null)]}},{title:o.i18n.translate("xpack.synthetics.stepDetailRoute.title",{defaultMessage:"Synthetics detail | {baseTitle}",values:{baseTitle:Vm}}),path:l.z,component:vo,dataTestSubj:"uptimeStepDetailPage",telemetryId:I.a.StepDetail,pageHeader:{children:i.a.createElement(yo,null),pageTitle:i.a.createElement(bo,null),rightSideItems:[i.a.createElement(Eo,null)]}},{title:Vm,path:l.B,component:bm,dataTestSubj:"uptimeSyntheticCheckStepsPage",telemetryId:I.a.SyntheticCheckStepsPage,pageHeader:{pageTitle:i.a.createElement(hm,null),rightSideItems:[i.a.createElement(fm,null)]}},{title:Vm,path:l.t,component:dm,dataTestSubj:"uptimeOverviewPage",telemetryId:I.a.Overview,pageHeader:{pageTitle:Km,rightSideItems:[i.a.createElement(vm,null)]}},{title:o.i18n.translate("xpack.synthetics.mappingErrorRoute.title",{defaultMessage:"Synthetics | mapping error"}),path:l.l,component:F,dataTestSubj:"uptimeMappingErrorPage",telemetryId:I.a.MappingError,pageHeader:{pageTitle:i.a.createElement("div",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.mappingErrorRoute.pageHeader.title",defaultMessage:"Mapping error"})),rightSideItems:[]}},{title:o.i18n.translate("xpack.synthetics.addMonitorRoute.title",{defaultMessage:"Add Monitor | {baseTitle}",values:{baseTitle:Vm}}),path:l.o,component:()=>i.a.createElement(Hm,null,i.a.createElement(pc,null)),dataTestSubj:"uptimeMonitorAddPage",telemetryId:I.a.MonitorAdd,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.addMonitor.pageHeader.title",defaultMessage:"Add Monitor"})},bottomBar:i.a.createElement(Qu,null),bottomBarProps:{paddingSize:"m"}},{title:o.i18n.translate("xpack.synthetics.editMonitorRoute.title",{defaultMessage:"Edit Monitor | {baseTitle}",values:{baseTitle:Vm}}),path:l.p,component:()=>i.a.createElement(Hm,null,i.a.createElement(Sc,null)),dataTestSubj:"uptimeMonitorEditPage",telemetryId:I.a.MonitorEdit,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.editMonitor.pageHeader.title",defaultMessage:"Edit Monitor"})},bottomBar:i.a.createElement(Qu,null),bottomBarProps:{paddingSize:"m"}},{title:o.i18n.translate("xpack.synthetics.monitorManagementRoute.title",{defaultMessage:"Monitor Management | {baseTitle}",values:{baseTitle:Vm}}),path:l.q+"/:type",component:()=>i.a.createElement(Hm,null,i.a.createElement(qu,null)),dataTestSubj:"uptimeMonitorManagementListPage",telemetryId:I.a.MonitorManagement,pageHeader:{pageTitle:i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.pageHeader.title",defaultMessage:"Monitor Management"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiBetaBadge,{label:"Beta",tooltipContent:o.i18n.translate("xpack.synthetics.routes.monitorManagement.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."})}))),rightSideItems:[i.a.createElement(Fm,null),i.a.createElement(ed,null)]}}],{addInspectorRequest:t}=Object(h.useInspectorContext)();return Cm.a.addInspectorRequest=t,i.a.createElement(u.Switch,null,e.map((({title:e,path:t,component:a,dataTestSubj:n,telemetryId:r,pageHeader:s,...o})=>i.a.createElement(u.Route,{path:t,key:r,exact:!0},i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":n},i.a.createElement(Mm,null),i.a.createElement(Jm,{title:e,path:t,telemetryId:r}),i.a.createElement(Im,y()({path:t,pageHeader:s},o),i.a.createElement(a,null)))))),i.a.createElement(u.Route,{component:Xo}))};a(133);var Zm=a(71);const Xm=o.i18n.translate("xpack.synthetics.alertDropdown.noWritePermissions",{defaultMessage:"You need read-write access to Uptime to create alerts in this app."}),Qm=({alertOptions:e,setAlertFlyoutVisible:t})=>{var a,r,s;const[o,l]=Object(n.useState)(!1),c=Object(p.useKibana)(),{services:{observability:u}}=Object(p.useKibana)(),m=u.useRulesLink(),g=null!==(a=null===(r=c.services.application)||void 0===r||null===(s=r.capabilities.uptime)||void 0===s?void 0:s.save)&&void 0!==a&&a,h={"aria-label":Zm.J.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout",name:Zm.J.toggleMonitorStatusContent,onClick:()=>{t(L.b.MONITOR_STATUS),l(!1)}},f={"aria-label":Zm.J.toggleTlsAriaLabel,"data-test-subj":"xpack.synthetics.toggleTlsAlertFlyout",name:Zm.J.toggleTlsContent,onClick:()=>{t(L.b.TLS),l(!1)}},b={"aria-label":Zm.J.navigateToAlertingUIAriaLabel,"data-test-subj":"xpack.synthetics.navigateToAlertingUi",name:i.a.createElement(d.EuiLink,{color:"text",href:m.href},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.navigateToAlertingButton.content",defaultMessage:"Manage rules"})),icon:"tableOfContents"};let E,y=[];return e?e.forEach((e=>{e===L.b.MONITOR_STATUS?y.push(h):e===L.b.TLS&&y.push(f)})):y=[h,f],1===y.length&&(y[0].icon="bell"),E=1===y.length?[{id:0,items:[...y,b]}]:[{id:0,items:[{"aria-label":Zm.J.openAlertContextPanelAriaLabel,"data-test-subj":"xpack.synthetics.openAlertContextPanel",name:Zm.J.openAlertContextPanelLabel,icon:"bell",panel:1,toolTipContent:g?null:Xm,disabled:!g},b]},{id:1,title:Zm.J.toggleAlertFlyoutButtonLabel,items:y}],i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiHeaderLink,{color:"text","aria-label":Zm.J.toggleButtonAriaLabel,"data-test-subj":"xpack.synthetics.alertsPopover.toggleButton",iconType:"arrowDown",iconSide:"right",onClick:()=>l(!o)},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.alerts.toggleAlertFlyoutButtonText",defaultMessage:"Alerts and rules"})),closePopover:()=>l(!1),isOpen:o,ownFocus:!0,panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,panels:E}))},ep=({alertFlyoutVisible:e,alertTypeId:t,setAlertFlyoutVisibility:a})=>{const{triggersActionsUi:r}=Object(p.useKibana)().services,s=Object(n.useCallback)((()=>a(!1)),[a]),o=Object(n.useMemo)((()=>r.getAddAlertFlyout({consumer:"uptime",onClose:s,ruleTypeId:t,canChangeTrigger:!t})),[s,t]);return i.a.createElement(i.a.Fragment,null,e&&o)},tp=e=>{const t=Object(c.useDispatch)();return i.a.createElement(Qm,y()({},e,{setAlertFlyoutVisible:e=>{"string"==typeof e?(t(Object(b.O)(e)),t(Object(b.P)(!0))):t(Object(b.P)(e))}}))},ap=()=>{const e=Object(c.useDispatch)(),t=Object(c.useSelector)(A.y),a=Object(c.useSelector)(A.x);return i.a.createElement(ep,{alertFlyoutVisible:t,alertTypeId:a,setAlertFlyoutVisibility:t=>e(Object(b.P)(t))})};var np=a(107);function ip(){const{services:{inspector:e,uiSettings:t}}=Object(p.useKibana)(),{isDev:a}=Object(Bt.c)(),{inspectorAdapters:n}=Object(h.useInspectorContext)();return(null==t?void 0:t.get(h.enableInspectEsQueries))||a?i.a.createElement(d.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(n)}},o.i18n.translate("xpack.synthetics.inspectButtonText",{defaultMessage:"Inspect"})):null}var rp=a(243),sp=a.n(rp);const op=()=>{const[e,t]=sp()("xpack.synthetics.monitorManagement.openTour",!0),a=Object(u.useHistory)(),{cloud:n}=Object(p.useKibana)().services,{isDev:r}=Object(Bt.c)(),s=()=>{t(!1),a.push(l.q+"/all")};return null!=n&&n.isCloudEnabled||r?i.a.createElement(d.EuiTourStep,{content:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("p",null,Wm)),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiButton,{color:"primary",fill:!0,onClick:s},cp)),isStepOpen:e,onFinish:()=>t(!1),step:1,stepsTotal:1,subtitle:mp,title:lp,anchorPosition:"upCenter",maxWidth:416,footerAction:i.a.createElement(d.EuiLink,{"data-test-subj":"syntheticsManagementTourDismiss",onClick:()=>t(!1)},up)},i.a.createElement(d.EuiHeaderLink,{"aria-label":dp,color:"text","data-test-subj":"syntheticsManagementPageLink",onClick:s},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.manageMonitors",defaultMessage:"Monitor Management"}))):null},lp=o.i18n.translate("xpack.synthetics.monitorManagement.gettingStarted.label",{defaultMessage:"Get started with Synthetic Monitoring"}),cp=o.i18n.translate("xpack.synthetics.monitorManagement.try.label",{defaultMessage:"Try Monitor Management"}),up=o.i18n.translate("xpack.synthetics.monitorManagement.try.dismiss",{defaultMessage:"Dismiss"}),dp=o.i18n.translate("xpack.synthetics.page_header.manageLink.label",{defaultMessage:"Navigate to the Uptime Monitor Management page"}),mp=o.i18n.translate("xpack.synthetics.monitorManagement.new.label",{defaultMessage:"New"}),pp=o.i18n.translate("xpack.synthetics.addDataButtonLabel",{defaultMessage:"Add data"}),gp=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),hp=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel.message",{defaultMessage:"Explore Data allows you to select and filter result data in any dimension and look for the cause or impact of performance problems."});function fp(){var e,t,a,n,r;const s=Object(p.useKibana)(),{basePath:m}=Object(Bt.c)(),g=Object(I.e)(),{dateRangeStart:f,dateRangeEnd:b}=g,E=Object(u.useHistory)(),y=Object(c.useSelector)(A.u),x=Object(u.useRouteMatch)(l.r),S=null==y||null===(e=y.monitor)||void 0===e?void 0:e.id,k=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"synthetics",seriesType:"area",selectedMetricField:"monitor.duration.us",time:{from:f,to:b},breakdown:S?"observer.geo.name":"monitor.type",reportDefinitions:{"monitor.name":null!=y&&null!==(t=y.monitor)&&void 0!==t&&t.name&&!0===(null==x?void 0:x.isExact)?[null==y||null===(a=y.monitor)||void 0===a?void 0:a.name]:[],"url.full":["ALL_VALUES"]},name:S?`${S}-response-duration`:"All monitors response duration"}]},m);return i.a.createElement(d.EuiHeaderLinks,{gutterSize:"xs"},i.a.createElement(op,null),i.a.createElement(d.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.settingsLink.label",{defaultMessage:"Navigate to the Uptime settings page"}),color:"text","data-test-subj":"settings-page-link",href:E.createHref({pathname:l.v,search:j(g,!0)})},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.settingsLink",defaultMessage:"Settings"})),i.a.createElement(tp,null),i.a.createElement(d.EuiToolTip,{position:"top",content:i.a.createElement("p",null,hp)},i.a.createElement(d.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.analyzeData.label",{defaultMessage:'Navigate to the "Explore Data" view to visualize Synthetics/User data'}),href:k,color:"text",iconType:"visBarVerticalStacked","data-test-subj":"uptimeExploreDataButton"},gp)),i.a.createElement(d.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.addDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(n=s.services)||void 0===n||null===(r=n.application)||void 0===r?void 0:r.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},pp),i.a.createElement(ip,null))}const bp=({appMountParameters:e})=>i.a.createElement(h.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},i.a.createElement(fp,null)),Ep=e=>{const{basePath:t,canSave:a,core:r,darkMode:s,i18n:l,plugins:E,renderGlobalHelpControls:y,setBadge:v,startPlugins:x,appMountParameters:S}=e;return Object(n.useEffect)((()=>{y(),v(a?void 0:{text:o.i18n.translate("xpack.synthetics.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:o.i18n.translate("xpack.synthetics.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"})}),[a,y,v]),Tt.a.core=r,Tt.a.theme=e.appMountParameters.theme$,np.b.dispatch(Object(b.Q)(t)),i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement(l.Context,null,i.a.createElement(p.KibanaThemeProvider,{theme$:e.appMountParameters.theme$},i.a.createElement(c.Provider,{store:np.b},i.a.createElement(p.KibanaContextProvider,{services:{...r,...E,storage:np.a,data:x.data,inspector:x.inspector,triggersActionsUi:x.triggersActionsUi,observability:x.observability,cases:x.cases}},i.a.createElement(u.Router,{history:S.history},i.a.createElement(g.EuiThemeProvider,{darkMode:s},i.a.createElement(f.b,null,i.a.createElement(f.d,e,i.a.createElement(f.h,{darkMode:s},i.a.createElement(f.f,x,i.a.createElement(De.a,{dataViews:x.dataViews},i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":"uptimeApp"},i.a.createElement(p.RedirectAppLinks,{className:m.APP_WRAPPER_CLASS,application:r.application},i.a.createElement(h.InspectorContextProvider,null,i.a.createElement(ap,null),i.a.createElement(Ym,null),i.a.createElement(bp,{appMountParameters:S}))))))))))))))))},yp=e=>i.a.createElement(Ep,e);function vp(e,t,a,n,r){var c;const{application:{capabilities:u},chrome:{setBadge:d,setHelpExtension:m},docLinks:p,http:{basePath:g},i18n:h}=e,{apm:f,infrastructure:b,logs:E}=((e,t)=>t.reduce(((t,a)=>(t[a]=e[a]&&!0===e[a].show,t)),{}))(u,l.k),y={isDev:r,plugins:t,canSave:null!==(c=u.uptime.save)&&void 0!==c&&c,core:e,i18n:h,startPlugins:a,basePath:g.get(),darkMode:e.uiSettings.get(l.g),commonlyUsedRanges:e.uiSettings.get(l.h),isApmAvailable:f,isInfraAvailable:b,isLogsAvailable:E,renderGlobalHelpControls:()=>m({appName:o.i18n.translate("xpack.synthetics.legacyHeader.appName",{defaultMessage:"Uptime"}),links:[{linkType:"documentation",href:`${p.links.observability.monitorUptime}`},{linkType:"discuss",href:"https://discuss.elastic.co/c/uptime"}]}),setBadge:d,appMountParameters:n,setBreadcrumbs:e.chrome.setBreadcrumbs};return s.a.render(i.a.createElement(yp,y),n.element),()=>{s.a.unmountComponentAtNode(n.element)}}}}]);