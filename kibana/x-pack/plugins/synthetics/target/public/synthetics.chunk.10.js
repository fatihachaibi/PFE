/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[10],{131:function(E,S,n){"use strict";n.d(S,"a",(function(){return I}));var e=n(48);const l=/^[0-9]*$/g,_=/[^\:]+:[0-9]{1,5}$/g;function b(E){return Object.keys(E).some((E=>!!E&&/[\s]/g.test(E)))}const t={[e.b.SCHEDULE]:({[e.b.SCHEDULE]:E})=>{const{number:S,unit:n}=E,l=parseFloat(S);return!l||!n||l<1},[e.b.TIMEOUT]:({[e.b.MONITOR_TYPE]:E,[e.b.TIMEOUT]:S,[e.b.SCHEDULE]:n})=>{const{number:l,unit:_}=n;return E!==e.d.BROWSER&&(!S||parseFloat(S)<0||(({scheduleNumber:E,scheduleUnit:S,timeout:n})=>{let l;switch(S){case e.i.SECONDS:l=parseFloat(E);break;case e.i.MINUTES:l=60*parseFloat(E);break;default:l=parseFloat(E)}return parseFloat(n)>l})({timeout:S,scheduleNumber:l,scheduleUnit:_}))}},T={[e.b.RESPONSE_STATUS_CHECK]:({[e.b.RESPONSE_STATUS_CHECK]:E})=>{const S=E;return!!S.length&&S.some((E=>!`${E}`.match(l)))},[e.b.RESPONSE_HEADERS_CHECK]:({[e.b.RESPONSE_HEADERS_CHECK]:E})=>b(E),[e.b.REQUEST_HEADERS_CHECK]:({[e.b.REQUEST_HEADERS_CHECK]:E})=>b(E),[e.b.MAX_REDIRECTS]:({[e.b.MAX_REDIRECTS]:E})=>!!E&&!`${E}`.match(l)||parseFloat(E)<0,[e.b.URLS]:({[e.b.URLS]:E})=>!E,...t},R={[e.b.HOSTS]:({[e.b.HOSTS]:E})=>!E||!`${E}`.match(_),...t},O={[e.b.HOSTS]:({[e.b.HOSTS]:E})=>!E,[e.b.WAIT]:({[e.b.WAIT]:E})=>!!E&&!l.test(`${E}`)&&parseFloat(E)<0,...t},u=(E,S)=>{if(void 0===E||""===E)return!1;const n=parseFloat(E);return isNaN(n)||(S?n<0:n<=0)},C={...t,[e.b.SOURCE_ZIP_URL]:({[e.b.SOURCE_ZIP_URL]:E,[e.b.SOURCE_INLINE]:S})=>!E&&!S,[e.b.SOURCE_INLINE]:({[e.b.SOURCE_ZIP_URL]:E,[e.b.SOURCE_INLINE]:S})=>!E&&!S,[e.b.DOWNLOAD_SPEED]:({[e.b.DOWNLOAD_SPEED]:E})=>u(E),[e.b.UPLOAD_SPEED]:({[e.b.UPLOAD_SPEED]:E})=>u(E),[e.b.LATENCY]:({[e.b.LATENCY]:E})=>u(E,!0)},I={[e.d.HTTP]:T,[e.d.TCP]:R,[e.d.ICMP]:O,[e.d.BROWSER]:C}},134:function(E,S,n){"use strict";n.d(S,"a",(function(){return s}));var e=n(1),l=n(48);const _={[l.b.NAME]:null,[l.b.LOCATIONS]:null,[l.b.MONITOR_TYPE]:null,[l.b.ENABLED]:null,[l.b.SCHEDULE]:E=>{var S,n;return JSON.stringify(`@every ${null===(S=E[l.b.SCHEDULE])||void 0===S?void 0:S.number}${null===(n=E[l.b.SCHEDULE])||void 0===n?void 0:n.unit}`)},[l.b.APM_SERVICE_NAME]:null,[l.b.TAGS]:E=>b(E[l.b.TAGS]),[l.b.TIMEOUT]:E=>t(E[l.b.TIMEOUT]||void 0),[l.b.NAMESPACE]:null,[l.b.REVISION]:null,[l.b.MONITOR_SOURCE_TYPE]:null},b=(E=[])=>E.length?JSON.stringify(E):null,t=(E="")=>E?`${E}s`:null,T=(E={})=>Object.keys(E).length?JSON.stringify(E):null,R=(E="")=>E?JSON.stringify(E):null,O={[l.b.TLS_CERTIFICATE_AUTHORITIES]:E=>u(E[l.b.TLS_CERTIFICATE_AUTHORITIES]),[l.b.TLS_CERTIFICATE]:E=>u(E[l.b.TLS_CERTIFICATE]),[l.b.TLS_KEY]:E=>u(E[l.b.TLS_KEY]),[l.b.TLS_KEY_PASSPHRASE]:E=>C(E[l.b.TLS_KEY_PASSPHRASE]),[l.b.TLS_VERIFICATION_MODE]:E=>C(E[l.b.TLS_VERIFICATION_MODE]),[l.b.TLS_VERSION]:E=>I(E[l.b.TLS_VERSION])},u=(E="")=>E?JSON.stringify(E):null,C=(E="")=>E||null,I=(E=[])=>E.length?JSON.stringify(E):null,a={[l.b.METADATA]:E=>T(E[l.b.METADATA]),[l.b.URLS]:null,[l.b.MAX_REDIRECTS]:null,[l.b.USERNAME]:null,[l.b.PASSWORD]:null,[l.b.PROXY_URL]:null,[l.b.RESPONSE_BODY_CHECK_NEGATIVE]:E=>b(E[l.b.RESPONSE_BODY_CHECK_NEGATIVE]),[l.b.RESPONSE_BODY_CHECK_POSITIVE]:E=>b(E[l.b.RESPONSE_BODY_CHECK_POSITIVE]),[l.b.RESPONSE_BODY_INDEX]:null,[l.b.RESPONSE_HEADERS_CHECK]:E=>T(E[l.b.RESPONSE_HEADERS_CHECK]),[l.b.RESPONSE_HEADERS_INDEX]:null,[l.b.RESPONSE_STATUS_CHECK]:E=>b(E[l.b.RESPONSE_STATUS_CHECK]),[l.b.REQUEST_BODY_CHECK]:E=>{var S,n;return null!==(S=E[l.b.REQUEST_BODY_CHECK])&&void 0!==S&&S.value?JSON.stringify(null===(n=E[l.b.REQUEST_BODY_CHECK])||void 0===n?void 0:n.value):null},[l.b.REQUEST_HEADERS_CHECK]:E=>T(E[l.b.REQUEST_HEADERS_CHECK]),[l.b.REQUEST_METHOD_CHECK]:null,...O,..._},i={[l.b.METADATA]:E=>T(E[l.b.METADATA]),[l.b.HOSTS]:null,[l.b.PROXY_URL]:null,[l.b.PROXY_USE_LOCAL_RESOLVER]:null,[l.b.RESPONSE_RECEIVE_CHECK]:null,[l.b.REQUEST_SEND_CHECK]:null,...O,..._},A={[l.b.HOSTS]:null,[l.b.WAIT]:E=>t(E[l.b.WAIT]),..._},r={[l.b.METADATA]:E=>T(E[l.b.METADATA]),[l.b.URLS]:null,[l.b.PORT]:null,[l.b.SOURCE_ZIP_URL]:null,[l.b.SOURCE_ZIP_USERNAME]:null,[l.b.SOURCE_ZIP_PASSWORD]:null,[l.b.SOURCE_ZIP_FOLDER]:null,[l.b.SOURCE_ZIP_PROXY_URL]:null,[l.b.SOURCE_PROJECT_CONTENT]:null,[l.b.SOURCE_INLINE]:E=>R(E[l.b.SOURCE_INLINE]),[l.b.PARAMS]:null,[l.b.SCREENSHOTS]:null,[l.b.IS_THROTTLING_ENABLED]:null,[l.b.DOWNLOAD_SPEED]:null,[l.b.UPLOAD_SPEED]:null,[l.b.LATENCY]:null,[l.b.SYNTHETICS_ARGS]:E=>b(E[l.b.SYNTHETICS_ARGS]),[l.b.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES]:E=>u(E[l.b.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES]),[l.b.ZIP_URL_TLS_CERTIFICATE]:E=>u(E[l.b.ZIP_URL_TLS_CERTIFICATE]),[l.b.ZIP_URL_TLS_KEY]:E=>u(E[l.b.ZIP_URL_TLS_KEY]),[l.b.ZIP_URL_TLS_KEY_PASSPHRASE]:E=>C(E[l.b.ZIP_URL_TLS_KEY_PASSPHRASE]),[l.b.ZIP_URL_TLS_VERIFICATION_MODE]:E=>C(E[l.b.ZIP_URL_TLS_VERIFICATION_MODE]),[l.b.ZIP_URL_TLS_VERSION]:E=>I(E[l.b.ZIP_URL_TLS_VERSION]),[l.b.JOURNEY_FILTERS_MATCH]:E=>R(E[l.b.JOURNEY_FILTERS_MATCH]),[l.b.JOURNEY_FILTERS_TAGS]:E=>b(E[l.b.JOURNEY_FILTERS_TAGS]),[l.b.THROTTLING_CONFIG]:E=>{if(!E[l.b.IS_THROTTLING_ENABLED])return"false";const S=(E,S)=>""!==E&&void 0!==E?`${E}${S}`:null;return[S(E[l.b.DOWNLOAD_SPEED],"d"),S(E[l.b.UPLOAD_SPEED],"u"),S(E[l.b.LATENCY],"l")].filter((E=>null!==E)).join("/")},[l.b.IGNORE_HTTPS_ERRORS]:null,[l.b.JOURNEY_ID]:null,[l.b.PROJECT_ID]:null,[l.b.PLAYWRIGHT_OPTIONS]:null,[l.b.CUSTOM_HEARTBEAT_ID]:null,[l.b.ORIGINAL_SPACE]:null,..._},o=(l.d.HTTP,l.d.ICMP,l.d.TCP,l.d.BROWSER,{...a,...A,...i,...r,..._}),s=({monitorType:E,defaultConfig:S,config:n,newPolicy:l,onChange:_,validate:b})=>{const[t,T]=Object(e.useState)(l),R=Object(e.useRef)(S);return Object(e.useEffect)((()=>{const S=Object.keys(n),e=Object.keys(b[E]),t=S.some((E=>n[E]!==R.current[E])),O=!!l.name&&!e.find((S=>{var e,l;return null===(e=b[E])||void 0===e||null===(l=e[S])||void 0===l?void 0:l.call(e,n)})),u={...l},C=u.inputs.find((S=>S.type===`synthetics/${E}`)),I=null==C?void 0:C.streams.find((S=>S.data_stream.dataset===E));u.inputs.forEach((E=>E.enabled=!1)),C&&I&&(u.inputs.forEach((E=>E.enabled=!1)),C.enabled=!0,I.enabled=!0),C&&I&&t&&(S.forEach((E=>{var S;const e=null===(S=I.vars)||void 0===S?void 0:S[E];var l;e&&o[E]?e.value=null===(l=o[E])||void 0===l?void 0:l.call(o,n):e&&(e.value=void 0===n[E]||null===n[E]?null:n[E])})),R.current=n,T(u),_({isValid:O,updatedPolicy:u}))}),[n,R,l,_,b,E]),{config:n,updatedPolicy:t}}},253:function(E,S,n){"use strict";n.r(S),n.d(S,"SyntheticsPolicyCreateExtensionWrapper",(function(){return a}));var e=n(1),l=n.n(e),_=n(9),b=n(51),t=n(60),T=n(132),R=n(134),O=n(130),u=n(131);const C=t.d,I=Object(e.memo)((({newPolicy:E,onChange:S})=>{Object(_.useTrackPageview)({app:"fleet",path:"syntheticsCreate"}),Object(_.useTrackPageview)({app:"fleet",path:"syntheticsCreate",delay:15e3});const{monitorType:n}=Object(b.A)(),t=Object(O.a)(E.name),I=Object(e.useMemo)((()=>E.inputs.map((E=>E.type.replace(/synthetics\//g,"")))),[E]);return Object(R.a)({monitorType:n,defaultConfig:C[n],config:t[n],newPolicy:E,onChange:S,validate:u.a}),Object(e.useEffect)((()=>{S({isValid:!1,updatedPolicy:{...E,name:""}})}),[]),l.a.createElement(T.a,{validate:u.a[n],dataStreams:I})}));I.displayName="SyntheticsPolicyCreateExtension";const a=Object(e.memo)((({newPolicy:E,onChange:S})=>l.a.createElement(b.i,null,l.a.createElement(I,{newPolicy:E,onChange:S}))));a.displayName="SyntheticsPolicyCreateExtensionWrapper"},54:function(E,S,n){E.exports=n(10)(3)}}]);