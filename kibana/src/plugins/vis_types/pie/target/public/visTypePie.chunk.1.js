(window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[]).push([[1],{18:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return x}));var i=s(9),a=s.n(i),l=s(7),n=s.n(l),o=s(15),u=s(14),d=s(6),p=s(2),r=s(16),c=s(17),b=s(4),v=s(1),g=s(8);function j({disabled:e,value:t=null,setValue:s}){return Object(g.jsx)(u.EuiFormRow,{label:p.i18n.translate("visTypePie.controls.truncateLabel",{defaultMessage:"Truncate"}),fullWidth:!0,display:"rowCompressed",labelAppend:Object(g.jsx)(u.EuiIconTip,{content:p.i18n.translate("visTypePie.controls.truncateTooltip",{defaultMessage:"Number of characters for labels positioned outside the chart."}),position:"top",type:"iInCircle",color:"subdued"})},Object(g.jsx)(u.EuiFieldNumber,{"data-test-subj":"pieLabelTruncateInput",disabled:e,value:t||"",onChange:e=>s("truncate",""===e.target.value?null:parseFloat(e.target.value)),fullWidth:!0,compressed:!0}))}var m=s(3);const O=[{text:p.i18n.translate("visTypePie.labelPositions.insideText",{defaultMessage:"Inside"}),value:v.LabelPositions.INSIDE},{text:p.i18n.translate("visTypePie.labelPositions.insideOrOutsideText",{defaultMessage:"Inside or outside"}),value:v.LabelPositions.DEFAULT}],P=[{text:p.i18n.translate("visTypePie.valuesFormats.percent",{defaultMessage:"Show percent"}),value:v.ValueFormats.PERCENT},{text:p.i18n.translate("visTypePie.valuesFormats.value",{defaultMessage:"Show value"}),value:v.ValueFormats.VALUE}],S=[{id:"emptySizeRatioOption-small",value:v.EmptySizeRatios.SMALL,label:p.i18n.translate("visTypePie.emptySizeRatioOptions.small",{defaultMessage:"Small"})},{id:"emptySizeRatioOption-medium",value:v.EmptySizeRatios.MEDIUM,label:p.i18n.translate("visTypePie.emptySizeRatioOptions.medium",{defaultMessage:"Medium"})},{id:"emptySizeRatioOption-large",value:v.EmptySizeRatios.LARGE,label:p.i18n.translate("visTypePie.emptySizeRatioOptions.large",{defaultMessage:"Large"})}],T=[{text:p.i18n.translate("visTypePie.legendPositions.topText",{defaultMessage:"Top"}),value:d.Position.Top},{text:p.i18n.translate("visTypePie.legendPositions.leftText",{defaultMessage:"Left"}),value:d.Position.Left},{text:p.i18n.translate("visTypePie.legendPositions.rightText",{defaultMessage:"Right"}),value:d.Position.Right},{text:p.i18n.translate("visTypePie.legendPositions.bottomText",{defaultMessage:"Bottom"}),value:d.Position.Bottom}],y=p.i18n.translate("visTypePie.editors.pie.emptySizeRatioLabel",{defaultMessage:"Inner area size"});function h({paramName:e,value:t,setValue:s}){return Object(g.jsx)(u.EuiFormRow,{fullWidth:!0,label:p.i18n.translate("visTypePie.editors.pie.decimalSliderLabel",{defaultMessage:"Maximum decimal places for percent"}),"data-test-subj":"visTypePieValueDecimals"},Object(g.jsx)(u.EuiRange,{value:t,min:0,max:4,showInput:!0,compressed:!0,onChange:t=>{s(e,Number(t.currentTarget.value))}}))}const x=e=>{var t,s,i,x,L,E,f,w,M;const{stateParams:C,setValue:I,aggs:z}=e,R=(e,t)=>I("labels",{...C.labels,[e]:t}),D=null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen"),[F,N]=Object(l.useState)(void 0),[V,_]=Object(l.useState)((()=>{var t;const s=C.legendDisplay===v.LegendDisplay.SHOW;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",s)})),U=Boolean(null==z||null===(s=z.aggs)||void 0===s?void 0:s.find((e=>"split"===e.schema&&e.enabled))),k=null!==(i=null==z||null===(x=z.aggs)||void 0===x?void 0:x.filter((e=>"segment"===e.schema&&e.enabled)))&&void 0!==i?i:[],A=C.legendSize,[W]=Object(l.useState)((()=>A===b.LegendSize.AUTO)),B=Object(l.useCallback)((e=>e?v.LegendDisplay.SHOW:v.LegendDisplay.HIDE),[]);Object(l.useEffect)((()=>{_(null!=D?D:C.legendDisplay===v.LegendDisplay.SHOW)}),[D,C.legendDisplay]),Object(l.useEffect)((()=>{(async()=>{var t;const s=await(null===(t=e.palettes)||void 0===t?void 0:t.getPalettes());N(s)})()}),[e.palettes]);const H=Object(l.useCallback)((e=>{var t;const s=null===(t=S.find((({id:t})=>t===e)))||void 0===t?void 0:t.value;I("emptySizeRatio",s)}),[I]),G=Object(l.useCallback)((e=>I("legendSize",e)),[I]),K=Object(l.useCallback)(((t,s)=>{var i;_(s);const a=B(s);a===C[t]&&I(t,B(!s)),I(t,a),null===(i=e.uiState)||void 0===i||i.set("vis.legendOpen",s)}),[B,e.uiState,I,C]);return Object(g.jsx)(n.a.Fragment,null,Object(g.jsx)(u.EuiPanel,{paddingSize:"s"},Object(g.jsx)(u.EuiTitle,{size:"xs"},Object(g.jsx)("h3",null,Object(g.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.pieSettingsTitle",defaultMessage:"Pie settings"}))),Object(g.jsx)(u.EuiSpacer,{size:"s"}),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.donutLabel",{defaultMessage:"Donut"}),paramName:"isDonut",value:C.isDonut,setValue:I}),e.showElasticChartsOptions&&C.isDonut&&Object(g.jsx)(u.EuiFormRow,{label:y,fullWidth:!0},Object(g.jsx)(u.EuiButtonGroup,{isFullWidth:!0,name:"emptySizeRatio",buttonSize:"compressed",legend:y,options:S,idSelected:null!==(L=null===(E=S.find((({value:e})=>e===C.emptySizeRatio)))||void 0===E?void 0:E.id)&&void 0!==L?L:"emptySizeRatioOption-small",onChange:H,"data-test-subj":"visTypePieEmptySizeRatioButtonGroup"})),Object(g.jsx)(c.BasicOptions,a()({},e,{legendPositions:T})),e.showElasticChartsOptions&&Object(g.jsx)(n.a.Fragment,null,Object(g.jsx)(u.EuiFormRow,null,Object(g.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.distinctColorsLabel",{defaultMessage:"Use distinct colors per slice"}),paramName:"distinctColors",value:C.distinctColors,disabled:(null==k?void 0:k.length)<=1&&!U,setValue:I,"data-test-subj":"visTypePiedistinctColorsSwitch"})),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiIconTip,{content:"Use with multi-layer chart or multiple charts.",position:"top",type:"iInCircle",color:"subdued"})))),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.legendDisplayLabel",{defaultMessage:"Show legend"}),paramName:"legendDisplay",value:V,setValue:K,"data-test-subj":"visTypePieAddLegendSwitch"}),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.nestedLegendLabel",{defaultMessage:"Nest legend"}),paramName:"nestedLegend",value:C.nestedLegend,disabled:C.legendDisplay===v.LegendDisplay.HIDE,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"nested_legend_switched"),I(t,s)},"data-test-subj":"visTypePieNestedLegendSwitch"}),Object(g.jsx)(c.LongLegendOptions,{"data-test-subj":"pieLongLegendsOptions",truncateLegend:null===(f=C.truncateLegend)||void 0===f||f,maxLegendLines:null!==(w=C.maxLegendLines)&&void 0!==w?w:1,setValue:I}),Object(g.jsx)(c.LegendSizeSettings,{legendSize:A,onLegendSizeChange:G,isVerticalLegend:C.legendPosition===d.Position.Left||C.legendPosition===d.Position.Right,showAutoOption:W})),e.showElasticChartsOptions&&F&&Object(g.jsx)(c.PalettePicker,{palettes:F,activePalette:C.palette,paramName:"palette",setPalette:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"palette_selected"),I(t,s)}})),Object(g.jsx)(u.EuiSpacer,{size:"s"}),Object(g.jsx)(u.EuiPanel,{paddingSize:"s"},Object(g.jsx)(u.EuiTitle,{size:"xs"},Object(g.jsx)("h3",null,Object(g.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.labelsSettingsTitle",defaultMessage:"Labels settings"}))),Object(g.jsx)(u.EuiSpacer,{size:"s"}),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:C.labels.show,setValue:R}),e.showElasticChartsOptions&&Object(g.jsx)(c.SelectOption,{label:p.i18n.translate("visTypePie.editors.pie.labelPositionLabel",{defaultMessage:"Label position"}),disabled:!C.labels.show||U,options:O,paramName:"position",value:U?v.LabelPositions.INSIDE:C.labels.position||v.LabelPositions.DEFAULT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"label_position_selected"),R(t,s)},"data-test-subj":"visTypePieLabelPositionSelect"}),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.showTopLevelOnlyLabel",{defaultMessage:"Show top level only"}),disabled:!C.labels.show||e.showElasticChartsOptions&&C.labels.position===v.LabelPositions.INSIDE,paramName:"last_level",value:C.labels.last_level,setValue:R,"data-test-subj":"visTypePieTopLevelSwitch"}),Object(g.jsx)(c.SwitchOption,{label:p.i18n.translate("visTypePie.editors.pie.showValuesLabel",{defaultMessage:"Show values"}),disabled:!C.labels.show,paramName:"values",value:C.labels.values,setValue:R}),e.showElasticChartsOptions&&Object(g.jsx)(n.a.Fragment,null,Object(g.jsx)(c.SelectOption,{label:p.i18n.translate("visTypePie.editors.pie.valueFormatsLabel",{defaultMessage:"Values"}),disabled:!C.labels.values,options:P,paramName:"valuesFormat",value:C.labels.valuesFormat||v.ValueFormats.PERCENT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"values_format_selected"),R(t,s)},"data-test-subj":"visTypePieValueFormatsSelect"}),Object(g.jsx)(h,{paramName:"percentDecimals",value:null!==(M=C.labels.percentDecimals)&&void 0!==M?M:m.DEFAULT_PERCENT_DECIMALS,setValue:R})),Object(g.jsx)(j,{value:C.labels.truncate,setValue:R,disabled:e.showElasticChartsOptions&&C.labels.position===v.LabelPositions.INSIDE})))}}}]);