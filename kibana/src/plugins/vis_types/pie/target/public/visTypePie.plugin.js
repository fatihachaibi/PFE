!function(e){function t(t){for(var i,r,s=t[0],a=t[1],o=0,p=[];o<s.length;o++)r=s[o],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);for(l&&l(t);p.length;)p.shift()()}var i={},n={0:0};function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(t,r){i=n[e]=[t,r]}));t.push(i[2]=s);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.src=function(e){return r.p+"visTypePie.chunk."+e+".js"}(e);var l=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(p);var i=n[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,i[1](l)}n[e]=void 0}};var p=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var s=window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var l=a;r(r.s=10)}([function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/expressionPartitionVis/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,i){"use strict";i.r(t),i.d(t,"DEFAULT_PERCENT_DECIMALS",(function(){return n})),i.d(t,"LEGACY_PIE_CHARTS_LIBRARY",(function(){return r}));const n=2,r="visualization:visualize:legacyPieChartsLibrary"},function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,i){e.exports=i(12)(3)},function(e,t,i){i(11),__kbnBundles__.define("plugin/visTypePie/public",i,13),__kbnBundles__.define("plugin/visTypePie/common/index",i,3)},function(e,t,i){i.p=window.__kbnPublicPath__.visTypePie},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,i){"use strict";i.r(t),i.d(t,"pieVisType",(function(){return P})),i.d(t,"plugin",(function(){return E}));var n=i(3),r=i(2),s=i(6),a=i(5),o=i(4),l=i(1),p=i(0);function u(e){return Object(p.buildExpressionFunction)("esaggs",{index:Object(p.buildExpression)([Object(p.buildExpressionFunction)("indexPatternLoad",{id:e.data.indexPattern.id})]),metricsAtAllLevels:e.isHierarchical(),partialRows:!1,aggs:e.data.aggs.aggs.map((e=>Object(p.buildExpression)(e.toExpressionAst())))})}const c=e=>{const t=Object(p.buildExpressionFunction)("visdimension",{accessor:e.accessor});return e.format&&(t.addArgument("format",e.format.id),t.addArgument("formatParams",JSON.stringify(e.format.params))),Object(p.buildExpression)([t])},d=e=>{const t=Object(p.buildExpressionFunction)("system_palette",{name:null==e?void 0:e.name});return Object(p.buildExpression)([t])},g=e=>{const t=Object(p.buildExpressionFunction)(l.PARTITION_LABELS_FUNCTION,{show:e.show,last_level:e.last_level,values:e.values,truncate:e.truncate});return e.position&&t.addArgument("position",e.position),e.valuesFormat&&t.addArgument("valuesFormat",e.valuesFormat),null!=e.percentDecimals&&t.addArgument("percentDecimals",e.percentDecimals),Object(p.buildExpression)([t])},m=async(e,t)=>{var i,n,r,s,a;const m=Object(o.getVisSchemas)(e,t),_={addTooltip:e.params.addTooltip,legendDisplay:e.params.legendDisplay,legendPosition:e.params.legendPosition,nestedLegend:null!==(i=e.params.nestedLegend)&&void 0!==i&&i,truncateLegend:e.params.truncateLegend,maxLegendLines:e.params.maxLegendLines,legendSize:e.params.legendSize,distinctColors:e.params.distinctColors,isDonut:null!==(n=e.params.isDonut)&&void 0!==n&&n,emptySizeRatio:e.params.emptySizeRatio,palette:d(e.params.palette),labels:g(e.params.labels),metric:m.metric.map(c),buckets:null===(r=m.segment)||void 0===r?void 0:r.map(c),splitColumn:null===(s=m.split_column)||void 0===s?void 0:s.map(c),splitRow:null===(a=m.split_row)||void 0===a?void 0:a.map(c),startFromSecondLargestSlice:!1},f=Object(p.buildExpressionFunction)(l.PIE_VIS_EXPRESSION_NAME,_);return Object(p.buildExpression)([u(e),f]).toAst()};var _=i(9),f=i.n(_),b=i(7),v=i(8);const h=Object(b.lazy)((()=>i.e(1).then(i.bind(null,18)))),y=({showElasticChartsOptions:e,palettes:t,trackUiMetric:i})=>n=>Object(v.jsx)(h,f()({},n,{palettes:t,showElasticChartsOptions:e,trackUiMetric:i})),P=e=>(({showElasticChartsOptions:e=!1,palettes:t,trackUiMetric:i})=>({name:"pie",title:r.i18n.translate("visTypePie.pie.pieTitle",{defaultMessage:"Pie"}),icon:"visPie",description:r.i18n.translate("visTypePie.pie.pieDescription",{defaultMessage:"Compare data in proportion to a whole."}),toExpressionAst:m,getSupportedTriggers:()=>[o.VIS_EVENT_TO_TRIGGER.filter],visConfig:{defaults:{type:"pie",addTooltip:!0,legendDisplay:e?l.LegendDisplay.HIDE:l.LegendDisplay.SHOW,legendPosition:s.Position.Right,nestedLegend:!1,truncateLegend:!0,maxLegendLines:1,distinctColors:!1,isDonut:!0,emptySizeRatio:l.EmptySizeRatios.SMALL,palette:{type:"palette",name:"default"},labels:{show:!0,last_level:!e,values:!0,valuesFormat:l.ValueFormats.PERCENT,percentDecimals:n.DEFAULT_PERCENT_DECIMALS,truncate:100,position:l.LabelPositions.DEFAULT}}},editorConfig:{enableDataViewChange:!0,optionsTemplate:y({showElasticChartsOptions:e,palettes:t,trackUiMetric:i}),schemas:[{group:a.AggGroupNames.Metrics,name:"metric",title:r.i18n.translate("visTypePie.pie.metricTitle",{defaultMessage:"Slice size"}),min:1,max:1,aggFilter:["sum","count","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:a.AggGroupNames.Buckets,name:"segment",title:r.i18n.translate("visTypePie.pie.segmentTitle",{defaultMessage:"Split slices"}),min:0,max:1/0,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:a.AggGroupNames.Buckets,name:"split",title:r.i18n.translate("visTypePie.pie.splitTitle",{defaultMessage:"Split chart"}),mustBeFirst:!0,min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},hierarchicalData:!0,requiresSearch:!0}))(e);class plugin_VisTypePiePlugin{setup(e,{visualizations:t,charts:i,usageCollection:r}){if(!e.uiSettings.get(n.LEGACY_PIE_CHARTS_LIBRARY,!1)){const e=null==r?void 0:r.reportUiCounter.bind(r,"vis_type_pie");t.createBaseVisualization(P({showElasticChartsOptions:!0,palettes:i.palettes,trackUiMetric:e}))}return{}}start(){}}const E=()=>new plugin_VisTypePiePlugin},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}]);