!function(e){function t(t){for(var n,s,i=t[0],a=t[1],o=0,u=[];o<i.length;o++)s=i[o],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={0:0};function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,s){n=r[e]=[t,s]}));t.push(n[2]=i);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=function(e){return s.p+"visTypeVislib.chunk."+e+".js"}(e);var c=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var i=window.visTypeVislib_bundle_jsonpfunction=window.visTypeVislib_bundle_jsonpfunction||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var c=a;s(s.s=27)}([function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return u}));var r=n(8);const[s,i]=Object(r.createGetterSetter)("vislib data.actions"),[a,o]=Object(r.createGetterSetter)("vislib data.fieldFormats"),[c,u]=Object(r.createGetterSetter)("vislib theme service")},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(4),s=n(13);const i="vislib_vis",a=()=>({name:i,type:"render",inputTypes:["datatable"],help:r.i18n.translate("visTypeVislib.functions.vislib.help",{defaultMessage:"Vislib visualization"}),args:{type:{types:["string"],default:'""',help:"vislib vis type"},visConfig:{types:["string"],default:'"{}"',help:"vislib vis config"}},fn(e,t,n){var r;const a=t.type,o=JSON.parse(t.visConfig),c=Object(s.a)(e,o.dimensions);return null!=n&&null!==(r=n.inspectorAdapters)&&void 0!==r&&r.tables&&n.inspectorAdapters.tables.logDatatable("default",e),{type:"render",as:i,value:{visData:c,visConfig:o,visType:a}}}})},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));const r=Object.freeze({Automatic:"automatic",Horizontal:"horizontal",Vertical:"vertical"}),s=Object.freeze({Arc:"Arc",Circle:"Circle"}),i=Object.freeze({Pie:"pie",Heatmap:"heatmap",Gauge:"gauge",Goal:"goal",Metric:"metric"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0);function s(e){return Object(r.buildExpressionFunction)("esaggs",{index:Object(r.buildExpression)([Object(r.buildExpressionFunction)("indexPatternLoad",{id:e.data.indexPattern.id})]),metricsAtAllLevels:e.isHierarchical(),partialRows:!1,aggs:e.data.aggs.aggs.map((e=>Object(r.buildExpression)(e.toExpressionAst())))})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(4),s=n(13),i=n(9),a=n(2);const o="vislib_pie_vis",c=()=>({name:o,type:"render",inputTypes:["datatable"],help:r.i18n.translate("visTypeVislib.functions.pie.help",{defaultMessage:"Pie visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:"vislib pie vis config"}},fn(e,t,n){var r;const o=JSON.parse(t.visConfig),c=Object(s.b)(e,o.dimensions);return null!=n&&null!==(r=n.inspectorAdapters)&&void 0!==r&&r.tables&&n.inspectorAdapters.tables.logDatatable("default",e),{type:"render",as:a.b,value:{visData:c,visConfig:o,visType:i.c.Pie}}}})},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeGauge/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n(1),s=n(3);function i(e,t,n,s,i,a,o){const c=-1===t.accessor?"_all":s[t.accessor],u=s[a.accessor],l=o&&s[o.accessor],p={x:c,y:u,z:l,extraMetrics:[],seriesRaw:n&&{table:e,column:n[0].column,row:i,value:s[n[0].accessor]},xRaw:{table:e,column:t.column,row:i,value:c},yRaw:{table:e,column:a.column,row:i,value:u},zRaw:o&&{table:e,column:o.column,row:i,value:l},tableRaw:e.$parent&&{table:e.$parent.table,column:e.$parent.column,row:e.$parent.row,value:e.$parent.formattedKey,title:e.$parent.name},parent:n?n[0]:null};if("NaN"!==p.y)return n?p.series=n.map((e=>Object(r.b)().deserialize(e.format).convert(s[e.accessor]))).join(" - "):a&&(p.series=a.title),p}var a=n(23);function o(e,t,n,r,s,i,o){n=null==n?"":n+"",e.has(n)?e.get(n).values.push(t):e.set(n,{id:Object(a.getAggId)(n),rawId:n,label:null==r?n:r,count:0,values:[t],format:s,zLabel:o,zFormat:i})}var c=n(4);function u(e,t){const n={};return Object.keys(t).forEach((r=>{const s=t[r];(Array.isArray(s)?s:[s]).forEach((t=>{if(!t)return;const s=e.columns[t.accessor];s&&(n[r]||(n[r]=[]),n[r].push({accessor:s.id,column:t.accessor,title:s.name,format:t.format,params:t.params}))}))})),n.x||(n.x=[{accessor:-1,title:c.i18n.translate("visTypeVislib.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"},format:{}}]),n}var l=n(7),p=n.n(l);function d(e,t){const n=e.tables;if(!n||!n.length)return;const r=n[0];if(r.columns){const n=t(r);return e.$parent&&(n.label=e.title),n}const s={};let i;return n.forEach((function(n){if(!i){const t="row"===e.direction?"rows":"columns";i=s[t]=[]}let r;(r=d(n,t))&&i.push(r)})),s}function b(e){return function(t,n){const s=function(e,t){const n={tables:[]},s=t.splitColumn||t.splitRow;if(s){n.direction=t.splitRow?"row":"column";const i=s[0].accessor,a=Object(r.b)().deserialize(s[0].format),o=e.columns[i],c={};let u=0;e.rows.forEach(((t,r)=>{const s=t[o.id],l=a.convert(s);if(!c.hasOwnProperty(s)){c[s]=u++;const t={$parent:n,title:`${l}: ${o.name}`,name:o.name,key:s,formattedKey:l,column:i,row:r,table:e,tables:[]};t.tables.push({$parent:t,columns:e.columns,rows:[]}),n.tables.push(t)}const p=c[s];n.tables[p].tables[0].rows.push(t)}))}else n.tables.push({columns:e.columns,rows:e.rows});return n}(t,n);let i=d(s,(t=>e(t,n)));return i||(i={rows:[]}),i.hits=t.rows.length,i}}const f=b(((e,t)=>{const n={aspects:u(e,t)};return function(e,t){const{format:n,title:r,params:i,accessor:a}=e.aspects.x[0];if(e.xAxisOrderedValues=-1===a&&"defaultValue"in i?[i.defaultValue]:Object(s.uniq)(t.rows.map((e=>e[a]))),e.xAxisFormat=n,e.xAxisLabel=r,"interval"in i)if("date"in i){const{intervalESUnit:t,intervalESValue:n}=i;e.ordered={interval:p.a.duration(n,t),intervalESUnit:t,intervalESValue:n}}else e.ordered={interval:i.interval}}(n,e),function(e){const t=e.aspects.y;Array.isArray(t)&&(e.yAxisFormat=t[0].format,e.yAxisLabel=t.length>1?"":t[0].title);const n=e.aspects.series;n&&(e.zAxisFormat=n[0].format,e.zAxisLabel="")}(n),"date"in n.aspects.x[0].params&&function(e){const t=e.aspects.x[0],n="bounds"in t.params?t.params.bounds:void 0;e.ordered.date=!0,n?(e.ordered.min="string"==typeof n.min?Date.parse(n.min):n.min,e.ordered.max="string"==typeof n.max?Date.parse(n.max):n.max):e.ordered.endzones=!1}(n),n.series=function(e,t){const n=t.aspects,r=n.x[0],a=n.y[0],c=n.z&&n.z[0],u=Array.isArray(n.y)&&n.y.length>1,l=Object(s.partial)(i,e,r,n.series),p=new Map;return e.rows.forEach(((e,t)=>{if(u)n.y.forEach((function(r){const s=l(e,t,r,c);if(!s)return;let i=r.accessor,a=r.title;if(n.series){const e=s.series?s.series+": ":"";i=e+i,a=e+a}s.seriesId=i,o(p,s,i,a,r.format,c&&c.format,c&&c.title)}));else{const n=l(e,t,a,c);if(n){const e=`${n.series}-${a.accessor}`;n.seriesId=e,o(p,n,e,n.series,a.format,c&&c.format,c&&c.title)}}})),[...p.values()]}(e,n),delete n.aspects,n})),m=b(((e,{metric:t,buckets:n=[]})=>{let i;const a={},o=e.columns[t.accessor],c=t.format;return n.length?(i=[],e.rows.forEach(((t,s)=>{let o,c=i;n.forEach((n=>{const i=e.columns[n.accessor],u=e.columns[n.accessor+1],l=Object(r.b)().deserialize(n.format).convert(t[i.id]),p=t[u.id];a[l]=l;let d=c.find((e=>e.name===l));d||(d={name:l,size:p,parent:o,children:[],rawData:{table:e,row:s,column:n.accessor,value:t[i.id]}},c.push(d)),o=d,c=d.children}))}))):(i=[{name:o.name,size:e.rows[0][o.id]}],a[o.name]=o.name),{hits:e.rows.length,raw:e,names:Object(s.toArray)(a),tooltipFormatter:c,slices:{children:[...i]}}}))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(24),s=n(5),i=n(0),a=n(11),o=n(10);let c;!function(e){e.SHOW="show",e.HIDE="hide",e.DEFAULT="default"}(c||(c={}));const u={...Object(r.pieVisType)({}),toExpressionAst:async(e,t)=>{const n=Object(s.getVisSchemas)(e,t),r={...e.params,dimensions:{metric:n.metric[0],buckets:n.segment,splitRow:n.split_row,splitColumn:n.split_column}},c=Object(i.buildExpressionFunction)(a.b,{visConfig:JSON.stringify(r)});return Object(i.buildExpression)([Object(o.a)(e),c]).toAst()}}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypePie/common/index");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeHeatmap/common/index");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeGauge/common/index");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeHeatmap/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeXy/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypePie/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(26)(3)},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(28),__kbnBundles__.define("plugin/visTypeVislib/public",n,29)},function(e,t,n){n.p=window.__kbnPublicPath__.visTypeVislib},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return k})),n.d(t,"Alignment",(function(){return E.a})),n.d(t,"GaugeType",(function(){return E.b})),n.d(t,"VislibChartType",(function(){return E.c}));var r=n(19),s=n(20),i=n(21),a=n(22),o=n(7),c=n.n(o),u=n(5),l=n(0),p=n(14),d=n(2),b=n(10);const f=async(e,t)=>{var n,r;const s=Object(u.getVisSchemas)(e,t),i={x:s.segment?s.segment[0]:null,y:s.metric,z:s.radius,width:s.width,series:s.group,splitRow:s.split_row,splitColumn:s.split_column},a=null!==(n=null===(r=e.data.aggs)||void 0===r?void 0:r.getResponseAggs())&&void 0!==n?n:[];if(i.x){const n=a[i.x.accessor];if(n.type.name===p.BUCKET_TYPES.DATE_HISTOGRAM){i.x.params.date=!0;const{esUnit:e,esValue:t}=n.buckets.getInterval();i.x.params.intervalESUnit=e,i.x.params.intervalESValue=t,i.x.params.interval=c.a.duration(t,e).asMilliseconds(),i.x.params.format=n.buckets.getScaledDateFormat(),i.x.params.bounds=n.buckets.getBounds()}else if(n.type.name===p.BUCKET_TYPES.HISTOGRAM){const r=n.type.paramByName("interval"),s={params:{}};await r.modifyAggConfigOnSearchRequestStart(n,e.data.searchSource,{abortSignal:t.abortSignal}),r.write(n,s),i.x.params.interval=s.params.interval}}const o={...e.params};(i.y||[]).forEach((e=>{var t;const n=a.filter((({enabled:e})=>e))[e.accessor],r=(o.seriesParams||[]).find((e=>e.data.id===n.id));if(r){const t=(o.valueAxes||[]).find((e=>e.id===r.valueAxis));"percentage"===(null==t?void 0:t.scale.mode)&&(e.format={id:"percent"})}var s;!0===(null==o||null===(t=o.gauge)||void 0===t?void 0:t.percentageMode)&&(e.format={id:"percent",params:{pattern:null==o||null===(s=o.gauge)||void 0===s?void 0:s.percentageFormatPattern}})}));const f=Object(l.buildExpressionFunction)(d.b,{type:e.type.name,visConfig:JSON.stringify({...o,dimensions:i})});return Object(l.buildExpression)([Object(b.a)(e),f]).toAst()},m={...Object(a.heatmapVisType)({}),toExpressionAst:f};var _=n(11),g=n(18),v=n(1),y=n(25),O=n.n(y),h=n(16),j=n(15),x=n(17),w=n(6);const S=Object(h.lazy)((()=>n.e(2).then(n.bind(null,122))));var P=n(12);const A={...Object(P.gaugeVisType)({}),toExpressionAst:f},D={...Object(P.goalVisType)({}),toExpressionAst:f};class plugin_VisTypeVislibPlugin{constructor(e){this.initializerContext=e}setup(e,{expressions:t,visualizations:n,charts:a}){t.registerRenderer(((e,t)=>({name:d.b,displayName:"Vislib visualization",reuseDomNode:!0,render:async(n,r,s)=>{const i=function(e,t){if(["goal","gauge"].includes(t))return!1;const n=null==e?void 0:e.rows,r=0===(null==e?void 0:e.hits)||n&&!n.length;return Boolean(r)}(r.visData,r.visType);s.onDestroy((()=>Object(j.unmountComponentAtNode)(n))),Object(j.render)(Object(w.jsx)(x.KibanaThemeProvider,{theme$:e.theme.theme$},Object(w.jsx)(u.VisualizationContainer,{handlers:s,showNoResult:i},Object(w.jsx)(S,O()({},r,{core:e,charts:t,handlers:s})))),n)}}))(e,a)),t.registerFunction(Object(d.a)()),e.uiSettings.get(r.LEGACY_PIE_CHARTS_LIBRARY,!1)&&(n.createBaseVisualization(g.b),t.registerFunction(Object(_.a)())),e.uiSettings.get(s.LEGACY_HEATMAP_CHARTS_LIBRARY)&&n.createBaseVisualization(m),e.uiSettings.get(i.LEGACY_GAUGE_CHARTS_LIBRARY)&&(n.createBaseVisualization(A),n.createBaseVisualization(D))}start(e,{data:t}){Object(v.e)(t.fieldFormats),Object(v.d)(t.actions),Object(v.f)(e.theme)}}var E=n(9);function k(e){return new plugin_VisTypeVislibPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.Jquery},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t){e.exports=__kbnSharedDeps__.ReactDomServer},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticNumeral},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices}]);