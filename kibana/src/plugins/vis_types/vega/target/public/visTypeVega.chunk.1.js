(window.visTypeVega_bundle_jsonpfunction=window.visTypeVega_bundle_jsonpfunction||[]).push([[1],{164:function(e,t,r){"use strict";r.r(t),r.d(t,"createVegaRequestHandler",(function(){return l})),r.d(t,"VegaVisComponent",(function(){return m}));var n=r(67),i=r(18),a=r(7),o=r(4);class search_api_SearchAPI{constructor(e,t,r,n,i){this.dependencies=e,this.abortSignal=t,this.inspectorAdapters=r,this.searchSessionId=n,this.executionContext=i}search(e){const{search:t,indexPatterns:r}=this.dependencies,n={};return Object(a.combineLatest)(e.map((e=>{const s=e.name,u=Object(i.getSearchParamsFromRequest)(e,{getConfig:this.dependencies.uiSettings.get.bind(this.dependencies.uiSettings)});return Object(a.from)((async(e,t,r)=>{if(r){var n;let i=null===(n=t.body)||void 0===n?void 0:n.runtime_mappings;if(!i){const t=(await e.find(r,1)).find((e=>e.title===r));i=null==t?void 0:t.getRuntimeMappings()}return{...t,body:{...t.body,runtime_mappings:i}}}return t})(r,u,e.index)).pipe(Object(o.tap)((t=>{this.inspectorAdapters&&(n[s]=this.inspectorAdapters.requests.start(s,{...e,searchSessionId:this.searchSessionId}),n[s].json(t.body))})),Object(o.switchMap)((e=>t.search({params:e},{abortSignal:this.abortSignal,sessionId:this.searchSessionId,executionContext:this.executionContext}).pipe(Object(o.tap)((e=>this.inspectSearchResult(e,n[s])),(e=>this.inspectSearchResult({rawResponse:null==e?void 0:e.err},n[s]))),Object(o.map)((e=>({name:s,rawResponse:e.rawResponse})))))))})))}resetSearchStats(){this.inspectorAdapters&&this.inspectorAdapters.requests.reset()}inspectSearchResult(e,t){t&&t.stats(i.search.getResponseInspectorStats(e.rawResponse)).ok({json:e.rawResponse})}}var s=r(9),u=r.n(s);class time_cache_TimeCache{constructor(e,t){u()(this,"_timefilter",void 0),u()(this,"_maxAge",void 0),u()(this,"_cachedBounds",void 0),u()(this,"_cacheTS",void 0),u()(this,"_timeRange",void 0),this._timefilter=e,this._maxAge=t,this._cacheTS=0}_now(){return Date.now()}getTimeBounds(){const e=this._now();let t=null;if(this._cachedBounds){const r=e-this._cacheTS;if(r<40)return this._cachedBounds;if(r<this._maxAge&&(t=this._getBounds(),Math.abs(t.min-this._cachedBounds.min)<this._maxAge&&Math.abs(t.max-this._cachedBounds.max)<this._maxAge))return this._cachedBounds}return this._cacheTS=e,this._cachedBounds=t||this._getBounds(),this._cachedBounds}setTimeRange(e){this._timeRange=e}_getBounds(){const e=this._timefilter.calculateBounds(this._timeRange);return{min:e.min.valueOf(),max:e.max.valueOf()}}}var c=r(2);function l({plugins:{data:e},core:{uiSettings:t},getServiceSettings:a},o={}){let s;const{timefilter:u}=e.query.timefilter,l=new time_cache_TimeCache(u,3e3);return async function({timeRange:e,filters:u,query:d,visParams:f,searchSessionId:p,executionContext:g}){var v;const{search:h}=Object(c.a)(),m=Object(c.b)();let b;s||(s=new search_api_SearchAPI({uiSettings:t,search:h,indexPatterns:m},o.abortSignal,o.inspectorAdapters,p,g)),l.setTimeRange(e);const y=null===(v=u[0])||void 0===v?void 0:v.meta.index;y&&(b=await m.get(y).catch((()=>{})));const _=Object(i.getEsQueryConfig)(t),x=Object(n.a)(b,d,u,_),{VegaParser:w}=await Promise.all([r.e(0),r.e(7)]).then(r.bind(null,166)),V=new w(f.spec,s,l,x,a);return await V.parseAsync()}}var d=r(1),f=r(5),p=r(8),g=r(3);const v=({core:e,getServiceSettings:t},n)=>class VegaVisualization{constructor(e,t){u()(this,"dataPlugin",Object(c.a)()),u()(this,"vegaView",null),u()(this,"vegaStateRestorer",(({omitSignals:e=["width","height","padding","autosize","background"],isActive:t=(()=>!0)}={})=>{let r;return{save:n=>{n&&t()&&(r={signals:Object(p.omit)(n.signals,e||[]),data:n.data})},restore:(e=!1)=>t()&&r?Object(p.omit)(r,e?void 0:"data"):null,clear:()=>{r=null}}})({isActive:()=>{var e,t;return Boolean(null===(e=this.vegaView)||void 0===e||null===(t=e._parser)||void 0===t?void 0:t.restoreSignalValuesOnRefresh)}})),this.el=e,this.fireEvent=t}async render(e){const{toasts:t}=Object(c.f)();if(e||this.vegaView)try{await this._render(e)}catch(e){this.vegaView?this.vegaView.onError(e):t.addError(e,{title:g.i18n.translate("visTypeVega.visualization.renderErrorTitle",{defaultMessage:"Vega error"})})}else t.addWarning(g.i18n.translate("visTypeVega.visualization.unableToRenderWithoutDataWarningMessage",{defaultMessage:"Unable to render without data"}))}async _render(i){if(i){var a,o;null===(a=i.searchAPI.inspectorAdapters)||void 0===a||a.vega.clearError(),this.vegaView&&(await this.vegaView.destroy(),this.vegaView=null);const s=await t(),{filterManager:u}=this.dataPlugin.query,{timefilter:c}=this.dataPlugin.query.timefilter,l={externalUrl:e.http.externalUrl,parentEl:this.el,fireEvent:this.fireEvent,vegaStateRestorer:this.vegaStateRestorer,vegaParser:i,serviceSettings:s,filterManager:u,timefilter:c,renderMode:n};if(i.useMap){const{VegaMapView:e}=await Promise.all([r.e(0),r.e(4)]).then(r.bind(null,163));this.vegaView=new e(l)}else{const{VegaView:e}=await Promise.all([r.e(0),r.e(8)]).then(r.bind(null,162));this.vegaView=new e(l)}await(null===(o=this.vegaView)||void 0===o?void 0:o.init())}}async resize(e){var t;return null===(t=this.vegaView)||void 0===t?void 0:t.resize(e)}destroy(){var e;this.vegaStateRestorer.clear(),null===(e=this.vegaView)||void 0===e||e.destroy()}};r(74);var h=r(0);const m=({visData:e,fireEvent:t,renderComplete:r,deps:n,renderMode:i})=>{const a=Object(d.useRef)(null),o=Object(d.useRef)(!1),s=Object(d.useRef)(null);Object(d.useEffect)((()=>{if(a.current){const e=v(n,i);s.current=new e(a.current,t)}return()=>{var e;null===(e=s.current)||void 0===e||e.destroy(),s.current=null}}),[n,t,i]),Object(d.useEffect)((()=>{s.current&&(async t=>{await t.render(e),o.current=!0,r()})(s.current)}),[r,e]);const u=Object(d.useMemo)((()=>Object(p.throttle)((e=>{var t;null===(t=s.current)||void 0===t||t.resize(e)}),300,{leading:!1,trailing:!0})),[]),c=Object(d.useCallback)((e=>{o.current&&u(e)}),[u]);return Object(h.jsx)(f.EuiResizeObserver,{onResize:c},(e=>Object(h.jsx)("div",{className:"vgaVis__wrapper",ref:e},Object(h.jsx)("div",{ref:a}))))}},41:function(e,t,r){e.exports=r(22)(2567)},42:function(e,t,r){"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function o(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=r[u]||0,l="".concat(u," ").concat(c);r[u]=c+1;var d=o(l),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:l,updater:v(f,t),references:1}),n.push(l)}return n}function u(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,r){var n=r.css,i=r.media,a=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,g=0;function v(e,t){var r,n,i;if(t.singleton){var a=g++;r=p||(p=u(t)),n=d.bind(null,r,a,!1),i=d.bind(null,r,a,!0)}else r=u(t),n=f.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=o(r[n]);a[i].references--}for(var u=s(e,t),c=0;c<r.length;c++){var l=o(r[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}r=u}}}},43:function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(r=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&i[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},44:function(e,t,r){e.exports=r(22)(9)},46:function(e,t,r){e.exports=r(22)(23)},53:function(e,t,r){e.exports=r(22)(45)},54:function(e,t,r){"use strict";function n(e,t,r,i){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,n.prototype),a.expected=t,a.found=r,a.location=i,a.name="SyntaxError",a}function i(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source+":"+a.line+":"+a.column;if(n){var s=this.location.end,u=i("",a.line.toString().length),c=n[a.line-1],l=a.line===s.line?s.column:c.length+1;t+="\n --\x3e "+o+"\n"+u+" |\n"+a.line+" | "+c+"\n"+u+" | "+i("",a.column-1)+i("",l-a.column,"^")}else t+="\n at "+o}return t},n.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(o);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:n,parse:function(e,t){var r,i={},a=(t=void 0!==t?t:{}).grammarSource,o={start:de,Literal:je},s=de,u='"',c="\\",l="@kuery-cursor@",d=/^[\\"]/,f=/^[^"]/,p=/^[\\():<>"*{}]/,g=/^[0-9a-f]/i,v=/^[ \t\r\n\xA0]/,h=ae("(",!1),m=ae(")",!1),b=ae(":",!1),y=ae("{",!1),_=ae("}",!1),x=se("fieldName"),w=se("value"),V=se("OR"),j=ae("or",!0),A=se("AND"),O=ae("and",!0),S=se("NOT"),k=ae("not",!0),q=se("literal"),C=ae('"',!1),E=ae("\\",!1),T=oe(["\\",'"'],!1,!1),R=oe(['"'],!0,!1),N={type:"any"},M=ae("*",!1),I=ae("\\t",!1),L=ae("\\r",!1),P=ae("\\n",!1),z=oe(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),B=ae("u",!1),F=oe([["0","9"],["a","f"]],!1,!0),Q=ae("<=",!1),U=ae(">=",!1),$=ae("<",!1),W=ae(">",!1),D=se("whitespace"),H=oe([" ","\t","\r","\n","Â "],!1,!1),Z=ae("@kuery-cursor@",!1),G=function(e,t){return t},K=function(e,t){return t},J=function(){return Ie},X=function(t,r,n){const{start:i,end:a}=ce(ee,Y);return{type:"cursor",start:i.offset,end:a.offset-r.length,prefix:t.join(""),suffix:n.join(""),text:e.substring(ee,Y).replace(r,"")}},Y=0,ee=0,te=[{line:1,column:1}],re=0,ne=[],ie=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function ae(e,t){return{type:"literal",text:e,ignoreCase:t}}function oe(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function se(e){return{type:"other",description:e}}function ue(t){var r,n=te[t];if(n)return n;for(r=t-1;!te[r];)r--;for(n={line:(n=te[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return te[t]=n,n}function ce(e,t){var r=ue(e),n=ue(t);return{source:a,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function le(e){Y<re||(Y>re&&(re=Y,ne=[]),ne.push(e))}function de(){var e,t,r,n,a,o;for(e=Y,t=[],r=Ne();r!==i;)t.push(r),r=Ne();return(r=fe())===i&&(r=null),(n=qe())!==i?(ee=e,a=r,e="cursor"===(o=n).type?{...o,suggestionTypes:["conjunction"]}:null!==a?a:ze.function.buildNode("is","*","*")):(Y=e,e=i),e}function fe(){var e,t,r,n,a;if(e=Y,(t=pe())!==i){if(r=[],n=Y,xe()!==i&&(a=pe())!==i?(ee=n,n=G(0,a)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,xe()!==i&&(a=pe())!==i?(ee=n,n=G(0,a)):(Y=n,n=i);else r=i;r!==i?(ee=e,e=function(e,t){const r=[e,...t];return Ie&&r.find((e=>"cursor"===e.type))||Be("or",r)}(t,r)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=pe()),e}function pe(){var e,t,r,n,a;if(e=Y,(t=ge())!==i){if(r=[],n=Y,we()!==i&&(a=ge())!==i?(ee=n,n=G(0,a)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,we()!==i&&(a=ge())!==i?(ee=n,n=G(0,a)):(Y=n,n=i);else r=i;r!==i?(ee=e,e=function(e,t){const r=[e,...t];return Ie&&r.find((e=>"cursor"===e.type))||Be("and",r)}(t,r)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=ge()),e}function ge(){var e,t,r;return e=Y,Ve()!==i&&(t=ve())!==i?(ee=e,e="cursor"===(r=t).type?r:Be("not",[r])):(Y=e,e=i),e===i&&(e=ve()),e}function ve(){var t,r,n,a,o,s,u,c;if(t=Y,40===e.charCodeAt(Y)?(r="(",Y++):(r=i,0===ie&&le(h)),r!==i){for(n=[],a=Ne();a!==i;)n.push(a),a=Ne();(a=fe())!==i&&(o=qe())!==i?(41===e.charCodeAt(Y)?(s=")",Y++):(s=i,0===ie&&le(m)),s!==i?(ee=t,u=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:u):(Y=t,t=i)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=function(){var t,r,n,a,o,s,u,c,l,d;if(t=Y,(r=he())!==i){for(n=[],a=Ne();a!==i;)n.push(a),a=Ne();if(58===e.charCodeAt(Y)?(a=":",Y++):(a=i,0===ie&&le(b)),a!==i){for(o=[],s=Ne();s!==i;)o.push(s),s=Ne();if(123===e.charCodeAt(Y)?(s="{",Y++):(s=i,0===ie&&le(y)),s!==i){for(u=[],c=Ne();c!==i;)u.push(c),c=Ne();(c=fe())!==i&&(l=qe())!==i?(125===e.charCodeAt(Y)?(d="}",Y++):(d=i,0===ie&&le(_)),d!==i?(ee=t,t=function(e,t,r){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===r.type?{...r,suggestionTypes:["conjunction"]}:Be("nested",[e,t])}(r,c,l)):(Y=t,t=i)):(Y=t,t=i)}else Y=t,t=i}else Y=t,t=i}else Y=t,t=i;return t===i&&(t=function(){var t;return t=function(){var t,r,n,a,o,s,u,c,l;if(t=Y,(r=he())!==i){for(n=[],a=Ne();a!==i;)n.push(a),a=Ne();if(a=function(){var t,r;return t=Y,"<="===e.substr(Y,2)?(r="<=",Y+=2):(r=i,0===ie&&le(Q)),r!==i&&(ee=t,r="lte"),(t=r)===i&&(t=Y,">="===e.substr(Y,2)?(r=">=",Y+=2):(r=i,0===ie&&le(U)),r!==i&&(ee=t,r="gte"),(t=r)===i&&(t=Y,60===e.charCodeAt(Y)?(r="<",Y++):(r=i,0===ie&&le($)),r!==i&&(ee=t,r="lt"),(t=r)===i&&(t=Y,62===e.charCodeAt(Y)?(r=">",Y++):(r=i,0===ie&&le(W)),r!==i&&(ee=t,r="gt"),t=r))),t}(),a!==i){for(o=[],s=Ne();s!==i;)o.push(s),s=Ne();(s=je())!==i?(ee=t,u=r,c=a,t="cursor"===(l=s).type?{...l,suggestionTypes:["conjunction"]}:Be("range",[u,c,l])):(Y=t,t=i)}else Y=t,t=i}else Y=t,t=i;return t}(),t===i&&(t=function(){var t,r,n,a,o,s,u,c;if(t=Y,(r=he())!==i){for(n=[],a=Ne();a!==i;)n.push(a),a=Ne();if(58===e.charCodeAt(Y)?(a=":",Y++):(a=i,0===ie&&le(b)),a!==i){for(o=[],s=Ne();s!==i;)o.push(s),s=Ne();(s=me())!==i?(ee=t,u=r,t="cursor"===(c=s).type?{...c,fieldName:u.value,suggestionTypes:["value","conjunction"]}:c(u)):(Y=t,t=i)}else Y=t,t=i}else Y=t,t=i;return t}(),t===i&&(t=function(){var e,t;return e=Y,(t=_e())!==i&&(ee=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Fe(null))}(t)),t}())),t}()),t}()),t}function he(){var e;return ie++,e=je(),ie--,e===i&&0===ie&&le(x),e}function me(){var t,r,n,a,o,s,u,c;if(t=Y,40===e.charCodeAt(Y)?(r="(",Y++):(r=i,0===ie&&le(h)),r!==i){for(n=[],a=Ne();a!==i;)n.push(a),a=Ne();a=function(){var e,t,r,n,a;if(e=Y,(t=be())!==i){if(r=[],n=Y,xe()!==i&&(a=be())!==i?(ee=n,n=K(0,a)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,xe()!==i&&(a=be())!==i?(ee=n,n=K(0,a)):(Y=n,n=i);else r=i;r!==i?(ee=e,e=function(e,t){const r=[e,...t],n=Ie&&r.find((e=>"cursor"===e.type));return n?{...n,suggestionTypes:["value"]}:e=>Be("or",r.map((t=>t(e))))}(t,r)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=be()),e}(),a!==i&&(o=qe())!==i?(41===e.charCodeAt(Y)?(s=")",Y++):(s=i,0===ie&&le(m)),s!==i?(ee=t,u=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:u):(Y=t,t=i)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=_e()),t}function be(){var e,t,r,n,a;if(e=Y,(t=ye())!==i){if(r=[],n=Y,we()!==i&&(a=ye())!==i?(ee=n,n=K(0,a)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,we()!==i&&(a=ye())!==i?(ee=n,n=K(0,a)):(Y=n,n=i);else r=i;r!==i?(ee=e,e=function(e,t){const r=[e,...t],n=Ie&&r.find((e=>"cursor"===e.type));return n?{...n,suggestionTypes:["value"]}:e=>Be("and",r.map((t=>t(e))))}(t,r)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=ye()),e}function ye(){var e,t,r;return e=Y,Ve()!==i&&(t=me())!==i?(ee=e,e="cursor"===(r=t).type?{...list,suggestionTypes:["value"]}:e=>Be("not",[r(e)])):(Y=e,e=i),e===i&&(e=me()),e}function _e(){var e,t;return ie++,e=Y,(t=Ae())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;const t=Fe(!0);return r=>Be("is",[r,e,t])}(t)),(e=t)===i&&(e=Y,(t=Se())!==i&&(ee=e,t=function(e){if("cursor"===e.type)return e;!Pe&&"wildcard"===e.type&&ze.wildcard.hasLeadingWildcard(e)&&function(e,t){throw function(e,t){return new n("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,t)}(0,t=void 0!==t?t:ce(ee,Y))}();const t=Fe(!1);return r=>Be("is",[r,e,t])}(t)),e=t),ie--,e===i&&(t=i,0===ie&&le(w)),e}function xe(){var t,r,n,a,o;if(ie++,t=Y,r=[],(n=Ne())!==i)for(;n!==i;)r.push(n),n=Ne();else r=i;if(r!==i)if("or"===e.substr(Y,2).toLowerCase()?(n=e.substr(Y,2),Y+=2):(n=i,0===ie&&le(j)),n!==i){if(a=[],(o=Ne())!==i)for(;o!==i;)a.push(o),o=Ne();else a=i;a!==i?t=r=[r,n,a]:(Y=t,t=i)}else Y=t,t=i;else Y=t,t=i;return ie--,t===i&&(r=i,0===ie&&le(V)),t}function we(){var t,r,n,a,o;if(ie++,t=Y,r=[],(n=Ne())!==i)for(;n!==i;)r.push(n),n=Ne();else r=i;if(r!==i)if("and"===e.substr(Y,3).toLowerCase()?(n=e.substr(Y,3),Y+=3):(n=i,0===ie&&le(O)),n!==i){if(a=[],(o=Ne())!==i)for(;o!==i;)a.push(o),o=Ne();else a=i;a!==i?t=r=[r,n,a]:(Y=t,t=i)}else Y=t,t=i;else Y=t,t=i;return ie--,t===i&&(r=i,0===ie&&le(A)),t}function Ve(){var t,r,n,a;if(ie++,t=Y,"not"===e.substr(Y,3).toLowerCase()?(r=e.substr(Y,3),Y+=3):(r=i,0===ie&&le(k)),r!==i){if(n=[],(a=Ne())!==i)for(;a!==i;)n.push(a),a=Ne();else n=i;n!==i?t=r=[r,n]:(Y=t,t=i)}else Y=t,t=i;return ie--,t===i&&(r=i,0===ie&&le(S)),t}function je(){var e;return ie++,(e=Ae())===i&&(e=Se()),ie--,e===i&&0===ie&&le(q),e}function Ae(){var t,r,n,a,o,s,c;if(t=Y,ee=Y,(r=(r=J())?void 0:i)!==i)if(34===e.charCodeAt(Y)?(n=u,Y++):(n=i,0===ie&&le(C)),n!==i){for(a=[],o=Oe();o!==i;)a.push(o),o=Oe();if((o=Me())!==i){for(s=[],c=Oe();c!==i;)s.push(c),c=Oe();34===e.charCodeAt(Y)?(c=u,Y++):(c=i,0===ie&&le(C)),c!==i?(ee=t,t=X(a,o,s)):(Y=t,t=i)}else Y=t,t=i}else Y=t,t=i;else Y=t,t=i;if(t===i)if(t=Y,34===e.charCodeAt(Y)?(r=u,Y++):(r=i,0===ie&&le(C)),r!==i){for(n=[],a=Oe();a!==i;)n.push(a),a=Oe();34===e.charCodeAt(Y)?(a=u,Y++):(a=i,0===ie&&le(C)),a!==i?(ee=t,t=Fe(n.join(""))):(Y=t,t=i)}else Y=t,t=i;return t}function Oe(){var t,r,n;return(t=Ce())===i&&(t=Te())===i&&(t=Y,92===e.charCodeAt(Y)?(r=c,Y++):(r=i,0===ie&&le(E)),r!==i?(d.test(e.charAt(Y))?(n=e.charAt(Y),Y++):(n=i,0===ie&&le(T)),n!==i?(ee=t,t=n):(Y=t,t=i)):(Y=t,t=i),t===i&&(t=Y,r=Y,ie++,n=Me(),ie--,n===i?r=void 0:(Y=r,r=i),r!==i?(f.test(e.charAt(Y))?(n=e.charAt(Y),Y++):(n=i,0===ie&&le(R)),n!==i?(ee=t,t=n):(Y=t,t=i)):(Y=t,t=i))),t}function Se(){var e,t,r,n,a,o;if(e=Y,ee=Y,(t=(t=J())?void 0:i)!==i){for(r=[],n=ke();n!==i;)r.push(n),n=ke();if((n=Me())!==i){for(a=[],o=ke();o!==i;)a.push(o),o=ke();ee=e,e=X(r,n,a)}else Y=e,e=i}else Y=e,e=i;if(e===i){if(e=Y,t=[],(r=ke())!==i)for(;r!==i;)t.push(r),r=ke();else t=i;t!==i&&(ee=e,t=function(e){const t=e.join("").trim();return"null"===t?Fe(null):"true"===t?Fe(!0):"false"===t?Fe(!1):e.includes(Ue)?Qe(t):Fe(t)}(t)),e=t}return e}function ke(){var t,r,n,a,o;return(t=Ce())===i&&(t=function(){var t,r,n;return t=Y,92===e.charCodeAt(Y)?(r=c,Y++):(r=i,0===ie&&le(E)),r!==i&&(n=Ee())!==i?(ee=t,t=n):(Y=t,t=i),t}(),t===i&&(t=Te())===i&&(t=function(){var t,r,n;return t=Y,92===e.charCodeAt(Y)?(r=c,Y++):(r=i,0===ie&&le(E)),r!==i?("or"===e.substr(Y,2).toLowerCase()?(n=e.substr(Y,2),Y+=2):(n=i,0===ie&&le(j)),n===i&&("and"===e.substr(Y,3).toLowerCase()?(n=e.substr(Y,3),Y+=3):(n=i,0===ie&&le(O)),n===i&&("not"===e.substr(Y,3).toLowerCase()?(n=e.substr(Y,3),Y+=3):(n=i,0===ie&&le(k)))),n!==i?(ee=t,t=n):(Y=t,t=i)):(Y=t,t=i),t}(),t===i&&(t=function(){var t,r;return t=Y,42===e.charCodeAt(Y)?(r="*",Y++):(r=i,0===ie&&le(M)),r!==i&&(ee=t,r=Ue),r}(),t===i&&(t=Y,r=Y,ie++,n=Ee(),ie--,n===i?r=void 0:(Y=r,r=i),r!==i?(n=Y,ie++,a=function(){var e;return(e=xe())===i&&(e=we())===i&&(e=Ve()),e}(),ie--,a===i?n=void 0:(Y=n,n=i),n!==i?(a=Y,ie++,o=Me(),ie--,o===i?a=void 0:(Y=a,a=i),a!==i?(e.length>Y?(o=e.charAt(Y),Y++):(o=i,0===ie&&le(N)),o!==i?(ee=t,t=o):(Y=t,t=i)):(Y=t,t=i)):(Y=t,t=i)):(Y=t,t=i))))),t}function qe(){var e,t,r,n,a,o;if(e=Y,ee=Y,(t=(t=J())?void 0:i)!==i){for(r=[],n=Ne();n!==i;)r.push(n),n=Ne();if((n=Me())!==i){for(a=[],o=Ne();o!==i;)a.push(o),o=Ne();ee=e,e=X(r,n,a)}else Y=e,e=i}else Y=e,e=i;if(e===i)for(e=[],t=Ne();t!==i;)e.push(t),t=Ne();return e}function Ce(){var t,r;return t=Y,"\\t"===e.substr(Y,2)?(r="\\t",Y+=2):(r=i,0===ie&&le(I)),r!==i&&(ee=t,r="\t"),(t=r)===i&&(t=Y,"\\r"===e.substr(Y,2)?(r="\\r",Y+=2):(r=i,0===ie&&le(L)),r!==i&&(ee=t,r="\r"),(t=r)===i&&(t=Y,"\\n"===e.substr(Y,2)?(r="\\n",Y+=2):(r=i,0===ie&&le(P)),r!==i&&(ee=t,r="\n"),t=r)),t}function Ee(){var t;return p.test(e.charAt(Y))?(t=e.charAt(Y),Y++):(t=i,0===ie&&le(z)),t}function Te(){var t,r,n;return t=Y,92===e.charCodeAt(Y)?(r=c,Y++):(r=i,0===ie&&le(E)),r!==i?(n=function(){var t,r,n,a,o,s,u,c,l;return t=Y,117===e.charCodeAt(Y)?(r="u",Y++):(r=i,0===ie&&le(B)),r!==i?(n=Y,a=Y,(o=Re())!==i&&(s=Re())!==i&&(u=Re())!==i&&(c=Re())!==i?a=o=[o,s,u,c]:(Y=a,a=i),(n=a!==i?e.substring(n,Y):a)!==i?(ee=t,l=n,t=String.fromCharCode(parseInt(l,16))):(Y=t,t=i)):(Y=t,t=i),t}(),n!==i?(ee=t,t=n):(Y=t,t=i)):(Y=t,t=i),t}function Re(){var t;return g.test(e.charAt(Y))?(t=e.charAt(Y),Y++):(t=i,0===ie&&le(F)),t}function Ne(){var t;return ie++,v.test(e.charAt(Y))?(t=e.charAt(Y),Y++):(t=i,0===ie&&le(H)),ie--,t===i&&0===ie&&le(D),t}function Me(){var t,r;return t=Y,ee=Y,(J()?void 0:i)!==i?(e.substr(Y,14)===l?(r=l,Y+=14):(r=i,0===ie&&le(Z)),r!==i?(ee=t,t=Le):(Y=t,t=i)):(Y=t,t=i),t}const{parseCursor:Ie,cursorSymbol:Le,allowLeadingWildcards:Pe=!0,helpers:{nodeTypes:ze}}=t,Be=ze.function.buildNodeWithArgumentNodes,Fe=ze.literal.buildNode,Qe=ze.wildcard.buildNode,{wildcardSymbol:Ue}=ze.wildcard;if((r=s())!==i&&Y===e.length)return r;throw r!==i&&Y<e.length&&le({type:"end"}),$e=ne,We=re<e.length?e.charAt(re):null,De=re<e.length?ce(re,re+1):ce(re,re),new n(n.buildMessage($e,We),$e,We,De);var $e,We,De}}},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return et})),r.d(t,"b",(function(){return N})),r.d(t,"c",(function(){return V}));var n={};r.r(n),r.d(n,"buildNode",(function(){return Q})),r.d(n,"toElasticsearchQuery",(function(){return U}));var i={};r.r(i),r.d(i,"wildcardSymbol",(function(){return $})),r.d(i,"buildNode",(function(){return H})),r.d(i,"test",(function(){return Z})),r.d(i,"toElasticsearchQuery",(function(){return G})),r.d(i,"toQueryStringQuery",(function(){return K})),r.d(i,"hasLeadingWildcard",(function(){return J}));var a={};r.r(a),r.d(a,"buildNodeParams",(function(){return ie})),r.d(a,"toElasticsearchQuery",(function(){return ae}));var o={};r.r(o),r.d(o,"buildNodeParams",(function(){return oe})),r.d(o,"toElasticsearchQuery",(function(){return se}));var s={};r.r(s),r.d(s,"buildNodeParams",(function(){return ue})),r.d(s,"toElasticsearchQuery",(function(){return ce}));var u={};r.r(u),r.d(u,"buildNodeParams",(function(){return le})),r.d(u,"toElasticsearchQuery",(function(){return de}));var c={};r.r(c),r.d(c,"buildNodeParams",(function(){return fe})),r.d(c,"toElasticsearchQuery",(function(){return pe}));var l={};r.r(l),r.d(l,"buildNodeParams",(function(){return ge})),r.d(l,"toElasticsearchQuery",(function(){return ve}));var d={};r.r(d),r.d(d,"buildNodeParams",(function(){return he})),r.d(d,"toElasticsearchQuery",(function(){return me}));var f={};r.r(f),r.d(f,"buildNode",(function(){return ye})),r.d(f,"buildNodeWithArgumentNodes",(function(){return _e})),r.d(f,"toElasticsearchQuery",(function(){return xe}));var p,g,v=r(9),h=r.n(v),m=r(41),b=r.n(m),y=r(8),_=r.n(y),x=function(e,t,r){var n,i,a=Object(y.omit)(e,r);return t.index&&(a.index=null===(n=e.meta)||void 0===n?void 0:n.index),t.negate&&(a.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(a.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(a.alias=null===(i=e.meta)||void 0===i?void 0:i.alias),a},w=function(e,t,r){return Object(y.map)(e,(function(e){return x(e,t,r)}))},V=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var n={},i=["$$hashKey","meta"];return(n=Object(y.defaults)(r||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||i.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(y.isEqual)(w(e,n,i),w(t,n,i)):!Array.isArray(e)&&!Array.isArray(t)&&Object(y.isEqual)(x(e,n,i),x(t,n,i))},j=r(53),A=r.n(j),O=function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t},S=function(e,t){var r=O(e,t);return{script:{source:k(e),lang:e.lang,params:{value:r}}}},k=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var q={gt:">",gte:">=",lte:"<=",lt:"<"},C={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},E={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},T=function(e,t){var r=Object(y.mapValues)(Object(y.pickBy)(t,(function(e,t){return t in q})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),n=Object(y.map)(r,(function(t,r){return"("+e.script+")"+Object(y.get)(q,r)+r})).join(" && ");if("painless"===e.lang){var i="date"===e.type?E:C,a=Object(y.reduce)(r,(function(e,t,r){return e.concat(Object(y.get)(i,r))}),[]).join(" "),o=Object(y.map)(r,(function(t,r){return"".concat(r,"(() -> { ").concat(e.script," }, params.").concat(r,")")})).join(" && ");n="".concat(a).concat(o)}return{script:{source:n,params:r,lang:e.lang}}},R=function(e){return function(e){return Object(y.has)(e,"query.exists")}(e)?function(e){return e.query.exists&&e.query.exists.field}(e):function(e){var t=Object(y.has)(e,"query.match_phrase"),r=Object(y.get)(e,"query.match",[]),n=void 0!==Object.values(r).find((function(e){return"phrase"===e.type}));return t||n}(e)?function(e){var t,r,n=null!==(t=null!==(r=e.query.match_phrase)&&void 0!==r?r:e.query.match)&&void 0!==t?t:{};return Object.keys(n)[0]}(e):function(e){var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.type)===p.PHRASES}(e)?function(e){return e.meta.key}(e):function(e){return Object(y.has)(e,"query.range")}(e)?function(e){return e.query.range&&Object.keys(e.query.range)[0]}(e):void 0},N=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{query:e,meta:b()({index:t,alias:r},n)}},M=function(e){return Object(y.get)(e,"meta.disabled",!1)},I=function(e){return Object(y.omit)(e,["meta","$state"])};function L(e,t){if(function(e){var t,r,n=Object.keys(null!==(t=e.match||(null===(r=e.query)||void 0===r?void 0:r.match))&&void 0!==t?t:{})[0];return Boolean(n&&("phrase"===Object(y.get)(e,["query","match",n,"type"])||"phrase"===Object(y.get)(e,["match",n,"type"])))}(e)){var r=e.match||e.query.match,n=Object.keys(r)[0],i=Object(y.get)(r,[n]),a=i.query;if(t){var o=t.fields.find((function(e){return e.name===n}));o&&(a=O(o,i.query))}return{meta:e.meta,$state:e.$state,query:{match_phrase:h()({},n,Object(y.omit)(b()(b()({},i),{},{query:a}),"type"))}}}return e.query?e=Object(y.pick)(e,["meta","query","$state"]):e.query={},e.exists&&(e.query.exists=e.exists,delete e.exists),e.range&&(e.query.range=e.range,delete e.range),e.match_all&&(e.query.match_all=e.match_all,delete e.match_all),Object.keys(e).forEach((function(t){"meta"!==t&&"query"!==t&&"$state"!==t&&(e.query[t]=e[t],delete e[t])})),e}var P=r(46),z=r.n(P),B=r(44),F=r.n(B);function Q(e){return{type:"literal",value:e}}function U(e){return e.value}var $="@kuery-wildcard@";function W(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function H(e){return e.includes($)?{type:"wildcard",value:e}:Fe(e)}function Z(e,t){var r=e.value.split($).map(W).join("[\\s\\S]*");return new RegExp("^".concat(r,"$")).test(t)}function G(e){return e.value.split($).join("*")}function K(e){return e.value.split($).map(D).join("*")}function J(e){var t=e.value;return t.startsWith($)&&t.replace($,"").length>0}function X(e,t){if(!t)return[];if("literal"===e.type){var r=U(e),n=t.fields.find((function(e){return e.name===r}));return n?[n]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Z(e,t.name)})):void 0}var Y=r(34),ee=r.n(Y);function te(e){var t=ee.a.tz.guess();return"Browser"===e?t:e}function re(e){return function(e){var t,r=null==e?void 0:e.subType;return!(null==r||null===(t=r.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function ne(e,t,r){var n=b()(b()({},e),{},{value:r?"".concat(r,".").concat(e.value):e.value});if(!t||"wildcard"===n.type&&!r)return n;var i=X(n,t).reduce((function(e,t){var n=re(t),i=null==n?void 0:n.nested.path;return r&&!i?[].concat(z()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(r,'" in the KQL expression.')]):i&&!r?[].concat(z()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==r?[].concat(z()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==n?void 0:n.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return n}function ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(y.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(y.isUndefined)(t))throw new Error("value is a required argument");var n="string"==typeof e?Fe(e):Q(e),i="string"==typeof t?Fe(t):Q(t),a=Q(r);return{arguments:[n,i,a]}}function ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,3),a=i[0],o=i[1],s=i[2],u="wildcard"===o.type&&o.value===$,c="wildcard"===a.type&&a.value===$,l=u&&c;if(l)return{match_all:{}};var d=ne(a,t,null!=n&&n.nested?n.nested.path:void 0),f=Object(y.isUndefined)(o)?o:Ue(o),p=s.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===o.type?{query_string:{query:K(o)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?X(d,t):[];if(g&&0===g.length&&g.push({name:Ue(d),scripted:!1,type:""}),u&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var v=g.reduce((function(e,t){var i=function(e){var r=re(t);return"wildcard"!==d.type||null==r||!r.nested||null!=n&&n.nested?e:{nested:{path:r.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(u)return[].concat(z()(e),[i({exists:{field:t.name}})]);if("wildcard"===o.type)return[].concat(z()(e),[i({query_string:{fields:[t.name],query:K(o)}})]);if("date"===t.type){var a=r.dateFormatTZ?{time_zone:te(r.dateFormatTZ)}:{};return[].concat(z()(e),[i({range:h()({},t.name,b()({gte:f,lte:f},a))})])}var s="phrase"===p?"match_phrase":"match";return[].concat(z()(e),[i(h()({},s,h()({},t.name,f)))])}if(!u)return[].concat(z()(e),[{script:b()({},S(t,f))}])}),[]);return{bool:{should:v||[],minimum_should_match:1}}}function oe(e){return{arguments:e}}function se(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.filtersInMustClause,a=e.arguments||[],o=i?"must":"filter";return{bool:h()({},o,a.map((function(e){return Ue(e,t,r,n)})))}}function ue(e){return{arguments:e}}function ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return Ue(e,t,r,n)})),minimum_should_match:1}}}function le(e){return{arguments:[e]}}function de(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,1),a=i[0];return{bool:{must_not:Ue(a,t,r,n)}}}function fe(e,t,r){return{arguments:[Fe(e),t,we.literal.buildNode(r)]}}function pe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,3),a=i[0],o=i[1],s=i[2],u=ne(a,t,null!=n&&n.nested?n.nested.path:void 0),c=t?X(u,t):[];c&&0===c.length&&c.push({name:Ue(u),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var r=re(e);return"wildcard"!==u.type||null==r||!r.nested||n.nested?t:{nested:{path:r.nested.path,query:t,score_mode:"none"}}},i=h()({},o,Ue(s));if(e.scripted)return{script:T(e,i)};if("date"===e.type){var a=r.dateFormatTZ?{time_zone:te(r.dateFormatTZ)}:{};return t({range:h()({},e.name,b()(b()({},i),a))})}return t({range:h()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function ge(e){return{arguments:[Q(e)]}}function ve(e,t){var r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=F()(e.arguments,1),a=i[0],o=b()(b()({},a),{},{value:null!=n&&n.nested?"".concat(n.nested.path,".").concat(a.value):a.value}),s=U(o),u=null==t||null===(r=t.fields)||void 0===r?void 0:r.find((function(e){return e.name===s}));if(null!=u&&u.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:s}}}function he(e,t){return{arguments:["string"==typeof e?Fe(e):Q(e),t]}}function me(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=F()(e.arguments,2),o=a[0],s=a[1],u=Ue(o),c=null!=i&&null!==(r=i.nested)&&void 0!==r&&r.path?"".concat(i.nested.path,".").concat(u):u;return{nested:{path:c,query:Ue(s,t,n,b()(b()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var be={is:a,and:o,or:s,not:u,range:c,exists:l,nested:d};function ye(e){var t=be[e];if(_.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return b()({type:"function",function:e},t.buildNodeParams.apply(t,n))}function _e(e,t){if(_.a.isUndefined(be[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function xe(e,t,r,n){return be[e.function].toElasticsearchQuery(e,t,r,n)}var we={function:f,literal:n,wildcard:i},Ve=r(68),je=r.n(Ve),Ae=r(69),Oe=r.n(Ae),Se=r(70),ke=r.n(Se),qe=r(71),Ce=r.n(qe),Ee=r(72),Te=r.n(Ee),Re=r(73),Ne=r.n(Re),Me=r(3),Ie=Me.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Le={fieldName:Me.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:Me.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:Me.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:Me.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Pe=function(e){Ce()(r,e);var t=Te()(r);function r(e,n){var i;Oe()(this,r);var a=e.message;if(e.expected){var o=e.expected.map((function(e){var t,r="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Le[r]||r})),s=Object(y.uniq)(o).filter((function(e){return void 0!==e})).sort().join(", ");a=Me.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:s,foundInput:e.found?'"'.concat(e.found,'"'):Ie}})}var u=[a,n,Object(y.repeat)("-",e.location.start.offset)+"^"].join("\n");return i=t.call(this,u),h()(ke()(i),"shortMessage",void 0),i.name="KQLSyntaxError",i.shortMessage=a,i}return je()(r)}(Ne()(Error)),ze=r(54),Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return r(e,b()(b()({},t),{},{helpers:{nodeTypes:we}}))},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be(e,b()(b()({},t),{},{startRule:"Literal"}),ze.parse)},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return Be(e,t,ze.parse)}catch(t){throw"SyntaxError"===t.name?new Pe(t,e):t}},Ue=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!we[t.type])return e(we.function.buildNode("and",[]),r);var a=we[t.type];return a.toElasticsearchQuery(t,r,n,i)};Object(y.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var $e=function(){return Ue.apply(void 0,arguments)};function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.map((function(e){return Qe(e.query,{allowLeadingWildcards:r})}));return De(e,a,{dateFormatTZ:n,filtersInMustClause:i})}function De(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=we.function.buildNode("and",t),i=$e(n,e,r);return Object.assign({must:[],filter:[],should:[],must_not:[]},i.bool)}function He(e,t){var r,n;return null===(r=e.meta)||void 0===r||!r.key||!t||("custom"===(null===(n=e.meta)||void 0===n?void 0:n.type)?e.meta.index===t.id:t.fields.some((function(t){return t.name===e.meta.key})))}var Ze=function(e,t){if(!t)return e;var r=R(e);if(!r)return e;var n=t.fields.find((function(e){return e.name===r})),i=n&&re(n);if(!i)return e;var a=I(e);return{meta:e.meta,query:{nested:{path:i.nested.path,query:a.query||a}}}},Ge=function(e){return function(t){return Object(y.isUndefined)(t.meta)||Object(y.isUndefined)(t.meta.negate)?!e:t.meta&&t.meta.negate===e}},Ke=function(e){return e.query||e},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.filter((function(e){return e&&!M(e)}));var n=function(n){return e.filter((function(e){return!!e})).filter(Ge(n)).filter((function(e){return!r||He(e,t)})).map((function(e){return L(e,t)})).map((function(e){return Ze(e,t)})).map(I).map(Ke)};return{must:[],filter:n(!1),should:[],must_not:n(!0)}};function Xe(e,t,r){return{must:(e||[]).map((function(e){var n=function(e){return Object(y.isString)(e)?""===e.trim()?{match_all:{}}:{query_string:{query:e}}:e}(e.query);return function(e,t,r){return function(e){return Object(y.has)(e,"query_string.query")}(e)&&("string"==typeof t&&(t=JSON.parse(t)),Object(y.extend)(e.query_string,t),r&&Object(y.defaults)(e.query_string,{time_zone:te(r)})),e}(n,t,r)})),filter:[],should:[],must_not:[]}}function Ye(e){return e.filter((function(e){return!e||"object"!==A()(e)||!Object(y.isEqual)(e,{match_all:{}})}))}function et(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1};t=Array.isArray(t)?t:[t],r=Array.isArray(r)?r:[r];var i=t.filter((function(e){return Object(y.has)(e,"query")})),a=Object(y.groupBy)(i,"language"),o=We(e,a.kuery,n.allowLeadingWildcards,n.dateFormatTZ,n.filtersInMustClause),s=Xe(a.lucene,n.queryStringOptions,n.dateFormatTZ),u=Je(r,e,n.ignoreFilterIfFieldNotInIndex);return{bool:{must:Ye([].concat(z()(o.must),z()(s.must),z()(u.must))),filter:Ye([].concat(z()(o.filter),z()(s.filter),z()(u.filter))),should:Ye([].concat(z()(o.should),z()(s.should),z()(u.should))),must_not:[].concat(z()(o.must_not),z()(s.must_not),z()(u.must_not))}}}},68:function(e,t,r){e.exports=r(22)(15)},69:function(e,t,r){e.exports=r(22)(13)},70:function(e,t,r){e.exports=r(22)(4)},71:function(e,t,r){e.exports=r(22)(18)},72:function(e,t,r){e.exports=r(22)(2564)},73:function(e,t,r){e.exports=r(22)(2572)},74:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(75);case"v8light":return r(77)}},75:function(e,t,r){var n=r(42),i=r(76);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},76:function(e,t,r){(t=r(43)(!1)).push([e.i,".vgaVis__wrapper{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;flex:1 1 0;overflow:auto}.vgaVis__wrapper::-webkit-scrollbar{width:16px;height:16px}.vgaVis__wrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis__wrapper::-webkit-scrollbar-corner,.vgaVis__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis{display:flex;flex:1 1 100%;position:relative}.vgaVis--autoresize{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-width:100%;max-height:100%;overflow:auto}.vgaVis--autoresize::-webkit-scrollbar{width:16px;height:16px}.vgaVis--autoresize::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis--autoresize::-webkit-scrollbar-corner,.vgaVis--autoresize::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis--autoresize .vgaVis__view{overflow:hidden}.vgaVis__view{z-index:0;flex:1 1 100%;display:block}.vgaVis__view canvas{display:block}.vgaVis__view .vega-bindings{display:none !important}.vgaVis__controls{font-size:14px;font-size:1rem;line-height:1.71429rem;display:flex}.vgaVis__controls:not(:empty){padding:8px 0}.vgaVis__controls.vgaVis__controls--column{flex-direction:column}.vgaVis__controls.vgaVis__controls--row{flex-direction:row}.vgaVis__controls.vgaVis__controls--row>.vega-bind{flex-grow:1}.vgaVis__controls>.vega-bind .vega-bind-name{display:inline-block;width:104px}.vgaVis__controls>.vega-bind input[type='range']{width:120px;display:inline-block;vertical-align:middle}.vgaVis__controls>.vega-bind label{margin:0 0 0 8px}.vgaVis__controls>.vega-bind select{max-width:160px}.vgaVis__controls>.vega-bind .vega-bind-radio label{margin:0 8px 0 4px}.vgaVis__messages{position:absolute;top:0;width:100%;margin:auto;opacity:.8;z-index:1;list-style:none}.vgaVis__message{margin:8px}.vgaVis__message .vgaVis__messageCode{white-space:pre-wrap;padding:8px}.vgaVis__message--warn .vgaVis__messageCode{background-color:#493f22;color:#F3D371}.vgaVis__message--err .vgaVis__messageCode{background-color:#4a201e;color:#F86B63}.vgaVis__tooltip{max-width:100%;position:fixed}.vgaVis__tooltip h2{margin-bottom:8px}.vgaVis__tooltip--textTruncate td{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}.vgaVis__tooltip td{padding-top:4px;padding-bottom:4px}.vgaVis__tooltip td.key{max-width:160px;color:#535966;text-align:right;padding-right:4px}.vgaVis__tooltip td.value{max-width:240px;text-align:left}@media only screen and (max-width: 768px){.vgaVis__tooltip td.key{max-width:96px}.vgaVis__tooltip td.value{max-width:160px}}\n",""]),e.exports=t},77:function(e,t,r){var n=r(42),i=r(78);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},78:function(e,t,r){(t=r(43)(!1)).push([e.i,".vgaVis__wrapper{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;flex:1 1 0;overflow:auto}.vgaVis__wrapper::-webkit-scrollbar{width:16px;height:16px}.vgaVis__wrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis__wrapper::-webkit-scrollbar-corner,.vgaVis__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis{display:flex;flex:1 1 100%;position:relative}.vgaVis--autoresize{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-width:100%;max-height:100%;overflow:auto}.vgaVis--autoresize::-webkit-scrollbar{width:16px;height:16px}.vgaVis--autoresize::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.vgaVis--autoresize::-webkit-scrollbar-corner,.vgaVis--autoresize::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.vgaVis--autoresize .vgaVis__view{overflow:hidden}.vgaVis__view{z-index:0;flex:1 1 100%;display:block}.vgaVis__view canvas{display:block}.vgaVis__view .vega-bindings{display:none !important}.vgaVis__controls{font-size:14px;font-size:1rem;line-height:1.71429rem;display:flex}.vgaVis__controls:not(:empty){padding:8px 0}.vgaVis__controls.vgaVis__controls--column{flex-direction:column}.vgaVis__controls.vgaVis__controls--row{flex-direction:row}.vgaVis__controls.vgaVis__controls--row>.vega-bind{flex-grow:1}.vgaVis__controls>.vega-bind .vega-bind-name{display:inline-block;width:104px}.vgaVis__controls>.vega-bind input[type='range']{width:120px;display:inline-block;vertical-align:middle}.vgaVis__controls>.vega-bind label{margin:0 0 0 8px}.vgaVis__controls>.vega-bind select{max-width:160px}.vgaVis__controls>.vega-bind .vega-bind-radio label{margin:0 8px 0 4px}.vgaVis__messages{position:absolute;top:0;width:100%;margin:auto;opacity:.8;z-index:1;list-style:none}.vgaVis__message{margin:8px}.vgaVis__message .vgaVis__messageCode{white-space:pre-wrap;padding:8px}.vgaVis__message--warn .vgaVis__messageCode{background-color:#fff9e8;color:#8a6a0a}.vgaVis__message--err .vgaVis__messageCode{background-color:#f8e9e9;color:#BD271E}.vgaVis__tooltip{max-width:100%;position:fixed}.vgaVis__tooltip h2{margin-bottom:8px}.vgaVis__tooltip--textTruncate td{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}.vgaVis__tooltip td{padding-top:4px;padding-bottom:4px}.vgaVis__tooltip td.key{max-width:160px;color:#98A2B3;text-align:right;padding-right:4px}.vgaVis__tooltip td.value{max-width:240px;text-align:left}@media only screen and (max-width: 768px){.vgaVis__tooltip td.key{max-width:96px}.vgaVis__tooltip td.value{max-width:160px}}\n",""]),e.exports=t}}]);