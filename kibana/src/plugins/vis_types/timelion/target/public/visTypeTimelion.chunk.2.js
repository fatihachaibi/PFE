(window.visTypeTimelion_bundle_jsonpfunction=window.visTypeTimelion_bundle_jsonpfunction||[]).push([[2],{31:function(e,t,n){"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function a(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var c=e[o],s=t.base?c[0]+t.base:c[0],l=n[s]||0,u="".concat(s," ").concat(l);n[s]=l+1;var d=a(u),f={css:c[1],media:c[2],sourceMap:c[3]};-1!==d?(i[d].references++,i[d].updater(f)):i.push({identifier:u,updater:b(f,t),references:1}),r.push(u)}return r}function s(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,h=0;function b(e,t){var n,r,o;if(t.singleton){var i=h++;n=m||(m=s(t)),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=s(t),r=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var s=c(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=s}}}},32:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,o,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var c=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),s=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(s).concat([c]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=["#01A4A4","#C66","#D0D102","#616161","#00A1CB","#32742C","#F18D05","#113F8C","#61AE24","#D70060"]},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(3),o=n(23),i=n.n(o);const a={};[["ms","milliseconds","millisecond"],["s","seconds","second","sec"],["m","minutes","minute","min"],["h","hours","hour"],["d","days","day"],["w","weeks","week"],["M","months","month"],["quarter"],["y","years","year"]].forEach((e=>{const t=i.a.normalizeUnits(e[0]),n=i.a.duration(1,t).asMilliseconds();[].concat(t,e).forEach((e=>{a[e]=n}))}));const c=new RegExp("^(\\d+(?:\\.\\d*)?)?\\s*("+Object(r.keys)(a).join("|")+")$");function s(e){const t=e.match(c);if(t){if("M"===t[2]&&"1"!==t[1])throw new Error("Invalid interval. 1M is only valid monthly interval.");return parseFloat(t[1]||"1")*a[t[2]]}}function l(e,t,n,r,o){if("auto"!==r)return r;const i=function(e){switch(!0){case e<=500:return"100ms";case e<=5e3:return"1s";case e<=7500:return"5s";case e<=15e3:return"10s";case e<=45e3:return"30s";case e<=18e4:return"1m";case e<=45e4:return"5m";case e<=12e5:return"10m";case e<=27e5:return"30m";case e<=72e5:return"1h";case e<=216e5:return"3h";case e<=864e5:return"12h";case e<=6048e5:return"24h";case e<=18144e5:return"1w";case e<36288e5:return"30d";default:return"1y"}}((t-e)/n),a=s(i),c=s(o);return void 0!==a&&void 0!==c&&a<c?o:i}const u="MMMM Do YYYY, HH:mm:ss.SSS"},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(23),o=n.n(r),i=n(5);function a(e){return t=>function(t){const n=t.match(/(\d+)(ms|s|m|h|d|w|M|y|)/);if(null===n||null===n[1]||null===n[2])throw new Error(i.i18n.translate("timelion.panels.timechart.unknownIntervalErrorMessage",{defaultMessage:"Unknown interval"}));const r=o.a.duration(Number(n[1]),n[2]),a=e.get("dateFormat:scaled");for(let e=a.length-1;e>=0;e--){const t=a[e];if(!t[0]||r>=o.a.duration(t[0]))return t[1]}return e.get("dateFormat")}(t)}},59:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(60);case"v8light":return n(62)}},60:function(e,t,n){var r=n(31),o=n(61);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},61:function(e,t,n){(t=n(32)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.85714rem;line-height:1.14286rem;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#DFE5EF;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#98A2B3}.timChart__legendCaption{color:#DFE5EF;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},62:function(e,t,n){var r=n(31),o=n(63);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},63:function(e,t,n){(t=n(32)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.85714rem;line-height:1.14286rem;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#343741;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#69707D}.timChart__legendCaption{color:#343741;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},66:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(4),o=n(25),i=n.n(o),a=n(20),c=n.n(a),s=n(3),l=n(21),u=n(9),d=n(35),f=n(37),m=n(34);const h="ACTIVE_CURSOR_TIMELION",b=i()({}),p="data-series-id";function g(e,t){return n=>{let r=0;const o=n<0;for(n=Math.abs(n);n>=e&&r<t.length;)n/=e,r++;return`${Math.round(100*n)/100*(o?-1:1)}${t[r]}`}}function v(){return e=>function(e){const t=[];let n,r=2,o=e.delta||0,i=0,a=0;for(;Math.abs(o)>=1024;)i++,o/=1024;for(;r<=1024&&!(o<=r);)r*=2;e.tickSize=r*Math.pow(1024,i);const c=(s=e.min||0,(l=e.tickSize)*Math.floor(s/l));var s,l;do{n=c+a++*e.tickSize,t.push(n)}while(n<(e.max||0));return t}(e)}n(59);var x=n(2);const j="<br>";function C({interval:e,seriesList:t,renderComplete:n,onBrushEvent:o}){const a=Object(u.useKibana)(),[C,O]=Object(r.useState)((()=>Object(s.cloneDeep)(t.list))),[w,y]=Object(r.useState)(),[k,M]=Object(r.useState)(null),[_,E]=Object(r.useState)((()=>new Map)),[S,L]=Object(r.useState)(null),[B,T]=Object(r.useState)(),[D,N]=Object(r.useState)(),[F,A]=Object(r.useState)(),[z,V]=Object(r.useState)(),R=Object(r.useCallback)((e=>{null!==e&&y(e)}),[]),I=Object(r.useCallback)((e=>{null!==e&&M(e)}),[]);Object(r.useEffect)((()=>()=>{k&&i()(k).off("plotselected").off("plothover").off("mouseleave")}),[k]);const U=Object(r.useCallback)(Object(s.debounce)((({currentTarget:e})=>{const t=Number(e.getAttribute(p));S!==t&&(L(t),O((e=>e.map(((e,n)=>(e.color=n===t?_.get(e):"rgba(128,128,128,0.1)",e))))))}),50),[_,S]),W=Object(r.useCallback)((e=>{const t=Number(e.currentTarget.getAttribute(p));T(t),U(e)}),[U]),H=Object(r.useCallback)((({currentTarget:e})=>{const t=Number(e.getAttribute(p));O((e=>e.map(((e,n)=>(n===t&&(e._hide=!e._hide),e)))))}),[]),$=Object(r.useCallback)((e=>{if(w&&Object(s.get)(e,"[0]._global.legend.showTime",!0)){const e=i()('<caption class="timChart__legendCaption"></caption>');e.html(j),V(e);const t=i()(w);t.find("div.legend table").append(e),A(t.find(".ngLegendValueNumber"));const n=i()(w).find(".ngLegendValue");n&&(n.click(H),n.focus(W),n.mouseover(U)),(B||0===B)&&t.find("div.legend table .legendLabel>span").get(B).focus()}}),[B,w,H,W,U]),q=Object(r.useCallback)(((t,r)=>{if(w&&w.clientWidth>0&&w.clientHeight>0){const o=function(e,t,n,r=0,o){const i=t.getBounds(),a=Object(d.b)(i.min&&i.min.valueOf()||0,i.max&&i.max.valueOf()||0,n.get("timelion:target_buckets")||200,e,n.get("timelion:min_interval")||"1ms"),s=Object(f.a)(n)(a);return{xaxis:{mode:"time",tickLength:5,timezone:"browser",ticks:Math.floor(r/(7*s.length+45)),tickFormatter:e=>c()(e).format(s)},selection:{mode:"x",color:"#ccc"},crosshair:{mode:"x",color:"#C66",lineWidth:2},colors:m.a,grid:{show:o,borderWidth:0,borderColor:null,margin:10,hoverable:!0,autoHighlight:!1},legend:{backgroundColor:"rgb(255,255,255,0)",position:"nw",labelBoxBorderColor:"rgb(255,255,255,0)",labelFormatter(e,t){const n=document.createElement("span"),r=document.createElement("span"),o=document.createElement("span");return n.setAttribute("class","ngLegendValue"),n.setAttribute(p,`${t._id}`),r.appendChild(document.createTextNode(e)),o.setAttribute("class","ngLegendValueNumber"),n.appendChild(r),n.appendChild(o),n.outerHTML}}}}(e,a.services.timefilter,a.services.uiSettings,null==k?void 0:k.clientWidth,r),l=function(e,t){const n=e.map(((e,n)=>{const r=Object(s.cloneDeep)(Object(s.defaults)(e,{shadowSize:0,lines:{lineWidth:3}}));if(r._id=n,e.color){const t=document.createElement("span");t.style.color=e.color,r.color=t.style.color}return e._hide&&(r.data=[],r.stack=!1,r.label=`(hidden) ${e.label}`),e._global&&Object(s.mergeWith)(t,e._global,((e,t)=>null==e?t:null==t?e:void 0)),r}));return Object(s.compact)(n)}(t,o);o.yaxes&&o.yaxes.forEach((e=>{if(e&&e.units){const t={bits:g(1e3,["b","kb","mb","gb","tb","pb"]),"bits/s":g(1e3,["b/s","kb/s","mb/s","gb/s","tb/s","pb/s"]),bytes:g(1024,["B","KB","MB","GB","TB","PB"]),"bytes/s":g(1024,["B/s","KB/s","MB/s","GB/s","TB/s","PB/s"]),currency:(e,t)=>e.toLocaleString("en",{style:"currency",currency:t&&t.options&&t.options.units.prefix||"USD"}),percent(e,t){let n=Object(s.get)(t,"tickDecimals",0)-Object(s.get)(t,"options.units.tickDecimalsShift",0);return n<0?n=0:n>20&&(n=20),(100*e).toFixed(n)+"%"},custom(e,t){const n=function(e,t){const n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,r=""+Math.round(e*n)/n;if(null!=t.tickDecimals){const e=r.indexOf("."),o=-1===e?0:r.length-e-1;if(o<t.tickDecimals)return(o?r:r+".")+(""+n).substr(1,t.tickDecimals-o)}return r}(e,t);return(t&&t.options&&t.options.units.prefix)+n+(t&&t.options&&t.options.units.suffix)}};e.tickFormatter=t[e.units.type],["bytes","bytes/s"].includes(e.units.type)&&(e.tickGenerator=v())}}));const u=i.a.plot(i()(w),l,o);N(u),n(),$(u.getData())}}),[w,null==k?void 0:k.clientWidth,n,a.services,e,$]),Y=Object(l.useResizeObserver)(k);Object(r.useEffect)((()=>{q(C,t.render&&t.render.grid)}),[C,q,t.render,Y]),Object(r.useEffect)((()=>{const e=[],n=t.list.map(((t,n)=>{const r={...t};if(!r.color){const e=n%m.a.length;r.color=m.a[e]}return e.push([r,r.color]),r}));O(n),E(new Map(e))}),[t.list]);const G=Object(r.useCallback)((()=>{null!==S&&(L(null),T(null),O((e=>e.map((e=>(e.color=_.get(e),e))))))}),[_,S]),K=Object(r.useCallback)((e=>{G();const t=D.getAxes();if(e.x<t.xaxis.min||e.x>t.xaxis.max)return;const n=D.getData();z&&z.text(c()(e.x).format(Object(s.get)(n,"[0]._global.legend.timeFormat",d.a)));for(let t=0;t<n.length;++t){const r=n[t],o=r.lines.show&&!r.lines.steps,i=Object(s.get)(r,"_meta.precision",2);if(r._hide)continue;const a=r.data.find(((t,n)=>n+1===r.data.length||(o?e.x-t[0]<r.data[n+1][0]-e.x:e.x<r.data[n+1][0])))[1];if(F)if(null==a)F.eq(t).empty();else{let e=a.toFixed(i);const n=r.yaxis.tickFormatter;n&&(e=n(Number(e),r.yaxis)),F.eq(t).text(`(${e})`)}}}),[D,F,G,z]),J=Object(r.useCallback)(Object(s.debounce)(K,50,{maxWait:50,leading:!0,trailing:!1}),[K]),P=Object(r.useCallback)((()=>{z&&z.html(j),Object(s.each)(F,(e=>{i()(e).empty()}))}),[z,F]),Q=Object(r.useCallback)((e=>{D.setCrosshair(e),J(e)}),[D,J]),X=Object(r.useCallback)(((e,t)=>{D&&(Q(t),b.trigger(h,[e,t]))}),[D,Q]);Object(r.useEffect)((()=>{const e=(e,t,n)=>{D&&Q(n)};return b.on(h,e),()=>{b.off(h,e)}}),[D,Q]);const Z=Object(r.useCallback)((()=>{D&&(D.clearCrosshair(),P())}),[D,P]),ee=Object(r.useCallback)(((e,t)=>{o({gte:t.xaxis.from,lte:t.xaxis.to})}),[o]);Object(r.useEffect)((()=>{k&&i()(k).off("plotselected").on("plotselected",ee)}),[k,ee]),Object(r.useEffect)((()=>{k&&i()(k).off("mouseleave").on("mouseleave",Z)}),[k,Z]),Object(r.useEffect)((()=>{k&&i()(k).off("plothover").on("plothover",X)}),[k,X]);const te=Object(r.useMemo)((()=>Object(s.last)(Object(s.compact)(Object(s.map)(t.list,"_title")))||""),[t.list]);return Object(x.jsx)("div",{ref:I,className:"timChart"},Object(x.jsx)("div",{className:"chart-top-title"},te),Object(x.jsx)("div",{ref:R,className:"chart-canvas"}))}}}]);