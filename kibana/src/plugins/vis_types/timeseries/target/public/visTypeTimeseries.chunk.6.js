(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[6],{193:function(e,t,s){"use strict";var r=s(194),n=s(195);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return n.isString(e)&&(e=y(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),u=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=s(196);function y(e,t,s){if(e&&n.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,s),r}o.prototype.parse=function(e,t,s){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),i=-1!==o&&o<e.indexOf("#")?"?":"#",h=e.split(i);h[0]=h[0].replace(/\\/g,"/");var y=e=h.join(i);if(y=y.trim(),!s&&1===e.split("#").length){var g=l.exec(y);if(g)return this.path=y,this.href=y,this.pathname=g[1],g[2]?(this.search=g[2],this.query=t?j.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var O=a.exec(y);if(O){var x=(O=O[0]).toLowerCase();this.protocol=x,y=y.substr(O.length)}if(s||O||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===y.substr(0,2);!w||O&&b[O]||(y=y.substr(2),this.slashes=!0)}if(!b[O]&&(w||O&&!v[O])){for(var _,U,k=-1,T=0;T<p.length;T++)-1!==(C=y.indexOf(p[T]))&&(-1===k||C<k)&&(k=C);for(-1!==(U=-1===k?y.lastIndexOf("@"):y.lastIndexOf("@",k))&&(_=y.slice(0,U),y=y.slice(U+1),this.auth=decodeURIComponent(_)),k=-1,T=0;T<u.length;T++){var C;-1!==(C=y.indexOf(u[T]))&&(-1===k||C<k)&&(k=C)}-1===k&&(k=y.length),this.host=y.slice(0,k),y=y.slice(k),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var M=this.hostname.split(/\./),I=(T=0,M.length);T<I;T++){var A=M[T];if(A&&!A.match(f)){for(var D="",S=0,R=A.length;S<R;S++)A.charCodeAt(S)>127?D+="x":D+=A[S];if(!D.match(f)){var q=M.slice(0,T),F=M.slice(T+1),H=A.match(d);H&&(q.push(H[1]),F.unshift(H[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=r.toASCII(this.hostname));var N=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+N,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[x])for(T=0,I=c.length;T<I;T++){var L=c[T];if(-1!==y.indexOf(L)){var P=encodeURIComponent(L);P===L&&(P=escape(L)),y=y.split(L).join(P)}}var $=y.indexOf("#");-1!==$&&(this.hash=y.substr($),y=y.slice(0,$));var z=y.indexOf("?");if(-1!==z?(this.search=y.substr(z),this.query=y.substr(z+1),t&&(this.query=j.parse(this.query)),y=y.slice(0,z)):t&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var B=this.search||"";this.path=N+B}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",s=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=j.stringify(this.query));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),t+o+(s=s.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(i=i.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(n.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var s=new o,r=Object.keys(this),a=0;a<r.length;a++){var i=r[a];s[i]=this[i]}if(s.hash=e.hash,""===e.href)return s.href=s.format(),s;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),h=0;h<l.length;h++){var c=l[h];"protocol"!==c&&(s[c]=e[c])}return v[s.protocol]&&s.hostname&&!s.pathname&&(s.path=s.pathname="/"),s.href=s.format(),s}if(e.protocol&&e.protocol!==s.protocol){if(!v[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var f=u[p];s[f]=e[f]}return s.href=s.format(),s}if(s.protocol=e.protocol,e.host||b[e.protocol])s.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),s.pathname=d.join("/")}if(s.search=e.search,s.query=e.query,s.host=e.host||"",s.auth=e.auth,s.hostname=e.hostname||e.host,s.port=e.port,s.pathname||s.search){var m=s.pathname||"",j=s.search||"";s.path=m+j}return s.slashes=s.slashes||e.slashes,s.href=s.format(),s}var y=s.pathname&&"/"===s.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=g||y||s.host&&e.pathname,x=O,w=s.pathname&&s.pathname.split("/")||[],_=(d=e.pathname&&e.pathname.split("/")||[],s.protocol&&!v[s.protocol]);if(_&&(s.hostname="",s.port=null,s.host&&(""===w[0]?w[0]=s.host:w.unshift(s.host)),s.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),O=O&&(""===d[0]||""===w[0])),g)s.host=e.host||""===e.host?e.host:s.host,s.hostname=e.hostname||""===e.hostname?e.hostname:s.hostname,s.search=e.search,s.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),s.search=e.search,s.query=e.query;else if(!n.isNullOrUndefined(e.search))return _&&(s.hostname=s.host=w.shift(),(E=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=E.shift(),s.host=s.hostname=E.shift())),s.search=e.search,s.query=e.query,n.isNull(s.pathname)&&n.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s;if(!w.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var U=w.slice(-1)[0],k=(s.host||e.host||w.length>1)&&("."===U||".."===U)||""===U,T=0,C=w.length;C>=0;C--)"."===(U=w[C])?w.splice(C,1):".."===U?(w.splice(C,1),T++):T&&(w.splice(C,1),T--);if(!O&&!x)for(;T--;T)w.unshift("..");!O||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var E,M=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(s.hostname=s.host=M?"":w.length?w.shift():"",(E=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=E.shift(),s.host=s.hostname=E.shift())),(O=O||s.host&&w.length)&&!M&&w.unshift(""),w.length?s.pathname=w.join("/"):(s.pathname=null,s.path=null),n.isNull(s.pathname)&&n.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=e.auth||s.auth,s.slashes=s.slashes||e.slashes,s.href=s.format(),s},o.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},194:function(e,t,s){e.exports=s(23)(2556)},195:function(e,t,s){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},196:function(e,t,s){"use strict";t.decode=t.parse=s(197),t.encode=t.stringify=s(198)},197:function(e,t,s){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,s,o){t=t||"&",s=s||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=e.length;l>0&&h>l&&(h=l);for(var c=0;c<h;++c){var u,p,f,d,m=e[c].replace(i,"%20"),b=m.indexOf(s);b>=0?(u=m.substr(0,b),p=m.substr(b+1)):(u=m,p=""),f=decodeURIComponent(u),d=decodeURIComponent(p),r(a,f)?n(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},198:function(e,t,s){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,i){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var i=encodeURIComponent(r(a))+s;return n(e[a])?o(e[a],(function(e){return i+encodeURIComponent(r(e))})).join(t):i+encodeURIComponent(r(e[a]))})).join(t):i?encodeURIComponent(r(i))+s+encodeURIComponent(r(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var s=[],r=0;r<e.length;r++)s.push(t(e[r],r));return s}var a=Object.keys||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t}},207:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return vis_TableVis}));var r=s(17),n=s.n(r),o=s(9),a=s.n(o),i=s(5),l=s.n(i),h=s(193),c=s(10),u=s(58),p=s(53),f=s(59),d=s(70);function m(e){return d.a.includes(e.type)}var b=s(15),v=s(60),j=s(80),y=s(16),g=s(0),O=s(4),x=s(38),w=s(50),_=s(1);function U(e,t,s){let r;return e&&e.forEach((e=>{e.operator&&null!=e.value&&a.a[e.operator](s,e.value)&&(r=e[t])})),r}function k(e){return"javascript:"===Object(h.parse)(e).protocol?"":e}class vis_TableVis extends i.Component{constructor(e){super(e),n()(this,"createDrilldownUrlClickHandler",(e=>t=>{Object(g.b)().http.externalUrl.validateUrl(e)?this.setState({accessDeniedDrilldownUrl:null}):(t.preventDefault(),this.setState({accessDeniedDrilldownUrl:e}))})),n()(this,"renderRow",((e,t,s)=>{const{model:r,fieldFormatMap:n,getConfig:o}=this.props;let a=e.key;if(t.length&&(a=t.map(((t,r)=>{var n;const o=[null!==(n=e.key)&&void 0!==n?n:null].flat()[r],a=s(t,o,"html");return Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:null!=a?a:o}})})).reduce(((e,t)=>[e,w.a,t]))),r.drilldown_url){const t=Object(v.a)(r.drilldown_url,{},{key:e.key},{noEscape:!0}),s=this.createDrilldownUrlClickHandler(t);a=Object(_.jsx)("a",{href:k(t),onClick:s,onContextMenu:s},a)}const i=e.series.filter((e=>e)).map((t=>{var s;const r=this.visibleSeries.find((e=>e.id===t.id));if(!r)return null;const a=null===(s=r.color_rules)||void 0===s?void 0:s.some((({value:e,operator:t,text:s})=>e||t||s)),i=(r.formatter===O.b.DEFAULT?Object(f.a)(Object(u.a)(r.metrics),n,"html",a):Object(p.a)(r.formatter,r.value_template,o))(t.last);let l;if(r.trend_arrows){const e=t.slope>0?"sortUp":"sortDown";l=Object(_.jsx)("span",null,"  ",Object(_.jsx)(b.EuiIcon,{type:e,color:"subdued"}))}const h={color:U(r.color_rules,"text",t.last)};return Object(_.jsx)("td",{key:`${e.key}-${t.id}`,"data-test-subj":"tvbTableVis__value",className:"eui-textRight",style:h},Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:i}}),l)}));return Object(_.jsx)("tr",{key:e.key},Object(_.jsx)("td",null,a),i)})),n()(this,"closeExternalUrlErrorModal",(()=>this.setState({accessDeniedDrilldownUrl:null}))),this.fieldFormatsService=Object(g.e)(),this.state={accessDeniedDrilldownUrl:null}}get visibleSeries(){return Object(o.get)(this.props,"model.series",[]).filter((e=>!e.hidden))}renderHeader(e){const{model:t,uiState:s,onUiState:r,visData:n}=this.props,a=`${t.type}.sort`,i=s.get(a,{column:"_default_",order:"asc"}),l=this.visibleSeries.map((e=>{const t=Object(o.last)(e.metrics),s=((e,t)=>{var s,r,o;return t.label||(null===(s=n.series[0])||void 0===s||null===(r=s.series)||void 0===r||null===(o=r.find((e=>t.id===e.id)))||void 0===o?void 0:o.label)})(0,e);let l;if(m(t)){let t;t=i.column===e.id?"asc"===i.order?"sortUp":"sortDown":"empty",l=Object(_.jsx)(b.EuiIcon,{type:t})}let h=Object(_.jsx)("span",null,s," ",l);return m(t)||(h=Object(_.jsx)(b.EuiToolTip,{content:Object(_.jsx)(y.FormattedMessage,{id:"visTypeTimeseries.table.columnNotSortableTooltip",defaultMessage:"This column is not sortable"})},h)),Object(_.jsx)("th",{onClick:()=>{if(!m(t))return;let s;s=i.column===e.id&&"asc"===i.order?"desc":"asc",r(a,{column:e.id,order:s})},key:e.id,scope:"col"},h)})),h=n.pivot_label||t.pivot_label||Object(w.e)(e);let c;c="_default_"===i.column?"asc"===i.order?"sortUp":"sortDown":"empty";const u=Object(_.jsx)(b.EuiIcon,{type:c});return Object(_.jsx)("tr",null,Object(_.jsx)("th",{className:"eui-textLeft",scope:"col",onClick:()=>{let e;e="_default_"===i.column&&"asc"===i.order?"desc":"asc",r(a,{column:"_default_",order:e})}},h," ",u),l)}render(){var e;const{visData:t,model:s,indexPattern:r}=this.props,{accessDeniedDrilldownUrl:n}=this.state,a=(s.pivot_type?[null!==(e=s.pivot_type)&&void 0!==e?e:null].flat():[]).map(((e,t)=>{var r;return{name:[null!==(r=s.pivot_id)&&void 0!==r?r:null].flat()[t],type:e}})),i=Object(w.b)(r,a,this.fieldFormatsService,void 0,s.drilldown_url?[x.FIELD_FORMAT_IDS.URL]:[]),h=Object(w.d)(s.pivot_id),u=this.renderHeader(h);let p=null;return Object(o.isArray)(t.series)&&t.series.length&&(p=t.series.map((e=>this.renderRow(e,h,i)))),Object(_.jsx)(l.a.Fragment,null,Object(_.jsx)(c.RedirectAppLinks,{application:Object(g.b)().application,className:"tvbVis","data-test-subj":"tableView"},Object(_.jsx)("table",{className:"table"},Object(_.jsx)("thead",null,u),Object(_.jsx)("tbody",null,p))),n&&Object(_.jsx)(j.a,{url:n,handleClose:this.closeExternalUrlErrorModal}))}}vis_TableVis.defaultProps={sort:{}}},60:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var r=s(33),n=s(65),o=s(2),a=s(45);const i=n.b.create();var l;function h(e,t={},s={},r={}){try{return i[n.a](e.split(a.a).join(`[${a.a}]`),{strict:!0,knownHelpersOnly:!0,knownHelpers:{rison:!0,encodeURIComponent:!0},...r})({...s,args:t})}catch(t){if(-1!==t.toString().indexOf("Parse error"))return e;if(-1!==t.message.indexOf("not defined in")){const e=t.message.split(/"/)[1];t.error={caused_by:{reason:o.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+e+"}}"}}),title:o.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else t.error={caused_by:{reason:o.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:o.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}};return t}}i.registerHelper("rison",("rison",l=e=>Object(r.encode)(e),(...e)=>{const{hash:t}=e.slice(-1)[0],s=Object.keys(t).length>0,r=e.length>1;if(s&&r)throw new Error("[rison]: both value list and hash are not supported");if(s){if(Object.values(t).some((e=>void 0===e)))throw new Error("[rison]: unknown variable");return l(t)}{const t=e.slice(0,-1);if(t.some((e=>void 0===e)))throw new Error("[rison]: unknown variable");if(0===t.length)throw new Error("[rison]: unknown variable");return 1===t.length?l(t[0]):l(t)}})),i.registerHelper("encodeURIComponent",(e=>{const t=String(e);return encodeURIComponent(t)}))},70:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));const r=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"]},80:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s(5);var r=s(16),n=s(15),o=s(1);const a=({url:e,handleClose:t})=>Object(o.jsx)(n.EuiModal,{onClose:t},Object(o.jsx)(n.EuiModalHeader,null,Object(o.jsx)(n.EuiModalHeaderTitle,null,Object(o.jsx)(r.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.headerTitle",defaultMessage:"Access to this external URL is not yet enabled"}))),Object(o.jsx)(n.EuiModalBody,null,Object(o.jsx)(r.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.bodyMessage",defaultMessage:"Configure {externalUrlPolicy} in your {kibanaConfigFileName} to allow access to {url}.",values:{url:Object(o.jsx)(n.EuiTextColor,{color:"warning",component:"span"},e),externalUrlPolicy:"externalUrl.policy",kibanaConfigFileName:"kibana.yml"}})),Object(o.jsx)(n.EuiModalFooter,null,Object(o.jsx)(n.EuiButton,{onClick:t,fill:!0},Object(o.jsx)(r.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.closeButtonLabel",defaultMessage:"Close"}))))}}]);