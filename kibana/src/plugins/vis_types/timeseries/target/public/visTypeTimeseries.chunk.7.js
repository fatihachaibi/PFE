(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[7],{204:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return y}));var i=s(5),a=s(81),r=s(58),n=s(53),l=s(59),o=s(9),c=s.n(o),u=s(15),d=s(32),h=s.n(d),g=s(67),b=s(49),p=s(46),f=s.n(p),j=s(68),m=s.n(j),v=s(69),O=s(57),_=s(1);class gauge_vis_GaugeVis extends i.Component{constructor(e){super(e),this.state={scale:1,top:0,left:0,translateX:1,translateY:1},this.handleResize=this.handleResize.bind(this),this.checkResizeThrottled=c.a.throttle((()=>{const e=Object(v.a)(this.inner,this.resize,this.state);e&&this.state&&!c.a.isEqual(e,this.state)&&this.handleResize()}),200)}componentWillUnmount(){clearTimeout(this.timeout)}componentDidMount(){this.handleResize()}handleResize(){const e=Object(v.a)(this.inner,this.resize,this.state);this.setState(e)}render(){const{type:e,value:t,max:s,color:i}=this.props,a=Object(b.c)(t)?1:t,{scale:r,translateX:n,translateY:l}=this.state,o=2*Math.PI*50,c="half"===e?.6:1,d=a<s?a/s:1,h=m()({default:{resize:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto",overflow:"hidden"},svg:{position:"absolute",top:this.state.top,left:this.state.left,transform:`matrix(${r}, 0, 0, ${r}, ${n}, ${l})`},innerLine:{strokeWidth:this.props.innerLine},gaugeLine:{strokeWidth:this.props.gaugeLine}},half:{svg:{transform:`matrix(${r}, 0, 0, ${r}, ${n}, ${l})`}}},{half:"half"===e}),g={circle:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:i,strokeWidth:this.props.gaugeLine,strokeDasharray:`${d*c*o} ${o}`,transform:"rotate(-90 60 60)"},circleBackground:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:O.a.LINE_COLOR,strokeDasharray:`${c*o} ${o}`,strokeWidth:this.props.innerLine}};let p;return"half"===e&&(g.circle.transform="rotate(-197.8 60 60)",g.circleBackground.transform="rotate(162 60 60)"),this.props.innerColor&&(g.circleBackground.stroke=this.props.innerColor),p="half"===e?Object(_.jsx)("svg",{width:120.72,height:78.72},Object(_.jsx)("circle",f()({},g.circleBackground,{style:h.innerLine,"data-test-subj":"gaugeCircleInner"})),Object(_.jsx)("circle",f()({},g.circle,{style:h.gaugeLine,"data-test-subj":"gaugeCircle"}))):Object(_.jsx)("svg",{width:120.72,height:120.72},Object(_.jsx)("circle",f()({},g.circleBackground,{"data-test-subj":"gaugeCircleInner"})),Object(_.jsx)("circle",f()({},g.circle,{"data-test-subj":"gaugeCircle"}))),Object(_.jsx)(u.EuiResizeObserver,{onResize:this.checkResizeThrottled},(e=>Object(_.jsx)("div",{ref:t=>{this.resize=t,e(t)},style:h.resize},Object(_.jsx)("div",{style:h.svg,ref:e=>this.inner=e},p))))}}gauge_vis_GaugeVis.defaultProps={innerLine:2,gaugeLine:10};class gauge_Gauge extends i.Component{constructor(e){super(e),this.state={scale:1,top:0,left:0,translateX:1,translateY:1},this.handleResize=this.handleResize.bind(this),this.checkResizeThrottled=c.a.throttle((()=>{const e=Object(v.a)(this.inner,this.resize,this.state);e&&this.state&&!c.a.isEqual(e,this.state)&&this.handleResize()}),200)}componentWillUnmount(){clearTimeout(this.timeout)}componentDidMount(){this.handleResize()}handleResize(){const e=Object(v.a)(this.inner,this.resize,this.state);this.setState(e)}render(){const{metric:e,type:t}=this.props,{scale:s,translateX:i,translateY:a}=this.state,r=Object(b.b)(null==e?void 0:e.data),n=e&&((e,t)=>{if(c.a.isNumber(t))return t;if(!Array.isArray(t))return 0;const s=t.map((e=>e[1]));return c.a.max(s)})(0,e.data)||1,l=e&&(e.tickFormatter||e.formatter)||this.props.tickFormatter||(e=>e),o=e&&e.label||"",d=m()({default:{inner:{top:this.state.top||0,left:this.state.left||0,transform:`matrix(${s}, 0, 0, ${s}, ${i}, ${a})`,zIndex:1},valueColor:{color:this.props.valueColor}}},this.props),p={value:r,reversed:Object(g.a)(this.props.backgroundColor),gaugeLine:this.props.gaugeLine,innerLine:this.props.innerLine,innerColor:this.props.innerColor,max:this.props.max||n,color:e&&e.color||"#8ac336",type:t};let f,j;this.props.additionalLabel&&(j=Object(_.jsx)("div",{className:"tvbVisGauge__additionalLabel"},this.props.additionalLabel)),f="half"===t?Object(_.jsx)("div",{className:"tvbVisHalfGauge__metrics",ref:e=>this.inner=e,style:d.inner},Object(_.jsx)("div",{className:"tvbVisGauge__label",ref:"title","data-test-subj":"gaugeLabel"},o),Object(_.jsx)("div",{className:"tvbVisGauge__value",style:d.valueColor,ref:"label","data-test-subj":"gaugeValue"},Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:l(r)}})),j):Object(_.jsx)("div",{className:"tvbVisCircleGauge__metrics",ref:e=>this.inner=e,style:d.inner},Object(_.jsx)("div",{className:"tvbVisGauge__value",style:d.valueColor,ref:"label","data-test-subj":"gaugeValue"},Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:l(r)}})),Object(_.jsx)("div",{className:"tvbVisGauge__label",ref:"title","data-test-subj":"gaugeLabel"},o),j);const v=h()({tvbVisHalfGauge:"half"===t,tvbVisCircleGauge:"circle"===t,"tvbVisGauge--reversed":Object(g.b)(this.props.backgroundColor)});return Object(_.jsx)(u.EuiResizeObserver,{onResize:this.checkResizeThrottled},(e=>Object(_.jsx)("div",{className:v,ref:e},Object(_.jsx)("div",{ref:e=>this.resize=e,className:"tvbVisGauge__resize","data-test-subj":"tvbVisGaugeContainer"},f,Object(_.jsx)(gauge_vis_GaugeVis,p)))))}}gauge_Gauge.defaultProps={type:"half",innerLine:2,gaugeLine:10};var x=s(4),C=s(64);const y=Object(a.a)((function(e){const{backgroundColor:t,model:s,visData:i,fieldFormatMap:a,getConfig:c}=e,u=function(e){const{model:t,visData:s}=e,i=Object(o.get)(s,`${t.id}.series`,[]).filter((e=>!Object(o.isUndefined)(e)));let a,r;return t.gauge_color_rules&&t.gauge_color_rules.forEach((e=>{if(e.operator){var t;const s=Object(b.b)(null===(t=i[0])||void 0===t?void 0:t.data);Object(C.c)(e,s)&&Object(C.b)(e.operator)(s,e.value)&&(r=e.gauge,a=e.text)}})),{text:a,gauge:r}}(e),d=Object(o.get)(i,`${s.id}.series`,[]).filter((e=>e)).map(((e,t)=>{const i=s.series.find((t=>Object(o.includes)(e.id,t.id))),d={};if(i){const e=s.gauge_color_rules.some((({text:e})=>e));d.formatter=i.formatter===x.b.DEFAULT?Object(l.a)(Object(r.a)(i.metrics),a,"html",e):Object(n.a)(i.formatter,i.value_template,c)}return 0===t&&u.gauge&&(d.color=u.gauge),Object(o.assign)({},e,d)})),h=s.background_color||t,g={backgroundColor:h},p={metric:d[0],type:s.gauge_style||"half",additionalLabel:e.additionalLabel,backgroundColor:h};return u.text&&(p.valueColor=u.text),s.gauge_width&&(p.gaugeLine=s.gauge_width),s.gauge_inner_color&&(p.innerColor=s.gauge_inner_color),s.gauge_inner_width&&(p.innerLine=s.gauge_inner_width),null!=s.gauge_max&&(p.max=s.gauge_max),Object(_.jsx)("div",{className:"tvbVis",style:g},Object(_.jsx)(gauge_Gauge,p))}))},46:function(e,t,s){e.exports=s(23)(3)},54:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=["#68BC00","#009CE0","#B0BC00","#16A5A5","#D33115","#E27300","#FCC400","#7B64FF","#FA28FF","#333333","#808080","#194D33","#0062B1","#808900","#0C797D","#9F0500","#C45100","#FB9E00","#653294","#AB149E","#0F1419","#666666"]},55:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s(56),a=s.n(i);const r=e=>{let t=new a.a(e);const s=t.hsl().object();return s.l-=100*t.luminosity(),t=a.a.hsl(s),t.rgb().toString()}},66:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(4),a=s(55),r=s(54),n=s(45);const l=({seriesById:e,seriesName:t,seriesId:s,baseColor:l,seriesPalette:o,palettesRegistry:c,syncColors:u})=>{if(!o)return null;const d=o.name===i.d.RAINBOW||o.name===i.d.GRADIENT?"custom":o.name,h=o.name===i.d.GRADIENT?{...o.params,colors:[l,Object(a.a)(l)],gradient:!0}:o.name===i.d.RAINBOW?{...o.params,colors:r.a}:o.params;return null==c?void 0:c.get(d||"default").getCategoricalColor([{name:Object(n.b)(t),rankAtDepth:e.findIndex((({id:e})=>e===s)),totalSeriesAtDepth:e.length}],{maxDepth:1,totalSeries:e.length,behindText:!1,syncColors:u},h)}},69:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s(6);function a(e,t){return[Math.floor(e.clientWidth*t),Math.floor(e.clientHeight*t)]}function r(e,t,s){const r=Object(i.findDOMNode)(e),n=Object(i.findDOMNode)(t);let l=s.scale;l=n.clientWidth-n.clientHeight<0?n.clientWidth/r.clientWidth:n.clientHeight/r.clientHeight;let[o,c]=a(r,l);o>n.clientWidth&&(l=n.clientWidth/r.clientWidth),c>n.clientHeight&&(l=n.clientHeight/r.clientHeight),[o,c]=a(r,l);const u=(o-r.clientWidth)/2,d=(c-r.clientHeight)/2;return{scale:l,top:Math.floor((n.clientHeight-c)/2),left:Math.floor((n.clientWidth-o)/2),translateY:d,translateX:u}}},81:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var i=s(5),a=s(32),r=s.n(a),n=s(9),l=s(45),o=s(66),c=s(8),u=s(1);function d(e){function t(t){const{model:s,visData:a,syncColors:d,palettesService:h,fieldFormatMap:g}=t,b=Object(i.useCallback)(((e,t,i)=>{const r={...s.series[0].palette,name:"kibana"===s.series[0].split_color_mode?"kibana_palette":s.series[0].split_color_mode||s.series[0].palette.name},n={seriesById:a[s.id].series,seriesName:e,seriesId:t,baseColor:i,seriesPalette:r,palettesRegistry:h,syncColors:d,fieldFormatMap:g};return Object(o.a)(n)||null}),[g,s.id,s.series,h,d,a]);if(!s||!a||!a[s.id])return Object(u.jsx)(e,t);if(a[s.id].series.every((e=>1===e.id.split(c.c).length)))return Object(u.jsx)(e,t);const p=a[s.id].series.reduce(((e,t)=>{const[i,a]=t.id.split(c.c),r=s.series.find((e=>e.id===i));if(!r)return e;const n=t.splitByLabel;e[a]||(e[a]={series:[],label:t.label.toString()});const l=/{{\s*key\s*}}/.test(r.label),o=t.color||r.color,u="terms"===s.series[0].split_mode?b(n,t.id,o):o;return e[a].series.push({...t,id:i,color:u,label:r.label&&!l?r.label:n}),e}),{}),f=Object(n.first)(a[s.id].series.filter((e=>{const t=s.series.find((t=>t.id===e.id));return!!t&&["everything","filter"].includes(t.split_mode)}))),j=f?Object(n.findIndex)(s.series,(e=>e.id===f.id)):null,m=Object.keys(p).map((i=>{const a=p[i],{series:r,label:n}=a,o=n,c=null!=j&&j>0?[...r,f]:[f,...r],d={[s.id]:{id:s.id,series:c||r}};return Object(u.jsx)("div",{key:i,className:"tvbSplitVis__split"},Object(u.jsx)(e,{model:s,visData:d,onBrush:t.onBrush,onFilterClick:t.onFilterClick,additionalLabel:Object(l.b)(o),backgroundColor:t.backgroundColor,getConfig:t.getConfig,fieldFormatMap:t.fieldFormatMap}))})),v=1===a[s.id].series.length;return Object(u.jsx)("div",{className:r()("tvbSplitVis",{"tvbSplitVis--one":v})},m)}var s;return t.displayName=`SplitVisComponent(${s=e,s.displayName||s.name||"Component"})`,t}}}]);