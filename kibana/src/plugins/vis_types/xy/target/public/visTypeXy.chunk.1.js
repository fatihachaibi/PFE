(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[1],{35:function(e,t,i){"use strict";var n,o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),a=[];function r(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},n=[],o=0;o<e.length;o++){var l=e[o],s=t.base?l[0]+t.base:l[0],c=i[s]||0,d="".concat(s," ").concat(c);i[s]=c+1;var u=r(d),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:f(p,t),references:1}),n.push(d)}return n}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=i.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function p(e,t,i){var n=i.css,o=i.media,a=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,v=0;function f(e,t){var i,n,o;if(t.singleton){var a=v++;i=m||(m=s(t)),n=u.bind(null,i,a,!1),o=u.bind(null,i,a,!0)}else i=s(t),n=p.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=r(i[n]);a[o].references--}for(var s=l(e,t),c=0;c<i.length;c++){var d=r(i[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}i=s}}}},36:function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,n,o,a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var l=(i=r,n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(o," */")),s=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[a].concat(s).concat([l]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(o[r]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&o[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},37:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(38);case"v8light":return i(40)}},38:function(e,t,i){var n=i(35),o=i(39);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},39:function(e,t,i){(t=i(36)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},40:function(e,t,i){var n=i(35),o=i(41);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},41:function(e,t,i){(t=i(36)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},42:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(43);case"v8light":return i(45)}},43:function(e,t,i){var n=i(35),o=i(44);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},44:function(e,t,i){(t=i(36)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},45:function(e,t,i){var n=i(35),o=i(46);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},46:function(e,t,i){(t=i(36)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},47:function(e,t,i){"use strict";i.r(t);var n=i(13),o=i.n(n),a=i(9),r=i.n(a),l=i(5),s=i(32),c=i(8),d=i(4),u=i(6),p=i(18),m=i(7);const v=e=>{switch(e){case"cardinal":return l.CurveType.CURVE_MONOTONE_X;case"step-after":return l.CurveType.CURVE_STEP_AFTER;default:return l.CurveType.LINEAR}};var f=i(24),g=i.n(f),b=i(10),h=i(0),x=i(14);const y=(e,t,i,n)=>({series:[o]})=>{const[r,s]=Object(a.useState)(!1),[c,d]=Object(a.useState)(!1),u=o,p=Object(a.useMemo)((()=>t(u)),[u]),[v,f]=Object(l.useLegendAction)();if(Object(a.useEffect)((()=>{(async()=>{d(await e(p))})()}),[p]),!c||!p)return null;const g=n(u),b=[{id:"main",title:`${g}`,items:[{name:h.i18n.translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${g}-filterIn`,icon:Object(m.jsx)(x.EuiIcon,{type:"plusInCircle",size:"m"}),onClick:()=>{s(!1),i(p)}},{name:h.i18n.translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${g}-filterOut`,icon:Object(m.jsx)(x.EuiIcon,{type:"minusInCircle",size:"m"}),onClick:()=>{s(!1),i(p,!0)}}]}],y=Object(m.jsx)("div",{tabIndex:0,ref:v,role:"button","aria-pressed":"false",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":`legend-${g}`,onKeyPress:()=>s(!r),onClick:()=>s(!r)},Object(m.jsx)(x.EuiIcon,{size:"s",type:"boxesVertical"}));return Object(m.jsx)(x.EuiPopover,{id:"contextMenuNormal",button:y,isOpen:r,closePopover:()=>{s(!1),f()},panelPaddingSize:"none",anchorPosition:"upLeft",title:h.i18n.translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:g}})},Object(m.jsx)(x.EuiContextMenu,{initialPanelId:"main",panels:b}))};function j(e){switch(e){case l.Position.Bottom:return"upCenter";case l.Position.Top:return"downCenter";case l.Position.Left:return"rightCenter";default:return"leftCenter"}}const T=({id:e,title:t,show:i,position:n,groupId:o,grid:a,ticks:r,domain:s,style:c,integersOnly:d,timeAxisLayerCount:u})=>Object(m.jsx)(l.Axis,{id:`${e}__axis`,groupId:o,hide:!i,title:t,style:c,domain:s,position:n,integersOnly:d,showGridLines:null==a?void 0:a.show,tickFormat:null==r?void 0:r.formatter,labelFormat:null==r?void 0:r.labelFormatter,showOverlappingLabels:null==r?void 0:r.showOverlappingLabels,showDuplicatedTicks:null==r?void 0:r.showDuplicates,timeAxisLayerCount:u}),w=({enabled:e,isDarkMode:t,isFullBin:i,hideTooltips:n,domain:o,adjustedDomain:a})=>e&&o&&a&&"min"in o&&"max"in o&&void 0!==o.minInterval&&"min"in a&&"max"in a?Object(m.jsx)(c.Endzones,{isFullBin:i,isDarkMode:t,domainStart:o.min,domainEnd:o.max,interval:o.minInterval,domainMin:a.min,domainMax:a.max,hideTooltips:n}):null,O=({enabled:e,isDarkMode:t,domain:i})=>{if(!e)return null;const n=i&&"max"in i?i.max:void 0;return Object(m.jsx)(c.CurrentTime,{isDarkMode:t,domainEnd:n})},C=({markSizeRatio:e,rotation:t,enableHistogramMode:i,tooltip:n,isTimeChart:o,xAxis:a,orderBucketsBySum:r,xDomain:s,adjustedXDomain:d,showLegend:u,onElementClick:p,onPointerUpdate:v,externalPointerEvents:f,onBrushEnd:g,onRenderChange:h,legendAction:x,legendColorPicker:y,legendPosition:j,maxLegendLines:T,truncateLegend:w,legendSize:O,ariaLabel:C})=>{var _,S,k,A,L,E,I;const M=Object(b.e)(),P=M.useChartsTheme(),D=M.useChartsBaseTheme(),R={markSizeRatio:e,barSeriesStyle:{displayValue:{fontSize:{min:10,max:12},alignment:{horizontal:l.HorizontalAlignment.Center,vertical:l.VerticalAlignment.Middle}}},crosshair:{...P.crosshair},legend:{labelOptions:{maxLines:w?null!=T?T:1:0}},axes:{axisTitle:{padding:{outer:10}}},chartMargins:j===l.Position.Top||j===l.Position.Right?{bottom:(null!==(_=null===(S=P.chartMargins)||void 0===S?void 0:S.bottom)&&void 0!==_?_:0)+10}:{right:(null!==(k=null===(A=P.chartMargins)||void 0===A?void 0:A.right)&&void 0!==k?k:0)+10}},z=null!==(L=a.ticks)&&void 0!==L&&L.formatter?e=>{var t,i,n;return null!==(t=null===(i=a.ticks)||void 0===i||null===(n=i.formatter)||void 0===n?void 0:n.call(i,e))&&void 0!==t?t:""}:void 0,B=o&&s&&d?Object(c.renderEndzoneTooltip)(s.minInterval,"min"in s?s.min:void 0,"max"in s?s.max:void 0,z,!n.detailedTooltip):z&&(n.detailedTooltip?void 0:({value:e})=>z(e)),V=null!==(E=document.getElementById("app-fixed-viewport"))&&void 0!==E?E:void 0,F=n.detailedTooltip?{...n,boundary:V,customTooltip:n.detailedTooltip(B),headerFormatter:void 0}:{...n,boundary:V,headerFormatter:B};return Object(m.jsx)(l.Settings,{debugState:null!==(I=window._echDebugStateFlag)&&void 0!==I&&I,onPointerUpdate:v,externalPointerEvents:f,xDomain:d,rotation:t,theme:[R,P],baseTheme:D,showLegend:u,legendPosition:j,legendSize:O,allowBrushingLastHistogramBin:o,roundHistogramBrushValues:i&&!o,legendColorPicker:y,onElementClick:p,onBrushEnd:g,onRenderChange:h,legendAction:x,tooltip:F,ariaLabel:C,ariaUseDefaultSummary:!C,orderOrdinalBinsBy:r?{direction:l.Direction.Descending}:void 0})},_=({show:e,value:t,color:i,width:n,groupId:o,dash:a})=>e?Object(m.jsx)(l.LineAnnotation,{id:"__threshold_line__",groupId:o,domainType:l.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{stroke:i,strokeWidth:null!=n?n:2,opacity:1,dash:a}}}):null;var S=i(2),k=i(1);function A({style:e,...t},i,n){var o;const a=null===(o=i.find((({id:e})=>n.some((({valueAxis:t})=>e===t)))))||void 0===o?void 0:o.groupId;return{...t,dash:L(e),groupId:a}}function L(e){switch(e){case k.f.Dashed:return[10,5];case k.f.DotDashed:return[20,5,5,5];case k.f.Full:default:return}}i(37);const E=({label:e,value:t},i)=>e&&t?Object(m.jsx)("tr",{key:e+t+i},Object(m.jsx)("td",{className:"detailedTooltip__label"},Object(m.jsx)("div",{className:"detailedTooltip__labelContainer"},e)),Object(m.jsx)("td",{className:"detailedTooltip__value"},Object(m.jsx)("div",{className:"detailedTooltip__valueContainer"},t))):null,I=e=>t=>function({header:i,values:n}){const o=n.find((({isHighlighted:e})=>e));if(!o)return null;const a=((e,t,i)=>{var n;const o=[];if(t){const i=Object(p.f)(e.x.aggType)?null:e.x.formatter;o.push({label:e.x.title,value:i?i(t.value):`${t.value}`})}const a=i.seriesIdentifier,r=null!==(n=e.y.find((({accessor:e})=>e===a.yAccessor)))&&void 0!==n?n:null;return r&&o.push({label:r.title,value:r.formatter?r.formatter(i.value):`${i.value}`}),e.z&&!Object(s.isNil)(i.markValue)&&o.push({label:e.z.title,value:e.z.formatter?e.z.formatter(i.markValue):`${i.markValue}`}),a.splitAccessors.forEach(((t,i)=>{var n;const a=(null!==(n=e.series)&&void 0!==n?n:[]).find((({accessor:e},t)=>e===i||i===`${p.a}::${t}`));a&&o.push({label:null==a?void 0:a.title,value:null!=a&&a.formatter&&!i.toString().startsWith(p.a)?null==a?void 0:a.formatter(t):`${t}`})})),e.splitColumn&&void 0!==a.smHorizontalAccessorValue&&void 0!==a.smHorizontalAccessorValue&&o.push({label:e.splitColumn.title,value:`${a.smHorizontalAccessorValue}`}),e.splitRow&&void 0!==a.smVerticalAccessorValue&&void 0!==a.smVerticalAccessorValue&&o.push({label:e.splitRow.title,value:`${a.smVerticalAccessorValue}`}),o})(e,i,o);return 0===a.length?null:Object(m.jsx)("div",{className:"detailedTooltip"},t&&i&&Object(m.jsx)("div",{className:"detailedTooltip__header"},t(i)),Object(m.jsx)("table",null,Object(m.jsx)("tbody",null,a.map(E))))};function M({addLegend:e,legendPosition:t}){return{show:e,position:t}}var P=i(23);function D({type:e,title:t,labels:i,scale:n,...o},{categoryLines:a,valueAxis:r},{params:l,format:d,formatter:u,title:p="",aggType:m},v,f=!1,g=!1,b=!1){const h=e===k.b.Category,x=(h||v.some((({valueAxis:e})=>e===o.id)))&&o.show,y=o.id,j=h?{show:a}:{show:r===o.id},T=m===S.BUCKET_TYPES.DATE_RANGE||m===S.BUCKET_TYPES.RANGE?s.identity:u,w={formatter:T,labelFormatter:R(i.truncate,T),show:i.show,rotation:i.rotate,showOverlappingLabels:!i.filter,showDuplicates:!i.filter},O=function(e,t,i,n){var o;const a=n?z(e,"number"===(null==i?void 0:i.id)||"number"===(null==i||null===(o=i.params)||void 0===o?void 0:o.id)&&(null==i?void 0:i.id)!==S.BUCKET_TYPES.RANGE&&(null==i?void 0:i.id)!==S.BUCKET_TYPES.TERMS,"date"in t,"interval"in t):z(e,!0);return{...e,type:a}}(n,l,d,h),C=t.text||p,_=h&&f?c.LabelRotation.Horizontal:c.LabelRotation.Vertical;return{...o,show:x,groupId:y,title:C,ticks:w,grid:j,scale:O,style:B(g,0,w,C,_),domain:V(O,h),integersOnly:"count"===m,timeAxisLayerCount:g?3:0}}function R(e,t){return null==e?t:i=>{const n=`${t?t(i):i}`;return n.length>e?`${n.slice(0,e)}...`:n}}function z(e,t,i=!1,n=!1){if(i)return l.ScaleType.Time;if(n)return l.ScaleType.Linear;if(!t)return l.ScaleType.Ordinal;const o=null==e?void 0:e.type;return o===k.e.SquareRoot?l.ScaleType.Sqrt:o}function B(e,t,i,n,o=c.LabelRotation.Vertical){var a;return e?{...P.MULTILAYER_TIME_AXIS_STYLE,tickLabel:{...P.MULTILAYER_TIME_AXIS_STYLE.tickLabel,visible:Boolean(null==i?void 0:i.show)},tickLine:{...P.MULTILAYER_TIME_AXIS_STYLE.tickLine,visible:Boolean(null==i?void 0:i.show)},axisTitle:{visible:(null!=n?n:"").trim().length>0}}:{axisTitle:{visible:(null!=n?n:"").trim().length>0},tickLabel:{visible:Boolean(null==i?void 0:i.show),rotation:-(null!==(a=null==i?void 0:i.rotation)&&void 0!==a?a:o)}}}function V(e,t){if(t||!e)return;const{min:i,max:n,defaultYExtents:o,boundsMargin:a}=e;return{fit:o,padding:a||void 0,min:null!=i?i:NaN,max:null!=n?n:NaN}}var F=i(21);function N(e,t){if(!t)return;if(Array.isArray(t))return Object(s.compact)(t.map((t=>{const i=t&&e[t.accessor];return i&&$(i,t)})));const i=e[t.accessor];return i&&$(i,t)}const $=({id:e,name:t},{accessor:i,format:n,params:o,aggType:a})=>({accessor:e,column:i,title:t,format:n,aggType:a,aggId:Object(F.a)(e),formatter:e=>Object(b.c)().deserialize(n).convert(e),params:o});var U=i(27);const H=(e,t,i)=>{const n=e.filter((({type:e,data:{id:i}})=>e===U.ChartType.Histogram&&void 0!==t.find((({aggId:e})=>e===i))));return!([...n.reduce(((e,{valueAxis:t,mode:i})=>(e.add(t),e)),new Set)].length>1)&&n.every((({valueAxis:e,mode:t})=>"stacked"===t))};i(42);const Y="__chart_split__",X=({splitColumnAccessor:e,splitRowAccessor:t})=>e||t?Object(m.jsx)(r.a.Fragment,null,Object(m.jsx)(l.GroupBy,{id:Y,by:(i,n)=>{const o=e||t;return o?"function"==typeof o?o(n):n[o]:i.id},sort:l.Predicate.DataIndex}),Object(m.jsx)(l.SmallMultiples,{splitVertically:t?Y:void 0,splitHorizontally:e?Y:void 0})):null,G=e=>{var t,i,n,r;const[f,k]=Object(a.useState)((()=>{var t;const i=null==e.visParams.addLegend||e.visParams.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",i)})),[L,E]=Object(a.useState)(null),P=Object(a.useRef)(null),R=Object(c.useActiveCursor)(Object(b.a)(),P,{datatables:[e.visData]}),z=Object(a.useCallback)((t=>{t&&e.renderComplete()}),[e]);Object(a.useEffect)((()=>{(async()=>{const e=await Object(b.d)().getPalettes();E(e)})()}),[]);const B=Object(a.useCallback)(((t,i,n,o)=>{const a=Object(p.d)(n);return n=>{if(null!==i){const r=Object(c.getFilterFromChartClickEventFn)(t,i,a,o)(n);e.fireEvent(r)}}}),[e]),V=Object(a.useCallback)(((t,i,n)=>{if(null!==i&&n)return n=>{const o=Object(c.getBrushFromChartBrushEventFn)(t,i)(n);e.fireEvent(o)}}),[e]),F=Object(a.useCallback)(((e,t,i)=>{const n=Object(p.d)(i);return i=>null!==t?Object(c.getFilterFromSeriesFn)(e)(i,n):null}),[]),$=Object(a.useCallback)(((t,i=!1)=>{e.fireEvent({...t,data:{...t.data,negate:i}})}),[e]),U=Object(a.useCallback)((()=>{k((t=>{var i;const n=!t;return null!==(i=e.uiState)&&void 0!==i&&i.set&&e.uiState.set("vis.legendOpen",n),n}))}),[e.uiState]),Y=Object(a.useCallback)(((t,i)=>{var n,o;const a=(null===(n=e.uiState)||void 0===n?void 0:n.get("vis.colors"))||{};a[i]!==t&&t?a[i]=t:delete a[i],null!==(o=e.uiState)&&void 0!==o&&o.set&&(e.uiState.setSilent("vis.colors",null),e.uiState.set("vis.colors",a),e.uiState.emit("colorChanged"))}),[e.uiState]),{visData:G,visParams:K,syncColors:W,syncTooltips:q}=e,Z=Object(b.e)().useDarkMode(),J=function(e,t,i=!1,n=!1){var o,a,r,s;const{thresholdLine:c,orderBucketsBySum:d,addTimeMarker:u,radiusRatio:m,labels:v,fittingFunction:f,detailedTooltip:g,isVislibVis:b,fillOpacity:x}=t,y=function(e,{x:t,y:i,z:n,series:o,splitColumn:a,splitRow:r}){var l,s;const c=Array.isArray(o)||void 0===o?o:[o];return{x:null!==(l=N(e,t))&&void 0!==l?l:{accessor:null,aggId:null,aggType:null,title:h.i18n.translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}},y:null!==(s=N(e,i))&&void 0!==s?s:[],z:n&&(null==n?void 0:n.length)>0?N(e,n[0]):void 0,series:N(e,c),splitColumn:null!=a&&a.length?N(e,a[0]):void 0,splitRow:null!=r&&r.length?N(e,r[0]):void 0}}(e.columns,t.dimensions),j=function(e,{addTooltip:t,detailedTooltip:i}){return{type:t?l.TooltipType.VerticalCursor:l.TooltipType.None,detailedTooltip:i?I(e):void 0}}(y,t),T=[],w=new Set;t.dimensions.y.forEach((e=>{const i=e.accessor,n=y.y.find((({column:e})=>e===i)),o=Object(p.c)(null==n?void 0:n.aggId),a=t.seriesParams.find((({data:{id:e}})=>e===o)),r=t.valueAxes.find((({id:e})=>e===(null==a?void 0:a.valueAxis)));n&&r&&!w.has(o)&&(T.push(D(r,t.grid,n,t.seriesParams)),w.add(o))}));const O=function({position:e}){return"left"===e||"right"===e?90:0}(t.categoryAxes[0]),C=(null===(o=t.dimensions.x)||void 0===o?void 0:o.aggType)===S.BUCKET_TYPES.DATE_HISTOGRAM,_=(null===(a=t.dimensions.x)||void 0===a?void 0:a.aggType)===S.BUCKET_TYPES.HISTOGRAM,k=(C||_)&&H(t.seriesParams,y.y,T),L=k&&C&&!i&&0===O,E=D(t.categoryAxes[0],t.grid,y.x,t.seriesParams,C,L,n),P=null!==(r=y.x.params.date)&&void 0!==r&&r;return{markSizeRatio:.6*m,fittingFunction:null!=f?f:l.Fit.Linear,fillOpacity:x,detailedTooltip:g,orderBucketsBySum:d,isTimeChart:P,isVislibVis:b,showCurrentTime:u&&P,showValueLabel:null!==(s=v.show)&&void 0!==s&&s,enableHistogramMode:k,tooltip:j,aspects:y,xAxis:E,yAxes:T,legend:M(t),rotation:O,thresholdLine:A(c,T,t.seriesParams)}}(G,K,e.useLegacyTimeAxis,Z),Q=function(){const e=Object(b.g)();return e.isDefault("dateFormat:tz")?g.a.tz.guess()||g()().format("Z"):e.get("dateFormat:tz","Browser")}(),ee=J.xAxis.scale.type===l.ScaleType.Ordinal?void 0:(e=>{var t;const i=null!==(t=null==e?void 0:e.interval)&&void 0!==t?t:void 0,n=e.date?e.bounds:null;return n?{min:n.min,max:n.max,minInterval:i}:{minInterval:i,min:NaN,max:NaN}})(J.aspects.x.params),te=K.seriesParams.some((({type:e,data:{id:t}})=>e===u.ChartType.Histogram&&void 0!==J.aspects.y.find((({aggId:e})=>e===t)))),ie=J.xAxis.scale.type===l.ScaleType.Ordinal?void 0:((e,{accessor:t,params:i},n,o,a)=>{if(t&&o&&"min"in o&&"max"in o&&"intervalESValue"in i&&"intervalESUnit"in i){const{interval:r,intervalESValue:l,intervalESUnit:d}=i,u=Object(s.uniq)(e.map((e=>e[t])).sort()),[p]=u,m=u[u.length-1],v=Math.min(p,o.min),f=Math.max(o.max-r,m);return{min:v,max:a?f:f+r,minInterval:Object(c.getAdjustedInterval)(u,l,d,n)}}return{minInterval:"interval"in i?i.interval:void 0,min:NaN,max:NaN}})(G.rows,J.aspects.x,Q,ee,te),ne=Object(a.useMemo)((()=>{var e;return null!==(e=J.legend.position)&&void 0!==e?e:l.Position.Right}),[J.legend.position]),oe=((e,t=!1)=>Object(s.memoize)((({splitAccessors:i,yAccessor:n})=>{var o,a;const r=function(e,t){if(e.size<1)return[];const i=[];return e.forEach(((e,n)=>{const o=(null!=t?t:[]).find((({accessor:e})=>e===n));i.push(null!=o&&o.formatter?null==o?void 0:o.formatter(e):e)})),i}(i,e.series),l=null!==(o=null===(a=e.y.find((({accessor:e})=>e===n)))||void 0===a?void 0:a.title)&&void 0!==o?o:null;return l?t?0===r.length?l:`${r.join(" - ")}: ${l}`:r.length>0?r.join(" - "):l:null})))(J.aspects,J.aspects.y.length>1),ae=null===(t=J.aspects.series)||void 0===t?void 0:t.map((({accessor:e,formatter:t})=>({accessor:e,formatter:t}))),re=Object(a.useMemo)((()=>((e,t,i)=>{const n=[];return t?(e.forEach((e=>{let o="";null==t||t.forEach((({accessor:t,formatter:i})=>{if(!t)return;const n=i?i(e[t]):e[t];o?o+=` - ${n}`:o=n})),i.length>1?i.forEach((e=>{n.includes(`${o}: ${e.title}`)||n.push(`${o}: ${e.title}`)})):n.includes(o)||n.push(o)})),n):[]})(G.rows,ae,J.aspects.y)),[J.aspects.y,ae,G.rows]),le=Object(a.useCallback)((t=>{var i;const n=oe(t);if(!n)return null;const o=null!==(i=e.uiState)&&void 0!==i&&i.get?e.uiState.get("vis.colors",{}):{};return Object.keys(o).includes(n)?o[n]:(null==L?void 0:L.get(K.palette.name).getCategoricalColor([{name:n,rankAtDepth:ae?re.findIndex((e=>e===n)):J.aspects.y.findIndex((e=>e.accessor===t.yAccessor)),totalSeriesAtDepth:ae?re.length:J.aspects.y.length}],{maxDepth:1,totalSeries:ae?re.length:J.aspects.y.length,behindText:!1,syncColors:W}))||null}),[re,J.aspects.y,oe,e.uiState,ae,W,K.palette.name,L]),se=Object(p.e)(J.aspects.x),ce=Object(a.useMemo)((()=>J.aspects.series?Object(s.compact)(J.aspects.series.map(Object(p.b)(p.a))):[]),[J.aspects.series]),de=J.aspects.splitColumn?Object(p.b)(p.a,!0)(J.aspects.splitColumn):void 0,ue=J.aspects.splitRow?Object(p.b)(p.a,!0)(J.aspects.splitRow):void 0,pe=Object(a.useMemo)((()=>(({aspects:e,yAxes:t,xAxis:i,showValueLabel:n,enableHistogramMode:o,fittingFunction:a,fillOpacity:r},s,c,d,f,g,b,h)=>{let x=[];return t.forEach((t=>{const i=t.scale,n=s.filter((e=>e.valueAxis===t.groupId)),o=[];n.forEach((t=>{const i=t.data.id,n=e.y.filter((e=>e.aggId===i));o.push(...n)}));const a=o.map((e=>e.accessor));if("percentage"===i.mode){var r,d;const t=(null===(r=e.splitColumn)||void 0===r?void 0:r.accessor)||(null===(d=e.splitRow)||void 0===d?void 0:d.accessor);x=((e,t,i,n)=>{const o=[String(t)];return n&&o.push(n),Object(l.computeRatioByGroups)(e,o,i.map((e=>[t=>t[e],(t,i)=>({...t,[e]:i})])))})(c,b,a,t)}})),s.map((({show:s,valueAxis:y,data:{id:j},lineWidth:T,showCircles:w,circlesRadius:O,drawLinesBetweenPoints:C,mode:_,interpolate:S,type:k})=>{var A,L,E,I;const M=e.y.filter((e=>Object(p.g)(j,e)));if(!s||!M.length)return null;const P=M.map((e=>e.accessor)),D=`${k}-${P[0]}`,R=null===(A=t.find((({groupId:e})=>e===y)))||void 0===A?void 0:A.scale,z="stacked"===_,B="normal"===(null==R?void 0:R.mode)||null==R?void 0:R.mode,V=z?`__pseudo_stacked_group-${y}__`:y,F=z?y:void 0;switch(k){case u.ChartType.Histogram:return Object(m.jsx)(l.BarSeries,{key:D,id:D,name:d,color:f,tickFormat:M[0].formatter,groupId:V,useDefaultGroupDomain:F,xScaleType:i.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:b,yAccessors:P,splitSeriesAccessors:h,data:z||"percentage"!==(null==R?void 0:R.mode)?c:x,timeZone:g,stackAccessors:z?["__any_value__"]:void 0,enableHistogramMode:o,stackMode:B,minBarHeight:2,displayValueSettings:{showValueLabel:n,isValueContainedInElement:!1,isAlternatingValueLabel:!1,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges,l.LabelOverflowConstraint.BarGeometry]}});case u.ChartType.Area:case u.ChartType.Line:const t=w&&null!==(L=null===(E=e.z)||void 0===E?void 0:E.accessor)&&void 0!==L?L:void 0;return Object(m.jsx)(l.AreaSeries,{key:D,id:D,fit:a,color:f,tickFormat:M[0].formatter,name:d,curve:v(S),groupId:V,useDefaultGroupDomain:F,xScaleType:i.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:b,yAccessors:P,markSizeAccessor:t,markFormat:null===(I=e.z)||void 0===I?void 0:I.formatter,splitSeriesAccessors:h,data:z||"percentage"!==(null==R?void 0:R.mode)?c:x,stackAccessors:z?["__any_value__"]:void 0,displayValueSettings:{showValueLabel:n,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges]},timeZone:g,stackMode:B,areaSeriesStyle:{area:{...k===u.ChartType.Line?{opacity:0}:{opacity:r}},fit:{area:{...k===u.ChartType.Line?{opacity:0}:{opacity:r}}},line:{strokeWidth:T,visible:C},point:{visible:w,fill:t?l.ColorVariant.Series:void 0,radius:O}}});default:return null}}))})(J,K.seriesParams,G.rows,oe,le,Q,se,ce)),[J,le,oe,ce,Q,G.rows,K.seriesParams,se]),me=Object(a.useMemo)((()=>((e,t,i,n,o)=>({anchor:r,color:l,onClose:s,onChange:d,seriesIdentifiers:[u]})=>{const p=i(u),v=null==o?void 0:o.get("vis.colors",{}),f=Object.keys(v).includes(p);let g=!1;const b=Object(a.useCallback)((()=>{null==s||s()}),[s]);return Object(m.jsx)(x.EuiOutsideClickDetector,{onOutsideClick:b},Object(m.jsx)(x.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:r,anchorPosition:j(e),closePopover:s,panelPaddingSize:"s"},Object(m.jsx)(c.ColorPicker,{color:"kibana_palette"===n?l:l.toLowerCase(),onChange:e=>{p&&(e&&d(e),t(e,p),e&&g||s())},label:p,useLegacyColors:"kibana_palette"===n,colorIsOverwritten:f,onKeyDown:e=>{13===e.keyCode&&(null==s||s()),g=!0}})))})(ne,Y,oe,K.palette.name,e.uiState)),[oe,ne,e.uiState,Y,K.palette.name]);return Object(m.jsx)("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},Object(m.jsx)(c.LegendToggle,{onClick:U,showLegend:f,legendPosition:ne}),Object(m.jsx)(l.Chart,{size:"100%",ref:P},Object(m.jsx)(X,{splitColumnAccessor:de,splitRowAccessor:ue}),Object(m.jsx)(C,o()({},J,{truncateLegend:K.truncateLegend,maxLegendLines:K.maxLegendLines,showLegend:f,onPointerUpdate:R,externalPointerEvents:{tooltip:{visible:q,placement:l.Placement.Right}},legendPosition:ne,legendSize:d.LegendSizeToPixels[null!==(i=K.legendSize)&&void 0!==i?i:d.DEFAULT_LEGEND_SIZE],xDomain:ee,adjustedXDomain:ie,legendColorPicker:me,onElementClick:B(G,se,ce,null!=de?de:ue),ariaLabel:K.ariaLabel,onBrushEnd:V(G,se,"interval"in J.aspects.x.params),onRenderChange:z,legendAction:J.aspects.series&&(null!==(n=null===(r=J.aspects.series)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0?y((async e=>{if(!e)return!1;const t=await Object(b.b)().createFiltersFromValueClickAction(e.data);return Boolean(t.length)}),F(G,se,ce),$,oe):void 0})),Object(m.jsx)(_,J.thresholdLine),Object(m.jsx)(O,{enabled:J.showCurrentTime,isDarkMode:Z,domain:ee}),Object(m.jsx)(w,{isFullBin:!J.enableHistogramMode,enabled:J.isTimeChart,isDarkMode:Z,domain:ee,hideTooltips:!J.detailedTooltip,adjustedDomain:ie}),Object(m.jsx)(T,J.xAxis),J.yAxes.map((e=>Object(m.jsx)(T,o()({key:e.id},e)))),pe))};t.default=Object(a.memo)(G)}}]);