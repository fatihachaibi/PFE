(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[13],{134:function(e,t,r){"use strict";r.r(t),r.d(t,"getSharingData",(function(){return a})),r.d(t,"showPublicUrlSwitch",(function(){return c}));var n=r(7),i=r(72),s=r(75);async function a(e,t,r){const{uiSettings:a,data:c}=r,o=e.createCopy(),u=o.getField("index");let l=o.getField("filter");o.setField("sort",Object(i.c)(t.sort,u,a.get(n.SORT_DEFAULT_ORDER_SETTING))),o.removeField("filter"),o.removeField("highlight"),o.removeField("highlightAll"),o.removeField("aggs"),o.removeField("size");let d=t.columns||[];if(d&&d.length>0){let e;!a.get(n.DOC_HIDE_TIME_COLUMN_SETTING)&&u&&u.timeFieldName&&(e=u.timeFieldName),e&&!d.includes(e)&&(d=[e,...d])}const f=c.query.timefilter.timefilter.createFilter(u),S=c.query.timefilter.timefilter.createRelativeFilter(u);return{getSearchSource:e=>{const t=e?f:S;if(Array.isArray(l)?l=l.filter((e=>!Object(s.c)(e,f))):Object(s.c)(l,f)&&(l=void 0),l&&t)o.setField("filter",Array.isArray(l)?[t,...l]:[t,l]);else{const e=t||l;o.setField("filter",e)}return!a.get(n.SEARCH_FIELDS_FROM_SOURCE)&&d.length&&o.setField("fields",d),o.getSerializedFields(!0)},columns:d}}const c=e=>!!e.discover&&!!e.discover.show},69:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var n=r(9);function i(e,t){const r=t.getFieldByName(e);return!(!r||!r.sortable)}function s(e,t){return Array.isArray(e)?function(e){return 2===e.length&&"string"==typeof e[0]&&("desc"===e[1]||"asc"===e[1])}(e)?[{[e[0]]:e[1]}]:e.map((e=>function(e,t){if(Array.isArray(e)&&2===e.length&&i(String(e[0]),t)){const[t,r]=e;return{[t]:r}}if(Object(n.isPlainObject)(e)&&i(Object.keys(e)[0],t))return e}(e,t))).filter((e=>"object"==typeof e)):[]}function a(e,t){return s(e,t).reduce(((e,t)=>{const r=Object.entries(t);return r&&r[0]&&e.push(r[0]),e}),[])}},72:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.b})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s.a}));var n=r(69);function i(e,t,r="desc"){if(!e||!t||Array.isArray(e)&&0===e.length)return null!=t&&t.timeFieldName?[{_doc:r}]:[{_score:r}];const{timeFieldName:i}=t;return Object(n.a)(e,t).map((e=>t.isTimeNanosBased()&&i&&e[i]?{[i]:{order:e[i],numeric_type:"date_nanos"}}:e))}var s=r(73)},73:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(69);function i(e,t="desc",r=!1){return null!=e&&e.timeFieldName&&Object(n.c)(e.timeFieldName,e)&&!r?[[e.timeFieldName,t]]:[]}},75:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return S})),r.d(t,"a",(function(){return y}));var n=r(9),i=r(0),s=r(42),a=r(2),c=r(15),o=r(79),u=r(10);const l="_a";function d({getStateDefaults:e,storeInSessionStorage:t=!1,history:r,toasts:i,uiSettings:u}){const d=e?e():{},S=Object(a.createKbnUrlStateStorage)({useHash:t,history:r,...i&&Object(a.withNotifyOnErrors)(i)}),y=S.get(l);var h;y&&y.query&&!y.query.language&&(y.query=(h=y.query,Object(n.has)(h,"language")?h:{query:h,language:"lucene"})),null!=y&&y.sort&&!y.sort.length&&delete y.sort;let m,v=Object(o.a)({...d,...y},u);const p=Object(a.createStateContainer)(v),b={...p,set:e=>{e&&(m=p.getState(),p.set(e))}},{start:O,stop:F}=Object(a.syncState)({storageKey:l,stateContainer:b,stateStorage:S}),_=async(e={})=>{const t={...p.getState(),...e};await S.set(l,t,{replace:!0})};return{kbnUrlStateStorage:S,appStateContainer:b,startSync:O,stopSync:F,setAppState:e=>f(b,e),replaceUrlAppState:_,resetInitialAppState:()=>{v=p.getState()},resetAppState:()=>{const t=Object(o.a)(e?e():{},u);f(b,t)},getPreviousAppState:()=>m,flushToUrl:()=>S.kbnUrlControls.flush(),isAppStateDirty:()=>!g(v,p.getState()),initializeAndSync:(e,t,r)=>{p.getState().index!==e.id&&f(b,{index:e.id});const i=p.getState().filters;i&&t.setAppFilters(Object(n.cloneDeep)(i));const a=p.getState().query;a&&r.query.queryString.setQuery(a);const o=Object(c.connectToQueryState)(r.query,p,{filters:s.FilterStateStore.APP_STATE,query:!0}),{stop:u}=Object(c.syncQueryStateWithUrl)(r.query,S);return _({}).then((()=>{O()})),()=>{o(),u(),F()}}}}function f(e,t){const r=e.getState(),n={...r,...t};g(r,n)||e.set(n)}function S(e,t){return!e&&!t||!(!e||!t)&&Object(s.compareFilters)(e,t,s.COMPARE_ALL_OPTIONS)}function g(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const{filters:r=[],...i}=e,{filters:s=[],...a}=t;return Object(n.isEqual)(i,a)&&S(r,s)}function y(e){const t=()=>e.getSavedSearch().id;return{getName:async()=>{const t=e.getSavedSearch();return t.id&&t.title||i.i18n.translate("discover.discoverDefaultSearchSessionName",{defaultMessage:"Discover"})},getLocatorData:async()=>({id:u.a,initialState:h({...e,getSavedSearchId:t,shouldRestoreSearchSession:!1}),restoreState:h({...e,getSavedSearchId:t,shouldRestoreSearchSession:!0})})}}function h({appStateContainer:e,data:t,getSavedSearchId:r,shouldRestoreSearchSession:n}){const i=e.get();return{filters:t.query.filterManager.getFilters(),indexPatternId:i.index,query:i.query,savedSearchId:r(),timeRange:n?t.query.timefilter.timefilter.getAbsoluteTime():t.query.timefilter.timefilter.getTime(),searchSessionId:n?t.search.session.getSessionId():void 0,columns:i.columns,sort:i.sort,savedQuery:i.savedQuery,interval:i.interval,refreshInterval:n?{pause:!0,value:0}:void 0,useHash:!1,viewMode:i.viewMode,hideAggregatedPreview:i.hideAggregatedPreview}}},79:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(9),i=r(7);function s(e,t){if(!e.columns)return e;const r=!t.get(i.SEARCH_FIELDS_FROM_SOURCE),s=t.get(i.DEFAULT_COLUMNS_SETTING);if(r){let t=e.columns.filter((e=>"_source"!==e));return 0!==t.length||Object(n.isEqual)(s,["_source"])||(t=s,t=t.filter((e=>"_source"!==e))),{...e,columns:t}}if(0===e.columns.length){const t=s;return 0===t.length&&t.push("_source"),{...e,columns:[...t]}}return e}}}]);