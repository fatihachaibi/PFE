(window.controls_bundle_jsonpfunction=window.controls_bundle_jsonpfunction||[]).push([[2],{36:function(e,t,n){"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function i(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],r=0;r<e.length;r++){var l=e[r],s=t.base?l[0]+t.base:l[0],c=n[s]||0,d="".concat(s," ").concat(c);n[s]=c+1;var u=i(d),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:f(p,t),references:1}),o.push(d)}return o}function s(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var a=n.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,n){var o=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var m=null,g=0;function f(e,t){var n,o,r;if(t.singleton){var a=g++;n=m||(m=s(t)),o=u.bind(null,n,a,!1),r=u.bind(null,n,a,!0)}else n=s(t),o=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=i(n[o]);a[r].references--}for(var s=l(e,t),c=0;c<n.length;c++){var d=i(n[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=s}}}},37:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,a=e[1]||"",i=e[3];if(!i)return a;if(t&&"function"==typeof btoa){var l=(n=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(s).concat([l]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(r[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},42:function(e,t,n){"use strict";e.exports=n(71)},45:function(e,t,n){"use strict";e.exports=n(69)},46:function(e,t,n){"use strict";e.exports=n(70)},47:function(e,t,n){e.exports=n(23)(3)},64:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(65);case"v8light":return n(67)}},65:function(e,t,n){var o=n(36),r=n(66);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},66:function(e,t,n){(t=n(37)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px;min-width:224px}.controlFrameCloneWrapper--medium{width:400px;min-width:400px}.controlFrameCloneWrapper--large{width:800px;min-width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#2c2f37;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}@media only screen and (max-width: 574px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}@media only screen and (min-width: 768px) and (max-width: 991px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}.controlFrame__labelToolTip{max-width:40%}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper.controlFrameWrapper-isEditable .controlFrame__formControlLayoutLabel{padding-left:0}.controlFrameWrapper:not(.controlFrameWrapper-isEditable) .controlFrameFormControlLayout--twoLine .euiFormControlLayout__childrenWrapper{border-radius:6px 0 0 6px}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px;min-width:224px}.controlFrameWrapper--medium{width:400px;min-width:400px}.controlFrameWrapper--large{width:800px;min-width:800px}@media only screen and (max-width: 574px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}@media only screen and (min-width: 768px) and (max-width: 991px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(54,162,239,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#1D1E24;box-shadow:0 0 0 1px #343741}.controlFrameWrapper .controlFrameFloatingActions--fatalError{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#1D1E24;box-shadow:0 0 0 1px #343741}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#264341;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},67:function(e,t,n){var o=n(36),r=n(68);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},68:function(e,t,n){(t=n(37)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px;min-width:224px}.controlFrameCloneWrapper--medium{width:400px;min-width:400px}.controlFrameCloneWrapper--large{width:800px;min-width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#e9edf3;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}@media only screen and (max-width: 574px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}@media only screen and (min-width: 768px) and (max-width: 991px){.controlFrameCloneWrapper{width:100%}.controlFrameCloneWrapper--small{min-width:unset}.controlFrameCloneWrapper--medium{min-width:unset}.controlFrameCloneWrapper--large{min-width:unset}}.controlFrame__labelToolTip{max-width:40%}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper.controlFrameWrapper-isEditable .controlFrame__formControlLayoutLabel{padding-left:0}.controlFrameWrapper:not(.controlFrameWrapper-isEditable) .controlFrameFormControlLayout--twoLine .euiFormControlLayout__childrenWrapper{border-radius:6px 0 0 6px}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px;min-width:224px}.controlFrameWrapper--medium{width:400px;min-width:400px}.controlFrameWrapper--large{width:800px;min-width:800px}@media only screen and (max-width: 574px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}@media only screen and (min-width: 768px) and (max-width: 991px){.controlFrameWrapper--small{min-width:unset}.controlFrameWrapper--medium{min-width:unset}.controlFrameWrapper--large{min-width:unset}}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(0,119,204,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#fff;box-shadow:0 0 0 1px #D3DAE6}.controlFrameWrapper .controlFrameFloatingActions--fatalError{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#fff;box-shadow:0 0 0 1px #D3DAE6}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#e6f9f7;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o,i=n(46),l=n(42);function s(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function c(e){return null!==e&&e>=0}const d={scaleX:1,scaleY:1},u=({layoutRects:e,activeIndex:t,overIndex:n,index:o})=>{const r=s(e,n,t),a=e[o],i=r[o];return i&&a?{x:i.offsetLeft-a.offsetLeft,y:i.offsetTop-a.offsetTop,scaleX:i.width/a.width,scaleY:i.height/a.height}:null},p={scaleX:1,scaleY:1},m=a.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:u,wasSorting:{current:!1}}),g=({isSorting:e,index:t,newIndex:n,transition:o})=>!(!o||!e&&n===t),f={duration:200,easing:"ease"},h=l.CSS.Transition.toString({property:"transform",duration:0,easing:"linear"}),b={roleDescription:"sortable"},v=[i.KeyboardCode.Down,i.KeyboardCode.Right,i.KeyboardCode.Up,i.KeyboardCode.Left];t.SortableContext=function({children:e,id:t,items:n,strategy:o=u}){const{active:s,overlayNode:c,droppableRects:d,over:p,recomputeLayouts:g,willRecomputeLayouts:f}=i.useDndContext(),h=l.useUniqueId("Sortable",t),b=Boolean(null!==c.rect),v=r.useMemo((()=>n.map((e=>"string"==typeof e?e:e.id))),[n]),y=s?v.indexOf(s.id):-1,x=-1!==y,w=r.useRef(x),C=p?v.indexOf(p.id):-1,j=r.useRef(v),F=function(e,t){return e.reduce(((e,n,o)=>{const r=t.get(n);return r&&(e[o]=r),e}),Array(e.length))}(v,d),O=(E=j.current,!(v.join()===E.join()));var E;const S=-1!==C&&-1===y||O;l.useIsomorphicLayoutEffect((()=>{O&&x&&!f&&g()}),[O,x,g,f]),r.useEffect((()=>{j.current=v}),[v]),r.useEffect((()=>{requestAnimationFrame((()=>{w.current=x}))}),[x]);const D=r.useMemo((()=>({activeIndex:y,containerId:h,disableTransforms:S,items:v,overIndex:C,useDragOverlay:b,sortedRects:F,strategy:o,wasSorting:w})),[y,h,S,v,C,F,b,o,w]);return a.createElement(m.Provider,{value:D},e)},t.arrayMove=s,t.defaultAnimateLayoutChanges=g,t.horizontalListSortingStrategy=({layoutRects:e,activeNodeRect:t,activeIndex:n,overIndex:o,index:r})=>{var a;const i=null!=(a=e[n])?a:t;if(!i)return null;const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];return r||a?n<t?r?o.offsetLeft-(r.offsetLeft+r.width):a.offsetLeft-(o.offsetLeft+o.width):a?a.offsetLeft-(o.offsetLeft+o.width):o.offsetLeft-(r.offsetLeft+r.width):0}(e,r,n);if(r===n){const t=e[o];return t?{x:n<o?t.offsetLeft+t.width-(i.offsetLeft+i.width):t.offsetLeft-i.offsetLeft,y:0,...d}:null}return r>n&&r<=o?{x:-i.width-l,y:0,...d}:r<n&&r>=o?{x:i.width+l,y:0,...d}:{x:0,y:0,...d}},t.rectSortingStrategy=u,t.rectSwappingStrategy=({activeIndex:e,index:t,layoutRects:n,overIndex:o})=>{let r,a;return t===e&&(r=n[t],a=n[o]),t===o&&(r=n[t],a=n[e]),a&&r?{x:a.offsetLeft-r.offsetLeft,y:a.offsetTop-r.offsetTop,scaleX:a.width/r.width,scaleY:a.height/r.height}:null},t.sortableKeyboardCoordinates=(e,{context:{droppableContainers:t,translatedRect:n,scrollableAncestors:o}})=>{if(v.includes(e.code)){if(e.preventDefault(),!n)return;const a=[];Object.entries(t).forEach((([t,o])=>{if(null==o?void 0:o.disabled)return;const r=null==o?void 0:o.node.current;if(!r)return;const l=i.getViewRect(r);switch(e.code){case i.KeyboardCode.Down:n.top+n.height<=l.top&&a.push([t,l]);break;case i.KeyboardCode.Up:n.top>=l.top+l.height&&a.push([t,l]);break;case i.KeyboardCode.Left:n.left>=l.left+l.width&&a.push([t,l]);break;case i.KeyboardCode.Right:n.left+n.width<=l.left&&a.push([t,l])}}));const l=i.closestCorners(a,n);if(l){var r;const e=null==(r=t[l])?void 0:r.node.current;if(e){const t=i.getScrollableAncestors(e).some(((e,t)=>o[t]!==e)),r=i.getViewRect(e),a=t?{x:0,y:0}:{x:n.width-r.width,y:n.height-r.height};return{x:r.left-a.x,y:r.top-a.y}}}}},t.useSortable=function({animateLayoutChanges:e=g,attributes:t,disabled:n,data:o,id:a,strategy:d,transition:u=f}){const{items:p,containerId:v,activeIndex:y,disableTransforms:x,sortedRects:w,overIndex:C,useDragOverlay:j,strategy:F,wasSorting:O}=r.useContext(m),E=p.indexOf(a),S=r.useMemo((()=>({sortable:{containerId:v,index:E,items:p},...o})),[v,o,E,p]),{rect:D,node:T,setNodeRef:L}=i.useDroppable({id:a,data:S}),{active:I,activeNodeRect:R,activatorEvent:W,attributes:_,setNodeRef:M,listeners:N,isDragging:A,over:k,transform:B}=i.useDraggable({id:a,data:S,attributes:{...b,...t},disabled:n}),P=l.useCombinedRefs(L,M),V=Boolean(I),z=V&&O.current&&!x&&c(y)&&c(C),K=!j&&A,$=K&&z?B:null,H=z?null!=$?$:(null!=d?d:F)({layoutRects:w,activeNodeRect:R,activeIndex:y,overIndex:C,index:E}):null,G=c(y)&&c(C)?s(p,y,C).indexOf(a):E,U=r.useRef(G),q=e({active:I,isDragging:A,isSorting:V,id:a,index:E,items:p,newIndex:U.current,transition:u,wasSorting:O.current}),Y=function({rect:e,disabled:t,index:n,node:o}){const[a,l]=r.useState(null),s=r.useRef(n);return r.useEffect((()=>{if(!t&&n!==s.current&&o.current){const t=e.current;if(t){const e=i.getBoundingClientRect(o.current),n={x:t.offsetLeft-e.offsetLeft,y:t.offsetTop-e.offsetTop,scaleX:t.width/e.width,scaleY:t.height/e.height};(n.x||n.y)&&l(n)}}n!==s.current&&(s.current=n)}),[t,n,o,e]),r.useEffect((()=>{a&&requestAnimationFrame((()=>{l(null)}))}),[a]),a}({disabled:!q,index:E,node:T,rect:D});return r.useEffect((()=>{V&&(U.current=G)}),[V,G]),{active:I,attributes:_,activatorEvent:W,rect:D,index:E,isSorting:V,isDragging:A,listeners:N,node:T,overIndex:C,over:k,setNodeRef:P,setDroppableNodeRef:L,setDraggableNodeRef:M,transform:null!=Y?Y:H,transition:Y?h:K||!u?null:V||q?l.CSS.Transition.toString({...u,property:"transform"}):null}},t.verticalListSortingStrategy=({activeIndex:e,activeNodeRect:t,index:n,layoutRects:o,overIndex:r})=>{var a;const i=null!=(a=o[e])?a:t;if(!i)return null;if(n===e){const t=o[r];return t?{x:0,y:e<r?t.offsetTop+t.height-(i.offsetTop+i.height):t.offsetTop-i.offsetTop,...p}:null}const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];return o?n<t?r?o.offsetTop-(r.offsetTop+r.height):a?a.offsetTop-(o.offsetTop+o.height):0:a?a.offsetTop-(o.offsetTop+o.height):r?o.offsetTop-(r.offsetTop+r.height):0:0}(o,n,e);return n>e&&n<=r?{x:0,y:-i.height-l,...p}:n<e&&n>=r?{x:0,y:i.height+l,...p}:{x:0,y:0,...p}}},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o,i=n(29),l=n(42),s=n(72);const c={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},d={onDragStart:e=>`Picked up draggable item ${e}.`,onDragOver:(e,t)=>t?`Draggable item ${e} was moved over droppable area ${t}.`:`Draggable item ${e} is no longer over a droppable area.`,onDragEnd:(e,t)=>t?`Draggable item ${e} was dropped over droppable area ${t}`:`Draggable item ${e} was dropped.`,onDragCancel:e=>`Dragging was cancelled. Draggable item ${e} was dropped.`};var u;!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(u||(u={}));const p=e=>m(e,((e,t)=>e<t));function m(e,t){if(0===e.length)return-1;let n=e[0],o=0;for(var r=1;r<e.length;r++)t(e[r],n)&&(o=r,n=e[r]);return o}function g(...e){}function f(e,t){const{[e]:n,...o}=t;return o}const h=r.createContext({activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,activeNodeClientRect:null,activators:[],ariaDescribedById:{draggable:""},containerNodeRect:null,dispatch:g,draggableNodes:{},droppableRects:new Map,droppableContainers:{},over:null,overlayNode:{nodeRef:{current:null},rect:null,setRef:g},scrollableAncestors:[],scrollableAncestorRects:[],recomputeLayouts:g,windowRect:null,willRecomputeLayouts:!1}),b=Object.freeze({x:0,y:0});function v(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function y(e){if(function(e){var t;return(null==(t=window)?void 0:t.TouchEvent)&&e instanceof TouchEvent}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){var t;return(null==(t=window)?void 0:t.MouseEvent)&&e instanceof MouseEvent||e.type.includes("mouse")}(e)?{x:e.clientX,y:e.clientY}:{x:0,y:0}}function x(e,t){if(e instanceof KeyboardEvent)return"0 0";const n=y(e);return`${(n.x-t.left)/t.width*100}% ${(n.y-t.top)/t.height*100}%`}function w(e,t=e.offsetLeft,n=e.offsetTop){return{x:t+.5*e.width,y:n+.5*e.height}}const C=function(e,...t){return t.reduce(((e,t)=>({...e,top:e.top+1*t.y,bottom:e.bottom+1*t.y,left:e.left+1*t.x,right:e.right+1*t.x,offsetLeft:e.offsetLeft+1*t.x,offsetTop:e.offsetTop+1*t.y})),{...e})};function j(e){const t=[];return e?function e(n){return n?n instanceof Document&&null!=n.scrollingElement?(t.push(n.scrollingElement),t):!(n instanceof HTMLElement)||n instanceof SVGElement?t:(function(e){const t=window.getComputedStyle(e),n=/(auto|scroll|overlay)/;return null!=["overflow","overflowX","overflowY"].find((e=>{const o=t[e];return"string"==typeof o&&n.test(o)}))}(n)&&t.push(n),e(n.parentNode)):t}(e.parentNode):t}function F(e){return l.canUseDOM?e===document.scrollingElement||e instanceof Document?window:e instanceof HTMLElement?e:null:null}function O(e){return e instanceof Window?{x:e.scrollX,y:e.scrollY}:{x:e.scrollLeft,y:e.scrollTop}}var E;function S(e){const t={x:0,y:0},n={x:e.scrollWidth-e.clientWidth,y:e.scrollHeight-e.clientHeight};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(E||(E={}));const D={x:.2,y:.2};function T(e,t,{top:n,left:o,right:r,bottom:a},i=10,s=D){const{clientHeight:c,clientWidth:d}=e,u=(p=e,l.canUseDOM&&p&&p===document.scrollingElement?{top:0,left:0,right:d,bottom:c,width:d,height:c}:t);var p;const{isTop:m,isBottom:g,isLeft:f,isRight:h}=S(e),b={x:0,y:0},v={x:0,y:0},y=u.height*s.y,x=u.width*s.x;return!m&&n<=u.top+y?(b.y=E.Backward,v.y=i*Math.abs((u.top+y-n)/y)):!g&&a>=u.bottom-y&&(b.y=E.Forward,v.y=i*Math.abs((u.bottom-y-a)/y)),!h&&r>=u.right-x?(b.x=E.Forward,v.x=i*Math.abs((u.right-x-r)/x)):!f&&o<=u.left+x&&(b.x=E.Backward,v.x=i*Math.abs((u.left+x-o)/x)),{direction:b,speed:v}}function L(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:o,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:r,width:e.clientWidth,height:e.clientHeight}}function I(e){return e.reduce(((e,t)=>l.add(e,O(t))),b)}function R(e){const{offsetWidth:t,offsetHeight:n}=e,{x:o,y:r}=function e(t,n,o=b){if(!(t&&t instanceof HTMLElement))return o;const r={x:o.x+t.offsetLeft,y:o.y+t.offsetTop};return t.offsetParent===n?r:e(t.offsetParent,n,r)}(e,null);return{width:t,height:n,offsetTop:r,offsetLeft:o}}function W(e){if(e instanceof Window){const e=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t,offsetTop:0,offsetLeft:0}}const{offsetTop:t,offsetLeft:n}=R(e),{width:o,height:r,top:a,bottom:i,left:l,right:s}=e.getBoundingClientRect();return{width:o,height:r,top:a,bottom:i,right:s,left:l,offsetTop:t,offsetLeft:n}}function _(e){const{width:t,height:n,offsetTop:o,offsetLeft:r}=R(e),a=I(j(e)),i=o-a.y,l=r-a.x;return{width:t,height:n,top:i,bottom:i+n,right:l+t,left:l,offsetTop:o,offsetLeft:r}}function M(e){return"top"in e}function N(e,t=e.offsetLeft,n=e.offsetTop){return[{x:t,y:n},{x:t+e.width,y:n},{x:t,y:n+e.height},{x:t+e.width,y:n+e.height}]}const A=(e,t)=>{const n=e.map((([e,n])=>function(e,t){const n=Math.max(t.top,e.offsetTop),o=Math.max(t.left,e.offsetLeft),r=Math.min(t.left+t.width,e.offsetLeft+e.width),a=Math.min(t.top+t.height,e.offsetTop+e.height);if(o<r&&n<a){const i=(r-o)*(a-n);return Number((i/(t.width*t.height+e.width*e.height-i)).toFixed(4))}return 0}(n,t))),o=m(n,((e,t)=>e>t));return n[o]<=0?null:e[o]?e[o][0]:null};function k(e){return e instanceof HTMLElement?e.ownerDocument:document}function B(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:{},translate:{x:0,y:0}},droppable:{containers:{}}}}function P(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{const{element:n}=t,{id:o}=n;return{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[o]:n}}}}case u.SetDroppableDisabled:{const{id:n,disabled:o}=t,r=e.droppable.containers[n];return r?{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[n]:{...r,disabled:o}}}}:e}case u.UnregisterDroppable:{const{id:n}=t;return{...e,droppable:{...e.droppable,containers:f(n,e.droppable.containers)}}}default:return e}}const V=r.createContext({type:null,event:null});function z({onDragStart:e,onDragMove:t,onDragOver:n,onDragEnd:o,onDragCancel:a}){const i=r.useContext(V),l=r.useRef(i);r.useEffect((()=>{if(i!==l.current){const{type:r,event:s}=i;switch(r){case u.DragStart:null==e||e(s);break;case u.DragMove:null==t||t(s);break;case u.DragOver:null==n||n(s);break;case u.DragCancel:null==a||a(s);break;case u.DragEnd:null==o||o(s)}l.current=i}}),[i,e,t,n,o,a])}function K({announcements:e=d,hiddenTextDescribedById:t,screenReaderInstructions:n}){const{announce:o,announcement:c}=s.useAnnouncement(),u=l.useUniqueId("DndLiveRegion"),[p,m]=r.useState(!1);return r.useEffect((()=>{m(!0)}),[]),z(r.useMemo((()=>({onDragStart({active:t}){o(e.onDragStart(t.id))},onDragMove({active:t,over:n}){e.onDragMove&&o(e.onDragMove(t.id,null==n?void 0:n.id))},onDragOver({active:t,over:n}){o(e.onDragOver(t.id,null==n?void 0:n.id))},onDragEnd({active:t,over:n}){o(e.onDragEnd(t.id,null==n?void 0:n.id))},onDragCancel({active:t}){o(e.onDragCancel(t.id))}})),[o,e])),p?i.createPortal(a.createElement(a.Fragment,null,a.createElement(s.HiddenText,{id:t,value:n.draggable}),a.createElement(s.LiveRegion,{id:u,announcement:c})),document.body):null}var $,H,G;function U(e){const t=r.useRef(e);return l.useIsomorphicLayoutEffect((()=>{t.current!==e&&(t.current=e)}),[e]),t}($=t.AutoScrollActivator||(t.AutoScrollActivator={}))[$.Pointer=0]="Pointer",$[$.DraggableRect=1]="DraggableRect",(H=t.TraversalOrder||(t.TraversalOrder={}))[H.TreeOrder=0]="TreeOrder",H[H.ReversedTreeOrder=1]="ReversedTreeOrder",(G=t.LayoutMeasuringStrategy||(t.LayoutMeasuringStrategy={}))[G.Always=0]="Always",G[G.BeforeDragging=1]="BeforeDragging",G[G.WhileDragging=2]="WhileDragging",(t.LayoutMeasuringFrequency||(t.LayoutMeasuringFrequency={})).Optimized="optimized";const q=new Map,Y={strategy:t.LayoutMeasuringStrategy.WhileDragging,frequency:t.LayoutMeasuringFrequency.Optimized},X=[],J=te(W),Q=function(e){const t=[];return function(n,o){const a=r.useRef(n);return l.useLazyMemo((r=>n.length?o||!r&&n.length||n!==a.current?n.map((t=>e(t))):null!=r?r:t:t),[n,o])}}(W),Z=te(_);function te(e){return function(t,n){const o=r.useRef(t);return l.useLazyMemo((r=>t?n||!r&&t||t!==o.current?t instanceof HTMLElement&&null==t.parentNode?null:e(t):null!=r?r:null:null),[t,n])}}class ee{constructor(e){this.target=e,this.listeners=[]}add(e,t,n){this.target.addEventListener(e,t,n),this.listeners.push({eventName:e,handler:t})}removeAll(){this.listeners.forEach((({eventName:e,handler:t})=>this.target.removeEventListener(e,t)))}}function ne(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t&&o>t.y}var oe;(oe=t.KeyboardCode||(t.KeyboardCode={})).Space="Space",oe.Down="ArrowDown",oe.Right="ArrowRight",oe.Left="ArrowLeft",oe.Up="ArrowUp",oe.Esc="Escape",oe.Enter="Enter";const re={start:[t.KeyboardCode.Space,t.KeyboardCode.Enter],cancel:[t.KeyboardCode.Esc],end:[t.KeyboardCode.Space,t.KeyboardCode.Enter]},ie=(e,{currentCoordinates:n})=>{switch(e.code){case t.KeyboardCode.Right:return{...n,x:n.x+25};case t.KeyboardCode.Left:return{...n,x:n.x-25};case t.KeyboardCode.Down:return{...n,y:n.y+25};case t.KeyboardCode.Up:return{...n,y:n.y-25}}};class ae{constructor(e){this.props=e,this.autoScrollEnabled=!1,this.coordinates=b;const{event:{target:t}}=e;this.props=e,this.listeners=new ee(k(t)),this.windowListeners=new ee(function(e){var t;return null!=(t=k(e).defaultView)?t:window}(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),setTimeout((()=>{this.listeners.add("keydown",this.handleKeyDown),this.windowListeners.add("resize",this.handleCancel)}))}handleStart(){const{activeNode:e,onStart:t}=this.props;if(!e.node.current)throw new Error("Active draggable node is undefined");const n=W(e.node.current),o={x:n.left,y:n.top};this.coordinates=o,t(o)}handleKeyDown(e){if(e instanceof KeyboardEvent){const{coordinates:n}=this,{active:o,context:r,options:a}=this.props,{keyboardCodes:i=re,coordinateGetter:s=ie,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d))return void this.handleEnd(e);if(i.cancel.includes(d))return void this.handleCancel(e);const u=s(e,{active:o,context:r.current,currentCoordinates:n});if(u){const o={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,i=l.subtract(u,n),{isTop:s,isRight:d,isLeft:p,isBottom:m,maxScroll:g,minScroll:f}=S(r),h=L(r),b={x:Math.min(a===t.KeyboardCode.Right?h.right-h.width/2:h.right,Math.max(a===t.KeyboardCode.Right?h.left:h.left+h.width/2,u.x)),y:Math.min(a===t.KeyboardCode.Down?h.bottom-h.height/2:h.bottom,Math.max(a===t.KeyboardCode.Down?h.top:h.top+h.height/2,u.y))},v=a===t.KeyboardCode.Right&&!d||a===t.KeyboardCode.Left&&!p,y=a===t.KeyboardCode.Down&&!m||a===t.KeyboardCode.Up&&!s;if(v&&b.x!==u.x){if(a===t.KeyboardCode.Right&&r.scrollLeft+i.x<=g.x||a===t.KeyboardCode.Left&&r.scrollLeft+i.x>=f.x)return void r.scrollBy({left:i.x,behavior:c});o.x=a===t.KeyboardCode.Right?r.scrollLeft-g.x:r.scrollLeft-f.x,r.scrollBy({left:-o.x,behavior:c});break}if(y&&b.y!==u.y){if(a===t.KeyboardCode.Down&&r.scrollTop+i.y<=g.y||a===t.KeyboardCode.Up&&r.scrollTop+i.y>=f.y)return void r.scrollBy({top:i.y,behavior:c});o.y=a===t.KeyboardCode.Down?r.scrollTop-g.y:r.scrollTop-f.y,r.scrollBy({top:-o.y,behavior:c});break}}this.handleMove(e,l.add(u,o))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t),this.coordinates=t}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function le(e){return Boolean(e&&"distance"in e)}function se(e){return Boolean(e&&"delay"in e)}var ue;ae.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=re,onActivation:n})=>{const{code:o}=e.nativeEvent;return!!t.start.includes(o)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}}],function(e){e.Keydown="keydown"}(ue||(ue={}));class ce{constructor(e,t,n=function(e){return e instanceof EventTarget?e:k(e)}(e.event.target)){this.props=e,this.events=t,this.autoScrollEnabled=!0,this.activated=!1,this.timeoutId=null;const{event:o}=e;this.props=e,this.events=t,this.ownerDocument=k(o.target),this.listeners=new ee(n),this.initialCoordinates=y(o),this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,!1),this.listeners.add(e.end.name,this.handleEnd),this.ownerDocument.addEventListener(ue.Keydown,this.handleKeydown),t){if(le(t))return;if(se(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.ownerDocument.removeEventListener(ue.Keydown,this.handleKeydown),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,t(e))}handleMove(e){const{activated:t,initialCoordinates:n,props:o}=this,{onMove:r,options:{activationConstraint:a}}=o;if(!n)return;const i=y(e),s=l.subtract(n,i);if(!t&&a){if(se(a))return ne(s,a.tolerance)?this.handleCancel():void 0;if(le(a))return ne(s,a.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),r(i)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===t.KeyboardCode.Esc&&this.handleCancel()}}const pe={move:{name:"pointermove"},end:{name:"pointerup"}};class de extends ce{constructor(e){const{event:t}=e,n=k(t.target);super(e,pe,n)}}de.activators=[{eventName:"onPointerDown",handler:({nativeEvent:e},{onActivation:t})=>!(!e.isPrimary||0!==e.button||(null==t||t({event:e}),0))}];const me={move:{name:"mousemove"},end:{name:"mouseup"}};var ge;!function(e){e[e.RightClick=2]="RightClick"}(ge||(ge={}));class he extends ce{constructor(e){super(e,me,k(e.event.target))}}he.activators=[{eventName:"onMouseDown",handler:({nativeEvent:e},{onActivation:t})=>e.button!==ge.RightClick&&(null==t||t({event:e}),!0)}];const fe={move:{name:"touchmove"},end:{name:"touchend"}};class ve extends ce{constructor(e){super(e,fe)}}function be(e,{transform:t,...n}){return(null==e?void 0:e.length)?e.reduce(((e,t)=>t({transform:e,...n})),t):t}ve.activators=[{eventName:"onTouchStart",handler:({nativeEvent:e},{onActivation:t})=>{const{touches:n}=e;return!(n.length>1||(null==t||t({event:e}),0))}}];const ye=[{sensor:de,options:{}},{sensor:ae,options:{}}],xe={current:{}},we=r.createContext({...b,scaleX:1,scaleY:1}),Ce=r.memo((function({id:e,autoScroll:n=!0,announcements:o,children:i,sensors:s=ye,collisionDetection:d=A,layoutMeasuring:p,modifiers:m,screenReaderInstructions:g=c,...f}){var v,x,w;const E=r.useReducer(P,void 0,B),[S,D]=E,[L,W]=r.useState((()=>({type:null,event:null}))),{draggable:{active:_,nodes:M,translate:N},droppable:{containers:k}}=S,z=_?M[_]:null,$=r.useRef({initial:null,translated:null}),H=r.useMemo((()=>{var e;return null!=_?{id:_,data:null!=(e=null==z?void 0:z.data)?e:xe,rect:$}:null}),[_,z]),G=r.useRef(null),[U,te]=r.useState(null),[ne,oe]=r.useState(null),re=r.useRef(f),ie=l.useUniqueId("DndDescribedBy",e),{layoutRectMap:le,recomputeLayouts:se,willRecomputeLayouts:ue}=function(e,{dragging:n,dependencies:o,config:a}){const[i,s]=r.useState(!1),{frequency:c,strategy:d}=(u=a)?{...Y,...u}:Y;var u;const p=r.useRef(e),m=r.useCallback((()=>s(!0)),[]),g=r.useRef(null),f=function(){switch(d){case t.LayoutMeasuringStrategy.Always:return!1;case t.LayoutMeasuringStrategy.BeforeDragging:return n;default:return!n}}(),h=l.useLazyMemo((t=>{if(f&&!n)return q;if(!t||t===q||p.current!==e||i){for(let t of Object.values(e))t&&(t.rect.current=t.node.current?R(t.node.current):null);return function(e){const t=new Map;if(e)for(const n of Object.values(e)){if(!n)continue;const{id:e,rect:o,disabled:r}=n;r||null==o.current||t.set(e,o.current)}return t}(e)}return t}),[e,n,f,i]);return r.useEffect((()=>{p.current=e}),[e]),r.useEffect((()=>{i&&s(!1)}),[i]),r.useEffect((function(){f||requestAnimationFrame(m)}),[n,f]),r.useEffect((function(){f||"number"!=typeof c||null!==g.current||(g.current=setTimeout((()=>{m(),g.current=null}),c))}),[c,f,m,...o]),{layoutRectMap:h,recomputeLayouts:m,willRecomputeLayouts:i}}(k,{dragging:null!=_,dependencies:[N.x,N.y],config:p}),pe=function(e,t){const n=null!==t?e[t]:void 0,o=n?n.node.current:null;return l.useLazyMemo((e=>{var n;return null===t?null:null!=(n=null!=o?o:e)?n:null}),[o,t])}(M,_),me=ne?y(ne):null,ge=Z(pe),fe=J(pe),Ce=r.useRef(null),je=(Oe=Ce.current,(Fe=ge)&&Oe?{x:Fe.left-Oe.left,y:Fe.top-Oe.top}:b);var Fe,Oe;const Ee=r.useRef({active:null,activeNode:pe,collisionRect:null,droppableRects:le,draggableNodes:M,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null,translatedRect:null}),Se=function(e,t){var n,o;return e&&null!=(n=null==(o=t[e])?void 0:o.node.current)?n:null}(null!=(v=null==(x=Ee.current.over)?void 0:x.id)?v:null,k),De=J(pe?pe.ownerDocument.defaultView:null),Te=J(pe?pe.parentElement:null),Le=function(e){const t=r.useRef(e),n=l.useLazyMemo((n=>e?n&&e&&t.current&&e.parentNode===t.current.parentNode?n:j(e):X),[e]);return r.useEffect((()=>{t.current=e}),[e]),n}(_?null!=Se?Se:pe:null),Ie=Q(Le),[Re,We]=l.useNodeRef(),_e=J(_?Re.current:null,ue),Me=null!=_e?_e:fe,Ne=be(m,{transform:{x:N.x-je.x,y:N.y-je.y,scaleX:1,scaleY:1},active:H,over:Ee.current.over,activeNodeRect:fe,draggingNodeRect:Me,containerNodeRect:Te,overlayNodeRect:_e,scrollableAncestors:Le,scrollableAncestorRects:Ie,windowRect:De}),Ae=me?l.add(me,N):null,ke=function(e){const[t,n]=r.useState(null),o=r.useRef(e),a=r.useCallback((e=>{const t=F(e.target);t&&n((e=>e?(e.set(t,O(t)),new Map(e)):null))}),[]);return r.useEffect((()=>{const t=o.current;if(e!==t){r(t);const i=e.map((e=>{const t=F(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,O(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),o.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=F(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),r.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>l.add(e,t)),b):I(e):b),[e,t])}(Le),Be=l.add(Ne,ke),Pe=ge?C(ge,Ne):null,Ve=Pe?C(Pe,ke):null,ze=function(e,t){var n;return e&&null!=(n=t[e])?n:null}(H&&Ve?d(Array.from(le.entries()),Ve):null,k),Ke=r.useMemo((()=>ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null),[ze]),$e=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Ne,null!=(w=null==ze?void 0:ze.rect.current)?w:null,ge),He=r.useCallback(((e,{sensor:t,options:n})=>{if(!G.current)return;const o=M[G.current];if(!o)return;const r=new t({active:G.current,activeNode:o,event:e.nativeEvent,options:n,context:Ee,onStart(e){const t=G.current;if(!t)return;const n=M[t];if(!n)return;const{onDragStart:o}=re.current,r={active:{id:t,data:n.data,rect:$}};D({type:u.DragStart,initialCoordinates:e,active:t}),W({type:u.DragStart,event:r}),null==o||o(r)},onMove(e){D({type:u.DragMove,coordinates:e})},onEnd:a(u.DragEnd),onCancel:a(u.DragCancel)});function a(e){return async function(){const{active:t,over:n,scrollAdjustedTranslate:o}=Ee.current;let r=null;if(t&&o){const{cancelDrop:a}=re.current;r={active:t,delta:o,over:n},e===u.DragEnd&&"function"==typeof a&&await Promise.resolve(a(r))&&(e=u.DragCancel)}if(G.current=null,D({type:e}),te(null),oe(null),r){const{onDragCancel:t,onDragEnd:n}=re.current,o=e===u.DragEnd?n:t;W({type:e,event:r}),null==o||o(r)}}}te(r),oe(e.nativeEvent)}),[D,M]),Ge=function(e,t){return r.useMemo((()=>e.reduce(((e,n)=>{const{sensor:o}=n;return[...e,...o.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(s,r.useCallback(((e,t)=>(n,o)=>{const r=n.nativeEvent;null!==G.current||r.dndKit||r.defaultPrevented||!0===e(n,t.options)&&(r.dndKit={capturedBy:t.sensor},G.current=o,He(n,t))}),[He]));l.useIsomorphicLayoutEffect((()=>{re.current=f}),Object.values(f)),r.useEffect((()=>{H||(Ce.current=null),H&&ge&&!Ce.current&&(Ce.current=ge)}),[ge,H]),r.useEffect((()=>{const{onDragMove:e}=re.current,{active:t,over:n}=Ee.current;if(!t)return;const o={active:t,delta:{x:Be.x,y:Be.y},over:n};W({type:u.DragMove,event:o}),null==e||e(o)}),[Be.x,Be.y]),r.useEffect((()=>{const{active:e,scrollAdjustedTranslate:t}=Ee.current;if(!e||!G.current||!t)return;const{onDragOver:n}=re.current,o={active:e,delta:{x:t.x,y:t.y},over:Ke};W({type:u.DragOver,event:o}),null==n||n(o)}),[null==Ke?void 0:Ke.id]),l.useIsomorphicLayoutEffect((()=>{Ee.current={active:H,activeNode:pe,collisionRect:Ve,droppableRects:le,draggableNodes:M,draggingNodeRect:Me,droppableContainers:k,over:Ke,scrollableAncestors:Le,scrollAdjustedTranslate:Be,translatedRect:Pe},$.current={initial:Me,translated:Pe}}),[H,pe,Ve,M,Me,le,k,Ke,Le,Be,Pe]),function({acceleration:e,activator:n=t.AutoScrollActivator.Pointer,canScroll:o,draggingRect:a,enabled:i,interval:s=5,order:c=t.TraversalOrder.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:p,threshold:m}){const[g,f]=l.useInterval(),h=r.useRef({x:1,y:1}),v=r.useMemo((()=>{switch(n){case t.AutoScrollActivator.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case t.AutoScrollActivator.DraggableRect:return a}return null}),[n,a,d]),y=r.useRef(b),x=r.useRef(null),w=r.useCallback((()=>{const e=x.current;e&&e.scrollBy(h.current.x*y.current.x,h.current.y*y.current.y)}),[]),C=r.useMemo((()=>c===t.TraversalOrder.TreeOrder?[...u].reverse():u),[c,u]);r.useEffect((()=>{if(i&&u.length&&v){for(const t of C){if(!1===(null==o?void 0:o(t)))continue;const n=u.indexOf(t),r=p[n];if(!r)continue;const{direction:a,speed:i}=T(t,r,v,e,m);if(i.x>0||i.y>0)return f(),x.current=t,g(w,s),h.current=i,void(y.current=a)}h.current={x:0,y:0},y.current={x:0,y:0},f()}else f()}),[e,w,o,f,i,s,JSON.stringify(v),g,u,C,p,JSON.stringify(m)])}({...function(){const e=!(!1===(null==U?void 0:U.autoScrollEnabled)||("object"==typeof n?!1===n.enabled:!1===n));return"object"==typeof n?{...n,enabled:e}:{enabled:e}}(),draggingRect:Pe,pointerCoordinates:Ae,scrollableAncestors:Le,scrollableAncestorRects:Ie});const Ue=r.useMemo((()=>({active:H,activeNode:pe,activeNodeRect:ge,activeNodeClientRect:fe,activatorEvent:ne,activators:Ge,ariaDescribedById:{draggable:ie},overlayNode:{nodeRef:Re,rect:_e,setRef:We},containerNodeRect:Te,dispatch:D,draggableNodes:M,droppableContainers:k,droppableRects:le,over:Ke,recomputeLayouts:se,scrollableAncestors:Le,scrollableAncestorRects:Ie,willRecomputeLayouts:ue,windowRect:De})),[H,pe,fe,ge,ne,Ge,Te,_e,Re,D,M,ie,k,le,Ke,se,Le,Ie,We,ue,De]);return a.createElement(V.Provider,{value:L},a.createElement(h.Provider,{value:Ue},a.createElement(we.Provider,{value:$e},i)),a.createElement(K,{announcements:o,hiddenTextDescribedById:ie,screenReaderInstructions:g}))})),je=r.createContext(null),Fe="button";function Oe(){return r.useContext(h)}const Ee=e=>e instanceof KeyboardEvent?"transform 250ms ease":void 0,Se={duration:250,easing:"ease",dragSourceOpacity:0},De=a.memo((({adjustScale:e=!1,children:t,dropAnimation:n=Se,style:o,transition:i=Ee,modifiers:s,wrapperElement:c="div",className:d,zIndex:u=999})=>{var p,m;const{active:g,activeNodeRect:f,activeNodeClientRect:h,containerNodeRect:b,draggableNodes:v,activatorEvent:y,over:w,overlayNode:C,scrollableAncestors:j,scrollableAncestorRects:F,windowRect:O}=Oe(),E=r.useContext(we),S=be(s,{active:g,activeNodeRect:h,draggingNodeRect:C.rect,containerNodeRect:b,over:w,overlayNodeRect:C.rect,scrollableAncestors:j,scrollableAncestorRects:F,transform:E,windowRect:O}),D=function(e,t,n){const o=r.useRef(t);return l.useLazyMemo((r=>{const a=o.current;if(t!==a){if(t&&a&&(a.left!==t.left||a.top!==t.top)&&!r){const o=null==n?void 0:n.getBoundingClientRect();if(o)return{...e,x:o.left-t.left,y:o.top-t.top}}o.current=t}}),[t,e,n])}(S,f,C.nodeRef.current),T=null!==g,L=null!=D?D:S,I=e?L:{...L,scaleX:1,scaleY:1},R=f?{position:"fixed",width:f.width,height:f.height,top:f.top,left:f.left,zIndex:u,transform:l.CSS.Transform.toString(I),touchAction:"none",transformOrigin:e&&y?x(y,f):void 0,transition:D?void 0:"function"==typeof i?i(y):i,...o}:void 0,W=T?{style:R,children:t,className:d,transform:I}:void 0,M=r.useRef(W),N=null!=W?W:M.current,{children:A,...k}=null!=N?N:{},B=r.useRef(null!=(p=null==g?void 0:g.id)?p:null),P=function({animate:e,adjustScale:t,activeId:n,draggableNodes:o,duration:a,easing:i,dragSourceOpacity:s,node:c,transform:d}){const[u,p]=r.useState(!1);return r.useEffect((()=>{e&&n&&i&&a?requestAnimationFrame((()=>{var e;const r=null==(e=o[n])?void 0:e.node.current;if(d&&c&&r&&null!==r.parentNode){const e=c.children.length>1?c:c.children[0];if(e){const n=e.getBoundingClientRect(),o=_(r),u={x:n.left-o.left,y:n.top-o.top};if(Math.abs(u.x)||Math.abs(u.y)){const e=l.CSS.Transform.toString({x:d.x-u.x,y:d.y-u.y,scaleX:t?o.width*d.scaleX/n.width:1,scaleY:t?o.height*d.scaleY/n.height:1}),m=r.style.opacity;return null!=s&&(r.style.opacity=""+s),void(c.animate([{transform:l.CSS.Transform.toString(d)},{transform:e}],{easing:i,duration:a}).onfinish=()=>{c.style.display="none",p(!0),r&&null!=s&&(r.style.opacity=m)})}}}p(!0)})):e&&p(!0)}),[e,n,t,o,a,i,s,c,d]),l.useIsomorphicLayoutEffect((()=>{u&&p(!1)}),[u]),u}({animate:Boolean(n&&B.current&&!g),adjustScale:e,activeId:B.current,draggableNodes:v,duration:null==n?void 0:n.duration,easing:null==n?void 0:n.easing,dragSourceOpacity:null==n?void 0:n.dragSourceOpacity,node:C.nodeRef.current,transform:null==(m=M.current)?void 0:m.transform}),V=Boolean(A&&(t||n&&!P));return r.useEffect((()=>{var e;(null==g?void 0:g.id)!==B.current&&(B.current=null!=(e=null==g?void 0:g.id)?e:null),g&&M.current!==W&&(M.current=W)}),[g,W]),r.useEffect((()=>{P&&(M.current=void 0)}),[P]),V?a.createElement(c,{...k,ref:C.setRef},A):null}));t.DndContext=Ce,t.DragOverlay=De,t.KeyboardSensor=ae,t.MouseSensor=he,t.PointerSensor=de,t.TouchSensor=ve,t.applyModifiers=be,t.closestCenter=(e,t)=>{const n=w(t,t.left,t.top),o=e.map((([e,t])=>v(w(t),n))),r=p(o);return e[r]?e[r][0]:null},t.closestCorners=(e,t)=>{const n=N(t,t.left,t.top),o=e.map((([e,t])=>{const o=N(t,M(t)?t.left:void 0,M(t)?t.top:void 0),r=n.reduce(((e,t,n)=>e+v(o[n],t)),0);return Number((r/4).toFixed(4))})),r=p(o);return e[r]?e[r][0]:null},t.defaultAnnouncements=d,t.defaultCoordinates=b,t.defaultDropAnimation=Se,t.getBoundingClientRect=W,t.getScrollableAncestors=j,t.getViewRect=_,t.rectIntersection=A,t.useDndContext=Oe,t.useDndMonitor=z,t.useDraggable=function({id:e,data:t,disabled:n=!1,attributes:o}){const{active:a,activeNodeRect:i,activatorEvent:s,ariaDescribedById:c,draggableNodes:d,droppableRects:u,activators:p,over:m}=r.useContext(h),{role:g=Fe,roleDescription:f="draggable",tabIndex:b=0}=null!=o?o:{},v=(null==a?void 0:a.id)===e,y=r.useContext(v?we:je),[x,w]=l.useNodeRef(),C=function(e,t){return r.useMemo((()=>e.reduce(((e,{eventName:n,handler:o})=>(e[n]=e=>{o(e,t)},e)),{})),[e,t])}(p,e),j=U(t);return r.useEffect((()=>(d[e]={node:x,data:j},()=>{delete d[e]})),[d,e]),{active:a,activeNodeRect:i,activatorEvent:s,attributes:r.useMemo((()=>({role:g,tabIndex:b,"aria-pressed":!(!v||g!==Fe)||void 0,"aria-roledescription":f,"aria-describedby":c.draggable})),[g,b,v,f,c.draggable]),droppableRects:u,isDragging:v,listeners:n?void 0:C,node:x,over:m,setNodeRef:w,transform:y}},t.useDroppable=function({data:e,disabled:t=!1,id:n}){const{active:o,dispatch:a,over:i}=r.useContext(h),s=r.useRef(null),[c,d]=l.useNodeRef(),p=U(e);return l.useIsomorphicLayoutEffect((()=>(a({type:u.RegisterDroppable,element:{id:n,disabled:t,node:c,rect:s,data:p}}),()=>a({type:u.UnregisterDroppable,id:n}))),[n]),r.useEffect((()=>{a({type:u.SetDroppableDisabled,id:n,disabled:t})}),[t]),{active:o,rect:s,isOver:(null==i?void 0:i.id)===n,node:c,over:i,setNodeRef:d}},t.useSensor=function(e,t){return r.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])},t.useSensors=function(...e){return r.useMemo((()=>[...e].filter((e=>null!=e))),[...e])}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11);const r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=r?o.useLayoutEffect:o.useEffect;let i={};function l(e){return(t,...n)=>n.reduce(((t,n)=>{const o=Object.entries(n);for(const[n,r]of o){const o=t[n];null!=o&&(t[n]=o+e*r)}return t}),{...t})}const s=l(1),c=l(-1),d=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return`translate3d(${t?Math.round(t):0}px, ${n?Math.round(n):0}px, 0)`}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return`scaleX(${t}) scaleY(${n})`}},Transform:{toString(e){if(e)return[d.Translate.toString(e),d.Scale.toString(e)].join(" ")}},Transition:{toString:({property:e,duration:t,easing:n})=>`${e} ${t}ms ${n}`}});t.CSS=d,t.add=s,t.canUseDOM=r,t.subtract=c,t.useCombinedRefs=function(...e){return o.useMemo((()=>t=>{e.forEach((e=>e(t)))}),e)},t.useInterval=function(){const e=o.useRef(null);return[o.useCallback(((t,n)=>{e.current=setInterval(t,n)}),[]),o.useCallback((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]},t.useIsomorphicLayoutEffect=a,t.useLazyMemo=function(e,t){const n=o.useRef();return o.useMemo((()=>{const t=e(n.current);return n.current=t,t}),[...t])},t.useNodeRef=function(){const e=o.useRef(null),t=o.useCallback((t=>{e.current=t}),[]);return[e,t]},t.useUniqueId=function(e,t){return o.useMemo((()=>{if(t)return t;const n=null==i[e]?0:i[e]+1;return i[e]=n,`${e}-${n}`}),[e,t])}},72:function(e,t,n){"use strict";e.exports=n(73)},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),a=(o=r)&&"object"==typeof o&&"default"in o?o.default:o;const i={display:"none"},l={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};t.HiddenText=function({id:e,value:t}){return a.createElement("div",{id:e,style:i},t)},t.LiveRegion=function({id:e,announcement:t}){return a.createElement("div",{id:e,style:l,role:"status","aria-live":"assertive","aria-atomic":!0},t)},t.useAnnouncement=function(){const[e,t]=r.useState("");return{announce:r.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(32).__importDefault(n(75));t.default=function(e){o.default((function(){e()}))}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11);t.default=function(e){o.useEffect(e,[])}},84:function(e,t,n){"use strict";n.r(t),n.d(t,"setFlyoutRef",(function(){return te})),n.d(t,"ControlGroupContainer",(function(){return control_group_container_ControlGroupContainer}));var o=n(1),r=n.n(o),a=n(11),i=n.n(a),l=n(16),s=n(29),c=n.n(s),d=n(4),u=n.n(d),p=n(39),m=n(8),g=n(12),f=n(31),h=n(2),b=n(27),v=n(28),y=n(14);const x=e=>Object.values(null!=e?e:{}).map((e=>({id:e.explicitInput.id,order:e.order}))),w=Object(l.memoize)((e=>{const t={},n=[];Object.values(e).sort(((e,t)=>e.order>t.order?1:-1)).forEach((e=>{t[e.explicitInput.id]=e.order,n.push(e.explicitInput.id)}));const o=n[n.length-1];return{IdsToOrder:t,idsInOrder:n,lastChildId:o}}),(e=>JSON.stringify(x(e)))),C={HIERARCHICAL:{getContainerSettings:e=>({childIdInitializeOrder:Object.values(e.panels).sort(((e,t)=>e.order>t.order?1:-1)).map((e=>e.explicitInput.id)),initializeSequentially:!0}),getPrecedingFilters:({id:e,childOrder:t,getChild:n})=>{var o;let r=[];const a=null===(o=t.IdsToOrder)||void 0===o?void 0:o[e];if(!a||0===a)return r;for(let e=0;e<a;e++){var i;const o=n(t.idsInOrder[e]);if(!o||Object(b.isErrorEmbeddable)(o))return r;r=[...r,...null!==(i=o.getOutput().filters)&&void 0!==i?i:[]]}return r},onChildChange:({childOutputChangedId:e,childOrder:t,recalculateFilters$:n,getChild:o})=>{if(e===t.lastChildId)return void n.next(null);const r=t.IdsToOrder[e]+1;r>=t.idsInOrder.length||setTimeout((()=>{var e;return null===(e=o(t.idsInOrder[r]))||void 0===e?void 0:e.refreshInputFromParent()}),1)}},NONE:{getContainerSettings:()=>{},getPrecedingFilters:()=>{},onChildChange:({recalculateFilters$:e})=>e.next(null)}};var j=n(20),F=n(19);const O=[{id:"small","data-test-subj":"control-editor-width-small",label:F.a.management.controlWidth.getSmallWidthTitle()},{id:"medium","data-test-subj":"control-editor-width-medium",label:F.a.management.controlWidth.getMediumWidthTitle()},{id:"large","data-test-subj":"control-editor-width-large",label:F.a.management.controlWidth.getLargeWidthTitle()}],E=[{id:"oneLine","data-test-subj":"control-editor-layout-oneLine",label:F.a.management.labelPosition.getInlineTitle()},{id:"twoLine","data-test-subj":"control-editor-layout-twoLine",label:F.a.management.labelPosition.getAboveTitle()}];var S=n(5),D=n(7);const T=({controlCount:e,initialInput:t,updateInput:n,onDeleteAll:o,onClose:r})=>{var l;const[s,c]=Object(a.useState)({...Object(S.getDefaultControlGroupInput)(),...t}),d=Object(a.useCallback)((e=>{c({...s,...e})}),[s]),p=Object(a.useCallback)((e=>{var t;c({...s,ignoreParentSettings:{...null!==(t=s.ignoreParentSettings)&&void 0!==t?t:{},...e}})}),[s]),m=Object(a.useCallback)((()=>{const e={...s};var o,r;o=e,r=t,u()(o,r)||n(e)}),[s,t,n]);return Object(D.jsx)(i.a.Fragment,null,Object(D.jsx)(g.EuiFlyoutHeader,{hasBorder:!0},Object(D.jsx)(g.EuiTitle,{size:"m"},Object(D.jsx)("h2",null,F.a.management.getFlyoutTitle()))),Object(D.jsx)(g.EuiFlyoutBody,{"data-test-subj":"control-group-settings-flyout"},Object(D.jsx)(g.EuiForm,null,Object(D.jsx)(g.EuiFormRow,{label:F.a.management.labelPosition.getLabelPositionTitle()},Object(D.jsx)(g.EuiButtonGroup,{color:"primary",options:E,"data-test-subj":"control-group-layout-options",idSelected:s.controlStyle,legend:F.a.management.labelPosition.getLabelPositionLegend(),onChange:e=>{d({controlStyle:e})}})),Object(D.jsx)(g.EuiHorizontalRule,{margin:"m"}),Object(D.jsx)(g.EuiFlexGroup,null,Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiSpacer,{size:"xs"}),Object(D.jsx)(g.EuiSwitch,{"data-test-subj":"control-group-validate-selections",label:F.a.management.validateSelections.getValidateSelectionsTitle(),showLabel:!1,checked:!Boolean(null===(l=s.ignoreParentSettings)||void 0===l?void 0:l.ignoreValidations),onChange:e=>p({ignoreValidations:!e.target.checked})})),Object(D.jsx)(g.EuiFlexItem,null,Object(D.jsx)(g.EuiTitle,{size:"xxs"},Object(D.jsx)("h3",null,F.a.management.validateSelections.getValidateSelectionsTitle())),Object(D.jsx)(g.EuiText,{size:"s"},Object(D.jsx)("p",null,F.a.management.validateSelections.getValidateSelectionsSubTitle())))),Object(D.jsx)(g.EuiHorizontalRule,{margin:"m"}),Object(D.jsx)(g.EuiFlexGroup,null,Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiSpacer,{size:"xs"}),Object(D.jsx)(g.EuiSwitch,{"data-test-subj":"control-group-chaining",label:F.a.management.controlChaining.getHierarchyTitle(),showLabel:!1,checked:"HIERARCHICAL"===s.chainingSystem,onChange:e=>d({chainingSystem:e.target.checked?"HIERARCHICAL":"NONE"})})),Object(D.jsx)(g.EuiFlexItem,null,Object(D.jsx)(g.EuiTitle,{size:"xxs"},Object(D.jsx)("h3",null,F.a.management.controlChaining.getHierarchyTitle())),Object(D.jsx)(g.EuiText,{size:"s"},Object(D.jsx)("p",null,F.a.management.controlChaining.getHierarchySubTitle())))),e>0&&Object(D.jsx)(i.a.Fragment,null,Object(D.jsx)(g.EuiHorizontalRule,{margin:"m"}),Object(D.jsx)(g.EuiSpacer,{size:"m"}),Object(D.jsx)(g.EuiButtonEmpty,{onClick:o,"data-test-subj":"delete-all-controls-button","aria-label":"delete-all",iconType:"trash",color:"danger",flush:"left",size:"s"},F.a.management.getDeleteAllButtonTitle())))),Object(D.jsx)(g.EuiFlyoutFooter,null,Object(D.jsx)(g.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiButtonEmpty,{"aria-label":"cancel-editing-group",iconType:"cross",onClick:()=>{r()}},F.a.manageControl.getCancelTitle())),Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiButton,{"aria-label":"save-group",iconType:"check",color:"primary","data-test-subj":"control-group-editor-save",onClick:()=>{m(),r()}},F.a.manageControl.getSaveChangesTitle())))))},L=({controlGroupContainer:e,closePopover:t})=>{const{overlays:n,theme:o}=j.a.getHooks(),{openConfirm:r,openFlyout:a}=n.useService(),i=o.useService(),l={key:"manageControls",onClick:()=>{(()=>{var t;const n=a(Object(v.toMountPoint)(Object(D.jsx)(T,{initialInput:e.getInput(),updateInput:t=>e.updateInput(t),controlCount:Object.keys(null!==(t=e.getInput().panels)&&void 0!==t?t:{}).length,onDeleteAll:()=>{return t=n,void r(F.a.management.deleteControls.getSubtitle(),{confirmButtonText:F.a.management.deleteControls.getConfirm(),cancelButtonText:F.a.management.deleteControls.getCancel(),title:F.a.management.deleteControls.getDeleteAllTitle(),buttonColor:"danger"}).then((n=>{n&&Object.keys(e.getInput().panels).forEach((t=>e.removeEmbeddable(t))),t.close()}));var t},onClose:()=>n.close()}),{theme$:i.theme$}),{outsideClickCloses:!1,onClose:()=>{n.close(),te(void 0)}});te(n)})(),t()},icon:"gear","data-test-subj":"controls-settings-button","aria-label":F.a.management.getManageButtonTitle()};return Object(D.jsx)(g.EuiContextMenuItem,l,F.a.management.getManageButtonTitle())};n(64);var I=n(30),R=n.n(I),W=n(45),_=n(46),M=n(47),N=n.n(M),A=n(42),k=n(74),B=n.n(k);const P=Object(h.withSuspense)(h.LazyFieldPicker,null),V=Object(h.withSuspense)(h.LazyDataViewPicker,null),z=({embeddable:e,isCreate:t,title:n,width:o,grow:r,onSave:l,onCancel:s,removeControl:c,updateGrow:d,updateTitle:u,updateWidth:p,onTypeEditorChange:m,getRelevantDataViewId:f,setLastUsedDataViewId:h})=>{var b,v;const{dataViews:y,controls:x}=j.a.getHooks(),{getIdsWithTitle:w,getDefaultId:C,get:E}=y.useService(),{getControlTypes:S,getControlFactory:T}=x.useService(),[L,I]=Object(a.useState)({dataViewListItems:[]}),[R,W]=Object(a.useState)(),[_,M]=Object(a.useState)(n),[N,A]=Object(a.useState)(o),[k,z]=Object(a.useState)(r),[K,$]=Object(a.useState)(!1),[H,G]=Object(a.useState)(e?e.getInput().fieldName:void 0),U=Object(a.useMemo)((()=>{if(!L.selectedDataView)return;const e=(e=>{const t={};for(const r of e.fields.getAll()){var n,o;t[r.name]||(t[r.name]={field:r,compatibleControlTypes:[]});const a=null===(n=r.subType)||void 0===n||null===(o=n.multi)||void 0===o?void 0:o.parent;if(a){t[r.name].parentFieldName=a;const n=e.getFieldByName(a);!t[a]&&n&&(t[a]={field:n,compatibleControlTypes:[]}),t[a].childFieldName=r.name}}return t})(L.selectedDataView),t=S().map((e=>T(e)));return L.selectedDataView.fields.map((n=>{var o;for(const o of t)o.isFieldCompatible&&o.isFieldCompatible(e[n.name]);0===(null===(o=e[n.name])||void 0===o?void 0:o.compatibleControlTypes.length)&&delete e[n.name]})),e}),[L.selectedDataView,T,S]);B()((()=>{let t=!0;return H&&W(H),(async()=>{var n,o;const r=await w(),a=null!==(n=null!==(o=null==e?void 0:e.getInput().dataViewId)&&void 0!==o?o:null==f?void 0:f())&&void 0!==n?n:await C();let i;a&&(m({dataViewId:a}),i=await E(a)),t&&I((e=>({...e,selectedDataView:i,dataViewListItems:r})))})(),()=>{t=!1}})),Object(a.useEffect)((()=>$(Boolean(H)&&Boolean(L.selectedDataView))),[H,$,L.selectedDataView]);const{selectedDataView:q}=L,Y=H&&U&&U[H].compatibleControlTypes[0],X=Y&&T(Y),J=X&&X.controlEditorOptionsComponent;return Object(D.jsx)(i.a.Fragment,null,Object(D.jsx)(g.EuiFlyoutHeader,{hasBorder:!0},Object(D.jsx)(g.EuiTitle,{size:"m"},Object(D.jsx)("h2",null,t?F.a.manageControl.getFlyoutCreateTitle():F.a.manageControl.getFlyoutEditTitle()))),Object(D.jsx)(g.EuiFlyoutBody,{"data-test-subj":"control-editor-flyout"},Object(D.jsx)(g.EuiForm,null,Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getDataViewTitle()},Object(D.jsx)(V,{dataViews:L.dataViewListItems,selectedDataViewId:null==q?void 0:q.id,onChangeDataViewId:e=>{null==h||h(e),e!==(null==q?void 0:q.id)&&(m({dataViewId:e}),G(void 0),E(e).then((e=>{I((t=>({...t,selectedDataView:e})))})))},trigger:{label:null!==(b=null===(v=L.selectedDataView)||void 0===v?void 0:v.title)&&void 0!==b?b:F.a.manageControl.getSelectDataViewMessage()}})),Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getFieldTitle()},Object(D.jsx)(P,{filterPredicate:e=>Boolean(null==U?void 0:U[e.name]),selectedFieldName:H,dataView:q,onSelectField:e=>{var t,n;const{parentFieldName:o,childFieldName:r}=null!==(t=null==U?void 0:U[e.name])&&void 0!==t?t:{};m({fieldName:e.name,...o&&{parentFieldName:o},...r&&{childFieldName:r}});const a=null!==(n=e.displayName)&&void 0!==n?n:e.name;W(a),G(e.name),_&&_!==R||(M(a),u(a))}})),Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getControlTypeTitle()},X?Object(D.jsx)(g.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiIcon,{type:X.getIconType()})),Object(D.jsx)(g.EuiFlexItem,{"data-test-subj":"control-editor-type"},X.getDisplayName())):Object(D.jsx)(g.EuiTextColor,{color:"subdued","data-test-subj":"control-editor-type"},F.a.manageControl.getSelectFieldMessage())),Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getTitleInputTitle()},Object(D.jsx)(g.EuiFieldText,{"data-test-subj":"control-editor-title-input",placeholder:R,value:_,onChange:e=>{u(e.target.value||R),M(e.target.value)}})),Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getWidthInputTitle()},Object(D.jsx)(g.EuiButtonGroup,{color:"primary",legend:F.a.management.controlWidth.getWidthSwitchLegend(),options:O,idSelected:N,onChange:e=>{A(e),p(e)}})),d?Object(D.jsx)(g.EuiFormRow,null,Object(D.jsx)(g.EuiSwitch,{label:F.a.manageControl.getGrowSwitchTitle(),color:"primary",checked:k,onChange:()=>{z(!k),d(!k)},"data-test-subj":"control-editor-grow-switch"})):null,J&&X.controlEditorOptionsComponent&&Object(D.jsx)(g.EuiFormRow,{label:F.a.manageControl.getControlSettingsTitle()},Object(D.jsx)(J,{onChange:m,initialInput:null==e?void 0:e.getInput()})),c&&Object(D.jsx)(i.a.Fragment,null,Object(D.jsx)(g.EuiSpacer,{size:"l"}),Object(D.jsx)(g.EuiButtonEmpty,{"aria-label":`delete-${n}`,iconType:"trash",flush:"left",color:"danger",onClick:()=>{s(),c()}},F.a.management.getDeleteButtonTitle())))),Object(D.jsx)(g.EuiFlyoutFooter,null,Object(D.jsx)(g.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiButtonEmpty,{"aria-label":`cancel-${n}`,"data-test-subj":"control-editor-cancel",iconType:"cross",onClick:()=>s()},F.a.manageControl.getCancelTitle())),Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiButton,{"aria-label":`save-${n}`,"data-test-subj":"control-editor-save",iconType:"check",color:"primary",disabled:!K,onClick:()=>l(Y)},F.a.manageControl.getSaveChangesTitle())))))},K=({embeddableId:e})=>{const{overlays:t,controls:n,theme:o}=j.a.getHooks(),{getControlFactory:r}=n.useService(),{openFlyout:i,openConfirm:s}=t.useService(),c=o.useService(),d=Object(h.useReduxContainerContext)(),{containerActions:{untilEmbeddableLoaded:u,removeEmbeddable:p,replaceEmbeddable:m},actions:{setControlWidth:f,setControlGrow:y},useEmbeddableSelector:x,useEmbeddableDispatch:w}=d,C=w(),{panels:O}=x((e=>e)),E=Object(a.useRef)(O[e]);Object(a.useEffect)((()=>{E.current=O[e]}),[O,e]);return Object(D.jsx)(g.EuiButtonIcon,{"data-test-subj":`control-action-${e}-edit`,"aria-label":F.a.floatingActions.getEditButtonTitle(),iconType:"pencil",onClick:()=>(async()=>{const t=j.a.getContextProvider(),n=await u(e);new Promise(((o,a)=>{const d=O[e];let u=r(d.type);if(!u)throw new b.EmbeddableFactoryNotFoundError(d.type);const m=n.getRoot();let g={},h=!1;const x=t=>{if(h||Object(l.isEqual)(E.current.explicitInput,{...d.explicitInput,...g})&&Object(l.isEqual)(E.current.width,d.width))return a(),void t.close();s(F.a.management.discardChanges.getSubtitle(),{confirmButtonText:F.a.management.discardChanges.getConfirm(),cancelButtonText:F.a.management.discardChanges.getCancel(),title:F.a.management.discardChanges.getTitle(),buttonColor:"danger"}).then((n=>{n&&(C(f({width:d.width,embeddableId:e})),a(),t.close())}))},w=i(Object(v.toMountPoint)(Object(D.jsx)(t,null,Object(D.jsx)(z,{isCreate:!1,width:d.width,grow:d.grow,embeddable:n,title:n.getTitle(),onCancel:()=>x(w),updateTitle:e=>g.title=e,setLastUsedDataViewId:e=>m.setLastUsedDataViewId(e),updateWidth:t=>C(f({width:t,embeddableId:e})),updateGrow:t=>C(y({grow:t,embeddableId:e})),onTypeEditorChange:e=>{g={...g,...e}},onSave:e=>((e,t)=>{if(!t)return a(),void e.close();if(E.current.type!==t&&(u=r(t),!u))throw new b.EmbeddableFactoryNotFoundError(t);const i=u;i.presaveTransformFunction&&(g=i.presaveTransformFunction(g,n)),o({type:t,controlInput:g}),e.close()})(w,e),removeControl:()=>{s(F.a.management.deleteControls.getSubtitle(),{confirmButtonText:F.a.management.deleteControls.getConfirm(),cancelButtonText:F.a.management.deleteControls.getCancel(),title:F.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((t=>{t&&(p(e),h=!0,w.close())}))}})),{theme$:c.theme$}),{"aria-label":F.a.manageControl.getFlyoutEditTitle(),outsideClickCloses:!1,onClose:e=>{x(e),te(void 0)}});te(w)})).then((async e=>{await m(n.id,e.controlInput,e.type)}),(()=>{}))})(),color:"text"})},$=({customPrepend:e,enableActions:t,embeddableId:n,embeddableType:o})=>{var r;const l=Object(a.useMemo)((()=>i.a.createRef()),[]),[s,c]=Object(a.useState)(!1),{useEmbeddableSelector:d,containerActions:{untilEmbeddableLoaded:u,removeEmbeddable:p}}=Object(h.useReduxContainerContext)(),{controlStyle:m}=d((e=>e)),{overlays:f}=j.a.getHooks(),{openConfirm:v}=f.useService(),y=(({untilEmbeddableLoaded:e,embeddableId:t,embeddableType:n})=>{const[o,r]=Object(a.useState)();return Object(a.useEffect)((()=>{let n=!0;return(async()=>{const o=await e(t);n&&r(o)})(),()=>{n=!1}}),[e,t,n]),o})({untilEmbeddableLoaded:u,embeddableId:n,embeddableType:o}),[x,w]=Object(a.useState)(),C="twoLine"===m;Object(a.useEffect)((()=>{l.current&&y&&y.render(l.current);const e=null==y?void 0:y.getInput$().subscribe((e=>w(e.title))),t=null==y?void 0:y.getOutput$().subscribe({error:e=>{l.current&&(new b.ErrorEmbeddable(e,{id:y.id},void 0,!0).render(l.current),c(!0))}});return()=>{null==e||e.unsubscribe(),null==t||t.unsubscribe()}}),[y,l]);const O=Object(D.jsx)("div",{className:R()("controlFrameFloatingActions",{"controlFrameFloatingActions--twoLine":C,"controlFrameFloatingActions--oneLine":!C})},!s&&Object(D.jsx)(g.EuiToolTip,{content:F.a.floatingActions.getEditButtonTitle()},Object(D.jsx)(K,{embeddableId:n})),Object(D.jsx)(g.EuiToolTip,{content:F.a.floatingActions.getRemoveButtonTitle()},Object(D.jsx)(g.EuiButtonIcon,{"data-test-subj":`control-action-${n}-delete`,"aria-label":F.a.floatingActions.getRemoveButtonTitle(),onClick:()=>v(F.a.management.deleteControls.getSubtitle(),{confirmButtonText:F.a.management.deleteControls.getConfirm(),cancelButtonText:F.a.management.deleteControls.getCancel(),title:F.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((e=>{e&&p(n)})),iconType:"cross",color:"danger"}))),E=R()("controlFrame__control",{"controlFrame--twoLine":"twoLine"===m,"controlFrame--oneLine":"oneLine"===m,"controlFrame--fatalError":s}),S=Object(D.jsx)(g.EuiFormControlLayout,{className:R()("controlFrame__formControlLayout",{"controlFrameFormControlLayout--twoLine":"twoLine"===m}),fullWidth:!0,prepend:Object(D.jsx)(i.a.Fragment,null,null!==(r=y&&e)&&void 0!==r?r:null,C?void 0:Object(D.jsx)(g.EuiToolTip,{anchorClassName:"controlFrame__labelToolTip",content:x},Object(D.jsx)(g.EuiFormLabel,{className:"controlFrame__formControlLayoutLabel",htmlFor:n},x)))},y&&Object(D.jsx)("div",{className:E,id:`controlFrame--${n}`,ref:l}),!y&&Object(D.jsx)("div",{className:E,id:`controlFrame--${n}`},Object(D.jsx)("div",{className:"controlFrame--controlLoading"},Object(D.jsx)(g.EuiLoadingChart,null))));return Object(D.jsx)(i.a.Fragment,null,y&&t&&O,Object(D.jsx)(g.EuiFormRow,{"data-test-subj":"control-frame-title",fullWidth:!0,label:C?x||F.a.emptyState.getTwoLineLoadingTitle():void 0},S))},H=e=>{const{embeddableId:t,isEditable:n}=e,{over:o,listeners:r,isSorting:a,transform:i,transition:l,attributes:s,isDragging:c,setNodeRef:d}=Object(W.useSortable)({id:t,animateLayoutChanges:()=>!0,disabled:!n});return e.dragInfo={...e.dragInfo,isOver:(null==o?void 0:o.id)===t,isDragging:c},Object(D.jsx)(G,N()({key:t,ref:d},e,s,r,{style:{transition:null!=l?l:void 0,transform:a?void 0:A.CSS.Translate.toString(i)}}))},G=Object(a.forwardRef)((({embeddableId:e,embeddableType:t,dragInfo:n,style:o,isEditable:r,...a},i)=>{const{isOver:l,isDragging:s,draggingIndex:c,index:d}=n,{useEmbeddableSelector:u}=Object(h.useReduxContainerContext)(),{panels:p}=u((e=>e)),m=p[e].grow,f=p[e].width,b=p[e].explicitInput.title,v=Object(D.jsx)("button",N()({ref:i},a,{"aria-label":`${F.a.ariaActions.getMoveControlButtonAction(b)}`,className:"controlFrame__dragHandle"}),Object(D.jsx)(g.EuiIcon,{type:"grabHorizontal"}));return Object(D.jsx)(g.EuiFlexItem,{grow:m,"data-control-id":e,"data-test-subj":"control-frame","data-render-complete":"true",className:R()("controlFrameWrapper",{"controlFrameWrapper-isDragging":s,"controlFrameWrapper-isEditable":r,"controlFrameWrapper--small":"small"===f,"controlFrameWrapper--medium":"medium"===f,"controlFrameWrapper--large":"large"===f,"controlFrameWrapper--insertBefore":l&&(null!=d?d:-1)<(null!=c?c:-1),"controlFrameWrapper--insertAfter":l&&(null!=d?d:-1)>(null!=c?c:-1)}),style:o},Object(D.jsx)($,{enableActions:r&&-1===c,embeddableId:e,embeddableType:t,customPrepend:r?v:void 0}))})),U=({draggingId:e})=>{const{useEmbeddableSelector:t}=Object(h.useReduxContainerContext)(),{panels:n,controlStyle:o}=t((e=>e)),r=n[e].width,a=n[e].explicitInput.title;return Object(D.jsx)(g.EuiFlexItem,{className:R()("controlFrameCloneWrapper",{"controlFrameCloneWrapper--small":"small"===r,"controlFrameCloneWrapper--medium":"medium"===r,"controlFrameCloneWrapper--large":"large"===r,"controlFrameCloneWrapper--twoLine":"twoLine"===o})},"twoLine"===o?Object(D.jsx)(g.EuiFormLabel,null,a):void 0,Object(D.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"none",className:"controlFrame__draggable"},Object(D.jsx)(g.EuiFlexItem,{grow:!1},Object(D.jsx)(g.EuiIcon,{type:"grabHorizontal",className:"controlFrame__dragHandle"})),"oneLine"===o?Object(D.jsx)(g.EuiFlexItem,null,Object(D.jsx)("label",{className:"controlFrameCloneWrapper__label"},a)):void 0))},q=()=>{const e=Object(h.useReduxContainerContext)(),{useEmbeddableSelector:t,useEmbeddableDispatch:n,actions:{setControlOrders:o}}=e,r=n(),{panels:l,viewMode:s,controlStyle:c}=t((e=>e)),d=s===b.ViewMode.EDIT,u=Object(a.useMemo)((()=>Object.values(l).sort(((e,t)=>e.order>t.order?1:-1)).reduce(((e,t)=>(e.push(t.explicitInput.id),e)),[])),[l]),[p,m]=Object(a.useState)(null),f=Object(a.useMemo)((()=>p?u.indexOf(p):-1),[u,p]),v=Object(_.useSensors)(Object(_.useSensor)(_.PointerSensor),Object(_.useSensor)(_.KeyboardSensor,{coordinateGetter:W.sortableKeyboardCoordinates})),y=!(u&&u.length>0);if(!d&&y)return null;let x="transparent";return y&&(x="plain"),p&&(x="success"),Object(D.jsx)(i.a.Fragment,null,u.length>0?Object(D.jsx)(g.EuiPanel,{borderRadius:"m",color:x,paddingSize:y?"s":"none","data-test-subj":"controls-group-wrapper",className:R()("controlsWrapper",{"controlsWrapper--empty":y,"controlsWrapper--twoLine":"twoLine"===c})},Object(D.jsx)(g.EuiFlexGroup,{wrap:!1,gutterSize:"m",direction:"row",responsive:!1,alignItems:"center","data-test-subj":"controls-group","data-shared-items-count":u.length},Object(D.jsx)(g.EuiFlexItem,null,Object(D.jsx)(_.DndContext,{onDragStart:({active:e})=>m(e.id),onDragEnd:({over:e})=>{if(e){const t=u.indexOf(e.id);if(f!==t){const e=t;r(o({ids:Object(W.arrayMove)([...u],f,e)}))}}m(null)},onDragCancel:()=>m(null),sensors:v,collisionDetection:_.closestCenter,layoutMeasuring:{strategy:_.LayoutMeasuringStrategy.Always}},Object(D.jsx)(W.SortableContext,{items:u,strategy:W.rectSortingStrategy},Object(D.jsx)(g.EuiFlexGroup,{className:R()("controlGroup",{"controlGroup-isDragging":p}),alignItems:"center",gutterSize:"s",wrap:!0},u.map(((e,t)=>l[e]&&Object(D.jsx)(H,{isEditable:d,dragInfo:{index:t,draggingIndex:f},embeddableId:e,embeddableType:l[e].type,key:e}))))),Object(D.jsx)(_.DragOverlay,null,p?Object(D.jsx)(U,{draggingId:p}):null))))):Object(D.jsx)(i.a.Fragment,null))},Y={setControlStyle:(e,t)=>{e.controlStyle=t.payload},setDefaultControlWidth:(e,t)=>{e.defaultControlWidth=t.payload},setDefaultControlGrow:(e,t)=>{e.defaultControlGrow=t.payload},setControlWidth:(e,t)=>{e.panels[t.payload.embeddableId].width=t.payload.width},setControlGrow:(e,t)=>{e.panels[t.payload.embeddableId].grow=t.payload.grow},setControlOrders:(e,t)=>{t.payload.ids.forEach(((t,n)=>{e.panels[t].order=n}))}};var X=n(6);const J=({buttonType:e,defaultControlWidth:t,defaultControlGrow:n,addNewEmbeddable:o,closePopover:r,getRelevantDataViewId:a,setLastUsedDataViewId:i,updateDefaultWidth:l,updateDefaultGrow:s})=>{const{overlays:c,controls:d,theme:u}=j.a.getHooks(),{getControlTypes:p,getControlFactory:m}=d.useService(),{openFlyout:f,openConfirm:h}=c.useService(),b=u.useService();if(0===p().length)return null;const y={key:"addControl",onClick:()=>{(async()=>{const e=j.a.getContextProvider();new Promise(((o,r)=>{let c={};const d=e=>{if(0===Object.keys(c).length)return r(),void e.close();h(F.a.management.discardNewControl.getSubtitle(),{confirmButtonText:F.a.management.discardNewControl.getConfirm(),cancelButtonText:F.a.management.discardNewControl.getCancel(),title:F.a.management.discardNewControl.getTitle(),buttonColor:"danger"}).then((t=>{t&&(r(),e.close())}))},u=f(Object(v.toMountPoint)(Object(D.jsx)(e,null,Object(D.jsx)(z,{setLastUsedDataViewId:i,getRelevantDataViewId:a,isCreate:!0,width:null!=t?t:X.c,grow:null!=n?n:X.a,updateTitle:e=>c.title=e,updateWidth:l,updateGrow:s,onSave:e=>((e,t)=>{if(!t)return r(),void e.close();const n=m(t);n.presaveTransformFunction&&(c=n.presaveTransformFunction(c)),o({type:t,controlInput:c}),e.close()})(u,e),onCancel:()=>d(u),onTypeEditorChange:e=>c={...c,...e}})),{theme$:b.theme$}),{"aria-label":F.a.manageControl.getFlyoutCreateTitle(),outsideClickCloses:!1,onClose:e=>{d(e),te(void 0)}});te(u)})).then((async e=>{await o(e.type,e.controlInput)}),(()=>{}))})(),r&&r()},"data-test-subj":"controls-create-button","aria-label":F.a.management.getManageButtonTitle()};return"callout"===e?Object(D.jsx)(g.EuiButton,N()({},y,{color:"primary",size:"s"}),F.a.emptyState.getAddControlButtonTitle()):Object(D.jsx)(g.EuiContextMenuItem,N()({},y,{icon:"plusInCircle"}),F.a.emptyState.getAddControlButtonTitle())},Q=Object(h.withSuspense)(h.LazyReduxEmbeddableWrapper);let Z;const te=e=>{Z=e};class control_group_container_ControlGroupContainer extends b.Container{closeAllFlyouts(){var e;null===(e=Z)||void 0===e||e.close(),Z=void 0}constructor(e,t){var n;super(e,{embeddableLoaded:{}},j.a.getServices().controls.getControlFactory,t,null===(n=C[e.chainingSystem])||void 0===n?void 0:n.getContainerSettings(e)),r()(this,"type",y.a),r()(this,"subscriptions",new m.Subscription),r()(this,"domNode",void 0),r()(this,"recalculateFilters$",void 0),r()(this,"relevantDataViewId",void 0),r()(this,"lastUsedDataViewId",void 0),r()(this,"setLastUsedDataViewId",(e=>{this.lastUsedDataViewId=e})),r()(this,"setRelevantDataViewId",(e=>{this.relevantDataViewId=e})),r()(this,"getMostRelevantDataViewId",(()=>{var e;return null!==(e=this.lastUsedDataViewId)&&void 0!==e?e:this.relevantDataViewId})),r()(this,"getCreateControlButton",((e,t)=>{const n=j.a.getContextProvider();return Object(D.jsx)(n,null,Object(D.jsx)(J,{buttonType:e,defaultControlWidth:this.getInput().defaultControlWidth,defaultControlGrow:this.getInput().defaultControlGrow,updateDefaultWidth:e=>this.updateInput({defaultControlWidth:e}),updateDefaultGrow:e=>this.updateInput({defaultControlGrow:e}),addNewEmbeddable:(e,t)=>this.addNewEmbeddable(e,t),closePopover:t,getRelevantDataViewId:()=>this.getMostRelevantDataViewId(),setLastUsedDataViewId:e=>this.setLastUsedDataViewId(e)}))})),r()(this,"getEditControlGroupButton",(e=>{const t=j.a.getContextProvider();return Object(D.jsx)(t,null,Object(D.jsx)(L,{controlGroupContainer:this,closePopover:e}))})),r()(this,"getToolbarButtons",(()=>Object(D.jsx)(h.SolutionToolbarPopover,{ownFocus:!0,label:F.a.getControlButtonTitle(),iconType:"arrowDown",iconSide:"right",panelPaddingSize:"none","data-test-subj":"dashboard-controls-menu-button"},(({closePopover:e})=>Object(D.jsx)(g.EuiContextMenuPanel,{items:[this.getCreateControlButton("toolbar",e),this.getEditControlGroupButton(e)]}))))),r()(this,"setupSubscriptions",(()=>{this.subscriptions.add(this.getInput$().pipe(Object(f.skip)(1),Object(f.distinctUntilChanged)(((e,t)=>{return n=e.panels,o=t.panels,u()(x(n),x(o));var n,o}))).subscribe((e=>{this.recalculateDataViews(),this.recalculateFilters(),w(e.panels).idsInOrder.forEach((e=>{var t;return null===(t=this.getChild(e))||void 0===t?void 0:t.refreshInputFromParent()}))})));const e=Object(m.pipe)(Object(f.map)((()=>this.getChildIds())),Object(f.distinctUntilChanged)(u.a),Object(f.switchMap)((e=>Object(m.merge)(...e.map((e=>this.getChild(e).getOutput$().pipe(Object(f.catchError)((()=>m.EMPTY)),Object(f.mapTo)(e))))))));this.subscriptions.add(this.getOutput$().pipe(e).subscribe((e=>{this.recalculateDataViews(),C[this.getInput().chainingSystem].onChildChange({childOutputChangedId:e,childOrder:w(this.getInput().panels),getChild:e=>this.getChild(e),recalculateFilters$:this.recalculateFilters$})}))),this.subscriptions.add(this.recalculateFilters$.pipe(Object(f.debounceTime)(10)).subscribe((()=>this.recalculateFilters())))})),r()(this,"getPanelCount",(()=>Object.keys(this.getInput().panels).length)),r()(this,"recalculateFilters",(()=>{const e=[];Object.values(this.children).map((t=>{var n;const o=t.getOutput();e.push(...null!==(n=null==o?void 0:o.filters)&&void 0!==n?n:[])})),this.updateOutput({filters:Object(p.g)(e)})})),r()(this,"recalculateDataViews",(()=>{const e=[];Object.values(this.children).map((t=>{var n;const o=t.getOutput();e.push(...null!==(n=o.dataViews)&&void 0!==n?n:[])})),this.updateOutput({dataViews:Object(l.uniqBy)(e,"id")})})),r()(this,"untilReady",(()=>{const e=()=>Object.keys(this.getInput().panels).some((e=>!this.getOutput().embeddableLoaded[e]));return e()?new Promise(((t,n)=>{const o=Object(m.merge)(this.getOutput$(),this.getInput$()).subscribe((()=>{this.destroyed&&(o.unsubscribe(),n()),e()||(o.unsubscribe(),t())}))})):Promise.resolve()})),this.recalculateFilters$=new m.Subject,this.untilReady().then((()=>{this.recalculateDataViews(),this.recalculateFilters(),this.setupSubscriptions()}))}createNewPanelState(e,t={}){const n=super.createNewPanelState(e,t);let o=0;return Object.keys(this.getInput().panels).length>0&&(o=Object.values(this.getInput().panels).reduce(((e,t)=>(t.order>e&&(e=t.order),e)),0)+1),{order:o,width:this.getInput().defaultControlWidth,grow:this.getInput().defaultControlGrow,...n}}onRemoveEmbeddable(e){const t=super.onRemoveEmbeddable(e),n=w(this.getInput().panels);for(let o=n.IdsToOrder[e]+1;o<n.idsInOrder.length;o++){const e=t[n.idsInOrder[o]].order;t[n.idsInOrder[o]]={...t[n.idsInOrder[o]],order:e-1}}return t}getInheritedInput(e){const{filters:t,query:n,ignoreParentSettings:o,timeRange:r,chainingSystem:a,panels:i}=this.getInput(),l=C[a].getPrecedingFilters({id:e,childOrder:w(i),getChild:e=>this.getChild(e)});return{ignoreParentSettings:o,filters:[...null!=o&&o.ignoreFilters?[]:null!=t?t:[],...null!=l?l:[]],query:null!=o&&o.ignoreQuery?void 0:n,timeRange:null!=o&&o.ignoreTimerange?void 0:r,id:e}}render(e){this.domNode&&c.a.unmountComponentAtNode(this.domNode),this.domNode=e;const t=j.a.getContextProvider();c.a.render(Object(D.jsx)(v.KibanaThemeProvider,{theme$:j.a.getServices().theme.theme$},Object(D.jsx)(t,null,Object(D.jsx)(Q,{embeddable:this,reducers:Y},Object(D.jsx)(q,null)))),e)}destroy(){super.destroy(),this.closeAllFlyouts(),this.subscriptions.unsubscribe(),this.domNode&&c.a.unmountComponentAtNode(this.domNode)}}}}]);