(window.inputControlVis_bundle_jsonpfunction=window.inputControlVis_bundle_jsonpfunction||[]).push([[1],[,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r(6)(2)},function(t,e,r){t.exports=r(6)(2567)},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"g",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"d",(function(){return a})),r.d(e,"f",(function(){return o})),r.d(e,"e",(function(){return u})),r.d(e,"c",(function(){return c}));const n={LIST:"list",RANGE:"range"},i=(t,e,r)=>[...t.slice(0,e),r,...t.slice(e+1)],s=(t,e)=>[...t,e],a=(t,e,r)=>{let n;if(n=r>=0?e+1:e-1,n<0)return[...t.slice(1),t[0]];if(n>=t.length){const e=t.length-1;return[t[e],...t.slice(0,e)]}{const r=t.slice(),i=r[n];return r[n]=r[e],r[e]=i,r}},o=(t,e)=>[...t.slice(0,e),...t.slice(e+1)],l=t=>{const e={};switch(t){case n.RANGE:e.decimalPlaces=0,e.step=1;break;case n.LIST:e.type="terms",e.multiselect=!0,e.dynamicOptions=!0,e.size=5,e.order="desc"}return e},u=t=>({id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:t,options:l(t)}),c=(t,e)=>{let r=`${t.type}: ${e}`;return t.label?r=`${t.label}`:t.fieldName&&(r=`${t.fieldName}`),r}},function(t,e,r){"use strict";var n,i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function a(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function o(t,e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],l=e.base?o[0]+e.base:o[0],u=r[l]||0,c="".concat(l," ").concat(u);r[l]=u+1;var d=a(c),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:c,updater:g(h,e),references:1}),n.push(c)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var s=r.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,c=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function d(t,e,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var s=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function h(t,e,r){var n=r.css,i=r.media,s=r.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,p=0;function g(t,e){var r,n,i;if(e.singleton){var s=p++;r=f||(f=l(e)),n=d.bind(null,r,s,!1),i=d.bind(null,r,s,!0)}else r=l(e),n=h.bind(null,r,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=o(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var i=a(r[n]);s[i].references--}for(var l=o(t,e),u=0;u<r.length;u++){var c=a(r[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}r=l}}}},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r,n,i,s=t[1]||"",a=t[3];if(!a)return s;if(e&&"function"==typeof btoa){var o=(r=a,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),l=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[s].concat(l).concat([o]).join("\n")}return[s].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(n)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(i[a]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);n&&i[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},function(t,e,r){t.exports=r(6)(9)},function(t,e,r){t.exports=r(6)(23)},function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o}));var n=r(10),i=r.n(n);function s(t){const e=new Map;return t.forEach((r=>{const n=[r.id],s=e=>{if(i.a.has(e,"parent")&&""!==e.parent&&!n.includes(e.parent)){n.push(e.parent);const i=(r=e.parent,t.find((t=>t.id===r)));i&&s(i)}var r};s(r),e.set(r.id,n)})),e}var a=r(18);function o(t,e,r){return t.filter((t=>{if(!t.indexPattern||!t.fieldName)return!1;const n=r.get(t.id);return null==n||!n.includes(e)})).map(((t,e)=>({value:t.id,text:Object(a.c)(t,e)})))}},function(t,e,r){t.exports=r(6)(45)},function(t,e,r){"use strict";function n(t,e,r,i){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=e,s.found=r,s.location=i,s.name="SyntaxError",s}function i(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source+":"+s.line+":"+s.column;if(n){var o=this.location.end,l=i("",s.line.toString().length),u=n[s.line-1],c=s.line===o.line?o.column:u.length+1;e+="\n --\x3e "+a+"\n"+l+" |\n"+s.line+" | "+u+"\n"+l+" | "+i("",s.column-1)+i("",c-s.column,"^")}else e+="\n at "+a}return e},n.buildMessage=function(t,e){var r={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?s(t[0])+"-"+s(t[1]):s(t)}));return"["+(t.inverted?"^":"")+e+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return r[t.type](t)}return"Expected "+function(t){var e,r,n=t.map(a);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){var r,i={},s=(e=void 0!==e?e:{}).grammarSource,a={start:dt,Literal:jt},o=dt,l='"',u="\\",c="@kuery-cursor@",d=/^[\\"]/,h=/^[^"]/,f=/^[\\():<>"*{}]/,p=/^[0-9a-f]/i,g=/^[ \t\r\n\xA0]/,m=st("(",!1),v=st(")",!1),b=st(":",!1),y=st("{",!1),x=st("}",!1),C=ot("fieldName"),w=ot("value"),_=ot("OR"),j=st("or",!0),F=ot("AND"),A=st("and",!0),O=ot("NOT"),S=st("not",!0),M=ot("literal"),E=st('"',!1),N=st("\\",!1),P=at(["\\",'"'],!1,!1),T=at(['"'],!0,!1),I={type:"any"},q=st("*",!1),k=st("\\t",!1),R=st("\\r",!1),V=st("\\n",!1),L=at(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),B=st("u",!1),U=at([["0","9"],["a","f"]],!1,!0),Q=st("<=",!1),$=st(">=",!1),z=st("<",!1),G=st(">",!1),W=ot("whitespace"),D=at([" ","\t","\r","\n","Â "],!1,!1),H=st("@kuery-cursor@",!1),K=function(t,e){return e},Z=function(t,e){return e},J=function(){return kt},X=function(e,r,n){const{start:i,end:s}=ut(tt,Y);return{type:"cursor",start:i.offset,end:s.offset-r.length,prefix:e.join(""),suffix:n.join(""),text:t.substring(tt,Y).replace(r,"")}},Y=0,tt=0,et=[{line:1,column:1}],rt=0,nt=[],it=0;if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');o=a[e.startRule]}function st(t,e){return{type:"literal",text:t,ignoreCase:e}}function at(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function ot(t){return{type:"other",description:t}}function lt(e){var r,n=et[e];if(n)return n;for(r=e-1;!et[r];)r--;for(n={line:(n=et[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return et[e]=n,n}function ut(t,e){var r=lt(t),n=lt(e);return{source:s,start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function ct(t){Y<rt||(Y>rt&&(rt=Y,nt=[]),nt.push(t))}function dt(){var t,e,r,n,s,a;for(t=Y,e=[],r=It();r!==i;)e.push(r),r=It();return(r=ht())===i&&(r=null),(n=Mt())!==i?(tt=t,s=r,t="cursor"===(a=n).type?{...a,suggestionTypes:["conjunction"]}:null!==s?s:Lt.function.buildNode("is","*","*")):(Y=t,t=i),t}function ht(){var t,e,r,n,s;if(t=Y,(e=ft())!==i){if(r=[],n=Y,Ct()!==i&&(s=ft())!==i?(tt=n,n=K(0,s)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,Ct()!==i&&(s=ft())!==i?(tt=n,n=K(0,s)):(Y=n,n=i);else r=i;r!==i?(tt=t,t=function(t,e){const r=[t,...e];return kt&&r.find((t=>"cursor"===t.type))||Bt("or",r)}(e,r)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=ft()),t}function ft(){var t,e,r,n,s;if(t=Y,(e=pt())!==i){if(r=[],n=Y,wt()!==i&&(s=pt())!==i?(tt=n,n=K(0,s)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,wt()!==i&&(s=pt())!==i?(tt=n,n=K(0,s)):(Y=n,n=i);else r=i;r!==i?(tt=t,t=function(t,e){const r=[t,...e];return kt&&r.find((t=>"cursor"===t.type))||Bt("and",r)}(e,r)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=pt()),t}function pt(){var t,e,r;return t=Y,_t()!==i&&(e=gt())!==i?(tt=t,t="cursor"===(r=e).type?r:Bt("not",[r])):(Y=t,t=i),t===i&&(t=gt()),t}function gt(){var e,r,n,s,a,o,l,u;if(e=Y,40===t.charCodeAt(Y)?(r="(",Y++):(r=i,0===it&&ct(m)),r!==i){for(n=[],s=It();s!==i;)n.push(s),s=It();(s=ht())!==i&&(a=Mt())!==i?(41===t.charCodeAt(Y)?(o=")",Y++):(o=i,0===it&&ct(v)),o!==i?(tt=e,l=s,e="cursor"===(u=a).type?{...u,suggestionTypes:["conjunction"]}:l):(Y=e,e=i)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=function(){var e,r,n,s,a,o,l,u,c,d;if(e=Y,(r=mt())!==i){for(n=[],s=It();s!==i;)n.push(s),s=It();if(58===t.charCodeAt(Y)?(s=":",Y++):(s=i,0===it&&ct(b)),s!==i){for(a=[],o=It();o!==i;)a.push(o),o=It();if(123===t.charCodeAt(Y)?(o="{",Y++):(o=i,0===it&&ct(y)),o!==i){for(l=[],u=It();u!==i;)l.push(u),u=It();(u=ht())!==i&&(c=Mt())!==i?(125===t.charCodeAt(Y)?(d="}",Y++):(d=i,0===it&&ct(x)),d!==i?(tt=e,e=function(t,e,r){return"cursor"===e.type?{...e,nestedPath:e.nestedPath?`${t.value}.${e.nestedPath}`:t.value}:"cursor"===r.type?{...r,suggestionTypes:["conjunction"]}:Bt("nested",[t,e])}(r,u,c)):(Y=e,e=i)):(Y=e,e=i)}else Y=e,e=i}else Y=e,e=i}else Y=e,e=i;return e===i&&(e=function(){var e;return e=function(){var e,r,n,s,a,o,l,u,c;if(e=Y,(r=mt())!==i){for(n=[],s=It();s!==i;)n.push(s),s=It();if(s=function(){var e,r;return e=Y,"<="===t.substr(Y,2)?(r="<=",Y+=2):(r=i,0===it&&ct(Q)),r!==i&&(tt=e,r="lte"),(e=r)===i&&(e=Y,">="===t.substr(Y,2)?(r=">=",Y+=2):(r=i,0===it&&ct($)),r!==i&&(tt=e,r="gte"),(e=r)===i&&(e=Y,60===t.charCodeAt(Y)?(r="<",Y++):(r=i,0===it&&ct(z)),r!==i&&(tt=e,r="lt"),(e=r)===i&&(e=Y,62===t.charCodeAt(Y)?(r=">",Y++):(r=i,0===it&&ct(G)),r!==i&&(tt=e,r="gt"),e=r))),e}(),s!==i){for(a=[],o=It();o!==i;)a.push(o),o=It();(o=jt())!==i?(tt=e,l=r,u=s,e="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:Bt("range",[l,u,c])):(Y=e,e=i)}else Y=e,e=i}else Y=e,e=i;return e}(),e===i&&(e=function(){var e,r,n,s,a,o,l,u;if(e=Y,(r=mt())!==i){for(n=[],s=It();s!==i;)n.push(s),s=It();if(58===t.charCodeAt(Y)?(s=":",Y++):(s=i,0===it&&ct(b)),s!==i){for(a=[],o=It();o!==i;)a.push(o),o=It();(o=vt())!==i?(tt=e,l=r,e="cursor"===(u=o).type?{...u,fieldName:l.value,suggestionTypes:["value","conjunction"]}:u(l)):(Y=e,e=i)}else Y=e,e=i}else Y=e,e=i;return e}(),e===i&&(e=function(){var t,e;return t=Y,(e=xt())!==i&&(tt=t,e=function(t){if("cursor"===t.type){const e=`${t.prefix}${t.suffix}`.trim();return{...t,fieldName:e,suggestionTypes:["field","operator","conjunction"]}}return t(Ut(null))}(e)),e}())),e}()),e}()),e}function mt(){var t;return it++,t=jt(),it--,t===i&&0===it&&ct(C),t}function vt(){var e,r,n,s,a,o,l,u;if(e=Y,40===t.charCodeAt(Y)?(r="(",Y++):(r=i,0===it&&ct(m)),r!==i){for(n=[],s=It();s!==i;)n.push(s),s=It();s=function(){var t,e,r,n,s;if(t=Y,(e=bt())!==i){if(r=[],n=Y,Ct()!==i&&(s=bt())!==i?(tt=n,n=Z(0,s)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,Ct()!==i&&(s=bt())!==i?(tt=n,n=Z(0,s)):(Y=n,n=i);else r=i;r!==i?(tt=t,t=function(t,e){const r=[t,...e],n=kt&&r.find((t=>"cursor"===t.type));return n?{...n,suggestionTypes:["value"]}:t=>Bt("or",r.map((e=>e(t))))}(e,r)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=bt()),t}(),s!==i&&(a=Mt())!==i?(41===t.charCodeAt(Y)?(o=")",Y++):(o=i,0===it&&ct(v)),o!==i?(tt=e,l=s,e="cursor"===(u=a).type?{...u,suggestionTypes:["conjunction"]}:l):(Y=e,e=i)):(Y=e,e=i)}else Y=e,e=i;return e===i&&(e=xt()),e}function bt(){var t,e,r,n,s;if(t=Y,(e=yt())!==i){if(r=[],n=Y,wt()!==i&&(s=yt())!==i?(tt=n,n=Z(0,s)):(Y=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Y,wt()!==i&&(s=yt())!==i?(tt=n,n=Z(0,s)):(Y=n,n=i);else r=i;r!==i?(tt=t,t=function(t,e){const r=[t,...e],n=kt&&r.find((t=>"cursor"===t.type));return n?{...n,suggestionTypes:["value"]}:t=>Bt("and",r.map((e=>e(t))))}(e,r)):(Y=t,t=i)}else Y=t,t=i;return t===i&&(t=yt()),t}function yt(){var t,e,r;return t=Y,_t()!==i&&(e=vt())!==i?(tt=t,t="cursor"===(r=e).type?{...list,suggestionTypes:["value"]}:t=>Bt("not",[r(t)])):(Y=t,t=i),t===i&&(t=vt()),t}function xt(){var t,e;return it++,t=Y,(e=Ft())!==i&&(tt=t,e=function(t){if("cursor"===t.type)return t;const e=Ut(!0);return r=>Bt("is",[r,t,e])}(e)),(t=e)===i&&(t=Y,(e=Ot())!==i&&(tt=t,e=function(t){if("cursor"===t.type)return t;!Vt&&"wildcard"===t.type&&Lt.wildcard.hasLeadingWildcard(t)&&function(t,e){throw function(t,e){return new n("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.",null,null,e)}(0,e=void 0!==e?e:ut(tt,Y))}();const e=Ut(!1);return r=>Bt("is",[r,t,e])}(e)),t=e),it--,t===i&&(e=i,0===it&&ct(w)),t}function Ct(){var e,r,n,s,a;if(it++,e=Y,r=[],(n=It())!==i)for(;n!==i;)r.push(n),n=It();else r=i;if(r!==i)if("or"===t.substr(Y,2).toLowerCase()?(n=t.substr(Y,2),Y+=2):(n=i,0===it&&ct(j)),n!==i){if(s=[],(a=It())!==i)for(;a!==i;)s.push(a),a=It();else s=i;s!==i?e=r=[r,n,s]:(Y=e,e=i)}else Y=e,e=i;else Y=e,e=i;return it--,e===i&&(r=i,0===it&&ct(_)),e}function wt(){var e,r,n,s,a;if(it++,e=Y,r=[],(n=It())!==i)for(;n!==i;)r.push(n),n=It();else r=i;if(r!==i)if("and"===t.substr(Y,3).toLowerCase()?(n=t.substr(Y,3),Y+=3):(n=i,0===it&&ct(A)),n!==i){if(s=[],(a=It())!==i)for(;a!==i;)s.push(a),a=It();else s=i;s!==i?e=r=[r,n,s]:(Y=e,e=i)}else Y=e,e=i;else Y=e,e=i;return it--,e===i&&(r=i,0===it&&ct(F)),e}function _t(){var e,r,n,s;if(it++,e=Y,"not"===t.substr(Y,3).toLowerCase()?(r=t.substr(Y,3),Y+=3):(r=i,0===it&&ct(S)),r!==i){if(n=[],(s=It())!==i)for(;s!==i;)n.push(s),s=It();else n=i;n!==i?e=r=[r,n]:(Y=e,e=i)}else Y=e,e=i;return it--,e===i&&(r=i,0===it&&ct(O)),e}function jt(){var t;return it++,(t=Ft())===i&&(t=Ot()),it--,t===i&&0===it&&ct(M),t}function Ft(){var e,r,n,s,a,o,u;if(e=Y,tt=Y,(r=(r=J())?void 0:i)!==i)if(34===t.charCodeAt(Y)?(n=l,Y++):(n=i,0===it&&ct(E)),n!==i){for(s=[],a=At();a!==i;)s.push(a),a=At();if((a=qt())!==i){for(o=[],u=At();u!==i;)o.push(u),u=At();34===t.charCodeAt(Y)?(u=l,Y++):(u=i,0===it&&ct(E)),u!==i?(tt=e,e=X(s,a,o)):(Y=e,e=i)}else Y=e,e=i}else Y=e,e=i;else Y=e,e=i;if(e===i)if(e=Y,34===t.charCodeAt(Y)?(r=l,Y++):(r=i,0===it&&ct(E)),r!==i){for(n=[],s=At();s!==i;)n.push(s),s=At();34===t.charCodeAt(Y)?(s=l,Y++):(s=i,0===it&&ct(E)),s!==i?(tt=e,e=Ut(n.join(""))):(Y=e,e=i)}else Y=e,e=i;return e}function At(){var e,r,n;return(e=Et())===i&&(e=Pt())===i&&(e=Y,92===t.charCodeAt(Y)?(r=u,Y++):(r=i,0===it&&ct(N)),r!==i?(d.test(t.charAt(Y))?(n=t.charAt(Y),Y++):(n=i,0===it&&ct(P)),n!==i?(tt=e,e=n):(Y=e,e=i)):(Y=e,e=i),e===i&&(e=Y,r=Y,it++,n=qt(),it--,n===i?r=void 0:(Y=r,r=i),r!==i?(h.test(t.charAt(Y))?(n=t.charAt(Y),Y++):(n=i,0===it&&ct(T)),n!==i?(tt=e,e=n):(Y=e,e=i)):(Y=e,e=i))),e}function Ot(){var t,e,r,n,s,a;if(t=Y,tt=Y,(e=(e=J())?void 0:i)!==i){for(r=[],n=St();n!==i;)r.push(n),n=St();if((n=qt())!==i){for(s=[],a=St();a!==i;)s.push(a),a=St();tt=t,t=X(r,n,s)}else Y=t,t=i}else Y=t,t=i;if(t===i){if(t=Y,e=[],(r=St())!==i)for(;r!==i;)e.push(r),r=St();else e=i;e!==i&&(tt=t,e=function(t){const e=t.join("").trim();return"null"===e?Ut(null):"true"===e?Ut(!0):"false"===e?Ut(!1):t.includes($t)?Qt(e):Ut(e)}(e)),t=e}return t}function St(){var e,r,n,s,a;return(e=Et())===i&&(e=function(){var e,r,n;return e=Y,92===t.charCodeAt(Y)?(r=u,Y++):(r=i,0===it&&ct(N)),r!==i&&(n=Nt())!==i?(tt=e,e=n):(Y=e,e=i),e}(),e===i&&(e=Pt())===i&&(e=function(){var e,r,n;return e=Y,92===t.charCodeAt(Y)?(r=u,Y++):(r=i,0===it&&ct(N)),r!==i?("or"===t.substr(Y,2).toLowerCase()?(n=t.substr(Y,2),Y+=2):(n=i,0===it&&ct(j)),n===i&&("and"===t.substr(Y,3).toLowerCase()?(n=t.substr(Y,3),Y+=3):(n=i,0===it&&ct(A)),n===i&&("not"===t.substr(Y,3).toLowerCase()?(n=t.substr(Y,3),Y+=3):(n=i,0===it&&ct(S)))),n!==i?(tt=e,e=n):(Y=e,e=i)):(Y=e,e=i),e}(),e===i&&(e=function(){var e,r;return e=Y,42===t.charCodeAt(Y)?(r="*",Y++):(r=i,0===it&&ct(q)),r!==i&&(tt=e,r=$t),r}(),e===i&&(e=Y,r=Y,it++,n=Nt(),it--,n===i?r=void 0:(Y=r,r=i),r!==i?(n=Y,it++,s=function(){var t;return(t=Ct())===i&&(t=wt())===i&&(t=_t()),t}(),it--,s===i?n=void 0:(Y=n,n=i),n!==i?(s=Y,it++,a=qt(),it--,a===i?s=void 0:(Y=s,s=i),s!==i?(t.length>Y?(a=t.charAt(Y),Y++):(a=i,0===it&&ct(I)),a!==i?(tt=e,e=a):(Y=e,e=i)):(Y=e,e=i)):(Y=e,e=i)):(Y=e,e=i))))),e}function Mt(){var t,e,r,n,s,a;if(t=Y,tt=Y,(e=(e=J())?void 0:i)!==i){for(r=[],n=It();n!==i;)r.push(n),n=It();if((n=qt())!==i){for(s=[],a=It();a!==i;)s.push(a),a=It();tt=t,t=X(r,n,s)}else Y=t,t=i}else Y=t,t=i;if(t===i)for(t=[],e=It();e!==i;)t.push(e),e=It();return t}function Et(){var e,r;return e=Y,"\\t"===t.substr(Y,2)?(r="\\t",Y+=2):(r=i,0===it&&ct(k)),r!==i&&(tt=e,r="\t"),(e=r)===i&&(e=Y,"\\r"===t.substr(Y,2)?(r="\\r",Y+=2):(r=i,0===it&&ct(R)),r!==i&&(tt=e,r="\r"),(e=r)===i&&(e=Y,"\\n"===t.substr(Y,2)?(r="\\n",Y+=2):(r=i,0===it&&ct(V)),r!==i&&(tt=e,r="\n"),e=r)),e}function Nt(){var e;return f.test(t.charAt(Y))?(e=t.charAt(Y),Y++):(e=i,0===it&&ct(L)),e}function Pt(){var e,r,n;return e=Y,92===t.charCodeAt(Y)?(r=u,Y++):(r=i,0===it&&ct(N)),r!==i?(n=function(){var e,r,n,s,a,o,l,u,c;return e=Y,117===t.charCodeAt(Y)?(r="u",Y++):(r=i,0===it&&ct(B)),r!==i?(n=Y,s=Y,(a=Tt())!==i&&(o=Tt())!==i&&(l=Tt())!==i&&(u=Tt())!==i?s=a=[a,o,l,u]:(Y=s,s=i),(n=s!==i?t.substring(n,Y):s)!==i?(tt=e,c=n,e=String.fromCharCode(parseInt(c,16))):(Y=e,e=i)):(Y=e,e=i),e}(),n!==i?(tt=e,e=n):(Y=e,e=i)):(Y=e,e=i),e}function Tt(){var e;return p.test(t.charAt(Y))?(e=t.charAt(Y),Y++):(e=i,0===it&&ct(U)),e}function It(){var e;return it++,g.test(t.charAt(Y))?(e=t.charAt(Y),Y++):(e=i,0===it&&ct(D)),it--,e===i&&0===it&&ct(W),e}function qt(){var e,r;return e=Y,tt=Y,(J()?void 0:i)!==i?(t.substr(Y,14)===c?(r=c,Y+=14):(r=i,0===it&&ct(H)),r!==i?(tt=e,e=Rt):(Y=e,e=i)):(Y=e,e=i),e}const{parseCursor:kt,cursorSymbol:Rt,allowLeadingWildcards:Vt=!0,helpers:{nodeTypes:Lt}}=e,Bt=Lt.function.buildNodeWithArgumentNodes,Ut=Lt.literal.buildNode,Qt=Lt.wildcard.buildNode,{wildcardSymbol:$t}=Lt.wildcard;if((r=o())!==i&&Y===t.length)return r;throw r!==i&&Y<t.length&&ct({type:"end"}),zt=nt,Gt=rt<t.length?t.charAt(rt):null,Wt=rt<t.length?ut(rt,rt+1):ut(rt,rt),new n(n.buildMessage(zt,Gt),zt,Gt,Wt);var zt,Gt,Wt}}},function(t,e,r){switch(window.__kbnThemeTag__){case"v8dark":return r(27);case"v8light":return r(29)}},function(t,e,r){var n=r(19),i=r(28);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);n(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,r){(e=r(20)(!1)).push([t.i,".icvContainer__wrapper{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;min-height:0;flex:1 1 0;display:flex;overflow:auto}.icvContainer__wrapper::-webkit-scrollbar{width:16px;height:16px}.icvContainer__wrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.icvContainer__wrapper::-webkit-scrollbar-corner,.icvContainer__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.icvContainer{width:100%;margin:0 4px;padding:8px}\n",""]),t.exports=e},function(t,e,r){var n=r(19),i=r(30);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);n(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,r){(e=r(20)(!1)).push([t.i,".icvContainer__wrapper{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;min-height:0;flex:1 1 0;display:flex;overflow:auto}.icvContainer__wrapper::-webkit-scrollbar{width:16px;height:16px}.icvContainer__wrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.icvContainer__wrapper::-webkit-scrollbar-corner,.icvContainer__wrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.icvContainer{width:100%;margin:0 4px;padding:8px}\n",""]),t.exports=e},function(t,e,r){t.exports=r(6)(15)},function(t,e,r){t.exports=r(6)(13)},function(t,e,r){t.exports=r(6)(4)},function(t,e,r){t.exports=r(6)(18)},function(t,e,r){t.exports=r(6)(2564)},function(t,e,r){t.exports=r(6)(2572)},,,,,,,function(t,e,r){"use strict";r.r(e),r.d(e,"createInputControlVisController",(function(){return Rt}));var n={};r.r(n),r.d(n,"buildNode",(function(){return H})),r.d(n,"toElasticsearchQuery",(function(){return K}));var i={};r.r(i),r.d(i,"wildcardSymbol",(function(){return Z})),r.d(i,"buildNode",(function(){return Y})),r.d(i,"test",(function(){return tt})),r.d(i,"toElasticsearchQuery",(function(){return et})),r.d(i,"toQueryStringQuery",(function(){return rt})),r.d(i,"hasLeadingWildcard",(function(){return nt}));var s={};r.r(s),r.d(s,"buildNodeParams",(function(){return ct})),r.d(s,"toElasticsearchQuery",(function(){return dt}));var a={};r.r(a),r.d(a,"buildNodeParams",(function(){return ht})),r.d(a,"toElasticsearchQuery",(function(){return ft}));var o={};r.r(o),r.d(o,"buildNodeParams",(function(){return pt})),r.d(o,"toElasticsearchQuery",(function(){return gt}));var l={};r.r(l),r.d(l,"buildNodeParams",(function(){return mt})),r.d(l,"toElasticsearchQuery",(function(){return vt}));var u={};r.r(u),r.d(u,"buildNodeParams",(function(){return bt})),r.d(u,"toElasticsearchQuery",(function(){return yt}));var c={};r.r(c),r.d(c,"buildNodeParams",(function(){return xt})),r.d(c,"toElasticsearchQuery",(function(){return Ct}));var d={};r.r(d),r.d(d,"buildNodeParams",(function(){return wt})),r.d(d,"toElasticsearchQuery",(function(){return _t}));var h={};r.r(h),r.d(h,"buildNode",(function(){return Ft})),r.d(h,"buildNodeWithArgumentNodes",(function(){return At})),r.d(h,"toElasticsearchQuery",(function(){return Ot}));var f=r(16),p=r.n(f),g=r(1),m=r.n(g),v=r(10),b=r.n(v),y=r(13),x=r(4),C=r(11),w=r(12),_=r(18),j=r(0),F=r(2);function A(t){let e=t.children;t.disableMsg&&(e=Object(F.jsx)(C.EuiToolTip,{position:"top",content:t.disableMsg,anchorClassName:"eui-displayBlock"},e));const r=t.warningMsg?Object(F.jsx)(m.a.Fragment,null,Object(F.jsx)(C.EuiToolTip,{position:"top",content:t.warningMsg},Object(F.jsx)(C.EuiIcon,{type:"alert"})),t.label):t.label;return Object(F.jsx)(C.EuiFormRow,{label:r,id:t.id,"data-test-subj":"inputControl"+t.controlIndex},e)}class list_control_ListControlUi extends g.PureComponent{constructor(t){super(t),p()(this,"isMounted",!1),p()(this,"state",{isLoading:!1}),p()(this,"textInput",void 0),p()(this,"componentDidMount",(()=>{this.textInput&&this.textInput.setAttribute("focusable","false"),this.isMounted=!0})),p()(this,"componentWillUnmount",(()=>{this.isMounted=!1})),p()(this,"setTextInputRef",(t=>{this.textInput=t})),p()(this,"handleOnChange",(t=>{const e=t.map((({value:t})=>t));this.props.stageFilter(this.props.controlIndex,e)})),p()(this,"debouncedFetch",b.a.debounce((async t=>{this.props.fetchOptions&&await this.props.fetchOptions(t),this.isMounted&&this.setState({isLoading:!1})}),300)),p()(this,"onSearchChange",(t=>{this.setState({isLoading:!0},this.debouncedFetch.bind(null,t))})),this.textInput=null}renderControl(){var t;const{intl:e}=this.props;if(this.props.disableMsg)return Object(F.jsx)(C.EuiFieldText,{"aria-label":e.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),placeholder:e.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),disabled:!0});const r=null===(t=this.props.options)||void 0===t?void 0:t.map((t=>({label:this.props.formatOptionLabel(t).toString(),value:t,"data-test-subj":`option_${t.toString().replace(" ","_")}`}))).sort(((t,e)=>t.label.toLowerCase().localeCompare(e.label.toLowerCase()))),n=this.props.selectedOptions.map((t=>({label:this.props.formatOptionLabel(t).toString(),value:t})));return Object(F.jsx)(C.EuiComboBox,{placeholder:e.formatMessage({id:"inputControl.vis.listControl.selectPlaceholder",defaultMessage:"Select..."}),options:r,isLoading:this.state.isLoading,async:this.props.dynamicOptions,onSearchChange:this.props.dynamicOptions?this.onSearchChange:void 0,selectedOptions:n,onChange:this.handleOnChange,singleSelection:!this.props.multiselect,"data-test-subj":`listControlSelect${this.props.controlIndex}`,inputRef:this.setTextInputRef})}render(){const t=j.i18n.translate("inputControl.vis.listControl.partialResultsWarningMessage",{defaultMessage:"Terms list might be incomplete because the request is taking too long. Adjust the autocomplete settings in kibana.yml for complete results."});return Object(F.jsx)(A,{id:this.props.id,label:this.props.label,warningMsg:this.props.partialResults?t:void 0,controlIndex:this.props.controlIndex,disableMsg:this.props.disableMsg},this.renderControl())}}p()(list_control_ListControlUi,"defaultProps",{dynamicOptions:!1,multiselect:!0,selectedOptions:[],options:[]});const O=Object(w.injectI18n)(list_control_ListControlUi);var S=r(14);function M(t,e,r){if(e<=0)return r(t);let n=t;return n*=Math.pow(10,e),n=r(n),n/=Math.pow(10,e),n}class range_control_RangeControl extends g.PureComponent{constructor(...t){super(...t),p()(this,"state",{}),p()(this,"onChangeComplete",b.a.debounce((t=>{const e={min:t[0],max:t[1]};this.props.stageFilter(this.props.controlIndex,e)}),200))}static getDerivedStateFromProps(t,e){const r=t.control.hasValue()?[t.control.value.min,t.control.value.max]:["",""];return t.control.hasValue()&&null==t.control.value.min&&(r[0]=""),t.control.hasValue()&&null==t.control.value.max&&(r[1]=""),r!==e.prevValue?{value:r,prevValue:r}:null}renderControl(){if(!this.props.control.isEnabled())return Object(F.jsx)(S.ValidatedDualRange,{disabled:!0,showInput:!0});const t=b.a.get(this.props,"control.options.decimalPlaces",0),e=function(t,e){return M(t,e,Math.floor)}(this.props.control.min,t),r=function(t,e){return M(t,e,Math.ceil)}(this.props.control.max,t),n=[{value:e,label:e},{value:r,label:r}];return Object(F.jsx)(S.ValidatedDualRange,{id:this.props.control.id,min:e,max:r,value:this.state.value,onChange:this.onChangeComplete,showInput:!0,showRange:!0,showTicks:!0,ticks:n})}render(){return Object(F.jsx)(A,{id:this.props.control.id,label:this.props.control.label,controlIndex:this.props.controlIndex,disableMsg:this.props.control.isEnabled()?void 0:this.props.control.disabledReason},this.renderControl())}}r(26);class input_control_vis_InputControlVis extends g.Component{constructor(t){super(t),this.handleSubmit=this.handleSubmit.bind(this),this.handleReset=this.handleReset.bind(this),this.handleClearAll=this.handleClearAll.bind(this)}handleSubmit(){this.props.submitFilters()}handleReset(){this.props.resetControls()}handleClearAll(){this.props.clearControls()}renderControls(){return this.props.controls.map(((t,e)=>{let r=null;if(function(t){return t.type===_.a.LIST}(t))r=Object(F.jsx)(O,{id:t.id,label:t.label,options:t.selectOptions,selectedOptions:t.value,formatOptionLabel:t.format,disableMsg:t.isEnabled()?void 0:t.disabledReason,multiselect:t.options.multiselect,partialResults:t.partialResults,dynamicOptions:t.options.dynamicOptions,controlIndex:e,stageFilter:this.props.stageFilter,fetchOptions:t=>{this.props.refreshControl(e,t)}});else{if(!function(t){return t.type===_.a.RANGE}(t))throw new Error(`Unhandled control type ${t.type}`);r=Object(F.jsx)(range_control_RangeControl,{control:t,controlIndex:e,stageFilter:this.props.stageFilter})}return Object(F.jsx)(C.EuiFlexItem,{key:t.id,style:{minWidth:"250px"},"data-test-subj":"inputControlItem"},r)}))}renderStagingButtons(){return Object(F.jsx)(C.EuiFlexGroup,{wrap:!0},Object(F.jsx)(C.EuiFlexItem,{grow:!1},Object(F.jsx)(C.EuiButton,{fill:!0,onClick:this.handleSubmit,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlSubmitBtn"},Object(F.jsx)(w.FormattedMessage,{id:"inputControl.vis.inputControlVis.applyChangesButtonLabel",defaultMessage:"Apply changes"}))),Object(F.jsx)(C.EuiFlexItem,{grow:!1},Object(F.jsx)(C.EuiButtonEmpty,{onClick:this.handleReset,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlCancelBtn"},Object(F.jsx)(w.FormattedMessage,{id:"inputControl.vis.inputControlVis.cancelChangesButtonLabel",defaultMessage:"Cancel changes"}))),Object(F.jsx)(C.EuiFlexItem,{grow:!1},Object(F.jsx)(C.EuiButtonEmpty,{onClick:this.handleClearAll,disabled:!this.props.hasValues(),"data-test-subj":"inputControlClearBtn"},Object(F.jsx)(w.FormattedMessage,{id:"inputControl.vis.inputControlVis.clearFormButtonLabel",defaultMessage:"Clear form"}))))}render(){let t;return this.props.controls.length>0&&!this.props.updateFiltersOnChange&&(t=this.renderStagingButtons()),Object(F.jsx)("div",{className:"icvContainer__wrapper"},Object(F.jsx)("div",{className:"icvContainer"},Object(F.jsx)(C.EuiFlexGroup,{wrap:!0},this.renderControls()),t))}}function E(t,e){return j.i18n.translate("inputControl.control.noValuesDisableTooltip",{defaultMessage:'Filtering occurs on the "{fieldName}" field, which doesn\'t exist on any documents in the "{indexPatternName}" index pattern. Choose a different field or index documents that contain values for this field.',values:{fieldName:t,indexPatternName:e}})}function N(t){return j.i18n.translate("inputControl.control.noIndexPatternTooltip",{defaultMessage:"Could not locate index-pattern id: {indexPatternId}.",values:{indexPatternId:t}})}class control_Control{constructor(t,e,r){p()(this,"kbnFilter",null),p()(this,"enable",!1),p()(this,"disabledReason",""),p()(this,"value",void 0),p()(this,"id",void 0),p()(this,"options",void 0),p()(this,"type",void 0),p()(this,"label",void 0),p()(this,"ancestors",[]),p()(this,"format",(t=>{const e=this.filterManager.getIndexPattern(),r=this.filterManager.getField();return r&&e?e.getFormatterForField(r).convert(t):t})),this.controlParams=t,this.filterManager=e,this.useTimeFilter=r,this.id=t.id,this.controlParams=t,this.options=t.options,this.type=t.type,this.label=t.label?t.label:t.fieldName,this.reset(),this.disable(j.i18n.translate("inputControl.control.notInitializedTooltip",{defaultMessage:"Control has not been initialized"}))}setAncestors(t){this.ancestors=t}hasAncestors(){return this.ancestors&&this.ancestors.length>0}hasUnsetAncestor(){return this.ancestors.reduce(((t,e)=>t||!e.hasValue()),!1)}getAncestorValues(){return this.ancestors.map((t=>t.value))}getAncestorFilters(){return this.ancestors.map((t=>t.filterManager.createFilter(t.value)))}isEnabled(){return this.enable}disable(t){this.enable=!1,this.disabledReason=t}set(t){this.value=t,this.hasValue()?this.kbnFilter=this.filterManager.createFilter(this.value):this.kbnFilter=null}reset(){this.kbnFilter=null,this.value=this.filterManager.getValueFromFilterBar()}clear(){this.value=void 0}hasChanged(){return!b.a.isEqual(this.value,this.filterManager.getValueFromFilterBar())}hasKbnFilter(){return!!this.kbnFilter}getKbnFilter(){return this.kbnFilter}hasValue(){return void 0!==this.value}}var P,T,I=r(17),q=r.n(I),k=(r(24),function(t,e){if("boolean"!=typeof e&&"boolean"===t.type){if([1,"true"].includes(e))return!0;if([0,"false"].includes(e))return!1;throw new Error("".concat(e," is not a valid boolean value for boolean field ").concat(t.name))}return"number"!=typeof e&&"number"===t.type?Number(e):e}),R=function(t){var e=Object(v.has)(t,"query.match_phrase"),r=Object(v.get)(t,"query.match",[]),n=void 0!==Object.values(r).find((function(t){return"phrase"===t.type}));return e||n},V=function(t,e){var r=k(t,e);return{script:{source:L(t),lang:t.lang,params:{value:r}}}},L=function(t){return"painless"===t.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(t.script," }, params.value);"):"(".concat(t.script,") == value")};!function(t){t.CUSTOM="custom",t.PHRASES="phrases",t.PHRASE="phrase",t.EXISTS="exists",t.MATCH_ALL="match_all",t.QUERY_STRING="query_string",t.RANGE="range",t.RANGE_FROM_VALUE="range_from_value",t.SPATIAL_FILTER="spatial_filter"}(P||(P={})),function(t){t.APP_STATE="appState",t.GLOBAL_STATE="globalState"}(T||(T={}));var B={gt:">",gte:">=",lte:"<=",lt:"<"},U={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},Q={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},$=function(t,e){var r=Object(v.mapValues)(Object(v.pickBy)(e,(function(t,e){return e in B})),(function(e){return"number"===t.type&&"string"==typeof e?parseFloat(e):e})),n=Object(v.map)(r,(function(e,r){return"("+t.script+")"+Object(v.get)(B,r)+r})).join(" && ");if("painless"===t.lang){var i="date"===t.type?Q:U,s=Object(v.reduce)(r,(function(t,e,r){return t.concat(Object(v.get)(i,r))}),[]).join(" "),a=Object(v.map)(r,(function(e,r){return"".concat(r,"(() -> { ").concat(t.script," }, params.").concat(r,")")})).join(" && ");n="".concat(s).concat(a)}return{script:{source:n,params:r,lang:t.lang}}},z=r(22),G=r.n(z),W=r(21),D=r.n(W);function H(t){return{type:"literal",value:t}}function K(t){return t.value}var Z="@kuery-wildcard@";function J(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(t){return t.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function Y(t){return t.includes(Z)?{type:"wildcard",value:t}:Nt(t)}function tt(t,e){var r=t.value.split(Z).map(J).join("[\\s\\S]*");return new RegExp("^".concat(r,"$")).test(e)}function et(t){return t.value.split(Z).join("*")}function rt(t){return t.value.split(Z).map(X).join("*")}function nt(t){var e=t.value;return e.startsWith(Z)&&e.replace(Z,"").length>0}function it(t,e){if(!e)return[];if("literal"===t.type){var r=K(t),n=e.fields.find((function(t){return t.name===r}));return n?[n]:[]}return"wildcard"===t.type?e.fields.filter((function(e){return tt(t,e.name)})):void 0}var st=r(15),at=r.n(st);function ot(t){var e=at.a.tz.guess();return"Browser"===t?e:t}function lt(t){return function(t){var e,r=null==t?void 0:t.subType;return!(null==r||null===(e=r.nested)||void 0===e||!e.path)}(t)?t.subType:void 0}function ut(t,e,r){var n=q()(q()({},t),{},{value:r?"".concat(r,".").concat(t.value):t.value});if(!e||"wildcard"===n.type&&!r)return n;var i=it(n,e).reduce((function(t,e){var n=lt(e),i=null==n?void 0:n.nested.path;return r&&!i?[].concat(G()(t),["".concat(e.name,' is not a nested field but is in nested group "').concat(r,'" in the KQL expression.')]):i&&!r?[].concat(G()(t),["".concat(e.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==r?[].concat(G()(t),["Nested field ".concat(e.name," is being queried with the incorrect nested path. The correct path is ").concat(null==n?void 0:n.nested.path,".")]):t}),[]);if(i.length>0)throw new Error(i.join("\n"));return n}function ct(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(v.isUndefined)(t))throw new Error("fieldName is a required argument");if(Object(v.isUndefined)(e))throw new Error("value is a required argument");var n="string"==typeof t?Nt(t):H(t),i="string"==typeof e?Nt(e):H(e),s=H(r);return{arguments:[n,i,s]}}function dt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=D()(t.arguments,3),s=i[0],a=i[1],o=i[2],l="wildcard"===a.type&&a.value===Z,u="wildcard"===s.type&&s.value===Z,c=l&&u;if(c)return{match_all:{}};var d=ut(s,e,null!=n&&n.nested?n.nested.path:void 0),h=Object(v.isUndefined)(a)?a:Pt(a),f=o.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===a.type?{query_string:{query:rt(a)}}:{multi_match:{type:f,query:h,lenient:!0}};var g=e?it(d,e):[];if(g&&0===g.length&&g.push({name:Pt(d),scripted:!1,type:""}),l&&(null==g||!g.length||(null==g?void 0:g.length)===(null==e?void 0:e.fields.length)))return{match_all:{}};var m=g.reduce((function(t,e){var i=function(t){var r=lt(e);return"wildcard"!==d.type||null==r||!r.nested||null!=n&&n.nested?t:{nested:{path:r.nested.path,query:t,score_mode:"none"}}};if(!e.scripted){if(l)return[].concat(G()(t),[i({exists:{field:e.name}})]);if("wildcard"===a.type)return[].concat(G()(t),[i({query_string:{fields:[e.name],query:rt(a)}})]);if("date"===e.type){var s=r.dateFormatTZ?{time_zone:ot(r.dateFormatTZ)}:{};return[].concat(G()(t),[i({range:p()({},e.name,q()({gte:h,lte:h},s))})])}var o="phrase"===f?"match_phrase":"match";return[].concat(G()(t),[i(p()({},o,p()({},e.name,h)))])}if(!l)return[].concat(G()(t),[{script:q()({},V(e,h))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function ht(t){return{arguments:t}}function ft(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.filtersInMustClause,s=t.arguments||[],a=i?"must":"filter";return{bool:p()({},a,s.map((function(t){return Pt(t,e,r,n)})))}}function pt(t){return{arguments:t}}function gt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t.arguments||[];return{bool:{should:i.map((function(t){return Pt(t,e,r,n)})),minimum_should_match:1}}}function mt(t){return{arguments:[t]}}function vt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=D()(t.arguments,1),s=i[0];return{bool:{must_not:Pt(s,e,r,n)}}}function bt(t,e,r){return{arguments:[Nt(t),e,St.literal.buildNode(r)]}}function yt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=D()(t.arguments,3),s=i[0],a=i[1],o=i[2],l=ut(s,e,null!=n&&n.nested?n.nested.path:void 0),u=e?it(l,e):[];u&&0===u.length&&u.push({name:Pt(l),scripted:!1,type:""});var c=u.map((function(t){var e=function(e){var r=lt(t);return"wildcard"!==l.type||null==r||!r.nested||n.nested?e:{nested:{path:r.nested.path,query:e,score_mode:"none"}}},i=p()({},a,Pt(o));if(t.scripted)return{script:$(t,i)};if("date"===t.type){var s=r.dateFormatTZ?{time_zone:ot(r.dateFormatTZ)}:{};return e({range:p()({},t.name,q()(q()({},i),s))})}return e({range:p()({},t.name,i)})}));return{bool:{should:c,minimum_should_match:1}}}function xt(t){return{arguments:[H(t)]}}function Ct(t,e){var r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=D()(t.arguments,1),s=i[0],a=q()(q()({},s),{},{value:null!=n&&n.nested?"".concat(n.nested.path,".").concat(s.value):s.value}),o=K(a),l=null==e||null===(r=e.fields)||void 0===r?void 0:r.find((function(t){return t.name===o}));if(null!=l&&l.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:o}}}function wt(t,e){return{arguments:["string"==typeof t?Nt(t):H(t),e]}}function _t(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=D()(t.arguments,2),a=s[0],o=s[1],l=Pt(a),u=null!=i&&null!==(r=i.nested)&&void 0!==r&&r.path?"".concat(i.nested.path,".").concat(l):l;return{nested:{path:u,query:Pt(o,e,n,q()(q()({},i),{},{nested:{path:u}})),score_mode:"none"}}}var jt={is:s,and:a,or:o,not:l,range:u,exists:c,nested:d};function Ft(t){var e=jt[t];if(b.a.isUndefined(e))throw new Error('Unknown function "'.concat(t,'"'));for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return q()({type:"function",function:t},e.buildNodeParams.apply(e,n))}function At(t,e){if(b.a.isUndefined(jt[t]))throw new Error('Unknown function "'.concat(t,'"'));return{type:"function",function:t,arguments:e}}function Ot(t,e,r,n){return jt[t.function].toElasticsearchQuery(t,e,r,n)}var St={function:h,literal:n,wildcard:i},Mt=(r(31),r(32),r(33),r(34),r(35),r(36),j.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),j.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),j.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),j.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),j.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"}),Error,r(25)),Et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.parse;if(void 0===t)throw new Error("expression must be a string, got undefined instead");return r(t,q()(q()({},e),{},{helpers:{nodeTypes:St}}))},Nt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Et(t,q()(q()({},e),{},{startRule:"Literal"}),Mt.parse)},Pt=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!e||!e.type||!St[e.type])return t(St.function.buildNode("and",[]),r);var s=St[e.type];return s.toElasticsearchQuery(e,r,n,i)};Object(v.flow)((function(t){return t.replace(/[\\():<>"*]/g,"\\$&")}),(function(t){return t.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(t){return t.replace(/not(\s+)/gi,"\\$&")}),(function(t){return t.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));class filter_manager_FilterManager{constructor(t,e,r,n,i){p()(this,"indexPattern",void 0),this.controlId=t,this.fieldName=e,this.indexPatternId=r,this.indexPatternsService=n,this.queryFilter=i}async init(){try{this.indexPattern||(this.indexPattern=await this.indexPatternsService.get(this.indexPatternId))}catch(t){}}getIndexPattern(){return this.indexPattern}getField(){var t;return null===(t=this.indexPattern)||void 0===t?void 0:t.fields.getByName(this.fieldName)}findFilters(){return b.a.flatten([this.queryFilter.getAppFilters(),this.queryFilter.getGlobalFilters()]).filter((t=>b.a.get(t,"meta.controlledBy")===this.controlId))}}class range_filter_manager_RangeFilterManager extends filter_manager_FilterManager{createFilter(t){const e=this.getIndexPattern(),r=function(t,e,r,n){if("gte"in(e=Object(v.mapValues)(e,(function(e){return"number"===t.type?parseFloat(e):e})))&&"gt"in e)throw new Error("gte and gt are mutually exclusive");if("lte"in e&&"lt"in e)throw new Error("lte and lt are mutually exclusive");var i=["gt","lt"].reduce((function(t,r){var n=r in e?r:"".concat(r,"e");return Math.abs(Object(v.get)(e,n))===1/0&&(t++,delete e[n]),t}),0),s=q()({index:r.id,params:{},field:t.name},n?{formattedValue:n}:{});if(2===i)return{meta:s,query:{match_all:{}}};if(t.scripted){var a=$(t,e);return a.script.params.value=function(t){return Object(v.map)(t,(function(t,e){return Object(v.get)(B,e)+t})).join(" ")}(a.script.params),{meta:s,query:{script:a}}}return{meta:s,query:{range:p()({},t.name,e)}}}(e.fields.getByName(this.fieldName),{gte:(n=t).min,lte:n.max},e);var n;return r.meta.key=this.fieldName,r.meta.controlledBy=this.controlId,r}getValueFromFilterBar(){const t=this.findFilters();if(0===t.length)return;let e;return e=b.a.has(t[0],"query.script")?b.a.get(t[0],"query.script.script.params"):b.a.get(t[0],["query","range",this.fieldName]),e?function(t){const e={};return b.a.has(t,"gte")&&(e.min=b.a.get(t,"gte")),b.a.has(t,"gt")&&(e.min=b.a.get(t,"gt")),b.a.has(t,"lte")&&(e.max=b.a.get(t,"lte")),b.a.has(t,"lt")&&(e.max=b.a.get(t,"lt")),e}(e):void 0}}async function Tt({create:t},e,r,n,i,s=[],a){const o=await t(e||{});return o.setParent(void 0),o.setField("filter",(()=>{const t=[...s];if(i){const e=a.createFilter(r);e&&t.push(e)}return t})),o.setField("size",0),o.setField("index",r),o.setField("aggs",n),o}class range_control_factory_RangeControl extends control_Control{constructor(t,e,r,n,i){super(t,e,r),p()(this,"searchSource",void 0),p()(this,"timefilter",void 0),p()(this,"abortController",void 0),p()(this,"min",void 0),p()(this,"max",void 0),this.timefilter=i.data.query.timefilter.timefilter,this.searchSource=n}async fetch(){this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const t=this.filterManager.getIndexPattern();if(!t)return void this.disable(N(this.controlParams.indexPattern));const e=this.filterManager.fieldName,r=(t=>{const e={};return t&&(t.scripted?e.script={source:t.script,lang:t.lang}:e.field=t.name),{maxAgg:{max:e},minAgg:{min:e}}})(t.fields.getByName(e)),n=await Tt(this.searchSource,null,t,r,this.useTimeFilter,[],this.timefilter),i=this.abortController.signal;let s;try{s=await n.fetch({abortSignal:i})}catch(t){if("AbortError"===t.name)return;return void this.disable(j.i18n.translate("inputControl.rangeControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch range min and max, error: {errorMessage}",values:{errorMessage:t.message}}))}const a=b.a.get(s,"aggregations.minAgg.value",null),o=b.a.get(s,"aggregations.maxAgg.value",null);null!==a&&null!==o?(this.min=a,this.max=o,this.enable=!0):this.disable(E(e,t.title))}destroy(){this.abortController&&this.abortController.abort()}}async function It(t,e,r){const[,{data:n}]=await r.core.getStartServices(),i=new range_control_factory_RangeControl(t,new range_filter_manager_RangeFilterManager(t.id,t.fieldName,t.indexPattern,n.indexPatterns,r.data.query.filterManager),e,n.search.searchSource,r);return await i.filterManager.init(),i}class phrase_filter_manager_PhraseFilterManager extends filter_manager_FilterManager{constructor(t,e,r,n,i){super(t,e,r,n,i)}createFilter(t){const e=this.getIndexPattern();let r;const n=e.fields.getByName(this.fieldName);if(!n)throw new Error(`Unable to find field with name: ${this.fieldName} on indexPattern`);return r=1===t.length?function(t,e,r){var n=k(t,e);return t.scripted?{meta:{index:r.id,field:t.name},query:{script:V(t,e)}}:{meta:{index:r.id},query:{match_phrase:p()({},t.name,n)}}}(n,t[0],e):function(t,e,r){var n,i=r.id,s=P.PHRASES,a=t.name;return n=t.scripted?e.map((function(e){return{script:V(t,e)}})):e.map((function(e){return{match_phrase:p()({},t.name,e)}})),{meta:{index:i,type:s,key:a,params:e},query:{bool:{should:n,minimum_should_match:1}}}}(n,t,e),r.meta.key=this.fieldName,r.meta.controlledBy=this.controlId,r}getValueFromFilterBar(){const t=this.findFilters();if(0===t.length)return;const e=t.map((t=>this.getValueFromFilter(t))).filter((t=>null!=t));return 0!==e.length?e.reduce(((t,e)=>t.concat(e)),[]):void 0}getValueFromFilter(t){if(b.a.has(t,"query.bool.should"))return b.a.get(t,"query.bool.should").map((t=>this.getValueFromFilter(t))).filter((t=>!!t));if(b.a.has(t,"query.script"))return b.a.get(t,"query.script.script.params.value");if(R(t)){if(i=null!==(r=null!==(n=(e=t).query.match_phrase)&&void 0!==n?n:e.query.match)&&void 0!==r?r:{},Object.keys(i)[0]!==this.fieldName)return;return function(t){if(R(t)){var e=t.query.match_phrase||t.query.match||{},r=Object.values(e)[0];return Object(v.isPlainObject)(r)?r.query:r}var n,i,s,a;return null===(n=t.query)||void 0===n||null===(i=n.script)||void 0===i||null===(s=i.script)||void 0===s||null===(a=s.params)||void 0===a?void 0:a.value}(t)}var e,r,n,i;return b.a.has(t,["match_phrase",this.fieldName])?b.a.get(t,["match_phrase",this.fieldName]):void 0}}class list_control_factory_ListControl extends control_Control{constructor(t,e,r,n,i){super(t,e,r),p()(this,"getSettings",void 0),p()(this,"timefilter",void 0),p()(this,"searchSource",void 0),p()(this,"abortController",void 0),p()(this,"lastAncestorValues",void 0),p()(this,"lastQuery",void 0),p()(this,"partialResults",void 0),p()(this,"selectOptions",void 0),p()(this,"fetch",(async t=>{this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const e=this.filterManager.getIndexPattern();if(!e)return void this.disable(N(this.controlParams.indexPattern));let r;if(this.hasAncestors()){if(this.hasUnsetAncestor())return this.disable(j.i18n.translate("inputControl.listControl.disableTooltip",{defaultMessage:"Disabled until '{label}' is set.",values:{label:this.ancestors[0].label}})),void(this.lastAncestorValues=void 0);const e=this.getAncestorValues();if(b.a.isEqual(e,this.lastAncestorValues)&&b.a.isEqual(t,this.lastQuery))return;this.lastAncestorValues=e,this.lastQuery=t,r=this.getAncestorFilters()}const n=this.filterManager.fieldName,i=await this.getSettings(),s={timeout:`${i.autocompleteTimeout}ms`,terminate_after:Number(i.autocompleteTerminateAfter)},a=null==e?void 0:e.fields.getAll().find((({name:t})=>t===this.controlParams.fieldName));a&&"string"!==a.type&&(this.options.dynamicOptions=!1);const o=(({field:t,size:e,direction:r,query:n})=>{const i={order:{_count:r}};return e&&(i.size=e<1?1:e),null!=t&&t.scripted?(i.script={source:t.script,lang:t.lang},i.value_type="number"===t.type?"float":t.type):i.field=null==t?void 0:t.name,n&&(i.include=`.*${function(t=""){return t.replace(/[.?+*|{}[\]()"\\#@&<>~]/g,(t=>`\\${t}`))}(n)}.*`),{termsAgg:{terms:i}}})({field:e.fields.getByName(n),size:this.options.dynamicOptions?null:b.a.get(this.options,"size",5),direction:"desc",query:t}),l=await Tt(this.searchSource,s,e,o,this.useTimeFilter,r,this.timefilter),u=this.abortController.signal;let c;this.lastQuery=t;try{c=await l.fetch({abortSignal:u})}catch(t){if("AbortError"===t.name)return;return void this.disable(j.i18n.translate("inputControl.listControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch terms, error: {errorMessage}",values:{errorMessage:t.message}}))}if(t&&this.lastQuery!==t)return;const d=b.a.get(c,"aggregations.termsAgg.buckets",[]).map((t=>null==t?void 0:t.key));0!==d.length||t?(this.partialResults=c.terminated_early||c.timed_out,this.selectOptions=d,this.enable=!0,this.disabledReason=""):this.disable(E(n,e.title))})),this.getSettings=i.getSettings,this.timefilter=i.data.query.timefilter.timefilter,this.searchSource=n}destroy(){this.abortController&&this.abortController.abort()}hasValue(){return void 0!==this.value&&this.value.length>0}}async function qt(t,e,r){const[,{data:n}]=await r.core.getStartServices(),i=new list_control_factory_ListControl(t,new phrase_filter_manager_PhraseFilterManager(t.id,t.fieldName,t.indexPattern,n.indexPatterns,r.data.query.filterManager),e,n.search.searchSource,r);return await i.filterManager.init(),i}var kt=r(23);const Rt=(t,e,r)=>{let n,i=!1;return new class InputControlVisController{constructor(){p()(this,"controls",void 0),p()(this,"queryBarUpdateHandler",void 0),p()(this,"filterManager",void 0),p()(this,"updateSubsciption",void 0),p()(this,"timeFilterSubscription",void 0),p()(this,"visParams",void 0),p()(this,"drawVis",(()=>{var t;if(!n)throw new Error("no i18n context found");Object(y.render)(Object(F.jsx)(n,null,Object(F.jsx)(x.VisualizationContainer,{handlers:e},Object(F.jsx)(input_control_vis_InputControlVis,{updateFiltersOnChange:null===(t=this.visParams)||void 0===t?void 0:t.updateFiltersOnChange,controls:this.controls,stageFilter:this.stageFilter,submitFilters:this.submitFilters,resetControls:this.updateControlsFromKbn,clearControls:this.clearControls,hasChanges:this.hasChanges,hasValues:this.hasValues,refreshControl:this.refreshControl}))),r)})),p()(this,"stageFilter",(async(t,e)=>{var r;this.controls[t].set(e),null!==(r=this.visParams)&&void 0!==r&&r.updateFiltersOnChange?this.submitFilters():(await this.updateNestedControls(),this.drawVis())})),p()(this,"submitFilters",(()=>{var t;const e=this.controls.filter((t=>t.hasChanged())),r=e.map((t=>t.getKbnFilter())).filter((t=>null!==t));e.forEach((t=>{t.filterManager.findFilters().forEach((t=>{this.filterManager.removeFilter(t)}))})),this.controls.map((t=>{t.hasAncestors()&&t.hasUnsetAncestor()&&t.filterManager.findFilters().forEach((t=>{this.filterManager.removeFilter(t)}))})),this.filterManager.addFilters(r,null===(t=this.visParams)||void 0===t?void 0:t.pinFilters)})),p()(this,"clearControls",(async()=>{this.controls.forEach((t=>{t.clear()})),await this.updateNestedControls(),this.drawVis()})),p()(this,"updateControlsFromKbn",(async()=>{this.controls.forEach((t=>{t.reset()})),await this.updateNestedControls(),this.drawVis()})),p()(this,"hasChanges",(()=>this.controls.map((t=>t.hasChanged())).some((t=>t)))),p()(this,"hasValues",(()=>this.controls.map((t=>t.hasValue())).reduce(((t,e)=>t||e)))),p()(this,"refreshControl",(async(t,e)=>{await this.controls[t].fetch(e),this.drawVis()})),this.controls=[],this.queryBarUpdateHandler=this.updateControlsFromKbn.bind(this),this.filterManager=t.data.query.filterManager,this.updateSubsciption=this.filterManager.getUpdates$().subscribe(this.queryBarUpdateHandler),this.timeFilterSubscription=t.data.query.timefilter.timefilter.getTimeUpdate$().subscribe((()=>{var t;null!==(t=this.visParams)&&void 0!==t&&t.useTimeFilter&&(i=!1)}))}async render(e){if(!n){const[{i18n:e}]=await t.core.getStartServices();n=e.Context}i&&Object(v.isEqual)(e,this.visParams)||(this.visParams=e,this.controls=[],this.controls=await this.initControls(e),i=!0),this.drawVis()}destroy(){this.updateSubsciption.unsubscribe(),this.timeFilterSubscription.unsubscribe(),Object(y.unmountComponentAtNode)(r),this.controls.forEach((t=>t.destroy()))}async initControls(e){const r=e.controls.filter((t=>t.indexPattern&&t.fieldName)),n=r.map((r=>{const n=function(t){let e=null;switch(t.type){case _.a.RANGE:e=It;break;case _.a.LIST:e=qt;break;default:throw new Error(`Unhandled control type ${t.type}`)}return e}(r);return n(r,e.useTimeFilter,t)})),i=await Promise.all(n),s=t=>i.find((({id:e})=>e===t)),a=[];return Object(kt.a)(r).forEach(((t,e)=>{t.shift();const r=[];t.forEach((t=>{const e=s(t);e&&r.push(e)}));const n=s(e);n&&(n.setAncestors(r),a.push(n.fetch()))})),await Promise.all(a),i}async updateNestedControls(){const t=this.controls.map((async t=>{t.hasAncestors()&&await t.fetch()}));return await Promise.all(t)}}}}]]);