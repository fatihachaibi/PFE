(window.advancedSettings_bundle_jsonpfunction=window.advancedSettings_bundle_jsonpfunction||[]).push([[0],{17:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"c",(function(){return u})),t.d(a,"b",(function(){return Search}));var n=t(0),s=t.n(n),i=t(2),r=t(3),l=t(4),d=t(18),o=t(1);const c="category",u=r.i18n.translate("advancedSettings.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});class Search extends i.PureComponent{constructor(e){super(e),s()(this,"categories",[]),s()(this,"state",{isSearchTextValid:!0,parseErrorMessage:null}),s()(this,"onChange",(({query:e,error:a})=>{a?this.setState({isSearchTextValid:!1,parseErrorMessage:a.message}):(this.setState({isSearchTextValid:!0,parseErrorMessage:null}),this.props.onQueryChange({query:e}))}));const{categories:a}=e;this.categories=a.map((e=>({value:e,name:Object(d.d)(e)})))}render(){const{query:e}=this.props,a={incremental:!0,"data-test-subj":"settingsSearchBar","aria-label":r.i18n.translate("advancedSettings.searchBarAriaLabel",{defaultMessage:"Search advanced settings"})},t=[{type:"field_value_selection",field:c,name:r.i18n.translate("advancedSettings.categorySearchLabel",{defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];let n;return this.state.isSearchTextValid||(n=Object(o.jsx)(l.EuiFormErrorText,null,`${u}. ${this.state.parseErrorMessage}`)),Object(o.jsx)(i.Fragment,null,Object(o.jsx)(l.EuiSearchBar,{box:a,filters:t,onChange:this.onChange,query:e}),n)}}},18:function(e,a,t){"use strict";function n(e){return e.isCustom||void 0===e.value||String(e.value)===String(e.defVal)}function s(e,a){if(e.type)return e.type;if(Array.isArray(a)||Array.isArray(e.value))return"array";const t=null!=e.value?typeof e.value:typeof a;if("bigint"===t)return"number";if("symbol"===t||"object"===t||"function"===t)throw new Error(`incompatible UiSettingsType: '${e.name}' type ${t} | ${JSON.stringify(e)}`);return t}t.d(a,"e",(function(){return n})),t.d(a,"f",(function(){return u})),t.d(a,"d",(function(){return v})),t.d(a,"a",(function(){return c})),t.d(a,"c",(function(){return o})),t.d(a,"b",(function(){return b}));var i=t(11),r=t(4),l=t(17);const d=e=>Object(i.words)(null!=e?e:"").map((e=>e.toLowerCase())).join(" ");function o(e){if(!e)return"";const a=r.Query.parse(e);if(a.hasOrFieldClause(l.a)){const e=a.getOrFieldClause(l.a),t=d(a.removeOrFieldClauses(l.a).text);if(!e||!Array.isArray(e.value))return t;let n=r.Query.parse("");return e.value.forEach((e=>{n=n.addOrFieldValue(l.a,e)})),`${t} ${n.text}`}return d(e)}const c="general";function u({def:e,name:a,value:t,isCustom:n,isOverridden:i}){return e||(e={}),{name:a,displayName:e.name||a,ariaName:e.name||o(a),value:t,category:e.category&&e.category.length?e.category:[c],isCustom:n,isOverridden:i,readOnly:!!e.readonly,defVal:e.value,type:s(e,t),description:e.description,deprecation:e.deprecation,options:e.options,optionLabels:e.optionLabels,order:e.order,requiresPageReload:!!e.requiresPageReload,metric:e.metric}}var g=t(3);const h={general:g.i18n.translate("advancedSettings.categoryNames.generalLabel",{defaultMessage:"General"}),machineLearning:g.i18n.translate("advancedSettings.categoryNames.machineLearningLabel",{defaultMessage:"Machine Learning"}),observability:g.i18n.translate("advancedSettings.categoryNames.observabilityLabel",{defaultMessage:"Observability"}),timelion:g.i18n.translate("advancedSettings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),notifications:g.i18n.translate("advancedSettings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:g.i18n.translate("advancedSettings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:g.i18n.translate("advancedSettings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:g.i18n.translate("advancedSettings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:g.i18n.translate("advancedSettings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:g.i18n.translate("advancedSettings.categoryNames.searchLabel",{defaultMessage:"Search"}),securitySolution:g.i18n.translate("advancedSettings.categoryNames.securitySolutionLabel",{defaultMessage:"Security Solution"})};function v(e){return e?h[e]||((e="")=>e.replace(/^./,(e=>e.toUpperCase())))(e):""}const m=r.Comparators.default("asc"),b=(e,a)=>{const t=void 0!==e.order,n=void 0!==a.order;return t&&n?e.order===a.order?m(e.name,a.name):m(e.order,a.order):t?-1:n?1:m(e.name,a.name)}},19:function(e,a,t){e.exports=t(6)(3)},31:function(e,a,t){"use strict";t.r(a),t.d(a,"Field",(function(){return field_Field})),t.d(a,"getEditableValue",(function(){return j})),t.d(a,"default",(function(){return field_Field}));var n=t(19),s=t.n(n),i=t(0),r=t.n(i),l=t(2),d=t.n(l),o=t(13),c=t.n(o),u=t(4),g=t(3),h=t(5),v=t(14),m=t(10),b=t(1);const f=({value:e,onChange:a,type:t,isReadOnly:n,a11yProps:i,name:r})=>{const d=Object(l.useCallback)((e=>{var a;const t=e.getDomNode();if(!t)return;const n=e.getOption(v.monaco.editor.EditorOption.lineHeight);let s=(null===(a=e.getModel())||void 0===a?void 0:a.getLineCount())||6;s<6?s=6:s>30&&(s=30);const i=n*s;t.id=r,t.style.height=`${i}px`,e.layout()}),[r]),o=Object(l.useCallback)((e=>{const a=e.getModel();if(!a)return;const t=a.getValue().trim();a.setValue(t)}),[]),c=Object(l.useCallback)((e=>{d(e),e.onDidChangeModelContent((()=>{d(e)})),e.onDidBlurEditorWidget((()=>{o(e)}))}),[d,o]);return Object(b.jsx)(m.CodeEditor,s()({},i,{languageId:"json"===t?v.XJsonLang.ID:m.MarkdownLang,value:e,onChange:a,editorDidMount:c,width:"100%",options:{readOnly:n,lineNumbers:"off",scrollBeyondLastLine:!1,automaticLayout:!0,folding:!1,tabSize:2,scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",wrappingIndent:"indent"}}))};var p=t(18);const j=(e,a,t)=>{const n=null==a?t:a;switch(e){case"array":return n.join(", ");case"boolean":return!!n;case"number":return Number(n);case"image":return n;default:return n||""}};class field_Field extends l.PureComponent{constructor(...e){super(...e),r()(this,"changeImageForm",d.a.createRef()),r()(this,"handleChange",(e=>{this.props.handleChange(this.props.setting.name,e)})),r()(this,"resetField",(()=>{const{type:e,defVal:a}=this.props.setting;return"image"===e?(this.cancelChangeImage(),this.handleChange({value:j(e,a,a),changeImage:!0})):this.handleChange({value:j(e,a)})})),r()(this,"onCodeEditorChange",(e=>{const{defVal:a,type:t}=this.props.setting;let n,s={};if("json"===t){const t=Array.isArray(JSON.parse(a||"{}"));n=e||(t?"[]":"{}");try{JSON.parse(n)}catch(e){s={error:g.i18n.translate("advancedSettings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"}),isInvalid:!0}}}else n=e;this.handleChange({value:n,...s})})),r()(this,"onFieldChangeSwitch",(e=>this.onFieldChange(e.target.checked))),r()(this,"onFieldChangeEvent",(e=>this.onFieldChange(e.target.value))),r()(this,"onFieldChange",(e=>{const{type:a,value:t,defVal:n}=this.props.setting;let s;switch(a){case"boolean":const{unsavedChanges:i}=this.props;s=!(i?i.value:j(a,t,n));break;case"number":s=Number(e);break;default:s=e}this.handleChange({value:s})})),r()(this,"onImageChange",(async e=>{if(null==e)return;if(!e.length)return void this.setState({unsavedValue:null});const a=e[0];try{let e="";a instanceof File&&(e=await this.getImageAsBase64(a)),this.handleChange({changeImage:!0,value:e})}catch(e){this.props.toasts.addDanger(g.i18n.translate("advancedSettings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"})),this.cancelChangeImage()}})),r()(this,"changeImage",(()=>{this.handleChange({value:null,changeImage:!0})})),r()(this,"cancelChangeImage",(()=>{var e;null!==(e=this.changeImageForm.current)&&void 0!==e&&e.fileInput&&(this.changeImageForm.current.fileInput.value="",this.changeImageForm.current.handleChange()),this.props.clearChange&&this.props.clearChange(this.props.setting.name)}))}getDisplayedDefaultValue(e,a,t={}){if(null==a||""===a)return"null";switch(e){case"array":return a.join(", ");case"select":return t.hasOwnProperty(String(a))?t[String(a)]:String(a);default:return String(a)}}componentDidUpdate(e){var a,t;"image"!==e.setting.type||null===(a=e.unsavedChanges)||void 0===a||!a.value||null!==(t=this.props.unsavedChanges)&&void 0!==t&&t.value||this.cancelChangeImage()}async getImageAsBase64(e){const a=new FileReader;return a.readAsDataURL(e),new Promise(((e,t)=>{a.onload=()=>{e(a.result)},a.onerror=e=>{t(e)}}))}renderField(e,a){const{enableSaving:t,unsavedChanges:n,loading:i}=this.props,{name:r,value:l,type:d,options:o,optionLabels:c={},isOverridden:g,defVal:v,ariaName:m}=e,y=a?{"aria-label":m,"aria-describedby":a}:{"aria-label":m},S=n?n.value:j(d,l,v);switch(d){case"boolean":return Object(b.jsx)(u.EuiSwitch,s()({label:S?Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.onLabel",defaultMessage:"On"}):Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.offLabel",defaultMessage:"Off"}),checked:!!S,onChange:this.onFieldChangeSwitch,disabled:i||g||!t,"data-test-subj":`advancedSetting-editField-${r}`},y));case"markdown":case"json":return Object(b.jsx)("div",{"data-test-subj":`advancedSetting-editField-${r}`},Object(b.jsx)(f,{value:S,onChange:this.onCodeEditorChange,type:d,isReadOnly:g||!t,a11yProps:y,name:`advancedSetting-editField-${r}-editor`}));case"image":const a=null==n?void 0:n.changeImage;return Object(p.e)(e)||a?Object(b.jsx)(u.EuiFilePicker,{disabled:i||g||!t,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:this.changeImageForm,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`,"aria-label":r}):Object(b.jsx)(u.EuiImage,s()({},y,{allowFullScreen:!0,url:l,alt:r}));case"select":return Object(b.jsx)(u.EuiSelect,s()({},y,{value:S,options:o.map((e=>({text:c.hasOwnProperty(e)?c[e]:e,value:e}))),onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!t,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"number":return Object(b.jsx)(u.EuiFieldNumber,s()({},y,{value:S,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!t,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"color":return Object(b.jsx)(u.EuiColorPicker,s()({},y,{color:S,onChange:this.onFieldChange,disabled:i||g||!t,format:"hex","data-test-subj":`advancedSetting-editField-${r}`}));default:return Object(b.jsx)(u.EuiFieldText,s()({},y,{value:S,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!t,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}))}}renderLabel(e){return e.name}renderHelpText(e){if(e.isOverridden)return Object(b.jsx)(u.EuiText,{size:"xs"},Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}));const a=this.props.enableSaving,t=this.renderResetToDefaultLink(e),n=this.renderChangeImageLink(e);return a&&(t||n)?Object(b.jsx)("span",null,t,n):null}renderTitle(e){const{unsavedChanges:a}=this.props,t=null==a?void 0:a.isInvalid,n=a?t?g.i18n.translate("advancedSettings.field.invalidIconLabel",{defaultMessage:"Invalid"}):g.i18n.translate("advancedSettings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}):void 0;return Object(b.jsx)("h3",null,Object(b.jsx)("span",{className:"mgtAdvancedSettings__fieldTitle"},e.displayName||e.name),e.isCustom?Object(b.jsx)(u.EuiIconTip,{type:"asterisk",color:"primary","aria-label":g.i18n.translate("advancedSettings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"",a?Object(b.jsx)(u.EuiIconTip,{anchorClassName:"mgtAdvancedSettings__fieldTitleUnsavedIcon",type:t?"alert":"dot",color:t?"danger":"warning","aria-label":n,content:n}):"")}renderDescription(e){let a,t;if(e.deprecation){const a=this.props.docLinks;t=Object(b.jsx)(d.a.Fragment,null,Object(b.jsx)(u.EuiToolTip,{content:e.deprecation.message},Object(b.jsx)(u.EuiBadge,{color:"warning",onClick:()=>{window.open(a.management[e.deprecation.docLinksKey],"_blank")},onClickAriaLabel:g.i18n.translate("advancedSettings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:e.name}})},"Deprecated")),Object(b.jsx)(u.EuiSpacer,{size:"s"}))}return a=d.a.isValidElement(e.description)?e.description:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description||""}}),Object(b.jsx)(l.Fragment,null,t,a,this.renderDefaultValue(e))}renderDefaultValue(e){const{type:a,defVal:t,optionLabels:n}=e;if(!Object(p.e)(e))return Object(b.jsx)(l.Fragment,null,Object(b.jsx)(u.EuiSpacer,{size:"s"}),Object(b.jsx)(u.EuiText,{size:"xs"},"json"===a?Object(b.jsx)(l.Fragment,null,Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:Object(b.jsx)(u.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:t.length>=500?300:void 0},this.getDisplayedDefaultValue(a,t))}})):Object(b.jsx)(l.Fragment,null,Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:Object(b.jsx)(u.EuiCode,null,this.getDisplayedDefaultValue(a,t,n))}}))))}renderResetToDefaultLink(e){var a;const{defVal:t,ariaName:n,name:s}=e;if(t!==(null===(a=this.props.unsavedChanges)||void 0===a?void 0:a.value)&&!Object(p.e)(e)&&!this.props.loading)return Object(b.jsx)("span",null,Object(b.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:n}}),onClick:this.resetField,"data-test-subj":`advancedSetting-resetField-${s}`},Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}renderChangeImageLink(e){var a;const t=null===(a=this.props.unsavedChanges)||void 0===a?void 0:a.changeImage,{type:n,value:s,ariaName:i,name:r}=e;if("image"===n&&s&&!t)return Object(b.jsx)("span",null,Object(b.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:i}}),onClick:this.changeImage,"data-test-subj":`advancedSetting-changeImage-${r}`},Object(b.jsx)(h.FormattedMessage,{id:"advancedSettings.field.changeImageLinkText",defaultMessage:"Change image"})))}render(){const{setting:e,unsavedChanges:a}=this.props,t=null==a?void 0:a.error,n=null==a?void 0:a.isInvalid,s=c()("mgtAdvancedSettings__field",{"mgtAdvancedSettings__field--unsaved":a,"mgtAdvancedSettings__field--invalid":n}),i=`${e.name}-group`,r=`${e.name}-unsaved`;return Object(b.jsx)(u.EuiDescribedFormGroup,{id:i,className:s,title:this.renderTitle(e),description:this.renderDescription(e),fullWidth:!0},Object(b.jsx)(u.EuiFormRow,{isInvalid:n,error:t,label:this.renderLabel(e),helpText:this.renderHelpText(e),className:"mgtAdvancedSettings__fieldRow",hasChildLabel:"boolean"!==e.type,fullWidth:!0},Object(b.jsx)(d.a.Fragment,null,this.renderField(e,a?`${i} ${r}`:void 0),a&&Object(b.jsx)(u.EuiScreenReaderOnly,null,Object(b.jsx)("p",{id:`${r}`},a.error?a.error:g.i18n.translate("advancedSettings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."}))))))}}}}]);