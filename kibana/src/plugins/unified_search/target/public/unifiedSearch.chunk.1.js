(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[1],{36:function(e,t,i){"use strict";i.r(t),i.d(t,"FILTER_EDITOR_WIDTH",(function(){return I})),i.d(t,"FilterItem",(function(){return O}));var r=i(9),s=i.n(r),a=(i(89),i(3)),n=i(44),l=i(35),o=i.n(l),d=i(1),u=i(10),c=i(64),p=i(5),h=i(17),f=i(0);const g=({filter:e,iconOnClick:t,onClick:i,valueLabel:r,fieldLabel:l,errorMessage:o,filterLabelStatus:d,hideAlias:u,...c})=>{const[g,E]=Object(a.useInnerText)();let b=o||p.i18n.translate("unifiedSearch.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:E}});Object(n.isFilterPinned)(e)&&(b=`${p.i18n.translate("unifiedSearch.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})} ${b}`),e.meta.disabled&&(b=`${p.i18n.translate("unifiedSearch.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})} ${b}`);const m={title:b,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:t,iconOnClickAriaLabel:p.i18n.translate("unifiedSearch.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete {filter}",values:{filter:E}}),onClick:i,onClickAriaLabel:p.i18n.translate("unifiedSearch.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})};return Object(f.jsx)(a.EuiBadge,s()({},m,c),Object(f.jsx)("span",{ref:g},Object(f.jsx)(h.d,{filter:e,valueLabel:r,fieldLabel:l,filterLabelStatus:d,hideAlias:u})))};var E=i(11);const b="warn",m="error",I=800;function O(e){const[t,i]=Object(d.useState)(!1),[r,l]=Object(d.useState)(void 0),[p,h]=Object(d.useState)("menu"),{id:O,filter:S,indexPatterns:F,hiddenPanelOptions:N}=e;function L(){const t=Object(n.toggleFilterDisabled)(S);e.onUpdate(t)}function T(e){const{disabled:t}=S.meta;return t||e.status===m}if(Object(d.useEffect)((()=>{t&&h("menu")}),[t]),Object(d.useEffect)((()=>{const t=e.filter.meta.index;let i=!0;return t?Object(E.b)().get(t).then((e=>{i&&l(!!e)})).catch((()=>{i&&l(!1)})):i&&l(!0),()=>{i=!1}}),[e.filter.meta.index]),void 0===r)return null;const R=function(){var t;const i={title:"",message:"",status:""};if(null!==(t=S.meta)&&void 0!==t&&t.isMultiIndex)return i;if(!1===r)i.status=m,i.title=e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.labelErrorText",defaultMessage:"Error"}),i.message=e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.labelErrorInfo",defaultMessage:"Index pattern {indexPattern} not found"},{indexPattern:S.meta.index});else if(!e.indexPatterns.length||Object(u.getIndexPatternFromFilter)(S,F)||F.map((e=>e.fields.map((e=>e.name)))).reduce(((e,t)=>[...e,...t]),[]).includes((null===(s=S.meta)||void 0===s?void 0:s.key)||""))try{i.title=Object(u.getDisplayValueFromFilter)(S,F)}catch(t){i.status=m,i.title=e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.labelErrorText",defaultMessage:"Error"}),i.message=t.message}else i.status=b,i.title=e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.labelWarningText",defaultMessage:"Warning"}),i.message=e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.labelWarningInfo",defaultMessage:"Field {fieldName} does not exist in current view"},{fieldName:S.meta.key});var s;return i}();if(R.status===m&&!S.meta.disabled)return S.meta.disabled=!0,e.onUpdate(S),null;const x={filter:S,valueLabel:R.title,fieldLabel:Object(u.getFieldDisplayValueFromFilter)(S,F),filterLabelStatus:R.status,errorMessage:R.message,className:(j=!!S.meta.negate,v=R,o()("globalFilterItem",{"globalFilterItem-isDisabled":T(v),"globalFilterItem-isError":v.status===m,"globalFilterItem-isWarning":v.status===b,"globalFilterItem-isPinned":Object(n.isFilterPinned)(S),"globalFilterItem-isExcluded":j},e.className)),iconOnClick:function(t){e.onRemove(),i(!1)},onClick:function(e){e.shiftKey?L():i(!t)},"data-test-subj":function(e){const t=S.meta.key?`filter-key-${S.meta.key}`:"",i=S.meta.value?`filter-value-${function(e){return""===e.status}(e)?e.title:e.status}`:"",r=S.meta.negate?"filter-negated":"",s="filter-"+(T(e)?"disabled":"enabled"),a="filter-"+(Object(n.isFilterPinned)(S)?"pinned":"unpinned");return o()("filter",s,t,i,a,r)}(R)};var j,v;const _={id:`popoverFor_filter${O}`,className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:t,closePopover:()=>{i(!1)},button:Object(f.jsx)(g,x),panelPaddingSize:"none"};return Object(f.jsx)(a.EuiPopover,s()({anchorPosition:"downLeft"},_),"menu"===p?Object(f.jsx)(a.EuiContextMenu,{initialPanelId:0,panels:function(){const{negate:t,disabled:r}=S.meta;let s=[{name:Object(n.isFilterPinned)(S)?e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:()=>{i(!1),function(){const t=Object(n.toggleFilterPinned)(S);e.onUpdate(t)}()},"data-test-subj":"pinFilter"},{name:e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil","data-test-subj":"editFilter",onClick:()=>{h("editFilter")}},{name:t?e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:t?"plusInCircle":"minusInCircle",onClick:()=>{i(!1),function(){const t=Object(n.toggleFilterNegated)(S);e.onUpdate(t)}()},"data-test-subj":"negateFilter"},{name:r?e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:r?"eye":"eyeClosed",onClick:()=>{i(!1),L()},"data-test-subj":"disableFilter"},{name:e.intl.formatMessage({id:"unifiedSearch.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:()=>{i(!1),e.onRemove()},"data-test-subj":"deleteFilter"}];return N&&N.length>0&&(s=s.filter((e=>!N.includes(e["data-test-subj"])))),[{id:0,items:s}]}()}):Object(f.jsx)(a.EuiContextMenuPanel,{items:[Object(f.jsx)("div",{style:{width:I}},Object(f.jsx)(c.a,{filter:S,indexPatterns:F,onSubmit:function(t){i(!1),e.onUpdate(t)},onCancel:()=>{i(!1)},timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride}))]}))}t.default=O},48:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r,s,a=i(53),n=i.n(a),l=i(54),o=i.n(l),d=i(7),u=i.n(d);!function(e){e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram"}(r||(r={})),function(e){e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing"}(s||(s={}));var c=n()((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,e),u()(this,"name",void 0),u()(this,"sortable",void 0),u()(this,"filterable",void 0),u()(this,"esTypes",void 0),this.name=t.name||s.UNKNOWN,this.sortable=t.sortable||!1,this.filterable=t.filterable||!1,this.esTypes=Object.freeze((t.esTypes||[]).slice())}));new c({name:s.UNKNOWN});new c({name:s.STRING,sortable:!0,filterable:!0,esTypes:[r.STRING,r.TEXT,r.MATCH_ONLY_TEXT,r.KEYWORD,r.VERSION,r._TYPE,r._ID]}),new c({name:s.NUMBER,sortable:!0,filterable:!0,esTypes:[r.FLOAT,r.HALF_FLOAT,r.SCALED_FLOAT,r.DOUBLE,r.INTEGER,r.LONG,r.UNSIGNED_LONG,r.SHORT,r.BYTE,r.TOKEN_COUNT]}),new c({name:s.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[r.FLOAT_RANGE,r.DOUBLE_RANGE,r.INTEGER_RANGE,r.LONG_RANGE]}),new c({name:s.DATE,sortable:!0,filterable:!0,esTypes:[r.DATE,r.DATE_NANOS]}),new c({name:s.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[r.DATE_RANGE]}),new c({name:s.IP,sortable:!0,filterable:!0,esTypes:[r.IP]}),new c({name:s.IP_RANGE,sortable:!0,filterable:!0,esTypes:[r.IP_RANGE]}),new c({name:s.BOOLEAN,sortable:!0,filterable:!0,esTypes:[r.BOOLEAN]}),new c({name:s.OBJECT,esTypes:[r.OBJECT]}),new c({name:s.NESTED,esTypes:[r.NESTED]}),new c({name:s.GEO_POINT,esTypes:[r.GEO_POINT]}),new c({name:s.GEO_SHAPE,esTypes:[r.GEO_SHAPE]}),new c({name:s.ATTACHMENT,esTypes:[r.ATTACHMENT]}),new c({name:s.MURMUR3,esTypes:[r.MURMUR3]}),new c({name:s._SOURCE,esTypes:[r._SOURCE]}),new c({name:s.HISTOGRAM,filterable:!0,esTypes:[r.HISTOGRAM]}),new c({name:s.CONFLICT})},55:function(e,t){const i=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:i,MAX_SAFE_COMPONENT_LENGTH:16}},56:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return f}));var r=i(5),s=i(44),a=i(48);const n={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:s.FILTERS.PHRASE,negate:!1},l={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:s.FILTERS.PHRASE,negate:!0},o={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:s.FILTERS.PHRASES,negate:!1,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},d={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:s.FILTERS.PHRASES,negate:!0,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},u={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:s.FILTERS.RANGE,negate:!1,field:e=>{var t;return!!["number","number_range","date","date_range","ip","ip_range"].includes(e.type)||!("string"!==e.type||null===(t=e.esTypes)||void 0===t||!t.includes(a.a.VERSION))}},c={message:r.i18n.translate("unifiedSearch.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:s.FILTERS.RANGE,negate:!0,field:e=>{var t;return!!["number","number_range","date","date_range","ip","ip_range"].includes(e.type)||!("string"!==e.type||null===(t=e.esTypes)||void 0===t||!t.includes(a.a.VERSION))}},p={message:r.i18n.translate("unifiedSearch.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:s.FILTERS.EXISTS,negate:!1},h={message:r.i18n.translate("unifiedSearch.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:s.FILTERS.EXISTS,negate:!0},f=[n,l,o,d,u,c,p,h]},64:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var r=i(7),s=i.n(r),a=i(3),n=i(5),l=i(2),o=i(44),d=i(4),u=i(1),c=i.n(u),p=i(40),h=i(10),f=i(6),g=i(9),E=i.n(g),b=i(0);function m(e){const{options:t,selectedOptions:i,getLabel:r,onChange:s,...n}=e,l=t.map(r),o=l.map((e=>({label:e}))),d=i.filter((e=>-1!==t.indexOf(e))).map((e=>o[t.indexOf(e)]));return Object(b.jsx)(a.EuiComboBox,E()({options:o,selectedOptions:d,onChange:e=>{const i=e.map((({label:e})=>t[l.indexOf(e)]));s(i)},sortMatchesBy:"startsWith"},n))}var I=i(18),O=i.n(I),S=i(48),F=i(94),N=i.n(F),L=i(15),T=i(56);function R(e,t){var i;switch(t.type){case"date":const r="string"==typeof e?O.a.parse(e):null;return Boolean("string"==typeof e&&r&&r.isValid());case"ip":try{return Boolean(new L.IpAddress(e))}catch(e){return!1}case"string":return null===(i=t.esTypes)||void 0===i||!i.includes(S.a.VERSION)||N()(e);default:return!0}}var x=i(11);class phrase_suggestor_PhraseSuggestorUI extends c.a.Component{constructor(...e){super(...e),s()(this,"services",this.props.kibana.services),s()(this,"abortController",void 0),s()(this,"state",{suggestions:[],isLoading:!1}),s()(this,"onSearchChange",(e=>{this.updateSuggestions(`${e}`)})),s()(this,"updateSuggestions",Object(d.debounce)((async(e="")=>{this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const{indexPattern:t,field:i,timeRangeForSuggestionsOverride:r}=this.props;if(!i||!this.isSuggestingValues())return;this.setState({isLoading:!0});const s=await Object(x.a)().getValueSuggestions({indexPattern:t,field:i,query:e,signal:this.abortController.signal,useTimeRange:r});this.setState({suggestions:s,isLoading:!1})}),500))}componentDidMount(){this.updateSuggestions()}componentWillUnmount(){this.abortController&&this.abortController.abort()}isSuggestingValues(){var e;const t=this.services.uiSettings.get(L.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES),{field:i}=this.props,r=null==i||null===(e=i.esTypes)||void 0===e?void 0:e.includes("version");return t&&i&&i.aggregatable&&"string"===i.type&&!r}}Object(f.withKibana)(phrase_suggestor_PhraseSuggestorUI);class value_input_type_ValueInputTypeUI extends u.Component{constructor(...e){super(...e),s()(this,"getValueForNumberField",(e=>{if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?e:t}return e})),s()(this,"onBoolChange",(e=>{const t="true"===e.target.value;this.props.onChange(t)})),s()(this,"onChange",(e=>{const t=e.target.value;this.props.onChange(t)})),s()(this,"onBlur",(e=>{if(this.props.onBlur){const t=e.target.value;this.props.onBlur(t)}}))}render(){const e=this.props.value;let t;switch(this.props.field.type){case"string":t=Object(b.jsx)(a.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,isInvalid:!R(e,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":case"number_range":t=Object(b.jsx)(a.EuiFieldNumber,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:this.getValueForNumberField(e),onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":case"date_range":t=Object(b.jsx)(a.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,onBlur:this.onBlur,isInvalid:this.props.isInvalid,controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":case"ip_range":t=Object(b.jsx)(a.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,isInvalid:!Object(d.isEmpty)(e)&&!R(e,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":t=Object(b.jsx)(a.EuiSelect,{options:[{value:void 0,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:e,onChange:this.onBoolChange,className:this.props.className,fullWidth:this.props.fullWidth})}return t}}const j=Object(l.injectI18n)(value_input_type_ValueInputTypeUI);function v(e){return m(e)}const _=Object(l.injectI18n)(Object(f.withKibana)(class phrase_value_input_PhraseValueInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const{isInvalid:e,errorMessage:t}=((e,t)=>{switch(e.type){case h.KBN_FIELD_TYPES.DATE:case h.KBN_FIELD_TYPES.DATE_RANGE:if(!Object(d.isEmpty)(t)&&!R(t,e))return{isInvalid:!0,errorMessage:n.i18n.translate("unifiedSearch.filter.filterBar.invalidDateFormatProvidedErrorMessage",{defaultMessage:"Invalid date format provided"})}}return{isInvalid:!1}})(this.props.field,this.props.value);return Object(b.jsx)(a.EuiFormRow,{fullWidth:this.props.fullWidth,label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.valueInputLabel",defaultMessage:"Value"}),isInvalid:e,error:t},this.isSuggestingValues()?this.renderWithSuggestions():Object(b.jsx)(j,{fullWidth:this.props.fullWidth,placeholder:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,field:this.props.field,isInvalid:e}))}renderWithSuggestions(){const{suggestions:e}=this.state,{value:t,intl:i,onChange:r,fullWidth:s}=this.props,a=String(t),n=t?Object(d.uniq)([a,...e]):e;return Object(b.jsx)(v,{fullWidth:s,placeholder:i.formatMessage({id:"unifiedSearch.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:n,getLabel:e=>e,selectedOptions:t?[a]:[],onChange:([e=""])=>r(e),onSearchChange:this.onSearchChange,singleSelection:{asPlainText:!0},onCreateOption:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}));function A(e){return m(e)}const C=Object(l.injectI18n)(Object(f.withKibana)(class phrases_values_input_PhrasesValuesInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const{suggestions:e}=this.state,{values:t,intl:i,onChange:r,fullWidth:s,onParamsUpdate:n}=this.props,l=t?Object(d.uniq)([...t,...e]):e;return Object(b.jsx)(a.EuiFormRow,{fullWidth:s,label:i.formatMessage({id:"unifiedSearch.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},Object(b.jsx)(A,{fullWidth:s,placeholder:i.formatMessage({id:"unifiedSearch.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),delimiter:",",options:l,getLabel:e=>e,selectedOptions:t||[],onSearchChange:this.onSearchChange,onCreateOption:e=>{n(e.trim())},onChange:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}));var P=i(19),M=i.n(P);const y=Object(l.injectI18n)((function(e){const t=Object(f.useKibana)().services.uiSettings.get("dateFormat:tz"),i=e=>{if("string"!=typeof e&&"number"!=typeof e)return e;const i=M()(e).tz(t);return i.isValid()?null==i?void 0:i.format("YYYY-MM-DDTHH:mm:ss.SSSZ"):e},r=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:t,to:Object(d.get)(e,"value.to")})},s=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:Object(d.get)(e,"value.from"),to:t})};return Object(b.jsx)("div",null,Object(b.jsx)(a.EuiFormControlLayoutDelimited,{fullWidth:e.fullWidth,"aria-label":e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:Object(b.jsx)(j,{controlOnly:!0,field:e.field,value:e.value?e.value.from:void 0,onChange:r,onBlur:e=>{r(i(e))},placeholder:e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:Object(b.jsx)(j,{controlOnly:!0,field:e.field,value:e.value?e.value.to:void 0,onChange:s,onBlur:e=>{s(i(e))},placeholder:e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}))})),D=n.i18n.translate("unifiedSearch.filter.filterEditor.addFilterPopupTitle",{defaultMessage:"Add filter"}),w=n.i18n.translate("unifiedSearch.filter.filterEditor.editFilterPopupTitle",{defaultMessage:"Edit filter"}),$=n.i18n.translate("unifiedSearch.filter.filterEditor.addButtonLabel",{defaultMessage:"Add filter"}),B=n.i18n.translate("unifiedSearch.filter.filterEditor.updateButtonLabel",{defaultMessage:"Update filter"});class filter_editor_FilterEditorUI extends u.Component{constructor(e){super(e),s()(this,"toggleCustomEditor",(()=>{const e=!this.state.isCustomEditorOpen;this.setState({isCustomEditorOpen:e})})),s()(this,"onIndexPatternChange",(([e])=>{this.setState({selectedIndexPattern:e,selectedField:void 0,selectedOperator:void 0,params:void 0})})),s()(this,"onFieldChange",(([e])=>{this.setState({selectedField:e,selectedOperator:void 0,params:void 0})})),s()(this,"onOperatorChange",(([e])=>{const t=Object(d.get)(this.state.selectedOperator,"type")===Object(d.get)(e,"type")?this.state.params:void 0;this.setState({selectedOperator:e,params:t})})),s()(this,"onCustomLabelSwitchChange",(e=>{const t=e.target.checked,i=e.target.checked?"":null;this.setState({useCustomLabel:t,customLabel:i})})),s()(this,"onCustomLabelChange",(e=>{const t=e.target.value;this.setState({customLabel:t})})),s()(this,"onParamsChange",(e=>{this.setState({params:e})})),s()(this,"onParamsUpdate",(e=>{this.setState((t=>({params:[e,...t.params||[]]})))})),s()(this,"onQueryDslChange",(e=>{this.setState({queryDsl:e})})),s()(this,"onSubmit",(()=>{const{selectedIndexPattern:e,selectedField:t,selectedOperator:i,params:r,useCustomLabel:s,customLabel:a,isCustomEditorOpen:n,queryDsl:l}=this.state,{$state:d}=this.props.filter;if(!d||!d.store)return;const u=s?a:null;if(n){const{index:e,disabled:t=!1,negate:i=!1}=this.props.filter.meta,r=e||this.props.indexPatterns[0].id,s=JSON.parse(l),a=Object(o.buildCustomFilter)(r,s,t,i,u,d.store);this.props.onSubmit(a)}else if(e&&t&&i){var c;const s=Object(o.buildFilter)(e,t,i.type,i.negate,null!==(c=this.props.filter.meta.disabled)&&void 0!==c&&c,null!=r?r:"",u,d.store);this.props.onSubmit(s)}})),this.state={selectedIndexPattern:this.getIndexPatternFromFilter(),selectedField:this.getFieldFromFilter(),selectedOperator:this.getSelectedOperator(),params:Object(o.getFilterParams)(e.filter),useCustomLabel:null!==e.filter.meta.alias,customLabel:e.filter.meta.alias||"",queryDsl:JSON.stringify(Object(o.cleanFilter)(e.filter),null,2),isCustomEditorOpen:this.isUnknownFilterType()}}render(){return Object(b.jsx)("div",null,Object(b.jsx)(a.EuiPopoverTitle,{paddingSize:"s"},Object(b.jsx)(a.EuiFlexGroup,{alignItems:"baseline",responsive:!1},Object(b.jsx)(a.EuiFlexItem,null,"add"===this.props.mode?D:w),Object(b.jsx)(a.EuiFlexItem,{grow:!1,className:"filterEditor__hiddenItem"}),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiButtonEmpty,{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?Object(b.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):Object(b.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),Object(b.jsx)(a.EuiForm,null,Object(b.jsx)("div",{className:"globalFilterItem__editorForm"},this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),Object(b.jsx)(a.EuiSpacer,{size:"m"}),Object(b.jsx)(a.EuiSwitch,{id:"filterEditorCustomLabelSwitch","data-test-subj":"createCustomLabel",label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&Object(b.jsx)("div",null,Object(b.jsx)(a.EuiSpacer,{size:"m"}),Object(b.jsx)(a.EuiFormRow,{label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"}),fullWidth:!0},Object(b.jsx)(a.EuiFieldText,{value:`${this.state.customLabel}`,onChange:this.onCustomLabelChange,fullWidth:!0})))),Object(b.jsx)(a.EuiPopoverFooter,{paddingSize:"s"},Object(b.jsx)(a.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:!1},Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiButton,{fill:!0,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},"add"===this.props.mode?$:B)),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},Object(b.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(b.jsx)(a.EuiFlexItem,null)))))}renderIndexPatternInput(){if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((e=>e===this.getIndexPatternFromFilter())))return"";const{selectedIndexPattern:e}=this.state;return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(a.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.dateViewSelectLabel",defaultMessage:"Data view"})},Object(b.jsx)(G,{fullWidth:!0,placeholder:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select a data view"}),options:this.props.indexPatterns,selectedOptions:e?[e]:[],getLabel:e=>e.title,onChange:this.onIndexPatternChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterIndexPatternsSelect"})),Object(b.jsx)(a.EuiSpacer,{size:"s"}))}renderRegularEditor(){return Object(b.jsx)("div",null,Object(b.jsx)(a.EuiFlexGroup,{responsive:!0,gutterSize:"s"},Object(b.jsx)(a.EuiFlexItem,{grow:2},this.renderFieldInput()),Object(b.jsx)(a.EuiFlexItem,{grow:!1,style:{flexBasis:160}},this.renderOperatorInput())),Object(b.jsx)(a.EuiSpacer,{size:"s"}),Object(b.jsx)("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}renderFieldInput(){const{selectedIndexPattern:e,selectedField:t}=this.state,i=e?e.fields.filter(L.isFilterable):[];return Object(b.jsx)(a.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},Object(b.jsx)(U,{fullWidth:!0,id:"fieldInput",isDisabled:!e,placeholder:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:i,selectedOptions:t?[t]:[],getLabel:e=>e.customLabel||e.name,onChange:this.onFieldChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterFieldSuggestionList"}))}renderOperatorInput(){const{selectedField:e,selectedOperator:t}=this.state,i=e?(r=e,T.a.filter((e=>e.field?e.field(r):!e.fieldTypes||e.fieldTypes.includes(r.type)))):[];var r;return Object(b.jsx)(a.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},Object(b.jsx)(k,{fullWidth:!0,isDisabled:!e,placeholder:e?this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:i,selectedOptions:t?[t]:[],getLabel:({message:e})=>e,onChange:this.onOperatorChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterOperatorList"}))}renderCustomEditor(){return Object(b.jsx)(a.EuiFormRow,{fullWidth:!0,label:n.i18n.translate("unifiedSearch.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},Object(b.jsx)(f.CodeEditor,{languageId:p.XJsonLang.ID,width:"100%",height:"250px",value:this.state.queryDsl,onChange:this.onQueryDslChange,"data-test-subj":"customEditorInput","aria-label":n.i18n.translate("unifiedSearch.filter.filterEditor.queryDslAriaLabel",{defaultMessage:"Elasticsearch Query DSL editor"})}))}renderParamsEditor(){const e=this.state.selectedIndexPattern;if(!e||!this.state.selectedOperator||!this.state.selectedField)return"";switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return Object(b.jsx)(_,{indexPattern:e,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput",timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"phrases":return Object(b.jsx)(C,{indexPattern:e,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange,onParamsUpdate:this.onParamsUpdate,timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"range":return Object(b.jsx)(y,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,fullWidth:!0})}}isUnknownFilterType(){const{type:e}=this.props.filter.meta;return!!e&&!["phrase","phrases","range","exists"].includes(e)}getIndexPatternFromFilter(){return Object(h.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}getFieldFromFilter(){const e=this.getIndexPatternFromFilter();return e&&function(e,t){return t.fields.find((t=>t.name===e.meta.key))}(this.props.filter,e)}getSelectedOperator(){return e=this.props.filter,T.a.find((t=>e.meta.type===t.type&&e.meta.negate===t.negate));var e}isFilterValid(){const{isCustomEditorOpen:e,queryDsl:t,selectedIndexPattern:i,selectedField:r,selectedOperator:s,params:a}=this.state;if(e)try{const e=JSON.parse(t);return Object.keys(e).length>0}catch(e){return!1}return function(e,t,i,r){if(!e||!t||!i)return!1;switch(i.type){case"phrase":return R(r,t);case"phrases":return!(!Array.isArray(r)||!r.length)&&r.every((e=>R(e,t)));case"range":return"object"==typeof r&&(!r.from||R(r.from,t))&&(!r.to||R(r.to,t));case"exists":return!0;default:throw new Error(`Unknown operator type: ${i.type}`)}}(i,r,s,a)}}function G(e){return m(e)}function U(e){return m(e)}function k(e){return m(e)}const W=Object(l.injectI18n)(filter_editor_FilterEditorUI)},69:function(e,t,i){const{MAX_SAFE_COMPONENT_LENGTH:r}=i(55),s=i(70),a=(t=e.exports={}).re=[],n=t.src=[],l=t.t={};let o=0;const d=(e,t,i)=>{const r=o++;s(r,t),l[e]=r,n[r]=t,a[r]=new RegExp(t,i?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","[0-9]+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${n[l.NUMERICIDENTIFIER]})\\.(${n[l.NUMERICIDENTIFIER]})\\.(${n[l.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${n[l.NUMERICIDENTIFIERLOOSE]})\\.(${n[l.NUMERICIDENTIFIERLOOSE]})\\.(${n[l.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${n[l.NUMERICIDENTIFIER]}|${n[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${n[l.NUMERICIDENTIFIERLOOSE]}|${n[l.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${n[l.PRERELEASEIDENTIFIER]}(?:\\.${n[l.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${n[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[l.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[0-9A-Za-z-]+"),d("BUILD",`(?:\\+(${n[l.BUILDIDENTIFIER]}(?:\\.${n[l.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${n[l.MAINVERSION]}${n[l.PRERELEASE]}?${n[l.BUILD]}?`),d("FULL",`^${n[l.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${n[l.MAINVERSIONLOOSE]}${n[l.PRERELEASELOOSE]}?${n[l.BUILD]}?`),d("LOOSE",`^${n[l.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${n[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${n[l.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${n[l.XRANGEIDENTIFIER]})(?:\\.(${n[l.XRANGEIDENTIFIER]})(?:\\.(${n[l.XRANGEIDENTIFIER]})(?:${n[l.PRERELEASE]})?${n[l.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${n[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[l.XRANGEIDENTIFIERLOOSE]})(?:${n[l.PRERELEASELOOSE]})?${n[l.BUILD]}?)?)?`),d("XRANGE",`^${n[l.GTLT]}\\s*${n[l.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${n[l.GTLT]}\\s*${n[l.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),d("COERCERTL",n[l.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${n[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${n[l.LONETILDE]}${n[l.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${n[l.LONETILDE]}${n[l.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${n[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${n[l.LONECARET]}${n[l.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${n[l.LONECARET]}${n[l.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${n[l.GTLT]}\\s*(${n[l.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${n[l.GTLT]}\\s*(${n[l.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${n[l.GTLT]}\\s*(${n[l.LOOSEPLAIN]}|${n[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${n[l.XRANGEPLAIN]})\\s+-\\s+(${n[l.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${n[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[l.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0.0.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},70:function(e,t,i){(function(t){const i="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=i}).call(this,i(96))},71:function(e,t){const i=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:i.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},89:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(90);case"v8light":return i(92)}},90:function(e,t,i){var r=i(21),s=i(91);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},91:function(e,t,i){(t=i(22)(!1)).push([e.i,".globalFilterItem{line-height:16px;border:none;color:#DFE5EF;padding-top:7px;padding-bottom:7px;white-space:normal}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #424752}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem-isDisabled{color:#98A2B3;background-color:rgba(52,55,65,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#f87972}.globalFilterItem-isWarning .globalFilterLabel__value{color:#F3D371}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#424752;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #7c3632}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#c6564f}.globalFilterItem__editorForm{padding:8px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.globalFilterItem__readonlyPanel{min-width:auto;padding:12px}\n",""]),e.exports=t},92:function(e,t,i){var r=i(21),s=i(93);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},93:function(e,t,i){(t=i(22)(!1)).push([e.i,".globalFilterItem{line-height:16px;border:none;color:#343741;padding-top:7px;padding-bottom:7px;white-space:normal}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #bcc3ce}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem-isDisabled{color:#69707D;background-color:rgba(211,218,230,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#b4251d}.globalFilterItem-isWarning .globalFilterLabel__value{color:#765b0a}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#bcc3ce;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #ebbebc}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#d16862}.globalFilterItem__editorForm{padding:8px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.globalFilterItem__readonlyPanel{min-width:auto;padding:12px}\n",""]),e.exports=t},94:function(e,t,i){const r=i(95);e.exports=(e,t)=>{const i=r(e,t);return i?i.version:null}},95:function(e,t,i){const{MAX_LENGTH:r}=i(55),{re:s,t:a}=i(69),n=i(97),l=i(71);e.exports=(e,t)=>{if(t=l(t),e instanceof n)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?s[a.LOOSE]:s[a.FULL]).test(e))return null;try{return new n(e,t)}catch(e){return null}}},96:function(e,t,i){e.exports=i(23)(656)},97:function(e,t,i){const r=i(70),{MAX_LENGTH:s,MAX_SAFE_INTEGER:a}=i(55),{re:n,t:l}=i(69),o=i(71),{compareIdentifiers:d}=i(98);class SemVer{constructor(e,t){if(t=o(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>s)throw new TypeError(`version is longer than ${s} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const i=e.trim().match(t.loose?n[l.LOOSE]:n[l.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),d(this.major,e.major)||d(this.minor,e.minor)||d(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const i=this.prerelease[t],s=e.prerelease[t];if(r("prerelease compare",t,i,s),void 0===i&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===i)return-1;if(i!==s)return d(i,s)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const i=this.build[t],s=e.build[t];if(r("prerelease compare",t,i,s),void 0===i&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===i)return-1;if(i!==s)return d(i,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},98:function(e,t){const i=/^[0-9]+$/,r=(e,t)=>{const r=i.test(e),s=i.test(t);return r&&s&&(e=+e,t=+t),e===t?0:r&&!s?-1:s&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}}}]);