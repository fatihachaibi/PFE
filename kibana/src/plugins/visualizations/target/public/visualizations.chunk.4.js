(window.visualizations_bundle_jsonpfunction=window.visualizations_bundle_jsonpfunction||[]).push([[4],{101:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(102);case"v8light":return a(104)}},102:function(e,t,a){var i=a(57),n=a(103);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},103:function(e,t,a){(t=a(58)(!1)).push([e.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}.visAppLoadingWrapper{align-items:center;justify-content:center;display:flex;flex-grow:1}\n",""]),e.exports=t},104:function(e,t,a){var i=a(57),n=a(105);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},105:function(e,t,a){(t=a(58)(!1)).push([e.i,".visAppWrapper{display:flex;flex-direction:column;flex-grow:1}.visAppLoadingWrapper{align-items:center;justify-content:center;display:flex;flex-grow:1}\n",""]),e.exports=t},106:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(107);case"v8light":return a(109)}},107:function(e,t,a){var i=a(57),n=a(108);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},108:function(e,t,a){(t=a(58)(!1)).push([e.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout__link{text-decoration:underline}\n",""]),e.exports=t},109:function(e,t,a){var i=a(57),n=a(110);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},110:function(e,t,a){(t=a(58)(!1)).push([e.i,".visListingTable__typeImage,.visListingTable__typeIcon{margin-right:8px;position:relative;top:-1px}.visListingTable__typeImage{width:16px;height:16px}.visListingTable__experimentalIcon{width:24px;vertical-align:baseline;padding:0 8px;margin-left:8px}.visListingTable__titleLink{text-align:left}.visListingCallout__link{text-decoration:underline}\n",""]),e.exports=t},111:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(112);case"v8light":return a(114)}},112:function(e,t,a){var i=a(57),n=a(113);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},113:function(e,t,a){(t=a(58)(!1)).push([e.i,"@media only screen and (min-width: 768px) and (max-width: 991px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 992px) and (max-width: 1199px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 1200px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 768px) and (max-width: 991px){.visNavItem__goToLens::after{border-right:1px solid #343741;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.visNavItem__goToLens::after{border-right:1px solid #343741;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width: 1200px){.visNavItem__goToLens::after{border-right:1px solid #343741;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}\n",""]),e.exports=t},114:function(e,t,a){var i=a(57),n=a(115);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},115:function(e,t,a){(t=a(58)(!1)).push([e.i,"@media only screen and (min-width: 768px) and (max-width: 991px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 992px) and (max-width: 1199px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 1200px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width: 768px) and (max-width: 991px){.visNavItem__goToLens::after{border-right:1px solid #D3DAE6;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.visNavItem__goToLens::after{border-right:1px solid #D3DAE6;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width: 1200px){.visNavItem__goToLens::after{border-right:1px solid #D3DAE6;bottom:0;content:'';display:block;pointer-events:none;position:absolute;right:-8px;top:0}}\n",""]),e.exports=t},122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(42).__importDefault(a(92));t.default=function(e){i.default((function(){e()}))}},123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(42),n=a(9),s=i.__importDefault(a(92));t.default=function(e){var t=n.useRef(e);t.current=e,s.default((function(){return function(){return t.current()}}))}},124:function(e,t,a){var i=a(57),n=a(125);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},125:function(e,t,a){(t=a(58)(!1)).push([e.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),e.exports=t},126:function(e,t,a){var i=a(57),n=a(127);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},127:function(e,t,a){(t=a(58)(!1)).push([e.i,".visEditor{flex:1 1 auto;display:flex;flex-direction:column;height:100%}.visEditor>*{flex-shrink:0}@media only screen and (max-width: 574px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 575px) and (max-width: 767px){.visEditor .visualization{min-height:240px}}@media only screen and (min-width: 768px) and (max-width: 991px){.visEditor .visualization{min-height:240px}}.visEditor>.visualize{height:100%;flex:1 1 auto;display:flex;z-index:0}.visEditor__content{flex:1 1 auto;display:flex;flex-direction:column;width:100%;z-index:0}.visEditor__content>*{flex-shrink:0}\n",""]),e.exports=t},128:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(9),n=a(129),s=function(){};t.default=function(e,t,a){if(!n.isClient)return[t,s,s];if(!e)throw new Error("useLocalStorage key may not be falsy");var r=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,o=i.useState((function(){try{var i=a?a.raw?String:a.serializer:JSON.stringify,n=localStorage.getItem(e);return null!==n?r(n):(t&&localStorage.setItem(e,i(t)),t)}catch(e){return t}})),l=o[0],c=o[1],u=i.useCallback((function(t){try{var i="function"==typeof t?t(l):t;if(void 0===i)return;var n;n=a?a.raw?"string"==typeof i?i:JSON.stringify(i):a.serializer?a.serializer(i):JSON.stringify(i):JSON.stringify(i),localStorage.setItem(e,n),c(r(n))}catch(e){}}),[e,c]),d=i.useCallback((function(){try{localStorage.removeItem(e),c(void 0)}catch(e){}}),[e,c]);return[l,u,d]}},129:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=a(42).__importDefault(a(130));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},130:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var i,n,s;if(Array.isArray(t)){if((i=t.length)!=a.length)return!1;for(n=i;0!=n--;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(a,s[n]))return!1;for(n=i;0!=n--;){var r=s[n];if(!("_owner"===r&&t.$$typeof||e(t[r],a[r])))return!1}return!0}return t!=t&&a!=a}},187:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Le}));var i=a(9),n=a.n(i),s=a(17),r=a.n(s),o=a(43),l=a(15),c=(a(101),a(10)),u=a(7),d=a(63),p=a(64),v=n.a.lazy((function(){return a.e(14).then(a.bind(null,189)).then((function(e){return{default:e.AnalyticsNoDataPage}}))})),g=Object(d.c)(v),f=(a(106),a(2)),b=a(14),h=a(123),m=a.n(h),y=a(122),j=a.n(y),O=a(8),x=a(24),S=a(1),w=a(39),E=a(5),T=a(44),I=a(3);const C=(e,t,a,i)=>{let n=e.getUrlForApp(null!=a?a:E.VISUALIZE_APP_NAME,{path:a?i:`#${i}`});const s=Object(S.p)().get("state:storeInSessionStorage"),r=t.get(E.GLOBAL_STATE_STORAGE_KEY)||{};return n=Object(I.setStateToKbnUrl)(E.GLOBAL_STATE_STORAGE_KEY,r,{useHash:s},n),n};var _=a(4);var L=a(47),z=a.n(L),A=a(65),M=a(32),N=a(48);const V=f.i18n.translate("visualizations.editor.defaultEditBreadcrumbText",{defaultMessage:"Edit visualization"});function P(){return[{text:f.i18n.translate("visualizations.listing.breadcrumb",{defaultMessage:"Visualize Library"}),href:`#${E.VisualizeConstants.LANDING_PAGE_PATH}`}]}function k({byValue:e,originatingAppName:t,redirectToOrigin:a},i=V){return[...t?[{text:t,onClick:a}]:[],...e?[]:P(),{text:i}]}var F=a(34),D=a(18);const U=({data:e})=>e.query.queryString.getDefaultQuery(),B=(e,t)=>{var a,i;const n=e.vis,s=Object(O.a)(n.serialize()),r="savedVis"in e?e.savedVis:void 0;return{uiState:r&&r.uiStateJSON?JSON.parse(r.uiStateJSON):n.uiState.toJSON(),query:(null===(a=n.data.searchSource)||void 0===a?void 0:a.getOwnField("query"))||U(t),filters:(null===(i=n.data.searchSource)||void 0===i?void 0:i.getOwnField("filter"))||[],vis:{...s.visState,title:n.title},linked:r&&r.id?!!r.savedSearchId:!!s.savedSearchId}};function R(e){return`#/${e.location.pathname}${e.location.search}`}a(111);const $=Object(N.withSuspense)(N.LazySavedObjectSaveModalDashboard),q=e=>!!e.visualize&&!!e.visualize.show,H=e=>{const[t,a]=Object(i.useState)();return Object(i.useEffect)((()=>{const t=e.getIsVisible$().subscribe((e=>{a(e)}));return()=>t.unsubscribe()}),[e]),t};var G=a(6);const K=(e,t,a,n,s,r)=>{const[o,l]=Object(i.useState)(!1),[c,u]=Object(i.useState)();return Object(i.useEffect)((()=>{if(n&&s){const{timefilter:{timefilter:i},filterManager:o,queryString:c,state$:d}=e.data.query,{embeddableHandler:p,savedSearch:v,vis:g}=s,f="savedVis"in s?s.savedVis:void 0,b=n.getState();u(b);const h=()=>{r?r.render({core:e,data:e.data,uiState:g.uiState,timeRange:i.getTime(),filters:o.getFilters(),query:c.getQuery(),linked:!!g.data.savedSearchId,savedSearch:v}):p.updateInput({timeRange:i.getTime(),filters:o.getFilters(),query:c.getQuery(),searchSessionId:e.data.search.session.getSessionId()})},m=d.subscribe({next:()=>{e.data.search.session.start(),h()},error:e.fatalErrors.add}),y=e=>{e&&f&&!f.savedSearchId&&v?(f.savedSearchId=v.id,g.data.savedSearchId=v.id,g.data.searchSource&&g.data.searchSource.setParent(v.searchSource)):!e&&f&&f.savedSearchId?(delete f.savedSearchId,delete g.data.savedSearchId):e||f||delete g.data.savedSearchId};b.uiState&&g.uiState.setSilent(b.uiState);const j=()=>{n.transitions.set("uiState",g.uiState.getChanges())};g.uiState.on("change",j);const x=e.data.search.session.getSession$().subscribe((e=>{p.getInput().searchSessionId!==e&&p.updateInput({searchSessionId:e})})),S=n.subscribe((i=>{if(u(i),!f||!f.id||e.history.location.pathname.includes(f.id)){if(Object(G.isEqual)(i.uiState,g.uiState.getChanges())||g.uiState.set(i.uiState),f&&!Object(G.isEqual)({...Object(O.a)(g.serialize()).visState,title:g.title},i.vis)){const{aggs:e,...a}=i.vis;g.setState({...a,data:{aggs:e}}),p.reload(),t.emit("updateEditor")}y(i.linked),g.data.searchSource&&(g.data.searchSource.setField("query",i.query),g.data.searchSource.setField("filter",i.filters)),h(),a(!0)}})),w=()=>l(!0);return t.on("embeddableRendered",w),h(),()=>{l(!1),t.off("embeddableRendered",w),m.unsubscribe(),g.uiState.off("change",j),S(),x.unsubscribe()}}}),[n,t,s,e,a,r]),{isEmbeddableRendered:o,currentAppState:c}};var Q=a(45),J=a(46),W=a(28);const Y=async(e,t)=>{const{data:a,createVisEmbeddableFromObject:i,savedObjects:n,spaces:s}=t,r=await i(e,{id:"",timeRange:a.query.timefilter.timefilter.getTime(),filters:a.query.filterManager.getFilters(),searchSessionId:a.search.session.getSessionId(),renderMode:"edit"});let o;return r.getOutput$().subscribe((e=>{e.error&&!function(e){const t=e.original||e;return t instanceof Q.SavedFieldNotFound||t instanceof Q.SavedFieldTypeInvalidForAgg}(e.error)&&a.search.showError(e.error.original||e.error)})),e.data.savedSearchId&&(o=await Object(J.getSavedSearch)(e.data.savedSearchId,{search:a.search,savedObjectsClient:n.client,spaces:s}),await Object(J.throwErrorOnSavedSearchUrlConflict)(o)),{savedSearch:o,embeddableHandler:r}},Z=async(e,t)=>{const{data:a,savedObjects:i,spaces:n,savedObjectsTagging:s}=e,r=await Object(O.e)({search:a.search,savedObjectsClient:i.client,dataViews:a.dataViews,spaces:n,savedObjectsTagging:s},t);"string"!=typeof t&&(r.searchSourceFields={index:null==t?void 0:t.indexPattern});const o=Object(O.b)(r);let l=await Object(W.a)(o.type,o);if(l.type.setup)try{l=await l.type.setup(l)}catch{}const{embeddableHandler:c,savedSearch:u}=await Y(l,e);return{vis:l,embeddableHandler:c,savedSearch:u,savedVis:r}};var X=a(19),ee=a(87);function te(e){if("table"!==e.vis.type)return e;const t=Object(G.get)(e,"vis.aggs");if(t){let a=0;const i=t.map((e=>("split"!==e.schema||(a++,1===a||(e.schema="bucket",e.params=Object(G.omit)(e.params,["row"]))),e)));if(a<=1)return e;e.vis.aggs=i}return e}const ae="_a";function ie(e){return Object(G.omitBy)(e,((e,t)=>"$"===t.charAt(0)||"_"===t.charAt(0)||Object(G.isFunction)(e)))}const ne={set:e=>(t,a)=>({...e,[t]:a}),setVis:e=>t=>({...e,vis:{...e.vis,...t}}),unlinkSavedSearch:e=>({query:t,parentFilters:a=[]})=>({...e,query:t||e.query,filters:Object(G.union)(e.filters,a),linked:!1}),updateDataView:e=>t=>({...e,dataView:t}),updateVisState:e=>t=>({...e,vis:ie(t)}),updateSavedQuery:e=>t=>{const a={...e,savedQuery:t};return t||delete a.savedQuery,a}};const se=(e,t,a)=>{const[n,s]=Object(i.useState)(!1),[r,o]=Object(i.useState)(null);return Object(i.useEffect)((()=>{if(a){const r=B(a,e),c=!("savedVis"in a),{stateContainer:d,stopStateSync:p}=function({stateDefaults:e,kbnUrlStateStorage:t,byValue:a}){return a?function(e){const t=te({...e});return{stateContainer:Object(I.createStateContainer)(t,ne),stopStateSync:()=>{}}}(e):function({stateDefaults:e,kbnUrlStateStorage:t}){const a=te({...e,...t.get(ae)});t.set(ae,a,{replace:!0});const i=Object(I.createStateContainer)(a,ne),{start:n,stop:s}=Object(I.syncState)({storageKey:ae,stateContainer:{...i,set:e=>{e&&i.set(e)}},stateStorage:t});return n(),{stateContainer:i,stopStateSync:s}}({stateDefaults:e,kbnUrlStateStorage:t})}({stateDefaults:r,kbnUrlStateStorage:e.kbnUrlStateStorage,byValue:c}),v=d.getState(),g=({isDirty:t})=>{t||d.transitions.updateVisState(B(a,e).vis),s(t)};t.on("dirtyStateChange",g);const{filterManager:b,queryString:h}=e.data.query;b.setAppFilters(Object(G.cloneDeep)(v.filters)),h.setQuery((n=v.query,Object(G.has)(n,"language")?n:{query:n,language:"lucene"}));const m=Object(u.connectToQueryState)(e.data.query,{set:({filters:e,query:t})=>{d.transitions.set("filters",e),d.transitions.set("query",t)},get:()=>({filters:d.getState().filters,query:d.getState().query}),state$:d.state$.pipe(Object(X.map)((e=>({filters:e.filters,query:e.query}))))},{filters:ee.a.APP_STATE,query:!0});if(Object(G.isEqual)(v.vis,r.vis)&&Object(G.isEqual)(v.query,r.query)&&Object(G.isEqual)(v.filters,r.filters))o(d);else{var i;const{aggs:t,...n}=v.vis,s=v.query,r=v.filters,c=(null===(i=a.vis.data.searchSource)||void 0===i?void 0:i.getSerializedFields())||{};a.vis.setState({...n,data:{aggs:t,searchSource:{...c,query:s,filter:r},savedSearchId:a.vis.data.savedSearchId}}).then((()=>{o(d)})).catch((t=>{e.toastNotifications.addWarning({title:f.i18n.translate("visualizations.visualizationLoadingFailedErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:Object(l.toMountPoint)(Object(_.jsx)(l.KibanaThemeProvider,{theme$:e.theme.theme$},Object(_.jsx)(l.MarkdownSimple,null,t.message)))}),e.history.replace(`${E.VisualizeConstants.LANDING_PAGE_PATH}?notFound=visualization`)}))}return()=>{t.off("dirtyStateChange",g),p(),m()}}var n}),[t,a,e]),{appState:r,hasUnappliedChanges:n}},re=(e,t,a,n)=>{Object(i.useEffect)((()=>{if(a&&n&&n.savedSearch&&n.vis.data.searchSource){const{savedSearch:i}=n,{searchSource:s}=n.vis.data,r=()=>{const t=i.searchSource,n=null==t?void 0:t.getParent(),r=null==t?void 0:t.getField("index");s.setField("index",r),s.setParent(n),a.transitions.unlinkSavedSearch({query:null==t?void 0:t.getField("query"),parentFilters:(null==t?void 0:t.getOwnField("filter"))||[]}),e.toastNotifications.addSuccess(f.i18n.translate("visualizations.linkedToSearch.unlinkSuccessNotificationText",{defaultMessage:"Unlinked from saved search '{searchTitle}'",values:{searchTitle:i.title}}))};return t.on("unlinkFromSavedSearch",r),()=>{t.off("unlinkFromSavedSearch",r)}}}),[a,t,n,e.toastNotifications])},oe=(e,t,a,n)=>{Object(i.useEffect)((()=>{let i;if(a&&n){const s=async({dataView:a})=>{if(a&&n.vis.data.indexPattern&&a!==n.vis.data.indexPattern.id){const i=await e.dataViews.get(a);i&&(((e,t)=>{var a;e.vis.data.indexPattern=t,null===(a=e.vis.data.searchSource)||void 0===a||a.setField("index",t)})(n,i),n.embeddableHandler.reload(),t.emit("updateEditor"))}};s(a.getState()),i=a.state$.subscribe(s)}return()=>{var e;null===(e=i)||void 0===e||e.unsubscribe()}}),[a,t,e.dataViews,n])},le=()=>{const{services:{application:e,executionContext:t,chrome:a,history:s,toastNotifications:r,stateTransferService:u,savedObjects:d,savedObjectsTagging:p,uiSettings:v,visualizeCapabilities:g,dashboardCapabilities:h,kbnUrlStateStorage:y,theme:I}}=Object(l.useKibana)(),{pathname:L}=Object(o.useLocation)(),z=Object(i.useRef)((()=>{})),A=v.get(w.SAVED_OBJECTS_LIMIT_SETTING),M=v.get(w.SAVED_OBJECTS_PER_PAGE_SETTING);Object(l.useExecutionContext)(t,{type:"application",page:"list"}),Object(i.useEffect)((()=>{"/new"===L?z.current=Object(x.a)({onClose:()=>{s.push(E.VisualizeConstants.LANDING_PAGE_PATH)}}):z.current()}),[s,L]),j()((()=>{u.clearEditorState(),a.setBreadcrumbs([{text:f.i18n.translate("visualizations.visualizeListingBreadcrumbsTitle",{defaultMessage:"Visualize Library"})}]),a.docTitle.change(f.i18n.translate("visualizations.listingPageTitle",{defaultMessage:"Visualize Library"}))})),m()((()=>z.current()));const N=Object(i.useCallback)((()=>{z.current=Object(x.a)()}),[]),V=Object(i.useCallback)((({editUrl:t,editApp:a})=>{a?e.navigateToApp(a,{path:t}):s.push(t)}),[e,s]),P=Object(i.useMemo)((()=>{return e=N,Object(_.jsx)(c.EuiEmptyPrompt,{iconType:"visualizeApp",title:Object(_.jsx)("h1",{id:"visualizeListingHeading"},Object(_.jsx)(b.FormattedMessage,{id:"visualizations.listing.createNew.title",defaultMessage:"Create your first visualization"})),body:Object(_.jsx)("p",null,Object(_.jsx)(b.FormattedMessage,{id:"visualizations.listing.createNew.description",defaultMessage:"You can create different visualizations based on your data."})),actions:Object(_.jsx)(c.EuiButton,{onClick:e,fill:!0,iconType:"plusInCircle","data-test-subj":"createVisualizationPromptButton"},Object(_.jsx)(b.FormattedMessage,{id:"visualizations.listing.createNew.createButtonLabel",defaultMessage:"Create new visualization"}))});var e}),[N]),k=Object(i.useMemo)((()=>((e,t,a)=>[{field:"title",name:f.i18n.translate("visualizations.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:!0,render:(a,{editApp:i,editUrl:n,title:s,error:r,type:o})=>r?a:Object(_.jsx)(l.RedirectAppLinks,{application:e,className:"visListingTable__titleLink"},Object(_.jsx)(c.EuiLink,{href:C(e,t,i,n),onClick:()=>{(e=>{const t=Object(S.r)();t&&e&&t.reportUiCounter(E.VISUALIZE_APP_NAME,T.METRIC_TYPE.CLICK,`${e}:add`)})("string"==typeof o?o:null==o?void 0:o.name)},"data-test-subj":`visListingTitleLink-${s.split(" ").join("-")}`},a))},{field:"typeTitle",name:f.i18n.translate("visualizations.listing.table.typeColumnName",{defaultMessage:"Type"}),sortable:!0,render:(e,t)=>{return t.error?Object(_.jsx)(c.EuiBadge,{iconType:"alert",color:"warning"},t.error):Object(_.jsx)("span",null,(e=>{let t;return t=e.image?Object(_.jsx)("img",{className:"visListingTable__typeImage","aria-hidden":"true",alt:"",src:e.image}):Object(_.jsx)(c.EuiIcon,{className:"visListingTable__typeIcon","aria-hidden":"true",type:e.icon||"empty",size:"m"}),t})(t),t.typeTitle,"beta"===(a=t).stage?Object(_.jsx)(c.EuiBetaBadge,{className:"visListingTable__betaIcon",label:"B",title:f.i18n.translate("visualizations.listing.betaTitle",{defaultMessage:"Beta"}),tooltipContent:f.i18n.translate("visualizations.listing.betaTooltip",{defaultMessage:"This visualization is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features"})}):"experimental"===a.stage?Object(_.jsx)(c.EuiBetaBadge,{className:"visListingTable__experimentalIcon",label:"E",title:f.i18n.translate("visualizations.listing.experimentalTitle",{defaultMessage:"Technical preview"}),tooltipContent:f.i18n.translate("visualizations.listing.experimentalTooltip",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})}):void 0);var a}},{field:"description",name:f.i18n.translate("visualizations.listing.table.descriptionColumnName",{defaultMessage:"Description"}),sortable:!0,render:(e,t)=>Object(_.jsx)("span",null,t.description)},...a?[a.ui.getTableColumnDefinition()]:[]])(e,y,p)),[e,y,p]),F=Object(i.useCallback)((e=>{let t,a=e;if(p){const i=p.ui.parseSearchQuery(e,{useName:!0});a=i.searchTerm,t=i.tagReferences}const i=v.get(w.VISUALIZE_ENABLE_LABS_SETTING);return Object(O.c)(d.client,Object(S.o)(),a,A,t).then((({total:e,hits:t})=>({total:e,hits:t.filter((e=>{var t;return i||"experimental"!==(null===(t=e.type)||void 0===t?void 0:t.stage)}))})))}),[A,v,p,d.client]),D=Object(i.useCallback)((async e=>{await Promise.all(e.map((e=>d.client.delete(e.savedObjectType,e.id)))).catch((e=>{r.addError(e,{title:f.i18n.translate("visualizations.visualizeListingDeleteErrorTitle",{defaultMessage:"Error deleting visualization"})})}))}),[d.client,r]),U=Object(i.useMemo)((()=>p?[p.ui.getSearchBarFilter({useName:!0})]:[]),[p]),B=Object(_.jsx)(b.FormattedMessage,{"data-test-subj":"visualize-dashboard-flow-prompt",id:"visualizations.visualizeListingDashboardFlowDescription",defaultMessage:"Building a dashboard? Create and add your visualizations right from the {dashboardApp}.",values:{dashboardApp:Object(_.jsx)(c.EuiLink,{className:"visListingCallout__link",onClick:t=>{t.preventDefault(),e.navigateToUrl(e.getUrlForApp("dashboards"))}},Object(_.jsx)(b.FormattedMessage,{id:"visualizations.visualizeListingDashboardAppName",defaultMessage:"Dashboard application"}))}});return Object(_.jsx)(l.TableListView,{headingId:"visualizeListingHeading",createItem:N,tableCaption:f.i18n.translate("visualizations.listing.table.listTitle",{defaultMessage:"Visualize Library"}),findItems:F,deleteItems:g.delete?D:void 0,editItem:g.save?V:void 0,tableColumns:k,listingLimit:A,initialPageSize:M,initialFilter:"",rowHeader:"title",emptyPrompt:P,entityName:f.i18n.translate("visualizations.listing.table.entityName",{defaultMessage:"visualization"}),entityNamePlural:f.i18n.translate("visualizations.listing.table.entityNamePlural",{defaultMessage:"visualizations"}),tableListTitle:f.i18n.translate("visualizations.listing.table.listTitle",{defaultMessage:"Visualize Library"}),toastNotifications:r,searchFilters:U,theme:I,application:e},h.createNew&&Object(_.jsx)(n.a.Fragment,null,Object(_.jsx)(c.EuiCallOut,{size:"s",title:B,iconType:"iInCircle"}),Object(_.jsx)(c.EuiSpacer,{size:"m"})))};a(75);var ce=a(66),ue=a(128),de=a.n(ue);const pe=({currentAppState:e,isChromeVisible:t,isEmbeddableRendered:a,hasUnsavedChanges:s,setHasUnsavedChanges:r,hasUnappliedChanges:o,originatingApp:c,setOriginatingApp:u,originatingPath:d,visInstance:p,stateContainer:v,visualizationIdFromUrl:g,embeddableId:b,onAppLeave:h})=>{var m;const{services:y}=Object(l.useKibana)(),{TopNavMenu:j}=y.navigation.ui,{setHeaderActionMenu:x,visualizeCapabilities:C}=y,{embeddableHandler:L,vis:N}=p,[V,P]=Object(i.useState)(),[U,B]=Object(i.useState)(),[H,G]=Object(i.useState)(!1),[K,Q]=de()("EDIT_IN_LENS_BADGE_VISIBLE",!1),J=Object(i.useCallback)((()=>{Q(!0)}),[Q]),W=Object(i.useCallback)((()=>{const e=L.openInspector();P(e)}),[L]),Y=Object(i.useCallback)((async()=>{y.data.search.session.start()}),[y.data.search.session]),Z=Object(i.useCallback)(((e,t)=>{!1===t&&Y()}),[Y]);Object(i.useEffect)((()=>{(async()=>{if(N.type.navigateToLens){const e=await N.type.navigateToLens(N.params);B(e)}})()}),[N.params,N.type]);const X=Boolean(N.type.navigateToLens&&U),ee=Object(i.useMemo)((()=>{if(a)return(({hasUnsavedChanges:e,setHasUnsavedChanges:t,openInspector:a,originatingApp:i,originatingPath:s,setOriginatingApp:r,hasUnappliedChanges:o,visInstance:l,stateContainer:c,visualizationIdFromUrl:u,stateTransfer:d,embeddableId:p,editInLensConfig:v,displayEditInLensItem:g,hideLensBadge:b,setNavigateToLens:h,showBadge:m},{data:y,application:j,chrome:x,overlays:C,history:L,share:N,setActiveUrl:V,toastNotifications:P,visualizeCapabilities:U,dashboardCapabilities:B,i18n:{Context:H},savedObjectsTagging:G,presentationUtil:K,usageCollection:Q,getKibanaVersion:J,savedObjects:W})=>{const{vis:Y,embeddableHandler:Z}=l,X=l.savedVis,ee=e=>{Q&&Q.reportUiCounter(null!=i?i:E.VISUALIZE_APP_NAME,T.METRIC_TYPE.CLICK,`${e}:save`)};async function te(e){var a;const n=!Boolean(X.id)||e.copyOnSave;c.transitions.setVis({title:X.title}),X.searchSourceFields=null===(a=Y.data.searchSource)||void 0===a?void 0:a.getSerializedFields(),X.visState=c.getState().vis,X.uiStateJSON=Y.uiState.toString(),t(!1);try{const t=await Object(O.f)(X,e,{savedObjectsClient:W.client,overlays:C,savedObjectsTagging:G});if(t)if(P.addSuccess({title:f.i18n.translate("visualizations.topNavMenu.saveVisualization.successNotificationText",{defaultMessage:"Saved '{visTitle}'",values:{visTitle:X.title}}),"data-test-subj":"saveVisualizationSuccess"}),x.recentlyAccessed.add(Object(w.getFullPath)(t),X.title,String(t)),i&&e.returnToOrigin||e.dashboardId){if(!p){const e=`${E.VisualizeConstants.EDIT_PATH}/${encodeURIComponent(t)}`;L.replace(e),V(e)}const a=i||"dashboards";let n;e.dashboardId?n="new"===e.dashboardId?"#/create":`#/view/${e.dashboardId}`:s&&(n=s),d?d.navigateToWithEmbeddablePackage(a,{state:{type:w.VISUALIZE_EMBEDDABLE_TYPE,input:{savedObjectId:t},embeddableId:e.copyOnSave?void 0:p,searchSessionId:y.search.session.getSessionId()},path:n}):j.navigateToApp(a,{path:n})}else r&&i&&n&&(r(void 0),d.clearEditorState(E.VisualizeConstants.APP_ID)),x.docTitle.change(X.lastSavedTitle),x.setBreadcrumbs(k({},X.lastSavedTitle)),t!==u&&L.replace({...L.location,pathname:`${E.VisualizeConstants.EDIT_PATH}/${t}`});return{id:t}}catch(e){return console.error(e),P.addDanger({title:f.i18n.translate("visualizations.topNavMenu.saveVisualization.failureNotificationText",{defaultMessage:"Error on saving '{visTitle}'",values:{visTitle:X.title}}),text:e.message,"data-test-subj":"saveVisualizationError"}),{error:e}}}const ae=!X.id&&i?f.i18n.translate("visualizations.topNavMenu.saveVisualizationToLibraryButtonLabel",{defaultMessage:"Save to library"}):i&&X.id?f.i18n.translate("visualizations.topNavMenu.saveVisualizationAsButtonLabel",{defaultMessage:"Save as"}):f.i18n.translate("visualizations.topNavMenu.saveVisualizationButtonLabel",{defaultMessage:"Save"}),ie=U.save||!i&&B.showWriteControls;return[...g?[{id:"goToLens",label:f.i18n.translate("visualizations.topNavMenu.goToLensButtonLabel",{defaultMessage:"Edit visualization in Lens"}),emphasize:!1,description:f.i18n.translate("visualizations.topNavMenu.goToLensButtonAriaLabel",{defaultMessage:"Go to Lens with your current configuration"}),className:"visNavItem__goToLens",disableButton:!v,testId:"visualizeEditInLensButton",...m&&{badge:{label:f.i18n.translate("visualizations.tonNavMenu.tryItBadgeText",{defaultMessage:"Try it"}),color:"accent"}},run:async()=>{const e={...v,savedObjectId:l.vis.id,embeddableId:p,vizEditorOriginatingAppUrl:R(L),originatingApp:i};v&&(b(),h(!0),Object(S.q)().getTrigger(D.b).exec(e))}}]:[],{id:"inspector",label:f.i18n.translate("visualizations.topNavMenu.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:f.i18n.translate("visualizations.topNavMenu.openInspectorButtonAriaLabel",{defaultMessage:"Open Inspector for visualization"}),testId:"openInspectorButton",disableButton:()=>!Z.hasInspector||!Z.hasInspector(),run:a,tooltip(){if(!Z.hasInspector||!Z.hasInspector())return f.i18n.translate("visualizations.topNavMenu.openInspectorDisabledButtonTooltip",{defaultMessage:"This visualization doesn't support any inspectors."})}},{id:"share",label:f.i18n.translate("visualizations.topNavMenu.shareVisualizationButtonLabel",{defaultMessage:"share"}),description:f.i18n.translate("visualizations.topNavMenu.shareVisualizationButtonAriaLabel",{defaultMessage:"Share Visualization"}),testId:"shareTopNavButton",run:t=>{if(N){var a,i,n,s,r,u;const d=c.getState(),p=Object(A.parse)(L.location.search),v={visId:null==X?void 0:X.id,filters:d.filters,refreshInterval:void 0,timeRange:y.query.timefilter.timefilter.getTime(),uiState:d.uiState,query:d.query,vis:d.vis,linked:d.linked,indexPattern:null!==(a=null===(i=l.savedSearch)||void 0===i||null===(n=i.searchSource)||void 0===n||null===(s=n.getField("index"))||void 0===s?void 0:s.id)&&void 0!==a?a:p.indexPattern,savedSearchId:null!==(r=null===(u=l.savedSearch)||void 0===u?void 0:u.id)&&void 0!==r?r:p.savedSearchId};N.toggleShareContextMenu({anchorElement:t,allowEmbed:!0,allowShortUrl:Boolean(U.createShortUrl),shareableUrl:Object(I.unhashUrl)(window.location.href),objectId:null==X?void 0:X.id,objectType:"visualization",sharingData:{title:(null==X?void 0:X.title)||f.i18n.translate("visualizations.reporting.defaultReportTitle",{defaultMessage:"Visualization [{date}]",values:{date:z()().toISOString(!0)}}),locatorParams:{id:F.a,version:J(),params:v}},isDirty:o||e,showPublicUrlSwitch:q})}},disableButton:!N||Boolean(!X.id&&i)},...i?[{id:"cancel",label:f.i18n.translate("visualizations.topNavMenu.cancelButtonLabel",{defaultMessage:"Cancel"}),emphasize:!1,description:f.i18n.translate("visualizations.topNavMenu.cancelButtonAriaLabel",{defaultMessage:"Return to the last app without saving changes"}),testId:"visualizeCancelAndReturnButton",tooltip(){if(o||e)return f.i18n.translate("visualizations.topNavMenu.cancelAndReturnButtonTooltip",{defaultMessage:"Discard your changes before finishing"})},run:async()=>{i&&j.navigateToApp(i)}}]:[],...ie?[{id:"save",iconType:i?void 0:"save",label:ae,emphasize:!i,description:f.i18n.translate("visualizations.topNavMenu.saveVisualizationButtonAriaLabel",{defaultMessage:"Save Visualization"}),testId:"visualizeSaveButton",disableButton:o,tooltip(){if(o)return f.i18n.translate("visualizations.topNavMenu.saveVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before saving"})},run:()=>{const e=async({newTitle:e,newCopyOnSave:t,isTitleDuplicateConfirmed:a,onTitleDuplicate:i,newDescription:n,returnToOrigin:r,dashboardId:o,addToLibrary:l})=>{const c=X.title;X.title=e,Z.updateInput({title:e}),X.description=n,G&&(X.tags=s);const u={confirmOverwrite:!1,isTitleDuplicateConfirmed:a,onTitleDuplicate:i,returnToOrigin:r,dashboardId:o||void 0,copyOnSave:t};if(o&&!l){const t=`${E.VisualizeConstants.LANDING_PAGE_PATH}`;L.replace(t),V(t);const a={input:{savedVis:{...Y.serialize(),title:e,description:n}},embeddableId:p,type:w.VISUALIZE_EMBEDDABLE_TYPE,searchSessionId:y.search.session.getSessionId()},i="new"===o?"#/create":`#/view/${o}`;return d.navigateToWithEmbeddablePackage("dashboards",{state:a,path:i}),{id:!0}}ee(Y.type.name);const v=await te(u);return v.id&&!v.error||(X.title=c),v};let t,a,s=[];G&&(s=X.tags||[],t=Object(_.jsx)(G.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:s,onTagsSelected:e=>{s=e}})),a=i?Object(_.jsx)(M.SavedObjectSaveModalOrigin,{documentInfo:X||{title:""},onSave:e,options:t,getAppNameFromId:d.getAppNameFromId,objectType:f.i18n.translate("visualizations.topNavMenu.saveVisualizationObjectType",{defaultMessage:"visualization"}),onClose:()=>{},originatingApp:i,returnToOriginSwitchLabel:i&&p?f.i18n.translate("visualizations.topNavMenu.updatePanel",{defaultMessage:"Update panel on {originatingAppName}",values:{originatingAppName:d.getAppNameFromId(i)}}):void 0}):Object(_.jsx)($,{documentInfo:{id:U.save?null==X?void 0:X.id:void 0,title:(null==X?void 0:X.title)||"",description:(null==X?void 0:X.description)||""},canSaveByReference:Boolean(U.save),onSave:e,tagOptions:t,objectType:f.i18n.translate("visualizations.topNavMenu.saveVisualizationObjectType",{defaultMessage:"visualization"}),onClose:()=>{}}),Object(M.showSaveModal)(a,H,i?n.a.Fragment:K.ContextProvider)}}]:[],...i?[{id:"saveAndReturn",label:f.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationButtonLabel",{defaultMessage:"Save and return"}),emphasize:!0,iconType:"checkInCircleFilled",description:f.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationButtonAriaLabel",{defaultMessage:"Finish editing visualization and return to the last app"}),testId:"visualizesaveAndReturnButton",disableButton:o,tooltip(){if(o)return f.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before finishing"})},run:async()=>(ee(Y.type.name),null!=X&&X.id?te({confirmOverwrite:!1,returnToOrigin:!0}):(()=>{if(!i)return;const e={input:{savedVis:Y.serialize()},embeddableId:p,type:w.VISUALIZE_EMBEDDABLE_TYPE,searchSessionId:y.search.session.getSessionId()};d.navigateToWithEmbeddablePackage(i,{state:e,path:s})})())}]:[]]})({hasUnsavedChanges:s,setHasUnsavedChanges:r,hasUnappliedChanges:o,openInspector:W,originatingApp:c,setOriginatingApp:u,originatingPath:d,visInstance:p,stateContainer:v,visualizationIdFromUrl:g,stateTransfer:y.stateTransferService,embeddableId:b,editInLensConfig:U,displayEditInLensItem:X,hideLensBadge:J,setNavigateToLens:G,showBadge:!K&&X},y)}),[a,s,r,o,W,c,u,d,p,v,g,y,b,U,X,J,K]),[te,ae]=Object(i.useState)([]),ie=()=>{const e=!N.data.indexPattern||!!N.data.indexPattern.timeFieldName;return N.type.options.showTimePicker&&e},ne=N.type.options.showFilterBar,se=N.type.requiresSearch&&N.type.options.showQueryBar&&N.type.options.showQueryInput;Object(i.useEffect)((()=>()=>{V&&V.close()}),[V]),Object(i.useEffect)((()=>(h((e=>!c||!o&&!s||y.stateTransferService.isTransferInProgress||H?e.default():e.confirm(f.i18n.translate("visualizations.confirmModal.confirmTextDescription",{defaultMessage:"Leave Visualize editor with unsaved changes?"}),f.i18n.translate("visualizations.confirmModal.title",{defaultMessage:"Unsaved changes"})))),()=>{h((e=>e.default()))})),[h,c,s,o,C.save,y.stateTransferService.isTransferInProgress,H]),Object(i.useEffect)((()=>{(async()=>{let e;if(N.data.indexPattern?e=[N.data.indexPattern]:N.type.getUsedIndexPattern&&(e=await N.type.getUsedIndexPattern(N.params)),!e||!e.length){const t=await y.dataViews.getDefault();t&&(e=[t])}e&&ae(e)})()}),[y.dataViews,N.data.indexPattern,N.params,N.type]),Object(i.useEffect)((()=>{const e=v.state$.subscribe((async({dataView:e})=>{if(e&&p.vis.data.indexPattern&&e!==p.vis.data.indexPattern.id){const t=await y.dataViews.get(e);t&&ae([t])}}));return()=>{e.unsubscribe()}}),[y.dataViews,v.state$,p.vis.data.indexPattern]),Object(i.useEffect)((()=>{const e=y.data.query.timefilter.timefilter.getAutoRefreshFetch$().subscribe((async e=>{try{await Y()}finally{e()}}));return()=>{e.unsubscribe()}}),[y.data.query.timefilter.timefilter,Y]);const re=Boolean((null===(m=N.type.editorConfig)||void 0===m?void 0:m.enableDataViewChange)&&!N.data.savedSearchId&&N.data.indexPattern&&te.length),oe=Object(i.useCallback)((async e=>{e&&v.transitions.updateDataView(e)}),[v.transitions]);return t?Object(_.jsx)(j,{appName:E.VISUALIZE_APP_NAME,config:ee,setMenuMountPoint:x,onQuerySubmit:Z,savedQueryId:e.savedQuery,onSavedQueryIdChange:v.transitions.updateSavedQuery,indexPatterns:te,screenTitle:N.title,showAutoRefreshOnly:!ie(),showDatePicker:ie(),showFilterBar:ne,showQueryInput:se,showSaveQuery:Boolean(y.visualizeCapabilities.saveQuery),dataViewPickerComponentProps:re&&N.data.indexPattern?{currentDataViewId:N.data.indexPattern.id,trigger:{label:N.data.indexPattern.title},isMissingCurrent:(le=N.data.indexPattern,!Object.keys(null!==(ce=le.getOriginalSavedObjectBody())&&void 0!==ce?ce:{}).length),onChangeDataView:oe,showNewMenuTour:!1}:void 0,showSearchBar:!0,useDefaultBehaviors:!0}):ne?Object(_.jsx)(j,{appName:E.VISUALIZE_APP_NAME,setMenuMountPoint:x,indexPatterns:te,showSearchBar:!0,showSaveQuery:!1,showDatePicker:!1,showQueryInput:!1}):null;var le,ce},ve=Object(i.memo)(pe),ge=()=>{const e=Object(_.jsx)(b.FormattedMessage,{id:"visualizations.experimentalVisInfoTitle",defaultMessage:"This functionality is in technical preview."}),t=Object(_.jsx)(b.FormattedMessage,{id:"visualizations.experimentalVisInfoText",defaultMessage:"It may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but features in technical preview are not subject to the support SLA of official GA features. For feedback, please create an issue in {githubLink}.",values:{githubLink:Object(_.jsx)(c.EuiLink,{external:!0,href:"https://github.com/elastic/kibana/issues/new/choose",target:"_blank"},"GitHub")}});return Object(_.jsx)(c.EuiCallOut,{className:"hide-for-sharing","data-test-subj":"experimentalVisInfo",size:"s",title:e,iconType:"beaker"},t)},fe=Object(i.memo)(ge),be={heatmap:"heatmap",gauge:"gauge"},he={pie:"pie",timelion:"timelion",controls:"input_control_vis"},me={[be.heatmap]:"visualization:visualize:legacyHeatmapChartsLibrary",[be.gauge]:"visualization:visualize:legacyGaugeChartsLibrary",[he.pie]:"visualization:visualize:legacyPieChartsLibrary",[he.timelion]:"timelion:legacyChartsLibrary"},ye=({canEditAdvancedSettings:e,advancedSettingsLink:t,mode:a="old"})=>Object(_.jsx)(n.a.Fragment,null,e&&Object(_.jsx)(b.FormattedMessage,{id:"visualizations.newChart.conditionalMessage.newLibrary",defaultMessage:"Switch to the {type} library in {link}",values:{link:Object(_.jsx)(c.EuiLink,{href:t},Object(_.jsx)(b.FormattedMessage,{id:"visualizations.newChart.conditionalMessage.advancedSettingsLink",defaultMessage:"Advanced Settings."})),type:"old"===a?f.i18n.translate("visualizations.newChart.libraryMode.old",{defaultMessage:"old"}):f.i18n.translate("visualizations.newChart.libraryMode.new",{defaultMessage:"new"})}})),je=({canEditAdvancedSettings:e})=>Object(_.jsx)(n.a.Fragment,null,!e&&Object(_.jsx)(b.FormattedMessage,{id:"visualizations.legacyCharts.conditionalMessage.noPermissions",defaultMessage:"Contact your system administrator to switch to the old library."})),Oe={[be.heatmap]:e=>Object(_.jsx)(b.FormattedMessage,{id:"visualizations.newHeatmapChart.notificationMessage",defaultMessage:"The new heatmap charts library does not yet support split chart aggregation. {conditionalMessage}",values:{conditionalMessage:Object(_.jsx)(n.a.Fragment,null,Object(_.jsx)(ye,e),Object(_.jsx)(je,e))}}),[be.gauge]:e=>Object(_.jsx)(b.FormattedMessage,{id:"visualizations.newGaugeChart.notificationMessage",defaultMessage:"The new gauge charts library does not yet support split chart aggregation. {conditionalMessage}",values:{conditionalMessage:Object(_.jsx)(n.a.Fragment,null,Object(_.jsx)(ye,e),Object(_.jsx)(je,e))}}),[he.pie]:e=>Object(_.jsx)(b.FormattedMessage,{id:"visualizations.oldPieChart.notificationMessage",defaultMessage:"You are using the legacy charts library, which will be removed in a future version. {conditionalMessage}",values:{conditionalMessage:Object(_.jsx)(n.a.Fragment,null,Object(_.jsx)(ye,e),Object(_.jsx)(je,e))}}),[he.timelion]:e=>Object(_.jsx)(b.FormattedMessage,{id:"visualizations.oldTimelionChart.notificationMessage",defaultMessage:"You are using the legacy charts library, which will be removed in 8.4. {conditionalMessage}",values:{conditionalMessage:Object(_.jsx)(n.a.Fragment,null,Object(_.jsx)(ye,e),Object(_.jsx)(je,e))}}),[he.controls]:e=>Object(_.jsx)(b.FormattedMessage,{id:"visualizations.controls.notificationMessage",defaultMessage:"Input controls are deprecated and will be removed in a future release. Use the new Controls to filter and interact with your dashboard data. "})},xe=({chartType:e,chartConfigToken:t,mode:a})=>{const{services:i}=Object(l.useKibana)(),n=i.application.capabilities.advancedSettings.save,s=i.application.getUrlForApp("management",{path:`/kibana/settings?query=${t}`}),r=Oe[e];return Object(_.jsx)(c.EuiCallOut,{"data-test-subj":"vizChartWarning",title:Object(_.jsx)(r,{advancedSettingsLink:s,canEditAdvancedSettings:n,mode:a}),iconType:"alert",color:"warning",size:"s"})},Se=({visInstance:e,appState:t,currentAppState:a,isChromeVisible:n,hasUnsavedChanges:s,setHasUnsavedChanges:r,hasUnappliedChanges:o,isEmbeddableRendered:u,onAppLeave:d,originatingApp:p,originatingPath:v,setOriginatingApp:g,visualizationIdFromUrl:h,embeddableId:m,visEditorRef:y})=>{var j,O,x,E,T,I,C,L,z,A,M,N,V;const{services:P}=Object(l.useKibana)();Object(i.useEffect)((()=>{!async function(){const t=null==e?void 0:e.savedVis.sharingSavedObjectProps;if(P.spaces&&"aliasMatch"===(null==t?void 0:t.outcome)){var a;const i=null==t?void 0:t.aliasTargetId,n=`${Object(w.urlFor)(i)}${P.history.location.search}`;await P.spaces.ui.redirectLegacyUrl({path:n,aliasPurpose:t.aliasPurpose,objectNoun:f.i18n.translate("visualizations.legacyUrlConflict.objectNoun",{defaultMessage:"{visName} visualization",values:{visName:null==e||null===(a=e.vis)||void 0===a?void 0:a.type.title}})})}}()}),[null==e?void 0:e.savedVis.sharingSavedObjectProps,null==e||null===(j=e.vis)||void 0===j?void 0:j.type.title,P]);const k=Object(i.useCallback)((()=>{const t=null==e?void 0:e.savedVis.id,a=null==e?void 0:e.savedVis.sharingSavedObjectProps;if(P.spaces&&"conflict"===(null==a?void 0:a.outcome)&&t){var i;const n=null==a?void 0:a.aliasTargetId,s=`${Object(w.urlFor)(n)}${P.history.location.search}`;return P.spaces.ui.components.getLegacyUrlConflict({objectNoun:f.i18n.translate("visualizations.legacyUrlConflict.objectNoun",{defaultMessage:"{visName} visualization",values:{visName:null==e||null===(i=e.vis)||void 0===i?void 0:i.type.title}}),currentObjectId:t,otherObjectId:n,otherObjectPath:s})}return null}),[null==e?void 0:e.savedVis,P,null==e||null===(O=e.vis)||void 0===O?void 0:O.type.title]),F=null==e?void 0:e.vis.type.name,D=((e,t)=>{var a;const i=()=>null==t?void 0:t.aggs.some((e=>"split"===e.schema));return(null!==(a={[be.heatmap]:i,[be.gauge]:()=>null==t?void 0:t.aggs.some((e=>"group"===e.schema))}[e])&&void 0!==a?a:i)()})(F,null==e||null===(x=e.vis)||void 0===x||null===(E=x.data)||void 0===E?void 0:E.aggs),U=Object.values(be),B=!!F&&U.includes(F),R=Object.values(he),$=!!F&&R.includes(F),q=F&&(B||$)?me[F]:void 0,H=!q||Object(S.p)().get(q);return Object(_.jsx)("div",{className:`app-container visEditor visEditor--${null==e?void 0:e.vis.type.name}`},e&&t&&a&&Object(_.jsx)(ve,{currentAppState:a,hasUnsavedChanges:s,setHasUnsavedChanges:r,isChromeVisible:n,isEmbeddableRendered:u,hasUnappliedChanges:o,originatingApp:p,originatingPath:v,setOriginatingApp:g,visInstance:e,stateContainer:t,visualizationIdFromUrl:h,embeddableId:m,onAppLeave:d}),"experimental"===(null==e||null===(T=e.vis)||void 0===T||null===(I=T.type)||void 0===I?void 0:I.stage)&&!(null!=e&&null!==(C=e.vis)&&void 0!==C&&null!==(L=C.type)&&void 0!==L&&L.isDeprecated)&&Object(_.jsx)(fe,null),!H&&D&&B&&q&&F&&Object(_.jsx)(xe,{chartType:F,chartConfigToken:q}),(H&&$&&q&&F||(null==e||null===(z=e.vis)||void 0===z||null===(A=z.type)||void 0===A?void 0:A.isDeprecated))&&Object(_.jsx)(xe,{chartType:F,chartConfigToken:null!=q?q:void 0,mode:"new"}),null==e||null===(M=e.vis)||void 0===M||null===(N=M.type)||void 0===N||null===(V=N.getInfoMessage)||void 0===V?void 0:V.call(N,e.vis),k(),e&&Object(_.jsx)(c.EuiScreenReaderOnly,null,Object(_.jsx)("h1",null,"savedVis"in e&&e.savedVis.id?Object(_.jsx)(b.FormattedMessage,{id:"visualizations.pageHeading",defaultMessage:"{chartName} {chartType} visualization",values:{chartName:e.savedVis.title,chartType:e.vis.type.title}}):Object(_.jsx)(b.FormattedMessage,{id:"visualizations.byValue_pageHeading",defaultMessage:"Visualization of type {chartType} embedded into {originatingApp} app",values:{chartType:e.vis.type.title,originatingApp:p||"dashboards"}}))),Object(_.jsx)("div",{className:n?"visEditor__content":"visualize",ref:y}))},we=({onAppLeave:e})=>{const{id:t}=Object(o.useParams)(),[a,n]=Object(i.useState)(),[s,r]=Object(i.useState)(),[c,u]=Object(i.useState)(),{services:d}=Object(l.useKibana)(),[p]=Object(i.useState)(new ce.EventEmitter),[v,g]=Object(i.useState)(!t),b=H(d.chrome),{savedVisInstance:h,visEditorRef:m,visEditorController:y}=((e,t,a,n,s)=>{const[r,o]=Object(i.useState)({}),l=Object(i.useRef)(null),c=Object(i.useRef)("");return Object(i.useEffect)((()=>{var i;const{chrome:u,history:d,toastNotifications:p,stateTransferService:v,visEditorsRegistry:g,application:{navigateToApp:b}}=e,h=async()=>{try{let r;if("/create"===d.location.pathname){const t=Object(A.parse)(d.location.search),a=Object(S.o)().all().find((({name:e})=>e===t.type));if(!a)throw new Error(f.i18n.translate("visualizations.createVisualization.noVisTypeErrorMessage",{defaultMessage:"You must provide a valid visualization type"}));const i=a.requiresSearch&&a.options.showIndexSelection,n=t.indexPattern||t.savedSearchId;if(i&&!n)throw new Error(f.i18n.translate("visualizations.createVisualization.noIndexPatternOrSavedSearchIdErrorMessage",{defaultMessage:"You must provide either an indexPattern or a savedSearchId"}));r=await Z(e,t)}else r=await Z(e,s);const{embeddableHandler:c,savedVis:p,vis:h}=r,m=n?v.getAppNameFromId(n):void 0,y=n?()=>b(n):void 0;let j;if(p.id?(u.setBreadcrumbs(k({originatingAppName:m,redirectToOrigin:y},p.title)),u.docTitle.change(p.title)):u.setBreadcrumbs(function({byValue:e,originatingAppName:t,redirectToOrigin:a}){return[...t?[{text:t,onClick:a}]:[],...e?[]:P(),{text:f.i18n.translate("visualizations.editor.createBreadcrumb",{defaultMessage:"Create"})}]}({byValue:Boolean(n),originatingAppName:m,redirectToOrigin:y})),l.current)if(a){var i;const e=g.get(null===(i=h.type.editorConfig)||void 0===i?void 0:i.editor);e&&(j=new e(l.current,h,t,c))}else c.render(l.current);o({savedVisInstance:r,visEditorController:j})}catch(t){try{((e,t,a)=>{const{history:i,setActiveUrl:n,toastNotifications:s,http:{basePath:r},application:{navigateToApp:o}}=e,l={app:"management",path:`kibana/objects/savedVisualizations/${a}`};Object(I.redirectWhenMissing)({history:i,navigateToApp:o,toastNotifications:s,basePath:r,mapping:{visualization:E.VisualizeConstants.LANDING_PAGE_PATH,search:l,"index-pattern":l,"index-pattern-field":l},onBeforeRedirect(){n(E.VisualizeConstants.LANDING_PAGE_PATH)},theme:e.theme})(t)})(e,t,s)}catch(e){p.addWarning({title:f.i18n.translate("visualizations.createVisualization.failedToLoadErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:e.message}),d.replace(E.VisualizeConstants.LANDING_PAGE_PATH)}}};void 0!==a&&(c.current?s&&c.current!==s&&(null===(i=r.savedVisInstance)||void 0===i?void 0:i.savedVis.id)!==s&&(c.current=s,o({}),h()):(c.current=s||"new",h()))}),[e,t,n,a,s,r.savedVisInstance,r.visEditorController]),Object(i.useEffect)((()=>()=>{var e;r.visEditorController?r.visEditorController.destroy():null!==(e=r.savedVisInstance)&&void 0!==e&&e.embeddableHandler&&r.savedVisInstance.embeddableHandler.destroy()}),[r]),{...r,visEditorRef:l}})(d,p,b,a,t),j=(null==h?void 0:h.vis.type.title.toLowerCase().replace(" ","_"))||"";Object(l.useExecutionContext)(d.executionContext,{type:"application",page:"editor"+(j?`:${j}`:""),id:t||"new"});const{appState:O,hasUnappliedChanges:x}=se(d,p,h),{isEmbeddableRendered:w,currentAppState:T}=K(d,p,g,O,h,y);return re(d,p,O,h),oe(d,p,O,h),Object(i.useEffect)((()=>{const{stateTransferService:e,data:t}=d,{originatingApp:a,searchSessionId:i,embeddableId:s,originatingPath:o}=e.getIncomingEditorState(E.VisualizeConstants.APP_ID)||{};i?t.search.session.continue(i):t.search.session.start(),u(s),n(a),r(o)}),[d]),Object(i.useEffect)((()=>()=>{p.removeAllListeners()}),[p,d]),Object(_.jsx)(Se,{visInstance:h,appState:O,currentAppState:T,isChromeVisible:b,hasUnsavedChanges:v,hasUnappliedChanges:x,isEmbeddableRendered:w,originatingApp:a,setOriginatingApp:n,originatingPath:s,visualizationIdFromUrl:t,setHasUnsavedChanges:g,visEditorRef:m,onAppLeave:e,embeddableId:c})};let Ee;const Te=()=>{const{services:e}=Object(l.useKibana)();return Object(i.useEffect)((()=>{e.restorePreviousUrl();const{navigated:t}=e.urlForwarding.navigateToLegacyKibanaUrl(e.history.location.pathname+e.history.location.search);if(!t){const t=f.i18n.translate("visualizations.noMatchRoute.bannerTitleText",{defaultMessage:"Page not found"});Ee=e.overlays.banners.replace(Ee,Object(l.toMountPoint)(Object(_.jsx)(l.KibanaThemeProvider,{theme$:e.theme.theme$},Object(_.jsx)(c.EuiCallOut,{color:"warning",iconType:"iInCircle",title:t},Object(_.jsx)("p",null,Object(_.jsx)(b.FormattedMessage,{id:"visualizations.noMatchRoute.bannerText",defaultMessage:"Visualize application doesn't recognize this route: {route}.",values:{route:Object(_.jsx)(c.EuiLink,{href:window.location.href},e.history.location.pathname)}})))))),setTimeout((()=>{e.overlays.banners.remove(Ee)}),15e3),e.history.replace(E.VisualizeConstants.LANDING_PAGE_PATH)}}),[e]),null},Ie=({onAppLeave:e})=>{const[t,a]=Object(i.useState)(),[n,s]=Object(i.useState)(),{services:r}=Object(l.useKibana)(),[o]=Object(i.useState)(new ce.EventEmitter),[c,u]=Object(i.useState)(!1),[d,p]=Object(i.useState)(),[v,g]=Object(i.useState)();Object(i.useEffect)((()=>{const{stateTransferService:e,history:t,data:i}=r,{originatingApp:n,embeddableId:o,valueInput:l,searchSessionId:c,originatingPath:u}=e.getIncomingEditorState(E.VisualizeConstants.APP_ID)||{};s(u),a(n),g(l),p(o),l||t.replace(E.VisualizeConstants.LANDING_PAGE_PATH),c?i.search.session.continue(c):i.search.session.start()}),[r]);const f=H(r.chrome),{byValueVisInstance:b,visEditorRef:h,visEditorController:m}=((e,t,a,n,s,r)=>{const[o,l]=Object(i.useState)({}),c=Object(i.useRef)(null),u=Object(i.useRef)(!1);return Object(i.useEffect)((()=>{const{chrome:a,application:{navigateToApp:i},stateTransferService:o,visEditorsRegistry:d}=e;(async()=>{var p;if(!n||u.current||!c.current)return;const v=await(async(e,t)=>{const{data:a,savedObjects:i,spaces:n,savedObjectsTagging:s}=e,r=t.savedVis,o=await Object(O.e)({search:a.search,savedObjectsClient:i.client,dataViews:a.dataViews,spaces:n,savedObjectsTagging:s});r.uiState&&0!==Object.keys(r.uiState).length&&(o.uiStateJSON=JSON.stringify(r.uiState));let l=await Object(W.a)(r.type,Object(G.cloneDeep)(r));if(l.type.setup)try{l=await l.type.setup(l)}catch{}const{embeddableHandler:c,savedSearch:u}=await Y(l,e);return{vis:l,savedVis:o,embeddableHandler:c,savedSearch:u}})(e,n),{embeddableHandler:g,vis:f}=v;let b;const h=d.get(null===(p=f.type.editorConfig)||void 0===p?void 0:p.editor);h&&(b=new h(c.current,f,t,g));const m=s?o.getAppNameFromId(s):void 0,y=s?()=>i(s,{path:r}):void 0;null==a||a.setBreadcrumbs(k({byValue:!0,originatingAppName:m,redirectToOrigin:y})),u.current=!0,l({byValueVisInstance:v,visEditorController:b})})()}),[t,a,e,o.byValueVisInstance,o.visEditorController,n,s,r]),Object(i.useEffect)((()=>()=>{var e;o.visEditorController?o.visEditorController.destroy():null!==(e=o.byValueVisInstance)&&void 0!==e&&e.embeddableHandler&&o.byValueVisInstance.embeddableHandler.destroy()}),[o]),{...o,visEditorRef:c}})(r,o,f,v,t,n),{appState:y,hasUnappliedChanges:j}=se(r,o,b),{isEmbeddableRendered:x,currentAppState:S}=K(r,o,u,y,b,m);return re(r,o,y,b),oe(r,o,y,b),Object(i.useEffect)((()=>()=>{o.removeAllListeners()}),[o]),Object(_.jsx)(Se,{visInstance:b,appState:y,currentAppState:S,isChromeVisible:f,hasUnsavedChanges:c,hasUnappliedChanges:j,isEmbeddableRendered:x,originatingApp:t,setOriginatingApp:a,originatingPath:n,setHasUnsavedChanges:u,visEditorRef:h,embeddableId:d,onAppLeave:e})},Ce=({core:e,dataViews:t,dataViewEditor:a,onDataViewCreated:i})=>{const n={coreStart:e,dataViews:t,dataViewEditor:a};return Object(_.jsx)(p.a,n,Object(_.jsx)(g,{onDataViewCreated:i}),";")},_e=({onAppLeave:e})=>{const{services:{data:{query:t,dataViews:a},core:n,kbnUrlStateStorage:s,dataViewEditor:r}}=Object(l.useKibana)(),{pathname:d}=Object(o.useLocation)(),[p,v]=Object(i.useState)(!1),[g,f]=Object(i.useState)(!0),b=Object(i.useCallback)((e=>{e&&v(!1)}),[]);return Object(i.useEffect)((()=>{const{stop:e}=Object(u.syncQueryStateWithUrl)(t,s);return()=>e()}),[t,s,d]),Object(i.useEffect)((()=>{(async()=>{if(await a.hasData.hasUserDataView().catch((()=>!1)))return await a.getDefaultDataView()||v(!0),void f(!1);v(!0),f(!1)})()}),[a]),g?Object(_.jsx)("div",{className:"visAppLoadingWrapper"},Object(_.jsx)(c.EuiLoadingSpinner,{size:"xl"})):p?Object(_.jsx)(Ce,{core:n,dataViewEditor:r,dataViews:a,onDataViewCreated:b}):Object(_.jsx)(o.Switch,null,Object(_.jsx)(o.Route,{exact:!0,path:`${E.VisualizeConstants.EDIT_BY_VALUE_PATH}`},Object(_.jsx)(Ie,{onAppLeave:e})),Object(_.jsx)(o.Route,{path:[E.VisualizeConstants.CREATE_PATH,`${E.VisualizeConstants.EDIT_PATH}/:id`]},Object(_.jsx)(we,{onAppLeave:e})),Object(_.jsx)(o.Route,{exact:!0,path:[E.VisualizeConstants.LANDING_PAGE_PATH,E.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH]},Object(_.jsx)(le,null)),Object(_.jsx)(Te,null))},Le=({element:e,onAppLeave:t},a)=>{var i,n;i=a.chrome,n=a.docLinks,i.setHelpExtension({appName:f.i18n.translate("visualizations.helpMenu.appName",{defaultMessage:"Visualize Library"}),links:[{linkType:"documentation",href:`${n.links.visualize.guide}`}]}),a.visualizeCapabilities.save||(e=>{e.setBadge({text:f.i18n.translate("visualizations.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:f.i18n.translate("visualizations.badge.readOnly.tooltip",{defaultMessage:"Unable to save visualizations to the library"}),iconType:"glasses"})})(a.chrome);const s=Object(_.jsx)(l.KibanaThemeProvider,{theme$:a.theme.theme$},Object(_.jsx)(o.Router,{history:a.history},Object(_.jsx)(l.KibanaContextProvider,{services:a},Object(_.jsx)(a.presentationUtil.ContextProvider,null,Object(_.jsx)(a.i18n.Context,null,Object(_.jsx)(_e,{onAppLeave:t}))))));return r.a.render(s,e),()=>r.a.unmountComponentAtNode(e)}},57:function(e,t,a){"use strict";var i,n=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function r(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},i=[],n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],c=a[l]||0,u="".concat(l," ").concat(c);a[l]=c+1;var d=r(u),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(p)):s.push({identifier:u,updater:f(p,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=a.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=n(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,a,i){var n=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var s=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function p(e,t,a){var i=a.css,n=a.media,s=a.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,g=0;function f(e,t){var a,i,n;if(t.singleton){var s=g++;a=v||(v=l(t)),i=d.bind(null,a,s,!1),n=d.bind(null,a,s,!0)}else a=l(t),i=p.bind(null,a,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var n=r(a[i]);s[n].references--}for(var l=o(e,t),c=0;c<a.length;c++){var u=r(a[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}a=l}}}},58:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,i,n,s=e[1]||"",r=e[3];if(!r)return s;if(t&&"function"==typeof btoa){var o=(a=r,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(n," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[s].concat(l).concat([o]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(n[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&n[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},59:function(e,t,a){e.exports=a(38)(6)},60:function(e,t,a){e.exports=a(38)(3)},63:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return p}));var i=a(9),n=a.n(i),s=a(10),r=a(4),o={name:"1azakc",styles:"text-align:center"},l=function(){var e=o;return Object(r.jsx)("div",{css:e},Object(r.jsx)(s.EuiLoadingSpinner,null))},c=a(60),u=a.n(c),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(r.jsx)(l,null);return n.a.forwardRef((function(a,n){return Object(r.jsx)(s.EuiErrorBoundary,null,Object(r.jsx)(i.Suspense,{fallback:t},Object(r.jsx)(e,u()({},a,{ref:n}))))}))},p=function(e){return e.metaKey||e.altKey||e.ctrlKey||e.shiftKey},v=function(e,t){var a=e;do{var i,n;if("a"===(null===(i=a)||void 0===i?void 0:i.tagName.toLowerCase()))return a;var s=null===(n=a)||void 0===n?void 0:n.parentElement;if(!s||s===document.body||s===t)break;a=s}while(parent||parent!==document.body||parent!==t)}},64:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var i=a(59),n=a.n(i),s=a(9),r=a.n(s),o=a(4),l=["children"],c=r.a.createContext(null),u=function(e){var t,a=e.children,i=n()(e,l),s=i.coreStart,r=i.dataViewEditor,u=i.dataViews,d={addBasePath:s.http.basePath.prepend,canAccessFleet:s.application.capabilities.navLinks.integrations,canCreateNewDataView:r.userPermissions.editDataView(),currentAppId$:s.application.currentAppId$,dataViewsDocLink:null===(t=s.docLinks.links.indexPatterns)||void 0===t?void 0:t.introduction,hasDataView:u.hasData.hasDataView,hasESData:u.hasData.hasESData,hasUserDataView:u.hasData.hasUserDataView,kibanaGuideDocLink:s.docLinks.links.kibana.guide,navigateToUrl:s.application.navigateToUrl,openDataViewEditor:r.openEditor,setIsFullscreen:function(e){return s.chrome.setIsVisible(e)}};return Object(o.jsx)(c.Provider,{value:d},a)};function d(){var e=Object(s.useContext)(c);if(!e)throw new Error("AnalyticsNoDataPageContext is missing.  Ensure your component or React root is wrapped with AnalyticsNoDataPageContext.");return e}},65:function(e,t,a){"use strict";const i=a(71),n=a(72),s=a(73);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=a):i[e]=a};case"bracket":return(e,a,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],a):i[e]=[a]:i[e]=a};case"comma":case"separator":return(t,a,i)=>{const n="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);i[t]=n};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const n of e.split("&")){let[e,r]=s(t.decode?n.replace(/\+/g," "):n,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),a(l(e,t),r,i)}for(const e of Object.keys(i)){const a=i[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else i[e]=p(a,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const a=i[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=v,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],i=function(e){switch(e.arrayFormat){case"index":return t=>(a,i)=>{const n=a.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,[o(t,e),"[",n,"]"].join("")]:[...a,[o(t,e),"[",o(n,e),"]=",o(i,e)].join("")]};case"bracket":return t=>(a,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(i,e)].join("")];case"comma":case"separator":return t=>(a,i)=>null==i||0===i.length?a:0===a.length?[[o(t,e),"=",o(i,e)].join("")]:[[a,o(i,e)].join(e.arrayFormatSeparator)];default:return t=>(a,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,o(t,e)]:[...a,[o(t,e),"=",o(i,e)].join("")]}}(t),n={};for(const t of Object.keys(e))a(t)||(n[t]=e[t]);const s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map((a=>{const n=e[a];return void 0===n?"":null===n?o(a,t):Array.isArray(n)?n.reduce(i(a),[]).join("&"):o(a,t)+"="+o(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,i]=s(e,"#");return Object.assign({url:a.split("?")[0]||"",query:v(d(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const i=u(e.url).split("?")[0]||"",n=t.extract(e.url),s=t.parse(n,{sort:!1}),r=Object.assign(s,e.query);let l=t.stringify(r,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${i}${l}${c}`}},66:function(e,t,a){"use strict";var i,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(a,i){function n(a){e.removeListener(t,s),i(a)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),a([].slice.call(arguments))}h(e,t,s,{once:!0}),"error"!==t&&function(e,t,a){"function"==typeof e.on&&h(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,a,i){var n,s,r,o;if(c(a),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),s=e._events),r=s[t]),void 0===r)r=s[t]=a,++e._eventsCount;else if("function"==typeof r?r=s[t]=i?[a,r]:[r,a]:i?r.unshift(a):r.push(a),(n=u(e))>0&&r.length>n&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,o=l,console&&console.warn&&console.warn(o)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(e,t,a){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},n=p.bind(i);return n.listener=a,i.wrapFn=n,n}function g(e,t,a){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?a?[n.listener||n]:[n]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(n):b(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function b(e,t){for(var a=new Array(t),i=0;i<t;++i)a[i]=e[i];return a}function h(e,t,a,i){if("function"==typeof e.on)i.once?e.once(t,a):e.on(t,a);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(s){i.once&&e.removeEventListener(t,n),a(s)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var l=n[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else{var c=l.length,u=b(l,c);for(a=0;a<c;++a)s(u[a],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,v(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,v(this,e,t)),this},o.prototype.removeListener=function(e,t){var a,i,n,s,r;if(c(t),void 0===(i=this._events))return this;if(void 0===(a=i[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(n=-1,s=a.length-1;s>=0;s--)if(a[s]===t||a[s].listener===t){r=a[s].listener,n=s;break}if(n<0)return this;0===n?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,n),1===a.length&&(i[e]=a[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,a,i;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var n,s=Object.keys(a);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return g(this,e,!0)},o.prototype.rawListeners=function(e){return g(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},71:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},72:function(e,t,a){"use strict";var i="%[a-f0-9]{2}",n=new RegExp(i,"gi"),s=new RegExp("("+i+")+","gi");function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(a),r(i))}function o(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n),a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},a=s.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var i=o(a[0]);i!==a[0]&&(t[a[0]]=i)}a=s.exec(e)}t["%C2"]="";for(var n=Object.keys(t),r=0;r<n.length;r++){var l=n[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},73:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},75:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(124);case"v8light":return a(126)}},92:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(9);t.default=function(e){i.useEffect(e,[])}}}]);