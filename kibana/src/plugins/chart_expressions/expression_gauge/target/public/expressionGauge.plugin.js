!function(e){function t(t){for(var n,r,s=t[0],o=t[1],i=0,l=[];i<s.length;i++)r=s[i],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);l.length;)l.shift()()}var n={},a={0:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=s);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=function(e){return r.p+"expressionGauge.chunk."+e+".js"}(e);var u=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,n[1](u)}a[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var s=window.expressionGauge_bundle_jsonpfunction=window.expressionGauge_bundle_jsonpfunction||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var u=o;r(r.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u}));const a="gauge",r={HORIZONTAL_BULLET:"horizontalBullet",VERTICAL_BULLET:"verticalBullet",ARC:"arc",CIRCLE:"circle"},s={HIDDEN:"hidden",AUTO:"auto",BANDS:"bands"},o={AUTO:"auto",CUSTOM:"custom",NONE:"none"},i={AUTO:"auto",CUSTOM:"custom",NONE:"none"},u={PALETTE:"palette",NONE:"none"}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGIN_ID",(function(){return u})),n.d(t,"PLUGIN_NAME",(function(){return l})),n.d(t,"gaugeFunction",(function(){return i})),n.d(t,"EXPRESSION_GAUGE_NAME",(function(){return s.a})),n.d(t,"GaugeShapes",(function(){return s.e})),n.d(t,"GaugeColorModes",(function(){return s.c})),n.d(t,"GaugeTicksPositions",(function(){return s.f})),n.d(t,"GaugeLabelMajorModes",(function(){return s.d}));var a=n(1),r=n(4),s=n(0),o=n(11);const i=()=>({name:s.a,type:"render",inputTypes:["datatable"],help:a.i18n.translate("expressionGauge.functions.gauge.help",{defaultMessage:"Gauge visualization"}),args:{shape:{types:["string"],options:[s.e.HORIZONTAL_BULLET,s.e.VERTICAL_BULLET,s.e.ARC,s.e.CIRCLE],help:a.i18n.translate("expressionGauge.functions.gauge.args.shape.help",{defaultMessage:"Type of gauge chart"}),required:!0,strict:!0},metric:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.metric.help",{defaultMessage:"Current value"})},min:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.min.help",{defaultMessage:"Minimum value"})},max:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.max.help",{defaultMessage:"Maximum value"})},goal:{types:["string","vis_dimension"],help:a.i18n.translate("expressionGauge.functions.gauge.args.goal.help",{defaultMessage:"Goal Value"})},colorMode:{types:["string"],default:s.c.NONE,options:[s.c.NONE,s.c.PALETTE],help:a.i18n.translate("expressionGauge.functions.gauge.args.colorMode.help",{defaultMessage:"If set to palette, the palette colors will be applied to the bands"}),strict:!0},palette:{types:["palette"],help:a.i18n.translate("expressionGauge.functions.gauge.args.palette.help",{defaultMessage:"Provides colors for the values"})},ticksPosition:{types:["string"],default:s.f.AUTO,options:[s.f.HIDDEN,s.f.AUTO,s.f.BANDS],help:a.i18n.translate("expressionGauge.functions.gauge.args.ticksPosition.help",{defaultMessage:"Specifies the placement of ticks"}),strict:!0},labelMajor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMajor.help",{defaultMessage:"Specifies the labelMajor of the gauge chart displayed inside the chart."})},labelMajorMode:{types:["string"],options:[s.d.NONE,s.d.AUTO,s.d.CUSTOM],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMajorMode.help",{defaultMessage:"Specifies the mode of labelMajor"}),default:s.d.AUTO,strict:!0},labelMinor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.labelMinor.help",{defaultMessage:"Specifies the labelMinor of the gauge chart"})},centralMajor:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.centralMajor.help",{defaultMessage:"Specifies the centralMajor of the gauge chart displayed inside the chart."})},centralMajorMode:{types:["string"],options:[s.d.NONE,s.d.AUTO,s.d.CUSTOM],help:a.i18n.translate("expressionGauge.functions.gauge.args.centralMajorMode.help",{defaultMessage:"Specifies the mode of centralMajor"}),strict:!0},percentageMode:{types:["boolean"],default:!1,help:a.i18n.translate("expressionGauge.functions.gauge.percentageMode.help",{defaultMessage:"Enables relative precentage mode"})},respectRanges:{types:["boolean"],default:!1,help:a.i18n.translate("expressionGauge.functions.gauge.respectRanges.help",{defaultMessage:"Respect max and min values from ranges"})},commonLabel:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gauge.args.commonLabel.help",{defaultMessage:"Specifies the common label outside the chart"})},ariaLabel:{types:["string"],help:a.i18n.translate("expressionGauge.functions.gaugeChart.config.ariaLabel.help",{defaultMessage:"Specifies the aria label of the gauge chart"})}},fn(e,t,n){var i,u,l,c,g,p;Object(r.validateAccessor)(t.metric,e.columns),Object(r.validateAccessor)(t.min,e.columns),Object(r.validateAccessor)(t.max,e.columns),Object(r.validateAccessor)(t.goal,e.columns);const{centralMajor:d,centralMajorMode:f,...h}=t,{metric:b,min:m,max:v,goal:M}=h;if(!Object(o.b)(t.shape)&&(f||d))throw new Error((_=t.shape,a.i18n.translate("expressionGauge.functions.gauge.errors.centralMajorNotSupportedForShapeError",{defaultMessage:'Fields "centralMajor" and "centralMajorMode" are not supported by the shape "{shape}"',values:{shape:_}})));var _;if(null!=n&&null!==(i=n.inspectorAdapters)&&void 0!==i&&i.tables){n.inspectorAdapters.tables.reset(),n.inspectorAdapters.tables.allowCsvExport=!0;const t=Object(r.prepareLogTable)(e,[[b?[b]:void 0,a.i18n.translate("expressionGauge.logDatatable.metric",{defaultMessage:"Metric"})],[m?[m]:void 0,a.i18n.translate("expressionGauge.logDatatable.min",{defaultMessage:"Min"})],[v?[v]:void 0,a.i18n.translate("expressionGauge.logDatatable.max",{defaultMessage:"Max"})],[M?[M]:void 0,a.i18n.translate("expressionGauge.logDatatable.goal",{defaultMessage:"Goal"})]],!0);n.inspectorAdapters.tables.logDatatable("default",t)}const x=Object(o.b)(t.shape)?{centralMajorMode:f||s.b.AUTO,centralMajor:d}:{};return{type:"render",as:s.a,value:{data:e,args:{...h,...x,ariaLabel:null!==(u=null!==(l=t.ariaLabel)&&void 0!==l?l:null===(c=n.variables)||void 0===c?void 0:c.embeddableTitle)&&void 0!==u?u:null===(g=n.getExecutionContext)||void 0===g||null===(p=g.call(n))||void 0===p?void 0:p.description}}}}}),u="expressionGauge",l="expressionGauge"},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){e.exports=n(16)(3)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var a=n(5),r=n.n(a),s=(n(10),n(9)),o=n(3);const i=({title:e,titleId:t,...n})=>{const{chartIcon:a}=Object(s.useCommonChartStyles)();return Object(o.jsx)("svg",r()({width:"30",height:"22",viewBox:"0 0 30 22",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},n),e?Object(o.jsx)("title",{id:t},e):null,Object(o.jsx)("path",{css:a.subdued,d:"M1 13a1 1 0 00-1 1v2a1 1 0 102 0v-1h5v1a1 1 0 102 0v-1h5v1a1 1 0 102 0v-1h5v1a1 1 0 102 0v-1h5v1a1 1 0 102 0v-2a1 1 0 00-1-1H1z"}),Object(o.jsx)("path",{css:a.accent,d:"M0 6a1 1 0 011-1h24a1 1 0 011 1v4a1 1 0 01-1 1H1a1 1 0 01-1-1V6z"}))},u=({title:e,titleId:t,...n})=>{const{chartIcon:a}=Object(s.useCommonChartStyles)();return Object(o.jsx)("svg",r()({width:"30",height:"22",viewBox:"0 0 30 22",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},n),e?Object(o.jsx)("title",{id:t},e):null,Object(o.jsx)("path",{css:a.subdued,d:"M16 22a1 1 0 01-1-1V4a1 1 0 011-1h4a1 1 0 011 1v17a1 1 0 01-1 1h-4z"}),Object(o.jsx)("path",{css:a.accent,d:"M10 0h2a1 1 0 011 1v20a1 1 0 01-1 1h-2a1 1 0 110-2h1v-3h-1a1 1 0 110-2h1v-3h-1a1 1 0 110-2h1V7h-1a1 1 0 010-2h1V2h-1a1 1 0 010-2z"}))}},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(4);const r=(e,t)=>{if(!t||!e)return;const n=e&&t[e];return null===n||Array.isArray(n)&&!n.length?void 0:"number"==typeof n?n:Array.isArray(n)&&"number"==typeof n[n.length-1]?n[n.length-1]:void 0};function s(e){const t=Math.floor(Math.log10(e)),n=e/Math.pow(10,t);let a=10;return n<=1?a=1:n<=2?a=2:n<=5&&(a=5),a*Math.pow(10,t)}const o=(e,t,n,a)=>{const o=null!=t&&t.max?r(t.max,e):void 0;if(null!=o)return o;if(a&&null!=n&&n.rangeMax){const a=null!=t&&t.metric?r(t.metric,e):void 0;return!a||a<(null==n?void 0:n.rangeMax)?null==n?void 0:n.rangeMax:a}if(e&&t){const{metric:r,goal:o}=t,u=r&&e[r],l=o&&e[o],c=i(e,t,n,a);if(null!=u){const e=[c,l,u].filter((e=>"number"==typeof e));return function(e,t){const n=t+1e-7,a=s(n-e),r=s(a/4);return{min:Math.floor(e/r)*r,max:Math.ceil(Math.ceil(n/r)*r)}}(c,Math.max(...e)).max}}return 100},i=(e,t,n,a)=>{const s=null!=t&&t.min?r(t.min,e):void 0;if(null!=s)return s;if(a&&null!=n&&n.rangeMin){const a=null!=t&&t.metric?r(t.metric,e):void 0;return!a||a>(null==n?void 0:n.rangeMin)?null==n?void 0:n.rangeMin:a}if(e&&t){const{metric:n,max:a}=t,r=[n&&e[n],a&&e[a]].filter((e=>"number"==typeof e));if(Math.min(...r)<=0)return Math.min(...r)-10}return 0},u=(e,t)=>{const n=null!=t&&t.goal?r(t.goal,e):void 0;if(null!=n)return n;const a=i(e,t),s=o(e,t);return Math.round(.75*(s-a)+a)},l=(e,t)=>{const{metric:n,min:r,max:s,goal:o}=e;if(n||r||s||o)return{min:r?Object(a.getAccessorByDimension)(r,t):void 0,max:s?Object(a.getAccessorByDimension)(s,t):void 0,goal:o?Object(a.getAccessorByDimension)(o,t):void 0,metric:n?Object(a.getAccessorByDimension)(n,t):void 0}};var c=n(2),g=n(6);const p=e=>({[c.GaugeShapes.HORIZONTAL_BULLET]:g.a,[c.GaugeShapes.VERTICAL_BULLET]:g.a,[c.GaugeShapes.ARC]:"visGoal",[c.GaugeShapes.CIRCLE]:"visGoal"}[e]),d=e=>({[c.GaugeShapes.HORIZONTAL_BULLET]:"horizontalBullet",[c.GaugeShapes.VERTICAL_BULLET]:"verticalBullet",[c.GaugeShapes.ARC]:"goal",[c.GaugeShapes.CIRCLE]:"goal"}[e]),f=()=>({angleStart:Math.PI/2,angleEnd:-(Math.PI+Math.PI/2)}),h=()=>({angleStart:Math.PI+(Math.PI-2*Math.PI/2.5)/2,angleEnd:-(Math.PI-2*Math.PI/2.5)/2}),b=()=>({}),m=e=>({[c.GaugeShapes.HORIZONTAL_BULLET]:b,[c.GaugeShapes.VERTICAL_BULLET]:b,[c.GaugeShapes.ARC]:h,[c.GaugeShapes.CIRCLE]:f}[e]())},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var a=n(0);const r=e=>[a.e.ARC,a.e.CIRCLE].includes(e),s=e=>[a.e.HORIZONTAL_BULLET,a.e.VERTICAL_BULLET].includes(e)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){n(15),__kbnBundles__.define("plugin/expressionGauge/public",n,17),__kbnBundles__.define("plugin/expressionGauge/common",n,2)},function(e,t,n){n.p=window.__kbnPublicPath__.expressionGauge},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return M})),n.d(t,"getGoalValue",(function(){return m.c})),n.d(t,"getMaxValue",(function(){return m.e})),n.d(t,"getMinValue",(function(){return m.f})),n.d(t,"getValueFromAccessor",(function(){return m.h})),n.d(t,"VerticalBulletIcon",(function(){return v.b})),n.d(t,"HorizontalBulletIcon",(function(){return v.a}));var a=n(2),r=n(7);const[s,o]=Object(r.createGetterSetter)("fieldFormats"),[i,u]=Object(r.createGetterSetter)("charts.theme"),[l,c]=Object(r.createGetterSetter)("palette");var g=n(5),p=n.n(g),d=n(1),f=(n(10),n(12)),h=n(13),b=n(3);class plugin_ExpressionGaugePlugin{setup(e,{expressions:t,charts:r}){u(r.theme),r.palettes.getPalettes().then((e=>{c(e)})),t.registerFunction(a.gaugeFunction),t.registerRenderer((({theme:e})=>({name:a.EXPRESSION_GAUGE_NAME,displayName:d.i18n.translate("expressionGauge.renderer.visualizationName",{defaultMessage:"Gauge"}),reuseDomNode:!0,render:async(t,a,r)=>{r.onDestroy((()=>{Object(f.unmountComponentAtNode)(t)}));const{GaugeComponent:o}=await n.e(1).then(n.bind(null,32));Object(f.render)(Object(b.jsx)(h.KibanaThemeProvider,{theme$:e.theme$},Object(b.jsx)("div",{className:"gauge-container","data-test-subj":"gaugeChart"},Object(b.jsx)(o,p()({},a,{formatFactory:s().deserialize,chartsThemeService:i(),paletteService:l(),uiState:r.uiState})))),t,(()=>{r.done()}))}}))({theme:e.theme}))}start(e,{fieldFormats:t}){o(t)}}var m=n(8),v=n(6);function M(){return new plugin_ExpressionGaugePlugin}},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact}]);